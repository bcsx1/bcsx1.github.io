<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>拓扑排序软件设计——ToplogicalSort_app（含有源码、需求分析、可行性分析、概要设计、用户使用手册） - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="拓扑排序软件设计——ToplogicalSort_app（含有源码、需求分析、可行性分析、概要设计、用户使用手册）" />
<meta property="og:description" content="拓扑排序软件设计 前言1. 需求分析2. 可行性分析2.1 简介2.2 技术可行性分析2.2.1 技术实现方案2.2.2 开发人员技能要求2.2.3 可行性 2.3 操作可行性分析2.4 结论 3. 项目报告3.1 修订历史记录3.2 软硬件环境3.3 需求分析3.4 详细设计3.4.1 类设计3.4.2 核心流程描述3.4.3 核心算法设计 4. 运行结果截图4.1 样例14.2 样例24.3 样例34.4 样例44.5 样例5 5. 测试5.1 测试样例15.2 测试样例25.3 测试样例35.4 测试样例45.5 测试样例5 6. 系统特色以及可扩展点6.1系统特色：6.2可扩展点： 4. 源代码部分4.1 项目层级4.2 运行环境4.3 项目核心代码4.3.1 拓扑排序算法TopologicalSort.cpp4.3.2 draw_diagram.py4.3.3 file_manager.py4.3.4 input_manager.py4.3.5 main_window.py4.3.6 topology_manager.py 4.4 GitHub仓库 5. 用户使用手册5.1 运行软件APP5.2 操作app 6. 结束语 前言 这篇博客可能会有点长，因为是一个课程的大作业，包含的内容比较多，这个项目的开发的时间在两周左右，所以这个软件指是一个简单又比较简陋的小桌面应用。
1. 需求分析 导入文件:
用户能够通过界面导入描述课程依赖关系的文本文件（.txt），文件格式为每行表示一个有向边的关系。
绘制拓扑排序图:
根据导入的课程依赖关系，能够绘制出对应的拓扑排序图，使用直观的图形方式展示课程间的依赖关系。
导出图像:
用户可以将绘制好的拓扑排序图导出为图片（.png格式），以便于保存和分享。
导出拓扑排序结果:
用户可以将拓扑排序的结果导出为文本文件（.txt格式），用于后续分析和处理。
展示C&#43;&#43;程序输出:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/95dc64b1ecb3789f8f87f7e227dc689c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-11T17:36:06+08:00" />
<meta property="article:modified_time" content="2023-11-11T17:36:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">拓扑排序软件设计——ToplogicalSort_app（含有源码、需求分析、可行性分析、概要设计、用户使用手册）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>拓扑排序软件设计</h4> 
 <ul><li><a href="#_1" rel="nofollow">前言</a></li><li><a href="#1__5" rel="nofollow">1. 需求分析</a></li><li><a href="#2__29" rel="nofollow">2. 可行性分析</a></li><li><ul><li><a href="#21__30" rel="nofollow">2.1 简介</a></li><li><a href="#22__32" rel="nofollow">2.2 技术可行性分析</a></li><li><ul><li><a href="#221__33" rel="nofollow">2.2.1 技术实现方案</a></li><li><a href="#222__43" rel="nofollow">2.2.2 开发人员技能要求</a></li><li><a href="#223__47" rel="nofollow">2.2.3 可行性</a></li></ul> 
   </li><li><a href="#23__52" rel="nofollow">2.3 操作可行性分析</a></li><li><a href="#24__57" rel="nofollow">2.4 结论</a></li></ul> 
  </li><li><a href="#3__64" rel="nofollow">3. 项目报告</a></li><li><ul><li><a href="#31__65" rel="nofollow">3.1 修订历史记录</a></li><li><a href="#32__76" rel="nofollow">3.2 软硬件环境</a></li><li><a href="#33__82" rel="nofollow">3.3 需求分析</a></li><li><a href="#34___85" rel="nofollow">3.4 详细设计</a></li><li><ul><li><a href="#341__86" rel="nofollow">3.4.1 类设计</a></li><li><a href="#342__110" rel="nofollow">3.4.2 核心流程描述</a></li><li><a href="#343__113" rel="nofollow">3.4.3 核心算法设计</a></li></ul> 
   </li><li><a href="#4__128" rel="nofollow">4. 运行结果截图</a></li><li><ul><li><a href="#41_1_129" rel="nofollow">4.1 样例1</a></li><li><a href="#42_2_131" rel="nofollow">4.2 样例2</a></li><li><a href="#43_3_134" rel="nofollow">4.3 样例3</a></li><li><a href="#44_4_137" rel="nofollow">4.4 样例4</a></li><li><a href="#45_5_140" rel="nofollow">4.5 样例5</a></li></ul> 
   </li><li><a href="#5__143" rel="nofollow">5. 测试</a></li><li><ul><li><a href="#51_1_144" rel="nofollow">5.1 测试样例1</a></li><li><a href="#52_2_158" rel="nofollow">5.2 测试样例2</a></li><li><a href="#53_3_174" rel="nofollow">5.3 测试样例3</a></li><li><a href="#54_4_204" rel="nofollow">5.4 测试样例4</a></li><li><a href="#55_5_229" rel="nofollow">5.5 测试样例5</a></li></ul> 
   </li><li><a href="#6__240" rel="nofollow">6. 系统特色以及可扩展点</a></li><li><ul><li><a href="#61_241" rel="nofollow">6.1系统特色：</a></li><li><a href="#62_259" rel="nofollow">6.2可扩展点：</a></li></ul> 
  </li></ul> 
  </li><li><a href="#4__265" rel="nofollow">4. 源代码部分</a></li><li><ul><li><a href="#41__267" rel="nofollow">4.1 项目层级</a></li><li><a href="#42__299" rel="nofollow">4.2 运行环境</a></li><li><a href="#43___311" rel="nofollow">4.3 项目核心代码</a></li><li><ul><li><a href="#431_TopologicalSortcpp_313" rel="nofollow">4.3.1 拓扑排序算法TopologicalSort.cpp</a></li><li><a href="#432_draw_diagrampy_454" rel="nofollow">4.3.2 draw_diagram.py</a></li><li><a href="#433_file_managerpy_500" rel="nofollow">4.3.3 file_manager.py</a></li><li><a href="#434_input_managerpy_552" rel="nofollow">4.3.4 input_manager.py</a></li><li><a href="#435_main_windowpy_604" rel="nofollow">4.3.5 main_window.py</a></li><li><a href="#436_topology_managerpy_741" rel="nofollow">4.3.6 topology_manager.py</a></li></ul> 
   </li><li><a href="#44_GitHub_789" rel="nofollow">4.4 GitHub仓库</a></li></ul> 
  </li><li><a href="#5__796" rel="nofollow">5. 用户使用手册</a></li><li><ul><li><a href="#51_APP_797" rel="nofollow">5.1 运行软件APP</a></li><li><a href="#52_app_813" rel="nofollow">5.2 操作app</a></li></ul> 
  </li><li><a href="#6__856" rel="nofollow">6. 结束语</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>前言</h2> 
<p>这篇博客可能会有点长，因为是一个课程的大作业，包含的内容比较多，这个项目的开发的时间在两周左右，所以这个软件指是一个简单又比较简陋的小桌面应用。</p> 
<hr> 
<h2><a id="1__5"></a>1. 需求分析</h2> 
<ol><li> <p>导入文件:<br> 用户能够通过界面导入描述课程依赖关系的文本文件（.txt），文件格式为每行表示一个有向边的关系。</p> </li><li> <p>绘制拓扑排序图:<br> 根据导入的课程依赖关系，能够绘制出对应的拓扑排序图，使用直观的图形方式展示课程间的依赖关系。</p> </li><li> <p>导出图像:<br> 用户可以将绘制好的拓扑排序图导出为图片（.png格式），以便于保存和分享。</p> </li><li> <p>导出拓扑排序结果:<br> 用户可以将拓扑排序的结果导出为文本文件（.txt格式），用于后续分析和处理。</p> </li><li> <p>展示C++程序输出:<br> 显示调用外部C++程序计算拓扑排序后的输出结果，以便用户查看拓扑排序的详细信息。</p> </li><li> <p>主界面:<br> 提供导入文件、绘制图像、导出图像、导出拓扑排序结果的按钮，以及显示绘制好的图像和C++程序输出的区域。</p> </li><li> <p>用户操作反馈:<br> 显示错误、警告等反馈信息，确保用户能够清晰了解操作结果。</p> </li><li> <p>性能需求<br> 若所有拓扑排序的结果非常多则需要很快速的返回正确并且结果个数正确的结果，避免用户等待过长的时间。同时绘制拓扑排序图应在合理的时间范围内完成，避免用户等待时间过长。</p> </li><li> <p>其他需求<br> ①软件应该通过所给样例的测试；<br> ②软件应该支持在Windows操作系统上运行</p> </li></ol> 
<hr> 
<h2><a id="2__29"></a>2. 可行性分析</h2> 
<h3><a id="21__30"></a>2.1 简介</h3> 
<p>该文档对拓扑排序图绘制工具项目——TopologicalSort_app软件进行可行性分析，主要包括技术可行性和操作可行性的分析，以确保项目的实施和开发是合理、可行的。</p> 
<h3><a id="22__32"></a>2.2 技术可行性分析</h3> 
<h4><a id="221__33"></a>2.2.1 技术实现方案</h4> 
<p>①使用PySide2库实现图形用户界面，提供友好的交互。<br> ②使用networkx和matplotlib库绘制拓扑排序图，能够高效、准确地展示图形。<br> ③利用Python内置的文件处理功能实现文件导入、导出功能。<br> ④使用subprocess库调用外部C++程序进行拓扑排序，实现图的计算。<br> ⑤使用tempfile库创建临时文件，以保存绘制好的图像。<br> ⑥通过在Python项目中调用C++程序，实现了对拓扑排序的计算。<br> ⑦使用Python的subprocess库调用外部C++程序，并获取其输出。<br> ⑧这种跨语言调用对实现拓扑排序算法具有良好的技术可行性，确保了项目核心功能的实现。</p> 
<h4><a id="222__43"></a>2.2.2 开发人员技能要求</h4> 
<p>①开发人员需熟悉Python编程语言及其相关库，如PySide2、networkx、matplotlib、subprocess等。<br> ②需要了解图论中的拓扑排序算法以及相关概念。</p> 
<h4><a id="223__47"></a>2.2.3 可行性</h4> 
<p>①技术方案基于成熟的Python库实现，具有较高的技术可行性。<br> ②Python具有丰富的第三方库和开发资源，能够快速实现项目需求。</p> 
<h3><a id="23__52"></a>2.3 操作可行性分析</h3> 
<p>①项目设计简单明了，操作界面直观友好，用户容易上手。<br> ②提供了导入、导出、绘制图像等功能按钮，用户操作便捷，符合用户使用习惯。<br> ③C++程序的调用对用户是透明的，用户只需使用界面提供的功能，不需要关心底层实现语言。<br> ④用户操作界面简单明了，易于上手，提供了直观的导入、导出、绘制图像等功能按钮，满足用户操作习惯，操作可行性较高。</p> 
<h3><a id="24__57"></a>2.4 结论</h3> 
<p>①该项目具有较高的技术可行性，开发成本较低，运维成本也较低。操作界面简单明了，用户操作便捷。<br> ②调用C++程序作为拓扑排序的计算引擎是技术上可行的，不会对整体的可行性产生负面影响。<br> ③用户无需关心C++程序调用细节，操作界面简单易用，用户操作的可行性较高，确保了项目的实施和开发是合理、可行的。</p> 
<hr> 
<h2><a id="3__64"></a>3. 项目报告</h2> 
<h3><a id="31__65"></a>3.1 修订历史记录</h3> 
<table><thead><tr><th>日期</th><th>版本</th><th>说明</th><th>作者</th></tr></thead><tbody><tr><td>2023.9.10</td><td>1.0.0</td><td>创建好初步的页面</td><td>hiddenSharp</td></tr><tr><td>2023.9.11</td><td>1.0.1</td><td>完善了页面的排版</td><td>hiddenSharp</td></tr><tr><td>2023.9.14</td><td>1.1.0</td><td>1. 为生成的拓扑排序图片添加了放大和缩小按钮<br>2. 为生成的拓扑图片添加了背景颜色</td><td>hiddenSharp</td></tr><tr><td>2023.9.15</td><td>1.2.0</td><td>1. 删除了放大和缩小按钮<br>2. 优化了图片大小格式以及清晰度<br>3. 新增导入文件后可以之间生成该图的所有拓扑排序结果</td><td>hiddenSharp</td></tr><tr><td>2023.9.16</td><td>1.2.1</td><td>1. 重新导入文件后将清空之前生成的图片并且进度条置零<br>2. 初始化进度条值为0，导入文件后增加50，生成图片后再加50<br>3. 删除了自动导出结果的功能，修改为用户手动点击Export进行结果的导出<br>4. 新增用户进行导出操作后，可以下拉选择导出的文件类型（.txt为所有的拓扑排序结果，.png为拓扑图）</td><td>hiddenSharp</td></tr><tr><td>2023.9.17</td><td>1.2.2</td><td>1. 固定了软件的窗口大小，不可调整窗口大小以及最大化<br>2. 调整了进度条的逻辑，取消了50的值，只有0与100<br>3. 完善了ADD 和 DEL按钮后生成图片以及拓扑排序结果的逻辑<br>4. DEL 按钮和 ADD按钮异常BUG</td><td>hiddenSharp</td></tr><tr><td>2023.9.23</td><td>1.3.0</td><td>进行了项目结构的重构，更加具有面向对象的思想，将各模块分离出来了。新增FileManager类、InputManager类、TopologyManager类，将MainWindow类进行解耦和重构。</td><td>hiddenSharp</td></tr></tbody></table> 
<h3><a id="32__76"></a>3.2 软硬件环境</h3> 
<ul><li>操作系统：Windows</li><li>硬件要求：暂无特定硬件需求</li><li>开发工具：主要的IDE为PyCharm + Visual Stadio 2010；使用到的编程语言为Python + C++；文本编辑器使用的为Notepad++（不是硬性要求）；编译器为Python3.6</li><li>第三方库和依赖项：PySide2 v5.15.2.1、networkx v2.5.1</li></ul> 
<h3><a id="33__82"></a>3.3 需求分析</h3> 
<p>TopologicalSort_app的主要功能是执行拓扑排序算法，用户可以导入图的节点和边，一条边的格式应该为 <code>&lt;arc_start,arc_end&gt;</code> 然后调用C++算法进行排序，随后返回结果并显示在软件屏幕上。上面已经详细说明了需求分析，故在此不再赘述。</p> 
<h3><a id="34___85"></a>3.4 详细设计</h3> 
<h4><a id="341__86"></a>3.4.1 类设计</h4> 
<ul><li><strong>MainWindow类</strong>： 
  <ol><li>在_init_函数中创建主窗口页面、存储主窗口信息、初始化控制器、连接槽函数。</li><li>在clear_topology_graph函数中清空拓扑图</li><li>在run_cpp函数中调用编译后的.cpp文件</li><li>在display_cpp_output函数中显示C++程序的输出到指定位置</li><li>在export_image函数中设置导出拓扑排序图片的操作</li><li>在export_topology函数中设置导出拓扑排序结果的操作</li></ol> </li><li><strong>FileManager类</strong>： 
  <ol><li>在_init_函数中载入MainWindow实例和InputManager实例</li><li>在import_file函数中设置导入文件的操作</li><li>在export函数中设置导出的操作</li></ol> </li><li><strong>InputManager类</strong>： 
  <ol><li>在__init__函数中载入MainWindow实例</li><li>在fill_input_boxes函数中填写相关数据到输入框中</li><li>在add_input_field函数中设置添加输入框的操作</li><li>在del_input_field函数中设置删除输入框的操作</li></ol> </li><li><strong>TopologyManager类</strong>： 
  <ol><li>在__init__函数中载入MainWindow实例</li><li>在generate_draw函数中通过调用draw_diagram文件的相关函数来完成将图片显示在相关位置上。</li></ol> </li></ul> 
<p>注：并没有draw_diagram类，只是一个py文件，里面写了一个draw_directed_graph函数，该函数通过调用networkx和matplotlib来完成图片的生成。</p> 
<h4><a id="342__110"></a>3.4.2 核心流程描述</h4> 
<p>定义一个课程结构体，声明二维向量，利用dfs函数递归进行深度优先搜索，生成所有可能的结果，判断是否存在循环依赖关系，用户可导出排序结果</p> 
<h4><a id="343__113"></a>3.4.3 核心算法设计</h4> 
<ol><li>dfs 函数接收两个参数：课程向量 courses 和拓扑排序的结果向量 result。</li><li>在函数开始定义了一个递归停止条件判断：如果当前拓扑排序结果的大小等于课程向量 courses 的大小，即 result 的大小等于 courses 的大小，说明已经生成了一个完整的拓扑排序结果。</li><li>遍历课程向量 courses。</li></ol> 
<p>(1)对于每一个课程，判断当前课程是否满足拓扑排序的条件，即入度为0且未被访问过；<br> (2)如果满足条件，将其添加到 result 中并将当前课程标记为已访问；<br> (3)对于每一个课程，判断当前课程是否满足拓扑排序的条件，即入度为0且未被访问过；<br> (4)如果满足条件，将其添加到 result 中并将当前课程标记为已访问；<br> (5)遍历当前课程的后继课程；将所有当前课程对应的后继课程入度减1；<br> (6)递归调用 dfs 函数处理下一个课程；<br> (7)回溯，将当前课程标记为未访问，回复后继课程的入度，从 result 中移除最后一门课程，得出其他分支结果；<br> (8)继续遍历下一个课程（更换拓扑排序的起始课程），重复上述步骤（在循环里）；<br> (9)当所有的课程都被遍历完后，dfs 函数执行结束；将当前的拓扑排序结果 result 添加到 allTopologicalSorts 向量中。</p> 
<h3><a id="4__128"></a>4. 运行结果截图</h3> 
<h4><a id="41_1_129"></a>4.1 样例1</h4> 
<p><img src="https://images2.imgbox.com/6d/81/OY5fEdo3_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="42_2_131"></a>4.2 样例2</h4> 
<p><img src="https://images2.imgbox.com/59/88/X36j7HyY_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="43_3_134"></a>4.3 样例3</h4> 
<p><img src="https://images2.imgbox.com/81/57/j7k9SNiG_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="44_4_137"></a>4.4 样例4</h4> 
<p><img src="https://images2.imgbox.com/06/a5/6t09JY9z_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="45_5_140"></a>4.5 样例5</h4> 
<p><img src="https://images2.imgbox.com/1c/4f/w4MU27Fm_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5__143"></a>5. 测试</h3> 
<h4><a id="51_1_144"></a>5.1 测试样例1</h4> 
<ul><li><strong>Filename</strong>：data_1.txt</li><li><strong>Content</strong>：<br> &lt;a,b&gt;<br> &lt;b,c&gt;<br> &lt;c,d&gt;<br> &lt;d,f&gt;<br> &lt;f,g&gt;</li><li><strong>Result</strong>：<br> sort ruselt_1:a b c d f g</li><li><strong>photo</strong>：<br> <img src="https://images2.imgbox.com/e1/4b/NDZQlZux_o.png" alt="在这里插入图片描述"></li></ul> 
<h4><a id="52_2_158"></a>5.2 测试样例2</h4> 
<ul><li><strong>Filename</strong>：data_2.txt</li><li><strong>Content</strong>：<br> &lt;CS 100,CS 200&gt;<br> &lt;CS 200,CS 250&gt;<br> &lt;CS 200,CS 300&gt;<br> &lt;CS 250,CS 350&gt;</li><li><strong>Result</strong>：<br> sort ruselt_1:CS 100 CS 200 CS 250 CS 300 CS 350<br> ---------------------<br> sort ruselt_2:CS 100 CS 200 CS 250 CS 350 CS 300<br> ---------------------<br> sort ruselt_3:CS 100 CS 200 CS 300 CS 250 CS 350</li><li><strong>photo</strong>：<br> <img src="https://images2.imgbox.com/0a/f9/ZAx5nlZk_o.png" alt="在这里插入图片描述"></li></ul> 
<h4><a id="53_3_174"></a>5.3 测试样例3</h4> 
<ul><li><strong>Filename</strong>：data_3.txt</li><li><strong>Content</strong>：<br> &lt;CS 350,CS 250&gt;<br> &lt;MA 140,MA 141&gt;<br> &lt;MA 141,CS 150&gt;<br> &lt;CS 250,CS 225&gt;<br> &lt;MA 141,CS 225&gt;<br> &lt;CS 225,CS 155&gt;<br> &lt;CS 150,CS 155&gt;<br> &lt;CS 155,CS 200&gt;<br> &lt;CS 225,CS 230&gt;<br> &lt;CS 225,CS 300&gt;<br> &lt;CS 300,CS 301&gt;<br> &lt;CS 300,CS 340&gt;<br> &lt;CS 340,CS 345&gt;<br> &lt;CS 340,CS 360&gt;<br> &lt;CS 250,CS 360&gt;<br> &lt;CS 360,CS 390&gt;</li><li><strong>Result</strong>：<br> sort ruselt_1:CS 350 CS 250 MA 140 MA 141 CS 150 CS 225 CS 155 CS 200 CS 230 CS 300 CS 301 CS 340 CS 345 CS 360 CS 390<br> ---------------------<br> sort ruselt_2:CS 350 CS 250 MA 140 MA 141 CS 150 CS 225 CS 155 CS 200 CS 230 CS 300 CS 301 CS 340 CS 360 CS 345 CS 390<br> ……<br> ……<br> ……<br> sort ruselt_113399:MA 140 MA 141 CS 150 CS 350 CS 250 CS 225 CS 300 CS 340 CS 360 CS 390 CS 345 CS 301 CS 155 CS 230 CS 200<br> ---------------------<br> sort ruselt_113400:MA 140 MA 141 CS 150 CS 350 CS 250 CS 225 CS 300 CS 340 CS 360 CS 390 CS 345 CS 301 CS 230 CS 155 CS 200</li></ul> 
<h4><a id="54_4_204"></a>5.4 测试样例4</h4> 
<ul><li> <p><strong>Filename</strong>：data_4.txt</p> </li><li> <p><strong>Content</strong>：<br> &lt; 0,1&gt;<br> &lt; 1,3&gt;<br> &lt; 0,2&gt;<br> &lt; 2,4&gt;<br> &lt; 4,5&gt;<br> &lt; 3,5&gt;</p> </li><li> <p><strong>Result</strong>：<br> sort ruselt_1:0 1 3 2 4 5<br> ---------------------<br> sort ruselt_2:0 1 2 3 4 5<br> ---------------------<br> sort ruselt_3:0 1 2 4 3 5<br> ---------------------<br> sort ruselt_4:0 2 1 3 4 5<br> ---------------------<br> sort ruselt_5:0 2 1 4 3 5<br> ---------------------<br> sort ruselt_6:0 2 4 1 3 5</p> </li><li> <p><strong>Photo</strong>：<br> <img src="https://images2.imgbox.com/57/84/uwSGP2SP_o.png" alt="在这里插入图片描述"></p> </li></ul> 
<h4><a id="55_5_229"></a>5.5 测试样例5</h4> 
<ul><li><strong>Filename</strong>：data_5.txt</li><li><strong>Content</strong>：<br> &lt;0,1&gt;<br> &lt;1,2&gt;<br> &lt;2,0&gt;</li><li><strong>Result</strong>：<br> 存在循环依赖关系</li><li><strong>Photo</strong>：<br> <img src="https://images2.imgbox.com/8b/51/UuIDYDuK_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="6__240"></a>6. 系统特色以及可扩展点</h3> 
<h4><a id="61_241"></a>6.1系统特色：</h4> 
<p>TopologicalSort_app 是一个Python项目，它基于PySide2库实现的图形用户界面(GUI)应用程序，用于创建、导入、导出拓扑排序图。下面将介绍它的一些系统特色：</p> 
<ol><li>图形用户界面(GUI):<br> 使用PySide2的QtDesigner创建了一个图形用户界面名为main.ui存放在statics文件夹下面，提供了文件导入、图形绘制、导出等功能接口。</li><li>拓扑排序图绘制:<br> 通过调用Draw_diagram.py里面的draw_directed_graph函数返回给主界面一个图片的临时地址，生成后若不保存则自动释放资源，不占用计算机内部关键资源。在python文件调用了networkx和matplotlib库实现了拓扑排序图的绘制功能。使用有向图表示节点和边的关系，并在GUI中名为photoLable的QLabel显示该图。</li><li>文件导入和导出:<br> 允许用户导入文本文件（.txt）以填充输入框并绘制拓扑排序图，同时也支持将绘制好的图像导出为图片（.png）或拓扑排序结果导出为文本文件。</li><li>C++程序调用:<br> 由于C++运行速度比python快，故复杂的计算任务交给C++来完成，项目能够调用外部的C++程序（通过使用g++来编译.cpp文件，从而生成.exe文件）python运行该.exe并传入相关参数给.exe文件，最后将输出c++文件返回的结果显示在GUI中。此外，C++程序的输出可以导出为文本文件。</li><li>动态UI加载:<br> 使用PySide2的QUiLoader动态加载UI文件，使得UI可以通过简单的编辑UI文件而不需要修改代码。以此来到模块化编程，更加灵活多变。</li><li>用户操作反馈:<br> 使用QMessageBox提供信息、警告和错误提示，以向用户提供反馈。</li><li>临时文件处理:<br> 使用tempfile库创建临时文件以保存绘制的图像，以便导出功能可以使用这些临时文件。</li><li>异常处理:<br> 项目中实现了异常处理机制，能够捕获并显示错误信息，提高应用程序的健壮性。</li></ol> 
<h4><a id="62_259"></a>6.2可扩展点：</h4> 
<ol><li>将鼠标放置在按钮上会显示出相应信息</li><li>结果图的大小可以自行调节</li></ol> 
<hr> 
<h2><a id="4__265"></a>4. 源代码部分</h2> 
<h3><a id="41__267"></a>4.1 项目层级</h3> 
<pre><code>TopologicalSort_app

├─.idea

├─build

├─core (核心算法)

├─data (读入的文件信息)

├─dist （发布软件的各个版本）

├─docs （所有文档信息）

├─lib

├─log

├─statics （静态资源）

├─test  （测试）

├─venv

└─__pycache__
</code></pre> 
<h3><a id="42__299"></a>4.2 运行环境</h3> 
<ul><li> <p>IDE：pycharm community v2023+</p> </li><li> <p>解释器：python v3.6.8</p> </li><li> <p>外部库： PySide2 v5.15.2.1、networkx v2.5.1、matplotlib v3.3.4</p> </li><li> <p>GUI工具：QtDesigner</p> </li></ul> 
<h3><a id="43___311"></a>4.3 项目核心代码</h3> 
<h4><a id="431_TopologicalSortcpp_313"></a>4.3.1 拓扑排序算法TopologicalSort.cpp</h4> 
<p>写在前面：这个c++程序在整个项目中是比较核心的一个部分，它利用c++运行速度更快来作为核心程序，让整个python项目调用，以达到核心业务和整个项目解耦的目的。这个.cpp文件不会直接调用，项目只会调用编译过后的TopologicalSort.exe，而这个文件会存放在statics文件夹下面。</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sstream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;queue&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unordered_map&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>

using namespace std<span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">Course</span> <span class="token punctuation">{<!-- --></span>
    string name<span class="token punctuation">;</span>  <span class="token comment">// 课程名</span>
    vector<span class="token operator">&lt;</span>Course<span class="token operator">*</span><span class="token operator">&gt;</span> prerequisites<span class="token punctuation">;</span>  <span class="token comment">// 对应的先修课程的指针向量</span>
    <span class="token keyword">int</span> indegree<span class="token punctuation">;</span>  <span class="token comment">// 入度（有多少个先修条件）</span>
    bool visited<span class="token punctuation">;</span>  <span class="token comment">// 判断课程是否被访问过</span>
    <span class="token function">Course</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">name</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">indegree</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">visited</span><span class="token punctuation">(</span>false<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>  <span class="token comment">// 构造函数</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;&gt;</span> allTopologicalSorts<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Course<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> courses<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token operator">&amp;</span> result<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> courses<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        allTopologicalSorts<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 递归终止条件：完成了一次拓扑排序</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> courses<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 遍历每个课程</span>
        Course<span class="token operator">*</span> course <span class="token operator">=</span> courses<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 当前课程</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>course<span class="token operator">-&gt;</span>indegree <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>course<span class="token operator">-&gt;</span>visited<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 如果当前课程的入度为0且未被访问过</span>
            course<span class="token operator">-&gt;</span>visited <span class="token operator">=</span> true<span class="token punctuation">;</span> <span class="token comment">// 标记当前课程已访问</span>

            result<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>course<span class="token operator">-&gt;</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将当前课程添加到当前排列中</span>

            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> course<span class="token operator">-&gt;</span>prerequisites<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 减少当前课程的邻接课程的入度</span>
                Course<span class="token operator">*</span> prerequisite <span class="token operator">=</span> course<span class="token operator">-&gt;</span>prerequisites<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                prerequisite<span class="token operator">-&gt;</span>indegree<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token function">dfs</span><span class="token punctuation">(</span>courses<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//递归</span>

            course<span class="token operator">-&gt;</span>visited <span class="token operator">=</span> false<span class="token punctuation">;</span> <span class="token comment">// 标记当前课程为未访问状态</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> course<span class="token operator">-&gt;</span>prerequisites<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 回溯：撤销之前的修改</span>
                Course<span class="token operator">*</span> prerequisite <span class="token operator">=</span> course<span class="token operator">-&gt;</span>prerequisites<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                prerequisite<span class="token operator">-&gt;</span>indegree<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// 恢复后续邻接课程的入度</span>
            <span class="token punctuation">}</span>
            result<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 移除当前排列中的最后一门课程</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

bool <span class="token function">printAllTopologicalSorts</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Course<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> courses<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> result<span class="token punctuation">;</span>
    <span class="token function">dfs</span><span class="token punctuation">(</span>courses<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">!</span>allTopologicalSorts<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">shuchu</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Course<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> courses<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> allTopologicalSorts<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"sort ruselt_"</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">++</span>count <span class="token operator">&lt;&lt;</span> <span class="token char">':'</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> allTopologicalSorts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            cout <span class="token operator">&lt;&lt;</span> allTopologicalSorts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> allTopologicalSorts<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">"---------------------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>argc <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Usage: "</span> <span class="token operator">&lt;&lt;</span> argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" &lt;filename&gt;"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    string filename <span class="token operator">=</span> argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  
    vector<span class="token operator">&lt;</span>Course<span class="token operator">*</span><span class="token operator">&gt;</span> courses<span class="token punctuation">;</span>
    unordered_map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Course<span class="token operator">*</span><span class="token operator">&gt;</span> courseMap<span class="token punctuation">;</span>

    ifstream <span class="token function">file</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">is_open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        string line<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">getline</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> line<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> line<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            stringstream <span class="token function">ss</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
            string courseName<span class="token punctuation">,</span> prereqName<span class="token punctuation">;</span>
            <span class="token function">getline</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span> courseName<span class="token punctuation">,</span> <span class="token char">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">getline</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span> prereqName<span class="token punctuation">)</span><span class="token punctuation">;</span>

            Course<span class="token operator">*</span> course <span class="token operator">=</span> courseMap<span class="token punctuation">[</span>courseName<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>course<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                course <span class="token operator">=</span> new <span class="token function">Course</span><span class="token punctuation">(</span>courseName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                courses<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>course<span class="token punctuation">)</span><span class="token punctuation">;</span>
                courseMap<span class="token punctuation">[</span>courseName<span class="token punctuation">]</span> <span class="token operator">=</span> course<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            Course<span class="token operator">*</span> prereq <span class="token operator">=</span> courseMap<span class="token punctuation">[</span>prereqName<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>prereq<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                prereq <span class="token operator">=</span> new <span class="token function">Course</span><span class="token punctuation">(</span>prereqName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                courses<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>prereq<span class="token punctuation">)</span><span class="token punctuation">;</span>
                courseMap<span class="token punctuation">[</span>prereqName<span class="token punctuation">]</span> <span class="token operator">=</span> prereq<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            course<span class="token operator">-&gt;</span>prerequisites<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>prereq<span class="token punctuation">)</span><span class="token punctuation">;</span>
            prereq<span class="token operator">-&gt;</span>indegree<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"无法打开文件"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">printAllTopologicalSorts</span><span class="token punctuation">(</span>courses<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">shuchu</span><span class="token punctuation">(</span>courses<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"存在循环依赖关系"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> courses<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        delete courses<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    courses<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="432_draw_diagrampy_454"></a>4.3.2 draw_diagram.py</h4> 
<pre><code class="prism language-python"><span class="token keyword">import</span> networkx <span class="token keyword">as</span> nx
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> tempfile

<span class="token keyword">def</span> <span class="token function">draw_directed_graph</span><span class="token punctuation">(</span>edges<span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># 创建一个有向图对象</span>
        G <span class="token operator">=</span> nx<span class="token punctuation">.</span>DiGraph<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 添加有向边</span>
        <span class="token keyword">for</span> data <span class="token keyword">in</span> edges<span class="token punctuation">:</span>
            data <span class="token operator">=</span> data<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">'&lt;&gt;'</span><span class="token punctuation">)</span>
            source<span class="token punctuation">,</span> target <span class="token operator">=</span> data<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
            G<span class="token punctuation">.</span>add_edge<span class="token punctuation">(</span>source<span class="token punctuation">,</span> target<span class="token punctuation">)</span>

        <span class="token comment"># 设置图片的大小</span>
        plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span>figsize<span class="token punctuation">)</span>

        <span class="token comment"># 绘制有向图</span>
        pos <span class="token operator">=</span> nx<span class="token punctuation">.</span>spring_layout<span class="token punctuation">(</span>G<span class="token punctuation">)</span>

        <span class="token comment"># Adjust node positions for labels to be around the nodes</span>
        pos_labels <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>node<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token operator">+</span> <span class="token number">0.01</span><span class="token punctuation">)</span> <span class="token keyword">for</span> node<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">in</span> pos<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

        nx<span class="token punctuation">.</span>draw<span class="token punctuation">(</span>G<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> with_labels<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> node_color<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">,</span> node_size<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> arrows<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

        <span class="token comment"># Draw labels separately with adjusted positions</span>
        nx<span class="token punctuation">.</span>draw_networkx_labels<span class="token punctuation">(</span>G<span class="token punctuation">,</span> pos_labels<span class="token punctuation">,</span> font_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>

        <span class="token comment"># 保存图形到临时文件</span>
        <span class="token keyword">with</span> tempfile<span class="token punctuation">.</span>NamedTemporaryFile<span class="token punctuation">(</span>suffix<span class="token operator">=</span><span class="token string">".png"</span><span class="token punctuation">,</span> delete<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token keyword">as</span> tmpfile<span class="token punctuation">:</span>
            plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span>tmpfile<span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">"png"</span><span class="token punctuation">,</span> bbox_inches<span class="token operator">=</span><span class="token string">"tight"</span><span class="token punctuation">)</span>

        <span class="token comment"># 返回临时文件的路径</span>
        <span class="token keyword">return</span> tmpfile<span class="token punctuation">.</span>name

    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"生成图时出现错误：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

</code></pre> 
<h4><a id="433_file_managerpy_500"></a>4.3.3 file_manager.py</h4> 
<pre><code class="prism language-python"><span class="token keyword">from</span> PySide2<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QFileDialog<span class="token punctuation">,</span> QMessageBox
<span class="token keyword">class</span> <span class="token class-name">FileManager</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> main_window<span class="token punctuation">,</span> input_manager<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>main_window <span class="token operator">=</span> main_window
        self<span class="token punctuation">.</span>input_manager <span class="token operator">=</span> input_manager

    <span class="token keyword">def</span> <span class="token function">import_file</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        options <span class="token operator">=</span> QFileDialog<span class="token punctuation">.</span>Options<span class="token punctuation">(</span><span class="token punctuation">)</span>
        file_path<span class="token punctuation">,</span> _ <span class="token operator">=</span> QFileDialog<span class="token punctuation">.</span>getOpenFileName<span class="token punctuation">(</span>self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">,</span> <span class="token string">"选择要导入的文件"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"文本文件 (*.txt);;所有文件 (*)"</span><span class="token punctuation">,</span> options<span class="token operator">=</span>options<span class="token punctuation">)</span>

        <span class="token keyword">if</span> file_path<span class="token punctuation">:</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>clear_topology_graph<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 清空拓扑排序图</span>
                self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>file_path <span class="token operator">=</span> file_path

                <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
                    file_content <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>

                    <span class="token comment"># 调用C++文件并获取结果</span>
                    cpp_output <span class="token operator">=</span> self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>run_cpp<span class="token punctuation">(</span>file_path<span class="token punctuation">)</span>
                    <span class="token comment"># 将结果显示在plainTextEdit上</span>
                    self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>display_cpp_output<span class="token punctuation">(</span>cpp_output<span class="token punctuation">)</span>
                    self<span class="token punctuation">.</span>input_manager<span class="token punctuation">.</span>fill_input_boxes<span class="token punctuation">(</span>file_content<span class="token punctuation">)</span>

            <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
                QMessageBox<span class="token punctuation">.</span>critical<span class="token punctuation">(</span>self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">,</span> <span class="token string">"错误"</span><span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f"导入文件时出现错误：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            QMessageBox<span class="token punctuation">.</span>warning<span class="token punctuation">(</span>self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">,</span> <span class="token string">"警告"</span><span class="token punctuation">,</span> <span class="token string">"未选择任何文件"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">export</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        options <span class="token operator">=</span> QFileDialog<span class="token punctuation">.</span>Options<span class="token punctuation">(</span><span class="token punctuation">)</span>
        export_option<span class="token punctuation">,</span> _ <span class="token operator">=</span> QFileDialog<span class="token punctuation">.</span>getSaveFileName<span class="token punctuation">(</span>self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">,</span> <span class="token string">"选择导出路径"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span>
                                                       <span class="token string">"Images (*.png);;Text Files (*.txt)"</span><span class="token punctuation">,</span> options<span class="token operator">=</span>options<span class="token punctuation">)</span>

        <span class="token keyword">if</span> export_option<span class="token punctuation">:</span>
            <span class="token keyword">if</span> export_option<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">".png"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token comment"># 导出图片</span>
                self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>export_image<span class="token punctuation">(</span>export_option<span class="token punctuation">)</span>
            <span class="token keyword">elif</span> export_option<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">".txt"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token comment"># 导出拓扑排序结果</span>
                self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>export_topology<span class="token punctuation">(</span>export_option<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                QMessageBox<span class="token punctuation">.</span>warning<span class="token punctuation">(</span>self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">,</span> <span class="token string">"警告"</span><span class="token punctuation">,</span> <span class="token string">"不支持的导出格式"</span><span class="token punctuation">)</span>


</code></pre> 
<h4><a id="434_input_managerpy_552"></a>4.3.4 input_manager.py</h4> 
<pre><code class="prism language-python"><span class="token keyword">from</span> PySide2<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> Qt
<span class="token keyword">from</span> PySide2<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QListWidgetItem<span class="token punctuation">,</span> QLineEdit<span class="token punctuation">,</span> QAbstractItemView

<span class="token keyword">class</span> <span class="token class-name">InputManager</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> main_window<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>main_window <span class="token operator">=</span> main_window

    <span class="token keyword">def</span> <span class="token function">fill_input_boxes</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> file_content<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 清空现有输入框的内容</span>
        self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>inputList<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
        data_list <span class="token operator">=</span> file_content<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>  <span class="token comment"># 按换行符分割数据</span>
        <span class="token keyword">for</span> data <span class="token keyword">in</span> data_list<span class="token punctuation">:</span>
            data <span class="token operator">=</span> data<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> data<span class="token punctuation">:</span>
                <span class="token comment"># 提取源节点和目标节点</span>
                source<span class="token punctuation">,</span> target <span class="token operator">=</span> data<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
                source <span class="token operator">=</span> source<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
                target <span class="token operator">=</span> target<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>

                <span class="token comment"># 创建适当的输入格式</span>
                input_item <span class="token operator">=</span> QListWidgetItem<span class="token punctuation">(</span><span class="token punctuation">)</span>
                input_line_edit <span class="token operator">=</span> QLineEdit<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>source<span class="token punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>target<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
                input_line_edit<span class="token punctuation">.</span>setAlignment<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>AlignCenter<span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>inputList<span class="token punctuation">.</span>addItem<span class="token punctuation">(</span>input_item<span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>inputList<span class="token punctuation">.</span>setItemWidget<span class="token punctuation">(</span>input_item<span class="token punctuation">,</span> input_line_edit<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">add_input_field</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        input_item <span class="token operator">=</span> QListWidgetItem<span class="token punctuation">(</span><span class="token punctuation">)</span>
        input_line_edit <span class="token operator">=</span> QLineEdit<span class="token punctuation">(</span><span class="token string">'&lt;start,end&gt;'</span><span class="token punctuation">)</span>
        input_line_edit<span class="token punctuation">.</span>setAlignment<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>AlignCenter<span class="token punctuation">)</span>  <span class="token comment"># 设置文本居中对齐</span>
        self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>inputList<span class="token punctuation">.</span>addItem<span class="token punctuation">(</span>input_item<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>inputList<span class="token punctuation">.</span>setItemWidget<span class="token punctuation">(</span>input_item<span class="token punctuation">,</span> input_line_edit<span class="token punctuation">)</span>

        <span class="token comment"># 将边信息添加到列表中</span>
        self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>edge_info<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'&lt;start,end&gt;'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">del_input_field</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        selected_items <span class="token operator">=</span> self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>inputList<span class="token punctuation">.</span>selectedItems<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> item <span class="token keyword">in</span> selected_items<span class="token punctuation">:</span>
            index <span class="token operator">=</span> self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>inputList<span class="token punctuation">.</span>row<span class="token punctuation">(</span>item<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>inputList<span class="token punctuation">.</span>takeItem<span class="token punctuation">(</span>index<span class="token punctuation">)</span>

            <span class="token comment"># 从列表中删除对应的边信息</span>
            <span class="token keyword">if</span> index <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>edge_info<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">del</span> self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>edge_info<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
</code></pre> 
<h4><a id="435_main_windowpy_604"></a>4.3.5 main_window.py</h4> 
<pre><code class="prism language-python"><span class="token keyword">import</span> os
<span class="token keyword">import</span> subprocess

<span class="token keyword">from</span> PySide2<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> <span class="token punctuation">(</span>
    QFileDialog<span class="token punctuation">,</span> QMessageBox<span class="token punctuation">,</span> QListWidgetItem<span class="token punctuation">,</span>
    QLineEdit<span class="token punctuation">,</span> QAbstractItemView<span class="token punctuation">,</span> QWidget<span class="token punctuation">,</span>
    QVBoxLayout<span class="token punctuation">,</span> QLabel
<span class="token punctuation">)</span>
<span class="token keyword">from</span> PySide2<span class="token punctuation">.</span>QtUiTools <span class="token keyword">import</span> QUiLoader
<span class="token keyword">from</span> PySide2<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> Qt
<span class="token keyword">from</span> <span class="token punctuation">.</span>file_manager <span class="token keyword">import</span> FileManager
<span class="token keyword">from</span> <span class="token punctuation">.</span>input_manager <span class="token keyword">import</span> InputManager
<span class="token keyword">from</span> <span class="token punctuation">.</span>topology_manager <span class="token keyword">import</span> TopologyManager

<span class="token keyword">class</span> <span class="token class-name">MainWindow</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 动态加载.ui文件</span>
        self<span class="token punctuation">.</span>ui <span class="token operator">=</span> QUiLoader<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'statics/main.ui'</span><span class="token punctuation">)</span>
        <span class="token comment"># 禁止调整窗口大小</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>setFixedSize<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># 设置窗口属性，禁止最大化</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>setWindowFlags<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>windowFlags<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token operator">~</span>Qt<span class="token punctuation">.</span>WindowMaximizeButtonHint<span class="token punctuation">)</span>

        <span class="token comment"># 用于存储边信息的列表</span>
        self<span class="token punctuation">.</span>edge_info <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token comment"># 存储文件路径</span>
        self<span class="token punctuation">.</span>file_path <span class="token operator">=</span> <span class="token boolean">None</span>

        <span class="token comment"># 初始化控制器</span>
        self<span class="token punctuation">.</span>input_manager <span class="token operator">=</span> InputManager<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>file_manager <span class="token operator">=</span> FileManager<span class="token punctuation">(</span>self<span class="token punctuation">,</span> self<span class="token punctuation">.</span>input_manager<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>topology_manager <span class="token operator">=</span> TopologyManager<span class="token punctuation">(</span>self<span class="token punctuation">)</span>

        <span class="token comment"># 连接相关操作的槽函数</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>actionImport<span class="token punctuation">.</span>triggered<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>file_manager<span class="token punctuation">.</span>import_file<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>actionExport<span class="token punctuation">.</span>triggered<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>file_manager<span class="token punctuation">.</span>export<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>addButton<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>input_manager<span class="token punctuation">.</span>add_input_field<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>delButton<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>input_manager<span class="token punctuation">.</span>del_input_field<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>generateButton<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>topology_manager<span class="token punctuation">.</span>generate_draw<span class="token punctuation">)</span>

        <span class="token comment"># 设置输入框为单选模式</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>inputList<span class="token punctuation">.</span>setSelectionMode<span class="token punctuation">(</span>QAbstractItemView<span class="token punctuation">.</span>SingleSelection<span class="token punctuation">)</span>

        <span class="token comment"># 设置按钮的提示文本</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>addButton<span class="token punctuation">.</span>setToolTip<span class="token punctuation">(</span><span class="token string">"添加输入框 (Alt + A)"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>delButton<span class="token punctuation">.</span>setToolTip<span class="token punctuation">(</span><span class="token string">"删除输入框 (Alt + D)"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>generateButton<span class="token punctuation">.</span>setToolTip<span class="token punctuation">(</span><span class="token string">"生成拓扑排序结果 (Alt + Enter)"</span><span class="token punctuation">)</span>

        <span class="token comment"># 创建一个 QWidget 作为容器</span>
        self<span class="token punctuation">.</span>photo_container <span class="token operator">=</span> QWidget<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>photoLabel<span class="token punctuation">.</span>layout<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>addWidget<span class="token punctuation">(</span>self<span class="token punctuation">.</span>photo_container<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>photoLabel<span class="token punctuation">.</span>setStyleSheet<span class="token punctuation">(</span><span class="token string">"background-color: white;"</span><span class="token punctuation">)</span>

        <span class="token comment"># 在容器上设置布局</span>
        container_layout <span class="token operator">=</span> QVBoxLayout<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>photo_container<span class="token punctuation">.</span>setLayout<span class="token punctuation">(</span>container_layout<span class="token punctuation">)</span>

        <span class="token comment"># 将 QLabel 添加到容器中</span>
        self<span class="token punctuation">.</span>photo_label <span class="token operator">=</span> QLabel<span class="token punctuation">(</span><span class="token punctuation">)</span>
        container_layout<span class="token punctuation">.</span>addWidget<span class="token punctuation">(</span>self<span class="token punctuation">.</span>photo_label<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">clear_topology_graph</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>photo_label<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 清空 QLabel 上的图像</span>
        self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>progressBar<span class="token punctuation">.</span>setValue<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># 重置进度条的值</span>

    <span class="token keyword">def</span> <span class="token function">run_cpp</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token comment"># 获取当前脚本所在目录</span>
            script_directory <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">)</span>

            <span class="token comment"># 构建调用命令</span>
            cpp_executable_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>script_directory<span class="token punctuation">,</span> <span class="token string">'TopologicalSort.exe'</span><span class="token punctuation">)</span>
            command <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>cpp_executable_path<span class="token punctuation">}</span></span><span class="token string">" "</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>file_path<span class="token punctuation">}</span></span><span class="token string">"'</span></span>

            <span class="token comment"># 调用外部程序</span>
            result <span class="token operator">=</span>  subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>command<span class="token punctuation">,</span> shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">)</span>

            <span class="token comment"># 返回结果</span>
            <span class="token keyword">return</span> result<span class="token punctuation">.</span>stdout

        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Error during running C++ program:"</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token string">"Error: Unable to run C++ program"</span>

    <span class="token comment"># 在plainTextEdit中显示C++程序的输出</span>
    <span class="token keyword">def</span> <span class="token function">display_cpp_output</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> cpp_output<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token comment"># 将字节串解码为字符串</span>
            cpp_output_str <span class="token operator">=</span> cpp_output<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

            <span class="token comment"># 在plainTextEdit中显示C++程序的输出</span>
            self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>plainTextEdit<span class="token punctuation">.</span>setPlainText<span class="token punctuation">(</span>cpp_output_str<span class="token punctuation">)</span>
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Error: Unable to display C++ output:"</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>plainTextEdit<span class="token punctuation">.</span>setPlainText<span class="token punctuation">(</span><span class="token string">"Error: Unable to display C++ output"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">export_image</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> export_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        pixmap <span class="token operator">=</span> self<span class="token punctuation">.</span>photo_label<span class="token punctuation">.</span>pixmap<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> pixmap<span class="token punctuation">:</span>
            pixmap<span class="token punctuation">.</span>save<span class="token punctuation">(</span>export_path<span class="token punctuation">,</span> <span class="token string">"PNG"</span><span class="token punctuation">)</span>
            QMessageBox<span class="token punctuation">.</span>information<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui<span class="token punctuation">,</span> <span class="token string">"导出成功"</span><span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f"图像已成功导出到：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>export_path<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            QMessageBox<span class="token punctuation">.</span>warning<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui<span class="token punctuation">,</span> <span class="token string">"警告"</span><span class="token punctuation">,</span> <span class="token string">"没有图像可导出"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">export_topology</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> export_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token comment"># 获取C++程序的输出</span>
            cpp_output <span class="token operator">=</span> self<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>plainTextEdit<span class="token punctuation">.</span>toPlainText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

            <span class="token comment"># 写入文件</span>
            <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>export_path<span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
                <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>cpp_output<span class="token punctuation">)</span>

            QMessageBox<span class="token punctuation">.</span>information<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui<span class="token punctuation">,</span> <span class="token string">"导出成功"</span><span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f"拓扑排序结果已成功导出到：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>export_path<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            QMessageBox<span class="token punctuation">.</span>critical<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui<span class="token punctuation">,</span> <span class="token string">"错误"</span><span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f"导出拓扑排序结果时出现错误：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token comment"># Create the application instance</span>
    <span class="token keyword">import</span> sys
    <span class="token keyword">from</span> PySide2<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QApplication
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>

    <span class="token comment"># Create and show the main window</span>
    mainWindow <span class="token operator">=</span> MainWindow<span class="token punctuation">(</span><span class="token punctuation">)</span>
    mainWindow<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># Start the event loop</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> 
<h4><a id="436_topology_managerpy_741"></a>4.3.6 topology_manager.py</h4> 
<pre><code class="prism language-python"><span class="token keyword">from</span> PySide2<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> QPixmap
<span class="token keyword">from</span> PySide2<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QMessageBox

<span class="token keyword">from</span> <span class="token punctuation">.</span>draw_diagram <span class="token keyword">import</span> draw_directed_graph

<span class="token keyword">class</span> <span class="token class-name">TopologyManager</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> main_window<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>main_window <span class="token operator">=</span> main_window
    <span class="token keyword">def</span> <span class="token function">generate_draw</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>file_path<span class="token punctuation">:</span>
                QMessageBox<span class="token punctuation">.</span>warning<span class="token punctuation">(</span>self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">,</span> <span class="token string">"警告"</span><span class="token punctuation">,</span> <span class="token string">"未选择任何文件"</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span>

            <span class="token comment"># 获取所有输入框的值</span>
            input_items <span class="token operator">=</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>inputList<span class="token punctuation">.</span>itemWidget<span class="token punctuation">(</span>self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>inputList<span class="token punctuation">.</span>item<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token punctuation">)</span>
                           <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>inputList<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

            <span class="token comment"># 将边信息更新为当前输入框中的值</span>
            self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>edge_info <span class="token operator">=</span> input_items

            <span class="token comment"># 调用绘图函数并获取图形文件路径</span>
            graph_image_path <span class="token operator">=</span> draw_directed_graph<span class="token punctuation">(</span>input_items<span class="token punctuation">)</span>

            <span class="token keyword">if</span> graph_image_path<span class="token punctuation">:</span>
                <span class="token comment"># 将图形文件设置为QLabel的图像</span>
                pixmap <span class="token operator">=</span> QPixmap<span class="token punctuation">(</span>graph_image_path<span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>photo_label<span class="token punctuation">.</span>setPixmap<span class="token punctuation">(</span>pixmap<span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>progressBar<span class="token punctuation">.</span>setValue<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

            <span class="token comment"># 更新文件中的边信息（覆盖原文件）</span>
            <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>file_path<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
                <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>input_items<span class="token punctuation">)</span><span class="token punctuation">)</span>

            <span class="token comment"># 重新调用C++程序并更新输出</span>
            cpp_output <span class="token operator">=</span> self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>run_cpp<span class="token punctuation">(</span>self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>file_path<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>display_cpp_output<span class="token punctuation">(</span>cpp_output<span class="token punctuation">)</span>

        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Error during generate_draw:"</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> 
<h3><a id="44_GitHub_789"></a>4.4 GitHub仓库</h3> 
<p>有这些核心源代码可能远远不够，因为还有些不是代码的核心文件，如：使用QtDesigner设计的页面UI——main.ui文件，因此在下面我会放上这个项目的GitHub仓库地址，如果有需要可以自取哦~</p> 
<p><a href="https://github.com/hiddenSharp429/ToplogicalSort_app">https://github.com/hiddenSharp429/ToplogicalSort_app</a></p> 
<hr> 
<h2><a id="5__796"></a>5. 用户使用手册</h2> 
<h3><a id="51_APP_797"></a>5.1 运行软件APP</h3> 
<p>①打开TopologicalSort_app文件夹，双击dist文件夹进入所有发布程序选择页面<br> <img src="https://images2.imgbox.com/5f/de/sWOlfGAV_o.png" alt="在这里插入图片描述"></p> 
<p>②选择需要运行的软件版本<br> <img src="https://images2.imgbox.com/6e/6c/85DEfBd6_o.png" alt="在这里插入图片描述"></p> 
<p>各个版本的区别请看\ToplogicalSort_app\docs\ToplogicalSort_app更新日志.md</p> 
<p>③进入某一个版本的文件夹后下拉找到main.exe文件<br> <img src="https://images2.imgbox.com/7b/16/wfLE83DW_o.png" alt="在这里插入图片描述"></p> 
<p>④双击后启动软件</p> 
<h3><a id="52_app_813"></a>5.2 操作app</h3> 
<p>①点击左上角<code>菜单 </code>ico<br> <img src="https://images2.imgbox.com/ee/f6/dcnIIr9g_o.png" alt="在这里插入图片描述"></p> 
<p>②选择导入选项卡<br> <img src="https://images2.imgbox.com/e5/42/aUHcNP2P_o.png" alt="在这里插入图片描述"><br> ③选择需要导入的文件<br> <img src="https://images2.imgbox.com/3f/46/Ob1keCRL_o.png" alt="在这里插入图片描述"></p> 
<p>一般测试样例都会放在\ToplogicalSort_app\data\里面<br> ④导入后左边的输入框将会生成，文件中的文本将会被匹配填充，并且在下面的输入框中输出了所有拓扑排序的结果</p> 
<p><img src="https://images2.imgbox.com/29/da/k0NWJ7gk_o.png" alt="在这里插入图片描述"></p> 
<p>测试样例的格式如下<br> <img src="https://images2.imgbox.com/81/c4/XbsTg20u_o.png" alt="在这里插入图片描述"></p> 
<p>⑤随后点击Generate按钮生成拓扑排序图片</p> 
<p><img src="https://images2.imgbox.com/bf/78/GmTLy2K0_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/65/b4/Q3KOEbNf_o.png" alt="在这里插入图片描述"></p> 
<p>⑥至此完成基本的功能，可以点击<code>菜单</code>选择导出选项卡<br> <img src="https://images2.imgbox.com/0a/ae/sTbAOnIH_o.png" alt="在这里插入图片描述"></p> 
<p>⑦可选择导出.txt类型文件还是.png文件，若为.txt文件则导出所有拓扑排序的结果，若为.png文件则导出拓扑图<br> <img src="https://images2.imgbox.com/e0/bd/B92MQ8eX_o.png" alt="在这里插入图片描述"></p> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/31/8f/hwDli7mh_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2a/d3/EZLdYX17_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/21/2e/AN3uOtwt_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/47/58/ng8Vinjj_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="6__856"></a>6. 结束语</h2> 
<p>如果有疑问欢迎大家留言讨论，你如果觉得这篇文章对你有帮助可以给我一个免费的赞吗？我们之间的交流是我最大的动力！</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/486e11d75f452ca443be703549fc5e1a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">LeetCode 513找树左下角的值 112路径之和 106从中序与后序遍历序列构造二叉树 | 代码随想录25期训练营day18</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/43d0e48ba3cfffbad63b94a207512e00/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计组03：20min导图复习 中央处理器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>