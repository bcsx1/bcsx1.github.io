<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android蓝牙 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android蓝牙" />
<meta property="og:description" content="目录
一、第一种框架集成方式
1.在项目根目录的build.gradle文件中，添加如下配置：
2.在app module的build.gradle中，添加依赖：
3.使用前先在你应用的Application中调init方法初始化框架
4.然后必须调用enableBluetooth()方法开启蓝牙功能，你可以在activity中调用：
5.如果是低功耗蓝牙，需要设置配置项，经典蓝牙忽略跳过这一步即可：
6.开启蓝牙能力后，接着你就可以开始进行蓝牙设备扫描，其中，type 为蓝牙设备类型（经典蓝牙或低功耗蓝牙）：
7.一旦扫描到设备，你就可以找到目标设备并连接：
8.设备连接成功后，你可以开始跟设备进行通信：
9.那么如何接收蓝牙设备返回给你的数据呢，很简单，在Receiver中接收：
10.最后，调用以下方法去主动断开连接并释放资源 ：
第二种集成方式
1.由于是代码引入，故无需像第一步那样进行库的引入，直接在Application中初始化。
2.蓝牙界面
3.UUidStateBean对象
4.蓝牙信息对象BletoothInfoBen
5.进度对话框
6.ble_servies_select_dialog布局
7.gble_layout蓝牙布局
Android 蓝牙开发，很多项目会使用到，自己去摸索封装或者引用其他框架，也能解决部分问题。为何说是部分问题，Android蓝牙分为低功耗版与经典版，经典版是可以直接选择即可实现链接，低功耗版是需要配置uuid。故推荐一个框架，下面来分享使用教程。分两部分第一部分是直接使用框架，第二部分是修改框架源码，使用哪一种方式可以结合自己的需要。Android开发建议使用Android蓝牙调试工具app初步调试使用，这里推荐BLE调试助手app，各大应用市场都可以下载。BLE调试助手首页展示。 Java语言版本地址：https://github.com/g-HJY/HBluetooth
Kotlin语言版本地址：https://github.com/g-HJY/Kotlin-HBluetooth （暂停维护）
一、第一种框架集成方式 首先是集成方式，当然你可以直接在github上将整个项目下载下来，也可以将其以依赖的形式集成到你的项目中，具体步骤如下：
1.在项目根目录的build.gradle文件中，添加如下配置： allprojects { repositories { ... maven { url &#39;https://jitpack.io&#39; } } } 2.在app module的build.gradle中，添加依赖： dependencies { implementation &#39;com.github.g-HJY:HBluetooth:V1.3.6&#39; } 3.使用前先在你应用的Application中调init方法初始化框架 public class XiaoYaApp extends MultiDexApplication { @Override public void onCreate() { super.onCreate(); HBluetooth.init(this); } } 4.然后必须调用enableBluetooth()方法开启蓝牙功能，你可以在activity中调用： //开启蓝牙功能 HBluetooth.getInstance().enableBluetooth() 5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/ef2f6fe877461ac6ca0ea4613c63e6b0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-12T14:21:57+08:00" />
<meta property="article:modified_time" content="2023-12-12T14:21:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android蓝牙</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%A1%86%E6%9E%B6%E9%9B%86%E6%88%90%E6%96%B9%E5%BC%8F-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%A1%86%E6%9E%B6%E9%9B%86%E6%88%90%E6%96%B9%E5%BC%8F" rel="nofollow">一、第一种框架集成方式</a></p> 
<p id="1.%E5%9C%A8%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E7%9A%84build.gradle%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%8C%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%E9%85%8D%E7%BD%AE%EF%BC%9A-toc" style="margin-left:40px;"><a href="#1.%E5%9C%A8%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E7%9A%84build.gradle%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%8C%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%E9%85%8D%E7%BD%AE%EF%BC%9A" rel="nofollow">1.在项目根目录的build.gradle文件中，添加如下配置：</a></p> 
<p id="2.%E5%9C%A8app%20module%E7%9A%84build.gradle%E4%B8%AD%EF%BC%8C%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%EF%BC%9A-toc" style="margin-left:40px;"><a href="#2.%E5%9C%A8app%20module%E7%9A%84build.gradle%E4%B8%AD%EF%BC%8C%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%EF%BC%9A" rel="nofollow">2.在app module的build.gradle中，添加依赖：</a></p> 
<p id="3.%E4%BD%BF%E7%94%A8%E5%89%8D%E5%85%88%E5%9C%A8%E4%BD%A0%E5%BA%94%E7%94%A8%E7%9A%84Application%E4%B8%AD%E8%B0%83init%E6%96%B9%E6%B3%95%E5%88%9D%E5%A7%8B%E5%8C%96%E6%A1%86%E6%9E%B6-toc" style="margin-left:40px;"><a href="#3.%E4%BD%BF%E7%94%A8%E5%89%8D%E5%85%88%E5%9C%A8%E4%BD%A0%E5%BA%94%E7%94%A8%E7%9A%84Application%E4%B8%AD%E8%B0%83init%E6%96%B9%E6%B3%95%E5%88%9D%E5%A7%8B%E5%8C%96%E6%A1%86%E6%9E%B6" rel="nofollow">3.使用前先在你应用的Application中调init方法初始化框架</a></p> 
<p id="4.%E7%84%B6%E5%90%8E%E5%BF%85%E9%A1%BB%E8%B0%83%E7%94%A8enableBluetooth()%E6%96%B9%E6%B3%95%E5%BC%80%E5%90%AF%E8%93%9D%E7%89%99%E5%8A%9F%E8%83%BD%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E5%9C%A8activity%E4%B8%AD%E8%B0%83%E7%94%A8%EF%BC%9A-toc" style="margin-left:40px;"><a href="#4.%E7%84%B6%E5%90%8E%E5%BF%85%E9%A1%BB%E8%B0%83%E7%94%A8enableBluetooth%28%29%E6%96%B9%E6%B3%95%E5%BC%80%E5%90%AF%E8%93%9D%E7%89%99%E5%8A%9F%E8%83%BD%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E5%9C%A8activity%E4%B8%AD%E8%B0%83%E7%94%A8%EF%BC%9A" rel="nofollow">4.然后必须调用enableBluetooth()方法开启蓝牙功能，你可以在activity中调用：</a></p> 
<p id="5.%E5%A6%82%E6%9E%9C%E6%98%AF%E4%BD%8E%E5%8A%9F%E8%80%97%E8%93%9D%E7%89%99%EF%BC%8C%E9%9C%80%E8%A6%81%E8%AE%BE%E7%BD%AE%E9%85%8D%E7%BD%AE%E9%A1%B9%EF%BC%8C%E7%BB%8F%E5%85%B8%E8%93%9D%E7%89%99%E5%BF%BD%E7%95%A5%E8%B7%B3%E8%BF%87%E8%BF%99%E4%B8%80%E6%AD%A5%E5%8D%B3%E5%8F%AF%EF%BC%9A-toc" style="margin-left:40px;"><a href="#5.%E5%A6%82%E6%9E%9C%E6%98%AF%E4%BD%8E%E5%8A%9F%E8%80%97%E8%93%9D%E7%89%99%EF%BC%8C%E9%9C%80%E8%A6%81%E8%AE%BE%E7%BD%AE%E9%85%8D%E7%BD%AE%E9%A1%B9%EF%BC%8C%E7%BB%8F%E5%85%B8%E8%93%9D%E7%89%99%E5%BF%BD%E7%95%A5%E8%B7%B3%E8%BF%87%E8%BF%99%E4%B8%80%E6%AD%A5%E5%8D%B3%E5%8F%AF%EF%BC%9A" rel="nofollow">5.如果是低功耗蓝牙，需要设置配置项，经典蓝牙忽略跳过这一步即可：</a></p> 
<p id="6.%E5%BC%80%E5%90%AF%E8%93%9D%E7%89%99%E8%83%BD%E5%8A%9B%E5%90%8E%EF%BC%8C%E6%8E%A5%E7%9D%80%E4%BD%A0%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%BC%80%E5%A7%8B%E8%BF%9B%E8%A1%8C%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E6%89%AB%E6%8F%8F%EF%BC%8C%E5%85%B6%E4%B8%AD%EF%BC%8Ctype%20%E4%B8%BA%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E7%B1%BB%E5%9E%8B%EF%BC%88%E7%BB%8F%E5%85%B8%E8%93%9D%E7%89%99%E6%88%96%E4%BD%8E%E5%8A%9F%E8%80%97%E8%93%9D%E7%89%99%EF%BC%89%EF%BC%9A-toc" style="margin-left:40px;"><a href="#6.%E5%BC%80%E5%90%AF%E8%93%9D%E7%89%99%E8%83%BD%E5%8A%9B%E5%90%8E%EF%BC%8C%E6%8E%A5%E7%9D%80%E4%BD%A0%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%BC%80%E5%A7%8B%E8%BF%9B%E8%A1%8C%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E6%89%AB%E6%8F%8F%EF%BC%8C%E5%85%B6%E4%B8%AD%EF%BC%8Ctype%20%E4%B8%BA%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E7%B1%BB%E5%9E%8B%EF%BC%88%E7%BB%8F%E5%85%B8%E8%93%9D%E7%89%99%E6%88%96%E4%BD%8E%E5%8A%9F%E8%80%97%E8%93%9D%E7%89%99%EF%BC%89%EF%BC%9A" rel="nofollow">6.开启蓝牙能力后，接着你就可以开始进行蓝牙设备扫描，其中，type 为蓝牙设备类型（经典蓝牙或低功耗蓝牙）：</a></p> 
<p id="7.%E4%B8%80%E6%97%A6%E6%89%AB%E6%8F%8F%E5%88%B0%E8%AE%BE%E5%A4%87%EF%BC%8C%E4%BD%A0%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%89%BE%E5%88%B0%E7%9B%AE%E6%A0%87%E8%AE%BE%E5%A4%87%E5%B9%B6%E8%BF%9E%E6%8E%A5%EF%BC%9A-toc" style="margin-left:40px;"><a href="#7.%E4%B8%80%E6%97%A6%E6%89%AB%E6%8F%8F%E5%88%B0%E8%AE%BE%E5%A4%87%EF%BC%8C%E4%BD%A0%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%89%BE%E5%88%B0%E7%9B%AE%E6%A0%87%E8%AE%BE%E5%A4%87%E5%B9%B6%E8%BF%9E%E6%8E%A5%EF%BC%9A" rel="nofollow">7.一旦扫描到设备，你就可以找到目标设备并连接：</a></p> 
<p id="8.%E8%AE%BE%E5%A4%87%E8%BF%9E%E6%8E%A5%E6%88%90%E5%8A%9F%E5%90%8E%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E5%BC%80%E5%A7%8B%E8%B7%9F%E8%AE%BE%E5%A4%87%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1%EF%BC%9A-toc" style="margin-left:40px;"><a href="#8.%E8%AE%BE%E5%A4%87%E8%BF%9E%E6%8E%A5%E6%88%90%E5%8A%9F%E5%90%8E%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E5%BC%80%E5%A7%8B%E8%B7%9F%E8%AE%BE%E5%A4%87%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1%EF%BC%9A" rel="nofollow">8.设备连接成功后，你可以开始跟设备进行通信：</a></p> 
<p id="9.%E9%82%A3%E4%B9%88%E5%A6%82%E4%BD%95%E6%8E%A5%E6%94%B6%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E8%BF%94%E5%9B%9E%E7%BB%99%E4%BD%A0%E7%9A%84%E6%95%B0%E6%8D%AE%E5%91%A2%EF%BC%8C%E5%BE%88%E7%AE%80%E5%8D%95%EF%BC%8C%E5%9C%A8Receiver%E4%B8%AD%E6%8E%A5%E6%94%B6%EF%BC%9A-toc" style="margin-left:40px;"><a href="#9.%E9%82%A3%E4%B9%88%E5%A6%82%E4%BD%95%E6%8E%A5%E6%94%B6%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E8%BF%94%E5%9B%9E%E7%BB%99%E4%BD%A0%E7%9A%84%E6%95%B0%E6%8D%AE%E5%91%A2%EF%BC%8C%E5%BE%88%E7%AE%80%E5%8D%95%EF%BC%8C%E5%9C%A8Receiver%E4%B8%AD%E6%8E%A5%E6%94%B6%EF%BC%9A" rel="nofollow">9.那么如何接收蓝牙设备返回给你的数据呢，很简单，在Receiver中接收：</a></p> 
<p id="10.%E6%9C%80%E5%90%8E%EF%BC%8C%E8%B0%83%E7%94%A8%E4%BB%A5%E4%B8%8B%E6%96%B9%E6%B3%95%E5%8E%BB%E4%B8%BB%E5%8A%A8%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5%E5%B9%B6%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90%20%EF%BC%9A-toc" style="margin-left:40px;"><a href="#10.%E6%9C%80%E5%90%8E%EF%BC%8C%E8%B0%83%E7%94%A8%E4%BB%A5%E4%B8%8B%E6%96%B9%E6%B3%95%E5%8E%BB%E4%B8%BB%E5%8A%A8%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5%E5%B9%B6%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90%20%EF%BC%9A" rel="nofollow">10.最后，调用以下方法去主动断开连接并释放资源 ：</a></p> 
<p id="%E7%AC%AC%E4%BA%8C%E7%A7%8D%E9%9B%86%E6%88%90%E6%96%B9%E5%BC%8F-toc" style="margin-left:0px;"><a href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E9%9B%86%E6%88%90%E6%96%B9%E5%BC%8F" rel="nofollow">第二种集成方式</a></p> 
<p id="1.%E7%94%B1%E4%BA%8E%E6%98%AF%E4%BB%A3%E7%A0%81%E5%BC%95%E5%85%A5%EF%BC%8C%E6%95%85%E6%97%A0%E9%9C%80%E5%83%8F%E7%AC%AC%E4%B8%80%E6%AD%A5%E9%82%A3%E6%A0%B7%E8%BF%9B%E8%A1%8C%E5%BA%93%E7%9A%84%E5%BC%95%E5%85%A5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%9C%A8Application%E4%B8%AD%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82-toc" style="margin-left:40px;"><a href="#1.%E7%94%B1%E4%BA%8E%E6%98%AF%E4%BB%A3%E7%A0%81%E5%BC%95%E5%85%A5%EF%BC%8C%E6%95%85%E6%97%A0%E9%9C%80%E5%83%8F%E7%AC%AC%E4%B8%80%E6%AD%A5%E9%82%A3%E6%A0%B7%E8%BF%9B%E8%A1%8C%E5%BA%93%E7%9A%84%E5%BC%95%E5%85%A5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%9C%A8Application%E4%B8%AD%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82" rel="nofollow">1.由于是代码引入，故无需像第一步那样进行库的引入，直接在Application中初始化。</a></p> 
<p id="2.%E8%93%9D%E7%89%99%E7%95%8C%E9%9D%A2-toc" style="margin-left:40px;"><a href="#2.%E8%93%9D%E7%89%99%E7%95%8C%E9%9D%A2" rel="nofollow">2.蓝牙界面</a></p> 
<p id="3.UUidStateBean%E5%AF%B9%E8%B1%A1-toc" style="margin-left:40px;"><a href="#3.UUidStateBean%E5%AF%B9%E8%B1%A1" rel="nofollow">3.UUidStateBean对象</a></p> 
<p id="4.%E8%93%9D%E7%89%99%E4%BF%A1%E6%81%AF%E5%AF%B9%E8%B1%A1BletoothInfoBen-toc" style="margin-left:40px;"><a href="#4.%E8%93%9D%E7%89%99%E4%BF%A1%E6%81%AF%E5%AF%B9%E8%B1%A1BletoothInfoBen" rel="nofollow">4.蓝牙信息对象BletoothInfoBen</a></p> 
<p id="5.%E8%BF%9B%E5%BA%A6%E5%AF%B9%E8%AF%9D%E6%A1%86-toc" style="margin-left:40px;"><a href="#5.%E8%BF%9B%E5%BA%A6%E5%AF%B9%E8%AF%9D%E6%A1%86" rel="nofollow">5.进度对话框</a></p> 
<p id="6.ble_servies_select_dialog%E5%B8%83%E5%B1%80-toc" style="margin-left:40px;"><a href="#6.ble_servies_select_dialog%E5%B8%83%E5%B1%80" rel="nofollow">6.ble_servies_select_dialog布局</a></p> 
<p id="7.gble_layout%E8%93%9D%E7%89%99%E5%B8%83%E5%B1%80-toc" style="margin-left:40px;"><a href="#7.gble_layout%E8%93%9D%E7%89%99%E5%B8%83%E5%B1%80" rel="nofollow">7.gble_layout蓝牙布局</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p>        Android 蓝牙开发，很多项目会使用到，自己去摸索封装或者引用其他框架，也能解决部分问题。为何说是部分问题，Android蓝牙分为低功耗版与经典版，经典版是可以直接选择即可实现链接，低功耗版是需要配置uuid。故推荐一个框架，下面来分享使用教程。分两部分第一部分是直接使用框架，第二部分是修改框架源码，使用哪一种方式可以结合自己的需要。Android开发建议使用Android蓝牙调试工具app初步调试使用，这里推荐<strong>BLE调试助手</strong>app，各大应用市场都可以下载。<strong>BLE调试助手</strong>首页展示。 </p> 
<p class="img-center"><img alt="" height="665" src="https://images2.imgbox.com/3d/c5/Xrrh7AVU_o.png" width="306"></p> 
<p>Java语言版本地址：<a href="https://github.com/g-HJY/HBluetooth" title="https://github.com/g-HJY/HBluetooth">https://github.com/g-HJY/HBluetooth</a><br> Kotlin语言版本地址：<a href="https://github.com/g-HJY/Kotlin-HBluetooth" title="https://github.com/g-HJY/Kotlin-HBluetooth （暂停维护）">https://github.com/g-HJY/Kotlin-HBluetooth （暂停维护）</a></p> 
<h2 id="%E4%B8%80%E3%80%81%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%A1%86%E6%9E%B6%E9%9B%86%E6%88%90%E6%96%B9%E5%BC%8F">一、第一种框架集成方式</h2> 
<p>         首先是集成方式，当然你可以直接在github上将整个项目下载下来，也可以将其以依赖的形式集成到你的项目中，具体步骤如下：</p> 
<h3 id="1.%E5%9C%A8%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E7%9A%84build.gradle%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%8C%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%E9%85%8D%E7%BD%AE%EF%BC%9A">1.在项目根目录的build.gradle文件中，添加如下配置：</h3> 
<pre><code>allprojects {
	repositories {
		...
		maven { url 'https://jitpack.io' }
	}
}</code></pre> 
<h3 id="2.%E5%9C%A8app%20module%E7%9A%84build.gradle%E4%B8%AD%EF%BC%8C%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%EF%BC%9A">2.在app module的build.gradle中，添加依赖：</h3> 
<pre><code>dependencies {
     implementation 'com.github.g-HJY:HBluetooth:V1.3.6'
}</code></pre> 
<h3 id="3.%E4%BD%BF%E7%94%A8%E5%89%8D%E5%85%88%E5%9C%A8%E4%BD%A0%E5%BA%94%E7%94%A8%E7%9A%84Application%E4%B8%AD%E8%B0%83init%E6%96%B9%E6%B3%95%E5%88%9D%E5%A7%8B%E5%8C%96%E6%A1%86%E6%9E%B6">3.使用前先在你应用的Application中调init方法初始化框架</h3> 
<pre><code>public class XiaoYaApp extends MultiDexApplication {

    @Override
    public void onCreate() {
        super.onCreate();
        HBluetooth.init(this);
    }

}
</code></pre> 
<h3 id="4.%E7%84%B6%E5%90%8E%E5%BF%85%E9%A1%BB%E8%B0%83%E7%94%A8enableBluetooth()%E6%96%B9%E6%B3%95%E5%BC%80%E5%90%AF%E8%93%9D%E7%89%99%E5%8A%9F%E8%83%BD%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E5%9C%A8activity%E4%B8%AD%E8%B0%83%E7%94%A8%EF%BC%9A">4.然后必须调用enableBluetooth()方法开启蓝牙功能，你可以在activity中调用：</h3> 
<pre><code>//开启蓝牙功能
HBluetooth.getInstance().enableBluetooth()</code></pre> 
<h3 id="5.%E5%A6%82%E6%9E%9C%E6%98%AF%E4%BD%8E%E5%8A%9F%E8%80%97%E8%93%9D%E7%89%99%EF%BC%8C%E9%9C%80%E8%A6%81%E8%AE%BE%E7%BD%AE%E9%85%8D%E7%BD%AE%E9%A1%B9%EF%BC%8C%E7%BB%8F%E5%85%B8%E8%93%9D%E7%89%99%E5%BF%BD%E7%95%A5%E8%B7%B3%E8%BF%87%E8%BF%99%E4%B8%80%E6%AD%A5%E5%8D%B3%E5%8F%AF%EF%BC%9A">5.如果是低功耗蓝牙，需要设置配置项，经典蓝牙忽略跳过这一步即可：</h3> 
<p>        分别是主服务UUID（withServiceUUID）、读写特征值UUID（withWriteCharacteristicUUID）、通知UUID（withNotifyCharacteristicUUID）以及是否设置最大传输单元（setMtu不设置不用调）等； 您还可以设置分包发送的时间间隔和包长度</p> 
<pre><code>     //请填写你自己设备的UUID
        //低功耗蓝牙才需要如下配置BleConfig,经典蓝牙不需要new HBluetooth.BleConfig()
        HBluetooth.BleConfig bleConfig = new HBluetooth.BleConfig();
        bleConfig.withServiceUUID("0000fe61-0000-1000-8000-00805f9b34fb")
                 .withWriteCharacteristicUUID("0000fe61-0000-1000-8000-00805f9b34fb")
                 .withNotifyCharacteristicUUID("0000fe61-0000-1000-8000-00805f9b34fb")
                //命令长度大于20个字节时是否分包发送，默认false,分包时可以调两参方法设置包之间发送间隔
                //.splitPacketToSendWhenCmdLenBeyond(false)
                //useCharacteristicDescriptor 默认false
                //.useCharacteristicDescriptor(false)
                .setMtu(200, new BleMtuChangedCallback() {
                    @Override
                    public void onSetMTUFailure(int realMtuSize, BluetoothException bleException) {
                        Log.i(TAG, "bleException:" + bleException.getMessage() + "  realMtuSize:" + realMtuSize);
                    }
 
                    @Override
                    public void onMtuChanged(int mtuSize) {
                        Log.i(TAG, "Mtu set success,mtuSize:" + mtuSize);
                    }
                });
     //低功耗蓝牙才需要调setBleConfig
	HBluetooth.getInstance().setBleConfig(bleConfig);</code></pre> 
<h3 id="6.%E5%BC%80%E5%90%AF%E8%93%9D%E7%89%99%E8%83%BD%E5%8A%9B%E5%90%8E%EF%BC%8C%E6%8E%A5%E7%9D%80%E4%BD%A0%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%BC%80%E5%A7%8B%E8%BF%9B%E8%A1%8C%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E6%89%AB%E6%8F%8F%EF%BC%8C%E5%85%B6%E4%B8%AD%EF%BC%8Ctype%20%E4%B8%BA%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E7%B1%BB%E5%9E%8B%EF%BC%88%E7%BB%8F%E5%85%B8%E8%93%9D%E7%89%99%E6%88%96%E4%BD%8E%E5%8A%9F%E8%80%97%E8%93%9D%E7%89%99%EF%BC%89%EF%BC%9A">6.开启蓝牙能力后，接着你就可以开始进行蓝牙设备扫描，其中，type 为蓝牙设备类型（经典蓝牙或低功耗蓝牙）：</h3> 
<pre><code>           HBluetooth.getInstance()
                .scan(type, new ScanCallBack() {
            @Override
            public void onScanStart() {
                Log.i(TAG, "开始扫描");
            }
 
            @Override
            public void onScanning() {
                Log.i(TAG, "扫描中");
            }
 
            @Override
            public void onError(int errorType, String errorMsg) {
 
            }
 
            @Override
            public void onScanFinished(List&lt;BluetoothDevice&gt; bluetoothDevices) {
                Log.i(TAG, "扫描结束");
                if (bluetoothDevices != null &amp;&amp; bluetoothDevices.size() &gt; 0) {
                    list.clear();
                    list.addAll(bluetoothDevices);
                    adapter.notifyDataSetChanged();
                }
            }
        });
 
 
或者，如果你想在第一步操作后直接进行扫描，则可以这样调用：
        HBluetooth.getInstance()
                .enableBluetooth()
                .scan(type, new ScanCallBack() {
            @Override
            public void onScanStart() {
                Log.i(TAG, "开始扫描");
            }
 
            @Override
            public void onScanning() {
                Log.i(TAG, "扫描中");
            }
 
            @Override
            public void onError(int errorType, String errorMsg) {
 
            }
 
            @Override
            public void onScanFinished(List&lt;BluetoothDevice&gt; bluetoothDevices) {
                Log.i(TAG, "扫描结束");
                if (bluetoothDevices != null &amp;&amp; bluetoothDevices.size() &gt; 0) {
                    list.clear();
                    list.addAll(bluetoothDevices);
                    adapter.notifyDataSetChanged();
                }
            }
        });</code></pre> 
<h3 id="7.%E4%B8%80%E6%97%A6%E6%89%AB%E6%8F%8F%E5%88%B0%E8%AE%BE%E5%A4%87%EF%BC%8C%E4%BD%A0%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%89%BE%E5%88%B0%E7%9B%AE%E6%A0%87%E8%AE%BE%E5%A4%87%E5%B9%B6%E8%BF%9E%E6%8E%A5%EF%BC%9A">7.一旦扫描到设备，你就可以找到目标设备并连接：</h3> 
<pre><code>         HBluetooth.getInstance()
           .connect(device, new ConnectCallBack() {
 
                       @Override
                       public void onConnecting() {
                           Log.i(TAG, "连接中...");
                       }
 
                       @Override
                       public void onConnected(Sender sender) {
                           Log.i(TAG, "连接成功,isConnected:" + mHBluetooth.isConnected());
                           //调用发送器发送命令
                           byte[] demoCommand = new byte[]{0x01, 0x02};
                           sender.send(demoCommand, new SendCallBack() {
                               @Override
                               public void onSending(byte[] command) {
                                   Log.i(TAG, "命令发送中...");
                               }
 
                               @Override
                               public void onSendFailure(BluetoothException bleException) {
                                   Log.e("mylog", "发送命令失败-&gt;" + bleException.getMessage());
                               }
                           });
                       }
 
                       @Override
                       public void onDisConnecting() {
                           Log.i(TAG, "断开连接中...");
                       }
 
                       @Override
                       public void onDisConnected() {
                           Log.i(TAG, "已断开连接,isConnected:" + mHBluetooth.isConnected());
                       }
 
                       @Override
                       public void onError(int errorType, String errorMsg) {
                           Log.i(TAG, "错误类型：" + errorType + " 错误原因：" + errorMsg);
                       }
 
                       //低功耗蓝牙才需要BleNotifyCallBack
                       //经典蓝牙可以只调两参方法connect(BluetoothDevice device, ConnectCallBack connectCallBack)
                   }, new BleNotifyCallBack() {
                       @Override
                       public void onNotifySuccess() {
                           Log.i(TAG, "打开通知成功");
                       }
 
                       @Override
                       public void onNotifyFailure(BluetoothException bleException) {
                           Log.i(TAG, "打开通知失败：" + bleException.getMessage());
                       }
                   });</code></pre> 
<h3 id="8.%E8%AE%BE%E5%A4%87%E8%BF%9E%E6%8E%A5%E6%88%90%E5%8A%9F%E5%90%8E%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E5%BC%80%E5%A7%8B%E8%B7%9F%E8%AE%BE%E5%A4%87%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1%EF%BC%9A">8.设备连接成功后，你可以开始跟设备进行通信：</h3> 
<pre><code>           HBluetooth.getInstance()
                     .send(demoCommand, new SendCallBack() {
                      @Override
                      public void onSending(byte[] command) {
                             Log.i(TAG, "命令发送中...");
                      }
 
                      @Override
                      public void onSendFailure(BluetoothException bleException) {
                             Log.e("mylog", "发送命令失败-&gt;" + bleException.getMessage());
                      }
                      });</code></pre> 
<h3 id="9.%E9%82%A3%E4%B9%88%E5%A6%82%E4%BD%95%E6%8E%A5%E6%94%B6%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E8%BF%94%E5%9B%9E%E7%BB%99%E4%BD%A0%E7%9A%84%E6%95%B0%E6%8D%AE%E5%91%A2%EF%BC%8C%E5%BE%88%E7%AE%80%E5%8D%95%EF%BC%8C%E5%9C%A8Receiver%E4%B8%AD%E6%8E%A5%E6%94%B6%EF%BC%9A">9.那么如何接收蓝牙设备返回给你的数据呢，很简单，在Receiver中接收：</h3> 
<pre><code>          public void initListener() {
              HBluetooth.getInstance().setReceiver(new ReceiveCallBack() {
                  @Override
                  public void onReceived(DataInputStream dataInputStream, byte[] result) {
                      // 打开通知后，设备发过来的数据将在这里出现
                      Log.e("mylog", "收到蓝牙设备返回数据-&gt;" + Tools.bytesToHexString(result));
                  }
              });
          }</code></pre> 
<h3 id="10.%E6%9C%80%E5%90%8E%EF%BC%8C%E8%B0%83%E7%94%A8%E4%BB%A5%E4%B8%8B%E6%96%B9%E6%B3%95%E5%8E%BB%E4%B8%BB%E5%8A%A8%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5%E5%B9%B6%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90%20%EF%BC%9A">10.最后，调用以下方法去主动断开连接并释放资源 ：</h3> 
<pre><code>            HBluetooth.getInstance().release();
</code></pre> 
<p>其他APi</p> 
<p>1.带设备名称过滤条件的扫描：</p> 
<pre><code>public void scan(@BluetoothType int scanType, int timeUse, ScanFilter filter, ScanCallBack scanCallBack);

public void scan(@BluetoothType int scanType, ScanFilter filter, ScanCallBack scanCallBack);</code></pre> 
<p>2.设置连接超时:</p> 
<pre><code>HBluetooth.getInstance().setConnectTimeOut(5000);</code></pre> 
<p>3.BleConfig(BLE)设置分包发送时间间隔(默认20ms)及包长度(默认20个字节)：</p> 
<pre><code>public BleConfig splitPacketToSendWhenCmdLenBeyond(boolean splitPacketToSendWhenCmdLenBeyond, int sendTimeInterval);

public BleConfig splitPacketToSendWhenCmdLenBeyond(boolean splitPacketToSendWhenCmdLenBeyond, int sendTimeInterval, int eachSplitPacketLen);</code></pre> 
<p>4.开启断开后自动重连机制，默认关闭重连：</p> 
<pre><code>HBluetooth.getInstance().openReconnect(3, 4000);</code></pre> 
<h2 id="%E7%AC%AC%E4%BA%8C%E7%A7%8D%E9%9B%86%E6%88%90%E6%96%B9%E5%BC%8F"><br> 第二种集成方式</h2> 
<p>         与第一种区别，第二种是修改第一种源码实现的蓝牙连接，主要是针对低功耗蓝牙适配，第一种是直接在初始化的时候配置uuid，实现要先通过测试工具拿到uuid或者由对方给出uuid,而本demo是通过弹出对话框的方式，由用户去选择，但是也是需要知道对方传递数据的uuid是多少，这就需要用到蓝牙调试助手<strong>BLE调试助手</strong>。下面是蓝牙调试助手演示界面选择包含读写、通知的uuid去尝试看能否拿到数据，拿到数据的就是低功耗蓝牙的可用uuid。</p> 
<p class="img-center"><img alt="" height="662" src="https://images2.imgbox.com/a9/d4/V9QNyCIi_o.png" width="326"></p> 
<p>资源地址：</p> 
<p>   <a href="https://download.csdn.net/download/shi450561200/88621789" title="https://download.csdn.net/download/shi450561200/88621789">https://download.csdn.net/download/shi450561200/88621789</a></p> 
<pre>由于模块引入hawk作为已选择的蓝牙数据存储，故还需引入hawk框架。
//hawk数据存储
implementation "com.orhanobut:hawk:2.0.1"</pre> 
<h3 id="1.%E7%94%B1%E4%BA%8E%E6%98%AF%E4%BB%A3%E7%A0%81%E5%BC%95%E5%85%A5%EF%BC%8C%E6%95%85%E6%97%A0%E9%9C%80%E5%83%8F%E7%AC%AC%E4%B8%80%E6%AD%A5%E9%82%A3%E6%A0%B7%E8%BF%9B%E8%A1%8C%E5%BA%93%E7%9A%84%E5%BC%95%E5%85%A5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%9C%A8Application%E4%B8%AD%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82">1.由于是代码引入，故无需像第一步那样进行库的引入，直接在Application中初始化。</h3> 
<pre><code>public class XiaoYaApp extends MultiDexApplication {

    @Override
    public void onCreate() {
        super.onCreate();
        //蓝牙
        HBluetooth.init(this);//初始化蓝牙
        HBluetooth.getInstance()
                .setConnectTimeOut(4000);
    }

}</code></pre> 
<h3 id="2.%E8%93%9D%E7%89%99%E7%95%8C%E9%9D%A2">2.蓝牙界面</h3> 
<pre><code>
/**
 * 经典
 * 蓝牙
 */

public class GeNBleActivity extends AppCompatActivity implements HandlerUtils.OnReceiveMessageListener {

    private RecyclerView recycleview;
    private Switch switchBt;
    private SwipeRefreshLayout swipeLayout;
    private HandlerUtils.HandlerHolder myHandlerUtils;
    private int clickState = 1999;//防止误碰蓝牙连接
    private TextView blueTxt;//蓝牙数据显示
    private LinearLayout finish;
    private String tys = "";//

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gble_layout);
        FullScreenrUtils.initBar(this);//全屏
        StatusBarUtils.setLightStatusBar(this, true);//设置状态栏黑色字体

//        new Thread(new Runnable() {
//            @Override
//            public void run() {
//                registerCustomBroadcastReceiver();
//            }
//        }).start();

        tys = getIntent().getExtras().get("typs").toString();

        initView();
    }

    /**
     * 刷新
     * 数据
     */
    private int refreshCount = 0;

    private void refreshView() {

        swipeLayout.setColorSchemeColors(ContextCompat.getColor(this, R.color.colorPrimary));
        swipeLayout.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {
            @Override
            public void onRefresh() {

                clickState = 0;
                //开关试图打开
                switchBt.setSwitchPadding(2);
                switchBt.setChecked(true);

                //开关试图打开
                if (refreshCount &gt; 0) {
                    //搜索蓝牙子线程中执行
                    new Thread(new Runnable() {
                        @Override
                        public void run() {
                            HBluetooth.getInstance().release();
//                            HBluetooth.getInstance().openReconnect(0, 0);//关闭重连
                            initData();
                        }
                    }).start();
                } else {
                    switchBt.setSwitchPadding(2);
                    switchBt.setChecked(true);
                }

                //1.5s后关掉下拉刷新
                swipeLayout.postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        swipeLayout.setRefreshing(false);
                        refreshCount = refreshCount + 1;
                    }
                }, 2000);
            }
        });

    }

    /**
     * 初始化
     * 数据
     */
    private static final int REQUEST_ENABLE_BT = 0xff000099;//启用蓝牙请求码

    @SuppressLint("WrongConstant")
    private void initData() {

        int type = 2;

        // 或者，如果你想在第一步操作后直接进行扫描，则可以这样调用：
        HBluetooth.getInstance()
                .enableBluetooth()
                .scan(type, 3000, new ScanCallBack() {
                    @Override
                    public void onScanStart() {
//                        Log.i(TAG, "==开始扫描==");
                    }

                    @Override
                    public void onScanning(List&lt;BluetoothDevice&gt; scannedDevices, BluetoothDevice currentScannedDevice) {
//                        Log.i(TAG, "==扫描中==");
                        if (scannedDevices != null &amp;&amp; scannedDevices.size() &gt; 0) {

                            list.clear();
                            list.addAll(scannedDevices);

                            runOnUiThread(new Runnable() {
                                @Override
                                public void run() {
                                    bluetoothDevicesAdapter.notifyDataSetChanged();
                                }
                            });

                        }
                    }

                    @Override
                    public void onError(int errorType, String errorMsg) {
//                        Log.d(TAG, "onError");
                    }

                    @Override
                    public void onScanFinished(List&lt;BluetoothDevice&gt; bluetoothDevices) {
//                        Log.d(TAG, "==onScanFinished===");
                        if (bluetoothDevices != null &amp;&amp; bluetoothDevices.size() &gt; 0) {
                            list.clear();
                            list.addAll(bluetoothDevices);

                            runOnUiThread(new Runnable() {
                                @Override
                                public void run() {
                                    bluetoothDevicesAdapter.notifyDataSetChanged();

                                }
                            });
                        }

                    }

                });

    }

    //蓝牙设备适配器
    private MyDemoBluetoothDevicesAdapter bluetoothDevicesAdapter;
    private List&lt;BluetoothDevice&gt; list = new ArrayList&lt;&gt;();

    private static final String TAG = "TAG";
    private String bleDevicesAdress = "";

    private void initView() {

        XiaoYaApp.setUuidTmp("");
//        XiaoYaApp.setUuidTmp("0000ffe0-0000-1000-8000-00805f9b34fb");

        finish = findViewById(R.id.finish);

        recycleview = findViewById(R.id.recycleview);
        switchBt = findViewById(R.id.switch_bt);

        swipeLayout = findViewById(R.id.swipeLayout);
        blueTxt = findViewById(R.id.blue_txt);

        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(GeNBleActivity.this);
        linearLayoutManager.setOrientation(LinearLayoutManager.VERTICAL);
        recycleview.setLayoutManager(linearLayoutManager);
        recycleview.setHasFixedSize(true);

        bluetoothDevicesAdapter = new MyDemoBluetoothDevicesAdapter(GeNBleActivity.this, list);

        recycleview.setAdapter(bluetoothDevicesAdapter);
        myHandlerUtils = new HandlerUtils.HandlerHolder(GeNBleActivity.this);

        bluetoothDevicesAdapter.setMyOnItemClickListener(new MyDemoBluetoothDevicesAdapter.OnItemClickListener() {

            @Override
            public void OnItemClick(View view, int position) {

                if (view.getId() == R.id.tv_cancle_conn) {
                    new Thread(new Runnable() {
                        @Override
                        public void run() {
                            HBluetooth.getInstance().release();
//                            HBluetooth.getInstance().openReconnect(0, 0);//关闭重连
                        }
                    }).start();
                } else {

                    if (clickState == 1999) {
                        return;
                    }
                    clickState = 1999;

                    myListPosition = position;

                    try {

                        //4、连接
//                    Log.e(getPackageName(), "===开始连接=Exception===");
//                    Log.e(TAG, "==扫描uuid==" + Arrays.toString(list.get(position).getUuids()));

                        //保存蓝牙Address数据，供直连使用。
                        bleDevicesAdress = list.get(position).getAddress();


                        new Thread(new Runnable() {
                            @Override
                            public void run() {
                                HBluetooth.getInstance().release();
//                                HBluetooth.getInstance().openReconnect(0, 0);//关闭重连
                                initListener();
                                connectData(list.get(position));
                            }
                        }).start();

                    } catch (Exception e) {

                    }

                }

            }

            @Override
            public void OnItemLonClick(int position) {

            }
        });


        //选择
        switchBt.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

                if (!getPermission()) {

                    return;
                }

                if (isChecked) {

                    //打开蓝牙
                    switchBt.setSwitchPadding(2);

                    //扫描蓝牙
                    new Thread(new Runnable() {
                        @Override
                        public void run() {
                            HBluetooth.getInstance().release();
//                            HBluetooth.getInstance().openReconnect(0, 0);//关闭重连
                            initData();
                        }
                    }).start();

                } else {
                    //关闭蓝牙

                    switchBt.setSwitchPadding(1);

                    //关闭蓝牙
                    new Thread(new Runnable() {
                        @Override
                        public void run() {
                            HBluetooth.getInstance().release();
//                            HBluetooth.getInstance().openReconnect(0, 0);//关闭重连
                        }
                    }).start();
                    list.clear();
                    bluetoothDevicesAdapter.notifyDataSetChanged();
                }
            }
        });
        clickState = 0;
        refreshView();

        //一进入页面就取一次缓存
//        MyEventManager.postMsg("=getcahegetcahe=", "getCache");

        getCacheData();

        finish.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                finish();
            }
        });

        //打开蓝牙搜索
        switchBt.setSwitchPadding(2);
        switchBt.setChecked(true);

    }

    /**
     * 修改
     * 蓝牙数据
     */
    private int myListPosition = 0;

    private void upBlutoothSata(boolean isConnnted) {

        if (isConnnted) {
            XiaoYaApp.getBlDevices().setType(999);
//            Toast.makeText(GeNBleActivity.this, "蓝牙连接成功", Toast.LENGTH_SHORT).show();
        } else {
            XiaoYaApp.getBlDevices().setType(333);
//            Toast.makeText(GeNBleActivity.this, "蓝牙已断开", Toast.LENGTH_SHORT).show();
        }

        runOnUiThread(new Runnable() {
            @Override
            public void run() {
//                bluetoothDevicesAdapter.notifyItemChanged(myListPosition, XiaoYaApp.getBlDevices());

                bluetoothDevicesAdapter.notifyDataSetChanged();
//                MyEventManager.postMsg("==更新页面状态==" + XiaoYaApp.getBlDevices().getType(), "formAndroid");

                myHandlerUtils.sendEmptyMessageDelayed(UPDATE_DEVICESTYPE, 100);
//                XiaoYaApp.getBlDevices().setType(2);
            }
        });

    }

    /**
     * 连接
     * 蓝牙
     */

    private void connectData(BluetoothDevice device) {

        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                showProgressDialog();
            }
        });

        //保存蓝牙信息
        Logger.d("===开始连接--====" + (device != null));

        isConneted = false;//蓝牙能否重连，false表示不重连
//        Log.d(TAG, "===connectData:开始 000===");
        if (device != null) {
            XiaoYaApp.setBlDevices(device);//保存全局的device
        } else {
            cancleDialogProgress();
            return;
        }
//        Log.d(TAG, "===connectData:开始 1111===");

        HBluetooth.getInstance()
                .setConnectTimeOut(4000)
                .connect(device, new ConnectCallBack() {
                    @Override
                    public void onConnecting() {
                        Logger.d("=====连接中=====");
                    }

                    @Override
                    public void onConnected(Sender sender) {
                        clickState = 0;

                        Logger.d("=====连接成功=====");
                        myHandlerUtils.sendEmptyMessageDelayed(TIPS_SELECT_UUID, 3000);

                        //调用发送器发送命令
                        byte[] demoCommand = new byte[]{0x01, 0x02};
                        sender.send(demoCommand, new SendCallBack() {
                            @Override
                            public void onSending(byte[] command) {
//                                Log.i(TAG, "==命令发送中..==");
                            }

                            @Override
                            public void onSendFailure(BluetoothException bleException) {
//                                Log.d(TAG, "==发送命令失败-&gt;===" + bleException.getMessage());
                            }
                        });

                    }

                    @Override
                    public void onDisConnecting() {

//                        Log.d(TAG, "===断开连接中...===");
                    }

                    @Override
                    public void onDisConnected() {
                        clickState = 0;
                        Logger.d("=====已断开连接=====");

                        myHandlerUtils.sendEmptyMessage(UPDATE_BLT_DISC_STATE);//修改蓝牙为断开状态
//                        Log.d(TAG, "===断开...===");
                        cancleDialogProgress();
                    }

                    @Override
                    public void onError(int errorType, String errorMsg) {

//                        Log.d(TAG, "==错误类型：" + errorType + " ===错误原因：" + errorMsg);
                    }

                    //低功耗蓝牙才需要BleNotifyCallBack
                    //经典蓝牙可以只调两参方法connect(BluetoothDevice device, ConnectCallBack connectCallBack)
                }, new BleNotifyCallBack() {
                    @Override
                    public void onNotifySuccess() {
                        isConneted = true;
                        myHandlerUtils.sendEmptyMessageDelayed(UPDATE_BLT_CONNTED_STATE, 3000);//修改蓝牙显示连接状态

                        cancleDialogProgress();
//                        senDMsgDataDe();
                        Logger.d("===打开通知成功--====");

                    }

                    @Override
                    public void onNotifyFailure(BluetoothException bleException) {

                        cancleDialogProgress();
                        Logger.d("===打开通知失败--====");

                    }
                });
    }


    /**
     * 接收
     * 数据
     * 监听
     */
    public void initListener() {
        HBluetooth.getInstance().setReceiver(new ReceiveCallBack() {
            @Override
            public void onReceived(DataInputStream dataInputStream, byte[] result) {
                Logger.d("===接收数据====" + Tools.bytesToHexString(result));
                // 打开通知后，设备发过来的数据将在这里出现
            }
        });
        HBluetooth.getInstance().openReconnect(200, 4000);
    }

    /**
     * Create a
     * BroadcastReceiver
     * for ACTION_FOUND.
     * 扫描发现设备
     * 蓝牙配对并连接
     */
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == REQUEST_ENABLE_BT) {//打开蓝牙回调
            if (resultCode == RESULT_OK) {
//                Log.d("TAG", "====onActivityResult:成功======");
            }
        }

    }

    @Override
    protected void onResume() {
        super.onResume();

    }

    @Override
    protected void onStop() {
        super.onStop();

    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        HBluetooth.getInstance().release();
//        HBluetooth.getInstance().openReconnect(0, 0);//关闭重连
    }

    /**
     * 重连
     * 监听
     */

    private static final int UPDATE_BLT_CONNTED_STATE = 0x000666;
    private static final int UPDATE_BLT_DISC_STATE = 0x0000777;
    private static final int TIPS_SELECT_UUID = 0x000888;//提示选择服务id
    private static final int UPDATE_DEVICESTYPE = 1000;
    private static final int SELECT_CONN = 0X0001;

    private boolean isConneted = false;

    @Override
    public void handlerMessage(Message msg) {
        switch (msg.what) {
            case UPDATE_BLT_CONNTED_STATE://修改蓝牙为连接待接收数据状态
                isConneted = true;
                new Thread(new Runnable() {
                    @Override
                    public void run() {
                        upBlutoothSata(true);
                    }
                }).start();

                break;
            case UPDATE_BLT_DISC_STATE://修改蓝牙为断开状态
                new Thread(new Runnable() {
                    @Override
                    public void run() {
                        upBlutoothSata(false);
                    }
                }).start();

                break;

            case TIPS_SELECT_UUID:
//                Log.d(TAG, "===延时2S显示配置服务UUID: ==" + isConneted);

                showServicesUUid();//延时2S显示配置服务UUID
                break;

            case UPDATE_DEVICESTYPE://修 XiaoYaApp.getBlDevices().setType(2);
                new Thread(new Runnable() {
                    @Override
                    public void run() {
                        XiaoYaApp.getBlDevices().setType(2);
                    }
                }).start();

                break;

            case SELECT_CONN:
                oneConnectBle();//选择服务连接
                break;
            default:
                break;
        }
    }

    /**
     * 只连接
     * 蓝牙一次
     */
    private void oneConnectBle() {
        BluetoothDevice bluetoothDevice = XiaoYaApp.getBlDevices();

        new Thread(new Runnable() {
            @Override
            public void run() {

                Logger.d("===连接蓝牙====");
//                Log.d(TAG, "====handleMessage:==只连接蓝牙一次===");
                if (bluetoothDevice != null) {
//                    HBluetooth.getInstance().release();
//                    HBluetooth.getInstance().openReconnect(0, 0);//关闭重连
                    XiaoYaApp.getBlDevices().setType(2);
                    connectData(bluetoothDevice);
                }
            }
        }).start();
    }

    /**
     * 判断权限
     * 是否通过，
     * 如果通过
     * 就初始化
     */
    private boolean mHasPermission; // 是否通过权限

    private boolean getPermission() {

        mHasPermission = checkPermission();
        if (!mHasPermission) {
            // 未获取权限，申请权限
            runOnUiThread(new Runnable() {
                @Override
                public void run() {

                    Toast.makeText(GeNBleActivity.this, "未获取权限，申请权限", Toast.LENGTH_SHORT).show();
                }
            });

            requestPermission();

        } else if (mHasPermission) {
            // 已经获取权限
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    Toast.makeText(GeNBleActivity.this, "已经获取权限", Toast.LENGTH_SHORT).show();
                }
            });

        }

        return mHasPermission;
    }

    /**
     * 显示UUID
     */

    private void showServicesUUid() {

        mServiceList = new ArrayList&lt;&gt;();
        uUidStateBeanList = new ArrayList&lt;&gt;();
        mServiceList.clear();
        uUidStateBeanList.clear();

        mServiceList = XiaoYaApp.getmServiceList();

        Log.d(TAG, "==showServicesUUid: =mServiceList集合大小==" + (mServiceList == null));

        for (int y = 0; y &lt; mServiceList.size(); y++) {

            UUidStateBean uu = new UUidStateBean();
            uu.setUUid(mServiceList.get(y).getUuid() + "");

            uu.setSelected(false);
            uUidStateBeanList.add(uu);
        }
//        Log.d(TAG, "===showServicesUUid:取消对话框======");
        cancleDialogProgress();

        if (!isConneted &amp;&amp; mServiceList != null) {

            showDialog();
//            Toast.makeText(GeNBleActivity.this, "数据", Toast.LENGTH_LONG).show();
        } else {
            BluetoothDevice blethDeviceInfo = XiaoYaApp.getBlDevices();
            saveBleDevicesInfo(blethDeviceInfo.getName(), blethDeviceInfo.getAddress(), "");
        }

    }

    /**
     * 显示UUId
     * 供用户
     * 选择
     */
    private RecyclerView dialogServList;
    private BtUUIDSelectAdapter btUUIDSelectAdapter;
    private List&lt;BluetoothGattService&gt; mServiceList;
    private List&lt;UUidStateBean&gt; uUidStateBeanList;
    private int selectUUidPosition = 0;

    private void showDialog() {

        View view = getLayoutInflater().from(this).inflate(R.layout.ble_servies_select_dialog, null);

        dialogServList = view.findViewById(R.id.dialogServList);
        btUUIDSelectAdapter = new BtUUIDSelectAdapter(GeNBleActivity.this, uUidStateBeanList);

        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(GeNBleActivity.this);
        linearLayoutManager.setOrientation(LinearLayoutManager.VERTICAL);
        dialogServList.setLayoutManager(linearLayoutManager);
        dialogServList.setHasFixedSize(true);

        dialogServList.setAdapter(btUUIDSelectAdapter);

        final AlertDialog dialog = new AlertDialog.Builder(this).create();
        dialog.setCancelable(true);
        dialog.setCanceledOnTouchOutside(false);

        TextView tv_cancle = view.findViewById(R.id.common_dialog_cancel_tv);
        tv_cancle.setText("取消");

        TextView tv_sure = view.findViewById(R.id.common_dialog_confirm_tv);
        tv_sure.setText("确定");
        tv_sure.setTextColor(Color.parseColor("#ff333333"));
        TextView tv_title = view.findViewById(R.id.common_dialog_title_tv);
        tv_title.setText("请选择可用UUID");

        //确定
        tv_sure.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

                BluetoothDevice blethDevice = XiaoYaApp.getBlDevices();

                new Thread(new Runnable() {
                    @Override
                    public void run() {
                        HBluetooth.getInstance().release();
//                        HBluetooth.getInstance().openReconnect(0, 0);//关闭重连
                        String uuidServices = uUidStateBeanList.get(selectUUidPosition).getUUid() + "" + XiaoYaApp.getUuidTmp();
                        XiaoYaApp.setUuidTmp(uuidServices + "");

                        //取缓存

                        myHandlerUtils.sendEmptyMessageDelayed(SELECT_CONN, 200);

                        myHandlerUtils.sendEmptyMessageDelayed(UPDATE_BLT_CONNTED_STATE, 1000);

                        //保存蓝牙信息
                        saveBleDevicesInfo(blethDevice.getName(), blethDevice.getAddress(), uuidServices);

                        dialog.dismiss();

                    }
                }).start();


            }
        });

        //取消对话框
        tv_cancle.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
            }
        });

        dialog.show();
        dialog.getWindow().setBackgroundDrawableResource(android.R.color.transparent);
        //设置位置窗体
        Window window = dialog.getWindow();
        window.setGravity(Gravity.CENTER);
//        WindowManager.LayoutParams lp = window.getAttributes();
//        lp.dimAmount =0.0f;
//        lp.x = 0; //新位置X坐标
//        lp.y = -400; //新位置Y坐标
//        dialog.onWindowAttributesChanged(lp);
        window.setContentView(view);

        dialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);//弹框
        dialog.getWindow().setLayout((this.getWindowManager().getDefaultDisplay().getWidth() / 5 * 3), LinearLayout.LayoutParams.WRAP_CONTENT);
        dialog.getWindow().setBackgroundDrawableResource(android.R.color.transparent);
        btUUIDSelectAdapter.notifyDataSetChanged();

        btUUIDSelectAdapter.setMyOnItemClickListener(new BtUUIDSelectAdapter.OnItemClickListener() {
            @Override
            public void OnItemClick(View view, int position) {

                selectUUidPosition = position;

                for (int y = 0; y &lt; uUidStateBeanList.size(); y++) {

                    uUidStateBeanList.get(y).setSelected(false);

                }

                UUidStateBean uUidStateBean = new UUidStateBean();
                uUidStateBean.setSelected(true);
                uUidStateBean.setUUid(uUidStateBeanList.get(position).getUUid() + "");
                uUidStateBeanList.set(position, uUidStateBean);

                btUUIDSelectAdapter.notifyDataSetChanged();
            }

            @Override
            public void OnItemLonClick(int position) {

            }
        });
    }

    /**
     * 发送
     * 数据
     */
    public void senDMsgDataDe() {

//        MyEventManager.postMsg("==拉取数据请求==" + strHex, "formAndroid");
        byte[] demoCommand = BlueToothUtils.hex2Byte("ff fe 0b 27 01 d0 00 17 04 03 0f 1e 00");
//        byte[] demoCommand = BlueToothUtils.hex2Byte(strHex);

        int s = 0;
        while (true) {
            s++;
            if (s &gt; 2) {
                break;
            }
            try {
                Thread.sleep(1500);

                HBluetooth.getInstance()
                        .send(demoCommand, new SendCallBack() {
                            @Override
                            public void onSending(byte[] command) {
//                                Log.d(TAG, "命令发送中123...");
                            }

                            @Override
                            public void onSendFailure(BluetoothException bleException) {
//                                Log.d(TAG, "发送命令失败-&gt;" + bleException.getMessage());
                            }
                        });

            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

    }


    /**
     * 申请
     * 权限
     */
    private void requestPermission() {
        ActivityCompat.requestPermissions(this, NEEDED_PERMISSIONS, PERMISSION_REQUEST_CODE);
    }

    /**
     * @return 检查
     * 是否
     * 已经
     * 授予权限
     */
    private boolean checkPermission() {
        for (String permission : NEEDED_PERMISSIONS) {
            if (ActivityCompat.checkSelfPermission(this, permission)
                    != PackageManager.PERMISSION_GRANTED) {
                return false;
            }
        }

        return true;
    }

    private static final int PERMISSION_REQUEST_CODE = 0;
    // 两个权限需要动态申请
    private static final String[] NEEDED_PERMISSIONS = new String[]{
            Manifest.permission.ACCESS_COARSE_LOCATION,
            Manifest.permission.ACCESS_FINE_LOCATION,
            Manifest.permission.READ_EXTERNAL_STORAGE,
            Manifest.permission.WRITE_EXTERNAL_STORAGE,
    };

    /**
     * 监听从uni-app
     * 传过来的蓝牙uuid
     * 缓存数据
     */
    private String cacheServicesId = "";
    private List&lt;BletoothInfoBen&gt; blueListInfo;//蓝牙设备信息

    private void getCacheData() {

        blueListInfo = new ArrayList&lt;&gt;();
        String tp = tys;//页面跳转的时候传过来
        String value = Hawk.get(tp);//取低功耗蓝牙数据
        Gson gson = new Gson();

        Type type = new TypeToken&lt;ArrayList&lt;BletoothInfoBen&gt;&gt;() {
        }.getType();
        blueListInfo = gson.fromJson(value, type);

        StringBuilder stb = new StringBuilder();

        if (blueListInfo==null){
            return;
        }
        // 拿到蓝牙yaservicesID
        if (blueListInfo.size() &gt; 0) {
            for (int y = 0; y &lt; blueListInfo.size(); y++) {
                stb.append(blueListInfo.get(y).getServicesId() + " ");
            }
        }

        XiaoYaApp.setUuidTmp(stb + ",");
        Logger.d("=====获取到缓存蓝牙数据======" + stb);
    }


    /**
     * 保存
     * 蓝牙设备
     * 信息数据
     */
    private void saveBleDevicesInfo(String name, String devicesAdress, String servicesId) {

        long str = System.currentTimeMillis();

        String tp = tys;//页面跳转的时候传过来

        String names = "";

        if (name != null) {
            names = name;
        }

        String times = MyDateUtils.getSimpleYMDDate(str);

        BletoothInfoBen bluetoothDevice = new BletoothInfoBen();

        bluetoothDevice.setName(names);
        bluetoothDevice.setTypes(tp);
        bluetoothDevice.setDeviceId(devicesAdress);
        bluetoothDevice.setServicesId(servicesId);
        bluetoothDevice.setBindTime(times);

        if (blueListInfo==null){
            return;
        }

        blueListInfo.add(bluetoothDevice);

        String result = JSON.toJSONString(blueListInfo);
        Hawk.put(tp, result);//保存低功耗蓝牙

    }

    /**
     * 关闭对话框
     */
    private void cancleDialogProgress() {

        if (dialogProgress != null) {

            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    dialogProgress.cancel();
                }
            });

        }

    }

    /**
     * 进度对话框
     */
    private AlertDialog dialogProgress;

    private void showProgressDialog() {

        View view = getLayoutInflater().from(this).inflate(R.layout.ble_dialog_progress_layout, null);

        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(GeNBleActivity.this);
        linearLayoutManager.setOrientation(LinearLayoutManager.VERTICAL);

//        TextView progress_dialog_title = view.findViewById(R.id.progress_dialog_title);
//        progress_dialog_title.setText("启动蓝牙连接");

        dialogProgress = new AlertDialog.Builder(this).create();
        dialogProgress.setCancelable(true);
        dialogProgress.setCanceledOnTouchOutside(true);

        dialogProgress.show();
        dialogProgress.getWindow().setBackgroundDrawableResource(android.R.color.transparent);

        //设置位置窗体
        Window window = dialogProgress.getWindow();
        window.setGravity(Gravity.CENTER);
        window.setContentView(view);

        dialogProgress.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);//弹框
        dialogProgress.getWindow().setLayout((this.getWindowManager().getDefaultDisplay().getWidth() / 5 * 3), LinearLayout.LayoutParams.WRAP_CONTENT);
        dialogProgress.getWindow().setBackgroundDrawableResource(android.R.color.transparent);

    }

}</code></pre> 
<h3 id="3.UUidStateBean%E5%AF%B9%E8%B1%A1">3.UUidStateBean对象</h3> 
<pre><code>
public class UUidStateBean {

    private int state;
    private String UUid;
    private boolean selected;

    public int getState() {
        return state;
    }

    public void setState(int state) {
        this.state = state;
    }

    public String getUUid() {
        return UUid;
    }

    public void setUUid(String UUid) {
        this.UUid = UUid;
    }

    public boolean isSelected() {
        return selected;
    }

    public void setSelected(boolean selected) {
        this.selected = selected;
    }

    @Override
    public String toString() {
        return "UUidStateBean{" +
                "state=" + state +
                ", UUid='" + UUid + '\'' +
                ", selected=" + selected +
                '}';
    }

}
</code></pre> 
<h3 id="4.%E8%93%9D%E7%89%99%E4%BF%A1%E6%81%AF%E5%AF%B9%E8%B1%A1BletoothInfoBen">4.蓝牙信息对象BletoothInfoBen</h3> 
<pre><code>/**
 * 蓝牙
 * 信息对象
 */

public class BletoothInfoBen implements Serializable {

    private String name;//蓝牙名称
    private String types;//蓝牙类型  体温计or 血糖仪等等
    private String deviceId;//蓝牙设备id
    private String servicesId;//蓝牙服务id
    private String bindTime;//绑定时间

    public BletoothInfoBen() {
    }

    public BletoothInfoBen(String name, String types, String deviceId, String servicesId, String bindTime) {
        this.types = types;
        this.name = name;
        this.deviceId = deviceId;
        this.servicesId = servicesId;
        this.bindTime = bindTime;

    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getTypes() {
        return types;
    }

    public void setTypes(String types) {
        this.types = types;
    }

    public String getDeviceId() {
        return deviceId;
    }

    public void setDeviceId(String deviceId) {
        this.deviceId = deviceId;
    }

    public String getServicesId() {
        return servicesId;
    }

    public void setServicesId(String servicesId) {
        this.servicesId = servicesId;
    }

    public String getBindTime() {
        return bindTime;
    }

    public void setBindTime(String bindTime) {
        this.bindTime = bindTime;
    }

    @Override
    public String toString() {
        return "BletoothInfoBen{" +
                "name='" + name + '\'' +
                ", deviceId='" + deviceId + '\'' +
                ", servicesId='" + servicesId + '\'' +
                ", bindTime='" + bindTime + '\'' +
                '}';
    }

}
</code></pre> 
<h3 id="5.%E8%BF%9B%E5%BA%A6%E5%AF%B9%E8%AF%9D%E6%A1%86">5.进度对话框</h3> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="@dimen/dp_160"
    android:background="@drawable/popup_dialog_bg"
    android:gravity="center"
    android:orientation="vertical"&gt;

    &lt;TextView
        android:id="@+id/enter_wifi_password"
        android:layout_width="match_parent"
        android:layout_height="@dimen/dp_50"
        android:layout_marginLeft="@dimen/dp_35"
        android:layout_marginRight="@dimen/dp_35"
        android:background="@null"
        android:gravity="center"
        android:text="蓝牙连接中......"
        android:textAlignment="center"
        android:textColor="#333333"
        android:textSize="@dimen/sp_14" /&gt;


&lt;/LinearLayout&gt;

</code></pre> 
<h3 id="6.ble_servies_select_dialog%E5%B8%83%E5%B1%80">6.ble_servies_select_dialog布局</h3> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/popup_dialog_bg"
    android:orientation="vertical"&gt;

    &lt;RelativeLayout
        android:id="@+id/common_dialog_top_rl"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="@dimen/dp_10"
        android:gravity="center_vertical"
        android:paddingLeft="15dp"
        android:paddingRight="15dp"&gt;

        &lt;TextView
            android:id="@+id/common_dialog_title_tv"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="@dimen/dp_15"
            android:gravity="center_horizontal"
            android:textColor="#555555"
            android:textSize="@dimen/sp_16"
            tools:text="标题" /&gt;
    &lt;/RelativeLayout&gt;

    &lt;androidx.recyclerview.widget.RecyclerView
        android:id="@+id/dialogServList"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="5dp"
        android:layout_weight="1" /&gt;

    &lt;View
        android:layout_width="match_parent"
        android:layout_height="0.5dp"
        android:background="#F5F5F5" /&gt;

    &lt;LinearLayout
        android:id="@+id/common_dialog_bottom_ll"
        android:layout_width="match_parent"
        android:layout_height="45dp"
        android:orientation="horizontal"&gt;

        &lt;TextView
            android:id="@+id/common_dialog_cancel_tv"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:clickable="true"
            android:gravity="center"
            android:textColor="#0679FE"
            android:textSize="@dimen/sp_14"
            tools:text="取消" /&gt;

        &lt;View
            android:id="@+id/common_dialog_vertical_line"
            android:layout_width="1dp"
            android:layout_height="match_parent"
            android:background="#F5F5F5" /&gt;

        &lt;TextView
            android:id="@+id/common_dialog_confirm_tv"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:clickable="true"
            android:gravity="center"
            android:textColor="#0679FE"
            android:textSize="@dimen/sp_14"
            tools:text="确定" /&gt;
    &lt;/LinearLayout&gt;
&lt;/LinearLayout&gt;

</code></pre> 
<h3 id="7.gble_layout%E8%93%9D%E7%89%99%E5%B8%83%E5%B1%80">7.gble_layout蓝牙布局</h3> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#91CEC7"
    android:orientation="vertical"&gt;

    &lt;RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="@dimen/dp_40"
        android:layout_marginTop="@dimen/dp_5"
        android:gravity="center_vertical"
        android:orientation="horizontal"&gt;

        &lt;LinearLayout
            android:id="@+id/finish"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/dp_15"
            android:gravity="center_vertical"
            android:orientation="horizontal"&gt;

            &lt;ImageView
                android:layout_width="@dimen/dp_25"
                android:layout_height="@dimen/dp_20"
                android:scaleType="fitCenter"
                android:src="@mipmap/back" /&gt;

            &lt;TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="@dimen/dp_10"
                android:gravity="center_vertical"
                android:text="返回"
                android:textColor="#666666"
                android:textAlignment="center"
                android:textSize="@dimen/sp_18"
                tools:ignore="RtlCompat" /&gt;
        &lt;/LinearLayout&gt;

        &lt;LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center"&gt;

            &lt;TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_vertical"
                android:text="蓝牙搜索"
                android:textColor="#666666"
                android:textAlignment="center"
                android:textSize="@dimen/sp_18"
                tools:ignore="RtlCompat" /&gt;
        &lt;/LinearLayout&gt;
    &lt;/RelativeLayout&gt;

    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="@dimen/dp_30"
        android:layout_marginRight="@dimen/dp_30"
        android:layout_marginBottom="@dimen/dp_50"
        android:background="@drawable/blelist_bg_shape"
        android:orientation="vertical"&gt;

        &lt;LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/dp_30"
            android:layout_marginTop="@dimen/dp_30"
            android:layout_marginRight="@dimen/dp_30"
            android:layout_marginBottom="@dimen/dp_5"
            android:background="#ffffff"
            android:orientation="horizontal"&gt;

            &lt;TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text=""
                android:textSize="@dimen/sp_16" /&gt;

            &lt;Switch
                android:id="@+id/switch_bt"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:thumb="@drawable/thumb_bg"
                android:track="@drawable/track_bg"
                tools:ignore="UseSwitchCompatOrMaterialXml" /&gt;

        &lt;/LinearLayout&gt;

        &lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout
            android:id="@+id/swipeLayout"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginBottom="60dp"
            android:layout_weight="1"
            android:background="#ffffff"&gt;

            &lt;androidx.recyclerview.widget.RecyclerView
                android:id="@+id/recycleview"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_marginTop="13dp" /&gt;
        &lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;

    &lt;/LinearLayout&gt;

    &lt;ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"&gt;

        &lt;LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical"&gt;

            &lt;TextView
                android:layout_width="match_parent"
                android:layout_height="@dimen/dp_30"
                android:layout_marginLeft="@dimen/dp_10"
                android:layout_marginRight="@dimen/dp_10"
                android:text="接收蓝牙数据" /&gt;

            &lt;TextView
                android:id="@+id/blue_txt"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="@dimen/dp_10"
                android:layout_marginRight="@dimen/dp_10"
                android:text="" /&gt;
        &lt;/LinearLayout&gt;

    &lt;/ScrollView&gt;

&lt;/LinearLayout&gt;
</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/80a8c5760a29105d6796a7f4ed00728a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">flink源码分析之功能组件(六)-心跳组件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4e7a80ed83b0e472af5a53f17490a334/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">实现数组去重和数组扁平化的多种方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>