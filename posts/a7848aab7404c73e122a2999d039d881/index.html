<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【hadoop基础知识】 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【hadoop基础知识】" />
<meta property="og:description" content="HADOOP基础 1. Hadoop 简介什么是 Hadoop？Hadoop 的历史和发展Hadoop 的优势和应用场景Hadoop 的优势主要体现在以下几个方面：Hadoop 的应用场景主要包括以下几个方面： Hadoop 的核心组件Hadoop 由多个核心组件构成，主要包括以下几个： Hadoop 的发展趋势 2.Hadoop 核心组件Hadoop 分布式文件系统（HDFS）MapReduce 分布式计算框架YARN（Yet Another Resource Negotiator）Hadoop CommonZooKeeper 3. Hadoop 数据处理技术Hadoop 的数据处理流程Hadoop 的数据处理工具和技术HivePigHBaseSqoopFlumeFlume 的主要组成部分包括：Flume 的工作流程如下：Flume 的应用场景包括： 4. Hadoop 集群搭建和管理Hadoop 集群的架构和规划Hadoop 集群的搭建和配置Hadoop 在 CentOS 7 上的安装和配置安装 Java下载 Hadoop配置 Hadoop配置环境变量配置 Hadoop格式化 NameNode启动 Hadoop验证 Hadoop Hadoop 集群在 CentOS 7 上的安装和配置准备工作配置主机名配置 SSH安装 Java下载 Hadoop 配置 Hadoop配置环境变量配置 Hadoop配置节点信息配置 Hadoop 环境 启动 Hadoop测试 Hadoop结束 Hadoop Hadoop 集群的启动和停止启动集群停止集群 Hadoop 集群的监控和管理Hadoop Web UIHadoop 命令行工具日志监控第三方监控工具 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/a7848aab7404c73e122a2999d039d881/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-22T11:16:52+08:00" />
<meta property="article:modified_time" content="2023-02-22T11:16:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【hadoop基础知识】</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>HADOOP基础</h4> 
 <ul><li><a href="#1_Hadoop__2" rel="nofollow">1. Hadoop 简介</a></li><li><ul><li><a href="#_Hadoop_3" rel="nofollow">什么是 Hadoop？</a></li><li><a href="#Hadoop__5" rel="nofollow">Hadoop 的历史和发展</a></li><li><a href="#Hadoop__7" rel="nofollow">Hadoop 的优势和应用场景</a></li><li><ul><li><a href="#Hadoop__8" rel="nofollow">Hadoop 的优势主要体现在以下几个方面：</a></li><li><a href="#Hadoop__15" rel="nofollow">Hadoop 的应用场景主要包括以下几个方面：</a></li></ul> 
   </li><li><a href="#Hadoop__22" rel="nofollow">Hadoop 的核心组件</a></li><li><ul><li><a href="#Hadoop__23" rel="nofollow">Hadoop 由多个核心组件构成，主要包括以下几个：</a></li></ul> 
   </li><li><a href="#Hadoop__30" rel="nofollow">Hadoop 的发展趋势</a></li></ul> 
  </li><li><a href="#2Hadoop__35" rel="nofollow">2.Hadoop 核心组件</a></li><li><ul><li><a href="#Hadoop_HDFS_37" rel="nofollow">Hadoop 分布式文件系统（HDFS）</a></li><li><a href="#MapReduce__44" rel="nofollow">MapReduce 分布式计算框架</a></li><li><a href="#YARNYet_Another_Resource_Negotiator_50" rel="nofollow">YARN（Yet Another Resource Negotiator）</a></li><li><a href="#Hadoop_Common_55" rel="nofollow">Hadoop Common</a></li><li><a href="#ZooKeeper_58" rel="nofollow">ZooKeeper</a></li></ul> 
  </li><li><a href="#3_Hadoop__66" rel="nofollow">3. Hadoop 数据处理技术</a></li><li><ul><li><a href="#Hadoop__67" rel="nofollow">Hadoop 的数据处理流程</a></li><li><a href="#Hadoop__77" rel="nofollow">Hadoop 的数据处理工具和技术</a></li><li><ul><li><a href="#Hive_81" rel="nofollow">Hive</a></li><li><a href="#Pig_85" rel="nofollow">Pig</a></li><li><a href="#HBase_89" rel="nofollow">HBase</a></li><li><a href="#Sqoop_93" rel="nofollow">Sqoop</a></li><li><a href="#Flume_96" rel="nofollow">Flume</a></li><li><ul><li><a href="#Flume__101" rel="nofollow">Flume 的主要组成部分包括：</a></li><li><a href="#Flume__107" rel="nofollow">Flume 的工作流程如下：</a></li><li><a href="#Flume__115" rel="nofollow">Flume 的应用场景包括：</a></li></ul> 
   </li></ul> 
  </li></ul> 
  </li><li><a href="#4_Hadoop__123" rel="nofollow">4. Hadoop 集群搭建和管理</a></li><li><ul><li><a href="#Hadoop__125" rel="nofollow">Hadoop 集群的架构和规划</a></li><li><a href="#Hadoop__128" rel="nofollow">Hadoop 集群的搭建和配置</a></li><li><a href="#Hadoop__CentOS_7__152" rel="nofollow">Hadoop 在 CentOS 7 上的安装和配置</a></li><li><a href="#_Java_153" rel="nofollow">安装 Java</a></li><li><a href="#_Hadoop_161" rel="nofollow">下载 Hadoop</a></li><li><a href="#_Hadoop_172" rel="nofollow">配置 Hadoop</a></li><li><ul><li><a href="#_173" rel="nofollow">配置环境变量</a></li><li><a href="#_Hadoop_185" rel="nofollow">配置 Hadoop</a></li><li><a href="#_NameNode_228" rel="nofollow">格式化 NameNode</a></li><li><a href="#_Hadoop_234" rel="nofollow">启动 Hadoop</a></li><li><a href="#_Hadoop_241" rel="nofollow">验证 Hadoop</a></li></ul> 
   </li><li><a href="#Hadoop__CentOS_7__243" rel="nofollow">Hadoop 集群在 CentOS 7 上的安装和配置</a></li><li><ul><li><a href="#_244" rel="nofollow">准备工作</a></li><li><ul><li><a href="#_245" rel="nofollow">配置主机名</a></li><li><a href="#_SSH_259" rel="nofollow">配置 SSH</a></li><li><a href="#_Java_277" rel="nofollow">安装 Java</a></li><li><a href="#_Hadoop_284" rel="nofollow">下载 Hadoop</a></li></ul> 
    </li><li><a href="#_Hadoop_294" rel="nofollow">配置 Hadoop</a></li><li><ul><li><a href="#_295" rel="nofollow">配置环境变量</a></li><li><a href="#_Hadoop_307" rel="nofollow">配置 Hadoop</a></li><li><a href="#_358" rel="nofollow">配置节点信息</a></li><li><a href="#_Hadoop__365" rel="nofollow">配置 Hadoop 环境</a></li></ul> 
    </li><li><a href="#_Hadoop_371" rel="nofollow">启动 Hadoop</a></li><li><a href="#_Hadoop_388" rel="nofollow">测试 Hadoop</a></li><li><a href="#_Hadoop_409" rel="nofollow">结束 Hadoop</a></li></ul> 
   </li><li><a href="#Hadoop__418" rel="nofollow">Hadoop 集群的启动和停止</a></li><li><ul><li><a href="#_419" rel="nofollow">启动集群</a></li><li><a href="#_440" rel="nofollow">停止集群</a></li></ul> 
   </li><li><a href="#Hadoop__471" rel="nofollow">Hadoop 集群的监控和管理</a></li><li><ul><li><a href="#Hadoop_Web_UI_473" rel="nofollow">Hadoop Web UI</a></li><li><a href="#Hadoop__478" rel="nofollow">Hadoop 命令行工具</a></li><li><a href="#_485" rel="nofollow">日志监控</a></li><li><a href="#_490" rel="nofollow">第三方监控工具</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_Hadoop__2"></a>1. Hadoop 简介</h2> 
<h3><a id="_Hadoop_3"></a>什么是 Hadoop？</h3> 
<p>Hadoop 是一个开源的分布式计算框架，用于解决大数据存储和处理的问题。它基于 Google 的 MapReduce 论文和 Google 文件系统（GFS）的思想，由 Apache 软件基金会开发和维护。Hadoop 的设计目标是能够处理以千万、亿计的数据为基础的应用程序，提供高可靠性、高性能和高可扩展性的数据处理服务。</p> 
<h3><a id="Hadoop__5"></a>Hadoop 的历史和发展</h3> 
<p>Hadoop 的历史可以追溯到 2003 年，当时 Doug Cutting 和 Mike Cafarella 在开发一个全文搜索引擎的过程中遇到了存储和处理大数据的问题。为了解决这个问题，他们开始研究 Google 的 GFS 和 MapReduce 论文，并基于这些思想开发了 Hadoop。最初的 Hadoop 项目包括两个主要组件：Hadoop 分布式文件系统（HDFS）和 MapReduce 分布式计算框架。后来，Hadoop 生态系统中涌现出了一些基于 Hadoop 的工具和技术，如 Pig、Hive、HBase、Sqoop、Flume 和 Spark 等，使得 Hadoop 成为了一个完整的大数据处理平台。</p> 
<h3><a id="Hadoop__7"></a>Hadoop 的优势和应用场景</h3> 
<h4><a id="Hadoop__8"></a>Hadoop 的优势主要体现在以下几个方面：</h4> 
<ol><li>高可靠性：Hadoop 是一个分布式系统，能够通过多节点数据备份、数据恢复和故障转移等技术保证数据的可靠性和稳定性。</li><li>高性能：Hadoop 的分布式计算框架能够将大数据集分成小的数据块进行并行处理，从而大大提高了数据处理的速度和效率。</li><li>高可扩展性：Hadoop 的分布式架构和数据分块的方式能够轻松地实现集群的扩容，支持处理 PB 级别的数据量。</li><li>开源和免费：Hadoop是一个开源的项目，不需要额外的软件许可证费用，且拥有庞大的社区支持。</li></ol> 
<h4><a id="Hadoop__15"></a>Hadoop 的应用场景主要包括以下几个方面：</h4> 
<ol><li>大数据分析：Hadoop 可以处理大规模的结构化和非结构化数据，使得大数据分析变得更加容易和高效。</li><li>数据挖掘：Hadoop能够支持各种数据挖掘算法和工具，可以挖掘数据中的有用信息，从而提高业务决策的准确性和效率。</li><li>数据管理：Hadoop提供了分布式文件系统和分布式计算框架，能够实现大规模数据的存储、管理和处理，从而满足数据管理方面的需求。</li><li>机器学习：Hadoop支持多种机器学习框架和算法，可以进行大规模的机器学习任务，如图像识别、语音识别、自然语言处理等。</li><li>日志分析：Hadoop 能够实现实时的日志分析和处理，支持处理大量的日志数据，从而实现更好的业务运营和管理。</li></ol> 
<h3><a id="Hadoop__22"></a>Hadoop 的核心组件</h3> 
<h4><a id="Hadoop__23"></a>Hadoop 由多个核心组件构成，主要包括以下几个：</h4> 
<ol start="6"><li>Hadoop 分布式文件系统（HDFS）：HDFS 是 Hadoop 的分布式文件系统，它可以存储 PB级别的数据，并提供了多种数据备份、数据恢复和故障转移的技术，保证了数据的可靠性和稳定性。</li><li>MapReduce分布式计算框架：MapReduce 是 Hadoop的分布式计算框架，它能够将大规模数据集分成小的数据块进行并行处理，从而实现高性能和高效率的数据处理。</li><li>YARN（Yet Another Resource Negotiator）：YARN 是 Hadoop 的资源管理器，它负责管理和分配集群中的计算资源，从而实现集群的管理和任务调度。</li><li>Hadoop Common：Hadoop Common 是 Hadoop 的公共库和工具包，它包含了 Hadoop 的核心组件所需的公共工具和库。</li><li>ZooKeeper：ZooKeeper 是Hadoop 的分布式协调服务，用于协调集群中的各个组件，保证集群的稳定性和可靠性。</li></ol> 
<h3><a id="Hadoop__30"></a>Hadoop 的发展趋势</h3> 
<p>随着大数据技术的快速发展，Hadoop 的地位和影响力也越来越大。目前，Hadoop 已经成为了大数据处理的事实标准，但同时也面临着一些挑战和问题。为了应对这些挑战，Hadoop 社区正在不断地推出新的技术和工具，以满足不同场景下的需求，如：</p> 
<ol><li>Hadoop 3.x：Hadoop 3.x 是 Hadoop 的最新版本，它引入了一些新的功能和特性，如 YARN 重构、HDFS 改进、新的 API 等，提升了 Hadoop 的性能和可靠性。</li><li>Spark：Spark是一种快速、通用的大数据处理引擎，能够在内存中进行数据处理，具有更高的性能和效率，已成为 Hadoop 的重要组成部分。</li><li>Hive、Pig、HBase 等：Hadoop 生态系统中还有许多基于 Hadoop 的工具和技术，如 Hive、zuookeeper等</li></ol> 
<h2><a id="2Hadoop__35"></a>2.Hadoop 核心组件</h2> 
<p>Hadoop 是一个开源的分布式计算框架，它具有高可靠性、高可扩展性、高效性、高容错性等特点，适合处理大规模数据的存储和分析。Hadoop 由多个核心组件构成，包括 Hadoop 分布式文件系（HDFS）、MapReduce 分布式计算框架、YARN、Hadoop Common 和 ZooKeeper。</p> 
<h3><a id="Hadoop_HDFS_37"></a>Hadoop 分布式文件系统（HDFS）</h3> 
<p>HDFS 是 Hadoop 的分布式文件系统，它是 Hadoop 最核心的组件之一。HDFS 主要的作用是存储 PB 级别的大规模数据，并提供了多种数据备份、数据恢复和故障转移的技术，保证了数据的可靠性和稳定性。以下是 HDFS 的主要特点：</p> 
<blockquote> 
 <p>分布式存储：HDFS 将文件划分成多个块，每个块都会存储到不同的数据节点上，实现了数据的分布式存储和访问。<br> 数据冗余：HDFS支持数据的冗余备份，可以将数据块备份到多个数据节点上，实现了数据的高可靠性和容错性。<br> 数据读写：HDFS支持数据的随机读写和流式读写，能够满足不同场景下的数据读写需求。<br> 故障恢复：HDFS可以自动检测和处理节点故障，能够保证数据的可靠性和稳定性。</p> 
</blockquote> 
<h3><a id="MapReduce__44"></a>MapReduce 分布式计算框架</h3> 
<p>MapReduce 是 Hadoop 的分布式计算框架，它能够将大规模数据集分成小的数据块进行并行处理，从而实现高性能和高效率的数据处理。MapReduce 由 Map 和 Reduce 两个阶段组成，Map 阶段将数据切分并映射到多个计算节点上，Reduce 阶段将结果合并并输出到文件系统中。以下是 MapReduce 的主要特点：</p> 
<blockquote> 
 <p>分布式计算：MapReduce 支持分布式计算，能够将大规模数据集分成小的数据块进行并行处理，提高了数据处理的效率和性能。<br> 数据切分：MapReduce 能够将数据切分成多个小块进行处理，从而实现了数据的分布式存储和访问。<br> 容错性：MapReduce 支持容错处理，能够自动检测和处理节点故障，从而保证了计算的可靠性和稳定性。</p> 
</blockquote> 
<h3><a id="YARNYet_Another_Resource_Negotiator_50"></a>YARN（Yet Another Resource Negotiator）</h3> 
<p>YARN 是 Hadoop 的资源管理器，它负责管理和分配集群中的计算资源，从而实现集群的管理和任务调度。YARN 的主要作用是将计算框架（如 MapReduce）和资源管理（如 HDFS）分别，实现了计算和资源管理的分离。以下是 YARN 的主要特点：</p> 
<blockquote> 
 <p>集群管理：YARN 能够管理集群中的资源，分配计算资源给不同的应用程序。<br> 资源分配：YARN能够动态地分配和管理计算资源，保证不同应用程序之间的资源隔离和公平分配。<br> 任务调度：YARN能够调度和监控不同的计算任务，从而实现了任务的并发和并行执行。 可扩展性：YARN 能够支持大规模集群，具有良好的可扩展性和高效性。</p> 
</blockquote> 
<h3><a id="Hadoop_Common_55"></a>Hadoop Common</h3> 
<p>Hadoop Common 是 Hadoop 的基础组件，它包含了 Hadoop 所有模块都需要使用的公共库和工具，如输入输出、序列化、压缩、安全等。Hadoop Common 负责为整个 Hadoop 生态系统提供支持，并提供了一些工具和库，方便用户开发和管理 Hadoop 应用程序。</p> 
<h3><a id="ZooKeeper_58"></a>ZooKeeper</h3> 
<p>ZooKeeper 是 Hadoop 的分布式协调服务，它能够提供高可靠性的数据管理和分布式协调服务。ZooKeeper 的主要作用是为分布式应用程序提供一致性服务和协调管理，包括配置管理、命名服务、分布式锁和分布式协调等。以下是 ZooKeeper 的主要特点：</p> 
<blockquote> 
 <p>一致性：ZooKeeper 能够保证数据的一致性和可靠性，即使在节点故障的情况下也能够保证数据的正确性。 可靠性：ZooKeeper<br> 能够提供高可靠性的服务，保证了分布式应用程序的稳定性和可用性。 分布式锁：ZooKeeper<br> 支持分布式锁的实现，能够帮助应用程序实现分布式协调和管理。<br> 命名服务：ZooKeeper 能够提供命名服务，为应用程序提供统一的命名空间管理。</p> 
</blockquote> 
<h2><a id="3_Hadoop__66"></a>3. Hadoop 数据处理技术</h2> 
<h3><a id="Hadoop__67"></a>Hadoop 的数据处理流程</h3> 
<p>Hadoop 的数据处理流程通常包括以下几个步骤：</p> 
<ol><li>数据采集：通过 Flume 或其他采集工具，将数据从不同的来源收集到 Hadoop 集群中。</li><li>数据存储：将数据存储到 Hadoop 集群中的 HDFS（Hadoop 分布式文件系统）中。</li><li>数据处理：通过 Hadoop 的数据处理工具和技术，对存储在 HDFS 中的数据进行分析和处理。</li><li>数据查询：使用 Hive 或其他数据查询工具，对存储在 HDFS 中的数据进行查询和分析。</li><li>数据可视化：使用数据可视化工具（如 Tableau、PowerBI 等），将查询结果以可视化的方式呈现出来，以便用户更好地理解和分析数据。</li></ol> 
<h3><a id="Hadoop__77"></a>Hadoop 的数据处理工具和技术</h3> 
<p>Hadoop 提供了许多数据处理工具和技术，以下是其中的几个主要工具和技术：</p> 
<h4><a id="Hive_81"></a>Hive</h4> 
<p>Hive 是一个基于 Hadoop 的数据仓库和查询工具，它提供了类 SQL 的查询语言（HiveQL），可用于对存储在 HDFS 中的数据进行查询和分析。Hive 的执行引擎将 HiveQL 查询转换为 MapReduce 作业，然后在 Hadoop 集群中执行。除了 HiveQL，Hive 还提供了其他功能，如数据分区、数据压缩和数据聚合等。</p> 
<h4><a id="Pig_85"></a>Pig</h4> 
<p>Pig 是一个基于 Hadoop 的数据分析和处理工具，它提供了一种名为 Pig Latin 的脚本语言，可用于对存储在 HDFS 中的数据进行转换和处理。Pig Latin 脚本将被编译成 MapReduce 作业，并在 Hadoop 集群中执行。Pig 还提供了许多内置函数和运算符，以支持复杂的数据处理操作。</p> 
<h4><a id="HBase_89"></a>HBase</h4> 
<p>HBase 是一个基于 Hadoop 的分布式 NoSQL 数据库，它提供了实时读写访问 Hadoop 集群中的数据的能力。HBase 可以存储非结构化和半结构化数据，支持海量数据的高并发读写访问。HBase 的数据模型类似于关系型数据库，但其内部实现基于 Hadoop 的 HDFS。</p> 
<h4><a id="Sqoop_93"></a>Sqoop</h4> 
<p>Sqoop 是一个基于 Hadoop 的数据导入和导出工具，它可以将关系型数据库中的数据导入到 Hadoop 集群中的 HDFS 或 HBase 中，也可以将 Hadoop 集群中的数据导出到关系型数据库中。Sqoop 支持多种关系型数据库，如 MySQL、Oracle、PostgreSQL 等。</p> 
<h4><a id="Flume_96"></a>Flume</h4> 
<p>Flume 是一个基于 Hadoop 的日志收集和分<br> 析工具，能够帮助将分布在多个节点上的数据汇集到一个中心节点上进行分析和处理。</p> 
<h5><a id="Flume__101"></a>Flume 的主要组成部分包括：</h5> 
<ol><li>Source：数据源，用于从各种来源（例如文件、目录、Socket、Syslog、Avro、Netcat 等）收集数据，并将数据转换为Flume 事件。</li><li>Channel：消息通道，用于存储 Flume 事件，通道可以在 Source 和 Sink之间进行缓存、削峰和异步传输。</li><li>Sink：数据汇，用于将 Flume 事件传输到指定的目标（例如HDFS、HBase、Kafka、Elasticsearch 等）。</li></ol> 
<h5><a id="Flume__107"></a>Flume 的工作流程如下：</h5> 
<ol><li>Source 从各种来源收集数据，并将数据转换为 Flume 事件。</li><li>Flume 事件通过 Channel 进行传输和缓存。</li><li>Sink 从 Channel 中获取 Flume 事件，并将事件传输到指定的目标。</li></ol> 
<p>Flume 支持灵活的配置方式，可以通过配置文件或者命令行参数来指定 Source、Channel 和 Sink 的类型、属性、拓扑结构等。</p> 
<h5><a id="Flume__115"></a>Flume 的应用场景包括：</h5> 
<ol><li>日志收集：Flume 可以帮助将分布在多个节点上的日志收集到一个中心节点上进行分析和处理。</li><li>数据汇集：Flume 可以帮助将分散在多个来源的数据汇集到一个地方进行存储和处理。</li><li>数据传输：Flume 可以帮助将数据从一个系统传输到另一个系统，例如将数据从 Web 服务器传输到 Hadoop 集群中进行处理。</li></ol> 
<p>总的来说，Flume 是一个非常实用的工具，可以帮助处理分布在多个节点上的数据，简化数据处理流程，提高数据分析和处理的效率。</p> 
<h2><a id="4_Hadoop__123"></a>4. Hadoop 集群搭建和管理</h2> 
<p>Hadoop 集群是由多台机器组成的分布式系统，每台机器都可以执行 Hadoop 的各种任务。在搭建和管理 Hadoop 集群之前，需要进行架构和规划，确定需要使用多少台机器，每台机器的配置和角色等。接下来，需要进行 Hadoop 的安装、配置、启动和停止等工作，并对集群进行监控和管理，处理故障并进行优化和调优。</p> 
<h3><a id="Hadoop__125"></a>Hadoop 集群的架构和规划</h3> 
<p>在进行 Hadoop 集群的架构和规划之前，需要确定需要处理的数据量、数据类型、数据来源等，以及对数据进行的处理方式和目的。根据这些需求，可以确定需要使用多少台机器、每台机器的配置和角色等。一般来说，Hadoop 集群至少需要一台主节点和多台从节点，其中主节点通常运行 NameNode 和 JobTracker，从节点运行 DataNode 和 TaskTracker。可以使用 Hadoop 提供的工具，如 Hadoop Capacity Planner 或 Cloudera Manager 等来进行集群规划和设计。</p> 
<h3><a id="Hadoop__128"></a>Hadoop 集群的搭建和配置</h3> 
<p>Hadoop 集群的搭建和配置需要经过以下几个步骤：</p> 
<ol><li>确定集群规模和架构<br> 在开始搭建 Hadoop集群之前，需要先确定集群规模和架构。集群规模包括节点数、存储容量和计算能力等。架构方面，可以选择单节点模式或多节点模式，以及使用什么类型的节点（如NameNode、DataNode、ResourceManager、NodeManager 等）。</li><li>安装和配置操作系统<br> 在安装 Hadoop 前，需要先安装和配置操作系统。建议选择稳定、可靠、支持 Hadoop 的操作系统，如 CentOS、Red Hat Enterprise Linux、Ubuntu 等。另外，需要安装必要的软件和库，如 JDK、SSH、NTP 等。</li><li>安装和配置 Hadoop<br> 安装和配置 Hadoop 通常包括以下几个步骤：<br> （1）下载 Hadoop：从 Hadoop 官网下载最新版本的 Hadoop。<br> （2）解压 Hadoop：将下载的 Hadoop 压缩包解压到指定目录。<br> （3）配置 Hadoop：编辑 Hadoop 的配置文件，包括 core-site.xml、hdfs-site.xml、mapred-site.xml 和 yarn-site.xml 等，以及配置环境变量和 SSH 免密码登录等。<br> （4）格式化 NameNode：在启动 Hadoop 前，需要先格式化 NameNode，以清空之前存储的数据。</li><li>启动 Hadoop<br> 启动 Hadoop 需要按照特定的顺序启动不同的节点，通常按照以下顺序启动：<br> （1）启动 ZooKeeper：如果使用了 ZooKeeper，则需要先启动 ZooKeeper。<br> （2）启动 NameNode：启动 NameNode。<br> （3）启动 DataNode：启动 DataNode。<br> （4）启动 ResourceManager：启动 ResourceManager。<br> （5）启动 NodeManager：启动 NodeManager。<br> （6）启动 JobHistoryServer：启动 JobHistoryServer。</li><li>测试集群<br> 在启动 Hadoop 后，需要进行测试，确保集群能够正常工作。可以使用 Hadoop 提供的一些测试工具，如 HDFS 文件读写测试、MapReduce 程序测试等。</li></ol> 
<h3><a id="Hadoop__CentOS_7__152"></a>Hadoop 在 CentOS 7 上的安装和配置</h3> 
<h3><a id="_Java_153"></a>安装 Java</h3> 
<p>Hadoop 是基于 Java 开发的，所以需要先安装 Java 运行环境。</p> 
<pre><code class="prism language-bash"><span class="token comment"># 安装 OpenJDK</span>
<span class="token function">sudo</span> yum update
<span class="token function">sudo</span> yum <span class="token function">install</span> java-1.8.0-openjdk
</code></pre> 
<h3><a id="_Hadoop_161"></a>下载 Hadoop</h3> 
<p>从 Hadoop 官网下载最新版本的 Hadoop 压缩包，解压到 /usr/local/hadoop 目录下。</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">mkdir</span> /usr/local/hadoop
<span class="token builtin class-name">cd</span> /usr/local/hadoop
<span class="token function">sudo</span> <span class="token function">wget</span> https://archive.apache.org/dist/hadoop/common/hadoop-3.3.1/hadoop-3.3.1.tar.gz
<span class="token function">sudo</span> <span class="token function">tar</span> <span class="token parameter variable">-xzvf</span> hadoop-3.3.1.tar.gz
<span class="token function">sudo</span> <span class="token function">mv</span> hadoop-3.3.1/* <span class="token builtin class-name">.</span>
<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> hadoop-3.3.1
</code></pre> 
<h3><a id="_Hadoop_172"></a>配置 Hadoop</h3> 
<h4><a id="_173"></a>配置环境变量</h4> 
<p>打开 /etc/profile 文件，添加以下内容。</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/usr/local/hadoop
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HADOOP_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/sbin
</code></pre> 
<p>执行以下命令使环境变量生效。</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<h4><a id="_Hadoop_185"></a>配置 Hadoop</h4> 
<p>进入 Hadoop 的 conf 目录，编辑以下配置文件。</p> 
<pre><code class="prism language-xml">core-site.xml
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://localhost:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>hdfs-site.xml</p> 
<pre><code class="prism language-xml">Copy code
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.replication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
mapred-site.xml
</code></pre> 
<pre><code class="prism language-xml">Copy code
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.framework.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yarn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>yarn-site.xml</p> 
<pre><code class="prism language-xml">Copy code
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.aux-services<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>mapreduce_shuffle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="_NameNode_228"></a>格式化 NameNode</h4> 
<p>在命令行中输入以下命令格式化 NameNode。</p> 
<pre><code class="prism language-bash">hdfs namenode <span class="token parameter variable">-format</span>
</code></pre> 
<h4><a id="_Hadoop_234"></a>启动 Hadoop</h4> 
<p>在命令行中输入以下命令启动 Hadoop。</p> 
<pre><code class="prism language-bash">start-dfs.sh
start-yarn.sh
</code></pre> 
<h4><a id="_Hadoop_241"></a>验证 Hadoop</h4> 
<p>在浏览器中访问 http://localhost:9870，如果可以打开 Hadoop 的 web 界面，则说明 Hadoop 已经安装和配置成功。</p> 
<h3><a id="Hadoop__CentOS_7__243"></a>Hadoop 集群在 CentOS 7 上的安装和配置</h3> 
<h4><a id="_244"></a>准备工作</h4> 
<h5><a id="_245"></a>配置主机名</h5> 
<p>在所有节点上，打开 /etc/hosts 文件，添加主机名和 IP 地址的对应关系。</p> 
<pre><code class="prism language-bash">Copy code
<span class="token function">sudo</span> <span class="token function">vi</span> /etc/hosts
</code></pre> 
<p>添加以下内容。</p> 
<pre><code class="prism language-Copy">192.168.1.1   hadoop-master
192.168.1.2   hadoop-slave-1
192.168.1.3   hadoop-slave-2
</code></pre> 
<h5><a id="_SSH_259"></a>配置 SSH</h5> 
<p>在所有节点上，安装和配置 SSH 服务。</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> yum <span class="token function">install</span> openssh-server
<span class="token function">sudo</span> systemctl start sshd.service
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> sshd.service
在主节点上，生成 SSH 密钥。
</code></pre> 
<pre><code class="prism language-bash">ssh-keygen <span class="token parameter variable">-t</span> rsa
</code></pre> 
<p>将公钥复制到所有从节点。</p> 
<pre><code class="prism language-bash">ssh-copy-id username@hadoop-slave-1
ssh-copy-id username@hadoop-slave-2
</code></pre> 
<h5><a id="_Java_277"></a>安装 Java</h5> 
<p>Hadoop 是基于 Java 开发的，所以需要先安装 Java 运行环境。</p> 
<pre><code class="prism language-bash"><span class="token comment"># 安装 OpenJDK</span>
<span class="token function">sudo</span> yum update
<span class="token function">sudo</span> yum <span class="token function">install</span> java-1.8.0-openjdk
</code></pre> 
<h5><a id="_Hadoop_284"></a>下载 Hadoop</h5> 
<p>从 Hadoop 官网下载最新版本的 Hadoop 压缩包，解压到 /usr/local/hadoop 目录下。</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">mkdir</span> /usr/local/hadoop
<span class="token builtin class-name">cd</span> /usr/local/hadoop
<span class="token function">sudo</span> <span class="token function">wget</span> https://archive.apache.org/dist/hadoop/common/hadoop-3.3.1/hadoop-3.3.1.tar.gz
<span class="token function">sudo</span> <span class="token function">tar</span> <span class="token parameter variable">-xzvf</span> hadoop-3.3.1.tar.gz
<span class="token function">sudo</span> <span class="token function">mv</span> hadoop-3.3.1/* <span class="token builtin class-name">.</span>
<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> hadoop-3.3.1
</code></pre> 
<h4><a id="_Hadoop_294"></a>配置 Hadoop</h4> 
<h5><a id="_295"></a>配置环境变量</h5> 
<p>在所有节点上，打开 /etc/profile 文件，添加以下内容。</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/usr/local/hadoop
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HADOOP_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/sbin
</code></pre> 
<p>执行以下命令使环境变量生效。</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<h5><a id="_Hadoop_307"></a>配置 Hadoop</h5> 
<p>在主节点上，进入 Hadoop 的 conf 目录，编辑以下配置文件。</p> 
<p>core-site.xml</p> 
<pre><code class="prism language-xml">Copy code
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://hadoop-master:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>hdfs-site.xml</p> 
<pre><code class="prism language-xml">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.permissions.enabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>mapred-site.xml</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.framework.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yarn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>yarn-site.xml</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.aux-services<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>mapreduce_shuffle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.hostname<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hadoop-master<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.resource.memory-mb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>4096<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.resource.cpu-vcores<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h5><a id="_358"></a>配置节点信息</h5> 
<p>在主节点上，打开 /usr/local/hadoop/etc/hadoop/slaves 文件，添加从节点的主机名。</p> 
<pre><code class="prism language-bash">hadoop-slave-1
hadoop-slave-2
</code></pre> 
<h5><a id="_Hadoop__365"></a>配置 Hadoop 环境</h5> 
<p>在主节点上，打开 /usr/local/hadoop/etc/hadoop/hadoop-env.sh 文件，设置 JAVA_HOME 环境变量。</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.302.b08-0.el7_9.x86_64
</code></pre> 
<h4><a id="_Hadoop_371"></a>启动 Hadoop</h4> 
<p>在主节点上，格式化 NameNode。</p> 
<pre><code class="prism language-bash">hdfs namenode <span class="token parameter variable">-format</span>
</code></pre> 
<p>启动 Hadoop。</p> 
<pre><code class="prism language-bash">start-dfs.sh
start-yarn.sh
</code></pre> 
<p>在浏览器中输入以下地址，查看 Hadoop 状态。</p> 
<pre><code class="prism language-javascript"><span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>hadoop<span class="token operator">-</span>master<span class="token operator">:</span><span class="token number">9870</span>
</code></pre> 
<h4><a id="_Hadoop_388"></a>测试 Hadoop</h4> 
<p>在主节点上，创建一个目录。</p> 
<pre><code class="prism language-bash">hdfs dfs <span class="token parameter variable">-mkdir</span> /test
</code></pre> 
<p>在主节点上，将一个本地文件上传到 HDFS。</p> 
<pre><code class="prism language-bash">hdfs dfs <span class="token parameter variable">-put</span> /usr/local/hadoop/etc/hadoop/hadoop-env.sh /test
</code></pre> 
<p>在主节点上，列出 HDFS 中的文件。</p> 
<pre><code class="prism language-bash">hdfs dfs <span class="token parameter variable">-ls</span> /test
</code></pre> 
<p>在主节点上，从 HDFS 中下载一个文件。</p> 
<pre><code class="prism language-bash">hdfs dfs <span class="token parameter variable">-get</span> /test/hadoop-env.sh /tmp
</code></pre> 
<h4><a id="_Hadoop_409"></a>结束 Hadoop</h4> 
<p>在主节点上，停止 Hadoop。</p> 
<pre><code class="prism language-bash">Copy code
stop-dfs.sh
stop-yarn.sh
</code></pre> 
<h3><a id="Hadoop__418"></a>Hadoop 集群的启动和停止</h3> 
<h4><a id="_419"></a>启动集群</h4> 
<pre><code class="prism language-bash"><span class="token comment"># 启动 ZooKeeper</span>
zkServer.sh start

<span class="token comment"># 启动 NameNode</span>
start-dfs.sh

<span class="token comment"># 启动 DataNode</span>
start-yarn.sh

<span class="token comment"># 启动 ResourceManager</span>
<span class="token function">yarn</span> <span class="token parameter variable">--daemon</span> start resourcemanager

<span class="token comment"># 启动 NodeManager</span>
<span class="token function">yarn</span> <span class="token parameter variable">--daemon</span> start nodemanager

<span class="token comment"># 启动 JobHistoryServer</span>
mapred <span class="token parameter variable">--daemon</span> start historyserver
</code></pre> 
<h4><a id="_440"></a>停止集群</h4> 
<p>停止集群也需要按照特定的顺序停止不同的节点，通常按照以下顺序停止：<br> （1）停止 JobHistoryServer：先停止 JobHistoryServer。<br> （2）停止 NodeManager：停止 NodeManager。<br> （3）停止 ResourceManager：停止 ResourceManager。<br> （4）停止 DataNode：停止 DataNode。<br> （5）停止 NameNode：停止 NameNode。<br> （6）停止 ZooKeeper：如果使用了 ZooKeeper，则最后停止 ZooKeeper。</p> 
<p>可以使用以下命令停止集群：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 停止 JobHistoryServer</span>
mapred <span class="token parameter variable">--daemon</span> stop historyserver

<span class="token comment"># 停止 NodeManager</span>
<span class="token function">yarn</span> <span class="token parameter variable">--daemon</span> stop nodemanager

<span class="token comment"># 停止 ResourceManager</span>
<span class="token function">yarn</span> <span class="token parameter variable">--daemon</span> stop resourcemanager

<span class="token comment"># 停止 DataNode</span>
stop-yarn.sh

<span class="token comment"># 停止 NameNode</span>
stop-dfs.sh

<span class="token comment"># 停止 ZooKeeper</span>
zkServer.sh stop
</code></pre> 
<p>在启动和停止集群之前，需要确保配置正确且没有错误，并且集群中所有节点都处于正常状态。这些操作在 Hadoop 集群管理中非常重要，可以保证集群的稳定性和可靠性。</p> 
<h3><a id="Hadoop__471"></a>Hadoop 集群的监控和管理</h3> 
<h4><a id="Hadoop_Web_UI_473"></a>Hadoop Web UI</h4> 
<p>Hadoop Web UI 是一个内置的 Web 应用程序，可以通过浏览器访问它。通过 Hadoop Web UI，可以查看集群的整体健康状况，例如 NameNode 和 DataNode 的状态、ResourceManager 和 NodeManager 的状态、作业的状态和进度等等。可以使用以下 URL 访问 Hadoop Web UI：</p> 
<ul><li>HDFS Web UI：http://:50070</li><li>YARN Web UI：http://:8088</li></ul> 
<h4><a id="Hadoop__478"></a>Hadoop 命令行工具</h4> 
<p>除了 Hadoop Web UI 外，Hadoop 还提供了一些命令行工具来监控和管理 Hadoop 集群。以下是一些常用的命令行工具：</p> 
<ul><li>hdfs dfs：用于操作 HDFS 文件系统，例如上传和下载文件、创建和删除目录等等。</li><li>yarn application -list：列出当前正在运行的所有 YARN 应用程序。</li><li>yarn application -kill &lt;application_id&gt;：停止指定的 YARN 应用程序。</li><li>yarn node -list：列出当前连接到 ResourceManager 的所有 NodeManager。</li></ul> 
<h4><a id="_485"></a>日志监控</h4> 
<p>在 Hadoop 集群中，每个组件都会生成日志文件，用于记录运行时的事件和错误。可以使用以下命令来查看 Hadoop 日志文件：</p> 
<ul><li>hadoop fs -cat &lt;log_file_path&gt;：用于查看 Hadoop 日志文件，例如 NameNode 和 DataNode 的日志文件、ResourceManager 和 NodeManager 的日志文件等等。</li><li>tail -f &lt;log_file_path&gt;：用于实时监视日志文件的更新，可以及时发现错误和异常事件。</li></ul> 
<h4><a id="_490"></a>第三方监控工具</h4> 
<p>除了 Hadoop 内置的监控工具外，还有一些第三方监控工具可以使用，例如 Nagios、Ganglia、Zabbix 等等。这些工具可以提供更详细的监控数据、自定义告警和警报等功能，有助于实现更高级别的监控和管理。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e180d17c6a9b31a03d9f665ac2187d41/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Python三种打包方式】分别使用PyInstaller &amp; setupTools &amp; 拷贝环境实现项目打包</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/74c87ecfe90391e0aa93615a68021bce/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数组——二分法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>