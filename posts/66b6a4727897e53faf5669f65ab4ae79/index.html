<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android Settings开发之修改 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android Settings开发之修改" />
<meta property="og:description" content="版本：1.0 日期：2014.3.20 2014.3.25 版权：© 2014 kince 转载注明出处 下面是Seeings应用的截图： 可以看出这是很典型的使用了Fragment后的界面，设置里面有WIFI、蓝牙、显示、存储、应用等众多功能。左边的每一项，对应着右边的一个设置界面，Fragment有四个子类：DialogFragment, ListFragment, PreferenceFragment, WebViewFragment。很明显，Settings用的是PreferenceFragment。接着看一下Settings源码package结构： 主题部分的实现主要在com.android.settings下面，其他包主要是用于各自功能实现，所以重点说这个包下面的类。在AndroidManifest.xml文字中，看到程序入口是Settings类： 打开Settings类，是继承于PreferenceActivity： 其他的继承关系如下：PreferenceActivity--&gt;ListActivity --&gt; Activity。PreferenceActivity主要用于Settings，关于如何使用可以参考API（http://developer.android.com/reference/android/preference/PreferenceActivity.html）以及guide（http://developer.android.com/guide/topics/ui/settings.html）。和它相关联的类有header、fragment、preference。每一个header就是左边的一个选项条目，像蓝牙、应用等，选择之后右边就会显示对应的fragment（平板），然后fragment和preference联系在一起，组成了一个个设置项。一般在activity中设置布局，用的是setContentView()，在PreferenceActivity中，是需要继承onBuildHeaders(List)这个方法， @Override public void onBuildHeaders(List&lt;Header&gt; target) { loadHeadersFromResource(R.xml.preference_headers, target); } 去生成选项表，点击选项表的一个条目，右边显示对应的Fragment，这就是很典型的header&#43;fragment组合，所以如果想在Settings基础之上添加条目的话，在这个方法里面的xml文件中添加即可，然后对应上fragment。下面分析一下执行流程： 首先进入onCreate(Bundle savedInstanceState)方法里面，代码如下： @Override protected void onCreate(Bundle savedInstanceState) { if (getIntent().getBooleanExtra(EXTRA_CLEAR_UI_OPTIONS, false)) { getWindow().setUiOptions(0); } mAuthenticatorHelper = new AuthenticatorHelper(); mAuthenticatorHelper.updateAuthDescriptions(this); mAuthenticatorHelper.onAccountsUpdated(this, null); mDevelopmentPreferences = getSharedPreferences(DevelopmentSettings.PREF_FILE, Context.MODE_PRIVATE); getMetaData(); mInLocalHeaderSwitch = true; super.onCreate(savedInstanceState); mInLocalHeaderSwitch = false; if (!onIsHidingHeaders() &amp;&amp; onIsMultiPane()) { highlightHeader(mTopLevelHeaderId); // Force the title so that it doesn&#39;t get overridden by a direct launch of // a specific settings screen." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/66b6a4727897e53faf5669f65ab4ae79/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-03-25T17:23:00+08:00" />
<meta property="article:modified_time" content="2014-03-25T17:23:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android Settings开发之修改</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:12pt;"></span> 
版本：1.0 
<div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <div>
   日期：2014.3.20 2014.3.25 
 </div> 
 <div> 
  <span style="font-size:15px;">版权：© 2014 kince 转载注明出处</span> 
 </div> 
</div> 
<div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
   
</div> 
<div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"> 下面是Seeings应用的截图：</span> 
</div> 
<div style="text-align:center;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><img src="https://images2.imgbox.com/9e/b6/fdOUFLPW_o.png" alt=""><br></span> 
</div> 
<div style="text-align:left;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:12pt;">可以看出这是很典型的使用了Fragment后的界面，设置里面有WIFI、蓝牙、显示、存储、应用等众多功能。左边的每一项，对应着右边的一个设置界面，</span><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:16.47058868408203px;line-height:28.235292434692383px;">Fragment有四个子类：</span><span style="font-size:14px;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;"><span style="line-height:28.235292434692383px;">DialogFragment, ListFragment, PreferenceFragment, WebViewFragment。很明显，Settings用的是</span></span><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:28.235292434692383px;">PreferenceFragment。接着看一下Settings源码package结构：</span></span> 
</div> 
<div style="text-align:center;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:28.235292434692383px;"><img src="https://images2.imgbox.com/be/fb/E8ToS2QE_o.png" alt=""><br></span></span> 
</div> 
<div style="text-align:left;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:28.235292434692383px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">主题部分的实现主要在com.android.settings下面，其他包主要是用于各自功能实现，所以重点说这个包下面的类。在AndroidManifest.xml文字中，看到程序入口是Settings类：</span></span></span> 
</div> 
<div style="text-align:center;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:28.235292434692383px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><img src="https://images2.imgbox.com/42/dc/ylI58HC8_o.png" alt=""><br></span></span></span> 
</div> 
<div style="text-align:left;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:28.235292434692383px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">打开Settings类，是继承于PreferenceActivity：</span></span></span></span> 
</div> 
<div style="text-align:center;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:28.235292434692383px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><img src="https://images2.imgbox.com/70/d5/bVNMZ3JY_o.png" alt=""><br></span></span></span></span> 
</div> 
<div style="text-align:left;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:28.235292434692383px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">其他的继承关系如下：</span><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">PreferenceActivity</span><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">--&gt;</span><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">ListActivity --&gt; Activity。</span><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">PreferenceActivity主要用于Settings，关于如何使用可以参考API（</span><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">http://developer.android.com/reference/android/preference/PreferenceActivity.html</span><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">）以及guide（</span><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">http://developer.android.com/guide/topics/ui/settings.html</span><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">）。和它相关联的类有header、fragment、preference。每一个header就是左边的一个选项条目，像蓝牙、应用等，选择之后右边就会显示对应的fragment（平板），然后fragment和preference联系在一起，组成了一个个设置项。一般在activity中设置布局，用的是setContentView()，在</span><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">PreferenceActivity中，是需要继承</span><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">onBuildHeaders(List)这个方法，</span></span></span></span></span> 
</div> 
<div style="text-align:left;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:28.235292434692383px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span></span></span></span></span> 
 <pre><code class="language-html"> @Override
public void onBuildHeaders(List&lt;Header&gt; target) {
   loadHeadersFromResource(R.xml.preference_headers, target);
} </code></pre> 
 <span style="font-size:14px;">去生成选项表，点击选项表的一个条目，右边显示对应的Fragment，这就是很典型的header+fragment组合，所以如果想在Settings基础之上添加条目的话，在这个方法里面的xml文件中添加即可，然后对应上fragment。下面分析一下执行流程：</span> 
 <span style="font-size:14px;line-height:28.235292434692383px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span></span></span></span> 
 <div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
  <span style="font-size:10.5pt;line-height:1.5;"> 首先进入</span>onCreate(Bundle savedInstanceState)方法里面，代码如下： 
 </div> 
 <pre><code class="language-html">@Override
    protected void onCreate(Bundle savedInstanceState) {
        if (getIntent().getBooleanExtra(EXTRA_CLEAR_UI_OPTIONS, false)) {
            getWindow().setUiOptions(0);
        }
        mAuthenticatorHelper = new AuthenticatorHelper();
        mAuthenticatorHelper.updateAuthDescriptions(this);
        mAuthenticatorHelper.onAccountsUpdated(this, null);
        mDevelopmentPreferences = getSharedPreferences(DevelopmentSettings.PREF_FILE,
                Context.MODE_PRIVATE);
        getMetaData();
        mInLocalHeaderSwitch = true;
        super.onCreate(savedInstanceState);
        mInLocalHeaderSwitch = false;
        if (!onIsHidingHeaders() &amp;&amp; onIsMultiPane()) {
            highlightHeader(mTopLevelHeaderId);
            // Force the title so that it doesn't get overridden by a direct launch of
            // a specific settings screen.
            setTitle(R.string.settings_label);
        }
        // Retrieve any saved state
        if (savedInstanceState != null) {
            mCurrentHeader = savedInstanceState.getParcelable(SAVE_KEY_CURRENT_HEADER);
            mParentHeader = savedInstanceState.getParcelable(SAVE_KEY_PARENT_HEADER);
        }
        // If the current header was saved, switch to it
        if (savedInstanceState != null &amp;&amp; mCurrentHeader != null) {
            //switchToHeaderLocal(mCurrentHeader);
            showBreadCrumbs(mCurrentHeader.title, null);
        }
        if (mParentHeader != null) {
            setParentTitle(mParentHeader.title, null, new OnClickListener() {
                public void onClick(View v) {
                    switchToParent(mParentHeader.fragment);
                }
            });
        }
        // Override up navigation for multi-pane, since we handle it in the fragment breadcrumbs
        if (onIsMultiPane()) {
            getActionBar().setDisplayHomeAsUpEnabled(false);
            getActionBar().setHomeButtonEnabled(false);
        }
    }</code></pre> 
 <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">第一个if用于设置window ui的对修改来说不用考虑了，意义不大，</span> 
 <br> 
 <pre><code class="language-html">mAuthenticatorHelper = new AuthenticatorHelper();
mAuthenticatorHelper.updateAuthDescriptions(this);
mAuthenticatorHelper.onAccountsUpdated(this, null);</code></pre> 
 <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">这个段代码用于认证以及更新账户信息，接着往下看：</span> 
</div> 
<div style="text-align:left;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-size:14px;line-height:28.235292434692383px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span></span></span></span></span> 
 <pre><code class="language-html">mDevelopmentPreferences = getSharedPreferences(DevelopmentSettings.PREF_FILE,Context.MODE_PRIVATE);</code></pre> 
 <span style="font-size:14px;">用于之后保存数据，</span> 
 <span style="font-size:14px;">然后是getMetaData();这个方法，代码如下：</span> 
</div> 
<div style="text-align:left;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-size:14px;"></span></span> 
 <pre><code class="language-html">private void getMetaData() {
        try {
            ActivityInfo ai = getPackageManager().getActivityInfo(getComponentName(),
                    PackageManager.GET_META_DATA);
            if (ai == null || ai.metaData == null) return;
            mTopLevelHeaderId = ai.metaData.getInt(META_DATA_KEY_HEADER_ID);
            mFragmentClass = ai.metaData.getString(META_DATA_KEY_FRAGMENT_CLASS);
            // Check if it has a parent specified and create a Header object
            final int parentHeaderTitleRes = ai.metaData.getInt(META_DATA_KEY_PARENT_TITLE);
            String parentFragmentClass = ai.metaData.getString(META_DATA_KEY_PARENT_FRAGMENT_CLASS);
            if (parentFragmentClass != null) {
                mParentHeader = new Header();
                mParentHeader.fragment = parentFragmentClass;
                if (parentHeaderTitleRes != 0) {
                    mParentHeader.title = getResources().getString(parentHeaderTitleRes);
                }
            }
        } catch (NameNotFoundException nnfe) {
            // No recovery
        }
    }</code></pre> 
 <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">这个方法用于设置mParentHeader的Fragment以及title。下面具体举两个例子，关于如何修改Settings。</span> 
</div> 
<div style="text-align:left;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-size:14px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span></span></span> 
 <div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">
   一、添加headers 
 </div> 
 <div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">
   header即是左边的菜单，如下图左侧。它的布局文件在res下的xml文件夹中，名字是settings_headers.xml。打开如下： 
 </div> 
 <pre><code class="language-html">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!--
     Copyright (C) 2010 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
--&gt;

&lt;preference-headers xmlns:android="http://schemas.android.com/apk/res/android" &gt;

    &lt;!-- WIRELESS and NETWORKS --&gt;
    &lt;header
        android:id="@+id/wireless_section"
        android:title="@string/header_category_wireless_networks" /&gt;

    &lt;!-- Wifi --&gt;
    &lt;header
        android:id="@+id/wifi_settings"
        android:fragment="com.android.settings.wifi.WifiSettings"
        android:icon="@drawable/ic_settings_wireless"
        android:title="@string/wifi_settings_title" /&gt;

    &lt;!-- Bluetooth --&gt;
    &lt;header
        android:id="@+id/bluetooth_settings"
        android:fragment="com.android.settings.bluetooth.BluetoothSettings"
        android:icon="@drawable/ic_settings_bluetooth2"
        android:title="@string/bluetooth_settings_title" /&gt;

    &lt;!-- Data Usage --&gt;
    &lt;header
        android:id="@+id/data_usage_settings"
        android:fragment="com.android.settings.DataUsageSummary"
        android:icon="@drawable/ic_settings_data_usage"
        android:title="@string/data_usage_summary_title" /&gt;

    &lt;!-- Operator hook --&gt;
    &lt;header
        android:id="@+id/operator_settings"
        android:fragment="com.android.settings.WirelessSettings" &gt;
        &lt;intent android:action="com.android.settings.OPERATOR_APPLICATION_SETTING" /&gt;
    &lt;/header&gt;

    &lt;!-- Other wireless and network controls --&gt;
    &lt;header
        android:id="@+id/wireless_settings"
        android:breadCrumbTitle="@string/wireless_networks_settings_title"
        android:fragment="com.android.settings.WirelessSettings"
        android:icon="@drawable/empty_icon"
        android:title="@string/radio_controls_title" /&gt;

    &lt;!-- DEVICE --&gt;
    &lt;header
        android:id="@+id/device_section"
        android:title="@string/header_category_device" /&gt;

    &lt;!-- Sound --&gt;
    &lt;header
        android:id="@+id/sound_settings"
        android:fragment="com.android.settings.SoundSettings"
        android:icon="@drawable/ic_settings_sound"
        android:title="@string/sound_settings" /&gt;

    &lt;!-- Display --&gt;
    &lt;header
        android:id="@+id/display_settings"
        android:fragment="com.android.settings.DisplaySettings"
        android:icon="@drawable/ic_settings_display"
        android:title="@string/display_settings" /&gt;

    &lt;!-- Storage --&gt;
    &lt;header
        android:id="@+id/storage_settings"
        android:fragment="com.android.settings.deviceinfo.Memory"
        android:icon="@drawable/ic_settings_storage"
        android:title="@string/storage_settings" /&gt;

    &lt;!-- Battery --&gt;
    &lt;header
        android:id="@+id/battery_settings"
        android:fragment="com.android.settings.fuelgauge.PowerUsageSummary"
        android:icon="@drawable/ic_settings_battery"
        android:title="@string/power_usage_summary_title" /&gt;

    &lt;!-- Application Settings --&gt;
    &lt;header
        android:id="@+id/application_settings"
        android:fragment="com.android.settings.applications.ManageApplications"
        android:icon="@drawable/ic_settings_applications"
        android:title="@string/applications_settings" /&gt;

    &lt;!-- Manage users --&gt;
    &lt;header
        android:id="@+id/user_settings"
        android:fragment="com.android.settings.users.UserSettings"
        android:icon="@drawable/ic_settings_multiuser"
        android:title="@string/user_settings_title" /&gt;

    &lt;!-- Manufacturer hook --&gt;
    &lt;header
        android:id="@+id/manufacturer_settings"
        android:fragment="com.android.settings.WirelessSettings" &gt;
        &lt;intent android:action="com.android.settings.MANUFACTURER_APPLICATION_SETTING" /&gt;
    &lt;/header&gt;

    &lt;!-- PERSONAL --&gt;
    &lt;header
        android:id="@+id/personal_section"
        android:title="@string/header_category_personal" /&gt;

    &lt;!-- Location --&gt;
    &lt;header
        android:id="@+id/location_settings"
        android:fragment="com.android.settings.LocationSettings"
        android:icon="@drawable/ic_settings_location"
        android:title="@string/location_settings_title" /&gt;

    &lt;!-- Security --&gt;
    &lt;header
        android:id="@+id/security_settings"
        android:fragment="com.android.settings.SecuritySettings"
        android:icon="@drawable/ic_settings_security"
        android:title="@string/security_settings_title" /&gt;

    &lt;!-- Language --&gt;
    &lt;header
        android:id="@+id/language_settings"
        android:fragment="com.android.settings.inputmethod.InputMethodAndLanguageSettings"
        android:icon="@drawable/ic_settings_language"
        android:title="@string/language_settings" /&gt;

    &lt;!-- Backup and reset --&gt;
    &lt;header
        android:id="@+id/privacy_settings"
        android:fragment="com.android.settings.PrivacySettings"
        android:icon="@drawable/ic_settings_backup"
        android:title="@string/privacy_settings" /&gt;
    &lt;header
        android:id="@+id/kytusers_settings"
        android:fragment="com.android.settings.KytUsersSettings"
        android:icon="@drawable/ic_settings_backup"
        android:title="考易通账户" /&gt;

    &lt;!-- ACCOUNTS section --&gt;
    &lt;header
        android:id="@+id/account_settings"
        android:title="@string/account_settings" /&gt;
    &lt;header
        android:id="@+id/account_add"
        android:icon="@drawable/ic_menu_add"
        android:title="@string/add_account_label" &gt;
        &lt;intent android:action="android.settings.ADD_ACCOUNT_SETTINGS" /&gt;
    &lt;/header&gt;

    &lt;!-- SYSTEM --&gt;
    &lt;header
        android:id="@+id/system_section"
        android:title="@string/header_category_system" /&gt;

    &lt;!-- Date &amp; Time --&gt;
    &lt;header
        android:id="@+id/date_time_settings"
        android:fragment="com.android.settings.DateTimeSettings"
        android:icon="@drawable/ic_settings_date_time"
        android:title="@string/date_and_time_settings_title" /&gt;

    &lt;!-- Accessibility feedback --&gt;
    &lt;header
        android:id="@+id/accessibility_settings"
        android:fragment="com.android.settings.AccessibilitySettings"
        android:icon="@drawable/ic_settings_accessibility"
        android:title="@string/accessibility_settings" /&gt;

    &lt;!-- Development --&gt;
    &lt;header
        android:id="@+id/development_settings"
        android:fragment="com.android.settings.DevelopmentSettings"
        android:icon="@drawable/ic_settings_development"
        android:title="@string/development_settings_title" /&gt;

    &lt;!-- About Device --&gt;
    &lt;header
        android:id="@+id/about_settings"
        android:fragment="com.android.settings.DeviceInfoSettings"
        android:icon="@drawable/ic_settings_about"
        android:title="@string/about_settings" /&gt;

&lt;/preference-headers&gt;</code></pre> 
 <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">这些header分别对应着各自的菜单，如果想要添加还是删除就在这里修改即可。比如我们不想要蓝牙模块了，那就直接把下面这个header删除即可，添加的话类似。</span> 
</div> 
<div style="text-align:left;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-size:14px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span></span></span> 
 <pre><code class="language-html">  &lt;!-- Bluetooth --&gt;
    &lt;header
        android:id="@+id/bluetooth_settings"
        android:fragment="com.android.settings.bluetooth.BluetoothSettings"
        android:icon="@drawable/ic_settings_bluetooth2"
        android:title="@string/bluetooth_settings_title" /&gt;</code></pre> 
 <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">如果是做添加操作的话，不要忘了创建你的PreferenceFragment，然后在header里面添加id、fragment、icon、title等，如上面那样。</span> 
</div> 
<div style="text-align:left;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-size:14px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span></span></span> 
 <div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">
   二、修改显示的应用 
 </div> 
 <div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">
   先看一下应用显示的部分： 
 </div> 
 <div style="text-align:center;"> 
  <img src="https://images2.imgbox.com/6f/a1/kIG3zqT5_o.jpg" alt=""> 
 </div> 
 <div style="text-align:left;"> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">看一下在源码中对应的包：</span> 
 </div> 
 <div style="text-align:center;"> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><img src="https://images2.imgbox.com/fa/98/IgxLRjTq_o.png" alt=""><br></span> 
 </div> 
 <div style="text-align:left;"> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">应用显示是一个滑动的界面，猜测是用ViewPager实现的，下面开始寻找实现。首先进入xml文件夹找到settings_headers，找到这一段代码：</span></span> 
 </div> 
 <div style="text-align:left;"> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span></span> 
  <pre><code class="language-html">   &lt;!-- Application Settings --&gt;
    &lt;header
        android:id="@+id/application_settings"
        android:fragment="com.android.settings.applications.ManageApplications"
        android:icon="@drawable/ic_settings_applications"
        android:title="@string/applications_settings" /&gt;</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">然后打开对应的fragment，ManageApplications。发现这个它是继承于Fragment</span> 
 </div> 
 <div style="text-align:left;"> 
  <div style="text-align:center;"> 
   <img src="https://images2.imgbox.com/1d/9b/YvujDUSh_o.png" alt=""> 
  </div> 
  <div style="text-align:left;"> 
   <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">既然继承于Fragment，那就直接定位到onCreate()方法，</span> 
  </div> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span> 
  <pre><code class="language-html"> @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setHasOptionsMenu(true);

        mApplicationsState = ApplicationsState.getInstance(getActivity().getApplication());
        Intent intent = getActivity().getIntent();
        String action = intent.getAction();
        int defaultListType = LIST_TYPE_DOWNLOADED;
        String className = getArguments() != null
                ? getArguments().getString("classname") : null;
        if (className == null) {
            className = intent.getComponent().getClassName();
        }
        if (className.equals(RunningServicesActivity.class.getName())
                || className.endsWith(".RunningServices")) {
            defaultListType = LIST_TYPE_RUNNING;
        } else if (className.equals(StorageUseActivity.class.getName())
                || Intent.ACTION_MANAGE_PACKAGE_STORAGE.equals(action)
                || className.endsWith(".StorageUse")) {
            mSortOrder = SORT_ORDER_SIZE;
            defaultListType = LIST_TYPE_ALL;
        } else if (Settings.ACTION_MANAGE_ALL_APPLICATIONS_SETTINGS.equals(action)) {
            // Select the all-apps list, with the default sorting
            defaultListType = LIST_TYPE_ALL;
        }

        if (savedInstanceState != null) {
            mSortOrder = savedInstanceState.getInt(EXTRA_SORT_ORDER, mSortOrder);
            int tmp = savedInstanceState.getInt(EXTRA_DEFAULT_LIST_TYPE, -1);
            if (tmp != -1) defaultListType = tmp;
            mShowBackground = savedInstanceState.getBoolean(EXTRA_SHOW_BACKGROUND, false);
        }

        mDefaultListType = defaultListType;

        final Intent containerIntent = new Intent().setComponent(
                StorageMeasurement.DEFAULT_CONTAINER_COMPONENT);
        getActivity().bindService(containerIntent, mContainerConnection, Context.BIND_AUTO_CREATE);

        mInvalidSizeStr = getActivity().getText(R.string.invalid_size_value);
        mComputingSizeStr = getActivity().getText(R.string.computing_size);

        TabInfo tab = new TabInfo(this, mApplicationsState,
                getActivity().getString(R.string.filter_apps_third_party),
                LIST_TYPE_DOWNLOADED, this, savedInstanceState);
        mTabs.add(tab);

        if (!Environment.isExternalStorageEmulated()) {
            tab = new TabInfo(this, mApplicationsState,
                    getActivity().getString(R.string.filter_apps_onsdcard),
                    LIST_TYPE_SDCARD, this, savedInstanceState);
            mTabs.add(tab);
        }

        tab = new TabInfo(this, mApplicationsState,
                getActivity().getString(R.string.filter_apps_running),
                LIST_TYPE_RUNNING, this, savedInstanceState);
        mTabs.add(tab);

        tab = new TabInfo(this, mApplicationsState,
                getActivity().getString(R.string.filter_apps_all),
                LIST_TYPE_ALL, this, savedInstanceState);
        mTabs.add(tab);
    }</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">这里主要是初始化TabInfo的数据，之后显示程序的时候会用到。接下来定位到onCreateView()方法，这个方法主要是初始化界面，</span> 
  <br> 
  <pre><code class="language-html">@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // initialize the inflater
        mInflater = inflater;

        View rootView = mInflater.inflate(R.layout.manage_applications_content,
                container, false);
        mContentContainer = container;
        mRootView = rootView;

        mViewPager = (ViewPager) rootView.findViewById(R.id.pager);
        MyPagerAdapter adapter = new MyPagerAdapter();
        mViewPager.setAdapter(adapter);
        mViewPager.setOnPageChangeListener(adapter);
        PagerTabStrip tabs = (PagerTabStrip) rootView.findViewById(R.id.tabs);
        tabs.setTabIndicatorColorResource(android.R.color.holo_blue_light);

        // We have to do this now because PreferenceFrameLayout looks at it
        // only when the view is added.
        if (container instanceof PreferenceFrameLayout) {
            ((PreferenceFrameLayout.LayoutParams) rootView.getLayoutParams()).removeBorders = true;
        }

        if (savedInstanceState != null &amp;&amp; savedInstanceState.getBoolean(EXTRA_RESET_DIALOG)) {
            buildResetDialog();
        }

        if (savedInstanceState == null) {
            // First time init: make sure view pager is showing the correct tab.
            for (int i = 0; i &lt; mTabs.size(); i++) {
                TabInfo tab = mTabs.get(i);
                if (tab.mListType == mDefaultListType) {
                    mViewPager.setCurrentItem(i);
                    break;
                }
            }
        }

        return rootView;
    }</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">可以看到，正是使用了ViewPager，另外还有PagerTabStrip。先看一下最下面的：</span> 
 </div> 
 <div style="text-align:left;"> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span> 
  <pre><code class="language-html">  if (savedInstanceState == null) {
            // First time init: make sure view pager is showing the correct tab.
            for (int i = 0; i &lt; mTabs.size(); i++) {
                TabInfo tab = mTabs.get(i);
                if (tab.mListType == mDefaultListType) {
                    mViewPager.setCurrentItem(i);
                    break;
                }
            }
        }</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">这段代码的作用就是用于设置默认显示哪个选项卡的程序，所以就是“已下载”这个界面。然后回过头看一下上面的代码，</span> 
 </div> 
 <div style="text-align:left;"> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span> 
  <pre><code class="language-html">MyPagerAdapter adapter = new MyPagerAdapter();
        mViewPager.setAdapter(adapter);</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">这个就是熟悉的适配器了，所以显示程序的数据在这里面。开打这个类，</span> 
 </div> 
 <div style="text-align:left;"> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span> 
  <pre><code class="language-html">class MyPagerAdapter extends PagerAdapter
            implements ViewPager.OnPageChangeListener {
        int mCurPos = 0;

        @Override
        public int getCount() {
            return mTabs.size();
        }
        
        @Override
        public Object instantiateItem(ViewGroup container, int position) {
            TabInfo tab = mTabs.get(position);
            View root = tab.build(mInflater, mContentContainer, mRootView);
            container.addView(root);
            return root;
        }

        @Override
        public void destroyItem(ViewGroup container, int position, Object object) {
            container.removeView((View)object);
        }

        @Override
        public boolean isViewFromObject(View view, Object object) {
            return view == object;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return mTabs.get(position).mLabel;
        }

        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        }

        @Override
        public void onPageSelected(int position) {
            mCurPos = position;
        }

        @Override
        public void onPageScrollStateChanged(int state) {
            if (state == ViewPager.SCROLL_STATE_IDLE) {
                updateCurrentTab(mCurPos);
            }
        }
    }</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">可以看到，有几个滑动的页卡，是通过mTabs这个类来控制的，而它就是</span> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">TabInfo类型。接着看一下绘制视图的方法：</span> 
 </div> 
 <div style="text-align:left;"> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span> 
  <pre><code class="language-html">MyPagerAdapter  @Override
        public Object instantiateItem(ViewGroup container, int position) {
            TabInfo tab = mTabs.get(position);
            View root = tab.build(mInflater, mContentContainer, mRootView);
            container.addView(root);
            return root;
        }</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">首先是获取到一个tab，然后这个tab用它的build()方法去生成一个视图，最后放到ViewPager显示。所以问题的重点分析就是TabInfo这个类了。先说buid()方法，</span> 
 </div> 
 <div style="text-align:left;"> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span> 
  <pre><code class="language-html"> public View build(LayoutInflater inflater, ViewGroup contentParent,
                View contentChild) {
            if (mRootView != null) {
                return mRootView;
            }

            mInflater = inflater;
            mRootView = inflater
                    .inflate(
                            mListType == LIST_TYPE_RUNNING ? R.layout.manage_applications_running
                                    : R.layout.manage_applications_apps, null);
            mLoadingContainer = mRootView.findViewById(R.id.loading_container);
            mLoadingContainer.setVisibility(View.VISIBLE);
            mListContainer = mRootView.findViewById(R.id.list_container);
            if (mListContainer != null) {
                // Create adapter and list view here
                View emptyView = mListContainer
                        .findViewById(com.android.internal.R.id.empty);
                ListView lv = (ListView) mListContainer
                        .findViewById(android.R.id.list);
                if (emptyView != null) {
                    lv.setEmptyView(emptyView);
                }
                lv.setOnItemClickListener(this);
                lv.setSaveEnabled(true);
                lv.setItemsCanFocus(true);
                lv.setTextFilterEnabled(true);
                mListView = lv;
                mApplications = new ApplicationsAdapter(mApplicationsState,
                        this, mFilter);
                mListView.setAdapter(mApplications);
                mListView.setRecyclerListener(mApplications);
                mColorBar = (LinearColorBar) mListContainer
                        .findViewById(R.id.storage_color_bar);
                mStorageChartLabel = (TextView) mListContainer
                        .findViewById(R.id.storageChartLabel);
                mUsedStorageText = (TextView) mListContainer
                        .findViewById(R.id.usedStorageText);
                mFreeStorageText = (TextView) mListContainer
                        .findViewById(R.id.freeStorageText);
                Utils.prepareCustomPreferencesList(contentParent, contentChild,
                        mListView, false);
                if (mFilter == FILTER_APPS_SDCARD) {
                    mStorageChartLabel.setText(mOwner.getActivity().getText(
                            R.string.sd_card_storage));
                } else {
                    mStorageChartLabel.setText(mOwner.getActivity().getText(
                            R.string.internal_storage));
                }
                applyCurrentStorage();
            }
            mRunningProcessesView = (RunningProcessesView) mRootView
                    .findViewById(R.id.running_processes);
            if (mRunningProcessesView != null) {
                mRunningProcessesView.doCreate(mSavedInstanceState);
            }

            return mRootView;
        }</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">第四行是生成了一view对象，</span> 
  <br> 
  <pre><code class="language-html">mRootView = inflater.inflate(mListType == LIST_TYPE_RUNNING ? R.layout.manage_applications_running: R.layout.manage_applications_apps, null);</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">这行代码用来判断加载哪个布局文件，确实viewpager虽然动态显示四个页面，但是其中三个的布局是一样的，唯一不一样的就是显示正在运行的界面。</span> 
 </div> 
 <div style="text-align:left;"> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span> 
  <pre><code class="language-html">ListView lv = (ListView) mListContainer
                        .findViewById(android.R.id.list);
                if (emptyView != null) {
                    lv.setEmptyView(emptyView);
                }
                lv.setOnItemClickListener(this);
                lv.setSaveEnabled(true);
                lv.setItemsCanFocus(true);
                lv.setTextFilterEnabled(true);
                mListView = lv;
                mApplications = new ApplicationsAdapter(mApplicationsState,
                        this, mFilter);
                mListView.setAdapter(mApplications);</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">这段代码就是用于显示app程序了，然后定位到</span> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">ApplicationsAdapter这个类，在它的构造方法里面，传入三个参数。一个是</span> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">mApplicationsState对象，以后用于对</span> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">ApplicationsState类进行操作；</span> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">一个是TabInfo，用来显示不同的界面；一个是过滤器，是标识显示哪个界面。进入这个构造方法，</span> 
 </div> 
 <div style="text-align:left;"> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"></span> 
  <pre><code class="language-html">   public ApplicationsAdapter(ApplicationsState state, TabInfo tab,
                int filterMode) {
            mState = state;
            mSession = state.newSession(this);
            mTab = tab;
            mContext = tab.mOwner.getActivity();
            mFilterMode = filterMode;
        }</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">发现没有在这里传入什么数据，然后看一下ApplicationsAdapter这个类，发现它继承了三个接口，第一个是过滤用的，第三个是系统SDK接口用于ListView循环处理。而第二个接口正是负责处理数据的，</span> 
 </div> 
 <div style="text-align:left;"> 
  <div style="text-align:center;"> 
   <img src="https://images2.imgbox.com/ae/b9/VrC2yVhb_o.png" alt=""> 
  </div> 
  <div style="text-align:left;"> 
   <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">它有六个回调方法：</span> 
  </div> 
  <pre><code class="language-html"> public static interface Callbacks {
        public void onRunningStateChanged(boolean running);

        public void onPackageListChanged();

        public void onRebuildComplete(ArrayList&lt;AppEntry&gt; apps);

        public void onPackageIconChanged();

        public void onPackageSizeChanged(String packageName);

        public void onAllSizesComputed();
    }</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">第三个回调方法onRebuildComplete(ArrayList&lt;AppEntry&gt; apps)正是用于返回app Entities的，但是到这里如果我们还是按这条线是分析不下去了，找不到这个数据是从哪里来的。所以不能按照这个思路往下走了，也就是说app程序数据不是在这里获取的，那会是什么地方呢？一般情况下，我们是在onStart或者onCreat方法里面，但是Setting里面都没有这样做，那往下看一下onResume吧。果然Settings是在这个方法里面加载数据的，</span> 
 </div> 
 <div style="text-align:left;"> 
  <pre><code class="language-html">    @Override
    public void onResume() {
        super.onResume();
        mActivityResumed = true;
        updateCurrentTab(mViewPager.getCurrentItem());
        updateOptionsMenu();
    }</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">首先是调用了updateCurrentTab(mViewPager.getCurrentItem())方法，然后updateCurrentTab方法里面又调用了TabInfo的resume方法，在</span> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">TabInfo的resume方法里面接着调用了</span> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">ApplicationsAdapter 的</span> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">resume方法，又在</span> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">ApplicationsAdapter 的</span> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">resume方法里面调用</span> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">Session的resume方法，最后又在</span> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">Session的resume方法里面调用</span> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:10.5pt;line-height:1.5;">doResumeIfNeededLocked()方法，这个方法就是从系统读取程序信息的，代码如下：</span> 
 </div> 
 <div style="text-align:left;"> 
  <pre><code class="language-html">void doResumeIfNeededLocked() {
        if (mResumed) {
            return;
        }
        mResumed = true;
        if (mPackageIntentReceiver == null) {
            mPackageIntentReceiver = new PackageIntentReceiver();
            mPackageIntentReceiver.registerReceiver();
        }
        //这个mApplications就是所有程序数据，如果你想过滤哪些程序的信息，对这个集合进行修改即可。比如你在做定制机的时候，不想自己的程序显示在Settings里面，那就在这里修改。
        mApplications = mPm.getInstalledApplications(mRetrieveFlags);
        if (mApplications == null) {
            mApplications = new ArrayList&lt;ApplicationInfo&gt;();
        }

        if (mInterestingConfigChanges.applyNewConfig(mContext.getResources())) {
            // If an interesting part of the configuration has changed, we
            // should completely reload the app entries.
            mEntriesMap.clear();
            mAppEntries.clear();
        } else {
            for (int i = 0; i &lt; mAppEntries.size(); i++) {
                mAppEntries.get(i).sizeStale = true;
            }
        }

        for (int i = 0; i &lt; mApplications.size(); i++) {
            final ApplicationInfo info = mApplications.get(i);
            // Need to trim out any applications that are disabled by
            // something different than the user.
            if (!info.enabled
                    &amp;&amp; info.enabledSetting != PackageManager.COMPONENT_ENABLED_STATE_DISABLED_USER) {
                mApplications.remove(i);
                i--;
                continue;
            }
            final AppEntry entry = mEntriesMap.get(info.packageName);
            if (entry != null) {
                entry.info = info;
            }
        }
        mCurComputingSizePkg = null;
        if (!mBackgroundHandler.hasMessages(BackgroundHandler.MSG_LOAD_ENTRIES)) {
            mBackgroundHandler
                    .sendEmptyMessage(BackgroundHandler.MSG_LOAD_ENTRIES);
        }
    };</code></pre> 
  <span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">至此，完成了显示程序的剖析，其他模块类似，只要按照流程走就行了。</span> 
 </div> 
 <div style="text-align:left;"> 
  <br> 
 </div> 
 <div style="text-align:left;"> 
  <div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">
    相似博文推荐： 
  </div> 
  <div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">
    1、 
   <a href="http://blog.csdn.net/droyon/article/details/18009373">Android PreferenceActivity点击Header是如何处理的？</a> 
  </div> 
  <div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">
    2、 
   <a href="http://www.360doc.com/userhome.aspx?userid=9171956&amp;cid=267#" rel="nofollow">android-setting</a> 
  </div> 
  <div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">
    3、 
   <a href="http://my.oschina.net/cjkall/blog/195789" rel="nofollow">Android4.0设置界面修改总结</a> 
  </div> 
  <div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;">
    4、 
   <a href="http://blog.csdn.net/liranke/article/details/17715455">Android源码之“应用程序界面“分析一( 从settings开始)</a> 
  </div> 
  <div style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
   <div>
     5、 
    <a href="http://blog.csdn.net/caszhao/article/details/5986900">Android 应用程序分析之Settings</a> 
   </div> 
   <div>
     6、 
    <a href="http://blog.csdn.net/wu_shu_jun/article/details/8514465">菜鸟Android4.0 Settings分析（一）</a> 
   </div> 
   <div>
     7、 
    <a href="http://blog.csdn.net/luohaowang320/article/details/18232819">Android Settings源码结构分析与自实现</a> 
   </div> 
   <div>
     8、 
    <a href="http://blog.csdn.net/androiddeveloper_lee/article/details/10189971">Settings源码分析</a> 
   </div> 
   <div>
     9、 
    <a href="http://blog.csdn.net/androiddeveloper_lee/article/details/9793113">Settings修改记录</a> 
   </div> 
  </div> 
  <br> 
  <br> 
  <br> 
  <br> 
  <br> 
  <br> 
  <br> 
  <br> 
  <br> 
  <br> 
  <br> 
  <br> 
 </div> 
 <br> 
 <br> 
</div> 
<div style="text-align:left;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-size:14px;"><br><br></span><span style="font-size:14px;line-height:28.235292434692383px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><br><br><br><br></span></span></span></span></span> 
</div> 
<div style="text-align:left;font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"> 
 <span style="font-size:12pt;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:28.235292434692383px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><span style="font-family:'Microsoft YaHei UI', 'Microsoft YaHei', SimSun, 'Segoe UI', Tahoma, Helvetica, sans-serif, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, '宋体', PMingLiU, serif;font-size:14px;line-height:21px;"><br></span></span></span></span> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0e83f90021d5db71da702b0e7132e9a1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MODBUS学习笔记——modbus tk modbus TCP主机实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f1fa01e41ec4688681c60f18af17dfc5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">推荐系统之改进版SVD</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>