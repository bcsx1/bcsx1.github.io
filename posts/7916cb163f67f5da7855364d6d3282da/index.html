<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Windows 批处理 DOS命令小记 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Windows 批处理 DOS命令小记" />
<meta property="og:description" content="DOS命令 基础 echo
echo &#34;hello world&#34; 实例:
@echo off echo hello world pause @echo off关闭盘符echo 打印输出语句pause 不立刻关闭终端 算术运算* / % &#43; -
set /a 1&#43;2 实例:
@echo off set /a var = 1 &#43; 2 echo %var% pause set /a算术运算
echo %var%输出var变量的值
重定向&gt; &gt;&gt; &lt; &lt;&lt;
我只知道&gt; &gt;&gt;是写入文件
实例:
@echo off echo hh &gt; a.txt pause echo hh &gt; a.txt把字符串hh写入a.txt文件(覆盖) &gt;&gt;表示追加
多命令运算&amp;&amp; ||
&amp;&amp;命令与运算 符号左边执行成功才会执行符号右边的
||命令或运算 符号左边执行成功不会执行符号右边的 左边未执行成功再执行符号右边的
管道符号|" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/7916cb163f67f5da7855364d6d3282da/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-15T11:02:11+08:00" />
<meta property="article:modified_time" content="2023-01-15T11:02:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Windows 批处理 DOS命令小记</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="DOS__0"></a>DOS命令 基础</h2> 
<ul><li> <p><code>echo</code></p> <pre><code class="prism language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"hello world"</span>
</code></pre> <p>实例:</p> <pre><code class="prism language-bash">@echo off
<span class="token builtin class-name">echo</span> hello world
pause
</code></pre> 
  <ul><li><code>@echo off</code>关闭盘符</li><li>echo 打印输出语句</li><li>pause 不立刻关闭终端</li></ul> </li><li> <p>算术运算<code>* / % + -</code></p> <pre><code class="prism language-bash"><span class="token builtin class-name">set</span> /a <span class="token number">1</span>+2
</code></pre> <p>实例:</p> <pre><code class="prism language-bash">@echo off
<span class="token builtin class-name">set</span> /a var <span class="token operator">=</span> <span class="token number">1</span> + <span class="token number">2</span>
<span class="token builtin class-name">echo</span> %var%
pause
</code></pre> <p><code>set /a</code>算术运算</p> <p><code>echo %var%</code>输出var变量的值</p> </li><li> <p>重定向<code>&gt; &gt;&gt; &lt; &lt;&lt;</code></p> <p>我只知道<code>&gt;</code> <code>&gt;&gt;</code>是写入文件</p> <p>实例:</p> <pre><code class="prism language-bash">@echo off
<span class="token builtin class-name">echo</span> hh <span class="token operator">&gt;</span> a.txt
pause
</code></pre> <p><code>echo hh &gt; a.txt</code>把字符串<code>hh</code>写入a.txt文件(覆盖) <code>&gt;&gt;</code>表示追加</p> </li><li> <p>多命令运算<code>&amp;&amp; ||</code></p> <p><code>&amp;&amp;</code>命令与运算 符号左边执行成功才会执行符号右边的</p> <p><code>||</code>命令或运算 符号左边执行成功不会执行符号右边的 左边未执行成功再执行符号右边的</p> </li><li> <p>管道符号<code>|</code></p> <p><code>a命令</code> | <code>b命令</code></p> <p>a命令的输出作为b命令的输入</p> <p>实例:</p> <pre><code class="prism language-bash"><span class="token function">dir</span> <span class="token operator">|</span> <span class="token function">find</span> <span class="token string">".txt"</span>
</code></pre> </li><li> <p>基本命令格式<code>/?</code> <code>/help</code></p> <pre><code class="prism language-bash">net user /help
net user /?
</code></pre> </li><li> <p>参数传递<code>%</code></p> <p>举例:</p> <pre><code class="prism language-bash">@echo off
<span class="token builtin class-name">echo</span> %1
<span class="token builtin class-name">echo</span> %2
pause
</code></pre> <p>在cmd终端输入:<code>1.bat hello world</code></p> <p>会输出</p> <p>hello</p> <p>world</p> </li><li> <p>注释<code>rem</code></p> <p>举例:</p> <pre><code class="prism language-bash">@echo off
rem hello world <span class="token builtin class-name">test</span>
<span class="token builtin class-name">echo</span> hello world
pause
</code></pre> </li><li> <p>设置cmd窗口颜色<code>color</code> 设置标题<code>title</code></p> <p>举例:</p> <pre><code class="prism language-bash">color /?
color 0A
</code></pre> <p>效果维持在关闭命令窗口期间</p> <pre><code class="prism language-bash">title /?
title <span class="token string">"hello world"</span>
</code></pre> </li><li> <p>时间<code>date</code>&amp;&amp;<code>time</code></p> <p>举例:</p> <pre><code class="prism language-bash"><span class="token function">date</span> /?
<span class="token function">date</span> /T
</code></pre> <p><code>date /T</code>输出当前时间<code>周日 2022/12/25</code></p> <pre><code class="prism language-bash"><span class="token function">time</span> /?
<span class="token function">time</span> /T
</code></pre> </li><li> <p><code>if-else</code></p> <p>实例:</p> <pre><code class="prism language-bash">@echo off
rem 演示if-else结构 判断字符串是否为规定的字符串

<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>hello
<span class="token keyword">if</span> %str%<span class="token operator">==</span>hello <span class="token punctuation">(</span>echo ok<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">(</span>echo no<span class="token punctuation">)</span>

pause<span class="token operator">&gt;</span>nul
</code></pre> <p><code>pause&gt;nul</code>不显示<code>按任意键进行....</code></p> </li><li> <p><code>exists</code>判断文件存在</p> <p>实例:</p> <pre><code class="prism language-bash">@echo off

<span class="token keyword">if</span> exist D:<span class="token punctuation">\</span>code<span class="token punctuation">\</span>dos<span class="token punctuation">\</span><span class="token number">1</span>.bat <span class="token punctuation">(</span>echo ok<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">(</span>echo no<span class="token punctuation">)</span>

pause<span class="token operator">&gt;</span>nul
</code></pre> <p><code>if-else</code>要放在一行</p> </li><li> <p><code>del</code>删除文件</p> <p>实例:</p> <pre><code class="prism language-bash">@echo off

<span class="token keyword">if</span> exist D:<span class="token punctuation">\</span>code<span class="token punctuation">\</span>dos<span class="token punctuation">\</span>a.txt <span class="token punctuation">(</span>
	<span class="token builtin class-name">echo</span> <span class="token function">file</span> is find<span class="token operator">!</span>
	del D:<span class="token punctuation">\</span>code<span class="token punctuation">\</span>dos<span class="token punctuation">\</span>a.txt
<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">(</span>
	<span class="token builtin class-name">echo</span> <span class="token function">file</span> not find<span class="token operator">!</span>
<span class="token punctuation">)</span>

pause<span class="token operator">&gt;</span>nul
</code></pre> </li><li> <p><code>for</code>循环</p> 
  <ul><li> <p>遍历文件夹<code>/d</code></p> <p><code>for /d %%变量 in (路径/*) do</code></p> <p>实例:</p> <pre><code class="prism language-bash">@echo off

<span class="token keyword">for</span> /d %%a <span class="token keyword">in</span> <span class="token punctuation">(</span>*<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token keyword">if</span> %%a<span class="token operator">==</span>test1 rd %%a

<span class="token keyword">for</span> /d %%a <span class="token keyword">in</span> <span class="token punctuation">(</span>*<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> %%a


pause<span class="token operator">&gt;</span>nul
</code></pre> <p><code>/d</code>表示只遍历文件夹,<code>%%a</code> 表示a变量, <code>*</code> 表示当前目录下的所有目录 <code>rd</code>就是<code>rmdir</code>删除文件夹</p> </li><li> <p>遍历目录与目录下的文件</p> <p><code>for /r "路径" %%变量 in (匹配规则) do 操作</code></p> <p>实例:</p> <pre><code class="prism language-bash">@echo off

<span class="token keyword">for</span> /r <span class="token string">"D:<span class="token entity" title="\c">\c</span>ode\dos"</span> %%v <span class="token keyword">in</span> <span class="token punctuation">(</span>*.py<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> %%v

<span class="token builtin class-name">echo</span> 删除 所有 *.py文件

<span class="token keyword">for</span> /r <span class="token string">"D:<span class="token entity" title="\c">\c</span>ode\dos"</span> %%v <span class="token keyword">in</span> <span class="token punctuation">(</span>*.py<span class="token punctuation">)</span> <span class="token keyword">do</span> del %%v


pause<span class="token operator">&gt;</span>nul
</code></pre> </li><li> <p>遍历数字</p> <p><code>for /L %%变量 in (开始,步长,结束) do 操作</code></p> <p>实例:</p> <pre><code class="prism language-bash">@echo off

<span class="token keyword">for</span> /L %%v <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token number">1,1</span>,20<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token function">ping</span> %1.%%v

pause<span class="token operator">&gt;</span>nul
</code></pre> <p><code>/L</code> 表示遍历数字 <code>%1</code>表示输入的第一个参数</p> <p>在控制台终端输入<code>1.bat 192.168.0</code>可以实现自动化测试网络连接</p> </li><li> <p>遍历文件内容</p> <p><code>for /F %%变量 in (文件名) do 操作</code></p> <pre><code class="prism language-bash">@echo off

<span class="token keyword">for</span> /f %%v <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token number">1</span>.bat<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> %%v

pause<span class="token operator">&gt;</span>nul
</code></pre> </li></ul> </li><li> <p><code>start</code> 启动cmd窗口</p> <p><code>start /B 1.bat</code>不在新窗口启动</p> </li><li> <p><code>call</code>调用其他bat文件</p> <pre><code class="prism language-bash">@echo off
<span class="token builtin class-name">echo</span> %1
<span class="token builtin class-name">echo</span> %2
net user %1 %2 /add
call <span class="token number">2</span>.bat
pause
</code></pre> <p><code>call 2.bat</code>调用2.bat文件</p> </li><li> <p>任务列表查看命令<code>tasklist</code></p> <p>该工具显示在本地或远程机器上当前运行的进程列表</p> </li><li> <p>任务关闭命令<code>taskkill</code></p> <p>使用改工具按照进程id(pid)或映像名称终止任务</p> </li><li> <p><code>tree</code></p> <p>以图形显示驱动或路径的文件夹结构</p> <p>举例:</p> <pre><code class="prism language-bash">tree /F /A
</code></pre> <p><code>/F</code> 显示每个文件夹中文件的名称</p> <p><code>/A</code>使用ASSII字符,而不是扩展字符</p> </li><li> <p><code>shutdown</code>关机</p> <p><code>shutdown /i</code>打开GUI可视化界面 执行远程主机的关机操作</p> </li><li> <p><code>at</code></p> <p>定时任务</p> <pre><code class="prism language-bash">at <span class="token number">22</span>:00 C:<span class="token punctuation">\</span>abc.exe
</code></pre> </li><li> <p><code>set</code></p> <p>设置环境变量</p> </li><li> <p><code>dir</code></p> <p>显示目录中的文件和子目录列表</p> <p><code>dir /AH</code>查看隐藏目录</p> </li><li> <p><code>mkdir</code> || <code>md</code> || <code>rmdir</code> || <code>rd</code></p> <p>创建目录与删除目录</p> <p>举例:</p> <p>删除非空目录</p> <pre><code class="prism language-bash">rd /S /Q D:<span class="token punctuation">\</span>code<span class="token punctuation">\</span>dos
</code></pre> <p><code>/S</code>删除非空目录 <code>/Q</code> 静默删除</p> </li><li> <p><code>cd</code></p> <p>切换目录</p> <pre><code>cd /d D:\test
</code></pre> <p><code>\d</code>可跨磁盘切换</p> </li><li> <p><code>ren</code></p> <p>目录重命名</p> <pre><code>ren D:\code\dos\test1 test02
</code></pre> <p>把test1文件夹重命名为test2文件夹</p> </li><li> <p><code>copy</code></p> <p>目录复制</p> <pre><code>copy D:\code\dos\test1 D:\code\dos\test2
</code></pre> </li><li> <p><code>del</code></p> <p>文件删除</p> <pre><code>del D:\code\dos\test1\*.txt
</code></pre> <p>删除该目录所有txt文件</p> </li><li> <p><code>move</code></p> <p>文件剪切</p> <pre><code>move 1.txt 2.txt
</code></pre> <p>重命名1.txt为2.txt</p> </li><li> <p><code>目录重复新建</code></p> <pre><code>@echo off
:loop
md test
cd test
goto loop

pause&gt;nul
exit
</code></pre> </li><li> <p>交互式操作</p> <pre><code class="prism language-bash">@echo off

<span class="token builtin class-name">echo</span> <span class="token number">1</span>.a
<span class="token builtin class-name">echo</span> <span class="token number">2</span>.b
<span class="token builtin class-name">echo</span> <span class="token number">3</span>.c
<span class="token builtin class-name">echo</span> <span class="token number">4</span>.d


:first
<span class="token builtin class-name">echo</span> enter your option:

rem /p opt , /p就是把标准输入当中获取对应的值保存到opt中
<span class="token builtin class-name">set</span> /p <span class="token assign-left variable">opt</span><span class="token operator">=</span>

<span class="token keyword">if</span> %opt%<span class="token operator">==</span><span class="token number">1</span> goto one
<span class="token keyword">if</span> %opt%<span class="token operator">==</span><span class="token number">2</span> goto two
<span class="token keyword">if</span> %opt%<span class="token operator">==</span><span class="token number">3</span> goto three
<span class="token keyword">if</span> %opt%<span class="token operator">==</span><span class="token number">4</span> goto four
<span class="token builtin class-name">echo</span> invalid option

goto first

:one
<span class="token builtin class-name">echo</span> your choice one
pause<span class="token operator">&gt;</span>nul
<span class="token builtin class-name">exit</span>

:two
<span class="token builtin class-name">echo</span> your choice two
pause<span class="token operator">&gt;</span>nul
<span class="token builtin class-name">exit</span>


:three
<span class="token builtin class-name">echo</span> your choice three
pause<span class="token operator">&gt;</span>nul
<span class="token builtin class-name">exit</span>

:four
<span class="token builtin class-name">echo</span> your choice four
pause<span class="token operator">&gt;</span>nul
<span class="token builtin class-name">exit</span>

pause<span class="token operator">&gt;</span>nul
</code></pre> </li><li> <p><code>at</code></p> <p>计划执行</p> <p>被弃用</p> </li><li> <p><code>schtasks</code></p> <p>计划执行``SCHTASKS /Create /TN calc /TR C:\windows\system32\calc.exe /SC DAILY /ST 9:00`</p> <p><code>SCHTASKS /Create /TN test /TR D:\code\dos\first.bat /SC weekly /ST 20:20</code></p> </li></ul> 
<h3><a id="_456"></a>字符串截取</h3> 
<ul><li> <p>获取字符在字符串中首次出现的位置</p> <pre><code class="prism language-bash">@echo off

::启用命令扩展，参加setlocal /?命令
Setlocal ENABLEDELAYEDEXPANSION

::目标字符串
<span class="token builtin class-name">set</span> <span class="token assign-left variable">str1</span><span class="token operator">=</span>This is a <span class="token builtin class-name">test</span> string

::待查找字符<span class="token punctuation">(</span>区分大小写<span class="token punctuation">)</span>
<span class="token builtin class-name">set</span> <span class="token assign-left variable">ch1</span><span class="token operator">=</span>t

::复制字符串
<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>%str1%

::比较首字符是否为要求的字符，如果是则跳出循环
:next
<span class="token keyword">if</span> not <span class="token string">"%str%"</span><span class="token operator">==</span><span class="token string">""</span> <span class="token punctuation">(</span>
<span class="token builtin class-name">set</span> /a <span class="token assign-left variable">num</span><span class="token operator">+=</span><span class="token number">1</span>
<span class="token keyword">if</span> <span class="token string">"!str:~0,1!"</span><span class="token operator">==</span><span class="token string">"%ch1%"</span> goto last
<span class="token builtin class-name">set</span> <span class="token string">"str=%str:~1%"</span>
goto next
<span class="token punctuation">)</span>

::没有找到字符时，将num置零
<span class="token builtin class-name">set</span> /a <span class="token assign-left variable">num</span><span class="token operator">=</span><span class="token number">0</span>

:last
<span class="token builtin class-name">echo</span> 字符<span class="token string">'%ch1%'</span>在字符串<span class="token string">"%str1%"</span>中的首次出现位置为%num%
<span class="token builtin class-name">echo</span> 输出完毕，按任意键退出<span class="token operator">&amp;&amp;</span>pause<span class="token operator">&gt;</span>nul<span class="token operator">&amp;&amp;</span><span class="token builtin class-name">exit</span>
</code></pre> </li><li> <p>创建字符串</p> <pre><code class="prism language-bash">@echo off 
:: This program just displays Hello World 
<span class="token builtin class-name">set</span> <span class="token assign-left variable">message</span><span class="token operator">=</span>Hello World 
<span class="token builtin class-name">echo</span> %message%
</code></pre> </li><li> <p>创建空字符和检查空字符串</p> <pre><code class="prism language-bash">@echo off 
SET <span class="token assign-left variable">a</span><span class="token operator">=</span> 
SET <span class="token assign-left variable">b</span><span class="token operator">=</span>Hello 
<span class="token keyword">if</span> <span class="token punctuation">[</span>%a%<span class="token punctuation">]</span><span class="token operator">==</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token string">"String A is empty"</span> 
<span class="token keyword">if</span> <span class="token punctuation">[</span>%b%<span class="token punctuation">]</span><span class="token operator">==</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token string">"String B is empty "</span>
</code></pre> </li><li> <p>字符串连接</p> <pre><code class="prism language-bash">@echo off 
SET <span class="token assign-left variable">a</span><span class="token operator">=</span>Hello 
SET <span class="token assign-left variable">b</span><span class="token operator">=</span>World 
SET <span class="token assign-left variable">c</span><span class="token operator">=</span>%a% and %b% 
<span class="token builtin class-name">echo</span> %c%
pause
</code></pre> </li><li> <p>字符串字符串转整数</p> <pre><code class="prism language-bash"><span class="token builtin class-name">echo</span> off
<span class="token builtin class-name">set</span> <span class="token assign-left variable">var</span><span class="token operator">=</span><span class="token number">13145</span>
<span class="token builtin class-name">set</span> /A <span class="token assign-left variable">var</span><span class="token operator">=</span>%var% + <span class="token number">5</span>
<span class="token builtin class-name">echo</span> %var%
</code></pre> <p>使用<code>set</code>变量设置为字符串的变量后，可以使用<code>set</code>变量的<code>/A</code>开关转换为整数。以下示例显示了如何完成此操作。 //更多请阅读：https://www.yiibai.com/batch_script/batch_script_toint.html</p> </li><li> <p>左字符串 (字符串截取)</p> <pre><code class="prism language-bash">@echo off 
<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>Helloworld 
<span class="token builtin class-name">echo</span> %str% 

<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>%str:~0,5% 
<span class="token builtin class-name">echo</span> %str%
</code></pre> <p>关于上述程序的键是<code>~0,5</code>用于指定需要显示的字符。 在这示例中，应该显示字符<code>0</code>到<code>5</code>。</p> </li><li> <p>中字符串 (字符串截取)</p> <pre><code class="prism language-bash">@echo off 
<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>Helloworld 
<span class="token builtin class-name">echo</span> %str%

<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>%str:~5,10% 
<span class="token builtin class-name">echo</span> %str%
</code></pre> <p>于上述程序的键是<code>~5,10</code>用于指定需要显示的字符。 在这个示例中，要显示字符<code>5</code>到<code>10</code>。</p> </li><li> <p>删除字符串</p> <pre><code class="prism language-bash">@echo off 
<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>Batch scripts is easy. It is really easy. 
<span class="token builtin class-name">echo</span> %str% 

<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>%str:is<span class="token operator">=</span>% 
<span class="token builtin class-name">echo</span> %str%
</code></pre> <p>关于上述程序是要注意的是，<code>'is'</code>这个词是使用<code>'stringtoberemoved'=</code>命令从字符串中删除。</p> </li><li> <p>删除两端 (字符串截取)</p> <pre><code class="prism language-bash">@echo off 
<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>Batch scripts is easy. It is really easy 
<span class="token builtin class-name">echo</span> %str% 

<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>%str:~1,-1% 
<span class="token builtin class-name">echo</span> %str%
</code></pre> <p>关于上述程序中，<code>~1，-1</code>用于删除字符串的第一个和最后一个字符。</p> </li><li> <p>删除所有空格 (字符串截取)</p> <pre><code class="prism language-bash">@echo off 
<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>This string    has    a  lot  of spaces 
<span class="token builtin class-name">echo</span> %str% 

<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>%str:<span class="token operator">=</span>% 
<span class="token builtin class-name">echo</span> %str%
</code></pre> <p>关于上述程序的关键是，<code>:=</code>操作符用于从字符串中删除所有空格。</p> </li><li> <p>替换字符 (字符串截取)</p> <pre><code class="prism language-bash">@echo off 
<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>This message needs changed. 
<span class="token builtin class-name">echo</span> %str% 

<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>%str:needs<span class="token operator">=</span>has% 
<span class="token builtin class-name">echo</span> %str%
</code></pre> <p>通过语句<code>str=%str:needs=has%</code>将字符串<code>'has'</code>替换为<code>'needs'</code></p> </li><li> <p>右字符串 (字符串截取)</p> <pre><code class="prism language-bash"><span class="token builtin class-name">echo</span> off 
<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>This message needs changed. 
<span class="token builtin class-name">echo</span> %str% 

<span class="token builtin class-name">set</span> <span class="token assign-left variable">str</span><span class="token operator">=</span>%str:~-8% 
<span class="token builtin class-name">echo</span> %str%
</code></pre> <p>字符串的右侧是通过使用<code>~-</code>字符来提取操作符。</p> </li></ul> 
<h3><a id="txt_626"></a>txt文件内容操作</h3> 
<p><code>歌曲列表.txt</code>内容:</p> 
<pre><code>1、饶天亮-玫瑰爱人.wma
2、高一首-我不愿错过.mp3
3、黃凱芹-傷感的戀人.MP3
4、黄灿-黄玫瑰.lrc
5、黎姿-如此这般的爱情故事.mp3
</code></pre> 
<ul><li> <p>显示全部内容</p> <pre><code class="prism language-bash">@echo off
<span class="token keyword">for</span> /f %%i <span class="token keyword">in</span> <span class="token punctuation">(</span>歌曲列表.txt<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> %%i
pause<span class="token operator">&gt;</span>nul
</code></pre> </li><li> <p>默认提取第一列</p> <pre><code class="prism language-bash">@echo off
<span class="token keyword">for</span> /f <span class="token string">"delims=、"</span> %%i <span class="token keyword">in</span> <span class="token punctuation">(</span>歌曲列表.txt<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> %%i
pause<span class="token operator">&gt;</span>nul
</code></pre> <p>"delims=、"表示定义顿号“、”为分隔符，并用该分隔符“、”切分文本字符串。字符串就是“歌曲列表.txt”里的内容，也就是文件里的文字和标点符号。<br> 该顿号是原文中就有的。除了顿号“、”，原文中还有减号“-”和点号“.”，因此你也可以用它们来做分隔符。</p> </li><li> <p>用减号“-”做分隔符</p> <pre><code class="prism language-bash">@echo off
<span class="token keyword">for</span> /f <span class="token string">"delims=-"</span> %%i <span class="token keyword">in</span> <span class="token punctuation">(</span>歌曲列表.txt<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> %%i
pause<span class="token operator">&gt;</span>nul
</code></pre> <p>因为，当减号“-”被用做分隔符时，每行内容被减号“-”分隔成前后两半，默认只显示前半部分，而后半部分连同分隔符减号“-”都被忽略（省略）了。</p> </li><li> <p>用点号“.”做分隔符</p> <pre><code class="prism language-bash">@echo off
<span class="token keyword">for</span> /f <span class="token string">"delims=."</span> %%i <span class="token keyword">in</span> <span class="token punctuation">(</span>歌曲列表.txt<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> %%i
pause<span class="token operator">&gt;</span>nul
</code></pre> <p>默认情况下，单纯使用delims而不用tokens时，只显示第一个分隔符前的内容，第一个分隔符和第一个分隔符后面的内容将被忽略。</p> </li><li> <p>定义多个分隔符</p> <pre><code class="prism language-bash">@echo off
<span class="token keyword">for</span> /f <span class="token string">"delims=、-."</span> %%i <span class="token keyword">in</span> <span class="token punctuation">(</span>歌曲列表.txt<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> %%i
pause<span class="token operator">&gt;</span>nul
</code></pre> <p>原因是，当定义顿号“、”、减号“-”和点号“.”三个标点符号为分隔符后，原文被分隔成四个部分。<br> 如第二行“1、饶天亮-玫瑰爱人.wma”将被分隔成“1”、“饶天亮”、“玫瑰爱人”和“wma”四个部分。<br> 从第一行到最后一行，每行的每个部分对应下来相当于一个竖列。因此，原文就有“序号”、“歌手名”、“歌曲名”、“后缀名”四列。<br> 一般情况下，只读取第一列的内容。后面的内容需要用tokens选项提取。</p> </li><li> <p>提取单列</p> <pre><code class="prism language-bash">@echo off
<span class="token keyword">for</span> /f <span class="token string">"tokens=2 delims=、."</span> %%i <span class="token keyword">in</span> <span class="token punctuation">(</span>歌曲列表.txt<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> %%i
pause<span class="token operator">&gt;</span>nul
</code></pre> <p>用delims定义顿号“、”和点号“.”作为分隔符，将原文分成三部分。<br> 如第六行“5、黎姿-如此这般的爱情故事.mp3”被分割成：<br> 第一部分（第一列）：5<br> 第二部分（第二列）：黎姿-如此这般的爱情故事<br> 第三部分（第三列）：mp3<br> “tokens=2”表示用tokens提取第二列的字符串，即“黎姿-如此这般的爱情故事”。<br> 没有被tokens定义提取的第一列和第三列将被忽略。</p> </li><li> <p>提取多列</p> <pre><code class="prism language-bash">@echo off
<span class="token keyword">for</span> /f <span class="token string">"tokens=1,3delims=、-."</span> %%i <span class="token keyword">in</span> <span class="token punctuation">(</span>歌曲列表.txt<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> %%i %%j
pause<span class="token operator">&gt;</span>nul
</code></pre> <p>“delims=、-.”表示定义顿号、减号和点号为分隔符。<br> “tokens=1,3”表示只提取第一列和第三列。<br> “%%i %%j”对应于“token”后面的列数。有多少列就要有多少个输出变量，并且各变量中的字母存在先后顺序。</p> </li><li> <p>忽略分隔符</p> <pre><code class="prism language-bash">@echo off
<span class="token keyword">for</span> /f <span class="token string">"tokens=1,2-4delims=、-."</span> %%i <span class="token keyword">in</span> <span class="token punctuation">(</span>歌曲列表.txt<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> %%i %%j %%k %%l
pause<span class="token operator">&gt;</span>nul
</code></pre> <p>默认情况下，用做分隔符的标点符号将被忽略。<br> “tokens=1,2-4”中的“2-4”表示第二至第四列。</p> </li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bf91d4a83781ad585faee26299684384/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">三种伺服电机控制方式总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/14e4610e19fc44725adc53ae97c55d06/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【刘二大人】PyTorch深度学习实践</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>