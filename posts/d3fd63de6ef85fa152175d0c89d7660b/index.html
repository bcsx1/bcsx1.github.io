<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>汽车CAN总线硬件电路原理 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="汽车CAN总线硬件电路原理" />
<meta property="og:description" content="根据ISO 11898的定义，物理层被细分成3 个子层，它们分别是物理信令（位编码定时和同步）、物理媒体连接（驱动器和接收器特性）和媒体相关接口（总线连接器）。
物理信令子层和数据链路层之间的连接是通过集成的协议控制器实现的，而媒体相关接口（CAN收发器）是协议控制器和物理传输线路之间的接口。
高速的ISO 11898-2 CAN标准定义了一个单线结构的网络拓扑结构。
CAN总线不支持星形或甚至多星形拓扑结构。节点是通过未端接的落地线连接到主总线上。总线在最远的两端用一个终止电阻（特性线阻抗）终止。
如图所示，总线线在最远的两端用一个终端电阻（特性线阻抗）终止。否则信号反射将在总线上发生，导致严重的振铃和错误率。总线拓扑结构必须选择这样的拓扑结构，使反射最小化。
图 2‑1基本的CAN总线拓扑结构
CAN总线拓补结构 CAN总线应用模块在搭建上一般有两种方案：
(1)微控制器&#43;CAN控制器&#43;CAN收发器。
(2)集成CAN控制器的微控制器&#43;CAN收发器
第一种方案优点是可以与多种类型的单片机、微型计算机的各类标准总线进行接口组合，这种设计比较灵活，成本较低，缺点是电路设计稍微复杂。
第二种方案优点是电路设计简化和紧凑，缺点是成本高。单个CAN节点可以通过总线或星形拓扑结构连接到通信网络上。
图 2‑2 连接模型：带有存根线的总线结构
图 2‑3 连接模型：星点结构
CAN收发器电路 最常见的CAN收发器新芯片厂家有恩智浦（NXP）-荷兰、英飞凌（Infineon）-德国、德州仪器（TI）-美国、微芯（Microchip ）-美国、意法半导体（ST）-意大利、安森美半导体（ON Semi）-美国。
ISO 11898[1]是一个使用 CAN 总线协议的汽车内高速通讯国际标准 这个标准的基本作用是定义了通讯链路的数据链路层和物理层 如图 1.1 所示 物理层被细分成 3 个子层 它们分别是
1.物理信令 位编码 定时和同步
2.物理媒体连接 驱动器和接收器特性
3. 媒体相关接口 总线连接器
物理信令子层和数据链路层通常是由协议控制器来实现 像用 Philips 的 SJA1000[2] 协议控制器和物理传输媒体之间使用物理媒体连接子层接口 产品有像Philips的TJA1050[3]或PCA82C250[4]等收发器，本节着重介绍如何使用收发器 TJA1050 实现物理连接子层。
跟 PCA82C250 一样 TJA1050 符合 ISO 11898 标准 因此 它可以和其他遵从 ISO 11898 标准的收发器产品协同操作。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/d3fd63de6ef85fa152175d0c89d7660b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-18T11:38:44+08:00" />
<meta property="article:modified_time" content="2023-01-18T11:38:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">汽车CAN总线硬件电路原理</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">根据ISO 11898的定义，物理层被细分成3 个子层，它们分别是物理信令（位编码定时和同步）、物理媒体连接（驱动器和接收器特性）和媒体相关接口（总线连接器）。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">物理信令子层和数据链路层之间的连接是通过集成的协议控制器实现的，而媒体相关接口（CAN收发器）是协议控制器和物理传输线路之间的接口。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">高速的ISO 11898-2 CAN标准定义了一个单线结构的网络拓扑结构。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">CAN总线不支持星形或甚至多星形拓扑结构。节点是通过未端接的落地线连接到主总线上。总线在最远的两端用一个终止电阻（特性线阻抗）终止。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">如图所示，总线线在最远的两端用一个终端电阻（特性线阻抗）终止。否则信号反射将在总线上发生，导致严重的振铃和错误率。总线拓扑结构必须选择这样的拓扑结构，使反射最小化。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:34.18919%;height:0;"> 
    <img src="https://images2.imgbox.com/92/58/tM3MH4Vf_o.png" style="margin-left:;display:block;width:740px;margin-top:-34.18919%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图 2‑1基本的CAN总线拓扑结构</span></p> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">CAN总线拓补结构</span></h2> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">CAN总线应用模块在搭建上一般有两种方案：</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">(1)微控制器+CAN控制器+CAN收发器。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">(2)集成CAN控制器的微控制器+CAN收发器</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">第一种方案优点是可以与多种类型的单片机、微型计算机的各类标准总线进行接口组合，这种设计比较灵活，成本较低，缺点是电路设计稍微复杂。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">第二种方案优点是电路设计简化和紧凑，缺点是成本高。单个CAN节点可以通过总线或星形拓扑结构连接到通信网络上。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:51.89189%;height:0;"> 
    <img src="https://images2.imgbox.com/f9/f3/4R5VLxJD_o.png" style="margin-left:;display:block;width:740px;margin-top:-51.89189%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图 2‑2 连接模型：带有存根线的总线结构</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:68.24324%;height:0;"> 
    <img src="https://images2.imgbox.com/0f/5e/IL4YKJGT_o.png" style="margin-left:;display:block;width:740px;margin-top:-68.24324%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图 2‑3 连接模型：星点结构</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:52.2973%;height:0;"> 
    <img src="https://images2.imgbox.com/78/e8/rvsFBklk_o.jpg" style="margin-left:;display:block;width:740px;margin-top:-52.2973%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">CAN收发器电路</span></h2> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">最常见的CAN收发器新芯片厂家有恩智浦（NXP）-荷兰、英飞凌（Infineon）-德国、德州仪器（TI）-美国、微芯（Microchip ）-美国、意法半导体（ST）-意大利、安森美半导体（ON Semi）-美国。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">ISO 11898[1]是一个使用 CAN 总线协议的汽车内高速通讯国际标准 这个标准的基本作用是定义了通讯链路的数据链路层和物理层 如图 1.1 所示 物理层被细分成 3 个子层 它们分别是</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">1.物理信令 位编码 定时和同步</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">2.物理媒体连接 驱动器和接收器特性</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">3. 媒体相关接口 总线连接器</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">物理信令子层和数据链路层通常是由协议控制器来实现 像用 Philips 的 SJA1000[2] 协议控制器和物理传输媒体之间使用物理媒体连接子层接口 产品有像Philips的TJA1050[3]或PCA82C250[4]等收发器，本节着重介绍如何使用收发器 TJA1050 实现物理连接子层。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">跟 PCA82C250 一样 TJA1050 符合 ISO 11898 标准 因此 它可以和其他遵从 ISO 11898 标准的收发器产品协同操作。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">电磁兼容性 EMC 是 TJA1050 的主要设计目标 在关键的 AM 波段上 它的辐射比 PCA82C250 低 20dB以上。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">除了 EMC 之外 TJA1050 的另外一个重要的特性 在不上电时 总线呈现无源特性 这使 TJA1050 对于在点火之后就失电的 clamp-15 节点来说是一个更优的收发器 而持续上电的节点 clamp-30 则要求有一个专用的低功耗模式 以使整个系统的功率消耗保持尽可能低 在这种应用中 PCA28C250 由于具有准备模式 所以仍然是一个很好的选择 在 clamp-30 应用中 TJA1050 通过收发器不上电来实现极低的功耗。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">而远程唤醒功能则是使用一根独立的远程唤醒线由于 TJA1050 和 PCA82C250 的引脚互相兼容 那么 TJA1050 可以直接在已有的应用中使用 而不需要修改 PCB 因此 用户可以立即从 TJA1050 突出的特性中获益。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:65.54054%;height:0;"> 
    <img src="https://images2.imgbox.com/52/46/ndjRVGkd_o.png" style="margin-left:;display:block;width:740px;margin-top:-65.54054%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图 2‑4 CAN 的分层结构</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">2 CAN高速收发器的一般应用</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">CAN高速收发器的一般应用显示在图2.1中 其中 协议控制器通过一条串行数据输出线 TxD 和一 条串行数据输入线 RxD 连接到收发器 而收发器则通过它的两个有差动接收和发送能力的总线终端CANH和 CANL 连接到总线线路 它的引脚 S 8 用于模式控制 参考输出电压 Vref提供一个Vcc/2 的额定输出 电压 这个电压是作为带有模拟Rx输入的CAN控制器的参考电平 由于SJA1000具有数字输入 因此它不 需要这个电压 收发器使用5V的额定电源电压。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">协议控制器向收发器的TxD 引脚输出一个串行的数据流 收发器的内部上拉功能将TxD 引脚置为逻辑 高电平 即总线输出驱动器在开路时是无源的 在隐性状态中 见图 2.3 CANH 和 CANL 输入通过典型内部阻抗为 25k 的接收器连接入网络 偏置到 Vcc/2 的电平电压 另外 如果 TxD 是逻辑低电平 将激活 总线的输出级 并在总线上产生一个显性信号电平 见图 2.3 输出驱动 CANH 由 Vcc 提供一个源输出 而 CANL 则向 GND 提供一个下拉输出 图 2.2 用 TJA1050 方框图作为一个例子</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:636px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:94.33963%;height:0;"> 
    <img src="https://images2.imgbox.com/2c/73/MOnZPzMx_o.png" style="margin-left:;display:block;width:636px;margin-top:-94.33963%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图 2‑5CAN高速收发器的典型应用</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">如果没有总线节点发送一个显性位，则总线处于隐性状态。 如果一个或多个总线节点发送一个显性位总线就会覆盖隐性状态而进入显性状态， 线与特性接收器比较器将差动的总线信号转换成逻辑电平信号 ，并在 RxD 输出总线协议控制器将接收到的串行数据流译码接收器比较器总是激活的，即当总线节点发送一个报文时它同时监控总线。这个功能可以用于支持CAN的非破坏性逐位仲裁策略。典型的总线采用一对双绞线 ，考虑到 ISO 11898 中定义的线性拓扑结构 ，总线两端都端接一个 120的额定电阻 ，这就要求总线额定负载是60 终端电阻和电缆阻抗的紧密匹配，确保了数据信号不会在总线的两端反射。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:76.081085%;height:0;"> 
    <img src="https://images2.imgbox.com/4c/6f/WlbPWH6k_o.png" style="margin-left:;display:block;width:740px;margin-top:-76.081085%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图 2‑6 TJA1050 的方框图</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:67.432434%;height:0;"> 
    <img src="https://images2.imgbox.com/ea/28/kPyvFsS7_o.png" style="margin-left:;display:block;width:740px;margin-top:-67.432434%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图 2‑7根据 ISO 11898 的额定总线电平</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:13pt;">3 TJA1050</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">3.1 特征</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">特征</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l 与“ISO 11898”标准完全兼容</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l 速度高（最高可达 1M 波特）</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l 低电磁辐射（EME）</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l 具带有宽输入范围的差动接收器，可抗电磁干扰（EMI）</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l 没有上电的节点不会对总线造成干扰</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l 发送数据（TXD）控制超时功能</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l 发送禁能时的静音模式</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l 在暂态时自动对总线引脚进行保护</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l 输入级与 3.3V 装置兼容</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l 热保护</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l 对电源和地的防短路功能</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l 可以连接至少 110 个节点</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">总体描述</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">TJA1050 是控制器区域网络（CAN）协议控制器和物理总线之间的接口。TJA1050 可以为总线提供不</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">同的发送性能，为 CAN 控制器提供不同的接收性能。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">TJA1050 是 PCA82C250 高速 CAN 收发器的后继产品。TJA1050 在以下方面作了重要的改进：</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l CANH 和 CANL 理想配合，使电磁辐射减到更低。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">l 在有不上电节点时，性能有所改进。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:32.972973%;height:0;"> 
    <img src="https://images2.imgbox.com/34/1c/VEXXfOND_o.png" style="margin-left:;display:block;width:740px;margin-top:-32.972973%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:80.0%;height:0;"> 
    <img src="https://images2.imgbox.com/b2/3d/68n5BgPZ_o.png" style="margin-left:;display:block;width:740px;margin-top:-80.0%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:74.054054%;height:0;"> 
    <img src="https://images2.imgbox.com/4e/d2/feuhxJBw_o.png" style="margin-left:;display:block;width:740px;margin-top:-74.054054%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">3.2 工作模式</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">TJA1050 有两种工作模式 都由引脚 S 来控制</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"> 高速模式</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"> 静音模式</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">它不支持 PCA82C250 有的可变斜率控制 所以 TJA1050 有固定的斜率 尽管如此 其输出级优良的</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">对称性使它的EMC性能比前面的产品更好</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">3.2.1 高速模式</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">高速模式是普通的工作模式 将引脚 S 连接到地可以进入该模式 由于引脚 S 有内部下拉功能</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">见图2.2 所以当它没有连接时 高速模式也是默认的工作模式</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">在这个模式中 总线输出信号有固定的斜率 并且以尽量快的速度切换 这种模式适合用于最大的位</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">速率和 或最大的总线长度 而且此时它的收发器循环延迟最小</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">3.2.2 静音模式</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">在静音模式中 发送器是禁能的 所以它不管TxD的输入信号 因此 收发器运行在非发送状态中 它此时消耗的电源电流和在隐性状态时的一样 将引脚 S 接高电平 就可以进入静音模式</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">“Babbling Idiot” 保护</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">静音模式中，节点可以被设置成对总线绝对无源的状态。当CAN控制器不受控制，占用总线无意识地 发送报文（“babbling idiot”）时，这个模式就显得非常重要。微控制器激活了静音模式后，此时微控制器 不再直接访问CAN控制器，TJA1050将会释放总线。因此，在今天的电子应用要求系统有高可靠性的情 况下，静音模式变得非常有用。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">只听模式</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">在静音模式中，RxD如常监控总线。因此，静音模式就提供了具有诊断功能的只听模式。它确保节点 的显性位完全不会影响总线。</span></p> 
 <p style="">TxD<span class="kdocs-bold" style="font-weight:bold;">显性超时</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">除了静音模式外，TJA1050还提供TxD显性超时功能。这个保护功能可以防止出错的CAN控制器通 过发送持续的显性TxD信号将总线箝位在显性电平。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:45.540543%;height:0;"> 
    <img src="https://images2.imgbox.com/ce/8a/X4pqoOiZ_o.jpg" style="margin-left:;display:block;width:740px;margin-top:-45.540543%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图3.1 TxD显性超时功能</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图3.1显示了 TxD显性超时功能。超过允许最大的TxD显性时间后，发送器将被禁能。下一个显性输 出只有在释放了 TxD后才可以产生。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">根据CAN协议[1], TxD只允许最多11个连续的显性位（最坏的情况是一个错误帧紧接在5个连续的 显性位后）。TxD呈显性所允许的最小的间会将最小位速率限制在60kbit/s。</span></p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">与</span>3.3V<span class="kdocs-bold" style="font-weight:bold;">器件兼容</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">在汽车应用中，越来越多地使用电源电压低于5V的器件。通过减少TxD和引脚“S”的输入阀值， TJA1050可以和3.3V的器件（像CAN控制器，“C）通信。因此，它对5V供电的微控制器和CAN控制 器以及3.3V供电的派生器件都适用。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">但是，由于TxD内部有一个上拉电阻连接到Vcc （5V）而且RxD有一个基于Vcc的推挽级，所以3.3V 的器件必须能承受5V的RxD和TxD。</span></p> 
 <p style="">. EMC方面</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">实现高的EMC性能不只是收发器的问题，系统实现的细节（终端、拓扑、外部电路）也非常重要。 本章将展示使用TJA1050时突出的EMC性能。</span></p> 
 <p style="">split termination <span class="kdocs-bold" style="font-weight:bold;">的概念</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">实验指出，改良的总线终端概念 分裂终端（split termination）,可以有效减少辐射。另外，这个概</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">念使系统有更好的抗干扰性。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">分裂终端的概念如图4.1所示。总线端节点的两个终端电阻都被分成两个等值的电阻，即用两个60a 的电阻代替一个120。的电阻。通过stubs连接到总线上的Stub节点也可以选用相似的分裂终端配置。Stub 节点的电阻选择必须使包括所有终端电阻的总线负载在50◎〜65Q[1]的规定范围中。有10个节点时（8个 stub节点和2个总线终端节点），典型的电阻值是1.3kQ。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:60.945946%;height:0;"> 
    <img src="https://images2.imgbox.com/47/8d/op1LshIo_o.jpg" style="margin-left:;display:block;width:740px;margin-top:-60.945946%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:center;"><span class="kdocs-fontSize" style="font-size:13pt;">图 4.1 典型的 split termination 概念</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">这个方案的特点是：普通模式信号可以在终端的中间分接点处得到。这个普通模式信号通过一个电容 Cg （10nF〜100nF）连接到地。但很明显，电容要连接到“静态”的地电平。例如，如果终端放置在总线 节点之内，建议将分离地连接到具有最低电感的模块连接器的地引脚。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">TJA1050的电平有高度的对称性，总线的两条线与参考地的对称方式变得越来越重要。因此，为了要 使用TJA1050优秀的抗辐射性能，则要考虑每个ECU分裂终端电阻的匹配容差。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">值得注意的是，由于使用了分裂终端，TJA1050的EMC性能得到优化而且不会产生扼流。因此，我 们极力推荐使用分裂终端。其输出级有优良的对称性,用不同的辐射测量方法都检测不到扼流。但如果EMC 性能仍不足够，也可以选择使用额外的方法，像电容和普通模式扼流器。</span></p> 
 <p style="">CANH<span class="kdocs-bold" style="font-weight:bold;">和</span>CANL<span class="kdocs-bold" style="font-weight:bold;">上的电容</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">CANH和CANL输出到GND的（一对）匹配电容（Ch和Cl）经常被用于提高抗电磁干扰的性能。 相应噪声源的阻抗（Rf）和CANH和CANL对地的电容组成了一个RC低通滤波器。在抗干扰的性能的问 题上，电容的值应该尽可能大，才能获得低的角频率。另一方面，输出级的整个电容负载和阻抗为数据信 号建立了一个低通滤波器。因此，相关的角频率要比数据传输频率高。这使电容值必须由节点的数量和数 据传输频率决定。当TJA1050的输出级阻抗大约是20Q,总线系统有10个节点，速度是500kbit/s,则 电容的值不应该超过470pF。这里要注意：电容由于减少上升和下降次数，信号的循环延迟将增加。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:59.18919%;height:0;"> 
    <img src="https://images2.imgbox.com/13/f2/mXYp8DTp_o.jpg" style="margin-left:;display:block;width:740px;margin-top:-59.18919%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:center;"><span class="kdocs-fontSize" style="font-size:13pt;">图4.2外部电容构成了 RC低通滤波器</span></p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">普通模式扼流器</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">普通模式扼流器对普通模式信号有高阻抗，对差动信号有低阻抗。因此，由Rf噪声和/或收发器驱动 器的不理想对称产生的普通模式信号都被显著地衰减。所以，普通模式扼流器可以减少辐射以提高抗干扰 性。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图4.3显示了如何将普通模式扼流器、分裂终端和CANH、CANL对GND的电容结合起来。如果首先 要提高抗干扰性，建议将电容放置在收发器和普通模式扼流器之间。如果，另一方面，要减少辐射，则建 议将电容放置在扼流器和分裂终端之间（虚线）。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">普通模式扼流器也有一个缺点。扼流器的电感和引脚的电容将引起谐振。这无论是对差动信号还是普 通模式信号，都将在总线引脚和扼流器之间引起不必要的振荡。差动信号的振荡可能引起RxD的多次切换。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">前面的收发器产品在使用非屏蔽双绞线时，通常需要一个普通模式扼流器来满足汽车厂商严格的辐射 和抗干扰要求。TJA1050可以建立没有扼流器的汽车内系统。最后，是否需要扼流器是由特定的系统设备, 像：线束和两条总线的对称性（电阻和电容的匹配容差）决定。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:46.756756%;height:0;"> 
    <img src="https://images2.imgbox.com/4a/f2/jfluug65_o.jpg" style="margin-left:;display:block;width:740px;margin-top:-46.756756%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:13pt;">图4.3结合了分裂终端、扼流器和电容的总线节点电路</span></p> 
 <p style="">.电源和推荐的旁路电容</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">通常，旁路电容用于对所要求的电源电压供应进行缓冲。一个大小适中的旁路电容也可以避免过高的 电流峰值流入地，为收发器建立一个“静态的”信号地。</span></p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">平均和峰值电源电流</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">为了选择合适的电容，要考虑CAN高速收发器电源Vcc的两个参数：</span></p> 
 <p style="">.平均电源电流</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">平均电源电流用于计算Vcc电压调节器的温度负载。它是在假设节点持续地以50%的占空比发送报文 的情况下估算出来的。</span></p> 
 <p style="">.峰值电源电流</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">峰值电源电流在某些时间发生了某些总线故障的情况下出现，因此它对电源的缓冲保护有一定影响。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">我们推荐参考表5.1所示的收发器Vcc电源特性。这些值在计算要求的电压调节器和旁路电容时要考 虑。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">表5.1 在普通和最差的情况下平均和峰值电源电流</span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" rowspan="2" style="width:147px;vertical-align:top;height:52px;"><p style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">条件</span></p></td><td class="kdocs-tableCell" colspan="2" style="width:207px;vertical-align:top;height:52px;"><p style="text-align:center;">TJA1050</p></td><td class="kdocs-tableCell" colspan="2" style="width:207px;vertical-align:top;height:52px;"><p style="text-align:center;">PCA82C250</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:147px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">平均</span>Ivcc</p><p style="text-align:center;">（50%<span class="kdocs-bold" style="font-weight:bold;">占空比）</span></p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">峰值</span>Ivcc</p><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">（显性，</span>Vtxd=0V）</p></td><td class="kdocs-tableCell" style="width:147px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">平均</span>Ivcc</p><p style="text-align:center;">（50%<span class="kdocs-bold" style="font-weight:bold;">占空比）</span></p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">峰值</span>Ivcc</p><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">（显性，</span>Vtxd=0V）</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:147px;vertical-align:top;height:52px;"><p style="text-align:center;">普通，60 a负载</p></td><td class="kdocs-tableCell" style="width:147px;vertical-align:top;height:52px;"><p style="text-align:center;">43mA</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">75mA</p></td><td class="kdocs-tableCell" style="width:147px;vertical-align:top;height:52px;"><p style="text-align:center;">44mA</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">70mA</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:147px;vertical-align:top;height:52px;"><p style="text-align:center;">最差的情况（CANH 对GND短路）</p></td><td class="kdocs-tableCell" style="width:147px;vertical-align:top;height:52px;"><p style="text-align:center;">60mA</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">137mA</p></td><td class="kdocs-tableCell" style="width:147px;vertical-align:top;height:52px;"><p style="text-align:center;">80mA</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">165mA</p></td></tr></tbody></table> 
 </div> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">旁路电容</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:481px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:11.850311%;height:0;"> 
    <img src="https://images2.imgbox.com/56/09/oOfd0Ysd_o.png" style="margin-left:;display:block;width:481px;margin-top:-11.850311%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">当一个位从隐性切换到显性时，需要额外的电源电流来驱动总线。这个电流可以用下面的式子算出：</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">其中，ICC_dom是指显性状态下的电源电流，ICC_rec是隐性状态下的电源电流。由于限制了电压调节器 的调节速度，就要求一个旁路电容来保持电源电压Vcc是常数。否则，Vcc将可能偏离定义的电压范围（5V ±5%）,或者至少由于电压调节器的调节功能产生一些振荡。我们根本不需要这些振荡，因为它们会增加 电磁辐射。因此，在普通操作中，至少需要用100nF的电容进行保护。因此，在引脚“Vcc”（3）和引脚 “GND"（2）之间连接一个旁路电容变得非常有必要。考虑到电压调节器的性能，还可以选择使用更大的 电容。</span></p> 
 <p style="">.地电平偏移的问题</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">汽车中的总线系统要处理不同节点之间地电平偏移的问题。这意味着，每个节点根据自己的地电平都 可以“看见”不同单端总线的电压，但差动的总线电压未受影响。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">根据TJA1050[3]的数据表,CANH允许的最大单端电压是+12V,而CANL允许的最大单端电压是-12V。 这个范围内的单端总线电压保证了差动接收器的阀值电压位于0.5V〜0.9V之间。这个允许的单端电压范围 就是差动收发器的普通模式范围。ISO 11898定义的普通模式范围是-2V〜+7V。所以，TJA1050根据ISO 11898提供了一个扩展的普通模式范围。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">轻微地超出定义的普通模式范围不会立即引起通讯故障，但显著的超出就要避免。因此，地电平偏移 的容差要受到限制。普通模式范围和允许最大地电平偏移之间的关系在图6.1和6.2中显示。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图6.1是发送节点2的地电平比接收节点1的地电平高的情况。在这种情况下，根据接收节点的地电 平，允许的最大地电平偏移符合CANH最大是12V的单端电压。从图6.1可以看到，允许的最大地电平偏 移是 8V （GNDTrans - GNDRec）。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:67.02702%;height:0;"> 
    <img src="https://images2.imgbox.com/26/e9/32PeYkhd_o.jpg" style="margin-left:;display:block;width:740px;margin-top:-67.02702%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:13pt;">图6.1 发送节点2的地电平比接收节点1高的情况</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:62.702705%;height:0;"> 
    <img src="https://images2.imgbox.com/ca/2e/Rkjb6EXz_o.jpg" style="margin-left:;display:block;width:740px;margin-top:-62.702705%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图6.2显示的是发送节点1的地电平比接收节点2低的情况。在这种情况下，根据接收节点的地电平, 允许的最大的地电平偏移要符合CANL最小的单端电压-12V。从图6.1可以看到，允许的最大地电平偏移 是-13V (GNDTrans- GNDRec)。由于每个节点在系统中都可以暂时作为发送器，TJA1050任何两个节点间 允许的最大地电平偏移限制为8V。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">在隐性总线状态中，每个节点都根据它们的偏置和地电平拉总线，此时就产生了一个平均的隐性总线 电压。在图6.1的例子中，接收节点地电平的隐性电平是6.5V左右，而发送节点地电平的隐性电平则是 -1.5V。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图6.1和图6.2这两个例子，显示了总线系统中的地电平偏移，它明显扰乱了 CANH和CANL隐性电 平电压的对称性。这就意味着将产生不希望的普通模式信号，使系统的电磁辐射增强。由于辐射对地电平 偏移非常敏感，相应的系统器件要注意防止地电平偏移源。</span></p> 
 <p style="">.不上电的收发器</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">今天的汽车应用可被划分成系统（只有在点火的时候活动）和应用（点火之后仍然要工作，譬如停车）。 这将区分由clamp-15 （点火）或clamp-30 （电池）供电的局部网络。当汽车点火后，clamp-15的节点是 不上电的，而clamp-30的节点是持续供电的。典型的电源配置请看图7.1。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:37.972973%;height:0;"> 
    <img src="https://images2.imgbox.com/97/70/fQIHh15Q_o.jpg" style="margin-left:;display:block;width:740px;margin-top:-37.972973%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图7.1 典型的电源配置</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">上面提到的局部网络的概念要求：不上电的clamp-15收发器必须不能降低系统的性能。从总线流入不 上电收发器的反向电流要尽量低。TJA1050优化成有最低的反向电流，因此被预定用于clamp-15节点。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">在不上电的时候，收发器要处理下面的问题：</span></p> 
 <p style="">普通模式信号的非对称偏置RXD显性箝位与Vcc逆向的电源</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">上面的问题将在接下来的章节中讨论。</span></p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">普通模式电压的非对称偏置</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">原理上，图7.2中的电路根据显性状态的总线电平，给普通模式电压提供对称的偏置。因此，在隐性 状态中，总线电压偏置到对称的Vcc/2。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">在不上电的情况下，内部偏置电路是总线向收发器产生显著反向电流的原因。结果，隐性状态下的DC 电压电平和普通模式电压都下降到低于Vcc/2的对称电压。由于TJA1050的设计在不上电的情况下，不会 向总线拉电流。因此，和PCA82C250相比，TJA1050的反向电流减少了大约10%。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">有很大反向电流的早期收发器的情况如图7.3所示。它显示了在报文开始的时候，CANH和CANL的 单端总线电压。同时也显示了相应的普通模式电压。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:703px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:49.78663%;height:0;"> 
    <img src="https://images2.imgbox.com/eb/4b/mHgYbU1h_o.jpg" style="margin-left:;display:block;width:703px;margin-top:-49.78663%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:center;"><span class="kdocs-fontSize" style="font-size:13pt;">图7.2 接收器输入的简化偏置电路</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">在长时间的隐性总线状态（总线空闲）后，普通模式电压显著地低于Vcc/2的额定值。在CAN报文的 第一个显性位中（帧起始位），普通模式电压恢复。由于相关的普通模式阻抗很大，因此在CAN帧的隐性 总线状态中，普通模式电压没有显著的下降。这就意味着，明显的普通模式信号只在CAN报文开始的时候 出现，而且和CAN报文有同样的频率。这些普通模式信号会增加电磁辐射。显性电平一次谐波的频率和发 送CAN报文的频率一样。由于不上电的收发器TJA1050有非常低的反向电流，所以它不会降低系统的辐 射性能。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:77.16216%;height:0;"> 
    <img src="https://images2.imgbox.com/56/e6/pFGVITHm_o.jpg" style="margin-left:;display:block;width:740px;margin-top:-77.16216%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">当系统中有越来越多的不上电节点时（总体的反向电流很大），普通模式电压的不对称偏置变得非常明 显。在大量的不上电节点的时候，要获得优化的EMC性能，我们建议用一个外部的偏置电路将普通模式电压稳定在Vcc/2。图7.4显示了外部偏置电路，它由电阻R1和R2,以及分裂终端组成。R1和R2的电 阻值（分别是RT/2）应非常接近。R1和R2阻值的合理范围是1kQ〜2kQ。上面的外部偏置概念只适合 clamp-30节点，因为它们是一直上电的。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:64.5946%;height:0;"> 
    <img src="https://images2.imgbox.com/ea/96/jeSmxknW_o.jpg" style="margin-left:;display:block;width:740px;margin-top:-64.5946%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图7.4 外部偏置电路</span></p> 
 <p style="">RxD<span class="kdocs-bold" style="font-weight:bold;">显性箝位</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">关于不上电收发器的另外一个重要问题在图7.5中显示。在一些应用中，为了获得较低的功耗，收发</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:13pt;">器是不上电的，而仍然上电的微控制器/ CAN控制器则进入准备模式</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:51.75676%;height:0;"> 
    <img src="https://images2.imgbox.com/a4/42/etqYooBY_o.jpg" style="margin-left:;display:block;width:740px;margin-top:-51.75676%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">图7.5不上电收发器的RxD显性箝位</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">收发器在不上电的时候通常将RxD的电平拉到GND,这样RxD就被箝位到显性电平。这在CAN控 制器看来是一个持续的唤醒信号。所以，当收发器不上电的时候，不能使CAN控制器进入准备模式。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">TJA1050在不上电的情况下，可以将RxD引脚悬空，这样就克服了 RxD显性箝位的问题。现在，<span class="kdocs-italic" style="font-style:italic;">CAN </span>控制器中一个集成的RxD上拉电阻足以将RxD拉到隐性电平。但如果有需要，也可以再加一个外部上拉 电阻。</span></p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">与</span>Vcc<span class="kdocs-bold" style="font-weight:bold;">反向的电源</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">流入不上电收发器的反向电流通常会产生和Vcc反向的电源，我们不希望出现这种情况，因为可能产 生一些意外的情况。在收发器不上电，而微控制器/ CAN控制器仍然上电的情况下，主要有4个反向电流 的通路。</span></p> 
 <p style="">反向电流从高电平的RxD流向Vcc</p> 
 <p style="">反向电流从高电平的TxD流向Vcc</p> 
 <p style="">反向电流从高电平的引脚“S”流向Vcc</p> 
 <p style="">反向电流从总线线路流向Vcc和GND</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">上面的头三条路径已经完全被TJA1050消除了。总线线路上的反向电流显著下降。结果，TJA1050中 Vcc可能的反向电源电压显著的比PCA82C250低。因此，在同样Vcc供电的情况下，剩下的反向电源电 压将不足以产生一些对器件不确定的行为。</span></p> 
 <p style="">.用 TJA1050 代替 PCA82C250</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">由于PCA82C250和TJA1050总体的引脚和功能都兼容，所以用TJA1050替代现有应用中的 PCA82C250变得非常简单。但在替代的过程中要注意两个不同的问题：互操作性和兼容性。互操作性是 指PCA82C250和TJA1050在同一个总线系统中一起工作的能力，而兼容性则包括：引脚、工作模式、电 源电压范围、与总线接口以及CAN控制器、外部电路等等问题。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">由于PCA82C250和TJA1050都符合ISO 11898标准，这就保证了这两个收发器可以互操作，因此 可以在同一个总线网络中一起工作。在下面的章节中，我们将讨论兼容性的问题。</span></p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">引脚</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">PCA82C250和TJA1050的引脚相同。因此，在大多数情况下，TJA1050也可以使用为PCA82C250 开发的PCB。</span></p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">工作模式</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">这些收发器都使用引脚8作为模式选择。但TJA1050不支持PCA82C250的斜率控制模式。所以，不 再需要原来在PCA82C250引脚8上，用于调节斜率的电阻。在PCA82C250引脚8上加高电平，将激活 减少电流消耗的准备模式[4].TJA1050的静音模式和PCA82C250的准备模式相似，它也可以禁能发送器, 但不减少电流的消耗。将TJA1050的引脚8置高电平就可以进入静音模式。如果在这两个收发器的引脚8 加低电平，它们都进入高速模式。</span></p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">斜率控制电阻</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">斜率控制电阻是否要被移去，由应用决定。这里有两种不同的情况：</span></p> 
 <p style="">.如果斜率控制电阻直接连接到GND,电阻可以不被移去。</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">2.如果斜率控制电阻连接到微控制器的一个输出端口，让以前的应用（使用PCA82C250）可以在 斜率控制模式和准备模式之间转换，这个电阻在使用TJA1050的应用中要被移去，否则不能在高 速模式和静音模式之间切换。</span></p> 
 <p style="">.4 <span class="kdocs-bold" style="font-weight:bold;">接口</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">TJA1050和控制器的接口可以像平常一样，串行数字信号流输入TxD,从RxD输出信号流。但这里要注意，为了保证3.3V电源供电的控制器可以驱动TJA1050的输入，TxD和引脚“S”的输入阀值都有 一定的下降。TJA1050同时也支持5V电源供电的传统微控制器。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">下面的表8.1总结了用TJA1050替代PCA82C250要注意的兼容性问题。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">表8.1 TJA1050和PCA82C250之间的比较</span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">特性</span></p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">TJA1050</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">PCA82C250</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:left;">互操作性/ ISO 11898</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">V</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">V</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:left;">引脚兼容性</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">V</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">V</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:left;">工作模式：</p><p style="text-align:left;">引脚8高电平</p><p style="text-align:left;">引脚8低电平</p><p style="text-align:left;">引脚8上的电阻连接到GND</p><p style="text-align:left;">悬空引脚8</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">静音模式 高速模式 高速模式 高速模式</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">准备模式</p><p style="text-align:center;">高速模式 斜率控制模式</p><p style="text-align:center;">高速模式</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:left;">电源电压容差</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">±5%</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">±10%</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:left;">不上电时无源</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">是</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">否</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:left;">TxD显性保护</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">是</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">否</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:left;">最小的位速率</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">60kbit/s</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">0kbit/s</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:left;">3.3VI/O兼容性</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">是</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">否</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">9.总线网络的问题</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">本章将讲述像最大节点数量、最大总线线路长度和拓扑结构方面的问题。特别是拓扑结构，它对系统 的性能有显著的影响。</span></p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">最大节点数量</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">可以连接到总线上的节点数量，是由收发器可以驱动的最小负载阻抗决定的。在Vcc&gt;4.75V时， TJA1050收发器的输出驱动能力可达最小RL.min=45Q的负载。整个总线的负载是由终端电阻Rt、总线线 路阻抗Rw和收发器的差动输入阻抗Rdif定义。图9.1就是一个总线系统的直流电路模型。在最差的情况 下，总线线路阻抗Rw可以认为是0。这就得出了下面用来计算最大节点数量的关系式：</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:41.08108%;height:0;"> 
    <img src="https://images2.imgbox.com/bd/8e/yyjQy1ZX_o.jpg" style="margin-left:;display:block;width:740px;margin-top:-41.08108%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:13pt;">与 nmax &lt; Rdiff.min x</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:13pt;">IRL.min RT.min J</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">RT,min x Rdiff.min 、D</span></p> 
 <p style="text-align:right;"><span class="kdocs-fontSize" style="font-size:13pt;">&gt; RL.min nmax x RT.min + 2Rdiff.min</span></p> 
 <p style="text-align:center;"><span class="kdocs-fontSize" style="font-size:13pt;">图9.1根据ISO 11898的总线系统DC电路模型图9.1是有两个差动端接电阻的最大节点数量。注意：连接大量的节点要求相关的端电阻也很大</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">表9.1 最大节点数量</span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">收发器</span></p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">Rdiff.min (kQ)</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">Vcc.min</p><p style="text-align:center;">(V)</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">RL.min</p><p style="text-align:center;">(Q)</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">节点的数量 </span>(RT.min=118Q )</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">节点的数量 </span>(RT.min=130 Q )</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" rowspan="2" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">TJA1050</p></td><td class="kdocs-tableCell" rowspan="2" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">25</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">4.75</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">45</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">131</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">170</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">4.9</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">39</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">217</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">256</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">PCA82C250</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">20</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">4.9</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">45</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">105</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">136</p></td></tr></tbody></table> 
 </div> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">最大总线线路长度</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">CAN网络中可使用的最大总线线路长度基本上是由下面几个物理条件决定：</span></p> 
 <p style="">.连接的总线节点的循环延迟(CAN控制器、收发器等等)以及总线线路的延迟</p> 
 <p style="">.节点之间的相关振荡器容差</p> 
 <p style="">.由于总线电缆的串联电阻造成的信号幅值下降以及总线节点的输入阻抗(详细的描述请参考［6］)</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">条件1和2在CAN位定时方面决定了最大总线线路长度的值。另一方面，条件3在总线线路输出信 号降的方面决定了最大总线线路长度的值。两个值之中的最小值作为实际的允许最大总线线路长度。由于 信号降只在很长的线路长度中变得很明显，所以在数据传送速率非常高的情况下，条件3可以忽略。</span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" rowspan="2" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">参数</span></p></td><td class="kdocs-tableCell" rowspan="2" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">符号</span></p></td><td class="kdocs-tableCell" rowspan="2" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">单位</span></p></td><td class="kdocs-tableCell" colspan="3" style="width:202px;vertical-align:top;height:52px;"><p style="text-align:center;">ISO11 898</p></td><td class="kdocs-tableCell" colspan="3" style="width:202px;vertical-align:top;height:52px;"><p style="text-align:center;">SAE J2284</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">最小值</span></p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">额定值</span></p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">最大值</span></p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">最小值</span></p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">额定值</span></p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">最大值</span></p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:left;">阻抗</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">Z</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">Q</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">108</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">120</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">132</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">108</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">120</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">132</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:left;">长度相关的 电阻</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">R</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">m Q/m</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">70</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">70</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:left;">特定的线路 延迟</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">tdelay</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">ns/m</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">5</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">5.5</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:left;">Twist rate</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">rtwist</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">twist/m</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:52px;"><p style="text-align:center;">33</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">50</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">表9.2 一些标准和TJA1050的最大总线线路长度</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">表9.2给出了在位速率是500kbit/s和250kbit/s下的的最大总线线路长度，以及在一些CAN标准中定 义的最大线路长度的值。这个计算用了条件1和2,并假设振荡器容差低于0.15%。要注意，设定值只能 用在端接非常好的线形拓扑结构中。由于不适当端接造成的信号质量差将降低允许的最大总线长度。</span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" rowspan="2" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">规范</span></p></td><td class="kdocs-tableCell" colspan="2" style="width:306px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">数据速率</span></p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">500kbit/s</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">250kbit/s</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">SAE J2284</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">30m</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">DeviceNet</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">100m</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">250m</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">TJA1050</p></td><td class="kdocs-tableCell" style="width:246px;vertical-align:top;height:52px;"><p style="text-align:center;">107m</p></td><td class="kdocs-tableCell" style="width:60px;vertical-align:top;height:52px;"><p style="text-align:center;">270m</p></td></tr></tbody></table> 
 </div> 
 <p style="">.3 <span class="kdocs-bold" style="font-weight:bold;">拓扑结构方面</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">拓扑结构描述了线束的结构。典型的结构有总线形、星形和多星形。在汽车系统中，经常使用屏蔽或 非屏蔽的双绞线作为传输线路。传输线路由下面的参数来描述：长度相关的电阻RLength、特定的线路延迟 tdelay和特征线路阻抗Z。表9.3列出了由ISO 11898和SAE J2284标准［7］定义的物理媒体参数。注意， SAE J2284还额外定义了双绞线的对绞率(twist rate)<span class="kdocs-bold" style="font-weight:bold;">。</span></span></p> 
 <p style="text-align:center;"><span class="kdocs-fontSize" style="font-size:13pt;">表9.3双绞线(屏蔽或非屏蔽)的物理媒体参数</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">9.3.1 <span class="kdocs-bold" style="font-weight:bold;">由于信号反射造成的振荡</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">传输线路必须端接线路特征阻抗，否则将在总线上产生信号反射，产生明显的振荡。此时要选择将反 射降到最低的拓扑结构。通常，拓扑结构是反射和线路限制条件之间的平衡。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">由于CAN有一些有用的协议工具，所以可以很好地处理反射振荡：</span></p> 
 <p style="">.只有隐性到显性的切换才能用于重新同步</p> 
 <p style="">.重新同步一次只能在两个采样点之间采样到隐性位时才能进行</p> 
 <p style="">.采样点定义在接近位定时的末端</p> 
 <p style="">.3.2 <span class="kdocs-bold" style="font-weight:bold;">线形拓扑</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">通常，CAN高速标准ISO 11898定义了一个单线结构的拓扑。总线线路的两个终端都端接一个终端电 阻。节点都通过没有端接的下接电缆或stub连接到总线。为了使振荡的过程比位定时短，stub的长度应该 尽量短。举个例子，ISO 11898标准限制了 stub的长度是0.3m。相应的SAE J2284标准则建议stub的</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">长度低于1m。为了减少驻波，ECU在网络中放置的空间不应该相等, 表9.4和图9.2显示了 SAE J2284标准的拓扑结构要求。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">而且电缆的尾长也不应该相同［7］。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:47.7027%;height:0;"> 
    <img src="https://images2.imgbox.com/58/df/PI6in1G4_o.jpg" style="margin-left:;display:block;width:740px;margin-top:-47.7027%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:center;"><span class="kdocs-fontSize" style="font-size:13pt;">图9.2 SAE J2284的拓扑结构要求</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">由于有时候需要更长的stub,所以实际上这个拓扑结构可能会有一些改变。允许的最大stub长度基本 上是由位定时参数、干线电缆长度和累计的下接电缆长度决定。单凭经验，允许stub最大长度的计算的可 以参考［6］。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">星形拓扑结构在ISO 11898和SAE J2284中都没有叙述。但是，它有时候也在汽车中使用以克服汽 车中的线路限制。通常，信号在星形拓扑中比线形拓扑中更完整。建议，对于应用中每个特定的拓扑结构, 应在系统建立时通过仿真或测量确定其可行性。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;">表9.4 SAE J2284的ECU拓扑要求</span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">参数</span></p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">助记符</span></p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">单位</span></p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">最小值</span></p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">额定值</span></p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">最大值</span></p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:left;">ECU电缆stub长度</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">L1</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">m</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">0</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">1</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:left;">汽车内DLC电缆stub长度</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">L2</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">m</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">0</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">1</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:left;">板外DLC电缆stub长度</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">L3</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">m</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">0</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">5</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:left;">两个ECU之间的距离</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">d</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">m</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">0.1</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">-</p></td><td class="kdocs-tableCell" style="width:123px;vertical-align:top;height:52px;"><p style="text-align:center;">30</p></td></tr></tbody></table> 
 </div> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">容错CAN</span></h2> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:40.945946%;height:0;"> 
    <img src="https://images2.imgbox.com/16/c2/K2AtLuLI_o.png" style="margin-left:;display:block;width:740px;margin-top:-40.945946%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">LIN</span></h2> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:26.62162%;height:0;"> 
    <img src="https://images2.imgbox.com/18/c7/GY7lQ1wX_o.png" style="margin-left:;display:block;width:740px;margin-top:-26.62162%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">综合网关控制单元</span></h2> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:688px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:87.49999%;height:0;"> 
    <img src="https://images2.imgbox.com/08/62/t8zexsTT_o.png" style="margin-left:;display:block;width:688px;margin-top:-87.49999%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="">↑</p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/037f6d49e4e11d4f8c9752e4cc3081d7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【STM32CubeMX&#43;HAL库】I2C详解&#43;读写EEPROM</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2d693241763649b5feb6ab9661e54adf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">iptables只允许指定网段ip访问</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>