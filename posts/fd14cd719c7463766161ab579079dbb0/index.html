<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>爬取书趣阁小说 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="爬取书趣阁小说" />
<meta property="og:description" content="这次将介绍如何爬取自己喜欢的小说，以及爬取过程中如何处理具有乱码的网页，以及如何去解码及封装代码
目标网址：http://www.shuquge.com/
爬取书趣阁小说 1.分析网页(1) 分析网页(2) 审查网页代码(3) 请求网页内容(4) 对网页内容进行解码 2.换一个小说进行爬取(1)请求内容并解码输出(2)提取小说标题(3)提取小说内容(4)拼接及替换小说内容 3.保存内容(1)with方法保存爬取内容为txt文件(2)绝对路径保存文件到桌面(3)加号方法保存文件到桌面(4)封装方法保存文件(5)使用封装方法爬取并保存第二章(6)添加主函数爬取并保存第三章 4.取所有章节链接(1)分析链接特点(2)开始取所有链接(3)构造完整链接(4)打包所有完整链接并求个数(5)将获取章节链接的代码封装(6)获取所有章节小说内容 1.分析网页 以爬取书趣阁网站上的小说《傲世九重天》为例
(1) 分析网页 打开网站，搜索到该小说如下：
接下来查看小说第一章的链接为： http://www.shuquge.com/txt/55040/8416285.html 小说第二章的链接为：
http://www.shuquge.com/txt/55040/8416286.html 小说第三章的链接为：
http://www.shuquge.com/txt/55040/8416287.html 对比第一、二、三章的网页链接： http://www.shuquge.com/txt/55040/8416285.html http://www.shuquge.com/txt/55040/8416286.html http://www.shuquge.com/txt/55040/8416287.html 可以发现，第一、二、三章的网页链接只有结尾部分的数字不一样：
(2) 审查网页代码 以小说第一章为例：
右击检查网页代码
点击上图中所说的三个点，就会显示出第一章小说的文本内容：
(3) 请求网页内容 导入库，开始请求网页返回内容 import requests #导入库 from lxml import etree #导入库 #复制第一章网页地址 target_url=&#34;http://www.shuquge.com/txt/55040/8416285.html&#34; requests.get(url=target_url) #请求第一章网页内容 运行结果：
请求网页内容成功，要注意此处复制的网页链接为第一章所在网页的顶端链接：
因为该网页上我们没有遇到反爬虫程序，所以才可以在没有设置浏览器代理的情况下顺利返回网页信息，如果遇到反爬虫程序，我们就要设置浏览器代理才可以顺利返回网页信息
给返回内容赋值并以.text的文本格式输出 import requests #导入库 from lxml import etree #导入库 #复制第一章网页地址 target_url=&#34;http://www.shuquge.com/txt/55040/8416285.html&#34; response=requests.get(url=target_url) #请求第一章网页内容,并将返回值赋给response print(response.text) #将response以文本格式输出 运行结果：
可以发现，我们输出的内容中，小说的文本部分显示的是乱码，而1.(2)审查代码中原网页上显示的文本部分就是小说的文本内容，所以我们接下来要做的就是对请求返回的网页内容response还没输出为文本之前进行解码
(4) 对网页内容进行解码 因为要对请求返回的网页内容response还没输出为文本之前进行解码，即先解码，再输出文本才不是乱码" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/fd14cd719c7463766161ab579079dbb0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-19T22:48:17+08:00" />
<meta property="article:modified_time" content="2020-04-19T22:48:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">爬取书趣阁小说</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>这次将介绍如何爬取自己喜欢的小说，以及爬取过程中如何处理具有乱码的网页，以及如何去解码及封装代码</p> 
</blockquote> 
<p>目标网址：<code>http://www.shuquge.com/</code><br> </p> 
<div class="toc"> 
 <h4>爬取书趣阁小说</h4> 
 <ul><li><ul><li><ul><li><ul><li><a href="#1_4" rel="nofollow">1.分析网页</a></li><li><ul><li><a href="#1__6" rel="nofollow">(1) 分析网页</a></li><li><a href="#2__42" rel="nofollow">(2) 审查网页代码</a></li><li><a href="#3__48" rel="nofollow">(3) 请求网页内容</a></li><li><a href="#4__74" rel="nofollow">(4) 对网页内容进行解码</a></li></ul> 
     </li><li><a href="#2_119" rel="nofollow">2.换一个小说进行爬取</a></li><li><ul><li><a href="#1_121" rel="nofollow">(1)请求内容并解码输出</a></li><li><a href="#2_136" rel="nofollow">(2)提取小说标题</a></li><li><a href="#3_162" rel="nofollow">(3)提取小说内容</a></li><li><a href="#4_181" rel="nofollow">(4)拼接及替换小说内容</a></li></ul> 
     </li><li><a href="#3_200" rel="nofollow">3.保存内容</a></li><li><ul><li><a href="#1withtxt_201" rel="nofollow">(1)with方法保存爬取内容为txt文件</a></li><li><a href="#2_216" rel="nofollow">(2)绝对路径保存文件到桌面</a></li><li><a href="#3_235" rel="nofollow">(3)加号方法保存文件到桌面</a></li><li><a href="#4_257" rel="nofollow">(4)封装方法保存文件</a></li><li><a href="#5_331" rel="nofollow">(5)使用封装方法爬取并保存第二章</a></li><li><a href="#6_342" rel="nofollow">(6)添加主函数爬取并保存第三章</a></li></ul> 
     </li><li><a href="#4_383" rel="nofollow">4.取所有章节链接</a></li><li><ul><li><a href="#1_384" rel="nofollow">(1)分析链接特点</a></li><li><a href="#2_399" rel="nofollow">(2)开始取所有链接</a></li><li><a href="#3_431" rel="nofollow">(3)构造完整链接</a></li><li><a href="#4_448" rel="nofollow">(4)打包所有完整链接并求个数</a></li><li><a href="#5_474" rel="nofollow">(5)将获取章节链接的代码封装</a></li><li><a href="#6_532" rel="nofollow">(6)获取所有章节小说内容</a></li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h5><a id="1_4"></a>1.分析网页</h5> 
<p>以爬取书趣阁网站上的小说《傲世九重天》为例</p> 
<h6><a id="1__6"></a>(1) 分析网页</h6> 
<ul><li>打开网站，搜索到该小说如下：<br> <img src="https://images2.imgbox.com/82/12/GsZnKPaW_o.png" alt="在这里插入图片描述">接下来查看小说第一章的链接为：</li></ul> 
<pre><code class="prism language-python">http<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>shuquge<span class="token punctuation">.</span>com<span class="token operator">/</span>txt<span class="token operator">/</span><span class="token number">55040</span><span class="token operator">/</span><span class="token number">8416285.</span>html
</code></pre> 
<p><img src="https://images2.imgbox.com/c0/da/E1zYtHSL_o.png" alt="在这里插入图片描述">小说第二章的链接为：</p> 
<pre><code class="prism language-python">http<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>shuquge<span class="token punctuation">.</span>com<span class="token operator">/</span>txt<span class="token operator">/</span><span class="token number">55040</span><span class="token operator">/</span><span class="token number">8416286.</span>html
</code></pre> 
<p><img src="https://images2.imgbox.com/12/15/i8VxIRod_o.png" alt="在这里插入图片描述">小说第三章的链接为：</p> 
<pre><code class="prism language-python">http<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>shuquge<span class="token punctuation">.</span>com<span class="token operator">/</span>txt<span class="token operator">/</span><span class="token number">55040</span><span class="token operator">/</span><span class="token number">8416287.</span>html
</code></pre> 
<p><img src="https://images2.imgbox.com/41/32/QNrF3WUV_o.png" alt="在这里插入图片描述"></p> 
<ul><li>对比第一、二、三章的网页链接：</li></ul> 
<pre><code class="prism language-python">http<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>shuquge<span class="token punctuation">.</span>com<span class="token operator">/</span>txt<span class="token operator">/</span><span class="token number">55040</span><span class="token operator">/</span><span class="token number">8416285.</span>html
</code></pre> 
<pre><code class="prism language-python">http<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>shuquge<span class="token punctuation">.</span>com<span class="token operator">/</span>txt<span class="token operator">/</span><span class="token number">55040</span><span class="token operator">/</span><span class="token number">8416286.</span>html
</code></pre> 
<pre><code class="prism language-python">http<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>shuquge<span class="token punctuation">.</span>com<span class="token operator">/</span>txt<span class="token operator">/</span><span class="token number">55040</span><span class="token operator">/</span><span class="token number">8416287.</span>html
</code></pre> 
<p>可以发现，第一、二、三章的网页链接只有结尾部分的数字不一样：<br> <img src="https://images2.imgbox.com/db/70/zNAoCOnR_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="2__42"></a>(2) 审查网页代码</h6> 
<p>以小说第一章为例：</p> 
<ul><li>右击检查网页代码<br> <img src="https://images2.imgbox.com/a8/fa/v8xzaO0H_o.png" alt="在这里插入图片描述">点击上图中所说的三个点，就会显示出第一章小说的文本内容：<br> <img src="https://images2.imgbox.com/a0/41/HlY5lSEX_o.png" alt="在这里插入图片描述"></li></ul> 
<h6><a id="3__48"></a>(3) 请求网页内容</h6> 
<ul><li>导入库，开始请求网页返回内容</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">import</span> requests             <span class="token comment">#导入库</span>
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree      <span class="token comment">#导入库</span>
<span class="token comment">#复制第一章网页地址</span>
target_url<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/55040/8416285.html"</span>             
requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>target_url<span class="token punctuation">)</span>    <span class="token comment">#请求第一章网页内容</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/d8/85/VSJBLG2v_o.png" alt="在这里插入图片描述"><br> 请求网页内容成功，要注意此处复制的网页链接为第一章所在网页的顶端链接：<br> <img src="https://images2.imgbox.com/9d/4f/TbxPL4eV_o.png" alt="在这里插入图片描述">因为该网页上我们没有遇到反爬虫程序，所以才可以在没有设置浏览器代理的情况下顺利返回网页信息，如果遇到反爬虫程序，我们就要设置浏览器代理才可以顺利返回网页信息</p> 
<ul><li>给返回内容赋值并以<code>.text</code>的文本格式输出</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">import</span> requests                 <span class="token comment">#导入库</span>
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree          <span class="token comment">#导入库</span>
<span class="token comment">#复制第一章网页地址</span>
target_url<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/55040/8416285.html"</span>             
response<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>target_url<span class="token punctuation">)</span>                              <span class="token comment">#请求第一章网页内容,并将返回值赋给response</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>         <span class="token comment">#将response以文本格式输出</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/b4/ce/hCiMJT0q_o.png" alt="在这里插入图片描述">可以发现，我们输出的内容中，小说的文本部分显示的是乱码，而<strong>1.(2)审查代码</strong>中原网页上显示的文本部分就是小说的文本内容，所以我们接下来要做的就是对请求返回的网页内容<code>response</code><strong>还没输出为文本之前进行解码</strong></p> 
<h6><a id="4__74"></a>(4) 对网页内容进行解码</h6> 
<p>因为要对请求返回的网页内容<code>response</code><strong>还没输出为文本之前进行解码</strong>，即先解码，再输出文本才不是乱码<br> 实质上还是对<code>response</code>进行解码</p> 
<ul><li>知识拓展：常见编码方式：<br> <code>utf-8</code>、<code>utf-8-sig</code>、<code>gbk</code><br> 此处我们将使用一个较为万能的解码方式:<br> <code>apparent_encoding</code><br> 使用这个解码方式，它会在不需提示我们需要什么类型的信息的条件下，自动解码出我们所要的信息，但需要注意的是，虽说是万能解码方式，但成功率只有90%</li><li>对第一章小说进行解码</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#解码</span>
<span class="token comment">#对乱码response的内容进行解码，response.encoding为response解码后的名字，.apparent_encoding 为引用万能解码函数</span>
response<span class="token punctuation">.</span>encoding<span class="token operator">=</span>response<span class="token punctuation">.</span>apparent_encoding        
<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>  <span class="token comment">#将解码后的response的内容response.encoding以文本格式输出</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/02/33/D2ErFD8s_o.png" alt="在这里插入图片描述">从解码后的结果来看，乱码部分已经显示为了文字，但通过复制原网页中第一章的小说内容，再利用<code>Ctrl+f</code>键来到运行结果中查找小说内容，并没有查找到小说内容，此时我们考虑设置浏览器代理</p> 
<ul><li>设置浏览器代理<br> 查找浏览器代理步骤：<br> <img src="https://images2.imgbox.com/af/4e/UeH1Zt8c_o.png" alt="在这里插入图片描述">代码及运行结果：</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#添加浏览器代理</span>
headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"User-Agent"</span><span class="token punctuation">:</span><span class="token string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.113 Safari/537.36"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果和未添加浏览器代理时一样，通过查找还是没有显示小说文本内容，我们再考虑在设置浏览器代理的位置添加一个<strong>防盗链</strong></p> 
<ul><li>添加防盗链<br> <strong>添加时同样遵循同时设置两个字典时，两个字典中间要用逗号分隔的语法</strong><br> 查找防盗链：<br> <img src="https://images2.imgbox.com/8d/d5/CMOZvMuQ_o.png" alt="在这里插入图片描述">代码及运行结果：</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#添加浏览器代理及防盗链</span>
headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"Referer"</span><span class="token punctuation">:</span><span class="token string">"http://www.shuquge.com/txt/55040/index.html"</span><span class="token punctuation">,</span>
    <span class="token string">"User-Agent"</span><span class="token punctuation">:</span><span class="token string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.113 Safari/537.36"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果和未添加防盗链时一样，通过查找还是没有显示小说文本内容，代码无错，就可能是网页本身的问题，所以我们将以同样的代码爬取该网站上的另一个小说</p> 
<h5><a id="2_119"></a>2.换一个小说进行爬取</h5> 
<p>以书趣阁网站中的另一个小说《天域苍穹》为例</p> 
<h6><a id="1_121"></a>(1)请求内容并解码输出</h6> 
<p>请求网页为小说《天域苍穹》的第一章<br> 代码及运行结果如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#换一个小说后</span>
<span class="token keyword">import</span> requests      
url<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/363448.html"</span> <span class="token comment">#天域苍穹第一章链接</span>
response<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>  <span class="token comment">#请求第一章网页内容,并将返回值赋给response</span>
response<span class="token punctuation">.</span>encoding<span class="token operator">=</span>response<span class="token punctuation">.</span>apparent_encoding    <span class="token comment">#将解码后的response的内容赋值给response.encoding</span>
response<span class="token punctuation">.</span>text  <span class="token comment">#将response.encoding以文本格式输出</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/a4/2b/8TCklKrS_o.png" alt="在这里插入图片描述">请求内容并解码输出《天域苍穹》第一章内容成功，接下来我们将对小说内容进行提取</p> 
<h6><a id="2_136"></a>(2)提取小说标题</h6> 
<ul><li>导入库，提取并解析筛取信息</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#提取信息</span>
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree   
<span class="token comment">#解析筛取信息</span>
etree_html<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
</code></pre> 
<p>代码没有报错，提取并解析筛取信息成功</p> 
<ul><li>提取第一章小说标题<br> 复制第一章小说标题<code>xpath</code>路径<br> <img src="https://images2.imgbox.com/68/56/uuigtWrD_o.png" alt="在这里插入图片描述">代码及运行结果如下：</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#提取信息</span>
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree   
<span class="token comment">#解析筛取信息</span>
etree_html<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
<span class="token comment">#提取第一章小说标题，/text()不是xpath路径组成部分，意为将内容输出为文本格式</span>
title<span class="token operator">=</span>etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="wrapper"]/div[4]/div[2]/h1/text()'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/ec/20/KJGClph7_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="3_162"></a>(3)提取小说内容</h6> 
<p>仍然使用<code>xpath</code>方式<br> 寻找小说内容所在标签：<br> 选中第一章的所有小说内容，右击检查，会显示出小说内容所在标签，右击<code>copy</code>,再<code>copy xpath</code>即可<br> <img src="https://images2.imgbox.com/ba/5a/YL0ChaCD_o.png" alt="在这里插入图片描述">代码及运行结果如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#提取第一章小说内容</span>
etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="content"]/text()'</span><span class="token punctuation">)</span>
</code></pre> 
<p>可以在将<code>xpath</code>路径加一个<code>/</code>,使查找结果更为准确，可改可不改，即改为</p> 
<pre><code class="prism language-python"><span class="token comment">#提取第一章小说内容</span>
etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="content"]//text()'</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/25/98/8dWanpEg_o.png" alt="在这里插入图片描述">此时小说内容为数组，为了方便保存，我们要将它拼接为字符串</p> 
<h6><a id="4_181"></a>(4)拼接及替换小说内容</h6> 
<ul><li>给提取的小说内容赋值，并拼接为字符串<br> 代码及运行结果如下：</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#提取第一章小说内容</span>
content<span class="token operator">=</span>etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="content"]/text()'</span><span class="token punctuation">)</span>  <span class="token comment">#现还为数组</span>
<span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>content<span class="token punctuation">)</span>              <span class="token comment">#拼接为字符串</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/e4/a5/bVG8VRnc_o.png" alt="在这里插入图片描述">运行结果中，小说内容文本中存在一些多余标签，我们可使用替换功能将其去除</p> 
<ul><li>替换多余标签<br> 代码及运行结果如下：</li></ul> 
<pre><code class="prism language-python"><span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"\r\r\xa0\xa0\xa0\xa0"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span>              <span class="token comment">#拼接为字符串，替换多余标签</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/1f/0d/VIejtJyU_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="3_200"></a>3.保存内容</h5> 
<h6><a id="1withtxt_201"></a>(1)with方法保存爬取内容为txt文件</h6> 
<p>由于我们替换掉的多余标签<code>\r\r\xa0\xa0\xa0\xa0</code>在文本中起到换行的作用，所以保存文件时我们将撤销对它的替换函数<br> 代码及运行结果如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#保存文件</span>
<span class="token comment">#创建文件并打开</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'.第一章 若得来生重倚剑，屠尽奸邪笑苍天.txt'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span> 
    <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">#放进去内容，写入</span>
<span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#写入后关闭文件</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/73/72/B2fBIIk1_o.png" alt="在这里插入图片描述"><br> 保存内容文件夹及其内容：<br> <img src="https://images2.imgbox.com/be/86/4oD45nYY_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/7e/03/phZ34jZz_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="2_216"></a>(2)绝对路径保存文件到桌面</h6> 
<p>3.(1)的保存方法中，文件路径为相对路径，而我们可以使用绝对路径将文件直接保存到桌面</p> 
<ul><li>现在桌面新建一个文件夹，并将其路径复制下来，用于构造绝对路径<br> <img src="https://images2.imgbox.com/c5/5e/ldmGSgWI_o.png" alt="在这里插入图片描述">要复制的路径为：<code>C:\Users\ASUS\Desktop\桌面小说</code></li><li>使用绝对路径保存文件到桌面<br> 代码及运行结果如下：</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#保存文件</span>
<span class="token comment">#创建文件并打开,r表示原意，\表示转义字符</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>r<span class="token string">'C:\Users\ASUS\Desktop\桌面小说\第一章 若得来生重倚剑，屠尽奸邪笑苍天.txt'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span> 
    <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">#放进去内容，写入</span>
<span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#写入后关闭文件</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/19/35/BAJp6Itx_o.png" alt="在这里插入图片描述"><br> 桌面文件保存情况：<br> <img src="https://images2.imgbox.com/9e/af/dFQT8KXI_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="3_235"></a>(3)加号方法保存文件到桌面</h6> 
<p>可以以另一种方式构造保存文件到桌面时的路径，此处为了看出运行效果，可将上一步保存在文件夹<strong>桌面小说</strong>中的<code>.txt</code>文件先删除<br> 代码及运行结果如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#保存文件</span>
<span class="token comment">#创建文件并打开,r表示原意，\表示转义字符</span>
filePath<span class="token operator">=</span>r<span class="token string">"C:\Users\ASUS\Desktop\桌面小说\\"</span>         <span class="token comment">#将绝对路径前半部分拿出来</span>

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filePath<span class="token operator">+</span>title<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">'.txt'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span> 
    <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">#放进去内容，写入</span>
<span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#写入后关闭文件</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/27/8c/hnADmp1p_o.png" alt="在这里插入图片描述"><br> 桌面文件保存情况：<br> <img src="https://images2.imgbox.com/de/3c/MDkLalue_o.png" alt="在这里插入图片描述"></p> 
<ul><li>何时使用相对路径？何时使用绝对路径？<br> <strong>使用相对路径</strong>：将文件保存在当前目录中，即打开控制台之前新建的文件夹中<br> <strong>使用绝对路径</strong>：保存文件到当前路径之外的地方<br> 具体使用哪一种路径来保存看个人需求来定</li></ul> 
<h6><a id="4_257"></a>(4)封装方法保存文件</h6> 
<p>所谓封装，就是把能实现某个功能的代码用一个函数封装起来，这样做可以便于我们再想要实现这部分代码的功能时，直接引用它的封装名，而不需要自己再去写一遍代码</p> 
<ul><li>下面我们将使用封装函数将解析并保存小说内容部分的代码封装起来，并用封装名打开它来实现保存文件内容的目的(仍以保存到桌面为例，需要上一步保存的先删除)<br> 关键语句：<br> 封装函数：<code>def download_text():</code><br> 调用封装函数时(解封)：<code>download_text()</code><br> <code>download_text()</code>为自己命名的封装函数名<br> 代码及运行结果如下：</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#提取信息</span>
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree  
<span class="token keyword">def</span> <span class="token function">download_text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment">#封装到 file.close()</span>
    <span class="token comment">#解析筛取信息</span>
    etree_html<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    <span class="token comment">#提取第一章小说标题,/text()不是xpath路径组成部分，意为将内容输出为文本格式</span>
    title<span class="token operator">=</span>etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="wrapper"]/div[4]/div[2]/h1/text()'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span>
    <span class="token comment">#提取第一章小说内容</span>
    content<span class="token operator">=</span>etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="content"]/text()'</span><span class="token punctuation">)</span>  <span class="token comment">#现还为数组</span>
    <span class="token comment">#"".join(content).replace("\r\r\xa0\xa0\xa0\xa0","")              #拼接为字符串，替换多余标签</span>
    text<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>content<span class="token punctuation">)</span>            <span class="token comment">#拼接为字符串,多余标签\r\n为换行作用</span>
    
    <span class="token comment">#保存文件</span>
    <span class="token comment">#创建文件并打开,r表示原意，\表示转义字符</span>
    filePath<span class="token operator">=</span>r<span class="token string">"C:\Users\ASUS\Desktop\桌面小说\\"</span>         <span class="token comment">#将绝对路径前半部分拿出来</span>

    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filePath<span class="token operator">+</span>title<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">'.txt'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span> 
        <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">#放进去内容，写入</span>
    <span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#写入后关闭文件</span>
download_text<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/f9/b5/szSczP4F_o.png" alt="在这里插入图片描述"><br> 打开桌面文件夹：<br> <img src="https://images2.imgbox.com/a5/70/plt7XVH3_o.png" alt="在这里插入图片描述">文件内容：<br> <img src="https://images2.imgbox.com/4d/cc/vxoPEUXE_o.png" alt="在这里插入图片描述"></p> 
<ul><li>将要爬取得网页链接带入封装方法中<br> 代码及运行结果如下：</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#提取信息</span>
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree  

<span class="token keyword">def</span> <span class="token function">download_text</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment">#封装到 file.close()</span>
     
<span class="token comment">#请求网页内容并解码 </span>
    response<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>                      <span class="token comment">#请求第一章网页内容,并将返回值赋给response</span>
    response<span class="token punctuation">.</span>encoding<span class="token operator">=</span>response<span class="token punctuation">.</span>apparent_encoding    <span class="token comment">#将解码后的response的内容赋值给response.encoding      </span>
     
        
<span class="token comment">#解析筛取信息</span>
    etree_html<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    <span class="token comment">#提取第一章小说标题,/text()不是xpath路径组成部分，意为将内容输出为文本格式</span>
    title<span class="token operator">=</span>etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="wrapper"]/div[4]/div[2]/h1/text()'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span>
    <span class="token comment">#提取第一章小说内容</span>
    content<span class="token operator">=</span>etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="content"]/text()'</span><span class="token punctuation">)</span>  <span class="token comment">#现还为数组</span>
    <span class="token comment">#"".join(content).replace("\r\r\xa0\xa0\xa0\xa0","")              #拼接为字符串，替换多余标签</span>
    text<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>content<span class="token punctuation">)</span>            <span class="token comment">#拼接为字符串,多余标签\r\n为换行作用</span>

    <span class="token comment">#保存文件</span>
    <span class="token comment">#创建文件并打开,r表示原意，\表示转义字符</span>
    filePath<span class="token operator">=</span>r<span class="token string">"C:\Users\ASUS\Desktop\桌面小说\\"</span>         <span class="token comment">#将绝对路径前半部分拿出来</span>

    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filePath<span class="token operator">+</span>title<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">'.txt'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span> 
        <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">#放进去内容，写入</span>
    <span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#写入后关闭文件</span>
target_url<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/363448.html"</span>   <span class="token comment">#天域苍穹第一章链接</span>
download_text<span class="token punctuation">(</span>target_url<span class="token punctuation">)</span> <span class="token comment">#打开方法时连着页面的链接</span>
</code></pre> 
<p>链接的传递过程：<br> <img src="https://images2.imgbox.com/16/f9/2Oa6hqxG_o.png" alt="在这里插入图片描述">运行结果和之前保存文件的一样</p> 
<h6><a id="5_331"></a>(5)使用封装方法爬取并保存第二章</h6> 
<p>使用封装方法爬取并保存第二章，只需要上一步中的<code>target_url</code>改为第二章的链接即可</p> 
<pre><code class="prism language-python"><span class="token comment">#天域苍穹第二章链接</span>
target_url<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/363449.html"</span>   
</code></pre> 
<p>运行结果如下：<br> <img src="https://images2.imgbox.com/6d/3c/UTLmw7FH_o.png" alt="在这里插入图片描述"><br> 打开桌面文件夹第二章及其内容：<br> <img src="https://images2.imgbox.com/0d/d9/k4dWRrqy_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/9c/52/zLcasmhK_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="6_342"></a>(6)添加主函数爬取并保存第三章</h6> 
<p>将<code>target_url</code>改为第三章的链接，再在关闭文件的下方写一个<code>mian</code>主函数，同样可以爬取并保存第三章<br> 代码及运行结果如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#提取信息</span>
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree  

<span class="token keyword">def</span> <span class="token function">download_text</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment">#封装到 file.close()</span>
     
<span class="token comment">#请求网页内容并解码 </span>
    response<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>                      <span class="token comment">#请求第三章网页内容,并将返回值赋给response</span>
    response<span class="token punctuation">.</span>encoding<span class="token operator">=</span>response<span class="token punctuation">.</span>apparent_encoding    <span class="token comment">#将解码后的response的内容赋值给response.encoding      </span>
     
        
<span class="token comment">#解析筛取信息</span>
    etree_html<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    <span class="token comment">#提取第一章小说标题,/text()不是xpath路径组成部分，意为将内容输出为文本格式</span>
    title<span class="token operator">=</span>etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="wrapper"]/div[4]/div[2]/h1/text()'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span>
    <span class="token comment">#提取第一章小说内容</span>
    content<span class="token operator">=</span>etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="content"]/text()'</span><span class="token punctuation">)</span>  <span class="token comment">#现还为数组</span>
    <span class="token comment">#"".join(content).replace("\r\r\xa0\xa0\xa0\xa0","")              #拼接为字符串，替换多余标签</span>
    text<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>content<span class="token punctuation">)</span>            <span class="token comment">#拼接为字符串,多余标签\r\n为换行作用</span>

    <span class="token comment">#保存文件</span>
    <span class="token comment">#创建文件并打开,r表示原意，\表示转义字符</span>
    filePath<span class="token operator">=</span>r<span class="token string">"C:\Users\ASUS\Desktop\桌面小说\\"</span>         <span class="token comment">#将绝对路径前半部分拿出来</span>

    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filePath<span class="token operator">+</span>title<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">'.txt'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span> 
        <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">#放进去内容，写入</span>
    <span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#写入后关闭文件</span>
 
<span class="token keyword">if</span> __name__<span class="token operator">==</span><span class="token string">'__main__'</span><span class="token punctuation">:</span>  <span class="token comment">#添加主函数</span>
    target_url<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/363450.html"</span>   <span class="token comment">#天域苍穹第三章链接</span>
    download_text<span class="token punctuation">(</span>target_url<span class="token punctuation">)</span>      <span class="token comment">#打开方法时连着页面的链接</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/8a/33/VQ7iMDbZ_o.png" alt="在这里插入图片描述"><br> 打开桌面文件夹第三章及其内容：<br> <img src="https://images2.imgbox.com/8d/5a/sVGsaoaY_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/fb/ef/wUdZtR0H_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="4_383"></a>4.取所有章节链接</h5> 
<h6><a id="1_384"></a>(1)分析链接特点</h6> 
<p>打开第一章，右击检查代码，可以发现其网页链接如下：<br> <img src="https://images2.imgbox.com/97/04/NPetM5HZ_o.png" alt="在这里插入图片描述">所以接下来我们在请求小说首页给我们返回内容时，只要包含有所有章节的这种类型的链接即可，有乱码页不影响</p> 
<ul><li>取所有章节链接代码及运行结果如下：</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#取所有章节链接</span>
index_url<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/index.html"</span>  <span class="token comment">#小说首页链接</span>
index_html<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>index_url<span class="token punctuation">)</span><span class="token punctuation">.</span>text 
 <span class="token comment">#在小说首页请求所有链接的内容以文本格式输出</span>
index_html  <span class="token comment">#输出小说首页所有连接的内容</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/d2/e0/zstq3wD7_o.png" alt="在这里插入图片描述">其中有乱码，但只要我们需要的每一章小说的链接不是乱码即可</p> 
<h6><a id="2_399"></a>(2)开始取所有链接</h6> 
<p>分析所有章节的<code>xpath</code>路径：<br> 第一章：</p> 
<pre><code class="prism language-python"><span class="token operator">/</span>html<span class="token operator">/</span>body<span class="token operator">/</span>div<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">/</span>dl<span class="token operator">/</span>dd<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token operator">/</span>a
</code></pre> 
<p>第二章：</p> 
<pre><code class="prism language-python"><span class="token operator">/</span>html<span class="token operator">/</span>body<span class="token operator">/</span>div<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">/</span>dl<span class="token operator">/</span>dd<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span><span class="token operator">/</span>a
</code></pre> 
<p>第三章：</p> 
<pre><code class="prism language-python"><span class="token operator">/</span>html<span class="token operator">/</span>body<span class="token operator">/</span>div<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">/</span>dl<span class="token operator">/</span>dd<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token operator">/</span>a
</code></pre> 
<p>对比三个链接可以发现，不同的部分有：<br> <img src="https://images2.imgbox.com/88/81/IVjTtEjp_o.png" alt="在这里插入图片描述"><br> 前三章的<code>xpath</code>路径是这样，说明面的章节<code>xpath</code>路径变化规律也是一样的，<strong>而我们可以根据这个不同的地方将<code>xpath</code>路径分为前后两段，以此来循环出所有章节的链接</strong><br> 代码及运行结果如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#取所有章节链接</span>
index_url<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/index.html"</span>  <span class="token comment">#小说首页链接</span>
index_html<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>index_url<span class="token punctuation">)</span><span class="token punctuation">.</span>text
index_etree<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>index_html<span class="token punctuation">)</span>  <span class="token comment">#提取内容</span>
<span class="token comment">#用标签分段取链接</span>
dd<span class="token operator">=</span>index_etree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'/html/body/div[5]/dl/dd'</span><span class="token punctuation">)</span>      <span class="token comment">#写的是所有章节xpath路径写的是的前半部分的相同部分</span>
<span class="token keyword">for</span> item <span class="token keyword">in</span> dd<span class="token punctuation">:</span>
    href<span class="token operator">=</span>item<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./a/@href'</span><span class="token punctuation">)</span>       <span class="token comment">#写的是所有章节xpath路径写的是的后半部分的相同部分，@href意为返回内容为链接</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span>  
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/19/55/OSUSK501_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="3_431"></a>(3)构造完整链接</h6> 
<p>上一步中我们将章节的链接都拿了出来，但它们不是完整的链接，不可以电机后直接访问到相应章节的小说内容，所以我们将把链接缺失的部分补上<br> 代码及运行结果如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#取所有章节链接</span>
index_url<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/index.html"</span>  <span class="token comment">#小说首页链接</span>
index_html<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>index_url<span class="token punctuation">)</span><span class="token punctuation">.</span>text
index_etree<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>index_html<span class="token punctuation">)</span>  <span class="token comment">#提取内容</span>
<span class="token comment">#用标签分段取链接</span>
dd<span class="token operator">=</span>index_etree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'/html/body/div[5]/dl/dd'</span><span class="token punctuation">)</span>      <span class="token comment">#写的是所有章节xpath路径写的是的前半部分的相同部分</span>
<span class="token keyword">for</span> item <span class="token keyword">in</span> dd<span class="token punctuation">:</span>
    <span class="token comment">#构造完整链接</span>
    href<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/"</span><span class="token operator">+</span>item<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./a/@href'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>       <span class="token comment">#写的是所有章节xpath路径写的是的后半部分的相同部分，@href意为返回内容为链接</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span>   
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/c6/7c/HlV8Jcnw_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="4_448"></a>(4)打包所有完整链接并求个数</h6> 
<p>代码及运行结果如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#取所有章节链接</span>
index_url<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/index.html"</span>  <span class="token comment">#小说首页链接</span>
index_html<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>index_url<span class="token punctuation">)</span><span class="token punctuation">.</span>text
index_etree<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>index_html<span class="token punctuation">)</span>  <span class="token comment">#提取内容</span>
<span class="token comment">#用标签分段取链接</span>
dd<span class="token operator">=</span>index_etree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'/html/body/div[5]/dl/dd'</span><span class="token punctuation">)</span>      <span class="token comment">#写的是所有章节xpath路径写的是的前半部分的相同部分</span>
link_list<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment">#打包所有链接</span>
<span class="token keyword">for</span> item <span class="token keyword">in</span> dd<span class="token punctuation">:</span>
    <span class="token comment">#构造完整链接</span>
    href<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/"</span><span class="token operator">+</span>item<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./a/@href'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>       <span class="token comment">#写的是所有章节xpath路径写的是的后半部分的相同部分，@href意为返回内容为链接</span>
    link_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>href<span class="token punctuation">)</span>      <span class="token comment">#每输出一个链接，便追加到 link_list中</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>link_list<span class="token punctuation">)</span>     
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/b2/ac/HNYwor3w_o.png" alt="在这里插入图片描述"></p> 
<ul><li>求链接的个数，使用<code>len()</code>函数即可<br> 代码及运行结果如下：</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>link_list<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/44/63/nRhvK4cN_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="5_474"></a>(5)将获取章节链接的代码封装</h6> 
<p>代码及运行结果如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#提取信息</span>
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree  

<span class="token keyword">def</span> <span class="token function">download_text</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment">#封装到 file.close()</span>
     
<span class="token comment">#请求网页内容并解码 </span>
    response<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>                      <span class="token comment">#请求第三章网页内容,并将返回值赋给response</span>
    response<span class="token punctuation">.</span>encoding<span class="token operator">=</span>response<span class="token punctuation">.</span>apparent_encoding    <span class="token comment">#将解码后的response的内容赋值给response.encoding      </span>
     
        
<span class="token comment">#解析筛取信息</span>
    etree_html<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    <span class="token comment">#提取第一章小说标题,/text()不是xpath路径组成部分，意为将内容输出为文本格式</span>
    title<span class="token operator">=</span>etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="wrapper"]/div[4]/div[2]/h1/text()'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span>
    <span class="token comment">#提取第一章小说内容</span>
    content<span class="token operator">=</span>etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="content"]/text()'</span><span class="token punctuation">)</span>  <span class="token comment">#现还为数组</span>
    <span class="token comment">#"".join(content).replace("\r\r\xa0\xa0\xa0\xa0","")              #拼接为字符串，替换多余标签</span>
    text<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>content<span class="token punctuation">)</span>            <span class="token comment">#拼接为字符串,多余标签\r\n为换行作用</span>

    <span class="token comment">#保存文件</span>
    <span class="token comment">#创建文件并打开,r表示原意，\表示转义字符</span>
    filePath<span class="token operator">=</span>r<span class="token string">"C:\Users\ASUS\Desktop\桌面小说\\"</span>         <span class="token comment">#将绝对路径前半部分拿出来</span>

    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filePath<span class="token operator">+</span>title<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">'.txt'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span> 
        <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">#放进去内容，写入</span>
    <span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#写入后关闭文件</span>
    
    
<span class="token comment">#封装获取所有链接的代码    </span>
<span class="token keyword">def</span> <span class="token function">get_link</span><span class="token punctuation">(</span>index_url<span class="token punctuation">)</span><span class="token punctuation">:</span>
    index_html<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>index_url<span class="token punctuation">)</span><span class="token punctuation">.</span>text
    index_etree<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>index_html<span class="token punctuation">)</span>  <span class="token comment">#提取内容</span>
    <span class="token comment">#用标签分段取链接</span>
    dd<span class="token operator">=</span>index_etree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'/html/body/div[5]/dl/dd'</span><span class="token punctuation">)</span>      <span class="token comment">#写的是所有章节xpath路径写的是的前半部分的相同部分</span>
    link_list<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment">#打包所有链接</span>
    <span class="token keyword">for</span> item <span class="token keyword">in</span> dd<span class="token punctuation">:</span>
        <span class="token comment">#构造完整链接</span>
        href<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/"</span><span class="token operator">+</span>item<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./a/@href'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>       <span class="token comment">#写的是所有章节xpath路径写的是的后半部分的相同部分，@href意为返回内容为链接</span>
        link_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>href<span class="token punctuation">)</span>      <span class="token comment">#每输出一个链接，便追加到 link_list中</span>
    <span class="token keyword">return</span> link_list     <span class="token comment">#返回的东西，我要带走的</span>
    
    
       
 
<span class="token keyword">if</span> __name__<span class="token operator">==</span><span class="token string">'__main__'</span><span class="token punctuation">:</span>   <span class="token comment">#添加主函数</span>
    index_url<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/index.html"</span>  <span class="token comment">#小说首页链接</span>
    links<span class="token operator">=</span>get_link<span class="token punctuation">(</span>index_url<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>links<span class="token punctuation">)</span>
<span class="token comment">#     target_url="http://www.shuquge.com/txt/514/363450.html"   #天域苍穹第三章链接</span>
<span class="token comment">#     download_text(target_url)              #打开方法时连着页面的链接</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/cd/1b/mJg0ZkAE_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="6_532"></a>(6)获取所有章节小说内容</h6> 
<p>写一个循环，将所有链接爬取到<br> 改动部分代码为：<br> <img src="https://images2.imgbox.com/d1/78/rLJCDMBU_o.png" alt="在这里插入图片描述">完整运行代码及结果为：</p> 
<pre><code class="prism language-python"><span class="token comment">#提取信息</span>
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree  

<span class="token keyword">def</span> <span class="token function">download_text</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment">#封装到 file.close()</span>
     
<span class="token comment">#请求网页内容并解码 </span>
    response<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>                      <span class="token comment">#请求第三章网页内容,并将返回值赋给response</span>
    response<span class="token punctuation">.</span>encoding<span class="token operator">=</span>response<span class="token punctuation">.</span>apparent_encoding    <span class="token comment">#将解码后的response的内容赋值给response.encoding      </span>
     
        
<span class="token comment">#解析筛取信息</span>
    etree_html<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    <span class="token comment">#提取第一章小说标题,/text()不是xpath路径组成部分，意为将内容输出为文本格式</span>
    title<span class="token operator">=</span>etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="wrapper"]/div[4]/div[2]/h1/text()'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span>
    <span class="token comment">#提取第一章小说内容</span>
    content<span class="token operator">=</span>etree_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="content"]/text()'</span><span class="token punctuation">)</span>  <span class="token comment">#现还为数组</span>
    <span class="token comment">#"".join(content).replace("\r\r\xa0\xa0\xa0\xa0","")              #拼接为字符串，替换多余标签</span>
    text<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>content<span class="token punctuation">)</span>            <span class="token comment">#拼接为字符串,多余标签\r\n为换行作用</span>

    <span class="token comment">#保存文件</span>
    <span class="token comment">#创建文件并打开,r表示原意，\表示转义字符</span>
    filePath<span class="token operator">=</span>r<span class="token string">"C:\Users\ASUS\Desktop\桌面小说\\"</span>         <span class="token comment">#将绝对路径前半部分拿出来</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filePath<span class="token operator">+</span>title<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">'.txt'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span> 
            <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">#放进去内容，写入</span>
            <span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#写入后关闭文件</span>
    <span class="token keyword">except</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
    
<span class="token comment">#封装获取所有链接的代码    </span>
<span class="token keyword">def</span> <span class="token function">get_link</span><span class="token punctuation">(</span>index_url<span class="token punctuation">)</span><span class="token punctuation">:</span>
    index_html<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>index_url<span class="token punctuation">)</span><span class="token punctuation">.</span>text
    index_etree<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>index_html<span class="token punctuation">)</span>  <span class="token comment">#提取内容</span>
    <span class="token comment">#用标签分段取链接</span>
    dd<span class="token operator">=</span>index_etree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'/html/body/div[5]/dl/dd'</span><span class="token punctuation">)</span>      <span class="token comment">#写的是所有章节xpath路径写的是的前半部分的相同部分</span>
    link_list<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment">#打包所有链接</span>
    <span class="token keyword">for</span> item <span class="token keyword">in</span> dd<span class="token punctuation">:</span>
        <span class="token comment">#构造完整链接</span>
        href<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/"</span><span class="token operator">+</span>item<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./a/@href'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>       <span class="token comment">#写的是所有章节xpath路径写的是的后半部分的相同部分，@href意为返回内容为链接</span>
        link_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>href<span class="token punctuation">)</span>      <span class="token comment">#每输出一个链接，便追加到 link_list中</span>
    <span class="token keyword">return</span> link_list     <span class="token comment">#返回的东西，我要带走的</span>
    
    
       
 
<span class="token keyword">if</span> __name__<span class="token operator">==</span><span class="token string">'__main__'</span><span class="token punctuation">:</span>   <span class="token comment">#添加主函数</span>
    index_url<span class="token operator">=</span><span class="token string">"http://www.shuquge.com/txt/514/index.html"</span>  <span class="token comment">#小说首页链接</span>
    links<span class="token operator">=</span>get_link<span class="token punctuation">(</span>index_url<span class="token punctuation">)</span>
    <span class="token keyword">for</span> link <span class="token keyword">in</span> links<span class="token punctuation">:</span>
        target_url<span class="token operator">=</span>link
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"正在爬取："</span><span class="token punctuation">,</span>target_url<span class="token punctuation">)</span>
        download_text<span class="token punctuation">(</span>target_url<span class="token punctuation">)</span>              <span class="token comment">#打开方法时连着页面的链接</span>
</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/2c/e6/Kr2T2acJ_o.png" alt="在这里插入图片描述">打开桌面文件夹：<br> <img src="https://images2.imgbox.com/e2/f8/aMNHJZVa_o.png" alt="在这里插入图片描述">至此，爬取并保存书趣阁小说《天域苍穹》所有章节内容成功结束！</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/53ba83486ae31d8b94088d584b888d43/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">你的sd卡到底有多快？ 256G SD 卡实际速度测试</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/598fcb757be6a227d5b0475ee05bb041/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">postman做接口测试14-导入导出</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>