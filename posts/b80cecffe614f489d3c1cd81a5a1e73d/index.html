<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于 SuperMap iObjects C&#43;&#43; 10i（10.2.x）组件在 Visual Studio 2019 上的 Qt 项目开发环境配置 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于 SuperMap iObjects C&#43;&#43; 10i（10.2.x）组件在 Visual Studio 2019 上的 Qt 项目开发环境配置" />
<meta property="og:description" content="基于 SuperMap iObjects C&#43;&#43; 10i（10.2.x）组件在 Visual Studio 2019 上的 Qt 项目开发环境配置 目录 基于 SuperMap iObjects C&#43;&#43; 10i（10.2.x）组件在 Visual Studio 2019 上的 Qt 项目开发环境配置前言开发环境开发工具 一、安装 Qt 5.12.12二、安装 Visual Studio 2019三、为 Visual Studio 2019 安装 Qt 扩展开发插件四、调整 SuperMap iObjects C&#43;&#43; 组件包中依赖 Qt 的版本五、通过 Visual Studio 2019 新建 Qt 项目并配置开发环境六、编码七、运行结果总结 前言 由于 SuperMap iObjects C&#43;&#43; 组件结构在版本 10.2.0 进行了更新，导致 CSDN 以前的教程无法完成开发环境的配置工作，若是使用 SuperMap iObjects C&#43;&#43; 10.2.0 之前 版本的组件进行开发，建议参考《SuperMap iObjects for C&#43;&#43; 入门详解（VS &#43; Qt）》教程文档。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/b80cecffe614f489d3c1cd81a5a1e73d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-30T16:38:52+08:00" />
<meta property="article:modified_time" content="2022-03-30T16:38:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于 SuperMap iObjects C&#43;&#43; 10i（10.2.x）组件在 Visual Studio 2019 上的 Qt 项目开发环境配置</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_SuperMap_iObjects_C_10i102x_Visual_Studio_2019__Qt__0"></a>基于 SuperMap iObjects C++ 10i（10.2.x）组件在 Visual Studio 2019 上的 Qt 项目开发环境配置</h2> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_SuperMap_iObjects_C_10i102x_Visual_Studio_2019__Qt__0" rel="nofollow">基于 SuperMap iObjects C++ 10i（10.2.x）组件在 Visual Studio 2019 上的 Qt 项目开发环境配置</a></li><li><a href="#_6" rel="nofollow">前言</a></li><li><ul><li><a href="#_10" rel="nofollow">开发环境</a></li><li><a href="#_14" rel="nofollow">开发工具</a></li></ul> 
  </li><li><a href="#_Qt_51212_22" rel="nofollow">一、安装 Qt 5.12.12</a></li><li><a href="#_Visual_Studio_2019_32" rel="nofollow">二、安装 Visual Studio 2019</a></li><li><a href="#_Visual_Studio_2019__Qt__39" rel="nofollow">三、为 Visual Studio 2019 安装 Qt 扩展开发插件</a></li><li><a href="#_SuperMap_iObjects_C__Qt__44" rel="nofollow">四、调整 SuperMap iObjects C++ 组件包中依赖 Qt 的版本</a></li><li><a href="#_Visual_Studio_2019__Qt__60" rel="nofollow">五、通过 Visual Studio 2019 新建 Qt 项目并配置开发环境</a></li><li><a href="#_297" rel="nofollow">六、编码</a></li><li><a href="#_358" rel="nofollow">七、运行结果</a></li><li><a href="#_364" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_6"></a>前言</h2> 
<p>  由于 <strong>SuperMap iObjects C++</strong> 组件结构在版本 <code>10.2.0</code> 进行了更新，导致 CSDN 以前的教程无法完成开发环境的配置工作，若是使用 <strong>SuperMap iObjects C++</strong> <code>10.2.0</code> <strong><font color="red">之前</font></strong> 版本的组件进行开发，建议参考<a href="https://blog.csdn.net/supermapsupport/article/details/105142951">《SuperMap iObjects for C++ 入门详解（VS + Qt）》</a>教程文档。</p> 
<h3><a id="_10"></a>开发环境</h3> 
<p>  <strong>Windows 11</strong> - 64 位操作系统, 基于 x64 的处理器</p> 
<h3><a id="_14"></a>开发工具</h3> 
<ol><li><a href="http://support.supermap.com.cn/DownloadCenter/ProductPlatform.aspx" rel="nofollow"><strong>SuperMap iObjects C++ 10i (10.2.x)</strong></a>（选择 组件》SuperMap iObjects C++ 10.2.0 / 10.2.1 版本）</li><li><a href="https://mirrors.tuna.tsinghua.edu.cn/qt/official_releases/qt/5.12/5.12.12/" rel="nofollow"><strong>Qt 5.12.12</strong></a>（由于<a href="https://www.qt.io/zh-cn/" rel="nofollow"> <em><strong>Qt 官网</strong></em></a> 在国内打开速度太慢，建议去<a href="https://mirrors.tuna.tsinghua.edu.cn/" rel="nofollow"><em><strong>清华镜像源</strong></em></a>（下载需要的 Qt 安装包）</li><li><a href="https://mirrors.tuna.tsinghua.edu.cn/qt/official_releases/vsaddin/2.8.1/" rel="nofollow"><strong>qt-vsaddin-msvc2019-2.8.1-rev.06.vsix</strong></a>（Visual Studio 2019 Qt 插件）</li><li><a href="https://visualstudio.microsoft.com/zh-hans/vs/older-downloads/" rel="nofollow"><strong>Visual Studio 2019</strong></a>（安装时务必勾选 C++ 开发环境）</li></ol> 
<hr> 
<h2><a id="_Qt_51212_22"></a>一、安装 Qt 5.12.12</h2> 
<p>  <strong>Qt</strong> <code>5.12.12</code> 下载离线安装包后直接安装就好。安装完成后即可在系统中检索到 <code>Qt Creator</code>（如下图）。<br> <img src="https://images2.imgbox.com/89/b0/Yglg9LZh_o.png" alt="Qt Creator 5.0.2 (Community)"></p> 
<p><font color="red" size="4"><strong>注意：</strong></font><br>   <font color="red" size="3">1. <strong>Qt</strong> 安装过程中选择组件时，务必勾选 <code>MSVC 2017 64-bit</code>、<code>MSVC 2017 32-bit</code> 和 <code>MSVC 2015 64-bit</code> 组件（如果有可选的情况下），后续开发时根据 <strong>Visual Studio 2019</strong> 的开发环境选择对应的组件对 <strong>Qt 项目</strong> 进行编译。</font><br>   <font color="red" size="3">2. <strong>Qt</strong> 安装时务必勾选 <code>Qt Creator</code> 编译程序，后续会使用 <code>Qt Creator</code> 对 <code>SuperMap iObjects C++</code> 组件中的 <code>extensions4Qt</code> 项目进行重新编译。</font></p> 
<h2><a id="_Visual_Studio_2019_32"></a>二、安装 Visual Studio 2019</h2> 
<p>  <strong>Visual Studio 2019</strong> 安装时，务必勾选 <strong><code>使用 C++ 的桌面开发</code></strong> 组件包 <em>（如下图所示）</em> ，其余组件包根据各人需求自行选择安装。<br> <img src="https://images2.imgbox.com/0a/62/xGq7gfkX_o.png" alt="Visual Studio 2019 C++桌面开发"><br>   <strong>Visual Studio 2019</strong> 安装完成后打开，新建项目》选择 <code>C++</code> 语言，支持新建如下图所示的 <code>C++</code> 项目即表示环境安装成功。<br> <img src="https://images2.imgbox.com/22/2b/mVTyzBdn_o.png" alt="Visual Studio 2019 新建 C++ 项目"></p> 
<h2><a id="_Visual_Studio_2019__Qt__39"></a>三、为 Visual Studio 2019 安装 Qt 扩展开发插件</h2> 
<p>  退出 <strong>Visual Studio 2019</strong> 进程，双击 <code>qt-vsaddin-msvc2019-2.8.1-rev.06.vsix</code> 进行 <code>Qt 插件</code> 安装。安装完成后，打开 <strong>Visual Studio 2019</strong> 新建项目支持创建<br> <img src="https://images2.imgbox.com/ac/c4/Zc6nbhXJ_o.png" alt="Visual Studio 2019 新建 Qt 项目"></p> 
<h2><a id="_SuperMap_iObjects_C__Qt__44"></a>四、调整 SuperMap iObjects C++ 组件包中依赖 Qt 的版本</h2> 
<p>  由于 <code>SuperMap iObjects C++</code> 组件包中依赖的 <code>Qt</code> 是 <em><strong>5.6</strong></em> 版本的库，所以需要按顺序执行以下操作预处理 <code>SuperMap iObjects C++</code> 中的 <em><strong>Qt</strong></em> 依赖版本更新。（<font color="red"><em><strong>建议：</strong></em> <em>即使下载安装的 <code>Qt</code> 版本是 <em><strong>5.6</strong></em>，最好也进行以下操作进行版本更新，无法确保下载的 <em><strong>Qt</strong></em> 子版本是一致的</em></font>）</p> 
<ol><li> <p><font size="4">将本机 <code>Qt</code> 安装目录（<em>如：C:\Qt\Qt5.12.12\5.12.12\msvc2017_64\bin</em>）下的 <code>Qt5Cored.dll</code>、<code>Qt5Guid.dll</code> 和 <code>Qt5Widgetsd.dll</code> 动态链接库文件 <em><strong><font color="red">拷贝替换</font></strong></em> <code>SuperMap iObjects C++</code> 组件包安装目录（<em>如：C:\SuperMap\supermap-iobjectscpp-10.2.1-20428-92245-win-all\bin\bind_x64</em>）中自带的 <code>Qt5Cored.dll</code>、<code>Qt5Guid.dll</code> 和 <code>Qt5Widgetsd.dll</code> 动态链接库文件；</font></p> </li><li> <p><font size="4">将本机 <code>Qt</code> 平台插件安装目录（<em>如：C:\Qt\Qt5.12.12\5.12.12\msvc2017_64\plugins\platforms</em>）下的全部动态链接库文件 <em><strong><font color="red">拷贝替换</font></strong></em> <code>SuperMap iObjects C++</code> 组件包平台插件安装目录（<em>如：C:\SuperMap\supermap-iobjectscpp-10.2.1-20428-92245-win-all\bin\bind_x64\plugins\platforms</em>）中的全部动态链接库文件；</font></p> </li><li> <p><font size="4">使用 <code>Qt Creator</code> 打开 <code>SuperMap iObjects C++</code> 组件包安装目录中的 <em><strong>Extensions4Qt</strong></em> 项目（<em>项目目录如：C:\SuperMap\supermap-iobjectscpp-10.2.1-20428-92245-win-all\sample\extensions4Qt</em>），打开后如图所示：</font><br> <img src="https://images2.imgbox.com/a9/b4/eDUbhJeC_o.png" alt="Qt Creator打开Extensions4Qt项目截图"></p> </li><li> <p><font size="4">在 <code>Qt Creator</code> 中配置 <em><strong>Extensions4Qt</strong></em> 项目编译时需要的 <strong>环境变量</strong>，将 <code>SuperMap iObjects C++</code> 安装目录调试环境路径配置给 <em><strong>Extensions4Qt</strong></em> 项目，如下图所示：</font><br> <img src="https://images2.imgbox.com/d1/b4/V81pmHNS_o.png" alt="配置Extensions4Qt项目环境变量"></p> </li><li> <p><font size="4">在 <code>Qt Creator</code> 中编译生成与本机 <code>Qt</code> 版本适配的 <em><strong>Extensions4Qt</strong></em> 动态链接库，将新生成的 <code>Extensions4Qt.dll</code>、<code>Extensions4Qt.lib</code>、<code>Extensions4Qt.exp</code>、<code>Extensions4Qt.ilk</code> 和 <code>Extensions4Qt.pdb</code> 文件 <em><strong><font color="red">拷贝替换</font></strong></em> <code>SuperMap iObjects C++</code> 安装目录（<em>如：C:\SuperMap\supermap-iobjectscpp-10.2.1-20428-92245-win-all\bin\bind_x64</em>）中的对应文件。</font></p> </li></ol> 
<h2><a id="_Visual_Studio_2019__Qt__60"></a>五、通过 Visual Studio 2019 新建 Qt 项目并配置开发环境</h2> 
<p>  由于准备开发环境时已经为 <code>Visual Studio 2019</code> 安装了 <code>Qt</code> 插件，现在直接按以下步骤通过 <code>Visual Studio 2019</code> 新建 <code>Qt</code> 项目并配置开发环境即可：</p> 
<ol><li> <p><font size="4">新建 <strong>Qt Widgets Application</strong> 桌面应用项目；</font><img src="https://images2.imgbox.com/ef/82/Uh0SxysF_o.png" alt="新建 Qt 桌面应用项目"><br> <img src="https://images2.imgbox.com/fb/0e/ag3mOyU2_o.png" alt=" 项目创建页面"></p> </li><li> <p><font size="4">鼠标右键打开新建 <code>Qt</code> 桌面应用项目 <strong>属性</strong> 面板，选择 <strong>C/C++</strong> 环境配置，进行 <em><strong>附加包含目录</strong></em> 配置，如下图所示：</font><img src="https://images2.imgbox.com/a6/61/YAkZiVjG_o.png" alt="C/C++项目属性》附加包含目录"><br> <font size="4">配置以下路径<font color="red"><em>（具体路径根据本机安装路径进行调整）</em></font></font></p> <pre><code>C:\SuperMap\supermap-iobjectscpp-10.2.1-20428-92245-win-all\include
C:\SuperMap\supermap-iobjectscpp-10.2.1-20428-92245-win-all\include\private
C:\SuperMap\supermap-iobjectscpp-10.2.1-20428-92245-win-all\sample\extensions4Qt
</code></pre> </li></ol> 
<p><img src="https://images2.imgbox.com/2a/f0/cTC2o6Cj_o.png" alt="C/C++项目属性》附加包含目录配置"></p> 
<ol start="3"><li> <p><font size="4">配置 <strong>C/C++预处理器</strong> 环境</font><br> 在 <strong>预处理器定义</strong> 中添加 <em><strong>_UGUNICODE</strong></em> 标记，如下图所示：<img src="https://images2.imgbox.com/0b/de/RreoWshR_o.png" alt="C/C++预处理器定义配置"></p> </li><li> <p><font size="4">鼠标右键打开新建 <code>Qt</code> 桌面应用项目 <strong>属性</strong> 面板，选择 <strong>链接器</strong> 环境配置，进行 <em><strong>附加库目录</strong></em> 配置，如下图所示：</font><br> <img src="https://images2.imgbox.com/03/71/SJmm9c49_o.png" alt="链接器目录"> <br> <font size="4">配置以下路径<font color="red"><em>（具体路径根据本机安装路径进行调整）</em></font></font></p> <pre><code>C:\SuperMap\supermap-iobjectscpp-10.2.1-20428-92245-win-all\lib\libd_x64
C:\SuperMap\supermap-iobjectscpp-10.2.1-20428-92245-win-all\sample\debug\x64
</code></pre> </li></ol> 
<p><img src="https://images2.imgbox.com/11/73/XKg5REIE_o.png" alt="在这里插入图片描述"></p> 
<ol start="5"><li><font size="4">配置 <strong>链接器》输入》附加依赖项</strong></font><br> 在 <strong>链接器》输入》附加依赖项</strong> 中输入以下内容进行配置<pre><code>Extensions4Qt.lib
SuSRDBCId.lib
SuStreamd.lib
SuSymbold.lib
SuSymbolExchanged.lib
SuSymbolMarker3Dd.lib
SuTheme3DBased.lib
SuTileStoraged.lib
SuToolkit3Dd.lib
SuToolkitd.lib
SuToolkitPointCloudd.lib
SuTopoBased.lib
SuTopoBuilderd.lib
SuVRDevicesd.lib
SuWorkspaced.lib
SuWrapc.lib
SuAlgorithm3Dd.lib
SuAlgorithmd.lib
SuAllocationd.lib
SuAnalyst3Dd.lib
SuAnimationd.lib
SuBase3Dd.lib
SuBased.lib
SuBGDataCompilerd.lib
SuBPlusTreed.lib
SuCacheBuilder3Dd.lib
SuCacheBuilderd.lib
SuCacheFiled.lib
SuChartBased.lib
SuChartToolkitd.lib
SuCompactFiled.lib
SuCVToolkitd.lib
SuDataCheckd.lib
SuDataExchanged.lib
SuDB2CId.lib
SuDCPackagerd.lib
SuDCToolkitsd.lib
SuDrawing3Dd.lib
SuDrawingd.lib
SuDrawingLayoutd.lib
SuDRDSCId.lib
SuElementd.lib
SuEngineBaiduMapsd.lib
SuEngineBingMapsd.lib
SuEngined.lib
SuEngineDB2d.lib
SuEngineDRDSd.lib
SuEngineESd.lib
SuEngineExtendFiled.lib
SuEngineGanosd.lib
SuEngineGaoDeMapsd.lib
SuEngineGoogleMapsd.lib
SuEngineGPd.lib
SuEngineImagePlugind.lib
SuEngineMySQLd.lib
SuEngineODBCd.lib
SuEngineOGCd.lib
SuEngineOGDCd.lib
SuEngineOpenStreetMapsd.lib
SuEngineOracled.lib
SuEnginePGd.lib
SuEnginePGisd.lib
SuEngineRestd.lib
SuEngineSCVd.lib
SuEngineSDEd.lib
SuEngineSMCloudd.lib
SuEngineSQLPLUSd.lib
SuEngineSRDBd.lib
SuEngineSspd.lib
SuEngineUDBd.lib
SuEngineXYZTiled.lib
SuFileParser3DModeld.lib
SuFileParser3dsd.lib
SuFileParserAcadd.lib
SuFileParserBitMapd.lib
SuFileParserCSVd.lib
SuFileParserd.lib
SuFileParserDEMd.lib
SuFileParserDGNd.lib
SuFileParserE00d.lib
SuFileParserENCd.lib
SuFileParserFMEd.lib
SuFileParserGDALd.lib
SuFileParserGEOJSONd.lib
SuFileParserGJBd.lib
SuFileParserGLTFd.lib
SuFileParserKMLd.lib
SuFileParserLidard.lib
SuFileParserMAPGISd.lib
SuFileParserMitabd.lib
SuFileParserNetCDFd.lib
SuFileParserOGRd.lib
SuFileParserOrangeTabd.lib
SuFileParserOSMd.lib
SuFileParserPGDBVd.lib
SuFileParserPointCloudd.lib
SuFileParserRAWd.lib
SuFileParserS3MBd.lib
SuFileParserSCVd.lib
SuFileParserSGMd.lib
SuFileParserSimpleJsond.lib
SuFileParserTEMSd.lib
SuFileParserVCTd.lib
SuFMELicensed.lib
SuGeneralizationd.lib
SuGeoCoded.lib
SuGeometricNetworkd.lib
SuGeometry3Dd.lib
SuGeometryCADd.lib
SuGeometryConverterd.lib
SuGeometryd.lib
SuGeometryLayoutd.lib
SuGeometryPlotd.lib
SuGeoOperation3Dd.lib
SuGeoOperationd.lib
SuGraphics3Dd.lib
SuGraphics3DGameEngined.lib
SuGraphics3DOGREd.lib
SuGraphicsd.lib
SuGraphicsPDFd.lib
SuGraphicsPSd.lib
SuGraphicsWd.lib
SuGridAnalystd.lib
SuGridAnalystOpenCLd.lib
SuGridModelingd.lib
SuKDBCId.lib
SuLayer3DDatasetd.lib
SuLayer3DFiled.lib
SuLayer3DMapd.lib
SuLayer3DTreed.lib
SuLayoutEditord.lib
SuLinearReferenced.lib
SuLogisticsd.lib
SuMapd.lib
SuMapEditord.lib
SuMapMatchingd.lib
SuMapServiceStubd.lib
SuMGAnimationExpd.lib
SuMGAuxiliaryPlottingd.lib
SuMGCommond.lib
SuMGMapDatad.lib
SuMGMovingTargetd.lib
SuMGObjectsd.lib
SuMGSituationd.lib
SuMGSituationMonitord.lib
SuMGSituationPlottingd.lib
SuMGSituationSimulationd.lib
SuMongoCId.lib
SuMosaicd.lib
SuMosaicGDALd.lib
SuMosaicOpenCVd.lib
SuMySQLCId.lib
SuNetToolkitd.lib
SuNetworkBuilderd.lib
SuNetworkEnvironmentd.lib
SuNTopoDataCompilerd.lib
SuNTopoIndexTreed.lib
SuODBCCId.lib
SuOGCParserd.lib
SuOGDCd.lib
SuOracleCId.lib
SuOverlayd.lib
SuParticleSystemd.lib
SuPathAnalystCHd.lib
SuPathAnalystd.lib
SuPathNavid.lib
SuPluginArcgisMapCached.lib
SuPluginCommond.lib
SuPluginGECached.lib
SuPluginGlobalCached.lib
SuPluginGridCached.lib
SuPluginMapCache50d.lib
SuPluginMapCached.lib
SuPluginWebCached.lib
SuPostgreSQLCId.lib
SuProjectiond.lib
SuProjectionProjd.lib
SuProjectionWKTd.lib
SuProximityd.lib
SuPublicTransportd.lib
SuRectifyd.lib
SuRenderd.lib
SuRepresentationd.lib
SuRStarTreed.lib
SuScened.lib
SuSceneEditord.lib
SuSDECId.lib
SuSpatialIndexd.lib
SuSpatialQueryd.lib
SuSQLiteCId.lib
</code></pre> </li></ol> 
<p><img src="https://images2.imgbox.com/34/53/UQ3wOOvH_o.png" alt="链接器》输入》附加依赖项配置"></p> 
<ol start="6"><li><font size="4">鼠标右键打开新建 <code>Qt</code> 桌面应用项目 <strong>属性</strong> 面板，选择 <strong>生成事件》生成后事件</strong> ，进行 <em><strong>命令行</strong></em> 配置，如下图所示：</font><br> 在 <strong>命令行</strong> 中输入以下内容<font color="red"><em>（具体路径根据本机安装路径进行调整）</em></font><pre><code>if not exist "$(SolutionDir)$(PlatformName)\$(Configuration)\VERSION" (xcopy /r /y C:\SuperMap\supermap-iobjectscpp-10.2.1-20428-92245-win-all\bin\bind_x64\ $(SolutionDir)$(PlatformName)\$(Configuration)\ /s)
</code></pre> </li></ol> 
<p><img src="https://images2.imgbox.com/54/18/vM6g9yXt_o.png" alt="生成后事件配置"></p> 
<pre><code>&lt;font color=red&gt; **注意：** *此处也可以不配置 **生成事件**；若不配置生成事件将程序运行环境复制到输出目录的话，则需要修改项目编译输出目录为 `SuperMap iObjects C++` 运行环境安装目录（此操作存在潜在损坏运行环境的潜在风险，建议配置 **生成事件**）！！！* &lt;/font&gt;
</code></pre> 
<p>  <font color="red" size="4"><em>至此已完成 <code>SuperMap iObject C++ 10i (10.2.0及以上版本)</code> 在 <code>Visual Studio 2019</code> + <code>Qt</code> 桌面应用项目的所有开发环境参数配置，下面可以开始项目编码。</em></font></p> 
<hr> 
<h2><a id="_297"></a>六、编码</h2> 
<ul><li> <p><strong>C++ 头文件编码 <em>（CSuperMapiDesktopForCPP.h）</em></strong></p> <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QtWidgets/QMainWindow&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_CSuperMapiDesktopForCPP.h"</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Workspace/UGWorkspace.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Map/UGMap.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"qmapcontrol.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"translator.h"</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> UGC<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CSuperMapiDesktopForCPP</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QMainWindow</span></span>
<span class="token punctuation">{<!-- --></span>
	Q_OBJECT

<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">CSuperMapiDesktopForCPP</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> Q_NULLPTR<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	Ui<span class="token operator">::</span>CSuperMapiDesktopForCPPClass ui<span class="token punctuation">;</span>
	UGWorkspace<span class="token operator">*</span> workspace<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> </li><li> <p><strong>C++ 源文件编码 <em>（CSuperMapiDesktopForCPP.cpp）</em></strong></p> <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CSuperMapiDesktopForCPP.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"stdafx.h"</span></span>

<span class="token class-name">CSuperMapiDesktopForCPP</span><span class="token operator">::</span><span class="token function">CSuperMapiDesktopForCPP</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token punctuation">.</span><span class="token function">setupUi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    workspace <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">UGWorkspace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	QString workpsaceFilePath <span class="token operator">=</span> <span class="token class-name">QFileDialog</span><span class="token operator">::</span><span class="token function">getOpenFileName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">QString</span><span class="token operator">::</span><span class="token function">fromLocal8Bit</span><span class="token punctuation">(</span><span class="token string">"打开工作空间"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">QString</span><span class="token operator">::</span><span class="token function">fromLocal8Bit</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">QString</span><span class="token operator">::</span><span class="token function">fromLocal8Bit</span><span class="token punctuation">(</span><span class="token string">"工作空间文件 (*.smwu *.sxwu)"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>workpsaceFilePath <span class="token operator">!=</span> <span class="token constant">NULL</span> <span class="token operator">&amp;&amp;</span> <span class="token class-name">QFileInfo</span><span class="token operator">::</span><span class="token function">exists</span><span class="token punctuation">(</span>workpsaceFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>workspace<span class="token operator">-&gt;</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token class-name">Translator</span><span class="token operator">::</span><span class="token function">QStr2UGStr</span><span class="token punctuation">(</span>workpsaceFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			UGString mapName <span class="token operator">=</span> workspace<span class="token operator">-&gt;</span>m_MapStorages<span class="token punctuation">.</span><span class="token function">GetNameAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			ui<span class="token punctuation">.</span>centralWidget<span class="token operator">-&gt;</span><span class="token function">setSizePolicy</span><span class="token punctuation">(</span>QSizePolicy<span class="token operator">::</span>Maximum<span class="token punctuation">,</span> QSizePolicy<span class="token operator">::</span>Maximum<span class="token punctuation">)</span><span class="token punctuation">;</span>
			QHBoxLayout<span class="token operator">*</span> layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QHBoxLayout</span><span class="token punctuation">(</span>ui<span class="token punctuation">.</span>centralWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
			QMapControl<span class="token operator">*</span> mapControl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QMapControl</span><span class="token punctuation">(</span>workspace<span class="token punctuation">)</span><span class="token punctuation">;</span>
			layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>mapControl<span class="token punctuation">)</span><span class="token punctuation">;</span>

			UGMap<span class="token operator">*</span> map <span class="token operator">=</span> mapControl<span class="token operator">-&gt;</span><span class="token function">GetMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			map<span class="token operator">-&gt;</span><span class="token function">Open</span><span class="token punctuation">(</span>mapName<span class="token punctuation">)</span><span class="token punctuation">;</span>
			mapControl<span class="token operator">-&gt;</span><span class="token function">Refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li></ul> 
<h2><a id="_358"></a>七、运行结果</h2> 
<p><img src="https://images2.imgbox.com/ef/2f/KUaVxnB1_o.gif" alt="SuperMap iObjects C++ Qt 桌面应用项目运行结果"></p> 
<hr> 
<h2><a id="_364"></a>总结</h2> 
<p>  由于配置 <code>SuperMap iObjects C++</code> 在 <code>Visual Studio 2019</code> 和 <code>Qt</code> 开发环境较复杂，以下对重要步骤以及开发环境配置流程中可能存在的坑进行复盘，以免重复踩坑。</p> 
<ol><li> <p><code>SuperMap iObjects C++ 10i (10.2.0及以上版本)</code> 进行了结构上的更新，与 <code>Qt</code> 绑定更加紧密，SDK依赖了 <code>Qt</code> 平台插件，所以在根据本机安装的 <code>Qt</code> 版本对 <code>SuperMap iObjects C++</code> 运行环境库进行更新的时候，一定要更新 <em><strong>plugins\platforms</strong></em> 中的 <code>Qt</code> 平台插件。</p> </li><li> <p>若要使用 <code>SuperMap iObjects C++</code> 组件中自带的 <em><strong>QMapControl</strong></em> 控件用于显示地图，务必要根据本机安装的 <code>Qt</code> 版本对 <em><strong>Extensions4Qt</strong></em> 项目进行重新编译，避免因 <code>Qt</code> 版本不兼容造成的编译异常。</p> </li><li> <p>目前 <code>SuperMap iObjects C++</code> 仅适配 <code>Qt 5.6</code> 及以上版本，暂未适配 <code>Qt 6.x</code> 系列产品，不建议使用 <code>Qt 6.x</code> 版本进行开发。</p> </li><li> <p>建议在 <code>Visual Studio 2019</code> 创建的 <code>Qt</code> 项目中配置 <em><strong>生成事件</strong></em> 命令！若不配置，则需要修改项目编译输出路径到 <code>SuperMap iObjects C++</code> 安装包中的开发环境目录内才可正常运行 <em>（此操作存在潜在损坏运行环境的潜在风险，不建议修改项目编译输出路径）</em>。</p> </li></ol>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/00302df68a251b5bc68a8954f8ff543c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">windows10系统如何解决“管理员已阻止你运行此应用“</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/919564f8872c793aff18e911f08032f6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JavaAndroid（3、创建第一个Android应用）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>