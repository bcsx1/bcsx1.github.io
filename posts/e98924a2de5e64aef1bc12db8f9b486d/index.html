<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SuperMap许可常见问题及解决办法 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SuperMap许可常见问题及解决办法" />
<meta property="og:description" content="作者：lly
SuperMap许可常见问题及解决办法 在使用许可的过程中，大家可能会遇到的各种问题，本文从许可的申请、使用、异常处理三个方面
给大家逐一介绍。
文章目录 SuperMap许可常见问题及解决办法一.试用许可申请二.试用许可生效2.1 Windows下试用许可生效2.2 Linux下试用许可生效2.3 Docker下试用许可生效 三.试用许可常见问题3.1 Windows下试用许可更新失败3.2 Linux下试用许可更新失败 四.正式许可常见问题4.1 Windows下网络锁读取不到4.2 Linux下网络锁读取不到4.3 Docker读取硬件网络锁配置及常见问题4.4 许可模块读取不全4.5 lic9D正式文件锁检测 五.Web许可中心常见问题5.1 Web许可中心如何开启https5.2 如何部署Web许可中心War包5.3 如何连接War包部署Web许可中心 六.驱动常见问题6.1 Windows安装驱动的报错中包含一系列数字，或提示内部错误6.2 Linux中更新许可提示【hasp_feature_expired】6.3 Windows安装驱动报error: -536870329 七.注意事项7.1 切换许可模式7.2 查询正确MAC地址7.3 Linux重启许可服务7.4 查看Linux CPU逻辑核数7.5 Linux生成report文件7.6 其它 一.试用许可申请 可以直接在北京超图软件股份有限公司官网的“SuperMap 技术资源中心”申请试用许可，申请后您将获得：
1.如果申请的是 Web型许可，您将获得 一个 .licc 格式的许可文件
2.如果申请的是 SuperMap GIS 10i&amp;9D 系列产品的许可，您将获得 一个 .lic9d 格式的许可文件
3.如果申请的是 SuperMap GIS 11i 系列产品的许可，您将获得 一个 .licx 格式的许可文件
二.试用许可生效 2.1 Windows下试用许可生效 您可以通过以下两种方式使申请的试用许可生效
方式一：许可中心更新
首次打开 SuperMap 许可中心，该程序会自动安装依赖的驱动，并默认安装一个90天的试用软许可。若是才申请的许可，则可通过在 SuperMap 许可中心，打开“激活更新”页，浏览并选择您获得的许可文件，然后，单击“更新”按钮，即可使许可生效。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/e98924a2de5e64aef1bc12db8f9b486d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-13T15:25:09+08:00" />
<meta property="article:modified_time" content="2023-12-13T15:25:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SuperMap许可常见问题及解决办法</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>作者：lly</p> 
</blockquote> 
<h2><a id="SuperMap_2"></a>SuperMap许可常见问题及解决办法</h2> 
<p>在使用许可的过程中，大家可能会遇到的各种问题，本文从许可的申请、使用、异常处理三个方面<br> 给大家逐一介绍。<br> </p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#SuperMap_2" rel="nofollow">SuperMap许可常见问题及解决办法</a></li><li><ul><li><a href="#_7" rel="nofollow">一.试用许可申请</a></li><li><a href="#_15" rel="nofollow">二.试用许可生效</a></li><li><ul><li><a href="#21_Windows_17" rel="nofollow">2.1 Windows下试用许可生效</a></li><li><a href="#22_Linux_28" rel="nofollow">2.2 Linux下试用许可生效</a></li><li><a href="#23_Docker_36" rel="nofollow">2.3 Docker下试用许可生效</a></li></ul> 
   </li><li><a href="#_55" rel="nofollow">三.试用许可常见问题</a></li><li><ul><li><a href="#31_Windows_56" rel="nofollow">3.1 Windows下试用许可更新失败</a></li><li><a href="#32_Linux_61" rel="nofollow">3.2 Linux下试用许可更新失败</a></li></ul> 
   </li><li><a href="#_97" rel="nofollow">四.正式许可常见问题</a></li><li><ul><li><a href="#41_Windows_98" rel="nofollow">4.1 Windows下网络锁读取不到</a></li><li><a href="#42_Linux_106" rel="nofollow">4.2 Linux下网络锁读取不到</a></li><li><a href="#43_Docker_120" rel="nofollow">4.3 Docker读取硬件网络锁配置及常见问题</a></li><li><a href="#44__148" rel="nofollow">4.4 许可模块读取不全</a></li><li><a href="#45_lic9D_156" rel="nofollow">4.5 lic9D正式文件锁检测</a></li></ul> 
   </li><li><a href="#Web_164" rel="nofollow">五.Web许可中心常见问题</a></li><li><ul><li><a href="#51_Webhttps_165" rel="nofollow">5.1 Web许可中心如何开启https</a></li><li><a href="#52_WebWar_188" rel="nofollow">5.2 如何部署Web许可中心War包</a></li><li><a href="#53_WarWeb_218" rel="nofollow">5.3 如何连接War包部署Web许可中心</a></li></ul> 
   </li><li><a href="#_226" rel="nofollow">六.驱动常见问题</a></li><li><ul><li><a href="#61_Windows_227" rel="nofollow">6.1 Windows安装驱动的报错中包含一系列数字，或提示内部错误</a></li><li><a href="#62_Linuxhasp_feature_expired_250" rel="nofollow">6.2 Linux中更新许可提示【hasp_feature_expired】</a></li><li><a href="#63_Windowserror_536870329_255" rel="nofollow">6.3 Windows安装驱动报error: -536870329</a></li></ul> 
   </li><li><a href="#_268" rel="nofollow">七.注意事项</a></li><li><ul><li><a href="#71__269" rel="nofollow">7.1 切换许可模式</a></li><li><a href="#72_MAC_272" rel="nofollow">7.2 查询正确MAC地址</a></li><li><a href="#73_Linux_286" rel="nofollow">7.3 Linux重启许可服务</a></li><li><a href="#74_Linux_CPU_299" rel="nofollow">7.4 查看Linux CPU逻辑核数</a></li><li><a href="#75_Linuxreport_316" rel="nofollow">7.5 Linux生成report文件</a></li><li><a href="#76__330" rel="nofollow">7.6 其它</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_7"></a>一.试用许可申请</h3> 
<p>可以直接在北京超图软件股份有限公司官网的“SuperMap 技术资源中心”申请试用许可，申请后您将获得：<br> 1.如果申请的是 Web型许可，您将获得 一个 <strong>.licc</strong> 格式的许可文件<br> 2.如果申请的是 SuperMap GIS 10i&amp;9D 系列产品的许可，您将获得 一个 <strong>.lic9d</strong> 格式的许可文件<br> 3.如果申请的是 SuperMap GIS 11i 系列产品的许可，您将获得 一个 <strong>.licx</strong> 格式的许可文件</p> 
<h3><a id="_15"></a>二.试用许可生效</h3> 
<h4><a id="21_Windows_17"></a>2.1 Windows下试用许可生效</h4> 
<p>您可以通过以下两种方式使申请的试用许可生效</p> 
<p><strong>方式一：许可中心更新</strong><br> 首次打开 SuperMap 许可中心，该程序会自动安装依赖的驱动，并默认安装一个90天的试用软许可。若是才申请的许可，则可通过在 SuperMap 许可中心，打开“激活更新”页，浏览并选择您获得的许可文件，然后，单击“更新”按钮，即可使许可生效。</p> 
<p>SuperMap 许可中心以多种形式提供，您可以通过帮助文档搜索<strong>部署 SuperMap 许可中心</strong>获取安装方式。</p> 
<p><strong>方式二：放在C:\Program Files\Common Files\SuperMap\License目录下即可</strong></p> 
<h4><a id="22_Linux_28"></a>2.2 Linux下试用许可生效</h4> 
<p>您可以通过以下两种方式使申请的试用许可生效：<br> <strong>方式一：</strong> 将获得的试用许可文件放在操作系统的opt目录下，具体为：/opt/SuperMap/License/请注意为该目录授予读写权限。系统会自动使用该目录的许可文件，无须其他配置。<br> <strong>方式二：</strong> 进入 supermap_iserver_*_linux64 的根目录，将您获得的试用许可文件指定到文件位置，执行如下命令（确认已安装驱动，驱动安装方法在下文提供）：</p> 
<pre><code class="prism language-command">./licensetool.sh -update /路径名/*.lic9d
</code></pre> 
<h4><a id="23_Docker_36"></a>2.3 Docker下试用许可生效</h4> 
<p>1.首先进入容器内，通过hostname方式获取容器内机器名，去官网申请试用许可</p> 
<pre><code>docker exec -it 容器ID /bin/bash
</code></pre> 
<p>2.将申请的试用许可从宿主机拷贝到容器指定目录中</p> 
<pre><code class="prism language-command">//docker cp 要拷贝的文件路径 容器名：固定路径
docker cp a0287f73eb7f-20201203.lic9d a0287f73eb7f:/opt/SuperMap/License/
</code></pre> 
<p>3.重启容器</p> 
<pre><code>docker restart a0287f73eb7f
</code></pre> 
<h3><a id="_55"></a>三.试用许可常见问题</h3> 
<h4><a id="31_Windows_56"></a>3.1 Windows下试用许可更新失败</h4> 
<p>首先打开许可中心，点击许可状态，查看是否有过期的试用许可，如下图：<br> <img src="https://images2.imgbox.com/76/1f/e1RnPDLr_o.png" alt="在这里插入图片描述"></p> 
<p>若有过期许可，前往<strong>C:\Program Files\Common Files\SuperMap\License</strong>下删除所有文件,再将新申请许可文件放入license文件下，重启许可服务,若是发现删除掉license文件下的文件后，还有过期的试用许可，则去<strong>C:\Program Files (x86)\Common Files\SafeNet Sentinel\Sentinel LDK\installed\99235</strong>下删除掉所有v2c文件。</p> 
<h4><a id="32_Linux_61"></a>3.2 Linux下试用许可更新失败</h4> 
<p>首先确认已安装许可驱动与依赖库，依赖库的安装如下:<br> <img src="https://images2.imgbox.com/80/52/0VIIdCAD_o.png" alt="在这里插入图片描述"><br> 脚本安装依赖库的过程中，可能会出现<strong>缺少32位库</strong>的错误，如下图：<br> <img src="https://images2.imgbox.com/78/87/Zy1oTvcy_o.png" alt="在这里插入图片描述"><br> 这时则可通过手动安装32位依赖库：</p> 
<pre><code class="prism language-安装指令">Ubuntu14下：
sudo apt-get install libc6-i386
sudo apt-get install ia32-libs

CentOS/redHat下：
sudo yum install libstdc++-devel.i686
sudo yum install glibc.i686
sudo yum install libgcc.i686
sudo yum install libstdc++.i686
sudo yum install glibc-devel.i686
</code></pre> 
<p>其它Linux版本的依赖库可以前往iServer帮助文档-》安装前配置-》手动安装依赖库查看</p> 
<p><strong>注</strong>：Linux版本应满足基本要求，在帮助文档-》软件要求-》查看,若是linux版本与要求的版本不同，则需自行查找命令安装相应的32位库，若为内网环境则可前往iServer\objectjava\bin目录，用以下命令查找缺失库，并手动安装</p> 
<pre><code class="prism language-安装指令">ldd libWrapj*.so |grep not
</code></pre> 
<p>依赖安装成功后，则需安装许可驱动,许可驱动安装方法如下图：<br> <img src="https://images2.imgbox.com/cc/1a/vyl552dC_o.png" alt="在这里插入图片描述"><br> 成功安装许可驱动后，前往iServer的根目录下，执行./licensetool.sh -s查看许可状态，如下图：<br> <img src="https://images2.imgbox.com/02/97/ODQHfeGK_o.png" alt="在这里插入图片描述"></p> 
<p>若是许可状态中有已过期的许可，前往<strong>opt/SuperMap/License</strong>目录下，找到已过期的许可文件删掉，或者全部删除，放入新申请的许可，再次使用./licensetool.sh -s查看许可状态，若还是有过期许可，则去 <strong>/var/hasplm/installed/99235</strong>目录下删除v2c文件并重装许可驱动，<br> 重装许可方法如下：<br> <img src="https://images2.imgbox.com/e8/d6/BVsGDJWY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_97"></a>四.正式许可常见问题</h3> 
<h4><a id="41_Windows_98"></a>4.1 Windows下网络锁读取不到</h4> 
<p>1.首先检查是否已安装许可驱动，未安装先安装许可驱动，安装方法不再赘述。<br> 2.插锁的服务器需要勾选允许网络计算机访问本机许可，如下图：<br> <img src="https://images2.imgbox.com/7d/b6/NpF6zSKc_o.png" alt="在这里插入图片描述"><br> 3.需要读取许可的客户端，需要勾选允许访问远程服务器的网络锁，同时若是要跨网段访问，还需添加插锁服务器的地址，如下图：<br> <img src="https://images2.imgbox.com/a4/28/yuparVU1_o.png" alt="在这里插入图片描述"><br> 4.打开Windows上的许可中心，查看许可状态，若发现读取的是试用许可（无论是否过期），则参照上面的试用许可更新失败的处理方法，删掉相应的文件，若是读取的是正式许可，则检查是否许可被占用，若是被占用，前往插锁的机器，打开许可中心设置查看最近连接的计算机，禁止占用的计算机，然后重新启动许可中心即可，如下图：<br> <img src="https://images2.imgbox.com/31/98/WqDbk4U9_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="42_Linux_106"></a>4.2 Linux下网络锁读取不到</h4> 
<p>1.首先检查驱动是否安装，安装方法参考上文所述。<br> 2.使用1947端口查看许可状态，若是有图形化界面可访问localhost:1947页面来查看，远程访问则将localhost换成对应的ip,并且打开允许ACC远程访问，ACC开启方法如下：<br> （1）前往在Windows下有许可中心的机器，访问localhost：1947然后勾选allow remote access to ACC即可，如下图：<br> <img src="https://images2.imgbox.com/33/b3/4dJKmdTD_o.png" alt="在这里插入图片描述"><br> （2）然后前往<strong>C:\Program Files (x86)\Common Files\Aladdin Shared\HASP</strong>下找到<strong>hasplm.ini</strong>配置文件，打开文件将name修改为对应的Linux的主机名，如下：<br> <img src="https://images2.imgbox.com/20/af/9VxjWBZM_o.png" alt="在这里插入图片描述"><br> （3）修改完后将文件放到Linux下\etc\hasplm中就可以通过ip访问1947了（需关闭Linux防火墙）。<br> 3.访问到需要读取许可机器的许可中心后，查看是否有试用许可，有的话按照之前的方法清除掉<br> <img src="https://images2.imgbox.com/60/6f/Qmi2JgLX_o.png" alt="在这里插入图片描述"><br> 4.若是没有试用许可，并且读取不到正式许可，则先去许可中心，查看是否开启了允许访问远程授权，跨网段还需添加上服务器ip地址（<strong>若有中间代理服务器，须填写插锁机器ip，而非代理服务器ip</strong>），如下图：<br> <img src="https://images2.imgbox.com/aa/c2/gfZ42ofP_o.png" alt="在这里插入图片描述"><br> 5.若开启了授权还是读取不到正式许可，则前往插锁机器的许可中心，查看是否开启了允许从远程客户端访问，并且查看是否被占用，若有占用则前往配置-》从远程客户端访问，点击显示最近的客户端访问，拒绝掉占用的机器，然后提交即可，如图：<br> <img src="https://images2.imgbox.com/b0/4e/6seSryWY_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="43_Docker_120"></a>4.3 Docker读取硬件网络锁配置及常见问题</h4> 
<p>1.如果宿主机是物理机可以使用硬件网络锁，同时打开端口1947</p> 
<pre><code>docker run -ti -d --name iserver -p 192.168.12.94:8090:8090 -p 192.168.12.94:1948:1947  supermap/iserver
</code></pre> 
<p>2.参考<strong>Linux下网络锁读取不到</strong>所说方法，将<strong>hasplm.ini</strong>文件拷贝到容器中，提前将配置文件中相应选项配置好</p> 
<pre><code>docker cp hasplm.ini b0d2bfaa7062:/etc/hasplm/
</code></pre> 
<p>3.重启容器</p> 
<pre><code>docker restart b0d2bfaa7062
</code></pre> 
<p><strong>可能出现的问题：</strong><br> Docker容器内iServer无法正确读取到许可，debug查询许可状态码为42<br> <img src="https://images2.imgbox.com/f8/e7/cvC14oW2_o.png" alt="在这里插入图片描述"><br> 解决办法：<br> <img src="https://images2.imgbox.com/f3/d4/rbvWN1Wy_o.png" alt="在这里插入图片描述"><br> 状态码42解释如上图，这里的LM too old是相对于程序所用的Runtime API库的版本来说的，我们要求RTE版本不能低于Runtime API库的版本，因此需要升级插锁机器的许可驱动。<br> Windows驱动<br> 链接：https://pan.baidu.com/s/1n69Pd8uAqkvKVb9qJL43LQ?pwd=ovef<br> 提取码：ovef<br> Linux驱动可尝试下载最新版iServer，安装包内自带驱动。</p> 
<p><strong>注：Docker容器使用MAC地址申请正式许可，需要进入容器内部使用./licensetool.sh -cardid获取</strong></p> 
<h4><a id="44__148"></a>4.4 许可模块读取不全</h4> 
<p>1.首先检查是否有占用，有占用则先拒绝占用的机器访问<br> 2.发现未被占用，但是iServer读取模块不全，则去删除iServer安装目录下<strong>webapps\iserver\WEB-INF下iserver-system.xml</strong>中删除&lt; license &gt; 节点内的内容，然后重启iServer，重新配置即可（Linux下操作与Windows相同）<br> 3.若是重新配置还是读取不到，则手动在节点下添加许可模块，如下图：<br> <img src="https://images2.imgbox.com/ab/3d/FfcjEXk7_o.png" alt="在这里插入图片描述"><br> 注：按核扩展模块的名称为在原扩展模块名称后加上核数信息，如机器学习服务(16核)扩展模块的名称为’MACHINE_LEARNING_SERVICE_16CORES’、机器学习服务(32核)扩展模块的名称为‘MACHINE_LEARNING_SERVICE_32CORES’<br> 4.对于子节点还需添加主节点地址，如下图：<br> <img src="https://images2.imgbox.com/7e/2e/QM3GrrtL_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="45_lic9D_156"></a>4.5 lic9D正式文件锁检测</h4> 
<p>1.用编辑器打开lic9d锁文件，找到id<br> <img src="https://images2.imgbox.com/f7/66/e6QZXu4w_o.png" alt="在这里插入图片描述"><br> 2.进入objectjava\bin执行java -jar com.supermap.licensemanager.jar -debuglic id，如java -jar com.supermap.licensemanager.jar -debuglic 11002<br> <img src="https://images2.imgbox.com/96/7f/Ps8lLoxR_o.png" alt="在这里插入图片描述"><br> 3.查看上图状态码，若为5001~5011，则许可有问题，需要重出许可，若为0则代表许可已正确配置，产品可以直接使用，无需再做其它许可配置，4000状态码为未识别到许可文件。若已重出许可，检测仍为5005，服务器无中文，单位名称为中文，且encryptData为乱码，可以去掉许可文件中单位名称项，再配置许可。<br> <img src="https://images2.imgbox.com/87/04/s4NbzOe3_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Web_164"></a>五.Web许可中心常见问题</h3> 
<h4><a id="51_Webhttps_165"></a>5.1 Web许可中心如何开启https</h4> 
<p>首先，Web许可中心需要2.0.8以上版本,其次需要产品能支持连接wss协议的Web许可中心。<br> 1.Linux下开启https</p> 
<pre><code>1.首先需要关闭服务
2.打开配置文件supermap-bslicense-server/bin/application.properties，开启SSL，配置如下：server.ssl.enabled=true
3.保存文件再运行startup.sh文件
</code></pre> 
<p>2.Windows开启https</p> 
<pre><code>(1).首先需要关闭服务
(2).用记事本打开bin目录下的start.bat文件，修改https配置：
set ENABLE_HTTPS=true
(3).保存start.bat文件再启动
</code></pre> 
<p>3.iServer对接时，需要使用wss协议进行读取,目前需要10.2.1及以上版本</p> 
<pre><code>wss://127.0.0.1:9183
</code></pre> 
<p>注：桌面产品暂不支持对接</p> 
<h4><a id="52_WebWar_188"></a>5.2 如何部署Web许可中心War包</h4> 
<p>1.将supermap-bslicense-server-xxx-war.zip解压，把bslicense.war包放置在tomcat的webapps目录下<br> 2.若使用mysql数据库需配置以下环境变量</p> 
<pre><code>BSLICENSE_DB_URL=jdbc:mariadb://&lt;ip地址&gt;:&lt;端口&gt;/&lt;数据库名称&gt;?characterEncoding=utf8&amp;useSSL=false
BSLICENSE_DB_USERNAME=&lt;name&gt;
BSLICENSE_DB_PASSWORD=&lt;password&gt;
BSLICENSE_DB_DRIVER=org.mariadb.jdbc.Driver
BSLICENSE_DB_PLATFORM=org.hibernate.dialect.MySQL57Dialect
BSLICENSE_DB_TABLE=classpath:bslicense_table.sql
BSLICENSE_DB_DATA=classpath:bslicense_data.sql
</code></pre> 
<p>若使用内置数据库，则配置以下部署环境</p> 
<pre><code>BSLICENSE_DB_DRIVER=org.hsqldb.jdbc.JDBCDriver
BSLICENSE_DB_PLATFORM=org.hibernate.dialect.HSQLDialect
BSLICENSE_DB_URL=jdbc:hsqldb:file:&lt;tomcat的绝对地址&gt;/webapps/bslicense/WEB-INF/classes/db/bslicense
BSLICENSE_DB_USERNAME=sa
</code></pre> 
<p>3.bslicense只支持9183端口访问，需要修改tomcat启动端口为9183<br> 4.启动tomcat，使用浏览器访问http://:9183/bslicense进行配置</p> 
<p><strong>注意事项：</strong></p> 
<p>（1）在arm环境下，许可中心启动失败如何处理</p> 
<p>在arm环境中部署，可能会遇到环境变量识别不了的情况。在tomcat/webapps/bslicense/WEB-INF/classes目录下，将第2步配的环境变量直接配置在application.properties相对应的位置</p> 
<h4><a id="53_WarWeb_218"></a>5.3 如何连接War包部署Web许可中心</h4> 
<p>针对war包部署的许可中心，在进行连接时，许可中心地址需要增加一级bslicense</p> 
<pre><code>ws://许可中心的ip:9183/bslicense/
</code></pre> 
<p><img src="https://images2.imgbox.com/30/08/kmlU7qnA_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_226"></a>六.驱动常见问题</h3> 
<h4><a id="61_Windows_227"></a>6.1 Windows安装驱动的报错中包含一系列数字，或提示内部错误</h4> 
<p>1.运行cmd，输入命令进行驱动卸载：</p> 
<pre><code>"桌面安装目录\Tools\SuperMapLicenseCenter\Tools\SuperMap_Trial_License.exe" –purge

"桌面安装目录\Tools\SuperMapLicenseCenter\Tools\SuperMap_Trial_License.exe" –r
</code></pre> 
<p>2.重启电脑，输入命令进行驱动安装</p> 
<pre><code>"桌面安装目录\Tools\SuperMapLicenseCenter\Tools\SuperMap_Trial_License.exe" –i
</code></pre> 
<p>如果未能成功安装驱动，请使用下面步骤进行操作：<br> (1). 在控制面板中搜索【设备管理器】并打开；<br> (2). 在【查看】菜单中勾选【显示隐藏的设备】；<br> (3). 在设备管理器的主窗口中，可查看【非即插即用驱动程序】的节点，将其中的【hardlock】卸载；<br> (4). 重启电脑，输入命令进行驱动安装</p> 
<pre><code>"桌面安装目录\Tools\SuperMapLicenseCenter\Tools\SuperMap_Trial_License.exe" –i
</code></pre> 
<h4><a id="62_Linuxhasp_feature_expired_250"></a>6.2 Linux中更新许可提示【hasp_feature_expired】</h4> 
<p>1.下载最新版本；<br> 2.切换到Objects Java所在文件夹，对该目录赋予权限，语句为【chmod 777 目录 -R】；<br> 3.安装驱动，配置许可。</p> 
<h4><a id="63_Windowserror_536870329_255"></a>6.3 Windows安装驱动报error: -536870329</h4> 
<p><img src="https://images2.imgbox.com/9e/77/jmK8mIPx_o.png" alt="在这里插入图片描述"><br> 这是由于系统的微软根证书失效，找到同一版本操作系统的机器导出根证书，在问题机器先删除根证书，然后重新导入根证书，具体操作步骤为如下：<br> 1．找到一台与问题机器同一版本系统的机器，运行 “certmgr.msc”，右击 “Microsoft Root Certificate Authority”，选中“所有任务” -&gt; “导出”，之后都是默认选项点“继续”，最后保存文件命名为 “cert.cer”。</p> 
<p>2．在问题机器，运行 “certmgr.msc”，右击 “Microsoft Root Certificate Authority”，点击 “删除”。</p> 
<p>3． 将第一步保存的 cert.cer 文件拷贝到问题机器上，例如放到 C:\cert.cer。</p> 
<p>4．在问题机器上 C:\Windows\System32\WindowsPowerShell\v1.0 路径下以管理员身份运行 powershell.exe，输入命令 “Import-Certificate -FilePath “C:\cert.cer” -CertStoreLocation Cert:\LocalMachine\Root”。<br> <strong>请注意，根据实际存放位置修改命令语句中的文件路径。</strong></p> 
<p>5.安装驱动。</p> 
<h3><a id="_268"></a>七.注意事项</h3> 
<h4><a id="71__269"></a>7.1 切换许可模式</h4> 
<p>(1)针对10i iServer使用许可时，请先前往iServer安装目录下\webapps\iserver\WEB-INF\iserver-system.xml中删除licenseMode与license整个节点<br> <img src="https://images2.imgbox.com/ee/dc/hv1a3FD9_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="72_MAC_272"></a>7.2 查询正确MAC地址</h4> 
<p>(1)对于Linux申请正式文件许可，需确定MAC地址时，可在iServer根目录下执行以下指令，使用输出的第一个MAC地址即可</p> 
<pre><code>./licensetool.sh -cardid
</code></pre> 
<p>(2)Windows在组件bin目录下执行</p> 
<pre><code>java -jar com.supermap.licensemanager.jar -cardid
</code></pre> 
<p>注意：若机器存在Docker环境等，命令输出的第一个可能不是真实的MAC，可以搭配查询指令，来查找正确IP，常见网卡命名为eth0，enp0等<br> <img src="https://images2.imgbox.com/98/e1/drfC2rui_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="73_Linux_286"></a>7.3 Linux重启许可服务</h4> 
<p>(1)10.1.0之前Linux重启许可服务</p> 
<pre><code>cd /etc/init.d
sh aksusbd restart
</code></pre> 
<p>(2)10.1.0重启许可服务</p> 
<pre><code>service hasplmd restart
</code></pre> 
<h4><a id="74_Linux_CPU_299"></a>7.4 查看Linux CPU逻辑核数</h4> 
<p>1.可使用以下指令查询</p> 
<pre><code class="prism language-bash"><span class="token function">cat</span> /proc/cpuinfo<span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"processor"</span><span class="token operator">|</span> <span class="token function">wc</span> <span class="token parameter variable">-l</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/7a/19/Bu1xIrt2_o.png" alt="在这里插入图片描述"></p> 
<p>2.对于使用指令查询不到的机器，可以打包以下代码为jar包进行查询（<a href="https://download.csdn.net/download/supermapsupport/86244944">已经打好的jar下载地址</a>）</p> 
<pre><code class="prism language-bash"> public static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        System.out.println<span class="token punctuation">(</span><span class="token string">""</span>+Runtime.getRuntime<span class="token punctuation">(</span><span class="token punctuation">)</span>.availableProcessors<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>打包后使用java -jar xxx.jar执行,如下：<br> <img src="https://images2.imgbox.com/99/a1/8NyyrKZ8_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="75_Linuxreport_316"></a>7.5 Linux生成report文件</h4> 
<p>（1）使用licensetool脚本生成</p> 
<pre><code>./licensetool.sh -report /opt/test.report
</code></pre> 
<p>（2）使用java命令生成</p> 
<pre><code>//进入组件bin目录
cd supermap-iserver-10.1.3a-linux64-deploy/support/objectsjava/bin/
//执行命令
java -jar com.supermap.licensemanager.jar -report /opt/test.report
</code></pre> 
<h4><a id="76__330"></a>7.6 其它</h4> 
<p>(1)10.1.0 Linux生成c2v，需将java组件bin配置到环境变量 LD_LIBRARY_PATH中（检测许可同样适用，参数改为-s即可）</p> 
<pre><code>java -cp com.supermap.licensehasp.jar:com.supermap.licensemanager.jar  
com.supermap.LicenseRunner -create /路径名/*.c2v
</code></pre> 
<p>(2)10i版本配置用户及许可初始化页面一直loading，以下两种方案</p> 
<pre><code>1.更换浏览器，最好使用其它机器浏览器远程配置
2.使用以下地址配置：ip地址/iserver/_setup
</code></pre> 
<p>(3)Arm架构下LicenseTool能检测到锁，并且未被占用，iServer强制写入也读取不到</p> 
<pre><code>检查/usr/lib目录下是否有libHASPJava.so库文件，若没有将libHASPJava.so、
haspvlib_arm64_99235.so、haspvlib_armhf_99235.so拷贝到/usr/lib目录下，
并重启许可服务
下载地址：
链接：https://pan.baidu.com/s/1z_1s4KU4xy1CT4EH691nEQ 
提取码：n5oy 
</code></pre> 
<p>(4)Linux检查U口是否读到硬件锁，Aladdin即为硬件锁<br> <img src="https://images2.imgbox.com/b0/24/gUbJWOL6_o.png" alt="请添加图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/27ece3a12d484e8b0cbc3647e62c69db/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">颜色十六进制代码对照表</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/745eda4f45a5bee2dc438a55c79ca190/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">android : 省市区Json</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>