<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C语言数据结构小项目航班信息管理系统 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C语言数据结构小项目航班信息管理系统" />
<meta property="og:description" content="测试环境Ubuntu_1604_64bit
Makefile多文件联合编译工具，这个是写的很简单的一个Makefile了，编译直接make就行了,然后make clean 是清除目标文件重新编译的。
Makefile
hangban: gcc -o hangban main.c customer.h flight.h customer.c flight.c clean: rm hangban main 函数写的比较乱，最好的就是不要在main函数里写功能，把功能在写的函数里，main函数只调用函数，这样代码简洁明了，代码的可读性会高很多，由于这也是之前写的项目,基础不太好，也是在后来慢慢的学习过程中才改变习惯。
main.c
#include &#34;customer.h&#34; #include &#34;flight.h&#34; #include &lt;unistd.h&gt; int main(int argc, char const *argv[]) { node_t *list = create_ulist(); if (list == NULL) { perror(&#34;create_linklist failed\n&#34;); return -1; } // printf(&#34;list :%p\n&#34;,list); #if 1 nodef_t *head = create_clist(); if (head == NULL) { perror(&#34;create clist error\n&#34;); return -1; } flight_t flight[1000] = {&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/96b1eafa3176ef82f03a60c0cf8677b1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-09T20:29:26+08:00" />
<meta property="article:modified_time" content="2023-03-09T20:29:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C语言数据结构小项目航班信息管理系统</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>测试环境Ubuntu_1604_64bit</p> 
<p>Makefile多文件联合编译工具，这个是写的很简单的一个Makefile了，编译直接make就行了,然后make clean 是清除目标文件重新编译的。</p> 
<p>Makefile</p> 
<pre><code class="language-objectivec">hangban:
	gcc -o hangban main.c customer.h flight.h customer.c flight.c

clean:
	rm hangban
</code></pre> 
<p>main 函数写的比较乱，最好的就是不要在main函数里写功能，把功能在写的函数里，main函数只调用函数，这样代码简洁明了，代码的可读性会高很多，由于这也是之前写的项目,基础不太好，也是在后来慢慢的学习过程中才改变习惯。</p> 
<p>main.c</p> 
<pre><code class="language-objectivec">#include "customer.h"
#include "flight.h"
#include &lt;unistd.h&gt;

int main(int argc, char const *argv[])
{
    node_t *list = create_ulist();
    if (list == NULL)
    {
        perror("create_linklist failed\n");
        return -1;
    }
// printf("list :%p\n",list);
#if 1
    nodef_t *head = create_clist();
    if (head == NULL)
    {
        perror("create clist error\n");
        return -1;
    }

    flight_t flight[1000] = {"HB001", "长沙", "北京", 7, 9, 888, 50, 50, "HB002", "长沙", "广州", 8, 9, 588, 50, 48, "HB003", "长沙", "上海", 9, 11, 688, 60, 40, "HB004", "长沙", "西宁", 10, 14, 999, 40, 39, "HB005", "长沙", "南宁", 12, 13, 488, 70, 49};
    int i = 0;
    for (i = 0; i &lt; 5; i++)
    {
        insert_hclist(head, flight + i);
        putchar(10);
    }
        int num=0;
// 准备结构体变量 键盘的数据存储起来  并且 插入链表当中
#endif
    while (1)
    {
        
C:
        showjiemian1(); // 主界面
        num=0;
       
        scanf("%d", &amp;num);
        getchar();

        if (num == 1) // 注册账号
        {

            user_t user1 = {0};
            printf("请输入名字:");
            scanf("%s", user1.name);
            getchar();
            printf("\n");
            printf("请输入密码:");
            scanf("%d", &amp;user1.code);
            getchar();

            // 把数据存储进链表
            if (!insert_uhlist(list, user1))
            {
                // showlinklist(list);
                // 行缓冲 》 \n  程序结束  fflush 缓冲区满
                printf("注册成功请稍等\n");
                fflush(stdout);
                sleep(3);
                system("clear");
A:
                showjiemian1();
            }

            // 提示信息
            // 从键盘接受用户名 + 密码
            // 比对：findvlist;
        }

        scanf("%d", &amp;num);
        getchar();

        if (num == 2) // 普通用户登录
        {

            if (!usr_login(list))
            {
                printf("登录成功\n");
                printf("\n");
                system("clear");
                showjiemian3();
                while (1)
                {
                    int yonghu = 0; // 从键盘接收数字选择
                    scanf("%d", &amp;yonghu);
                    getchar();
#if 1
                    switch (yonghu)
                    {
                    case 1:
                        system("clear");
                        printf("请查看航班信息\n");
                        printf("\n");
                        printf("航班号  起点  终点  起飞时间  降落时间  航班票价  总票量  剩余票量\n");
                        print_clist(head);
                        showjiemian3();

                        break;

                    case 2:
                        printf("请输入终点地址\n"); // 根据终点查询航班
                        char zhongdian[200] = "";
                        scanf("%s", zhongdian);
                        getchar();
                        flight_t zhongdian2 = {0};
                        strcpy(zhongdian2.end, zhongdian);
                        nodef_t *temp1 = find_vclist(head, &amp;zhongdian2, cmpend);

                        if (temp1 != NULL)
                        {
                            system("clear");
                            printf("您查询的地点航班信息如下\n");
                            printf("\n");
                            printf("航班号  起点  终点  起飞时间  降落时间  航班票价  总票量  剩余票量\n");
                            printf("%s\t%s  %s\t%d\t%d\t%d\t  %d\t   %d\n", temp1-&gt;flightdata-&gt;id, temp1-&gt;flightdata-&gt;start, temp1-&gt;flightdata-&gt;end, temp1-&gt;flightdata-&gt;tmStart, temp1-&gt;flightdata-&gt;tmEnd, temp1-&gt;flightdata-&gt;price, temp1-&gt;flightdata-&gt;total, temp1-&gt;flightdata-&gt;left);
                            showjiemian3();
                        }

                        else
                        {
                            system("clear");
                            printf("没有相对应的航班\n");
                            printf("\n");
                            showjiemian3();
                        }
                        break;
                    case 3:
                    
                    
                        goto C;
                        case 4:
                        return 0;
                        

                    default:
                        printf("输入错误");
                        break;
                    }
                }
#endif
            }
            else
                printf("账号或密码输入错误\n");
                printf("\n");
            goto A;
        }

        while (1)
        {
            if (num == 3)
            {
                int a = 0;
                printf("请输入管理员密码：\n");
                scanf("%d", &amp;a);
                if (a == 1234)
                {
                    flight_t hangban1 = {0};
                    flight_t *flight4 = &amp;hangban1;
                    system("clear");
                B:
                    showjiemian2(); // 管理员界面
                    int guanli = 0;
                    int weizhi = 0;
                    flight_t hangban2 = {0};
                    flight_t *flight5 = &amp;hangban2;
                    scanf("%d", &amp;guanli);
                    getchar();
                    switch (guanli) // 输入数字选择选项
                    {
#if 1
                    case 1:
                        system("clear");
                        printf("请您查看航班信息\n");
                        printf("\n");
                        printf("航班号  起点  终点  起飞时间  降落时间  航班票价  总票量  剩余票量\n");
                        print_clist(head);
                        goto B;
                        break;
#endif
                    case 4: // 修改航班信息
                        system("clear");
                        printf("航班号  起点  终点  起飞时间  降落时间  航班票价  总票量  剩余票量\n");
                        print_clist(head);
                        printf("\n");
                        printf("请选择修改第几行航班信息\n");
                        printf("\n");
                        scanf("%d", &amp;weizhi);
                        getchar();
                        system("clear");
                        printf("请输入航班号:\n");
                        scanf("%s", flight5-&gt;id);
                        printf("\n");
                        printf("请输入起点:\n");
                        scanf("%s", flight5-&gt;start);
                        printf("\n");
                        printf("请输入终点:\n");
                        scanf("%s", flight5-&gt;end);
                        printf("\n");
                        printf("请输入起飞时间:\n");
                        scanf("%d", &amp;flight5-&gt;tmStart);
                        printf("\n");
                        printf("请输入到达时间:\n");
                        scanf("%d", &amp;flight5-&gt;tmEnd);
                        printf("\n");
                        printf("请输入航班票价:\n");
                        scanf("%d", &amp;flight5-&gt;price);
                        printf("\n");
                        printf("请输入总票量:\n");
                        scanf("%d", &amp;flight5-&gt;total);
                        printf("\n");
                        printf("请输入剩余票量:\n");
                        scanf("%d", &amp;flight5-&gt;left);
                        printf("\n");
                        if (!updata_ilist(head, weizhi, flight5))
                        {
                            system("clear");
                            printf("修改成功\n");
                            printf("\n");
                            printf("航班号  起点  终点  起飞时间  降落时间  航班票价  总票量  剩余票量\n");
                            show_clist(head, showall);
                        }
                        goto B;
                        break;
#if 1
                    case 2: // 增加航班信息

                        printf("请按顺序填写各项航班信息\n");
                        printf("\n");
                        printf("请输入航班号:\n");
                        scanf("%s", flight4-&gt;id);
                        printf("\n");
                        printf("请输入起点:\n");
                        scanf("%s", flight4-&gt;start);
                        printf("\n");
                        printf("请输入终点:\n");
                        scanf("%s", flight4-&gt;end);
                        printf("\n");
                        printf("请输入起飞时间:\n");
                        scanf("%d", &amp;flight4-&gt;tmStart);
                        printf("\n");
                        printf("请输入到达时间:\n");
                        scanf("%d", &amp;flight4-&gt;tmEnd);
                        printf("\n");
                        printf("请输入航班票价:\n");
                        scanf("%d", &amp;flight4-&gt;price);
                        printf("\n");
                        printf("请输入总票量:\n");
                        scanf("%d", &amp;flight4-&gt;total);
                        printf("\n");
                        printf("请输入剩余票量:\n");
                        scanf("%d", &amp;flight4-&gt;left);
                        printf("\n");
                        if (!insert_hclist(head, flight4))
                        {
                            // showlinklist(list);
                            // 行缓冲 》 \n  程序结束  fflush 缓冲区满
                            system("clear");
                            printf("添加成功\n");
                            printf("\n");
                            printf("航班号  起点  终点  起飞时间  降落时间  航班票价  总票量  剩余票量\n");
                            show_clist(head, showall);
                        }
                        goto B;
                        break;

#endif
                    case 3: // 删除航班信息
                        system("clear");
                        printf("请输入要删除第几行航班\n");
                        printf("\n");
                        printf("航班号  起点  终点  起飞时间  降落时间  航班票价  总票量  剩余票量\n");
                        print_clist(head);
                        int hangshu = 0;
                        flight_t hangshu1 = {0};
                        scanf("%d", &amp;hangshu);
                        delete_iclist(head, hangshu, &amp;hangshu1);
                        system("clear");
                        printf("航班号  起点  终点  起飞时间  降落时间  航班票价  总票量  剩余票量\n");
                        show_clist(head, showall);
                        printf("\n");
                        printf("删除成功\n");
                        goto B;
                        break;
                    case 5:
                    system("clear");
                        showulinklist(list);
                        goto B;
                        break;
                    case 6:
                        showjiemian4();

                        printf("\n");
                        printf("\n");
                        
                        return 0;

                    default:
                        break;
                    }
                }
                else
                {
                    system("clear");
                    printf("密码输入错误：\n");
                    printf("\n");
                    goto C;
                }
            }
        }

        if (num != 1 || num != 2 || num != 3)
        {
            printf("输入选项错误\n");
        }
    }
    return 0;
}</code></pre> 
<p> 用户的.h文件，用来放用户结构体及函数声明</p> 
<p>customer.h</p> 
<pre><code class="language-objectivec">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
//单链表
//用户名  + 密码  

//数据节点 
typedef struct user
{
    char name[16];
    int code;
}user_t;

//元素节点
typedef struct node
{
	//数据部分
	user_t userdata;
	//指针部分
	struct node * next;
}node_t;

void showjiemian1(void);

void showjiemian2(void);

void showjiemian3(void);
void showjiemian4(void);

//创建用户链表
node_t* create_ulist();

//插入节点
int insert_uhlist(node_t* head, user_t usertemp);

//3.链表打印函数
void showulinklist(node_t* head);

//查询节点 比较 ： 姓名  +  密码  ；
//提示信息：
//查找value所对应的index序号
//比较用户的信息
//第一个为链表中的信息，第二个为页面输入过来的信息
#if 0
typedef int (*cmpfun_t)(user_t* listUser, user_t* user);//替换类型

int cmpUserName(user_t* listUser, user_t* user);

int cmpUserPassword(user_t* listUser, user_t* user);

int cmpUserAll(user_t* listUser, user_t* user);
#endif
int usr_login(node_t* head);

</code></pre> 
<p> 用户.c文件,主要是一些数据结构单链表一些功能的函数,还有菜单界面，用户登陆界面，以及管理员界面函数。</p> 
<p>customer.c</p> 
<pre><code class="language-objectivec">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include"customer.h"

//单链表
//用户名  + 密码  


void showjiemian1(void)
{
	printf("\t\t-----------------------------------------------\n");
	printf("\t\t	欢迎进入长沙航空信息管理系统			\n");
    printf("\t\t	请输选择输入				       \n");
    printf("\t\t	1.注册帐号						 \n");
    printf("\t\t	2.普通用户登录					 \n");
    printf("\t\t	3.航班管理员登录				  \n");
    printf("\t\t-----------------------------------------------\n");
}

void showjiemian2(void)
{
	    printf("\t\t-------------------------------------------\n");
		printf("\t\t	当前为管理员页						\n");
	    printf("\t\t	1.查看航班信息						\n");
        printf("\t\t	2.增加航班信息						\n");
        printf("\t\t	3.删除航班信息						\n");
        printf("\t\t	4.修改航班信息						\n");
        printf("\t\t	5.查看已注册账号					\n");
		printf("\t\t	6.退出系统						\n");
		printf("\t\t-------------------------------------------\n");

}

void showjiemian3(void)
{
	printf("\t\t------------------------------------------\n");
	printf("\t\t	当前为普通用户界面						\n");
	printf("\t\t	1.查看航班信息						\n");
	printf("\t\t	2.输入终点站查询航班					\n");
	printf("\t\t	3.退出到主界面							\n");
	printf("\t\t	4.退出系统						\n");
	printf("\t\t-------------------------------------------\n");
}

void showjiemian4(void)
{
	printf("\t\t-------------------------------------------\n");
	printf("\t\t	感谢您使用本航班系统				\n");
	printf("\t\t	欢迎您下次使用						\n");
	printf("\t\t-------------------------------------------\n");
}
//创建用户链表
node_t* create_ulist()
{
	//1.申请空间
	node_t* newnode =(node_t*)malloc(sizeof(node_t));
	if(newnode == NULL)
	{
		perror("malloc error\n");
		return NULL;
	}
	//2.填写数据 0
	bzero(&amp;newnode-&gt;userdata,sizeof(user_t));
	//3.指针部分 NULL;
	newnode-&gt;next = NULL;
	return newnode;
}
//插入节点
int insert_uhlist(node_t* head, user_t usertemp)
{
	//0.合法性检查
	if(head == NULL)
	{
		perror("list is null\n");
		return -1;
	}

	//1.新数据存储工作
	node_t* newnode = (node_t*)malloc(sizeof(node_t));
	if(newnode == NULL)
	{
		perror("malloc newnode error\n");
		return -2;
	}
    //合法
	newnode-&gt; userdata =  usertemp;
	//2.头插法的修改指针
	newnode-&gt;next = head-&gt;next;  //新节点 指向  数据头
	head-&gt;next = newnode;       //链表头 指向 新节点
	return 0 ;
}
//3.链表打印函数
void showulinklist(node_t* head)
{
	//0.合法性判断
	if(head == NULL)
	{
		perror("head is error\n");
		return ;//代表程序结束
	}

	//1.定义临时节点 ：头节点 不能移动
	node_t* temp = head-&gt;next;
	//temp不空 就打印  temp为空 出界
	while(temp != NULL)
	{
		printf("%s %d\t",temp-&gt;userdata.name,temp-&gt;userdata.code);
		temp = temp-&gt;next;
	}

	//自带换行属性
	puts("");
	
}
//查询节点 比较 ： 姓名  +  密码  ；
//提示信息：
//查找value所对应的index序号
//比较用户的信息
//第一个为链表中的信息，第二个为页面输入过来的信息
#if 0
typedef int (*cmpfun_t)(user_t* listUser, user_t* user);//替换类型

int cmpUserName(user_t* listUser, user_t* user)
{
    return strcmp(listUser-&gt;name,user-&gt;name);
}
int cmpUserPassword(user_t* listUser, user_t* user)
{
    return (listUser-&gt;code)-(user-&gt;code);
}
int cmpUserAll(user_t* listUser, user_t* user)
{
    int a, b;
    a = strcmp(listUser-&gt;name,user-&gt;name);
   
    b = (listUser-&gt;code)-(user-&gt;code);
    
    if(a == 0 &amp;&amp; b == 0)
	{
        return 0;
    }
	else
    return -1;
}
#endif
//用户登录
int usr_login(node_t* head)
{    
     user_t temp1;

	
	//2.遍历
	node_t* temp = head-&gt;next;
	
    printf("请输入账号\n");
    scanf("%s",temp1.name);
   
    printf("请输入密码\n");
    scanf("%d",&amp;temp1.code);
  
    int flag=0;   //账号查询成功标志位，1为成功;
    while(temp!=NULL)
    {
        if(strcmp(temp-&gt;userdata.name,temp1.name)==0)
        {
            flag=1;
            break;
        }
        
        temp=temp-&gt;next;
    
    if(flag==0)
    {
        return -1;
      // printf("当前账号不存在\n");
    }
    else if(flag==1)
    {
        if(temp-&gt;userdata.code != temp1.code)
        {
            return -2;
        //  printf("密码错误\n");
        }else 
          // printf("登录成功    \n");
 
            return 0;    
	}
    }
    
}

</code></pre> 
<p>航班.h文件，存放航班结构体，以及单向循环链函数声明</p> 
<p>flight.h</p> 
<pre><code class="language-objectivec">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;


//数据节点 
typedef struct flight
{
    char id[100];    //航班号
	char start[200]; //起飞城市
	char end[200];   //抵达城市
	int tmStart;//起飞时间
	int tmEnd;  //降落时间
	int price;      //航班票价
	int total;//总票量
	int left;//剩余票量

}flight_t;

//元素节点
typedef struct nodef
{
	//数据部分
	flight_t* flightdata;
	//指针部分
	struct nodef* next;
}nodef_t;
//定义航班链表
nodef_t* create_clist();




void print_clist(nodef_t* head);

#if 1
//2.头插法 插入数据
int insert_hclist(nodef_t* head,flight_t* newflight);

#endif
int insert_tclist(nodef_t* head,flight_t * flight);

//11.删除第i个元素 。并且把数据传递回来
int delete_iclist(nodef_t* head,int index,flight_t* flight);

//4链表打印函数 ：打印部分数据 函数指针
typedef void (*showfun_t)(flight_t* flight);
//打印所有数据
void showall(flight_t* flight);


void show_clist(nodef_t* head,showfun_t showfun);

//替换类型
typedef int (*cmpflightfun_t)(flight_t* flight1,flight_t* flight2);
int cmpend(flight_t* flight1,flight_t* flight2);

//输入终点查询航班
nodef_t* find_vclist(nodef_t* head,flight_t* value,cmpflightfun_t cmpfun);

int updata_ilist(nodef_t* head,int index,flight_t* data);</code></pre> 
<p>航班信息.文件,主要是航班信息单向循环链表实现增删改功能的函数</p> 
<p>flight.c</p> 
<pre><code class="language-objectivec">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include"flight.h"


//定义航班链表
nodef_t* create_clist()
{
	//1.申请空间
	nodef_t* head = (nodef_t*)malloc(sizeof(nodef_t));
	if( NULL == head)
	{
		perror("newnode malloc error\n");
		return NULL;
	}
	//2.填写数据
	head-&gt;flightdata = NULL;
	//单向循环链表只有一个头节点的话，下一个哦节点是自己
	head-&gt;next = head;

	return  head;
}




void print_clist(nodef_t* head)
{
	//1.循环链表
	if(head ==NULL || head-&gt;next == head)
	{
		perror("head is illegal or there is no element\n");
		return ;
	}

	//2.遍历
	nodef_t * temp = head-&gt;next;
	while(temp != head)
	{
		printf("%s\t%s  %s\t%d\t %d\t %d\t     %d\t   %d\n",temp-&gt;flightdata-&gt;id,temp-&gt;flightdata-&gt;start,temp-&gt;flightdata-&gt;end,temp-&gt;flightdata-&gt;tmStart,temp-&gt;flightdata-&gt;tmEnd,temp-&gt;flightdata-&gt;price,temp-&gt;flightdata-&gt;total,temp-&gt;flightdata-&gt;left);
		temp =temp-&gt;next;
	}
	puts("");
	//temp跳出循环的时候  temp-&gt;head;

}
#if 1
//2.头插法 插入数据
int insert_hclist(nodef_t* head,flight_t* newflight)
{
	//1
	if(head == NULL)
	{
		perror("head is error\n");
		return -1;
	}

	//2.新申请元素节点  新申请数据节点   关系问题 把数据加进来 连接进入链表  
	nodef_t* newnode = (nodef_t*)malloc(sizeof(nodef_t));
	if(newnode == NULL)
	{
		perror("newnode malloc error\n");
		return -2;
	}

	newnode-&gt;flightdata = malloc(sizeof(flight_t));
	if(newnode-&gt;flightdata == NULL)
	{
		perror("newnode-&gt;data malloc error\n");
		return -3;
	}

	//数据加入进来
	*newnode-&gt;flightdata = *newflight;

	//3链接进来
	
	newnode-&gt;next = head-&gt;next;
	head-&gt;next = newnode;
	return 0 ;
}
#endif
int insert_tclist(nodef_t* head,flight_t * flight)
{

	if(head == NULL|| flight == NULL)
	{
		perror("head is null or stu is null\n");
		return -1;
	}

	nodef_t* newnode = malloc(sizeof(nodef_t));
	newnode-&gt;flightdata = malloc(sizeof(flight_t));
	*newnode-&gt;flightdata = *flight;

	//链接问题
	nodef_t* temp = head-&gt;next;
	while(temp-&gt;next!= head)
	{
		temp =temp-&gt;next;
	}
	newnode-&gt;next = temp-&gt;next;
	temp-&gt;next = newnode;

	return 0 ;
}

//11.删除第i个元素 。并且把数据传递回来
int delete_iclist(nodef_t* head,int index,flight_t* flight)
{
	//1.合法性判断
	if(head == NULL || head-&gt;next == head )
	{
		perror("error\n");
		return -1;
	}

	//2.遍历
	index = index % 7;  // shownode() + 1;
	if(index == 0 )
	{
		perror("index is illegal\n");
		return -2;
	}
	int i = 1 ;
	nodef_t * temp = head-&gt;next,*before = head;
	while(i&lt; index )
	{
		++i;
		before = temp;
		temp = temp-&gt;next;
	}

	//3.取出数据
	*flight = *temp-&gt;flightdata;
	//4.修改指针
	before-&gt;next = temp-&gt;next;
	free(temp-&gt;flightdata);
	free(temp);
	return 0 ;
}

//4链表打印函数 ：打印部分数据 函数指针
typedef void (*showfun_t)(flight_t* flight);
//打印所有数据
void showall(flight_t* flight)
{
	printf("%s\t%s  %s\t%d\t%d\t%d\t  %d\t   %d\n",flight-&gt;id,flight-&gt;start,flight-&gt;end,flight-&gt;tmStart,flight-&gt;tmEnd,flight-&gt;price,flight-&gt;total,flight-&gt;left);

}


void show_clist(nodef_t* head,showfun_t showfun)
{
	if(head == NULL || head-&gt;next == head)
	{
		perror("head is illegal or it has no element\n");
		return ;
	}
	//单项循环链表
	nodef_t* temp = head-&gt;next;
	while(temp != head)
	{
		showfun(temp-&gt;flightdata);
		temp =temp-&gt;next;
	}
}

//替换类型
typedef int (*cmpflightfun_t)(flight_t* flight1,flight_t* flight2);
int cmpend(flight_t* flight1,flight_t* flight2)
{
	//比较终点
	return strcmp(flight1-&gt;end,flight2-&gt;end);
}
//输入终点查询航班
nodef_t* find_vclist(nodef_t* head,flight_t* value,cmpflightfun_t cmpfun)
{
	if(head == NULL || value == NULL)
	{
		perror("head is null or value is null\n");
		return NULL;
	}

	if(head-&gt;next == head)
	{
		perror("there is no element\n");
		return NULL;
	}

	//遍历
	nodef_t * temp = head-&gt;next;
	while(temp != head)  // temp -&gt; next != NULL 
	{
		//把链表中的元素与 外来的元素比较
		if(!cmpfun(temp-&gt;flightdata,value))	
		{
			return temp;
		}
		//指针移动
		temp = temp-&gt;next;
	}
	
	return NULL;
}


//修改航班数据
//什么链表 什么数值位置
int updata_ilist(nodef_t* head,int index,flight_t* data)
{
	if (head==NULL||index&lt;=0)
{
	perror("head is null or index is error\n");
	return -1;
}
//2.找到index
 int i=0;
 nodef_t* temp=head;
 while(i&lt;index)
{
	++i;
	temp=temp-&gt;next;
}

temp-&gt;flightdata=data;
//3.替换
return 0;
}</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e37f4e7b91f324ebf55adeb3afd59bf1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Spring Security OAuth2登录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/56df6c3524eaf56d106b61f299f4eb4b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">markdown的使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>