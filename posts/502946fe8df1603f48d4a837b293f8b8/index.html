<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Oracle 11g/12c/19c单机自动安装脚本 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Oracle 11g/12c/19c单机自动安装脚本" />
<meta property="og:description" content="#!/bin/bash
#Creation Data: 2019-06-26
#Last-Modified Date: 2020-06-05
#Author: Create by xiaoxuesong
#Mail: xiaoxuesong@longigroup.com
#Function: Oracle 11g/12c/19c install on Linux 6/7(oracle linux &amp;&amp; redhat)
#version: 1.0 初版编写
#version: 1.1 加入判断是否归档模式，修改一些bug
#version: 1.2 加入安装目录判断，增加一些注释
#version: 1.3 加入字符集判断，设置默认字符集为AL32UTF8；丰富安装日志;增加GLOBLE_DBName环境变量;修改一些bug
#version: 2.0 判断OS版本，增加Linux 7的安装;判断DB版本，增加12.2.0.1的安装
#version: 3.0 使用function重构代码；增加安装判断；增加国家字符集判断；调整依赖的rpm包；自动判断OS版本；增加内存百分比设置参数；修改linux7 hostname目录；设置审计为none；设置DB密码不过期
#version: 3.1 修改一些配置项
#version: 3.2 增加了yum配置选项
#version: 4.0 增加19c安装配置，增加OS配置
#--可以完善的内容
#version: X 初始化变量输入时，加入不合理变量判断（比如判断Oracle_SID是否超过8个字符、密码合规性检查）
# 判断是否创建CDB
#Readme ：需要准备和确认的事情
#1，修改主机名/etc/sysconfig/network(linux6) 或者 /etc/hostname(linux7)
#2，软件安装路径和数据文件路径要提前规划好
#3，软件安装会自动下载到/tmp目录
#4，准备好yum源、NTP配置文件
#5，准备好监控脚本
#6，脚本必须放在Oracle用户有权访问的位置下执行，如/tmp目录
#****************************************************************************************************************#" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/502946fe8df1603f48d4a837b293f8b8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-12-23T17:17:14+08:00" />
<meta property="article:modified_time" content="2019-12-23T17:17:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Oracle 11g/12c/19c单机自动安装脚本</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>#!/bin/bash</p> 
<p>#Creation Data: 2019-06-26<br> #Last-Modified Date: 2020-06-05<br> #Author: Create by xiaoxuesong<br> #Mail: xiaoxuesong@longigroup.com<br> #Function: Oracle 11g/12c/19c install on Linux 6/7(oracle linux &amp;&amp; redhat)<br> #version: 1.0 初版编写<br> #version: 1.1 加入判断是否归档模式，修改一些bug<br> #version: 1.2 加入安装目录判断，增加一些注释<br> #version: 1.3 加入字符集判断，设置默认字符集为AL32UTF8；丰富安装日志;增加GLOBLE_DBName环境变量;修改一些bug<br> #version: 2.0 判断OS版本，增加Linux 7的安装;判断DB版本，增加12.2.0.1的安装<br> #version: 3.0 使用function重构代码；增加安装判断；增加国家字符集判断；调整依赖的rpm包；自动判断OS版本；增加内存百分比设置参数；修改linux7 hostname目录；设置审计为none；设置DB密码不过期<br> #version: 3.1 修改一些配置项<br> #version: 3.2 增加了yum配置选项<br> #version: 4.0 增加19c安装配置，增加OS配置<br> #--可以完善的内容<br> #version: X   初始化变量输入时，加入不合理变量判断（比如判断Oracle_SID是否超过8个字符、密码合规性检查）<br> #              判断是否创建CDB</p> 
<p><br> #Readme ：需要准备和确认的事情<br> #1，修改主机名/etc/sysconfig/network(linux6) 或者 /etc/hostname(linux7)<br> #2，软件安装路径和数据文件路径要提前规划好<br> #3，软件安装会自动下载到/tmp目录<br> #4，准备好yum源、NTP配置文件<br> #5，准备好监控脚本<br> #6，脚本必须放在Oracle用户有权访问的位置下执行，如/tmp目录</p> 
<p><br> #****************************************************************************************************************#<br> #-------------------------#<br> # judge what needs to be done<br> # v3.0<br> #-------------------------#<br> INPUT_Flag=true<br> read -p "choice what will you do?: configOS/installSoftwareOnly/createDB/removeDB [createDB]? " INPUT_CHOICE  <br> while $INPUT_Flag #判断输入是否正确<br> do<br>     if [[ -z "${INPUT_CHOICE}" ]] || [[ $INPUT_CHOICE = "createDB" ]] || [[ $INPUT_CHOICE = "y" ]] || [[ $INPUT_CHOICE = "Y" ]];then<br>         INPUT_CHOICE=createDB<br>         INPUT_Flag=false<br>     elif [[ $INPUT_CHOICE = "installSoftwareOnly" ]];then<br>         DB_VERSION=installSoftwareOnly<br>         INPUT_Flag=false<br>     elif [[ $INPUT_CHOICE = "configOS" ]];then<br>         DB_VERSION=configOS<br>         INPUT_Flag=false<br>     elif [[ $INPUT_CHOICE = "removeDB" ]];then<br>         INPUT_Flag=false<br>     else <br>         echo -e "\033[37;31;5mInput error!!!\033[39;49;0m"<br>         read -p "What will you do?: configOS/installSoftwareOnly/createDB [createDB]? " INPUT_CHOICE  <br>         INPUT_Flag=true<br>     fi<br> done</p> 
<p>#-------------------------#<br> # remove database<br> #-------------------------#<br> function removeDB(){<!-- --><br> read -p "if the DB install directory: /u01/app (y/n) [y]? " INSTALL_DIR<br> if [[ -z "${INSTALL_DIR}" ]] || [[ $INSTALL_DIR = "/u01/app" ]] || [[ $INSTALL_DIR = "y" ]] || [[ $INSTALL_DIR = "Y" ]];then<br>     INSTALL_DIR=/u01/app<br> elif [[ $INSTALL_DIR = "n" ]] || [[ $INSTALL_DIR = "N" ]];then<br>     read -p "please input DB install directory: " INSTALL_DIR<br> fi</p> 
<p>su - oracle -c "sqlplus -s / as sysdba" &lt;&lt;EOF<br> select open_mode from v\$database;<br> shutdown abort;<br> EXIT<br> EOF</p> 
<p>su - oracle -c "lsnrctl stop"</p> 
<p>rm -rf ${INSTALL_DIR}<br> rm -rf /usr/local/bin/dbhome<br> rm -rf /usr/local/bin/oraenv<br> rm -rf /usr/local/bin/coraenv<br> rm -rf /etc/oratab<br> rm -rf /etc/oraInst.loc<br> rm -rf /opt/oraInventory/ContentsXML/inventory.xml<br> userdel -rf oracle<br> groupdel oinstall<br> groupdel dba<br> ps -ef|grep -v grep |grep ora|awk '{print $2}'|xargs kill -9<br> }</p> 
<p>if [[ $INPUT_CHOICE = "removeDB" ]];then<br>     echo -e "\033[37;31;5mbegin remove database...\033[39;49;0m"<br>     removeDB<br>     echo -e "\033[37;31;5mremove complate! 886...\033[39;49;0m"<br>     exit<br> fi</p> 
<p><br> #-------------------------#<br> # set initialization parameters<br> #-------------------------#<br> read -p "please input globle_dbname: " GLOBLE_DBName    #v1.3<br> read -p "please input ORACLE_SID: " ORACLE_SID<br> if [[ $INPUT_CHOICE = "createDB" ]];then<br>     read -p "please input SYSTEM PASSWD: " SYSTEM_PASSWD<br> fi<br> read -p "please input IPADDR: " hostip<br> read -p "please input ORACLE PASSWD: " ORAPASSWD</p> 
<p>#set variable<br> SCRIPT_DIR=`pwd`<br> #SCRIPT_DIR=/root/scripts<br> hostname_long=`hostname`<br> host_name=`hostname|cut -f 1 -d '.'`<br> DNS='10.0.1.33'<br> SITE='10.0.3.243'<br> SITE2='66.0.193.30'<br> DATETIME=`date +%Y%m%d`<br> RELS=`more /etc/system-release`<br> OS_VER_PRI=`echo ${RELS#*release} |awk '{print $1}' | cut -f 1 -d '.'`</p> 
<p>#-------------------------#<br> # judge OS VERSION<br> # v2.0<br> #    v3.0<br> #-------------------------#<br> if [ $OS_VER_PRI -eq 7 ];then<br>     OS_VERSION=linux7<br> elif [ $OS_VER_PRI -eq 6 ];then<br>     OS_VERSION=linux6<br> else <br>     echo "sorry, this operating system is not supported!!!"<br>     exit<br> fi</p> 
<p>#-------------------------#<br> # input DB_VERSION<br> # v2.0<br> #    v4.0<br> #-------------------------#<br> read -p "please input DB VERSION: 11g/12c/19c [19c]? " V_DB_VERSION    <br> if [[ -z "${V_DB_VERSION}" ]] || [[ $V_DB_VERSION = "19c" ]] || [[ $V_DB_VERSION = "19C" ]] || [[ $V_DB_VERSION = "19" ]];then<br>     DB_VERSION=19.3.0.0<br> elif [[ $V_DB_VERSION = "12c" ]] || [[ $V_DB_VERSION = "12C" ]] || [[ $V_DB_VERSION = "12" ]];then<br>     DB_VERSION=12.2.0.1<br> elif [[ $V_DB_VERSION = "11g" ]] || [[ $V_DB_VERSION = "11G" ]] || [[ $V_DB_VERSION = "11" ]];then<br>     DB_VERSION=11.2.0.4<br> else <br>     echo "DB version input error!!!"<br>     exit<br> fi</p> 
<p>#-------------------------#<br> # set archiveLogMode<br> #-------------------------#<br> if [[ $INPUT_CHOICE = "createDB" ]];then<br>     read -p "please input ARCH MODE: true/false [Y]? " V_ARCH_MODE    #v1.1<br>     if [[ -z "${V_ARCH_MODE}" ]] || [[ $V_ARCH_MODE = "true" ]] || [[ $V_ARCH_MODE = "y" ]] || [[ $V_ARCH_MODE = "Y" ]];then<br>         ARCH_MODE=true<br>     elif [[ $V_ARCH_MODE = "false" ]] || [[ $V_ARCH_MODE = "n" ]] || [[ $V_ARCH_MODE = "N" ]];then<br>         ARCH_MODE=false<br>     else <br>         echo "archiveLogMode input error!!!"<br>         exit<br>     fi<br> fi</p> 
<p>#-------------------------#<br> # set install directory <br> # v1.2<br> #-------------------------#<br> read -p "if the DB install directory: /u01/app (y/n) [y]? " INPUT_ENVDIR<br> if [[ -z "${INPUT_ENVDIR}" ]] || [[ $INPUT_ENVDIR = "/u01/app" ]] || [[ $INPUT_ENVDIR = "y" ]] || [[ $INPUT_ENVDIR = "Y" ]];then<br>     ENV_BASE_DIR=/u01/app<br> elif [[ $INPUT_ENVDIR = "n" ]] || [[ $INPUT_ENVDIR = "N" ]];then<br>     read -p "please input DB install directory: " ENV_BASE_DIR<br> else <br>     ENV_BASE_DIR=$INPUT_ENVDIR<br> fi</p> 
<p><br> #-------------------------#<br> # set CHARACTERSET<br> # v1.3<br> #    v3.0<br> #-------------------------#<br> if [[ $INPUT_CHOICE = "createDB" ]];then<br>     read -p "please input character set: AL32UTF8/ZHS16GBK/OTHERS[AL32UTF8]? " INPUT_NLS_LANG    #v1.3<br>     if [[ -z "${INPUT_NLS_LANG}" ]] || [[ $INPUT_NLS_LANG = "true" ]] || [[ $INPUT_NLS_LANG = "y" ]] || [[ $INPUT_NLS_LANG = "Y" ]];then<br>         NLS_LANG=AL32UTF8<br>     else<br>         NLS_LANG=$INPUT_NLS_LANG<br>     fi<br> fi</p> 
<p>#-------------------------#<br> # set NATIONALCHARACTERSET<br> # add by v3.0<br> #-------------------------#<br> if [[ $INPUT_CHOICE = "createDB" ]];then<br>     read -p "please input national character set: AL16UTF16/UTF8[AL16UTF16]? " INPUT_NLS_NCHAR_CHAR<br>     if [[ -z "${INPUT_NLS_NCHAR_CHAR}" ]] || [[ $INPUT_NLS_NCHAR_CHAR = "true" ]] || [[ $INPUT_NLS_NCHAR_CHAR = "y" ]] || [[ $INPUT_NLS_NCHAR_CHAR = "Y" ]];then<br>         NLS_NCHAR_CHAR=AL16UTF16<br>     else<br>         NLS_NCHAR_CHAR=UTF8<br>     fi<br> fi</p> 
<p><br> #-------------------------#<br> # set percentageMemory<br> # add by v3.0<br> #-------------------------#<br> if [[ $INPUT_CHOICE = "createDB" ]];then<br>     INPUT_MemPercent_Flag=true<br>     read -p "please input DB memory as a percentage of the OS: [60]? " INPUT_MemPercent<br>     if [[ -z "${INPUT_MemPercent}" ]] || [[ $MemPercent = "true" ]] || [[ $MemPercent = "y" ]] || [[ $MemPercent = "Y" ]];then<br>         MemPercent=60<br>     else<br>         while $INPUT_MemPercent_Flag #判断输入值是否为整数<br>         do<br>             expr $INPUT_MemPercent + 0 &amp;&gt;/dev/null<br>             [ $? -eq 0 ] &amp;&amp; INPUT_MemPercent_Flag=false || read -p "please input DB memory as a percentage of the OS: [60]? " INPUT_MemPercent<br>         done<br>         MemPercent=$INPUT_MemPercent<br>     fi<br> fi</p> 
<p>#-------------------------#<br> # Configure yum<br> # v3.2<br> #-------------------------#<br> read -p "Do you need to Configure yum(y/n) [y]? " INPUT_YUM<br> if [[ -z "${INPUT_YUM}" ]] || [[ $INPUT_YUM = "y" ]] || [[ $INPUT_YUM = "Y" ]];then<br>     if [ `find /etc/yum.repos.d/ -maxdepth 1 |xargs grep -ri "10.0.3.243" | wc -l` -gt 0 ]; then<br>     #这个查找会遍历/etc/yum.repos.d/所有子目录，参数-maxdepth 1无效<br>         echo "yum checked, already configed ----- Not Modified" &gt;&gt; ${SCRIPT_DIR}/install.log<br>     else<br>         YUM_DIR=/etc/yum.repos.d<br>         YUM_CONF=$YUM_DIR/longi_yum_conf.repo<br>         OS_TYPE=`more /etc/system-release |awk '{print $1 $2}'`<br>         RELS=`more /etc/system-release`<br>         OS_VER=`echo ${RELS#*release} |awk '{print $1}'`<br>         <br>         #判断OS版本<br>         if [ ${OS_TYPE} = "CentOSLinux" ]; then<br>             OS_VER=`echo ${RELS#*release} |awk '{print $1}'`<br>             OS_VER_2=`echo ${OS_VER:0:1}`<br>             OS_NAME=centos${OS_VER_2}<br>             #echo $OS_NAME<br>         elif [ ${OS_TYPE} = "OracleLinux" ]; then<br>             OS_VER=`echo ${RELS#*release} | awk '{print $1}' | sed 's/\.//g'`<br>             OS_VER_2=`echo ${OS_VER:0:1}`<br>             OS_NAME=oel${OS_VER}<br>             #echo $OS_NAME<br>         elif [ ${OS_TYPE} = "RedHat" ]; then<br>             OS_VER=`echo ${RELS#*release} | awk '{print $1}' | sed 's/\.//g'`<br>             OS_VER_2=`echo ${OS_VER:0:1}`<br>             OS_NAME=rhel${OS_VER}<br>             #echo $OS_NAME<br>         fi<br>         <br>         <br>         # mv old repo config file to bak<br>         if [ ! -d ${YUM_DIR}/old_bak ]; then<br>             mkdir ${YUM_DIR}/old_bak<br>         fi<br>         repo_num=$(ls *.repo 2&gt; /dev/null | wc -l)<br>         if [ "$repo_num" != "0" ]; then<br>                 mv ${YUM_DIR}/*.repo ${YUM_DIR}/old_bak/<br>         fi<br>         <br>         <br>         ## Create my conf file<br>         if [ ${OS_TYPE} = "CentOSLinux" ]; then<br>             cat &gt;&gt; $YUM_CONF &lt;&lt;EOF<br> [${OS_NAME}-local-base]<br> name=${OS_NAME}-local-base<br> baseurl=http://10.0.3.243/${OS_NAME}/base<br> enabled=1<br> gpgcheck=0</p> 
<p>[${OS_NAME}-local-updates]<br> name=${OS_NAME}-local-updates<br> baseurl=http://10.0.3.243/${OS_NAME}/updates<br> enabled=1<br> gpgcheck=0</p> 
<p>[${OS_NAME}-local-extras]<br> name=${OS_NAME}-local-extras<br> baseurl=http://10.0.3.243/${OS_NAME}/extras<br> enabled=1<br> gpgcheck=0</p> 
<p>[epel${OS_VER_2}-local]<br> name=epel${OS_VER_2}-local<br> baseurl=http://10.0.3.243/epel${OS_VER_2}<br> enabled=1<br> gpgcheck=0<br> EOF<br>         elif [ ${OS_TYPE} = "OracleLinux" ]; then<br>             cat &gt;&gt; $YUM_CONF &lt;&lt;EOF<br> [${OS_NAME}-local-base]<br> name=${OS_NAME}-local-base<br> baseurl=http://10.0.3.243/${OS_NAME}<br> enabled=1<br> gpgcheck=0</p> 
<p>[epel${OS_VER_2}-local]<br> name=epel${OS_VER_2}-local<br> baseurl=http://10.0.3.243/epel${OS_VER_2}<br> enabled=1<br> gpgcheck=0<br> EOF<br>         elif [ ${OS_TYPE} = "RedHat" ]; then<br>             cat &gt;&gt; $YUM_CONF &lt;&lt;EOF<br> [${OS_NAME}-local-base]<br> name=${OS_NAME}-local-base<br> baseurl=http://10.0.3.243/${OS_NAME}<br> enabled=1<br> gpgcheck=0</p> 
<p>[epel${OS_VER_2}-local]<br> name=epel${OS_VER_2}-local<br> baseurl=http://10.0.3.243/epel${OS_VER_2}<br> enabled=1<br> gpgcheck=0<br> EOF<br>         fi<br>         echo "yum confige ----- SUCCEEDED" &gt;&gt; ${SCRIPT_DIR}/install.log<br>     fi<br> fi</p> 
<p><br> #-------------------------#<br> # judge if need to download software package<br> # v3.0<br> #   v4.0<br> #-------------------------#<br> if [[ $INPUT_CHOICE = "createDB" ]] || [[ $INPUT_CHOICE = "installSoftwareOnly" ]];then<br>     read -p "Do you need to download database package(y/n) [y]? " INPUT_DIR<br>     if [[ -z "${INPUT_DIR}" ]] || [[ $INPUT_DIR = "y" ]] || [[ $INPUT_DIR = "Y" ]];then<br>         #download database software package v2.0<br>         if [ ${DB_VERSION} = "11.2.0.4" ];then<br>             wget -O /tmp/p13390677_112040_Linux-x86-64_1of7.zip http://${SITE}/OracleSoftware/11g/p13390677_112040_Linux-x86-64_1of7.zip<br>             wget -O /tmp/p13390677_112040_Linux-x86-64_2of7.zip http://${SITE}/OracleSoftware/11g/p13390677_112040_Linux-x86-64_2of7.zip<br>         elif [ ${DB_VERSION} = "12.2.0.1" ];then<br>             wget -O /tmp/linuxx64_12201_database.zip http://${SITE}/OracleSoftware/12c/linuxx64_12201_database.zip<br>         elif [ ${DB_VERSION} = "19.3.0.0" ];then<br>             wget -O /tmp/LINUX.X64_193000_db_home.zip http://${SITE}/OracleSoftware/19c/LINUX.X64_193000_db_home.zip<br>         else<br>             echo "Error database version! please check again!"<br>             exit<br>         fi<br>     elif [[ $INPUT_DIR = "n" ]] || [[ $INPUT_DIR = "N" ]];then<br>         echo -e "\033[37;33;5mMake sure the database installation package is in the\033[39;49;0m \033[37;31;5m/tmp\033[39;49;0m \033[37;33;5mdirectory. press any key for continue.\033[39;49;0m"<br>     fi<br> fi</p> 
<p><br> #-------------------------#<br> # install rpm <br> # v3.2<br> #-------------------------#<br> yum install -y wget<br> yum install -y unzip<br> if [ ${OS_VERSION} = linux7 ]; then<br>     wget -O /tmp/compat-libstdc++-33-3.2.3-72.el7.x86_64.rpm http://${SITE}/OracleSoftware/rpm/compat-libstdc++-33-3.2.3-72.el7.x86_64.rpm<br>     wget -O /tmp/compat-libstdc++-33-3.2.3-72.el7.i686.rpm http://${SITE}/OracleSoftware/rpm/compat-libstdc++-33-3.2.3-72.el7.i686.rpm<br>     yum install -y /tmp/compat-libstdc++-33-3.2.3-72.el7.i686.rpm<br>     yum install -y /tmp/compat-libstdc++-33-3.2.3-72.el7.x86_64.rpm<br> fi</p> 
<p><br> #-------------------------#<br> # verify rpm<br> # modified by v3.0<br> #-------------------------#<br> echo "#################################" &gt; rpm.log<br> echo "check rpm: " &gt;&gt; rpm.log<br> if [ ${DB_VERSION} = 12.2.0.1 ] &amp;&amp; [ ${OS_VERSION} = linux6 ]; then<br> rpm -q --qf '%{NAME}-%{VERSION}-%{RELEASE} (%{ARCH})\n' bc \<br>     binutils \<br>     compat-libcap1 \<br>     compat-libstdc++-33 \<br>     e2fsprogs \<br>     e2fsprogs-libs \<br>     glibc \<br>     glibc-devel \<br>     ksh \<br>     libaio \<br>     libaio-devel \<br>     libX11 \<br>     libXau \<br>     libXi \<br>     libXtst \<br>     libXrender \<br>     libXrender-devel \<br>     libgcc \<br>     libstdc++ \<br>     libstdc++-devel \<br>     libxcb \<br>     make \<br>     net-tools \<br>     nfs-utils \<br>     smartmontools \<br>     sysstat &gt;&gt; rpm.log<br> elif [ ${DB_VERSION} = 12.2.0.1 ] &amp;&amp; [ ${OS_VERSION} = linux7 ]; then<br> rpm -q --qf '%{NAME}-%{VERSION}-%{RELEASE} (%{ARCH})\n' bc \<br>     binutils \<br>     compat-libcap1 \<br>     compat-libstdc++-33 \<br>     glibc \<br>     glibc-devel \<br>     ksh \<br>     libaio \<br>     libaio-devel \<br>     libX11 \<br>     libXau \<br>     libXi \<br>     libXtst \<br>     libXrender \<br>     libXrender-devel \<br>     libgcc \<br>     libstdc++ \<br>     libstdc++-devel \<br>     libxcb \<br>     make \<br>     nfs-utils \<br>     net-tools \<br>     smartmontools \<br>     sysstat &gt;&gt; rpm.log<br> elif [ ${DB_VERSION} = 19.3.0.0 ] &amp;&amp; [ ${OS_VERSION} = linux7 ]; then<br> rpm -q --qf '%{NAME}-%{VERSION}-%{RELEASE} (%{ARCH})\n' bc \<br>     binutils \<br>     compat-libcap1 \<br>     compat-libstdc++-33 \<br>     elfutils-libelf \<br>     fontconfig-devel \<br>     gcc \<br>     gcc-c++ \<br>     glibc \<br>     glibc-devel \<br>     ksh \<br>     libaio \<br>     libaio-devel \<br>     libX11 \<br>     libXau \<br>     libXi \<br>     libXtst \<br>     libXrender \<br>     libXrender-devel \<br>     libgcc \<br>     libstdc++ \<br>     libstdc++-devel \<br>     libxcb \<br>     make \<br>     smartmontools \<br>     sysstat &gt;&gt; rpm.log<br> elif [ ${DB_VERSION} = 11.2.0.4 ] &amp;&amp; [ ${OS_VERSION} = linux6 ]; then<br> rpm -q --qf '%{NAME}-%{VERSION}-%{RELEASE} (%{ARCH})\n' binutils \<br>     compat-libstdc++-33 \<br>     compat-libcap1 \<br>     gcc \<br>     gcc-c++ \<br>     glibc \<br>     glibc-devel \<br>     ksh \<br>     libaio \<br>     libaio-devel \<br>     libgcc \<br>     libstdc++ \<br>     libstdc++-devel \<br>     make \<br>     sysstat &gt;&gt; rpm.log<br> elif [ ${DB_VERSION} = 11.2.0.4 ] &amp;&amp; [ ${OS_VERSION} = linux7 ]; then<br> rpm -q --qf '%{NAME}-%{VERSION}-%{RELEASE} (%{ARCH})\n' binutils \<br>     compat-libstdc++-33 \<br>     compat-libcap1 \<br>     elfutils-libelf \<br>     elfutils-libelf-devel \<br>     gcc \<br>     gcc-c++ \<br>     glibc \<br>     glibc-devel \<br>     ksh \<br>     libaio \<br>     libaio-devel \<br>     libgcc \<br>     libstdc++ \<br>     libstdc++-devel \<br>     libXi \<br>     libXtst \<br>     make \<br>     sysstat &gt;&gt; rpm.log<br> fi<br> echo "#################################" &gt;&gt; rpm.log<br> if [ `grep "not installed" $SCRIPT_DIR/rpm.log | wc -l` -gt 0 ]; then<br>     if [ ${DB_VERSION} = 12.2.0.1 ] &amp;&amp; [ ${OS_VERSION} = linux6 ]; then<br>         yum install -y bc<br>         yum install -y binutils<br>         yum install -y compat-libcap1<br>         yum install -y compat-libstdc++-33.*i686<br>         yum install -y compat-libstdc++-33.*x86_64<br>         yum install -y e2fsprogs.*x86_64<br>         yum install -y e2fsprogs-libs.*x86_64<br>         yum install -y glibc.*i686<br>         yum install -y glibc.*x86_64<br>         yum install -y glibc-devel.*i686<br>         yum install -y glibc-devel.*x86_64<br>         yum install -y ksh<br>         yum install -y libaio.*i686<br>         yum install -y libaio.*x86_64<br>         yum install -y libaio-devel*i686<br>         yum install -y libaio-devel*x86_64<br>         yum install -y libX11.*i686<br>         yum install -y libX11.*x86_64<br>         yum install -y libXau.*i686<br>         yum install -y libXau.*x86_64<br>         yum install -y libXi.*i686<br>         yum install -y libXi.*x86_64<br>         yum install -y libXtst.*i686<br>         yum install -y libXtst.*x86_64<br>         yum install -y libgcc.*i686<br>         yum install -y libgcc.*x86_64<br>         yum install -y libstdc++.*i686<br>         yum install -y libstdc++.*x86_64<br>         yum install -y libstdc++-devel.*i686<br>         yum install -y libstdc++-devel.*x86_64<br>         yum install -y libxcb.*i686<br>         yum install -y libxcb.*x86_64<br>         yum install -y libXrender.*i686<br>         yum install -y libXrender.*x86_64<br>         yum install -y libXrender-devel.*i686<br>         yum install -y libXrender-devel.*x86_64<br>         yum install -y make<br>         yum install -y net-tools  <br>         yum install -y nfs-utils<br>         yum install -y smartmontools<br>         yum install -y sysstat<br>     elif [ ${DB_VERSION} = 12.2.0.1 ] &amp;&amp; [ ${OS_VERSION} = linux7 ]; then<br>         yum install -y bc<br>         yum install -y binutils<br>         yum install -y compat-libcap1<br>         yum install -y compat-libstdc++-33.*i686<br>         yum install -y compat-libstdc++-33.*x86_64<br>         yum install -y glibc.*i686<br>         yum install -y glibc.*x86_64<br>         yum install -y glibc-devel.*i686<br>         yum install -y glibc-devel.*x86_64<br>         yum install -y ksh<br>         yum install -y libaio.*i686<br>         yum install -y libaio.*x86_64<br>         yum install -y libaio-devel*i686<br>         yum install -y libaio-devel*x86_64<br>         yum install -y libgcc.*i686<br>         yum install -y libgcc.*x86_64<br>         yum install -y libstdc++.*i686<br>         yum install -y libstdc++.*x86_64<br>         yum install -y libstdc++-devel.*i686<br>         yum install -y libstdc++-devel.*x86_64<br>         yum install -y libxcb.*i686<br>         yum install -y libxcb.*x86_64<br>         yum install -y libX11.*i686<br>         yum install -y libX11.*x86_64<br>         yum install -y libXau.*i686<br>         yum install -y libXau.*x86_64<br>         yum install -y libXi.*i686<br>         yum install -y libXi.*x86_64<br>         yum install -y libXtst.*i686<br>         yum install -y libXtst.*x86_64<br>         yum install -y libXrender.*i686<br>         yum install -y libXrender.*x86_64<br>         yum install -y libXrender-devel.*i686<br>         yum install -y libXrender-devel.*x86_64<br>         yum install -y make<br>         yum install -y net-tools  <br>         yum install -y nfs-utils<br>         yum install -y smartmontools<br>         yum install -y sysstat<br>     elif [ ${DB_VERSION} = 11.2.0.4 ] &amp;&amp; [ ${OS_VERSION} = linux6 ]; then<br>         yum install -y binutils<br>         yum install -y compat-libcap1<br>         yum install -y compat-libstdc++-33.*i686<br>         yum install -y compat-libstdc++-33.*x86_64<br>         yum install -y gcc<br>         yum install -y gcc-c++<br>         yum install -y glibc.*i686<br>         yum install -y glibc.*x86_64<br>         yum install -y glibc-devel.*i686<br>         yum install -y glibc-devel.*x86_64<br>         yum install -y ksh<br>         yum install -y libgcc.*i686<br>         yum install -y libgcc.*x86_64<br>         yum install -y libstdc++.*i686<br>         yum install -y libstdc++.*x86_64<br>         yum install -y libstdc++-devel.*i686<br>         yum install -y libstdc++-devel.*x86_64<br>         yum install -y libaio.*i686<br>         yum install -y libaio.*x86_64<br>         yum install -y libaio-devel*i686<br>         yum install -y libaio-devel*x86_64<br>         yum install -y make<br>         yum install -y sysstat<br>     elif [ ${DB_VERSION} = 11.2.0.4 ] &amp;&amp; [ ${OS_VERSION} = linux7 ]; then<br>         yum install -y binutils<br>         yum install -y compat-libcap1<br>         yum install -y compat-libstdc++-33.*i686<br>         yum install -y compat-libstdc++-33.*x86_64<br>         yum install -y elfutils-libelf<br>         yum install -y elfutils-libelf-devel<br>         yum install -y gcc<br>         yum install -y gcc-c++<br>         yum install -y glibc.*i686<br>         yum install -y glibc.*x86_64<br>         yum install -y glibc-devel.*i686<br>         yum install -y glibc-devel.*x86_64<br>         yum install -y ksh<br>         yum install -y libaio.*i686<br>         yum install -y libaio.*x86_64<br>         yum install -y libstdc++-devel.*i686<br>         yum install -y libstdc++-devel.*x86_64<br>         yum install -y libgcc.*i686<br>         yum install -y libgcc.*x86_64<br>         yum install -y libstdc++.*i686<br>         yum install -y libstdc++.*x86_64<br>         yum install -y libaio-devel*i686<br>         yum install -y libaio-devel*x86_64<br>         yum install -y libXi.*i686<br>         yum install -y libXi.*x86_64<br>         yum install -y libXtst.*i686<br>         yum install -y libXtst.*x86_64<br>         yum install -y make<br>         yum install -y sysstat<br>     elif [ ${DB_VERSION} = 19.3.0.0 ] &amp;&amp; [ ${OS_VERSION} = linux7 ]; then<br>         yum install -y bc<br>         yum install -y binutils<br>         yum install -y compat-libcap1<br>         yum install -y compat-libstdc++-33.*i686<br>         yum install -y compat-libstdc++-33.*x86_64<br>         yum install -y gcc<br>         yum install -y gcc-c++<br>         yum install -y elfutils-libelf<br>         yum install -y elfutils-libelf-devel<br>         yum install -y fontconfig-devel<br>         yum install -y glibc.*i686<br>         yum install -y glibc.*x86_64<br>         yum install -y glibc-devel.*i686<br>         yum install -y glibc-devel.*x86_64<br>         yum install -y ksh<br>         yum install -y libaio.*i686<br>         yum install -y libaio.*x86_64<br>         yum install -y libaio-devel*i686<br>         yum install -y libaio-devel*x86_64<br>         yum install -y libgcc.*i686<br>         yum install -y libgcc.*x86_64<br>         yum install -y libstdc++.*i686<br>         yum install -y libstdc++.*x86_64<br>         yum install -y libstdc++-devel.*i686<br>         yum install -y libstdc++-devel.*x86_64<br>         yum install -y libxcb.*i686<br>         yum install -y libxcb.*x86_64<br>         yum install -y libX11.*i686<br>         yum install -y libX11.*x86_64<br>         yum install -y libXau.*i686<br>         yum install -y libXau.*x86_64<br>         yum install -y libXi.*i686<br>         yum install -y libXi.*x86_64<br>         yum install -y libXtst.*i686<br>         yum install -y libXtst.*x86_64<br>         yum install -y libXrender.*i686<br>         yum install -y libXrender.*x86_64<br>         yum install -y libXrender-devel.*i686<br>         yum install -y libXrender-devel.*x86_64<br>         yum install -y make<br>         yum install -y net-tools  <br>         yum install -y nfs-utils<br>         yum install -y smartmontools<br>         yum install -y sysstat<br>     fi<br> fi</p> 
<p>#verify rpm<br> echo "#################################" &gt; rpm.log<br> echo "check rpm: " &gt;&gt; rpm.log<br> if [ ${DB_VERSION} = 12.2.0.1 ] &amp;&amp; [ ${OS_VERSION} = linux6 ]; then<br> rpm -q --qf '%{NAME}-%{VERSION}-%{RELEASE} (%{ARCH})\n' bc \<br>     binutils \<br>     compat-libcap1 \<br>     compat-libstdc++-33 \<br>     e2fsprogs \<br>     e2fsprogs-libs \<br>     glibc \<br>     glibc-devel \<br>     ksh \<br>     libaio \<br>     libaio-devel \<br>     libX11 \<br>     libXau \<br>     libXi \<br>     libXtst \<br>     libXrender \<br>     libXrender-devel \<br>     libgcc \<br>     libstdc++ \<br>     libstdc++-devel \<br>     libxcb \<br>     make \<br>     net-tools \<br>     nfs-utils \<br>     smartmontools \<br>     sysstat &gt;&gt; rpm.log<br> elif [ ${DB_VERSION} = 12.2.0.1 ] &amp;&amp; [ ${OS_VERSION} = linux7 ]; then<br> rpm -q --qf '%{NAME}-%{VERSION}-%{RELEASE} (%{ARCH})\n' bc \<br>     binutils \<br>     compat-libcap1 \<br>     compat-libstdc++-33 \<br>     glibc \<br>     glibc-devel \<br>     ksh \<br>     libaio \<br>     libaio-devel \<br>     libX11 \<br>     libXau \<br>     libXi \<br>     libXtst \<br>     libXrender \<br>     libXrender-devel \<br>     libgcc \<br>     libstdc++ \<br>     libstdc++-devel \<br>     libxcb \<br>     make \<br>     nfs-utils \<br>     net-tools \<br>     smartmontools \<br>     sysstat &gt;&gt; rpm.log<br> elif [ ${DB_VERSION} = 19.3.0.0 ] &amp;&amp; [ ${OS_VERSION} = linux7 ]; then<br> rpm -q --qf '%{NAME}-%{VERSION}-%{RELEASE} (%{ARCH})\n' bc \<br>     binutils \<br>     compat-libcap1 \<br>     compat-libstdc++-33 \<br>     elfutils-libelf \<br>     fontconfig-devel \<br>     gcc \<br>     gcc-c++ \<br>     glibc \<br>     glibc-devel \<br>     ksh \<br>     libaio \<br>     libaio-devel \<br>     libX11 \<br>     libXau \<br>     libXi \<br>     libXtst \<br>     libXrender \<br>     libXrender-devel \<br>     libgcc \<br>     libstdc++ \<br>     libstdc++-devel \<br>     libxcb \<br>     make \<br>     smartmontools \<br>     sysstat &gt;&gt; rpm.log<br> elif [ ${DB_VERSION} = 11.2.0.4 ] &amp;&amp; [ ${OS_VERSION} = linux6 ]; then<br> rpm -q --qf '%{NAME}-%{VERSION}-%{RELEASE} (%{ARCH})\n' binutils \<br>     compat-libstdc++-33 \<br>     compat-libcap1 \<br>     gcc \<br>     gcc-c++ \<br>     glibc \<br>     glibc-devel \<br>     ksh \<br>     libaio \<br>     libaio-devel \<br>     libgcc \<br>     libstdc++ \<br>     libstdc++-devel \<br>     make \<br>     sysstat &gt;&gt; rpm.log<br> elif [ ${DB_VERSION} = 11.2.0.4 ] &amp;&amp; [ ${OS_VERSION} = linux7 ]; then<br> rpm -q --qf '%{NAME}-%{VERSION}-%{RELEASE} (%{ARCH})\n' binutils \<br>     compat-libstdc++-33 \<br>     compat-libcap1 \<br>     elfutils-libelf \<br>     elfutils-libelf-devel \<br>     gcc \<br>     gcc-c++ \<br>     glibc \<br>     glibc-devel \<br>     ksh \<br>     libaio \<br>     libaio-devel \<br>     libgcc \<br>     libstdc++ \<br>     libstdc++-devel \<br>     libXi \<br>     libXtst \<br>     make \<br>     sysstat &gt;&gt; rpm.log<br> fi<br> echo "#################################" &gt;&gt; rpm.log<br> if [ `grep "not installed" $SCRIPT_DIR/rpm.log | wc -l` -gt 0 ]; then<br>     echo -e "################################################### \033[5m"<br>     echo -e "\033[33m some RPM package is not installed, please check! \033[0m"<br>     echo "###################################################"<br>     exit<br> else<br>     cat $SCRIPT_DIR/rpm.log &gt; install.log<br>     rm -rf $SCRIPT_DIR/rpm.log<br> fi<br> echo "RPM is installed ----- SUCCEEDED" &gt;&gt; install.log</p> 
<p>#-------------------------#<br> # Initializes system parameters<br> #-------------------------#<br> #ENV_BASE_DIR=/u01/app<br> ENV_ORACLE_BASE=$ENV_BASE_DIR/oracle<br> ##set ENV_ORACLE_HOME  #v2.0<br> if [ ${DB_VERSION} = "12.2.0.1" ];then<br>     ENV_ORACLE_HOME=$ENV_ORACLE_BASE/product/12.2.0/db_1<br> elif [ ${DB_VERSION} = "11.2.0.4" ];then<br>     ENV_ORACLE_HOME=$ENV_ORACLE_BASE/product/11.2<br> elif [ ${DB_VERSION} = "19.3.0.0" ];then<br>     ENV_ORACLE_HOME=$ENV_ORACLE_BASE/product/19.3.0/db_1<br> else <br>     echo "Error database version! please check again!"<br>     exit<br> fi</p> 
<p>#-------------------------#<br> # set memory variable<br> #-------------------------#<br> #ENV_NLS_LANG=AMERICAN_AMERICA.${NLS_LANG}  #AMERICAN_AMERICA.ZHS16GBK<br> yum -y install bc<br> MemTotalKB=`awk '/MemTotal/{print $2}' /proc/meminfo`<br> MemTotalMB=`echo "scale=0;$MemTotalKB / 1024 * ${MemPercent} / 100"| bc`</p> 
<p>#-------------------------#<br> #Configure the hostname，modify /etc/hosts file<br> #-------------------------#<br> if [ $host_name = "localhost.localdomain" ]; then<br>     #To be updated<br>     echo "current hostname is localhost.localdomain, please rename in file /etc/sysconfig/network"<br>     if [ ${OS_VERSION} = linux6 ]; then<br>         read -p "please input hostname: " INPUT_HOSTNAME<br>         host_name=${INPUT_HOSTNAME}<br>         sed -i "s/localhost.localdomain/${host_name}/g" /etc/sysconfig/network<br>         hostname ${host_name}<br>         cp /etc/hosts /etc/hosts.bak<br>         echo "${hostip}    ${host_name}" &gt;&gt; /etc/hosts<br>         echo "modify /etc/hosts ----- SUCCEEDED" &gt;&gt; install.log<br>     elif [ ${OS_VERSION} = linux7 ]; then<br>         read -p "please input hostname: " INPUT_HOSTNAME<br>         host_name=${INPUT_HOSTNAME}<br>         sed -i "s/localhost.localdomain/${host_name}/g" /etc/hostname<br>         hostname ${host_name}<br>         cp /etc/hosts /etc/hosts.bak<br>         echo "${hostip}    ${host_name}" &gt;&gt; /etc/hosts<br>         echo "modify /etc/hosts ----- SUCCEEDED" &gt;&gt; install.log<br>     else <br>         echo "OS VERSION error!!!"<br>         exit <br>     fi<br> else<br>     if [ `grep ${host_name} /etc/hosts | wc -l` -gt 0 ]; then<br>         echo "hostname ${host_name} is exist in file /etc/hosts ----- Not Modified" &gt;&gt; install.log<br>     else<br>         cp /etc/hosts /etc/hosts.bak<br>         echo "${hostip}    ${host_name}" &gt;&gt; /etc/hosts<br>         echo "modify /etc/hosts ----- SUCCEEDED" &gt;&gt; install.log<br>     fi<br> fi<br> #-------------------------#<br> #Configure the network<br> #-------------------------#<br> #Turn off the firewall<br> if [ ${OS_VERSION} = linux6 ]; then<br>     #Turn off the firewall(Linux 6)<br>     if [ `chkconfig --list | grep tables | grep on | wc -l` -gt 0 ]; then<br>         service iptables stop<br>         chkconfig --level 2345 iptables off<br>         service ip6tables stop<br>         chkconfig --level 2345 ip6tables off<br>         service network restart<br>         echo "Firewall closed ----- SUCCEEDED" &gt;&gt; install.log<br>     else<br>         echo "Firewall checked, not turned on ----- Not Modified" &gt;&gt; install.log<br>     fi<br> elif [ ${OS_VERSION} = linux7 ]; then<br>     #Turn off the firewall(Linux 7)<br>     if [ `systemctl status firewalld.service | grep running | wc -l` -gt 0 ]; then<br>         systemctl stop firewalld.service<br>         systemctl disable firewalld.service<br>         service network restart<br>         echo "Firewall closed ----- SUCCEEDED" &gt;&gt; install.log<br>     else<br>         echo "Firewall checked, not turned on ----- Not Modified" &gt;&gt; install.log<br>     fi<br> else <br>     echo "OS VERSION error!!!"<br>     exit <br> fi</p> 
<p>#-------------------------#<br> #Turn off the NetworkManager<br> #-------------------------#<br> if [ ${OS_VERSION} = linux6 ]; then<br>     #Turn off the NetworkManager(Linux 6)<br>     if [ `chkconfig --list | grep NetworkManager | grep on | wc -l` -gt 0 ]; then<br>         service NetworkManager stop<br>         chkconfig --level 2345 NetworkManager off<br>         service NetworkManager off<br>         service network restart<br>         echo "NetworkManager closed ----- SUCCEEDED" &gt;&gt; install.log<br>     else<br>         echo "NetworkManager checked, not turned on ----- Not Modified" &gt;&gt; install.log<br>     fi<br> elif [ ${OS_VERSION} = linux7 ]; then<br>     #Turn off the NetworkManager(Linux 7)<br>     if [ `systemctl status NetworkManager.service | grep running | wc -l` -gt 0 ]; then<br>         systemctl stop NetworkManager.service<br>         systemctl disable NetworkManager.service<br>         service network restart<br>         echo "NetworkManager closed ----- SUCCEEDED" &gt;&gt; install.log<br>     else<br>         echo "NetworkManager checked, not turned on ----- Not Modified" &gt;&gt; install.log<br>     fi<br> fi</p> 
<p>#-------------------------#<br> #config NTP service<br> #-------------------------#<br> if [ ${OS_VERSION} = linux6 ]; then<br>     # Config NTP service for Linux 5/6<br>     if [ `cat /etc/ntp.conf | grep 10.0.1.33 | wc -l` -gt 0 ]; then<br>         echo "NTP checked, already on ----- Not Modified" &gt;&gt; install.log<br>     else<br>         wget http://${SITE2}/Tools/NTP/ntp.conf -O /etc/ntp.conf<br>         chkconfig ntpd on<br>         service ntpd stop; ntpd -qg ; service ntpd start<br>         echo "NTP configure ----- SUCCEEDED" &gt;&gt; install.log<br>     fi<br> elif [ ${OS_VERSION} = linux7 ]; then<br>     # Config NTP service for Linux 7<br>     if [ `cat /etc/chrony.conf | grep 10.0.1.33 | wc -l` -gt 0 ]; then<br>         echo "NTP checked, already on ----- Not Modified" &gt;&gt; install.log<br>     else<br>         wget http://${SITE2}/Tools/NTP/chrony.conf -O /etc/chrony.conf<br>         systemctl enable chronyd.service<br>         systemctl start chronyd.service<br>         echo "NTP configure ----- SUCCEEDED" &gt;&gt; install.log<br>     fi<br> fi</p> 
<p>#-------------------------#<br> #config time synchronization  v2.0<br> #-------------------------#<br> /usr/sbin/ntpdate -u ${DNS}<br> #如果不是虚拟机，设置硬件时钟同步<br> if [ `dmidecode | grep "Product" | grep "VMware" | wc -l` -eq 0 ]; then<br>     echo '#!/bin/sh ' &gt; /etc/sync_hw_clock.sh<br>     echo '## Sync time from system time to hardware clock.  Add by OracleInstall.sh.  ${DATETIME}' &gt;&gt; /etc/sync_hw_clock.sh<br>     echo '/usr/sbin/hwclock  -w ' &gt;&gt; /etc/sync_hw_clock.sh<br>     chmod +x /etc/sync_hw_clock.sh<br>     echo  '*/5 * * * * /etc/sync_hw_clock.sh &gt; /dev/null 2&gt;&amp;1'  &gt;&gt; /var/spool/cron/root<br> fi</p> 
<p>#-------------------------#<br> #Create group<br> #-------------------------#<br> if [ `grep "^dba:" /etc/group | wc -l` -gt 0 ]; then<br>     echo "dba group is exist ----- Not Modified" &gt;&gt; install.log<br> else<br>     groupadd dba<br>     echo "dba group is created ----- SUCCEEDED" &gt;&gt; install.log<br> fi<br> if [ `grep "^oinstall:" /etc/group | wc -l` -gt 0 ]; then<br>     echo "oinstall group is exist ----- Not Modified" &gt;&gt; install.log<br> else<br>     groupadd oinstall<br>     echo "oinstall group is created ----- SUCCEEDED" &gt;&gt; install.log<br> fi</p> 
<p>#-------------------------#<br> #Create user<br> #-------------------------#<br> if [ `grep "^oracle:" /etc/passwd | wc -l` -gt 0 ]; then<br>     echo "oracle user is exist ----- Not Modified" &gt;&gt; install.log<br> else<br>     useradd oracle -g oinstall -G dba<br>     echo "oracle user is created ----- SUCCEEDED" &gt;&gt; install.log<br>     echo "${ORAPASSWD}" |passwd --stdin oracle<br>     echo "oracle password is updated ----- SUCCEEDED" &gt;&gt; install.log<br> fi</p> 
<p>#-------------------------#<br> #Configure /etc/sysctl.conf file<br> #    v3.1<br> #-------------------------#<br> # kernel.shmall取总内存的页数（每页4K），kernel.shmmax取内存同样大小数值<br> if [ ${OS_VERSION} = linux6 ]; then<br>     if [ `grep "^net.core.wmem_max" /etc/sysctl.conf | wc -l` -gt 0 ]; then<br>         echo "/etc/sysctl.conf file is modified ----- Not Modified" &gt;&gt; install.log<br>     else<br>         cp /etc/sysctl.conf  /etc/sysctl.conf.bak<br>         shmall=$(($MemTotalKB / 4))<br>         # v4.0 修改512 --&gt; 1024<br>         shmmax=$(($MemTotalKB * 1024))<br>         cat &gt;&gt; /etc/sysctl.conf&lt;&lt;EOF</p> 
<p># modify for oracle<br> fs.aio-max-nr = 1048576<br> fs.file-max = 6815744<br> kernel.shmmni = 4096<br> #kernel.shmall = ${shmall}<br> kernel.shmmax = ${shmmax}<br> kernel.sem = 250 32000 100 128<br> net.ipv4.ip_local_port_range = 9000 65500<br> net.ipv4.tcp_rmem = 4096 87380 4194304<br> net.ipv4.tcp_wmem = 4096 16384 4194304<br> net.core.rmem_default = 262144<br> net.core.rmem_max = 4194304<br> net.core.wmem_default = 262144<br> net.core.wmem_max = 1048586<br> kernel.panic_on_oops = 1<br> EOF<br>         sysctl -p<br>         echo "/etc/sysctl.conf file is modified ----- SUCCEEDED" &gt;&gt; install.log<br>     fi<br> elif [ ${OS_VERSION} = linux7 ]; then<br>     if [ -e /etc/sysctl.d/97-oracledatabase-sysctl.conf ] &amp;&amp; [ `grep "^net.core.wmem_max" /etc/sysctl.d/97-oracledatabase-sysctl.conf | wc -l` -gt 0 ]; then<br>         echo "/etc/sysctl.conf file is modified ----- Not Modified" &gt;&gt; install.log<br>     else<br>         shmall=$(($MemTotalKB / 4))<br>         # v4.0<br>         shmmax=$(($MemTotalKB * 1024))<br>         cat &gt;&gt; /etc/sysctl.d/97-oracledatabase-sysctl.conf&lt;&lt;EOF</p> 
<p># modify for oracle<br> fs.aio-max-nr = 1048576<br> fs.file-max = 6815744<br> kernel.shmmni = 4096<br> #kernel.shmall = ${shmall}<br> kernel.shmmax = ${shmmax}<br> kernel.sem = 250 32000 100 128<br> net.ipv4.ip_local_port_range = 9000 65500<br> net.ipv4.tcp_rmem = 4096 87380 4194304<br> net.ipv4.tcp_wmem = 4096 16384 4194304<br> net.core.rmem_default = 262144<br> net.core.rmem_max = 4194304<br> net.core.wmem_default = 262144<br> net.core.wmem_max = 1048586<br> kernel.panic_on_oops = 1<br> EOF<br>         /sbin/sysctl --system<br>         echo "/etc/sysctl.conf file is modified ----- SUCCEEDED" &gt;&gt; install.log<br>     fi<br> fi</p> 
<p><br> ##-------------------------#<br> ##关闭透明大页<br> ##    v4.0<br> ##-------------------------#<br> #if [ ${OS_VERSION} = linux6 ]; then<br> #<br> #elif [ ${OS_VERSION} = linux7 ]; then<br> #    if [ `grep AnonHugePages /proc/meminfo | grep -v grep | awk '{print $2}'` -gt 0 ]; then<br> #        echo "/etc/default/grub file is modified ----- Not Modified" &gt;&gt; install.log<br> #    else<br> #        cp /etc/default/grub /etc/default/grub.bak<br> #        cat &gt;&gt; /etc/default/grub&lt;&lt;EOF<br> #<br> ## modify for oracle<br> #GRUB_CMDLINE_LINUX="crashkernel=auto rd.lvm.lv=vg_root/lv_root rd.lvm.lv=vg_root/lv_swap rhgb quiet transparent_hugepage=never"<br> #EOF<br> #        grub2-mkconfig -o /boot/grub2/grub.cfg<br> #        echo "/etc/default/grub file is modified ----- SUCCEEDED" &gt;&gt; install.log<br> #    fi<br> #fi</p> 
<p>#-------------------------#<br> #Configure /etc/security/limits.conf file<br> #-------------------------#<br> #if [ `grep "^oracle    soft    nproc    2047" /etc/security/limits.conf | wc -l` -gt 0 ]</p> 
<p><br> if [ ${DB_VERSION} = 11.2.0.4 ]; then<br>     if [ `grep "16384" /etc/security/limits.conf | wc -l` -gt 0 ]; then<br>         echo "/etc/security/limits.conf file is modified ----- Not Modified" &gt;&gt; install.log<br>     else<br>         cp /etc/security/limits.conf  /etc/security/limits.conf.bak<br>         cat &gt;&gt; /etc/security/limits.conf&lt;&lt;EOF</p> 
<p># modify for oracle<br> *    hard    nofile    65536<br> *    soft    nofile    65536<br> *    hard    nproc    16384<br> *    soft    nproc    16384<br> *    hard    stack    32768<br> *    soft    stack    10240<br> EOF<br>         echo "/etc/security/limits.conf file is modified ----- SUCCEEDED" &gt;&gt; install.log<br>     fi<br> elif [[ ${DB_VERSION} = 12.2.0.1 ]] || [[ ${DB_VERSION} = 19.3.0.0 ]]; then<br>     if [ `grep "16384" /etc/security/limits.conf | wc -l` -gt 0 ]; then<br>         echo "/etc/security/limits.conf file is modified ----- Not Modified" &gt;&gt; install.log<br>     else<br>         cp /etc/security/limits.conf  /etc/security/limits.conf.bak<br>         cat &gt;&gt; /etc/security/limits.conf&lt;&lt;EOF</p> 
<p># modify for oracle<br> *    hard    nofile    65536<br> *    soft    nofile    65536<br> *    hard    nproc    16384<br> *    soft    nproc    16384<br> *    hard    stack    32768<br> *    soft    stack    10240<br> oracle    soft    memlock    3145728<br> oracle    hard    memlock    3145728</p> 
<p>EOF<br>         echo "/etc/security/limits.conf file is modified ----- SUCCEEDED" &gt;&gt; install.log<br>     fi<br> fi</p> 
<p><br> #-------------------------#<br> #Configure /etc/pam.d/login file<br> #-------------------------#<br> if [ `grep "pam_limits.so" /etc/pam.d/login | wc -l` -gt 0 ]; then<br>     echo "/etc/pam.d/login file is modified ----- Not Modified" &gt;&gt; install.log<br> else<br>     cp /etc/pam.d/login  /etc/pam.d/login.bak<br>     echo "session    required    pam_limits.so" &gt;&gt; /etc/pam.d/login<br>     echo "/etc/pam.d/login file is modified ----- SUCCEEDED" &gt;&gt; install.log<br> fi</p> 
<p>#-------------------------#<br> #Create oracle directory<br> #-------------------------#<br> if [ ! -d "${ENV_ORACLE_HOME}" ]; then<br>     mkdir -p ${ENV_ORACLE_HOME}<br>     chown -R oracle:oinstall ${ENV_BASE_DIR}<br>     chmod -R 775 ${ENV_BASE_DIR}<br>     echo "directory ${ENV_ORACLE_HOME} is created ----- SUCCEEDED" &gt;&gt; install.log<br> else    <br>     echo "directory ${ENV_ORACLE_HOME} is exist ----- Not Modified" &gt;&gt; install.log<br> fi</p> 
<p>#-------------------------#<br> #Create OraInventory<br> #-------------------------#<br> if [ ${DB_VERSION} = 12.2.0.1 ]; then<br>     touch /etc/oraInst.loc<br>     echo "inventory_loc=/opt/oraInventory" &gt;&gt; /etc/oraInst.loc<br>     echo "inst_group=oinstall" &gt;&gt; /etc/oraInst.loc<br>     mkdir -p /opt/oraInventory<br>     chmod -R a+rw /opt/oraInventory<br> fi</p> 
<p>#-------------------------#<br> #Configure oracle's ENV<br> #-------------------------#<br> if [ ${DB_VERSION} = 12.2.0.1 ]; then<br>     if [ `grep "export ORACLE" /home/oracle/.bash_profile | wc -l` -gt 0 ]; then<br>         echo "variable ORACLE ENV is exist ----- Not Modified" &gt;&gt; install.log<br>     else    <br>         cp /home/oracle/.bash_profile /home/oracle/.bash_profile.bak<br>         echo "" &gt;&gt; /home/oracle/.bash_profile<br>         echo "export ORACLE_SID=${ORACLE_SID}" &gt;&gt; /home/oracle/.bash_profile<br>         echo "export GLOBLE_DBName=${GLOBLE_DBName}" &gt;&gt; /home/oracle/.bash_profile<br>         echo "export ORACLE_BASE=${ENV_ORACLE_BASE}" &gt;&gt; /home/oracle/.bash_profile<br>         echo 'export ORACLE_HOME=$ORACLE_BASE/product/12.2.0/db_1' &gt;&gt; /home/oracle/.bash_profile<br>         echo 'export PATH=$ORACLE_HOME/bin:$ORACLE_HOME/OPatch:$PATH' &gt;&gt; /home/oracle/.bash_profile<br>         #v1.3 &lt;db_name&gt;/&lt;ORACLE_SID&gt;<br>         echo "TRACE=$ENV_ORACLE_BASE/diag/rdbms/$GLOBLE_DBName/$ORACLE_SID/trace" &gt;&gt; /home/oracle/.bash_profile<br>         source /home/oracle/.bash_profile<br>         echo "variable ORACLE ENV is modified ----- SUCCEEDED" &gt;&gt; install.log<br>     fi<br> elif [ ${DB_VERSION} = 11.2.0.4 ]; then<br>     if [ `grep "export ORACLE" /home/oracle/.bash_profile | wc -l` -gt 0 ]; then<br>         echo "variable ORACLE ENV is exist ----- Not Modified" &gt;&gt; install.log<br>     else    <br>         cp /home/oracle/.bash_profile /home/oracle/.bash_profile.bak<br>         echo "" &gt;&gt; /home/oracle/.bash_profile<br>         echo "export ORACLE_SID=${ORACLE_SID}" &gt;&gt; /home/oracle/.bash_profile<br>         echo "export GLOBLE_DBName=${GLOBLE_DBName}" &gt;&gt; /home/oracle/.bash_profile<br>         echo "export ORACLE_BASE=${ENV_ORACLE_BASE}" &gt;&gt; /home/oracle/.bash_profile<br>         echo 'export ORACLE_HOME=$ORACLE_BASE/product/11.2' &gt;&gt; /home/oracle/.bash_profile<br>         echo 'export PATH=$ORACLE_HOME/bin:$ORACLE_HOME/OPatch:$PATH' &gt;&gt; /home/oracle/.bash_profile<br>         #v1.3 &lt;db_name&gt;/&lt;ORACLE_SID&gt;<br>         echo "TRACE=$ENV_ORACLE_BASE/diag/rdbms/$GLOBLE_DBName/$ORACLE_SID/trace" &gt;&gt; /home/oracle/.bash_profile<br>         source /home/oracle/.bash_profile<br>         echo "variable ORACLE ENV is modified ----- SUCCEEDED" &gt;&gt; install.log<br>     fi<br> elif [ ${DB_VERSION} = 19.3.0.0 ]; then<br>     if [ `grep "export ORACLE" /home/oracle/.bash_profile | wc -l` -gt 0 ]; then<br>         echo "variable ORACLE ENV is exist ----- Not Modified" &gt;&gt; install.log<br>     else    <br>         cp /home/oracle/.bash_profile /home/oracle/.bash_profile.bak<br>         echo "" &gt;&gt; /home/oracle/.bash_profile<br>         echo "export ORACLE_SID=${ORACLE_SID}" &gt;&gt; /home/oracle/.bash_profile<br>         echo "export GLOBLE_DBName=${GLOBLE_DBName}" &gt;&gt; /home/oracle/.bash_profile<br>         echo "export ORACLE_BASE=${ENV_ORACLE_BASE}" &gt;&gt; /home/oracle/.bash_profile<br>         echo 'export ORACLE_HOME=$ORACLE_BASE/product/19.3.0/db_1' &gt;&gt; /home/oracle/.bash_profile<br>         echo 'export PATH=$ORACLE_HOME/bin:$ORACLE_HOME/OPatch:$PATH' &gt;&gt; /home/oracle/.bash_profile<br>         echo "TRACE=$ENV_ORACLE_BASE/diag/rdbms/$GLOBLE_DBName/$ORACLE_SID/trace" &gt;&gt; /home/oracle/.bash_profile<br>         source /home/oracle/.bash_profile<br>         echo "variable ORACLE ENV is modified ----- SUCCEEDED" &gt;&gt; install.log<br>     fi<br> fi</p> 
<p>#-------------------------#<br> # judge software package directory<br> # v1.0<br> #    v3.0<br> #      v4.0<br> #-------------------------#<br> if [[ $INPUT_CHOICE = "createDB" ]] || [[ $INPUT_CHOICE = "installSoftwareOnly" ]];then<br>     read -p "Do you want to use the default path of the database package (y/n) [y]? " INPUT_DIR<br>     if [[ -z "${INPUT_DIR}" ]] || [[ $INPUT_DIR = "/tmp" ]] || [[ $INPUT_DIR = "y" ]] || [[ $INPUT_DIR = "Y" ]];then<br>         SOFTWATE_DIR=/tmp<br>         #download database software package v2.0<br>         if [ ${DB_VERSION} = "11.2.0.4" ];then<br>             unzip -o ${SOFTWATE_DIR}/p13390677_112040_Linux-x86-64_1of7.zip -d ${SOFTWATE_DIR}<br>             unzip -o ${SOFTWATE_DIR}/p13390677_112040_Linux-x86-64_2of7.zip -d ${SOFTWATE_DIR}<br>         elif [ ${DB_VERSION} = "12.2.0.1" ];then<br>             unzip -o ${SOFTWATE_DIR}/linuxx64_12201_database.zip -d ${SOFTWATE_DIR}<br>         elif [ ${DB_VERSION} = "19.3.0.0" ];then<br>             unzip -o ${SOFTWATE_DIR}/LINUX.X64_193000_db_home.zip -d ${ENV_ORACLE_HOME}<br>             chown -R oracle:oinstall ${ENV_ORACLE_HOME}<br>             <br>         else<br>             echo "Error database version! please check again!"<br>             exit<br>         fi<br>     elif [[ $INPUT_DIR = "n" ]] || [[ $INPUT_DIR = "N" ]];then<br>         read -p "please input software directory: " SOFTWATE_DIR<br>         echo -e "\033[37;31;5mMake sure the database installation package is in the ${SOFTWATE_DIR} directory\033[39;49;0m"<br>         #download database software package v2.0<br>         if [ ${DB_VERSION} = "11.2.0.4" ];then<br>             unzip -o ${SOFTWATE_DIR}/p13390677_112040_Linux-x86-64_1of7.zip -d ${SOFTWATE_DIR}<br>             unzip -o ${SOFTWATE_DIR}/p13390677_112040_Linux-x86-64_2of7.zip -d ${SOFTWATE_DIR}<br>         elif [ ${DB_VERSION} = "12.2.0.1" ];then<br>             unzip -o ${SOFTWATE_DIR}/linuxx64_12201_database.zip -d ${SOFTWATE_DIR}<br>         elif [ ${DB_VERSION} = "19.3.0.0" ];then<br>             unzip -o ${SOFTWATE_DIR}/LINUX.X64_193000_db_home.zip -d ${ENV_ORACLE_HOME}<br>             chown -R oracle:oinstall ${ENV_ORACLE_HOME}<br>         else<br>             echo "Error database version! please check again!"<br>             exit<br>         fi<br>     else <br>         SOFTWATE_DIR=$INPUT_DIR<br>         echo -e "\033[37;31;5mMake sure the database installation package is in the ${SOFTWATE_DIR} directory\033[39;49;0m"<br>         #download database software package v2.0<br>         if [ ${DB_VERSION} = "11.2.0.4" ];then<br>             unzip -o ${SOFTWATE_DIR}/p13390677_112040_Linux-x86-64_1of7.zip -d ${SOFTWATE_DIR}<br>             unzip -o ${SOFTWATE_DIR}/p13390677_112040_Linux-x86-64_2of7.zip -d ${SOFTWATE_DIR}<br>         elif [ ${DB_VERSION} = "12.2.0.1" ];then<br>             unzip -o ${SOFTWATE_DIR}/linuxx64_12201_database.zip -d ${SOFTWATE_DIR}<br>         elif [ ${DB_VERSION} = "19.3.0.0" ];then<br>             unzip -o ${SOFTWATE_DIR}/LINUX.X64_193000_db_home.zip -d ${ENV_ORACLE_HOME}<br>             chown -R oracle:oinstall ${ENV_ORACLE_HOME}<br>         else<br>             echo "Error database version! please check again!"<br>             exit<br>         fi<br>     fi<br> fi</p> 
<p>#Check installation log<br> echo "#################################"<br> cat install.log<br> echo "#################################"</p> 
<p><br> function installDBsoftware(){<!-- --><br> #定义install应答文件<br> if [ ${DB_VERSION} = 12.2.0.1 ]; then<br> cat &gt; db_install.rsp&lt;&lt;EOF<br> oracle.install.responseFileVersion=/oracle/install/rspfmt_dbinstall_response_schema_v12.2.0<br> oracle.install.option=INSTALL_DB_SWONLY<br> #ORACLE_HOSTNAME=$host_name<br> UNIX_GROUP_NAME=oinstall<br> INVENTORY_LOCATION=${ENV_BASE_DIR}/oraInventory<br> SELECTED_LANGUAGES=en,zh_CN<br> ORACLE_HOME=$ENV_ORACLE_HOME<br> ORACLE_BASE=$ENV_ORACLE_BASE<br> oracle.install.db.InstallEdition=EE<br> oracle.install.db.OSDBA_GROUP=dba<br> oracle.install.db.OSOPER_GROUP=oinstall<br> oracle.install.db.OSBACKUPDBA_GROUP=dba<br> oracle.install.db.OSDGDBA_GROUP=dba<br> oracle.install.db.OSKMDBA_GROUP=dba<br> oracle.install.db.OSRACDBA_GROUP=dba<br> #oracle.install.db.DBA_GROUP=dba<br> #oracle.install.db.OPER_GROUP=oinstall<br> oracle.install.db.isRACOneInstall=false<br> oracle.install.db.config.starterdb.type=GENERAL_PURPOSE<br> oracle.install.db.config.starterdb.globalDBName=$GLOBLE_DBName<br> oracle.install.db.config.starterdb.SID=$ORACLE_SID<br> oracle.install.db.ConfigureAsContainerDB=false<br> #oracle.install.db.config.starterdb.characterSet=${NLS_LANG}<br> oracle.install.db.config.starterdb.memoryOption=true<br> #oracle.install.db.config.starterdb.memoryLimit=$MemTotalMB<br> oracle.install.db.config.starterdb.installExampleSchemas=false<br> #oracle.install.db.config.starterdb.enableSecuritySettings=false<br> #oracle.install.db.config.starterdb.password.ALL=$SYSTEM_PASSWD<br> oracle.install.db.config.starterdb.managementOption=DEFAULT<br> #oracle.install.db.config.starterdb.control=DB_CONTROL<br> #oracle.install.db.config.starterdb.storageType=FILE_SYSTEM_STORAGE<br> #oracle.install.db.config.starterdb.automatedBackup.enable=false<br> DECLINE_SECURITY_UPDATES=true<br> #oracle.installer.autoupdates.option=SKIP_UPDATES<br> EOF<br> elif [ ${DB_VERSION} = 11.2.0.4 ]; then<br> cat &gt; db_install.rsp&lt;&lt;EOF<br> oracle.install.responseFileVersion=/oracle/install/rspfmt_dbinstall_response_schema_v11_2_0<br> oracle.install.option=INSTALL_DB_SWONLY<br> ORACLE_HOSTNAME=$host_name<br> UNIX_GROUP_NAME=oinstall<br> INVENTORY_LOCATION=${ENV_BASE_DIR}/oraInventory<br> SELECTED_LANGUAGES=en,zh_CN<br> ORACLE_HOME=$ENV_ORACLE_HOME<br> ORACLE_BASE=$ENV_ORACLE_BASE<br> oracle.install.db.InstallEdition=EE<br> oracle.install.db.DBA_GROUP=dba<br> oracle.install.db.OPER_GROUP=oinstall<br> oracle.install.db.isRACOneInstall=false<br> oracle.install.db.config.starterdb.type=GENERAL_PURPOSE<br> oracle.install.db.config.starterdb.globalDBName=$GLOBLE_DBName<br> oracle.install.db.config.starterdb.SID=$ORACLE_SID<br> #oracle.install.db.config.starterdb.characterSet=${NLS_LANG}<br> oracle.install.db.config.starterdb.memoryOption=true<br> #oracle.install.db.config.starterdb.memoryLimit=$MemTotalMB<br> oracle.install.db.config.starterdb.installExampleSchemas=false<br> oracle.install.db.config.starterdb.enableSecuritySettings=false<br> #oracle.install.db.config.starterdb.password.ALL=$SYSTEM_PASSWD<br> oracle.install.db.config.starterdb.control=DB_CONTROL<br> oracle.install.db.config.starterdb.automatedBackup.enable=false<br> DECLINE_SECURITY_UPDATES=true<br> oracle.installer.autoupdates.option=SKIP_UPDATES<br> EOF<br> elif [ ${DB_VERSION} = 19.3.0.0 ]; then<br> cat &gt; db_install.rsp&lt;&lt;EOF<br> oracle.install.responseFileVersion=/oracle/install/rspfmt_dbinstall_response_schema_v12.2.0<br> oracle.install.option=INSTALL_DB_SWONLY<br> #ORACLE_HOSTNAME=$host_name<br> UNIX_GROUP_NAME=oinstall<br> INVENTORY_LOCATION=${ENV_BASE_DIR}/oraInventory<br> SELECTED_LANGUAGES=en,zh_CN<br> ORACLE_HOME=$ENV_ORACLE_HOME<br> ORACLE_BASE=$ENV_ORACLE_BASE<br> oracle.install.db.InstallEdition=EE<br> oracle.install.db.OSDBA_GROUP=dba<br> oracle.install.db.OSOPER_GROUP=oinstall<br> oracle.install.db.OSBACKUPDBA_GROUP=dba<br> oracle.install.db.OSDGDBA_GROUP=dba<br> oracle.install.db.OSKMDBA_GROUP=dba<br> oracle.install.db.OSRACDBA_GROUP=dba<br> #oracle.install.db.DBA_GROUP=dba<br> #oracle.install.db.OPER_GROUP=oinstall<br> oracle.install.db.isRACOneInstall=false<br> oracle.install.db.config.starterdb.type=GENERAL_PURPOSE<br> oracle.install.db.config.starterdb.globalDBName=$GLOBLE_DBName<br> oracle.install.db.config.starterdb.SID=$ORACLE_SID<br> oracle.install.db.ConfigureAsContainerDB=false<br> #oracle.install.db.config.starterdb.characterSet=${NLS_LANG}<br> oracle.install.db.config.starterdb.memoryOption=true<br> #oracle.install.db.config.starterdb.memoryLimit=$MemTotalMB<br> oracle.install.db.config.starterdb.installExampleSchemas=false<br> #oracle.install.db.config.starterdb.enableSecuritySettings=false<br> #oracle.install.db.config.starterdb.password.ALL=$SYSTEM_PASSWD<br> oracle.install.db.config.starterdb.managementOption=DEFAULT<br> #oracle.install.db.config.starterdb.control=DB_CONTROL<br> #oracle.install.db.config.starterdb.storageType=FILE_SYSTEM_STORAGE<br> #oracle.install.db.config.starterdb.automatedBackup.enable=false<br> DECLINE_SECURITY_UPDATES=true<br> #oracle.installer.autoupdates.option=SKIP_UPDATES<br> EOF<br> fi</p> 
<p><br> #Install Database software<br> chown oracle.oinstall $SCRIPT_DIR/db_install.rsp</p> 
<p>if [[ ${DB_VERSION} = 12.2.0.1 ]] || [[ ${DB_VERSION} = 11.2.0.4 ]]; then<br> su - oracle &lt;&lt;EOF<br> cd $SOFTWATE_DIR/database;<br> ./runInstaller -silent -force -ignoreSysPrereqs -responseFile $SCRIPT_DIR/db_install.rsp -ignorePrereq<br> EOF<br> elif [ ${DB_VERSION} = 19.3.0.0 ]; then<br> su - oracle &lt;&lt;EOF<br> cd ${ENV_ORACLE_HOME};<br> ./runInstaller -silent -force -responseFile $SCRIPT_DIR/db_install.rsp -ignorePrereq<br> EOF<br> fi</p> 
<p><br> if [ ${DB_VERSION} = 12.2.0.1 ]; then<br>     #睡眠10分钟<br>     sleep 10m<br>     sh $ENV_BASE_DIR/oracle/product/12.2.0/db_1/root.sh  #v2.0<br> elif [ ${DB_VERSION} = 11.2.0.4 ]; then<br>     #睡眠10分钟<br>     sleep 10m<br>     sh $ENV_BASE_DIR/oraInventory/orainstRoot.sh  #v1.1<br>     sh $ENV_BASE_DIR/oracle/product/11.2/root.sh  #v1.1<br> elif [ ${DB_VERSION} = 19.3.0.0 ]; then<br>     #睡眠10分钟<br>     sleep 10m<br>     sh $ENV_BASE_DIR/oraInventory/orainstRoot.sh  #v4.0<br>     sh $ENV_BASE_DIR/oracle/product/19.3.0/db_1/root.sh<br> fi<br> echo "Database software is installed ----- SUCCEEDED" &gt;&gt; install.log<br> }</p> 
<p><br> function createDB(){<!-- --><br> #定义dbca应答文件<br> if [ ${DB_VERSION} = 12.2.0.1 ]; then<br> cat &gt; dbca.rsp&lt;&lt;EOF<br> responseFileVersion=/oracle/assistants/rspfmt_dbca_response_schema_v12.2.0<br> gdbName=${GLOBLE_DBName}<br> sid=${ORACLE_SID}<br> databaseConfigType=SI<br> createAsContainerDatabase=false<br> templateName=ORCL_TEMPLATE.dbt<br> storageType=FS<br> datafileDestination=${ENV_ORACLE_BASE}/oradata/${ORACLE_SID}<br> characterSet=${NLS_LANG}<br> nationalCharacterSet=${NLS_NCHAR_CHAR}<br> memoryPercentage=${MemPercent}<br> totalMemory=${MemTotalMB}<br> initParams=audit_trail=none<br> #automaticMemoryManagement=TRUE<br> sysPassword=${SYSTEM_PASSWD}<br> systemPassword=${SYSTEM_PASSWD}<br> databaseType=OLTP<br> #variables=DB_UNIQUE_NAME=${ORACLE_SID},ORACLE_BASE=${ENV_ORACLE_BASE},PDB_NAME=,DB_NAME=${ORACLE_SID},ORACLE_HOME=${ENV_ORACLE_HOME},SID=${ORACLE_SID}<br> EOF<br> elif [ ${DB_VERSION} = 11.2.0.4 ]; then<br> cat &gt; dbca.rsp&lt;&lt;EOF<br> [GENERAL]<br> RESPONSEFILE_VERSION = "11.2.0"<br> OPERATION_TYPE = "createDatabase"<br> [CREATEDATABASE]<br> GDBNAME = "$GLOBLE_DBName"<br> SID = "$ORACLE_SID"<br> TEMPLATENAME = "ORCL_TEMPLATE.dbt"<br> STORAGETYPE=FS<br> DATAFILEDESTINATION = "$ENV_ORACLE_BASE/oradata/$ORACLE_SID"<br> CHARACTERSET = "${NLS_LANG}"<br> NATIONALCHARACTERSET= "${NLS_NCHAR_CHAR}"<br> LISTENERS = LISTENER<br> MEMORYPERCENTAGE = "${MemPercent}"<br> TOTALMEMORY = "$MemTotalMB"<br> #AUTOMATICMEMORYMANAGEMENT = "TRUE"<br> SYSPASSWORD = "$SYSTEM_PASSWD"<br> SYSTEMPASSWORD = "$SYSTEM_PASSWD"<br> databaseType=OLTP<br> EOF<br> elif [ ${DB_VERSION} = 19.3.0.0 ]; then<br> cat &gt; dbca.rsp&lt;&lt;EOF<br> responseFileVersion=/oracle/assistants/rspfmt_dbca_response_schema_v12.2.0<br> gdbName=${GLOBLE_DBName}<br> sid=${ORACLE_SID}<br> databaseConfigType=SI<br> createAsContainerDatabase=false<br> templateName=ORCL_TEMPLATE.dbt<br> storageType=FS<br> datafileDestination=${ENV_ORACLE_BASE}/oradata/${ORACLE_SID}<br> characterSet=${NLS_LANG}<br> nationalCharacterSet=${NLS_NCHAR_CHAR}<br> memoryPercentage=${MemPercent}<br> totalMemory=${MemTotalMB}<br> initParams=audit_trail=none<br> #automaticMemoryManagement=TRUE<br> sysPassword=${SYSTEM_PASSWD}<br> systemPassword=${SYSTEM_PASSWD}<br> databaseType=OLTP<br> #variables=DB_UNIQUE_NAME=${ORACLE_SID},ORACLE_BASE=${ENV_ORACLE_BASE},PDB_NAME=,DB_NAME=${ORACLE_SID},ORACLE_HOME=${ENV_ORACLE_HOME},SID=${ORACLE_SID}<br> EOF<br> fi</p> 
<p>#定义dbca模板文件<br> if [ ${DB_VERSION} = 12.2.0.1 ]; then<br> cat &gt; $ENV_ORACLE_HOME/assistants/dbca/templates/ORCL_TEMPLATE.dbt&lt;&lt;EOF<br> &lt;DatabaseTemplate name="ORCL_TEMPLATE" description=" " version="12.2.0.1.0"&gt;<br>    &lt;CommonAttributes&gt;<br>       &lt;option name="OMS" value="false"/&gt;<br>       &lt;option name="JSERVER" value="true"/&gt;<br>       &lt;option name="SPATIAL" value="false"/&gt;<br>       &lt;option name="IMEDIA" value="true"/&gt;<br>       &lt;option name="XDB_PROTOCOLS" value="true"&gt;<br>          &lt;tablespace id="SYSAUX"/&gt;<br>       &lt;/option&gt;<br>       &lt;option name="ORACLE_TEXT" value="true"&gt;<br>          &lt;tablespace id="SYSAUX"/&gt;<br>       &lt;/option&gt;<br>       &lt;option name="SAMPLE_SCHEMA" value="false"/&gt;<br>       &lt;option name="CWMLITE" value="false"&gt;<br>          &lt;tablespace id="SYSAUX"/&gt;<br>       &lt;/option&gt;<br>       &lt;option name="EM_REPOSITORY" value="false"&gt;<br>          &lt;tablespace id="SYSAUX"/&gt;<br>       &lt;/option&gt;<br>       &lt;option name="APEX" value="true"/&gt;<br>       &lt;option name="OWB" value="false"/&gt;<br>       &lt;option name="DV" value="false"/&gt;<br>    &lt;/CommonAttributes&gt;<br>    &lt;Variables/&gt;<br>    &lt;CustomScripts Execute="false"/&gt;<br>    &lt;InitParamAttributes&gt;<br>       &lt;InitParams&gt;<br>          &lt;initParam name="db_name" value="$ORACLE_SID"/&gt;<br>          &lt;initParam name="db_domain" value=""/&gt;<br>          &lt;initParam name="dispatchers" value="(PROTOCOL=TCP) (SERVICE={SID}XDB)"/&gt;<br>          &lt;initParam name="audit_file_dest" value="{ORACLE_BASE}/admin/{DB_UNIQUE_NAME}/adump"/&gt;<br>          &lt;initParam name="compatible" value="12.2.0"/&gt;<br>          &lt;initParam name="remote_login_passwordfile" value="EXCLUSIVE"/&gt;<br>          &lt;initParam name="log_archive_dest_1" value="'LOCATION=$ENV_ORACLE_BASE/oradata/$ORACLE_SID'"/&gt;<br>          &lt;initParam name="processes" value="2000"/&gt;<br>          &lt;initParam name="undo_tablespace" value="UNDOTBS1"/&gt;<br>          &lt;initParam name="control_files" value="(&amp;quot;{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/control01.ctl&amp;quot;, &amp;quot;{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/control02.ctl&amp;quot;)"/&gt;<br>          &lt;initParam name="diagnostic_dest" value="{ORACLE_BASE}"/&gt;<br>          &lt;initParam name="audit_trail" value="none"/&gt;<br>          &lt;initParam name="log_archive_format" value="%t_%s_%r.dbf"/&gt;<br>          &lt;initParam name="sessions" value="2205"/&gt;<br>          &lt;initParam name="db_block_size" value="8" unit="KB"/&gt;<br>          &lt;initParam name="open_cursors" value="300"/&gt;<br>       &lt;/InitParams&gt;<br>       &lt;MiscParams&gt;<br>          &lt;databaseType&gt;OLTP&lt;/databaseType&gt;<br>          &lt;maxUserConn&gt;20&lt;/maxUserConn&gt;<br>          &lt;percentageMemTOSGA&gt;80&lt;/percentageMemTOSGA&gt;<br>          &lt;customSGA&gt;false&lt;/customSGA&gt;<br>          &lt;characterSet&gt;${NLS_LANG}&lt;/characterSet&gt;<br>          &lt;nationalCharacterSet&gt;${NLS_NCHAR_CHAR}&lt;/nationalCharacterSet&gt;<br>          &lt;archiveLogMode&gt;$ARCH_MODE&lt;/archiveLogMode&gt;<br>          &lt;initParamFileName&gt;{ORACLE_BASE}/admin/{DB_UNIQUE_NAME}/pfile/init.ora&lt;/initParamFileName&gt;<br>       &lt;/MiscParams&gt;<br>       &lt;SPfile useSPFile="true"&gt;{ORACLE_HOME}/dbs/spfile{SID}.ora&lt;/SPfile&gt;<br>    &lt;/InitParamAttributes&gt;<br>    &lt;StorageAttributes&gt;<br>       &lt;ControlfileAttributes id="Controlfile"&gt;<br>          &lt;maxDatafiles&gt;100&lt;/maxDatafiles&gt;<br>          &lt;maxLogfiles&gt;16&lt;/maxLogfiles&gt;<br>          &lt;maxLogMembers&gt;3&lt;/maxLogMembers&gt;<br>          &lt;maxLogHistory&gt;1&lt;/maxLogHistory&gt;<br>          &lt;maxInstances&gt;8&lt;/maxInstances&gt;<br>          &lt;image name="control01.ctl" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>          &lt;image name="control02.ctl" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>       &lt;/ControlfileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/sysaux01.dbf"&gt;<br>          &lt;tablespace&gt;SYSAUX&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;2000&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;10240&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/system01.dbf"&gt;<br>          &lt;tablespace&gt;SYSTEM&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;2000&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;10240&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/temp01.dbf"&gt;<br>          &lt;tablespace&gt;TEMP&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;5000&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;640&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/undotbs01.dbf"&gt;<br>          &lt;tablespace&gt;UNDOTBS1&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;5000&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;5120&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/users01.dbf"&gt;<br>          &lt;tablespace&gt;USERS&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;500&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;1280&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;TablespaceAttributes id="SYSAUX"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;false&lt;/defaultTemp&gt;<br>          &lt;undo&gt;false&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;1&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;64&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;64&lt;/increment&gt;<br>          &lt;incrementPercent&gt;50&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;1&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;4096&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;64&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/sysaux01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;TablespaceAttributes id="SYSTEM"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;false&lt;/defaultTemp&gt;<br>          &lt;undo&gt;false&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;3&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;64&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;64&lt;/increment&gt;<br>          &lt;incrementPercent&gt;50&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;1&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;-1&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;64&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/system01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;TablespaceAttributes id="TEMP"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;true&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;true&lt;/defaultTemp&gt;<br>          &lt;undo&gt;false&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;1&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;64&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;64&lt;/increment&gt;<br>          &lt;incrementPercent&gt;0&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;1&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;0&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;64&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/temp01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;TablespaceAttributes id="UNDOTBS1"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;false&lt;/defaultTemp&gt;<br>          &lt;undo&gt;true&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;1&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;512&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;512&lt;/increment&gt;<br>          &lt;incrementPercent&gt;50&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;8&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;4096&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;512&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/undotbs01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;TablespaceAttributes id="USERS"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;false&lt;/defaultTemp&gt;<br>          &lt;undo&gt;false&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;1&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;128&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;128&lt;/increment&gt;<br>          &lt;incrementPercent&gt;0&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;1&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;4096&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;128&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/users01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;RedoLogGroupAttributes id="1"&gt;<br>          &lt;reuse&gt;false&lt;/reuse&gt;<br>          &lt;fileSize unit="MB"&gt;200&lt;/fileSize&gt;<br>          &lt;Thread&gt;1&lt;/Thread&gt;<br>          &lt;member ordinal="0" memberName="redo01.log" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>       &lt;/RedoLogGroupAttributes&gt;<br>       &lt;RedoLogGroupAttributes id="2"&gt;<br>          &lt;reuse&gt;false&lt;/reuse&gt;<br>          &lt;fileSize unit="MB"&gt;200&lt;/fileSize&gt;<br>          &lt;Thread&gt;1&lt;/Thread&gt;<br>          &lt;member ordinal="0" memberName="redo02.log" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>       &lt;/RedoLogGroupAttributes&gt;<br>       &lt;RedoLogGroupAttributes id="3"&gt;<br>          &lt;reuse&gt;false&lt;/reuse&gt;<br>          &lt;fileSize unit="MB"&gt;200&lt;/fileSize&gt;<br>          &lt;Thread&gt;1&lt;/Thread&gt;<br>          &lt;member ordinal="0" memberName="redo03.log" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>       &lt;/RedoLogGroupAttributes&gt;<br>    &lt;/StorageAttributes&gt;<br> &lt;/DatabaseTemplate&gt;<br> EOF<br> elif [ ${DB_VERSION} = 11.2.0.4 ]; then<br> cat &gt; $ENV_ORACLE_HOME/assistants/dbca/templates/ORCL_TEMPLATE.dbt&lt;&lt;EOF<br> &lt;DatabaseTemplate name="ORCL_TEMPLATE" description=" " version="11.2.0.0.0"&gt;<br>    &lt;CommonAttributes&gt;<br>       &lt;option name="OMS" value="false"/&gt;<br>       &lt;option name="JSERVER" value="true"/&gt;<br>       &lt;option name="SPATIAL" value="false"/&gt;<br>       &lt;option name="IMEDIA" value="true"/&gt;<br>       &lt;option name="XDB_PROTOCOLS" value="true"&gt;<br>          &lt;tablespace id="SYSAUX"/&gt;<br>       &lt;/option&gt;<br>       &lt;option name="ORACLE_TEXT" value="true"&gt;<br>          &lt;tablespace id="SYSAUX"/&gt;<br>       &lt;/option&gt;<br>       &lt;option name="SAMPLE_SCHEMA" value="false"/&gt;<br>       &lt;option name="CWMLITE" value="false"&gt;<br>          &lt;tablespace id="SYSAUX"/&gt;<br>       &lt;/option&gt;<br>       &lt;option name="EM_REPOSITORY" value="false"&gt;<br>          &lt;tablespace id="SYSAUX"/&gt;<br>       &lt;/option&gt;<br>       &lt;option name="APEX" value="true"/&gt;<br>       &lt;option name="OWB" value="false"/&gt;<br>       &lt;option name="DV" value="false"/&gt;<br>    &lt;/CommonAttributes&gt;<br>    &lt;Variables/&gt;<br>    &lt;CustomScripts Execute="false"/&gt;<br>    &lt;InitParamAttributes&gt;<br>       &lt;InitParams&gt;<br>          &lt;initParam name="db_name" value="$ORACLE_SID"/&gt;<br>          &lt;initParam name="db_domain" value=""/&gt;<br>          &lt;initParam name="dispatchers" value="(PROTOCOL=TCP) (SERVICE={SID}XDB)"/&gt;<br>          &lt;initParam name="audit_file_dest" value="{ORACLE_BASE}/admin/{DB_UNIQUE_NAME}/adump"/&gt;<br>          &lt;initParam name="compatible" value="11.2.0.4.0"/&gt;<br>          &lt;initParam name="remote_login_passwordfile" value="EXCLUSIVE"/&gt;<br>          &lt;initParam name="log_archive_dest_1" value="'LOCATION=$ENV_ORACLE_BASE/oradata/$ORACLE_SID'"/&gt;<br>          &lt;initParam name="processes" value="2000"/&gt;<br>          &lt;initParam name="undo_tablespace" value="UNDOTBS1"/&gt;<br>          &lt;initParam name="control_files" value="(&amp;quot;{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/control01.ctl&amp;quot;, &amp;quot;{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/control02.ctl&amp;quot;)"/&gt;<br>          &lt;initParam name="diagnostic_dest" value="{ORACLE_BASE}"/&gt;<br>          &lt;initParam name="audit_trail" value="none"/&gt;<br>          &lt;initParam name="log_archive_format" value="%t_%s_%r.dbf"/&gt;<br>          &lt;initParam name="sessions" value="2205"/&gt;<br>          &lt;initParam name="db_block_size" value="8" unit="KB"/&gt;<br>          &lt;initParam name="open_cursors" value="300"/&gt;<br>       &lt;/InitParams&gt;<br>       &lt;MiscParams&gt;<br>          &lt;databaseType&gt;OLTP&lt;/databaseType&gt;<br>          &lt;maxUserConn&gt;20&lt;/maxUserConn&gt;<br>          &lt;percentageMemTOSGA&gt;80&lt;/percentageMemTOSGA&gt;<br>          &lt;customSGA&gt;false&lt;/customSGA&gt;<br>          &lt;characterSet&gt;${NLS_LANG}&lt;/characterSet&gt;<br>          &lt;nationalCharacterSet&gt;${NLS_NCHAR_CHAR}&lt;/nationalCharacterSet&gt;<br>          &lt;archiveLogMode&gt;$ARCH_MODE&lt;/archiveLogMode&gt;<br>          &lt;initParamFileName&gt;{ORACLE_BASE}/admin/{DB_UNIQUE_NAME}/pfile/init.ora&lt;/initParamFileName&gt;<br>       &lt;/MiscParams&gt;<br>       &lt;SPfile useSPFile="true"&gt;{ORACLE_HOME}/dbs/spfile{SID}.ora&lt;/SPfile&gt;<br>    &lt;/InitParamAttributes&gt;<br>    &lt;StorageAttributes&gt;<br>       &lt;ControlfileAttributes id="Controlfile"&gt;<br>          &lt;maxDatafiles&gt;100&lt;/maxDatafiles&gt;<br>          &lt;maxLogfiles&gt;16&lt;/maxLogfiles&gt;<br>          &lt;maxLogMembers&gt;3&lt;/maxLogMembers&gt;<br>          &lt;maxLogHistory&gt;1&lt;/maxLogHistory&gt;<br>          &lt;maxInstances&gt;8&lt;/maxInstances&gt;<br>          &lt;image name="control01.ctl" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>          &lt;image name="control02.ctl" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>       &lt;/ControlfileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/sysaux01.dbf"&gt;<br>          &lt;tablespace&gt;SYSAUX&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;2000&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;10240&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/system01.dbf"&gt;<br>          &lt;tablespace&gt;SYSTEM&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;2000&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;10240&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/temp01.dbf"&gt;<br>          &lt;tablespace&gt;TEMP&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;5000&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;640&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/undotbs01.dbf"&gt;<br>          &lt;tablespace&gt;UNDOTBS1&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;5000&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;5120&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/users01.dbf"&gt;<br>          &lt;tablespace&gt;USERS&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;500&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;1280&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;TablespaceAttributes id="SYSAUX"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;false&lt;/defaultTemp&gt;<br>          &lt;undo&gt;false&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;1&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;64&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;64&lt;/increment&gt;<br>          &lt;incrementPercent&gt;50&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;1&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;4096&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;64&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/sysaux01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;TablespaceAttributes id="SYSTEM"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;false&lt;/defaultTemp&gt;<br>          &lt;undo&gt;false&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;3&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;64&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;64&lt;/increment&gt;<br>          &lt;incrementPercent&gt;50&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;1&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;-1&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;64&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/system01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;TablespaceAttributes id="TEMP"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;true&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;true&lt;/defaultTemp&gt;<br>          &lt;undo&gt;false&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;1&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;64&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;64&lt;/increment&gt;<br>          &lt;incrementPercent&gt;0&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;1&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;0&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;64&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/temp01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;TablespaceAttributes id="UNDOTBS1"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;false&lt;/defaultTemp&gt;<br>          &lt;undo&gt;true&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;1&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;512&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;512&lt;/increment&gt;<br>          &lt;incrementPercent&gt;50&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;8&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;4096&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;512&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/undotbs01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;TablespaceAttributes id="USERS"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;false&lt;/defaultTemp&gt;<br>          &lt;undo&gt;false&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;1&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;128&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;128&lt;/increment&gt;<br>          &lt;incrementPercent&gt;0&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;1&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;4096&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;128&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/users01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;RedoLogGroupAttributes id="1"&gt;<br>          &lt;reuse&gt;false&lt;/reuse&gt;<br>          &lt;fileSize unit="MB"&gt;200&lt;/fileSize&gt;<br>          &lt;Thread&gt;1&lt;/Thread&gt;<br>          &lt;member ordinal="0" memberName="redo01.log" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>       &lt;/RedoLogGroupAttributes&gt;<br>       &lt;RedoLogGroupAttributes id="2"&gt;<br>          &lt;reuse&gt;false&lt;/reuse&gt;<br>          &lt;fileSize unit="MB"&gt;200&lt;/fileSize&gt;<br>          &lt;Thread&gt;1&lt;/Thread&gt;<br>          &lt;member ordinal="0" memberName="redo02.log" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>       &lt;/RedoLogGroupAttributes&gt;<br>       &lt;RedoLogGroupAttributes id="3"&gt;<br>          &lt;reuse&gt;false&lt;/reuse&gt;<br>          &lt;fileSize unit="MB"&gt;200&lt;/fileSize&gt;<br>          &lt;Thread&gt;1&lt;/Thread&gt;<br>          &lt;member ordinal="0" memberName="redo03.log" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>       &lt;/RedoLogGroupAttributes&gt;<br>    &lt;/StorageAttributes&gt;<br> &lt;/DatabaseTemplate&gt;<br> EOF<br> elif [ ${DB_VERSION} = 19.3.0.0 ]; then<br> cat &gt; $ENV_ORACLE_HOME/assistants/dbca/templates/ORCL_TEMPLATE.dbt&lt;&lt;EOF<br> &lt;DatabaseTemplate name="ORCL_TEMPLATE" description="" version="19.0.0.0.0"&gt;<br>    &lt;CommonAttributes&gt;<br>       &lt;option name="OMS" value="false" includeInPDBs="false"/&gt;<br>       &lt;option name="JSERVER" value="true" includeInPDBs="false"/&gt;<br>       &lt;option name="SPATIAL" value="true" includeInPDBs="false"/&gt;<br>       &lt;option name="IMEDIA" value="true" includeInPDBs="false"/&gt;<br>       &lt;option name="ORACLE_TEXT" value="true" includeInPDBs="false"&gt;<br>          &lt;tablespace id="SYSAUX"/&gt;<br>       &lt;/option&gt;<br>       &lt;option name="SAMPLE_SCHEMA" value="false" includeInPDBs="false"/&gt;<br>       &lt;option name="CWMLITE" value="true" includeInPDBs="false"&gt;<br>          &lt;tablespace id="SYSAUX"/&gt;<br>       &lt;/option&gt;<br>       &lt;option name="APEX" value="false" includeInPDBs="false"/&gt;<br>       &lt;option name="DV" value="false" includeInPDBs="false"/&gt;<br>    &lt;/CommonAttributes&gt;<br>    &lt;Variables/&gt;<br>    &lt;CustomScripts Execute="false"/&gt;<br>    &lt;InitParamAttributes&gt;<br>       &lt;InitParams&gt;<br>          &lt;initParam name="db_name" value="$ORACLE_SID"/&gt;<br>          &lt;initParam name="dispatchers" value="(PROTOCOL=TCP) (SERVICE={SID}XDB)"/&gt;<br>          &lt;initParam name="audit_file_dest" value="{ORACLE_BASE}/admin/{DB_UNIQUE_NAME}/adump"/&gt;<br>          &lt;initParam name="compatible" value="19.0.0"/&gt;<br>          &lt;initParam name="remote_login_passwordfile" value="EXCLUSIVE"/&gt;<br>          &lt;initParam name="log_archive_dest_1" value="'LOCATION=$ENV_ORACLE_BASE/oradata/$ORACLE_SID'"/&gt;<br>          &lt;initParam name="processes" value="5120"/&gt;<br>          &lt;initParam name="local_listener" value="LISTENER_WXBD"/&gt;<br>          &lt;initParam name="undo_tablespace" value="UNDOTBS1"/&gt;<br>          &lt;initParam name="control_files" value="(&amp;quot;{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/control01.ctl&amp;quot;, &amp;quot;{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/control02.ctl&amp;quot;)"/&gt;<br>          &lt;initParam name="diagnostic_dest" value="{ORACLE_BASE}"/&gt;<br>          &lt;initParam name="audit_trail" value="none"/&gt;<br>          &lt;initParam name="nls_territory" value="AMERICA"/&gt;<br>          &lt;initParam name="log_archive_format" value="%t_%s_%r.dbf"/&gt;<br>          &lt;initParam name="db_block_size" value="8192"/&gt;<br>          &lt;initParam name="open_cursors" value="300"/&gt;<br>          &lt;initParam name="nls_language" value="AMERICAN"/&gt;<br>       &lt;/InitParams&gt;<br>       &lt;MiscParams&gt;<br>          &lt;databaseType&gt;OLTP&lt;/databaseType&gt;<br>          &lt;maxUserConn&gt;20&lt;/maxUserConn&gt;<br>          &lt;percentageMemTOSGA&gt;80&lt;/percentageMemTOSGA&gt;<br>          &lt;customSGA&gt;false&lt;/customSGA&gt;<br>          &lt;characterSet&gt;${NLS_LANG}&lt;/characterSet&gt;<br>          &lt;nationalCharacterSet&gt;${NLS_NCHAR_CHAR}&lt;/nationalCharacterSet&gt;<br>          &lt;archiveLogMode&gt;$ARCH_MODE&lt;/archiveLogMode&gt;<br>          &lt;initParamFileName&gt;{ORACLE_BASE}/admin/{DB_UNIQUE_NAME}/pfile/init.ora&lt;/initParamFileName&gt;<br>       &lt;/MiscParams&gt;<br>       &lt;SPfile useSPFile="true"&gt;{ORACLE_HOME}/dbs/spfile{SID}.ora&lt;/SPfile&gt;<br>    &lt;/InitParamAttributes&gt;<br>    &lt;StorageAttributes&gt;<br>       &lt;ControlfileAttributes id="Controlfile"&gt;<br>          &lt;maxDatafiles&gt;100&lt;/maxDatafiles&gt;<br>          &lt;maxLogfiles&gt;16&lt;/maxLogfiles&gt;<br>          &lt;maxLogMembers&gt;3&lt;/maxLogMembers&gt;<br>          &lt;maxLogHistory&gt;1&lt;/maxLogHistory&gt;<br>          &lt;maxInstances&gt;8&lt;/maxInstances&gt;<br>          &lt;image name="control01.ctl" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>          &lt;image name="control02.ctl" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>       &lt;/ControlfileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/sysaux01.dbf"&gt;<br>          &lt;tablespace&gt;SYSAUX&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;2000&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;10240&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/system01.dbf"&gt;<br>          &lt;tablespace&gt;SYSTEM&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;2000&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;10240&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/temp01.dbf"&gt;<br>          &lt;tablespace&gt;TEMP&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;5000&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;640&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/undotbs01.dbf"&gt;<br>          &lt;tablespace&gt;UNDOTBS1&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;5000&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;5120&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;DatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/users01.dbf"&gt;<br>          &lt;tablespace&gt;USERS&lt;/tablespace&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;status&gt;0&lt;/status&gt;<br>          &lt;size unit="MB"&gt;500&lt;/size&gt;<br>          &lt;reuse&gt;true&lt;/reuse&gt;<br>          &lt;autoExtend&gt;true&lt;/autoExtend&gt;<br>          &lt;increment unit="KB"&gt;1280&lt;/increment&gt;<br>          &lt;maxSize unit="MB"&gt;-1&lt;/maxSize&gt;<br>       &lt;/DatafileAttributes&gt;<br>       &lt;TablespaceAttributes id="SYSAUX"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;false&lt;/defaultTemp&gt;<br>          &lt;undo&gt;false&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;1&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;64&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;64&lt;/increment&gt;<br>          &lt;incrementPercent&gt;50&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;1&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;4096&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;64&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/sysaux01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;TablespaceAttributes id="SYSTEM"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;false&lt;/defaultTemp&gt;<br>          &lt;undo&gt;false&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;3&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;64&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;64&lt;/increment&gt;<br>          &lt;incrementPercent&gt;50&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;1&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;-1&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;64&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/system01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;TablespaceAttributes id="TEMP"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;true&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;true&lt;/defaultTemp&gt;<br>          &lt;undo&gt;false&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;1&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;64&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;64&lt;/increment&gt;<br>          &lt;incrementPercent&gt;0&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;1&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;0&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;64&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/temp01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;TablespaceAttributes id="UNDOTBS1"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;false&lt;/defaultTemp&gt;<br>          &lt;undo&gt;true&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;1&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;512&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;512&lt;/increment&gt;<br>          &lt;incrementPercent&gt;50&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;8&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;4096&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;512&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/undotbs01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;TablespaceAttributes id="USERS"&gt;<br>          &lt;online&gt;true&lt;/online&gt;<br>          &lt;offlineMode&gt;1&lt;/offlineMode&gt;<br>          &lt;readOnly&gt;false&lt;/readOnly&gt;<br>          &lt;temporary&gt;false&lt;/temporary&gt;<br>          &lt;defaultTemp&gt;false&lt;/defaultTemp&gt;<br>          &lt;undo&gt;false&lt;/undo&gt;<br>          &lt;local&gt;true&lt;/local&gt;<br>          &lt;blockSize&gt;-1&lt;/blockSize&gt;<br>          &lt;allocation&gt;1&lt;/allocation&gt;<br>          &lt;uniAllocSize unit="KB"&gt;-1&lt;/uniAllocSize&gt;<br>          &lt;initSize unit="KB"&gt;128&lt;/initSize&gt;<br>          &lt;increment unit="KB"&gt;128&lt;/increment&gt;<br>          &lt;incrementPercent&gt;0&lt;/incrementPercent&gt;<br>          &lt;minExtends&gt;1&lt;/minExtends&gt;<br>          &lt;maxExtends&gt;4096&lt;/maxExtends&gt;<br>          &lt;minExtendsSize unit="KB"&gt;128&lt;/minExtendsSize&gt;<br>          &lt;logging&gt;true&lt;/logging&gt;<br>          &lt;recoverable&gt;false&lt;/recoverable&gt;<br>          &lt;maxFreeSpace&gt;0&lt;/maxFreeSpace&gt;<br>          &lt;autoSegmentMgmt&gt;true&lt;/autoSegmentMgmt&gt;<br>          &lt;bigfile&gt;false&lt;/bigfile&gt;<br>          &lt;datafilesList&gt;<br>             &lt;TablespaceDatafileAttributes id="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/users01.dbf"&gt;<br>                &lt;id&gt;-1&lt;/id&gt;<br>             &lt;/TablespaceDatafileAttributes&gt;<br>          &lt;/datafilesList&gt;<br>       &lt;/TablespaceAttributes&gt;<br>       &lt;RedoLogGroupAttributes id="1"&gt;<br>          &lt;reuse&gt;false&lt;/reuse&gt;<br>          &lt;fileSize unit="MB"&gt;200&lt;/fileSize&gt;<br>          &lt;Thread&gt;1&lt;/Thread&gt;<br>          &lt;member ordinal="0" memberName="redo01.log" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>       &lt;/RedoLogGroupAttributes&gt;<br>       &lt;RedoLogGroupAttributes id="2"&gt;<br>          &lt;reuse&gt;false&lt;/reuse&gt;<br>          &lt;fileSize unit="MB"&gt;200&lt;/fileSize&gt;<br>          &lt;Thread&gt;1&lt;/Thread&gt;<br>          &lt;member ordinal="0" memberName="redo02.log" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>       &lt;/RedoLogGroupAttributes&gt;<br>       &lt;RedoLogGroupAttributes id="3"&gt;<br>          &lt;reuse&gt;false&lt;/reuse&gt;<br>          &lt;fileSize unit="MB"&gt;200&lt;/fileSize&gt;<br>          &lt;Thread&gt;1&lt;/Thread&gt;<br>          &lt;member ordinal="0" memberName="redo03.log" filepath="{ORACLE_BASE}/oradata/{DB_UNIQUE_NAME}/"/&gt;<br>       &lt;/RedoLogGroupAttributes&gt;<br>    &lt;/StorageAttributes&gt;<br> &lt;/DatabaseTemplate&gt;<br> EOF<br> fi</p> 
<p>#Create Database<br> chown oracle.oinstall $SCRIPT_DIR/dbca.rsp<br> chown oracle.oinstall $ENV_ORACLE_HOME/assistants/dbca/templates/ORCL_TEMPLATE.dbt<br> if [[ ${DB_VERSION} = 12.2.0.1 ]] || [[ ${DB_VERSION} = 19.3.0.0 ]]; then<br> su - oracle &lt;&lt; EOF<br> cd $ENV_ORACLE_HOME/bin<br> ./dbca -silent -createDatabase -responseFile $SCRIPT_DIR/dbca.rsp<br> EOF<br> elif [ ${DB_VERSION} = 11.2.0.4 ]; then<br> su - oracle &lt;&lt; EOF<br> cd $ENV_ORACLE_HOME/bin<br> ./dbca -silent -responseFile $SCRIPT_DIR/dbca.rsp<br> EOF<br> fi<br> echo "Database is created ----- SUCCEEDED" &gt;&gt; install.log</p> 
<p>#Install listence<br> if [[ ${DB_VERSION} = 12.2.0.1 ]] || [[ ${DB_VERSION} = 11.2.0.4 ]]; then<br> su - oracle &lt;&lt;EOF<br> cd $ENV_ORACLE_HOME/bin<br> ./netca -silent -responseFile $SOFTWATE_DIR/database/response/netca.rsp<br> EOF<br> elif [ ${DB_VERSION} = 19.3.0.0 ]; then<br> su - oracle &lt;&lt;EOF<br> cd $ENV_ORACLE_HOME/bin<br> ./netca -silent -responseFile ${ENV_ORACLE_HOME}/assistants/netca/netca.rsp<br> EOF<br> fi</p> 
<p>echo "listence is created ----- SUCCEEDED" &gt;&gt; install.log</p> 
<p>#add for solve ORA-28040 with 12c  v2.0<br> if [[ ${DB_VERSION} = 12.2.0.1 ]] || [[ ${DB_VERSION} = 19.3.0.0 ]]; then<br>     echo "" &gt;&gt; $ENV_ORACLE_HOME/network/admin/sqlnet.ora<br>     &gt;&gt; $ENV_ORACLE_HOME/network/admin/sqlnet.ora<br>     echo "SQLNET.ALLOWED_LOGON_VERSION=8" &gt;&gt; $ENV_ORACLE_HOME/network/admin/sqlnet.ora<br> fi</p> 
<p>#modify user PASSWORD_LIFE_TIME UNLIMITED;turn off audit<br> su - oracle -c "sqlplus -s / as sysdba" &lt;&lt;EOF<br> ALTER PROFILE DEFAULT LIMIT PASSWORD_LIFE_TIME UNLIMITED;<br> alter system set audit_sys_operations=FALSE scope=spfile;<br> alter system set audit_trail=none scope=spfile;<br> shutdown immediate;<br> EXIT<br> EOF<br> su - oracle -c "sqlplus -s / as sysdba" &lt;&lt;EOF<br> startup<br> alter user system identified by ${SYSTEM_PASSWD};<br> EXIT<br> EOF<br> }</p> 
<p>function endConfig(){<!-- --><br> #set send mail v2.0<br> service sendmail stop<br> chkconfig sendmail off<br> service postfix stop<br> chkconfig postfix off<br> echo "" &gt;&gt; /etc/hosts<br> echo "10.0.1.8      mail.longigroup.com" &gt;&gt; /etc/hosts<br> echo "10.0.1.9      mail.longigroup.com" &gt;&gt; /etc/hosts<br> echo "" &gt;&gt; /etc/hosts<br> echo "set from=netmaster@longigroup.com" &gt;&gt; /etc/mail.rc<br> echo "set smtp=mail.longigroup.com" &gt;&gt; /etc/mail.rc<br> echo "set smtp-auth-user=netmaster" &gt;&gt; /etc/mail.rc<br> echo "set smtp-auth-password=Longi-silicon" &gt;&gt; /etc/mail.rc<br> echo "set smtp-auth=login" &gt;&gt; /etc/mail.rc</p> 
<p>#初始化监控脚本 v2.0<br> mkdir /home/oracle/scripts<br> wget http://${SITE2}/scripts/dba_disk_alert.sh -O /home/oracle/scripts/dba_disk_alert.sh<br> wget http://${SITE2}/scripts/dba_tbs_alert.sh -O /home/oracle/scripts/dba_tbs_alert.sh<br> chown -R oracle:oinstall /home/oracle/scripts<br> chmod 755 /home/oracle/scripts/*.sh</p> 
<p>#设置定时任务 v2.0<br> echo "0 4,8,12,16,20 * * * /home/oracle/scripts/dba_disk_alert.sh &gt; /home/oracle/scripts/dba_disk_alert.log 2&gt;&amp;1" &gt; /var/spool/cron/oracle<br> echo "30 4,8,12,16,20 * * * /home/oracle/scripts/dba_tbs_alert.sh &gt; /home/oracle/scripts/dba_tbs_alert.log 2&gt;&amp;1" &gt;&gt; /var/spool/cron/oracle<br> chown oracle:oinstall /var/spool/cron/oracle<br> echo "crontab is created ----- SUCCEEDED" &gt;&gt; install.log</p> 
<p>#Database infomation<br> cat &gt; DB_Inf.txt&lt;&lt;EOF<br> OS Infomation:<br> $hostip    $host_name </p> 
<p>OS User name&amp;passwd: <br> oracle / $ORAPASSWD <br>  <br> Database Infomation: <br> ORACLE_SID = $ORACLE_SID</p> 
<p>Database version :  $DB_VERSION</p> 
<p>TNS: <br> **********************************************<br> ${ORACLE_SID}_TNS =<br>         (DESCRIPTION= <br>             (ADDRESS_LIST=<br>                 (LOAD_BALANCE=YES)<br>                 (FAILOVER=YES)<br>                 (ADDRESS=(PROTOCOL=tcp)(HOST=$hostip)(PORT=1521))<br>             )<br>             (CONNECT_DATA=<br>                 (SERVICE_NAME=$ORACLE_SID)<br>             )<br>         )<br> ********************************************** </p> 
<p>DB User name&amp;passwd: system / $SYSTEM_PASSWD<br>  <br> DB NLS LANG: <br> AMERICAN_AMERICA.${NLS_LANG}<br> EOF<br> echo "#################################"<br> cat DB_Inf.txt<br> echo "#################################"<br> #这里可以配置mail，然后将DB_Inf邮件通知<br> }</p> 
<p><br> #-------------------------#<br> # judge what needs to be done<br> #-------------------------#<br> if [[ $INPUT_CHOICE = "createDB" ]];then<br>     echo -e "\033[37;31;5mbegin install software...\033[39;49;0m"<br>     installDBsoftware<br>     echo -e "\033[37;31;5mbegin create database...\033[39;49;0m"<br>     createDB<br>     echo -e "\033[37;31;5mbegin config database...\033[39;49;0m"<br>     endConfig<br> elif [[ $INPUT_CHOICE = "installSoftwareOnly" ]];then<br>     echo -e "\033[37;31;5mbegin install software...\033[39;49;0m"<br>     installDBsoftware<br> fi</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c06ae7973f7f6e1bb113baace68a87d0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数字图像处理（四）——Matlab实现图像几何变换</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/260c0aaadab1366825948b3b65d0fa95/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">栈和队列</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>