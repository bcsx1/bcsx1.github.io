<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux （iSCSI、MariaDB、PXE/Kickstart） - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux （iSCSI、MariaDB、PXE/Kickstart）" />
<meta property="og:description" content="十六、使用iSCSI服务部署网络存储 iSCSI 技术实现了物理硬盘设备与 TCP/IP 网络协议的相互结合，使得用户能够通过互联网方便地访问远程机房提供的共享存储资源。本章将带领大家在 Linux 系统上部署iSCSI 服务端程序，并分别基于 Linux 系统和 Windows 系统来访问远程的存储资源。 1.iSCSI技术介绍 硬盘是计算机硬件设备中重要的组成部分之一，硬盘存储设备读写速度的快慢也会对服 务器的整体性能造成影响。 硬盘存储结构、 RAID 磁盘阵列技术以及 LVM 技术等都是用于存储设备的技术，尽管这些技术有软件层面和硬件层面之分，但是它们都旨在解决硬盘存储设备的读写速度问题，或者竭力保障存储数据的安全。 为了进一步提升硬盘存储设备的读写速度和性能，人们一直在努力改进物理硬盘设备的接口协议。当前的硬盘接口类型主要有 IDE 、 SCSI 和 SATA 这 3 种。 IDE： 一种成熟稳定、价格便宜的并行传输接口。 SATA： 一种传输速度更快、数据校验更完整的串行传输接口。 SCSI：一种用于计算机和硬盘、光驱等设备之间系统级接口的通用标准，具有系统资源占用率低、转速高、传输速度快等优点。 无论使用什么类型的硬盘接口，硬盘上的数据总是要通过计算机主板上的总线与 CPU、内存设备进行数据交换，这种物理环境上的限制给硬盘资源的共享带来了各种不便。后来，IBM 公司开始动手研发基于 TCP/IP 协议和 SCSI 接口协议的新型存储技术，这也就是我们目前能看到的互联网小型计算机系统接口（ iSCSI ， Internet Small Computer System Interface）。这是一种将 SCSI 接口与以太网技术相结合的新型存储技术，可以用来在网络中传输 SCSI 接口的命令和数据。这样，不仅克服了传统 SCSI 接口设备的物理局限性，实现了跨区域的存储资源共享，而且可以在不停机的状态下扩展存储容量。 既然要通过以太网来传输硬盘设备上的数据，那么数据是通过网卡传入到计算机中的么？这就有必要向大家介绍 iSCSI-HBA 卡了 。与一般的网卡不同（连接网络总线和内存，供计算机上网使用）， iSCSI-HBA 卡连接的则是 SCSI 接口或 FC（光纤通道）总线和内存，专门用于在主机之间交换存储数据，其使用的协议也与一般网卡有本质的不同。运行 Linux 系统的服务器会基于 iSCSI 协议把硬盘设备命令与数据打包成标准的TCP/IP 数据包，然后通过以太网传输到目标存储设备，而当目标存储设备接收到这些数据包后，还需要基于iSCSI 协议把 TCP/IP 数据包解压成硬盘设备命令与数据。 总结来说，iSCSI 技术具有硬件成本低、操作简单、维护方便以及扩展性强等优势，为我们提供了数据集中化存储的服务，而且其以区块为单位的数据存储空间，在简化了存储空间管理步骤的前提下，还增添了存储空间的弹性。对于用户而言，仿佛计算机上多了一块新的“本地硬盘”，可以使用本地的计算机操作系统进行管理，就像是使用本地硬盘那样来使用远程存储空间。这种高扩展性和低组建成本、低维护成本的整合存储方式，正是大部分预算受限的中小企业和办公室所需要的。 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/132b89abaf4638624225edfdb3596fa2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-15T15:05:04+08:00" />
<meta property="article:modified_time" content="2023-11-15T15:05:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux （iSCSI、MariaDB、PXE/Kickstart）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>十六、使用iSCSI服务部署网络存储</h2> 
<div> 
 <span style="color:#000000;">iSCSI </span> 
 <span style="color:#000000;">技术实现了物理硬盘设备与 </span> 
 <span style="color:#000000;">TCP/IP 网络协议的相互结合，使得用户能够通过互联网方便地访问远程机房提供的共享存储资源。本章将带领大家在 </span> 
 <span style="color:#000000;">Linux 系统上部署iSCSI </span> 
 <span style="color:#000000;">服务端程序，并分别基于 </span> 
 <span style="color:#000000;">Linux </span> 
 <span style="color:#000000;">系统和 </span> 
 <span style="color:#000000;">Windows 系统来访问远程的存储资源。</span> 
</div> 
<div> 
 <h3>1.iSCSI技术介绍</h3> 
 <div> 
  <div> 
   <span style="color:#000000;">硬盘是计算机硬件设备中重要的组成部分之一，硬盘存储设备读写速度的快慢也会对服 </span> 
  </div> 
  <div> 
   <span style="color:#000000;">务器的整体性能造成影响。</span> 
   <span style="color:#000000;">硬盘存储结构、</span> 
   <span style="color:#000000;">RAID 磁盘阵列技术以及 LVM 技术等都是用于存储设备的技术，尽管这些技术有软件层面和硬件层面之分，但是它们都旨在解决硬盘存储设备的读写速度问题，或者竭力保障存储数据的安全。 </span> 
  </div> 
  <div> 
   <span style="color:#000000;">为了进一步提升硬盘存储设备的读写速度和性能，人们一直在努力改进物理硬盘设备的接口协议。当前的硬盘接口类型主要有 </span> 
   <span style="color:#000000;">IDE</span> 
   <span style="color:#000000;">、</span> 
   <span style="color:#000000;">SCSI </span> 
   <span style="color:#000000;">和 </span> 
   <span style="color:#000000;">SATA </span> 
   <span style="color:#000000;">这 </span> 
   <span style="color:#000000;">3 </span> 
   <span style="color:#000000;">种。</span> 
  </div> 
 </div> 
 <div> 
  <strong>IDE：</strong> 
  <span style="color:#000000;">一种成熟稳定、价格便宜的并行传输接口。 </span> 
 </div> 
 <div> 
  <strong>SATA：</strong> 
  <span style="color:#000000;">一种传输速度更快、数据校验更完整的串行传输接口。 </span> 
 </div> 
 <div> 
  <strong>SCSI：</strong>一种用于计算机和硬盘、光驱等设备之间系统级接口的通用标准，具有系统资源占用率低、转速高、传输速度快等优点。 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">无论使用什么类型的硬盘接口，硬盘上的数据总是要通过计算机主板上的总线与 CPU、内存设备进行数据交换，这种物理环境上的限制给硬盘资源的共享带来了各种不便。后来，IBM </span> 
   <span style="color:#000000;">公司开始动手研发基于 </span> 
   <span style="color:#000000;">TCP/IP </span> 
   <span style="color:#000000;">协议和 </span> 
   <span style="color:#000000;">SCSI 接口协议的新型存储技术，这也就是我们目前能看到的互联网小型计算机系统接口（</span> 
   <span style="color:#000000;">iSCSI</span> 
   <span style="color:#000000;">，</span> 
   <span style="color:#000000;">Internet Small Computer System Interface）。</span>这是一种将 SCSI 接口与以太网技术相结合的新型存储技术，可以用来在网络中传输 SCSI 接口的命令和数据。这样，不仅克服了传统 SCSI 接口设备的物理局限性，实现了跨区域的存储资源共享，而且可以在不停机的状态下扩展存储容量。 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">既然要通过以太网来传输硬盘设备上的数据，那么数据是通过网卡传入到计算机中的么？这就有必要向大家介绍 </span> 
   <span style="color:#000000;">iSCSI-HBA </span> 
   <span style="color:#000000;">卡了</span> 
   <span style="color:#000000;">。与一般的网卡不同（连接网络总线和内存，供计算机上网使用），</span> 
   <span style="color:#000000;">iSCSI-HBA </span> 
   <span style="color:#000000;">卡连接的则是 </span> 
   <span style="color:#000000;">SCSI </span> 
   <span style="color:#000000;">接口或 FC（光纤通道）总线和内存，专门用于在主机之间交换存储数据，其使用的协议也与一般网卡有本质的不同。运行</span> 
   <span style="color:#000000;">Linux</span> 
   <span style="color:#000000;">系统的服务器会基于</span> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">协议把硬盘设备命令与数据打包成标准的TCP/IP 数据包，然后通过以太网传输到目标存储设备，而当目标存储设备接收到这些数据包后，还需要基于iSCSI </span> 
   <span style="color:#000000;">协议把 </span> 
   <span style="color:#000000;">TCP/IP </span> 
   <span style="color:#000000;">数据包解压成硬盘设备命令与数据。 </span> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">总结来说，iSCSI 技术具有硬件成本低、操作简单、维护方便以及扩展性强等优势，为我们提供了数据集中化存储的服务，而且其以区块为单位的数据存储空间，在简化了存储空间管理步骤的前提下，还增添了存储空间的弹性。对于用户而言，仿佛计算机上多了一块新的“本地硬盘”，可以使用本地的计算机操作系统进行管理，就像是使用本地硬盘那样来使用远程存储空间。这种高扩展性和低组建成本、低维护成本的整合存储方式，正是大部分预算受限的中小企业和办公室所需要的。 </span> 
  </div> 
 </div> 
 <h3>2.创建RAID磁盘阵列</h3> 
 <div> 
  <span style="color:#000000;">既然要使用 </span> 
  <span style="color:#000000;">iSCSI 存储技术为远程用户提供共享存储资源，首先要保障用于存放资源的</span>服务器的稳定性与可用性，否则一旦在使用过程中出现故障，则维护的难度相较于本地硬盘 
  <span style="color:#000000;">设备要更加复杂、困难。因此推荐各位读者按照本书第 </span> 
  <span style="color:#000000;">7 </span> 
  <span style="color:#000000;">章讲解的知识来部署 </span> 
  <span style="color:#000000;">RAID 磁盘阵 列组，确保数据的安全性。下面以配置 </span> 
  <span style="color:#000000;">RAID 5 </span> 
  <span style="color:#000000;">磁盘阵列组为例进行讲解。</span> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">首先在虚拟机中添加 </span> 
   <span style="color:#000000;">4 </span> 
   <span style="color:#000000;">块新硬盘，用于创建 </span> 
   <span style="color:#000000;">RAID 5 </span> 
   <span style="color:#000000;">磁盘阵列和备份盘。</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="321" src="https://images2.imgbox.com/20/3b/e4R0kmnq_o.png" width="836"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">启动虚拟机系统，使用 </span> 
   <span style="color:#000000;">mdadm </span> 
   <span style="color:#000000;">命令创建 </span> 
   <span style="color:#000000;">RAID </span> 
   <span style="color:#000000;">磁盘阵列。其中，</span> 
   <span style="color:#000000;">-Cv 参数为创建阵列并显示过程，</span> 
   <span style="color:#000000;">/dev/md0 为生成的阵列组名称，-n 3 </span> 
   <span style="color:#000000;">参数为创建 </span> 
   <span style="color:#000000;">RAID 5 磁盘阵列所需的硬盘个数，-l 5 </span> 
   <span style="color:#000000;">参数为 </span> 
   <span style="color:#000000;">RAID </span> 
   <span style="color:#000000;">磁盘阵列的级别，</span> 
   <span style="color:#000000;">-x 1 参数为磁盘阵列的备份盘个数。在命令后面要逐一写上使用的硬盘名称。</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="130" src="https://images2.imgbox.com/5c/48/ylUcuUKe_o.png" width="946"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">在上述命令成功执行之后，得到一块名称为</span> 
   <span style="color:#000000;">/dev/md0 </span> 
   <span style="color:#000000;">的新设备，这是一块 RAID 5级别的磁盘阵列，并且还有一块备份盘为硬盘数据保驾护航。大家可使用 mdadm -D 命令来查看设备的详细信息。另外，由于在使用远程设备时极有可能出现设备识别顺序发生变化的情况，因此，如果直接在 </span> 
   <span style="color:#000000;">fstab </span> 
   <span style="color:#000000;">挂载配置文件中写入</span> 
   <span style="color:#000000;">/dev/sdb</span> 
   <span style="color:#000000;">、</span> 
   <span style="color:#000000;">/dev/sdc 等设备名称的话，就有可能在下一次挂载了错误的存储设备。而 UUID 值是设备的唯一标识符，用于精确地区分本地或远程设备。于是我们可以把这个值记录下来，一会儿准备填写到挂载配置文件中。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="317" src="https://images2.imgbox.com/8f/84/eY0NxXPE_o.png" width="1027"> 
 </div> 
 <h3>3.配置iSCSI服务端</h3> 
 <div> 
  <div> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">技术在工作形式上分为服务端（</span> 
   <span style="color:#000000;">target</span> 
   <span style="color:#000000;">）与客户端（</span> 
   <span style="color:#000000;">initiator</span> 
   <span style="color:#000000;">）。</span> 
   <span style="color:#000000;">iSCSI 服务端即用于存放硬盘存储资源的服务器，它作为前面创建的 </span> 
   <span style="color:#000000;">RAID 磁盘阵列的存储端，能够为用户提供可用的存储资源。</span> 
   <span style="color:#000000;">iSCSI 客户端则是用户使用的软件，用于访问远程服务端的存储资源。</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="87" src="https://images2.imgbox.com/18/d7/93mXLdhd_o.png" width="677"> 
 </div> 
 <div> 
  <strong>第一步：</strong>在 RHEL 8/CentOS 8 系统中，默认已经安装了 iSCSI 服务端程序，用户需要做的是配置好软件仓库后安装 iSCSI 服务端的交换式配置工具。相较于直接修改配置文件，通过交互式的配置过程来完成对参数的设定既又方便又安全。在 dnf 命令的后面添加-y 参数后，在安装过程中就不需要再进行手动确认了： 
 </div> 
 <div> 
  <img alt="" height="188" src="https://images2.imgbox.com/90/1c/O7GH8mcx_o.png" width="1086"> 
 </div> 
 <div> 
  <strong>第二步：</strong> 
  <span style="color:#000000;">配置 </span> 
  <span style="color:#000000;">iSCSI </span> 
  <span style="color:#000000;">服务端共享资源。</span> 
  <span style="color:#000000;">targetcli </span> 
  <span style="color:#000000;">是用于管理 </span> 
  <span style="color:#000000;">iSCSI 服务端存储资源的专用</span>配置命令，它能够提供类似于 fdisk 命令的交互式配置功能，将 iSCSI 共享资源的配置内容抽象成“目录”的形式，我们只需将各类配置信息填入到相应的“目录”中即可。这里的难点主要在于认识每个“参数目录”的作用。当把配置参数正确地填写到“目录”中后，iSCSI服务端也就可以提供共享资源服务了。 
  <div> 
   <span style="color:#000000;">在执行 </span> 
   <span style="color:#000000;">targetcli </span> 
   <span style="color:#000000;">命令后就能看到交互式的配置界面了。在该界面中允许使用很多 Linux命令，比如利用 </span> 
   <span style="color:#000000;">ls </span> 
   <span style="color:#000000;">查看目录参数的结构，使用 </span> 
   <span style="color:#000000;">cd </span> 
   <span style="color:#000000;">切换到不同的目录中。</span> 
  </div> 
  <div> 
   <img alt="" height="292" src="https://images2.imgbox.com/9b/2c/l1v4VbBe_o.png" width="1065"> 
  </div> 
  <div> 
   <div> 
    <span style="color:#000000;">/backstores/block </span> 
    <span style="color:#000000;">是 </span> 
    <span style="color:#000000;">iSCSI </span> 
    <span style="color:#000000;">服务端配置共享设备的位置。我们需要把刚刚创建的 RAID 5磁盘阵列 </span> 
    <span style="color:#000000;">md0 </span> 
    <span style="color:#000000;">文件加入到配置共享设备的“资源池”中，并将该文件重新命名为 </span> 
    <span style="color:#000000;">disk0，这样用户就不会知道是由服务器中的哪块硬盘来提供共享存储资源，而只会看到一个名为 disk0的存储设备。 </span> 
   </div> 
  </div> 
  <div> 
   <img alt="" height="311" src="https://images2.imgbox.com/47/39/Z7hFBbpD_o.png" width="1060"> 
  </div> 
 </div> 
 <div> 
  <strong>第三步：</strong>创建 iSCSI target 名称及配置共享资源。iSCSI target 名称是由系统自动生成的，这是一串用于描述共享资源的唯一字符串。稍后用户在扫描 iSCSI 服务端时即可看到这个字符串，因此我们不需要记住它。 
 </div> 
 <div> 
  <img alt="" height="276" src="https://images2.imgbox.com/d2/27/T69SD8SZ_o.png" width="1062"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">系统在生成这个 </span> 
   <span style="color:#000000;">target </span> 
   <span style="color:#000000;">名称后，还会在</span> 
   <span style="color:#000000;">/iscsi 参数目录中创建一个与其字符串同名的新“目录”用来存放共享资源。我们需要把前面加入到 </span> 
   <span style="color:#000000;">iSCSI 共享资源池中的硬盘设备添加到这个新目录中，这样用户在登录 </span> 
   <span style="color:#000000;">iSCSI 服务端后，即可默认使用这硬盘设备提供的共享存储资源了。</span> 
  </div> 
  <div> 
   <img alt="" height="82" src="https://images2.imgbox.com/cf/73/PKpbVjYI_o.png" width="1052"> 
  </div> 
 </div> 
 <div> 
  <strong>第四步：</strong>设置访问控制列表（ACL）。iSCSI 协议是通过客户端名称进行验证的。也就是说，用户在访问存储共享资源时不需要输入密码，只要 iSCSI 客户端的名称与服务端中设置的访问控制列表中某一名称条目一致即可，因此需要在 iSCSI 服务端的配置文件中写入一串能够验证用户信息的名称。acls 参数目录用于存放能够访问 iSCSI 服务端共享存储资源的客户端名称。推荐在刚刚系统生成的 iSCSI target 后面追加上类似于:client 的参数，这样既能保证客户端的名称具有唯一性，又非常便于管理和阅读： 
 </div> 
 <div> 
  <img alt="" height="96" src="https://images2.imgbox.com/c3/92/rAlwr0ck_o.png" width="1055"> 
 </div> 
 <div> 
  <strong>第五步：</strong>设置 iSCSI 服务端的监听 IP 地址和端口号。位于生产环境中的服务器上可能有多块网卡，那么到底是由哪个网卡或 IP 地址对外提供共享存储资源呢？在配置文件中默认是允许所有网卡提供 iSCSI 服务，如果您认为这有些许不安全，可以手动删除： 
 </div> 
 <div> 
  <img alt="" height="119" src="https://images2.imgbox.com/82/3c/gp9faY2R_o.png" width="1070"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">继续进行设置，使系统使用服务器 </span> 
   <span style="color:#000000;">IP </span> 
   <span style="color:#000000;">地址 </span> 
   <span style="color:#000000;">192.168.10.10 </span> 
   <span style="color:#000000;">的 </span> 
   <span style="color:#000000;">3260 </span> 
   <span style="color:#000000;">端口向外提供 </span> 
   <span style="color:#000000;">iSCSI 共享存储资源服务： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="69" src="https://images2.imgbox.com/2d/de/BJoIyqDw_o.png" width="1051"> 
 </div> 
 <div> 
  <strong>第六步：</strong>在参数文件配置妥当后，浏览刚刚配置的信息，确保上述提到的“目录”都已经填写了正确的内容。在确认信息无误后输入 exit 命令退出配置。注意，千万不要习惯性地按 Ctrl + C 组合键结束进程，这样不会保存配置文件，我们的工作也就白费了 
 </div> 
 <div> 
  <img alt="" height="449" src="https://images2.imgbox.com/de/84/UmRAhmwt_o.png" width="1062"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">清空</span> 
   <span style="color:#000000;">iptables</span> 
   <span style="color:#000000;">防火墙中的默认策略，设置</span> 
   <span style="color:#000000;">firewalld</span> 
   <span style="color:#000000;">防火墙，使其放行</span> 
   <span style="color:#000000;">iSCSI</span> 
   <span style="color:#000000;">服务或3260/TCP端口号：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="44" src="https://images2.imgbox.com/a5/fa/UQgwbAXv_o.png" width="981"> 
 </div> 
 <div> 
  <img alt="" height="76" src="https://images2.imgbox.com/f5/19/S7QLFuw5_o.png" width="949"> 
 </div> 
 <h3>4.配置Linux客户端</h3> 
 <div> 
  <div> 
   <span style="color:#000000;">在 </span> 
   <span style="color:#000000;">RHEL 8 </span> 
   <span style="color:#000000;">系统中，已经默认安装了 iSCSI客户端服务程序 </span> 
   <span style="color:#000000;">initiator</span> 
   <span style="color:#000000;">。</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="181" src="https://images2.imgbox.com/7f/72/69YatJka_o.png" width="932"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">协议是通过客户端的名称来进行验证的，而该名称也是 iSCSI 客户端的唯一标识，而且必须与服务端配置文件中访问控制列表中的信息一致，否则客户端在尝试访问存储共享设备时，系统会弹出验证失败的保存信息。 </span> 
  </div> 
  <div> 
   <span style="color:#000000;">下面编辑 </span> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">客户端中的 </span> 
   <span style="color:#000000;">initiator 名称文件，把服务端的访问控制列表名称填写进来，然后重启客户端 </span> 
   <span style="color:#000000;">iscsid </span> 
   <span style="color:#000000;">服务程序并将其加入到开机启动项中：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="177" src="https://images2.imgbox.com/d3/43/6lconURg_o.png" width="936"> 
 </div> 
 <div> 
  <img alt="" height="100" src="https://images2.imgbox.com/17/3a/nvGBOxRU_o.png" width="930"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">iSCSI 客户端访问并使用共享存储资源的步骤很简单，只需要记住一个小口诀“先发现，再登录，最后挂载并使用”。</span> 
   <span style="color:#000000;">iscsiadm </span> 
   <span style="color:#000000;">是用于管理、查询、插入、更新或删除 </span> 
   <span style="color:#000000;">iSCSI 数据库配置文件的命令行工具，用户需要先使用这个工具扫描发现远程 </span> 
   <span style="color:#000000;">iSCSI 服务端，然后查看找到的服务端上有哪些可用的共享存储资源。其中，</span> 
   <span style="color:#000000;">-m discovery 参数的目的是扫描并发现可用的存储资源，</span> 
   <span style="color:#000000;">-t st </span> 
   <span style="color:#000000;">参数为执行扫描操作的类型，</span> 
   <span style="color:#000000;">-p 192.168.10.10 </span> 
   <span style="color:#000000;">参数为 </span> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">服务端的 </span> 
   <span style="color:#000000;">IP </span> 
   <span style="color:#000000;">地址： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="42" src="https://images2.imgbox.com/9e/3d/cjvZADSL_o.png" width="935"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">在使用 </span> 
   <span style="color:#000000;">iscsiadm </span> 
   <span style="color:#000000;">命令发现了远程服务器上可用的存储资源后，接下来准备登录 </span> 
   <span style="color:#000000;">iSCSI 服务端。其中，</span> 
   <span style="color:#000000;">-m node </span> 
   <span style="color:#000000;">参数为将客户端所在主机作为一台节点服务器，</span> 
   <span style="color:#000000;">-T 参数为要使用的存储资源（大家可以直接复制前面命令中扫描发现的结果，以免录入错误），</span> 
   <span style="color:#000000;">-p 192.168.10.10 参数依然为对方 </span> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">服务端的 </span> 
   <span style="color:#000000;">IP </span> 
   <span style="color:#000000;">地址。最后使用</span> 
   <span style="color:#000000;">--login </span> 
   <span style="color:#000000;">或</span> 
   <span style="color:#000000;">-l </span> 
   <span style="color:#000000;">参数进行登录验证。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="99" src="https://images2.imgbox.com/16/c1/0lCE3qE5_o.png" width="1200"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">在 </span> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">客户端成功登录之后，会在客户端主机上多出一块名为</span> 
   <span style="color:#000000;">/dev/sdb 的设备文件。第6 </span> 
   <span style="color:#000000;">章曾经讲过，</span> 
   <span style="color:#000000;">udev 服务在命名硬盘名称时，与硬盘插槽是没有关系的。接下来便能够像使用本地主机上的硬盘那样来操作这个设备文件了。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="84" src="https://images2.imgbox.com/ba/5c/DQTuFEeL_o.png" width="786"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">下面进入标准的磁盘操作流程。</span> 
   <span style="color:#000000;">这个设备文件本身只有 </span> 
   <span style="color:#000000;">40GB </span> 
   <span style="color:#000000;">的容量，因此不必进行分区，而是直接格式化并挂载使用。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="236" src="https://images2.imgbox.com/c3/2d/ukJawTmO_o.png" width="846"> 
 </div> 
 <div> 
  <img alt="" height="227" src="https://images2.imgbox.com/fc/d6/Dye3pDDK_o.png" width="821"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">从此以后，这个设备文件就如同是客户端本机上的硬盘那样工作。需要提醒大家的是，由于udev 服务是按照系统识别硬盘设备的顺序来命名硬盘设备的，当客户端主机同时使用多个远程存储资源时，如果下一次识别远程设备的顺序发生了变化，则客户端挂载目录中的文件也将随之混乱。为了防止发生这样的问题，应该在</span> 
   <span style="color:#000000;">/etc/fstab </span> 
   <span style="color:#000000;">配置文件中使用设备的 </span> 
   <span style="color:#000000;">UUID 进行挂载。这样，不论远程设备资源的识别顺序再怎么变化，系统也能正确找到设备所对应的目录。</span> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">blkid </span> 
   <span style="color:#000000;">命令用于查看设备的名称、文件系统及 </span> 
   <span style="color:#000000;">UUID</span> 
   <span style="color:#000000;">。可以使用管道符</span> 
   <span style="color:#000000;">进行过滤，只显示与</span> 
   <span style="color:#000000;">/dev/sdb </span> 
   <span style="color:#000000;">设备相关的信息：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="47" src="https://images2.imgbox.com/a0/c5/4LGa5Veh_o.png" width="833"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">由于</span> 
   <span style="color:#000000;">/dev/sdb </span> 
   <span style="color:#000000;">是一块网络存储设备，而 </span> 
   <span style="color:#000000;">iSCSI 协议是基于TCP/IP </span> 
   <span style="color:#000000;">网络传输数据的，因此必须在</span> 
   <span style="color:#000000;">/etc/fstab </span> 
   <span style="color:#000000;">配置文件中添加上</span> 
   <span style="color:#000000;">_</span> 
   <span style="color:#000000;">netdev 参数，表示当系统联网后再进行挂载操作，以免系统开机时间过长或开机失败：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="50" src="https://images2.imgbox.com/d1/41/Xe8envIx_o.png" width="850"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">如果我们不再需要使用</span> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">共享设备资源了，可以用</span> 
   <span style="color:#000000;">iscsiadm </span> 
   <span style="color:#000000;">命令的</span> 
   <span style="color:#000000;">-u </span> 
   <span style="color:#000000;">参数将其设备卸载：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="117" src="https://images2.imgbox.com/ca/60/wNqmFr09_o.png" width="854"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">这种获取 </span> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">远程存储的方法依赖的是 </span> 
   <span style="color:#000000;">RHEL 8 </span> 
   <span style="color:#000000;">系统自带的 </span> 
   <span style="color:#000000;">iSCSI initiator 软件程序。该软件程序将以太网卡虚拟成 </span> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">卡，进而接收数据，然后基于 </span> 
   <span style="color:#000000;">TCP/IP </span> 
   <span style="color:#000000;">协议在主机与 iSCSI 存储设备之间实现数据传输功能。这种方式仅需主机与网络即可实现，因此成本是最低的。但是，在采用这种方式传输数据时，与 </span> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">和 </span> 
   <span style="color:#000000;">TCP/IP </span> 
   <span style="color:#000000;">相关的命令数据会消耗客户端自身的 </span> 
   <span style="color:#000000;">CPU 计算性能，因此存在一定的额外开销。一般建议在低 </span> 
   <span style="color:#000000;">I/O 或者低带宽要求的环境中使用这种方式。 </span> 
  </div> 
 </div> 
 <h3>5.配置windows客户端</h3> 
 <div> 
  <div> 
   <span style="color:#000000;">使用 </span> 
   <span style="color:#000000;">Windows </span> 
   <span style="color:#000000;">系统的客户端也可以正常访问 </span> 
   <span style="color:#000000;">iSCSI 服务器上的共享存储资源，而且操作原理及步骤与 </span> 
   <span style="color:#000000;">Linux </span> 
   <span style="color:#000000;">系统的客户端基本相同。在进行下面的实验之前，请先关闭 </span> 
   <span style="color:#000000;">Linux 系统客户端，以免这两台客户端主机同时使用 </span> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">共享存储资源而产生潜在问题。</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="89" src="https://images2.imgbox.com/53/f7/WPsv5iNn_o.png" width="683"> 
 </div> 
 <div> 
  <strong>第一步：</strong>运行 iSCSI 发起程序。在 Windows 10 操作系统中已经默认安装了 iSCSI 客户端程序，我们只需在控制面板中找到“系统和安全”标签，然后单击“管理工具”（见图 17-3），进入到“管理工具”页面后即可看到“iSCSI 发起程序”图标。双击该图标，在第一次运行 iSCSI发起程序时，系统会提示“Microsoft iSCSI 服务端未运行”，单击“是”按钮即可自动启动并运行 iSCSI 发起程序 
 </div> 
 <div> 
  <img alt="" height="683" src="https://images2.imgbox.com/fd/93/9VBYpMCo_o.png" width="1177"> 
 </div> 
 <div> 
  <img alt="" height="400" src="https://images2.imgbox.com/b6/52/78RSPNy0_o.png" width="732"> 
 </div> 
 <div> 
  <strong>第二步：</strong>扫描发现 iSCSI 服务端上可用的存储资源。不论是 Windows 系统还是 Linux 系统，要想使用 iSCSI 共享存储资源，都必须先进行扫描发现操作。运行 iSCSI 发起程序后在“目标”选项卡的“目标”文本框中写入 iSCSI 服务端的 IP 地址，然后单击“快速连接”按钮 
 </div> 
 <div> 
  <img alt="" height="178" src="https://images2.imgbox.com/4b/05/oFOYyFVx_o.png" width="291"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">在弹出的“快速连接”对话框中可看到共享的硬盘存储资源，此时显示“无法登录到目标”属于正常情况，单击“完成”按钮即可</span> 
  </div> 
  <div> 
   <span style="color:#000000;">回到“目标”选项卡页面，可以看到共享存储资源的名称已经出现</span> 
  </div> 
  <div> 
   <img alt="" height="141" src="https://images2.imgbox.com/64/23/7o8w3CjC_o.png" width="324"> 
  </div> 
 </div> 
 <div> 
  <strong>第三步：</strong>准备连接 iSCSI 服务端的共享存储资源。由于在 iSCSI 服务端程序上设置了 ACL，使得只有客户端名称与 ACL 策略中的名称保持一致时才能使用远程存储资源，因此首先需要在“配置”选项卡中单击“更改”按钮 
 </div> 
 <div> 
  <img alt="" height="236" src="https://images2.imgbox.com/07/43/D8BfY4BF_o.png" width="172"> 
 </div> 
 <div>
   随后在修改界面写入 iSCSI 服务器配置过的ACL 策略名称，最后重新返回到 iSCSI 发起程序的“目标”界面 
 </div> 
 <div> 
  <img alt="" height="114" src="https://images2.imgbox.com/7e/92/VT7nGOe6_o.png" width="229"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">在确认 </span> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">发起程序名称与 </span> 
   <span style="color:#000000;">iSCSI </span> 
   <span style="color:#000000;">服务器 </span> 
   <span style="color:#000000;">ACL 策略一致后，重新单击“连接”按钮，并单击“确认”按钮。大约 </span> 
   <span style="color:#000000;">1</span> 
   <span style="color:#000000;">～</span> 
   <span style="color:#000000;">3 </span> 
   <span style="color:#000000;">秒后，状态会更新为“已连接”</span> 
  </div> 
  <div> 
   <img alt="" height="105" src="https://images2.imgbox.com/e2/70/5wTRmUtH_o.png" width="213"> 
  </div> 
  <strong>第四步：</strong>访问 iSCSI 远程共享存储资源。右键单击桌面上的“计算机”图标，打开计算机管理程序 
 </div> 
 <div> 
  <strong>第五步：</strong> 
  <h2>十七、使用MariaDB数据库管理系统</h2> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">MySQL </span> 
   <span style="color:#000000;">数据库项目自从被 </span> 
   <span style="color:#000000;">Oracle 公司收购之后，从开源软件转变成为了“闭源”软件， 这导致 </span> 
   <span style="color:#000000;">IT </span> 
   <span style="color:#000000;">行业中的很多企业以及厂商纷纷选择使用了数据库软件的后起之秀</span> 
   <span style="color:#000000;">—</span> 
   <span style="color:#000000;">MariaDB 数据库管理系统。</span> 
   <span style="color:#000000;">MariaDB </span> 
   <span style="color:#000000;">数据库管理系统也因此快速占据了市场。 </span> 
  </div> 
 </div> 
 <h3>1.数据库管理系统</h3> 
 <div> 
  <span style="color:#000000;">数据库管理系统是一种能够对数据库中存放的数据进行建立、修改、删除、查找、维护等操作的软件程序。它通过把计算机中具体的物理数据转换成适合用户理解的抽象逻辑数据，有效地降低数据库管理的技术门槛，因此即便是从事 </span> 
  <span style="color:#000000;">Linux 运维工作的工程师也可以对数据库进行基本的管理操作。本书的技术主线依然是 Linux 系统的运维，而数据库管理系统只不过是在此主线上的一个内容不断横向扩展、纵向加深的分支，不能指望在</span>一两天之内就可以精通数据库管理技术。 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">既然是讲解数据库管理技术，就肯定绕不开 </span> 
   <span style="color:#000000;">MySQL</span> 
   <span style="color:#000000;">。MySQL 是一款市场占有率非常高的数据库管理系统，技术成熟，配置步骤相对简单，而且具有良好的可扩展性。但是，由于Oracle</span> 
   <span style="color:#000000;">公司在</span> 
   <span style="color:#000000;">2009</span> 
   <span style="color:#000000;">年收购了</span> 
   <span style="color:#000000;">MySQL</span> 
   <span style="color:#000000;">的母公司</span> 
   <span style="color:#000000;">Sun</span> 
   <span style="color:#000000;">，因此MySQL数据库项目也随之纳入Oracle麾下，逐步演变为保持着开源软件的身份，但又申请了多项商业专利的软件系统。开源软件是全球黑客、极客、程序员等技术高手在开源社区的大旗下的公共智慧的结晶，自己的劳动成果被其他公司商业化自然也伤了一大批开源工作者的心，因此 </span> 
   <span style="color:#000000;">MySQL 项目的创始人重新研发了一款名为 </span> 
   <span style="color:#000000;">MariaDB </span> 
   <span style="color:#000000;">的全新数据库管理系统。 </span> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">MariaDB </span> 
   <span style="color:#000000;">当前由开源社区进行维护，是 </span> 
   <span style="color:#000000;">MySQL </span> 
   <span style="color:#000000;">的分支产品，而且与 </span> 
   <span style="color:#000000;">MySQL 具有高度的兼容性，与 </span> 
   <span style="color:#000000;">MySQL API </span> 
   <span style="color:#000000;">和命令均保持一致。并且 </span> 
   <span style="color:#000000;">MariaDB </span> 
   <span style="color:#000000;">还自带了一个新的存储引擎 </span> 
   <span style="color:#000000;">Aria，用于替代 </span> 
   <span style="color:#000000;">MyISAM</span> 
   <span style="color:#000000;">。因此，</span> 
   <span style="color:#000000;">MariaDB </span> 
   <span style="color:#000000;">与 </span> 
   <span style="color:#000000;">MySQL </span> 
   <span style="color:#000000;">一样好用。 </span> 
  </div> 
 </div> 
 <h3>2.初始化MariaDB服务</h3> 
 <div> 
  <span style="color:#000000;">相较于 </span> 
  <span style="color:#000000;">MySQL</span> 
  <span style="color:#000000;">，</span> 
  <span style="color:#000000;">MariaDB 数据库管理系统有了很多新鲜的扩展特性，例如对微秒级别的</span>支持、线程池、子查询优化、进程报告等。在配置妥当软件仓库后，即可安装部署 MariaDB数据库主程序及服务端程序了。 
 </div> 
 <div> 
  <img alt="" height="181" src="https://images2.imgbox.com/d0/15/ocVIyntF_o.png" width="933"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">启动服务程序，并将其加入到开机启动项中： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="109" src="https://images2.imgbox.com/e8/aa/0WOvsim1_o.png" width="857"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">在确认 </span> 
   <span style="color:#000000;">mariadb 数据库软件程序安装完毕并成功启动后请不要立即使用。为了确保数据库的安全性和正常运转，需要先对数据库程序进行初始化操作。这个初始化操作涉及下面 5个步骤。 </span> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">1.设置 </span> 
   <span style="color:#000000;">root </span> 
   <span style="color:#000000;">管理员在数据库中的密码值（注意，该密码并非 </span> 
   <span style="color:#000000;">root 管理员在系统中的密码，这里的密码值默认应该为空，可直接按回车键）。</span> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">2.设置 </span> 
   <span style="color:#000000;">root </span> 
   <span style="color:#000000;">管理员在数据库中的专有密码。 </span> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">3.删除匿名用户，并使用 </span> 
   <span style="color:#000000;">root 管理员从远程登录数据库，以确保数据库上运行的业务的安全性。 </span> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">4.删除默认的测试数据库，取消测试数据库的一系列访问权限。</span> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">5.刷新授权列表，让初始化的设定立即生效。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="385" src="https://images2.imgbox.com/fd/3d/72HLhGXn_o.png" width="811"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">在很多生产环境中都需要使用站库分离的技术（即网站和数据库不在同一个服务器上），如果需要让 </span> 
   <span style="color:#000000;">root </span> 
   <span style="color:#000000;">管理员远程访问数据库，可在上面的初始化操作中设置策略，以允许 root 管理员从远程访问。然后还需要设置防火墙，使其放行对数据库服务程序的访问请求。数据库服务程序默认会占用 </span> 
   <span style="color:#000000;">3306 </span> 
   <span style="color:#000000;">端口，在防火墙策略中服务名称统一叫作 </span> 
   <span style="color:#000000;">mysql</span> 
   <span style="color:#000000;">： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="82" src="https://images2.imgbox.com/2f/c3/Knxh3HDY_o.png" width="848"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">一切准备就绪。现在我们将首次登录 </span> 
   <span style="color:#000000;">MariaDB </span> 
   <span style="color:#000000;">数据库。管理数据库的命令为 </span> 
   <span style="color:#000000;">mysql，其中，-u </span> 
   <span style="color:#000000;">参数用来指定以 </span> 
   <span style="color:#000000;">root </span> 
   <span style="color:#000000;">管理员的身份登录，而</span> 
   <span style="color:#000000;">-p </span> 
   <span style="color:#000000;">参数用来验证该用户在数据库中的密码值。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="213" src="https://images2.imgbox.com/d3/e1/Jaxmx1bl_o.png" width="899"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">初次使用数据库管理工具的读者，可以输入 </span> 
   <span style="color:#000000;">help </span> 
   <span style="color:#000000;">命令查看 </span> 
   <span style="color:#000000;">mariadb 服务能做的操作，语句的用法与 </span> 
   <span style="color:#000000;">MySQL </span> 
   <span style="color:#000000;">一模一样： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="326" src="https://images2.imgbox.com/78/ad/RTpVYOQc_o.png" width="926"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">在登录 </span> 
   <span style="color:#000000;">MariaDB </span> 
   <span style="color:#000000;">数据库后执行数据库命令时，都需要在命令后面用分号（</span> 
   <span style="color:#000000;">;）结尾，这也是与 </span> 
   <span style="color:#000000;">Linux 命令最显著的区别。大家需要慢慢习惯数据库命令的这种设定。下面执行如下命令查看数据库管理系统中当前都有哪些数据库：不区分大小写</span> 
  </div> 
  <div> 
   <img alt="" height="173" src="https://images2.imgbox.com/66/a9/uFvUV2iR_o.png" width="853"> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">接下来使用数据库命令将 </span> 
   <span style="color:#000000;">root 管理员在数据库管理系统中的密码值修改为 </span> 
   <span style="color:#000000;">linuxprobe</span> 
   <span style="color:#000000;">。这样退出后再尝试登录，如果还坚持输入原先的密码，则将提示访问失败。</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="163" src="https://images2.imgbox.com/4c/92/061DesE3_o.png" width="892"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">输入新密码（</span> 
   <span style="color:#000000;">linuxprobe</span> 
   <span style="color:#000000;">）后，便可顺利进入数据库管理工具中：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="133" src="https://images2.imgbox.com/ff/f2/Gv618EAn_o.png" width="475"> 
 </div> 
 <h3>3.管理用户以及授权</h3> 
 <div> 
  <div> 
   <span style="color:#000000;">在生产环境中总不能一直“死啃”</span> 
   <span style="color:#000000;">root 管理员。为了保障数据库系统的安全性，以及让其他用户协同管理数据库，可以在 </span> 
   <span style="color:#000000;">MariaDB 数据库管理系统中为他们创建多个专用的数据库管理用户，然后再分配合理的权限，以满足他们的工作需求。为此，可使用 </span> 
   <span style="color:#000000;">root 管理员登录数据库管理系统，然后按照“</span> 
   <span style="color:#000000;">CREATE USER </span> 
   <span style="color:#000000;">用户名</span> 
   <span style="color:#000000;">@</span> 
   <span style="color:#000000;">主机名 </span> 
   <span style="color:#000000;">IDENTIFIED BY '</span> 
   <span style="color:#000000;">密码</span> 
   <span style="color:#000000;">';”的格式创建数据库管理用户。再次提醒大家，一定不要忘记每条数据库命令后面的分号（</span> 
   <span style="color:#000000;">;</span> 
   <span style="color:#000000;">）。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="66" src="https://images2.imgbox.com/48/d0/GjIReFEg_o.png" width="875"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">创建的用户信息可以使用 </span> 
   <span style="color:#000000;">SELECT 命令语句来查询。下面命令查询的是用户 hello 的主机名称、用户名称以及经过加密的密码值信息： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="231" src="https://images2.imgbox.com/65/51/2yOAJhTz_o.png" width="871"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">不过，用户 hello仅仅是一位普通用户，没有数据库的任何操作权限。不信的话，可以切换到 luke 用户来查询数据库管理系统中当前都有哪些数据库。可以发现，该用户甚至没法查看完整的数据库列表（刚才使用 </span> 
   <span style="color:#000000;">root </span> 
   <span style="color:#000000;">用户时可以查看到 </span> 
   <span style="color:#000000;">3 </span> 
   <span style="color:#000000;">个数据库列表）： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="309" src="https://images2.imgbox.com/56/a1/v5v0byth_o.png" width="895"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">数据库管理系统所使用的命令一般都比较复杂。我们以 </span> 
   <span style="color:#000000;">GRANT 命令为例进行说明。GRANT </span> 
   <span style="color:#000000;">命令用于为用户进行授权</span> 
   <span style="color:#000000;">。在使用 </span> 
   <span style="color:#000000;">GRANT 命令时需要写上要赋予的权限、数据库及表单名称，以及对应的用户及主机信息。</span> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">GRANT </span> 
   <span style="color:#000000;">命令的常见格式以及解释</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="271" src="https://images2.imgbox.com/f8/a2/YGU3hWHA_o.png" width="861"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">当然，用户的授权工作肯定是需要数据库管理员来执行的。下面以 </span> 
   <span style="color:#000000;">root 管理员的身份登录到数据库管理系统中，针对 </span> 
   <span style="color:#000000;">mysql </span> 
   <span style="color:#000000;">数据库中的 </span> 
   <span style="color:#000000;">user 表单向用户 hello授予查询、更新、删除以及插入等权限。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="291" src="https://images2.imgbox.com/3c/4a/8DvuucYK_o.png" width="885"> 
 </div> 
 <div> 
  <img alt="" height="51" src="https://images2.imgbox.com/f9/a8/mcm4O63x_o.png" width="827"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">查看一下用户 hello</span> 
   <span style="color:#000000;">的权限： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="265" src="https://images2.imgbox.com/2e/a8/jmxlbvS6_o.png" width="913"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">上面输出信息中显示用户hello已经拥有了针对mysql</span> 
   <span style="color:#000000;">数据库中user表单的一系列权限了。这时我们再切换到用户 hello，此时就能够看到 mysql </span> 
   <span style="color:#000000;">数据库了，而且还能看到表单 </span> 
   <span style="color:#000000;">user（其余表单会因无权限而被继续隐藏）： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="396" src="https://images2.imgbox.com/55/c2/vUVVlZnj_o.png" width="903"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">切换回 </span> 
   <span style="color:#000000;">root 管理员用户，移除刚才的授权。</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="146" src="https://images2.imgbox.com/49/17/dcluxS2J_o.png" width="890"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">除了移除授权的命令（</span> 
   <span style="color:#000000;">REVOKE</span> 
   <span style="color:#000000;">）与授权命令（</span> 
   <span style="color:#000000;">GRANTS）不同之外，其余部分都是一致的。这不仅好记而且也容易理解。执行移除授权命令后，再来查看用户 </span> 
   <span style="color:#000000;">hello</span> 
   <span style="color:#000000;">的信息：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="216" src="https://images2.imgbox.com/0b/c8/ra9RjqRl_o.png" width="905"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">不再需要某个用户时，可以直接用 </span> 
   <span style="color:#000000;">DROP </span> 
   <span style="color:#000000;">命令将其删除：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="60" src="https://images2.imgbox.com/b7/0b/lOlHpnS1_o.png" width="854"> 
 </div> 
 <h3>4.创建数据库与表单</h3> 
 <div> 
  <div> 
   <span style="color:#000000;">在 MariaDB 数据库管理系统中，一个数据库可以存放多个数据表，数据表单是数据库中最重要最核心的内容。我们可以根据自己的需求自定义数据库表结构，然后在其中合理地存放数据，以便后期轻松地维护和修改。</span> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">用于创建数据库的命令以及作用</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="337" src="https://images2.imgbox.com/ea/ac/9fDbDPUi_o.png" width="858"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">尝试创建一个名为 </span> 
   <span style="color:#000000;">linuxprobe 的数据库，然后再查看数据库列表，此时就能看到它了：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="250" src="https://images2.imgbox.com/8f/34/yJNtEvr1_o.png" width="827"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">MariaDB </span> 
   <span style="color:#000000;">与 </span> 
   <span style="color:#000000;">MySQL </span> 
   <span style="color:#000000;">同属于关系型数据库（</span> 
   <span style="color:#000000;">Relational Database Management System</span> 
   <span style="color:#000000;">， </span> 
  </div> 
  <div> 
   <span style="color:#000000;">RDBMS</span> 
   <span style="color:#000000;">）。关系型数据库有些类似于表格的概念，一个关系型数据库由一个或多个表格</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">表单组成。</span> 
  </div> 
  <div> 
   <div> 
    <span style="color:#000000;">表头表示每一列的名称；列表示具有相同数据类型的数据集合；行表示用来描述事物的具体信息；值表示行的具体信息，每个值均与该列的其他数据类型相同；键表示用来识别某个特定事物的方法，在当前列中具有唯一性。</span> 
   </div> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="133" src="https://images2.imgbox.com/f9/73/T7P6XvIX_o.png" width="415"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">比如，在新建的 </span> 
   <span style="color:#000000;">linuxprobe </span> 
   <span style="color:#000000;">数据库中创建表单 </span> 
   <span style="color:#000000;">mybook，然后进行表单的初始化，即定义存储数据内容的结构。我们分别定义 </span> 
   <span style="color:#000000;">3 </span> 
   <span style="color:#000000;">个字段项，其中，字符型字段 </span> 
   <span style="color:#000000;">name</span> 
   <span style="color:#000000;">（长度为 </span> 
   <span style="color:#000000;">15 字符）用来存放图书名称，整型字段 </span> 
   <span style="color:#000000;">price </span> 
   <span style="color:#000000;">和 </span> 
   <span style="color:#000000;">pages 分别存储图书的价格和页数。当执行完下述命令之后，就可以看到表单的结构信息了： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="93" src="https://images2.imgbox.com/b5/2a/DcRGZd7u_o.png" width="865"> 
 </div> 
 <div> 
  <img alt="" height="164" src="https://images2.imgbox.com/41/02/RVzOAK4i_o.png" width="764"> 
 </div> 
 <h3>5.管理表单及数据</h3> 
 <div> 
  <div> 
   <span style="color:#000000;">接下来向 </span> 
   <span style="color:#000000;">mybook </span> 
   <span style="color:#000000;">数据表单中插入一条图书信息。为此需要使用 INSERT 命令，并在命令中写清表单名称以及对应的字段项。执行该命令之后即可完成图书写入信息。下面使用该命令插入一条图书信息，其中书名为 </span> 
   <span style="color:#000000;">linuxprobe</span> 
   <span style="color:#000000;">，价格和页数分别是 </span> 
   <span style="color:#000000;">60 </span> 
   <span style="color:#000000;">元和 518 页。在命令执行后也就意味着图书信息已经成功写入到数据表单中，然后就可以查询表单中的内容了。在使用 </span> 
   <span style="color:#000000;">SELECT 命令查询表单内容时，需要加上想要查询的字段；如果想查看表单中的所有内容，则可以使用星号（</span> 
   <span style="color:#000000;">*</span> 
   <span style="color:#000000;">）通配符来显示：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="193" src="https://images2.imgbox.com/53/ab/GMFGck11_o.png" width="874"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">对数据库运维人员来讲，需要做好 </span> 
   <span style="color:#000000;">4 </span> 
   <span style="color:#000000;">门功课—增、删、改、查。这意味着创建数据表单并在其中插入内容仅仅是第一步，还需要掌握数据表单内容的修改方法。例如，可以使用UPDATE </span> 
   <span style="color:#000000;">命令将刚才插入的 </span> 
   <span style="color:#000000;">linuxprobe </span> 
   <span style="color:#000000;">图书信息的价格修改为 </span> 
   <span style="color:#000000;">55 </span> 
   <span style="color:#000000;">元，然后再使用 SELECT 命令查看该图书的名称和定价信息。注意，因为这里只查看图书的名称和定价，而不涉及页码，所以无须再用星号通配符来显示所有内容。</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="198" src="https://images2.imgbox.com/dc/8e/7VRrvvPx_o.png" width="837"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">想修改指定的某一条记录，用 </span> 
   <span style="color:#000000;">WHERE 命令进行限定即可。我们先插入两条图书信息：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="118" src="https://images2.imgbox.com/d1/9e/XTW8qw59_o.png" width="878"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">然后使用 </span> 
   <span style="color:#000000;">WHERE </span> 
   <span style="color:#000000;">命令仅将名称为 </span> 
   <span style="color:#000000;">linuxcool </span> 
   <span style="color:#000000;">的图书价格修改为 </span> 
   <span style="color:#000000;">60 元，不影响其他图书信息： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="235" src="https://images2.imgbox.com/1a/4b/hBJd3ejd_o.png" width="845"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">还可以使用 </span> 
   <span style="color:#000000;">DELETE </span> 
   <span style="color:#000000;">命令删除某个数据表单中的内容。下面使用 </span> 
   <span style="color:#000000;">DELETE 命令删除数据表单 </span> 
   <span style="color:#000000;">mybook 中的所有内容，然后再查看该表单中的内容，可以发现该表单内容为空了： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="97" src="https://images2.imgbox.com/4c/37/5jkpxJLI_o.png" width="858"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">一般来讲，数据表单中会存放成千上万条数据信息。比如我们刚刚创建的用于保存图书信息的 mybook 表单，随着时间的推移，里面的图书信息也会越来越多。在这样的情况下，如果只想查看其价格大于某个数值的图书，又该如何定义查询语句呢？</span> 
  </div> 
  <div> 
   <span style="color:#000000;">下面先使用 </span> 
   <span style="color:#000000;">INSERT </span> 
   <span style="color:#000000;">插入命令依次插入 </span> 
   <span style="color:#000000;">4 </span> 
   <span style="color:#000000;">条图书信息： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="205" src="https://images2.imgbox.com/2a/dc/LQxzY0Ey_o.png" width="862"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">要想让查询结果更加精准，就需要结合使用 </span> 
   <span style="color:#000000;">SELECT </span> 
   <span style="color:#000000;">与 </span> 
   <span style="color:#000000;">WHERE 命令了。其中，WHERE命令是在数据库中进行匹配查询的条件命令。通过设置查询条件，就可以仅查找出符合该条件的数据。</span> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">WHERE </span> 
   <span style="color:#000000;">命令中使用的参数以及作用 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="333" src="https://images2.imgbox.com/90/4c/DvSz2LOt_o.png" width="854"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">分别在 </span> 
   <span style="color:#000000;">mybook </span> 
   <span style="color:#000000;">表单中查找出价格大于 </span> 
   <span style="color:#000000;">75 </span> 
   <span style="color:#000000;">元或价格不等于 80 元的图书，其对应的命令如下所示。在熟悉了这两个查询条件之后，大家可以自行尝试精确查找图书名为 </span> 
   <span style="color:#000000;">linuxprobe4 </span> 
   <span style="color:#000000;">的图书信息。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="128" src="https://images2.imgbox.com/97/0b/u1LEJ2IK_o.png" width="873"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">匹配的条件越多，获得的信息就越精准。在 </span> 
   <span style="color:#000000;">WHERE </span> 
   <span style="color:#000000;">命令的后面追加 </span> 
   <span style="color:#000000;">AND 操作符，可以进行多次匹配。例如，执行下述命令，找到价格为 </span> 
   <span style="color:#000000;">45</span> 
   <span style="color:#000000;">元、页数为 </span> 
   <span style="color:#000000;">500</span> 
   <span style="color:#000000;">的图书的名称： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="134" src="https://images2.imgbox.com/c2/71/kFSW3TSr_o.png" width="902"> 
 </div> 
 <h3>6.数据库的备份及恢复</h3> 
 <div> 
  <div> 
   <span style="color:#000000;">mysqldump </span> 
   <span style="color:#000000;">命令用于备份数据库数据，格式为“</span> 
   <span style="color:#000000;">mysqldump [</span> 
   <span style="color:#000000;">参数</span> 
   <span style="color:#000000;">] [</span> 
   <span style="color:#000000;">数据库名称</span> 
   <span style="color:#000000;">]”。其中参数与 </span> 
   <span style="color:#000000;">mysql </span> 
   <span style="color:#000000;">命令大致相同，</span> 
   <span style="color:#000000;">-u </span> 
   <span style="color:#000000;">参数用于定义登录数据库的用户名称，</span> 
   <span style="color:#000000;">-p 参数表示密码提示符。下面将 </span> 
   <span style="color:#000000;">linuxprobe </span> 
   <span style="color:#000000;">数据库中的内容导出为一个文件，并保存到 </span> 
   <span style="color:#000000;">root </span> 
   <span style="color:#000000;">管理员的家目录中：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="49" src="https://images2.imgbox.com/57/0d/zCHR42pt_o.png" width="880"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">然后进入 </span> 
   <span style="color:#000000;">MariaDB </span> 
   <span style="color:#000000;">数据库管理系统，彻底删除 </span> 
   <span style="color:#000000;">linuxprobe </span> 
   <span style="color:#000000;">数据库，这样 </span> 
   <span style="color:#000000;">mybook 数据表单也将被彻底删除。然后重新建立 </span> 
   <span style="color:#000000;">linuxprobe </span> 
   <span style="color:#000000;">数据库：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="77" src="https://images2.imgbox.com/6b/1c/notjKNOm_o.png" width="895"> 
 </div> 
 <div> 
  <img alt="" height="229" src="https://images2.imgbox.com/25/6a/1Q3mVO9T_o.png" width="897"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">接下来是见证数据恢复效果的时刻！使用输入重定向符把刚刚备份的数据库文件导入到mysql </span> 
   <span style="color:#000000;">命令中，然后执行该命令。接下来登录 </span> 
   <span style="color:#000000;">MariaDB </span> 
   <span style="color:#000000;">数据库，就又能看到 </span> 
   <span style="color:#000000;">linuxprobe 数据库以及 </span> 
   <span style="color:#000000;">mybook </span> 
   <span style="color:#000000;">数据表单了。数据库恢复成功！ </span> 
  </div> 
  <div>
    先创建同名的数据库 
  </div> 
 </div> 
 <div> 
  <img alt="" height="227" src="https://images2.imgbox.com/b6/df/797KpmDh_o.png" width="813"> 
 </div> 
 <div>
   然后退出数据库，把保存的数据导入新建的数据库 
 </div> 
 <div> 
  <img alt="" height="41" src="https://images2.imgbox.com/76/fb/85AdFiJ0_o.png" width="863"> 
 </div> 
 <div>
   查看数据 
 </div> 
 <div> 
  <img alt="" height="398" src="https://images2.imgbox.com/43/cc/OghBhbT4_o.png" width="915"> 
 </div> 
 <h2>十八、PXE+Kickstart无人值守</h2> 
 <div> 
  <div> 
   <span style="color:#000000;">本章将介绍能够用来实现无人值守安装服务的 </span> 
   <span style="color:#000000;">PXE + Kickstart </span> 
   <span style="color:#000000;">服务程序，并带领大家动手安装部署 PXE + TFTP + FTP + DHCP +Kickstart </span> 
   <span style="color:#000000;">等服务程序，从而搭建出一套可批量安装 </span> 
   <span style="color:#000000;">Linux 系统的无人值守安装系统。在学完本章内容之后，运维新手就可以避免枯燥乏味的重复性工作，大大提高系统安装的效率。 </span> 
  </div> 
  <h3>1.无人值守系统</h3> 
  <div> 
   <div> 
    <span style="color:#000000;">如果生产环境中有数百台服务器都需要安装系统，就需要使用 PXE + TFTP + FTP + DHCP + Kickstart 服务搭建出一个无人值守安装系统。这种无人值守安装系统可以自动地为数十台甚至上百台的服务器安装系统，这一方面将运维人员从重复性的工作中解救出来，另外一方面也大大提升了系统安装的效率。</span> 
   </div> 
   <div> 
    <img alt="" height="106" src="https://images2.imgbox.com/37/7e/4xBatFZZ_o.png" width="495"> 
   </div> 
   <div> 
    <div> 
     <span style="color:#000000;">PXE</span> 
     <span style="color:#000000;">（</span> 
     <span style="color:#000000;">Preboot eXecute Environment</span> 
     <span style="color:#000000;">，预启动执行环境）是由 </span> 
     <span style="color:#000000;">Intel 公司开发的技术，能够让计算机通过网络来启动操作系统（前提是计算机上安装的网卡支持 </span> 
     <span style="color:#000000;">PXE 技术），主要用于在无人值守安装系统中引导客户端主机安装 </span> 
     <span style="color:#000000;">Linux </span> 
     <span style="color:#000000;">操作系统。</span> 
     <span style="color:#000000;">Kickstart 是一种无人值守的安装方式，其工作原理是预先把原本需要运维人员手工填写的参数保存成一个 </span> 
     <span style="color:#000000;">ks.cfg 文件，当安装过程中需要填写参数时则自动匹配 </span> 
     <span style="color:#000000;">Kickstart </span> 
     <span style="color:#000000;">生成的文件。所以只要 </span> 
     <span style="color:#000000;">Kickstart 文件包含了</span>安装过程中需要人工填写的所有参数，那么从理论上来讲完全不需要运维人员的干预，就可以自动完成安装工作。 
    </div> 
   </div> 
   <div> 
    <div> 
     <span style="color:#000000;">由于当前的客户端主机并没有完整的操作系统，因此也就不能完成 </span> 
     <span style="color:#000000;">FTP 协议的验证了，所以需要使用 </span> 
     <span style="color:#000000;">TFTP </span> 
     <span style="color:#000000;">协议帮助客户端获取引导及驱动文件。vsftpd 服务程序用于将完整的系统安装镜像通过网络传输给客户端。当然，只要能将系统安装镜像成功传输给客户端即可，因此也可以使用 </span> 
     <span style="color:#000000;">httpd </span> 
     <span style="color:#000000;">来替代 </span> 
     <span style="color:#000000;">vsftpd </span> 
     <span style="color:#000000;">服务程序。</span> 
    </div> 
   </div> 
   <h3>2.部署相关服务程序</h3> 
   <div> 
    <span style="color:#000000;">接下来实验中即将用到的服务及作用 </span> 
   </div> 
   <div> 
    <img alt="" height="164" src="https://images2.imgbox.com/b4/c3/BcI2RgGL_o.png" width="682"> 
   </div> 
   <h4 style="background-color:transparent;">1.配置HDCP服务程序</h4> 
  </div> 
  <div> 
   <div> 
    <span style="color:#000000;">DHCP </span> 
    <span style="color:#000000;">服务程序用于为客户端主机分配可用的 </span> 
    <span style="color:#000000;">IP 地址，而且这是服务器与客户端主机进行文件传输的基础，因此要先行配置 </span> 
    <span style="color:#000000;">DHCP </span> 
    <span style="color:#000000;">服务程序。首先按照表 </span> 
    <span style="color:#000000;">19-2 为无人值守系统设置IP </span> 
    <span style="color:#000000;">地址，然后按照图 </span> 
    <span style="color:#000000;">19-2 </span> 
    <span style="color:#000000;">和图 </span> 
    <span style="color:#000000;">19-3 </span> 
    <span style="color:#000000;">在虚拟机的虚拟网络编辑器中关闭自身的 </span> 
    <span style="color:#000000;">DHCP 服务，避免与自己配置的服务冲突。</span> 
   </div> 
  </div> 
  <div> 
   <img alt="" height="87" src="https://images2.imgbox.com/f9/41/uHgQCX8A_o.png" width="688"> 
  </div> 
  <div> 
   <img alt="" height="202" src="https://images2.imgbox.com/c4/46/8lq2PUeB_o.png" width="656"> 
  </div> 
  <div> 
   <img alt="" height="392" src="https://images2.imgbox.com/2c/36/zyRb9AMy_o.png" width="426"> 
  </div> 
  <div> 
   <div> 
    <span style="color:#000000;">除了上面提及的服务之外，</span> 
    <span style="color:#000000;">PXE + KickStart </span> 
    <span style="color:#000000;">无人值守安装系统还会用到诸如 </span> 
    <span style="color:#000000;">sips</span> 
    <span style="color:#000000;">、</span> 
    <span style="color:#000000;">slp、 mountd </span> 
    <span style="color:#000000;">等多项相关的服务协议，因此本实验会临时关闭 </span> 
    <span style="color:#000000;">firewalld 防火墙，以便数据能够正常地传送：</span> 
   </div> 
  </div> 
  <div> 
   <img alt="" height="47" src="https://images2.imgbox.com/cd/69/lI8YGvmL_o.png" width="741"> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">当挂载好光盘镜像并把仓库文件配置妥当后，就可以安装 </span> 
   <span style="color:#000000;">DHCP </span> 
   <span style="color:#000000;">服务程序软件包了： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="178" src="https://images2.imgbox.com/58/19/CQY861f4_o.png" width="934"> 
 </div> 
 <div> 
  <span style="color:#000000;">我们在这里使用的配置文件与第 </span> 
  <span style="color:#000000;">14 章中的配置文件有两个主</span>要区别：允许了 BOOTP 引导程序协议，旨在让局域网内暂时没有操作系统的主机也能获取静态 IP 地址；在配置文件的最下面加载了引导驱动文件 pxelinux.0（这个文件会在下面的步骤中创建），其目的是让客户端主机获取到 IP 地址后主动获取引导驱动文件，自行进入下一步的安装过程。 
 </div> 
 <div> 
  <img alt="" height="305" src="https://images2.imgbox.com/69/89/tg147RHP_o.png" width="1015"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">在确认 </span> 
   <span style="color:#000000;">DHCP 服务程序的参数都填写正确后，重新启动该服务程序，并将其添加到开机启动项中。这样在设备下一次重启之后，可以在无须人工干预的情况下，自动为客户端主机安装系统</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="63" src="https://images2.imgbox.com/29/6f/MbnNUM3y_o.png" width="1028"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">与以往的红帽企业版不同，RHEL 8 系统中存在一些“讨厌”的服务，它们的参数错误会导致服务启动失败，但有时却不会在屏幕上向用户显示任何提示信息。建议在启动 dhcpd 后查看一下服务状态，以免后续实验中客户端分配不到网卡信息。若输出状态为“ active (running)”则表示服务已经正常运行： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="168" src="https://images2.imgbox.com/a1/d4/jWgDQfm3_o.png" width="1001"> 
 </div> 
 <h4>2.配置TFTP服务程序</h4> 
 <div> 
  <div> 
   <span style="color:#000000;">vsftpd 是一款功能丰富的文件传输服务程序，允许用户以匿名开放模式、本地用户模式、虚拟用户模式来进行访问认证。但是，当前的客户端主机还没有安装操作系统，该如何进行登录认证呢？</span> 
   <span style="color:#000000;">TFTP 作为一种基于UDP 协议的简单文件传输协议，不需要进行用户认证即可获取到所需的文件资源。因此接下来配置 </span> 
   <span style="color:#000000;">TFTP 服务程序，为客户端主机提供引导及驱动文件。当客户端主机有了基本的驱动程序之后，再通过 </span> 
   <span style="color:#000000;">vsftpd </span> 
   <span style="color:#000000;">服务程序将完整的光盘镜像文件传输过去。</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="168" src="https://images2.imgbox.com/1a/45/kRUpZ3o5_o.png" width="1042"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">TFTP </span> 
   <span style="color:#000000;">是一种非常精简的文件传输服务程序，它的运行和关闭是由 </span> 
   <span style="color:#000000;">xinetd 网络守护进程服务来管理的。</span> 
   <span style="color:#000000;">xinetd 服务程序会同时监听系统的多个端口，然后根据用户请求的端口号调取相应的服务程序来响应用户的请求。需要开启 </span> 
   <span style="color:#000000;">TFTP </span> 
   <span style="color:#000000;">服务程序时，只需在 </span> 
   <span style="color:#000000;">xinetd 服务程序的配置文件中把 </span> 
   <span style="color:#000000;">disable </span> 
   <span style="color:#000000;">参数改成 </span> 
   <span style="color:#000000;">no 就可以了。如果配置文件不存在，则复制下面的内容进来，手动创建一下：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="313" src="https://images2.imgbox.com/e8/dd/zSumhQ65_o.png" width="956"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">保存配置文件并退出，然后重启 </span> 
   <span style="color:#000000;">xinetd 服务程序，并将其加入到开机启动项中。</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="65" src="https://images2.imgbox.com/63/88/boPMZ2cd_o.png" width="988"> 
 </div> 
 <h4>3.配置SYSLinux服务程序</h4> 
 <div> 
  <div> 
   <span style="color:#000000;">SYSLinux </span> 
   <span style="color:#000000;">是一个用于提供引导加载的服务程序。与其说 </span> 
   <span style="color:#000000;">SYSLinux 是一个服务程序，不如说是一个包含了很多引导文件的文件夹。在安装好 </span> 
   <span style="color:#000000;">SYSLinux </span> 
   <span style="color:#000000;">服务程序后，/usr/share/syslinux目录中会出现很多引导文件。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="160" src="https://images2.imgbox.com/14/2e/m7b93TxZ_o.png" width="1027"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">我们首先需要把 </span> 
   <span style="color:#000000;">SYSLinux </span> 
   <span style="color:#000000;">提供的引导文件（也就是前文提到的文件 </span> 
   <span style="color:#000000;">pxelinux.0）复制到 </span> 
   <span style="color:#000000;">TFTP 服务程序的默认目录中，这样客户端主机就能够顺利地获取到引导文件了。另外在RHEL 8 系统光盘镜像中也有一些需要调取的引导文件。确认光盘镜像已经被挂载到/media/cdrom </span> 
   <span style="color:#000000;">目录后，使用复制命令将光盘镜像中自带的一些引导文件也复制到 </span> 
   <span style="color:#000000;">TFTP 服务程序的默认目录中。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="28" src="https://images2.imgbox.com/97/19/RMXINS5T_o.png" width="890"> 
 </div> 
 <div> 
  <img alt="" height="115" src="https://images2.imgbox.com/e4/85/BFdz1zMo_o.png" width="1018"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">cp </span> 
   <span style="color:#000000;">命令后面接的句点（</span> 
   <span style="color:#000000;">.</span> 
   <span style="color:#000000;">）表示当前工作目录。也就是说，上述 </span> 
   <span style="color:#000000;">cp 命令表示将文件复制到当前工作目录（即</span> 
   <span style="color:#000000;">/var/lib/tftpboot）中。在复制过程中，若多个目录保存着相同的文件，则可手动敲击 </span> 
   <span style="color:#000000;">y </span> 
   <span style="color:#000000;">键进行覆盖即可。 </span> 
  </div> 
  <div> 
   <span style="color:#000000;">然后在 </span> 
   <span style="color:#000000;">TFTP </span> 
   <span style="color:#000000;">服务程序的目录中新建 </span> 
   <span style="color:#000000;">pxelinux.cfg 目录。虽然该目录的名字带有后缀，但依然也是目录，而非文件！将系统光盘中的开机选项菜单复制到该目录中，并命名为 </span> 
   <span style="color:#000000;">default。这个 </span> 
   <span style="color:#000000;">default </span> 
   <span style="color:#000000;">文件就是开机时的选项菜单</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="50" src="https://images2.imgbox.com/d9/8c/cRzVslYa_o.png" width="997"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">默认的开机菜单中有 3 个选项：安装系统、对安装介质进行检验、排错模式。既然已经确定采用无人值守的方式安装系统，若还需要为每台主机手动选择相应的选项，则未免与我们的主旨（无人值守安装）相悖。 </span> 
  </div> 
  <div> 
   <span style="color:#000000;">现在我们编辑这个 </span> 
   <span style="color:#000000;">default </span> 
   <span style="color:#000000;">文件，把第 </span> 
   <span style="color:#000000;">1 </span> 
   <span style="color:#000000;">行的 </span> 
   <span style="color:#000000;">default </span> 
   <span style="color:#000000;">参数修改为 </span> 
   <span style="color:#000000;">linux，这样系统在开机时就会默认执行那个名称为 </span> 
   <span style="color:#000000;">linux </span> 
   <span style="color:#000000;">的选项了。对应的 </span> 
   <span style="color:#000000;">linux </span> 
   <span style="color:#000000;">选项大约在第 </span> 
   <span style="color:#000000;">64 行，将默认的光盘镜像安装方式修改成 </span> 
   <span style="color:#000000;">FTP </span> 
   <span style="color:#000000;">文件传输方式，并指定好光盘镜像的获取网址以及 </span> 
   <span style="color:#000000;">Kickstart 应答文件的获取路径：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="325" src="https://images2.imgbox.com/61/96/lrvncCv2_o.png" width="1099"> 
 </div> 
 <div> 
  <img alt="" height="204" src="https://images2.imgbox.com/f4/2a/26p8iR4D_o.png" width="1030"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">建议在安装源的后面加入 </span> 
   <span style="color:#000000;">quiet 参数，意为使用静默安装方式，不再需要用户进行确认。文件修改完毕后保存即可。开机选项菜单是被调用的文件，因此不需要单独重启任何服务。 </span> 
  </div> 
 </div> 
 <h4>4.配置vsftpd服务程序</h4> 
 <div> 
  <div> 
   <span style="color:#000000;">在这套无人值守安装系统的服务中，光盘镜像是通过 </span> 
   <span style="color:#000000;">FTP 协议传输的，因此势必要用到vsftpd </span> 
   <span style="color:#000000;">服务程序。当然，也可以使用 </span> 
   <span style="color:#000000;">httpd </span> 
   <span style="color:#000000;">服务程序来提供 </span> 
   <span style="color:#000000;">Web 网站访问的方式，只要能确保将光盘镜像顺利传输给客户端主机即可。如果打算使用 </span> 
   <span style="color:#000000;">Web 网站服务来提供光盘镜像，一定记得将上面配置文件中的光盘镜像获取网址和 </span> 
   <span style="color:#000000;">Kickstart </span> 
   <span style="color:#000000;">应答文件获取网址修改一下。</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="170" src="https://images2.imgbox.com/0a/1c/8pVNdlHi_o.png" width="1046"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">RHEL 8 </span> 
   <span style="color:#000000;">系统版本的 </span> 
   <span style="color:#000000;">vsftpd </span> 
   <span style="color:#000000;">服务默认不允许匿名公开访问模式，因此需要手动进行开启： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="33" src="https://images2.imgbox.com/5e/56/IRmvJpAB_o.png" width="887"> 
 </div> 
 <div> 
  <img alt="" height="159" src="https://images2.imgbox.com/ff/90/Vl0nVQzj_o.png" width="993"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">在配置文件修改正确之后，一定将相应的服务程序添加到开机启动项中</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="76" src="https://images2.imgbox.com/2f/65/Xy6Dluoq_o.png" width="1040"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">在确认系统光盘镜像已经正常挂载到</span> 
   <span style="color:#000000;">/media/cdrom 目录后，把目录中的光盘镜像文件全部复制到 </span> 
   <span style="color:#000000;">vsftpd </span> 
   <span style="color:#000000;">服务程序的工作目录中： </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="32" src="https://images2.imgbox.com/09/a9/PrmRov05_o.png" width="886"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">将 </span> 
   <span style="color:#000000;">SELinux 安全子系统中放行FTP </span> 
   <span style="color:#000000;">传输协议的允许策略，设置成 </span> 
   <span style="color:#000000;">on</span> 
   <span style="color:#000000;">（开启）。</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="38" src="https://images2.imgbox.com/94/f3/ES7hGDBh_o.png" width="828"> 
 </div> 
 <h4 style="background-color:transparent;">5.创建Kickstart应答文件</h4> 
 <div> 
  <div> 
   <span style="color:#000000;">！Kickstart 应答文件中包含了系统安装过程中需要使用的选项和参数信息，系统可以自动调取这个应答文件的内容，从而彻底实现无人值守安装系统。那么，既然这个文件如此重要，该去哪里找呢？其实在 </span> 
   <span style="color:#000000;">root 管理员的家目录中有一个名为anaconda-ks.cfg </span> 
   <span style="color:#000000;">的文件，它就是应答文件。下面将这个文件复制到 </span> 
   <span style="color:#000000;">vsftpd 服务程序的工作目录中（在开机选项菜单的配置文件中已经定义了该文件的获取路径，也就是 </span> 
   <span style="color:#000000;">vsftpd 服务程序数据目录中的 </span> 
   <span style="color:#000000;">pub </span> 
   <span style="color:#000000;">子目录）。使用 </span> 
   <span style="color:#000000;">chmod 命令设置该文件的权限，确保所有人都有可读的权限，以保证客户端主机顺利获取到应答文件及里面的内容</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="49" src="https://images2.imgbox.com/e2/24/CX3n9D9b_o.png" width="850"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">Kickstart </span> 
   <span style="color:#000000;">应答文件并没有想象中的那么复杂，它总共只有 44 行左右的参数和注释内容，大家完全可以通过参数的名称及介绍来快速了解每个参数的作用。</span> 
  </div> 
  <div> 
   <span style="color:#000000;">其中，第 </span> 
   <span style="color:#000000;">1</span> 
   <span style="color:#000000;">～</span> 
   <span style="color:#000000;">10 </span> 
   <span style="color:#000000;">行表示安装硬盘的名称为 </span> 
   <span style="color:#000000;">sda </span> 
   <span style="color:#000000;">及使用 </span> 
   <span style="color:#000000;">LVM 技术。这便要求我们在后续新建客户端虚拟机时，硬盘一定要选择 </span> 
   <span style="color:#000000;">SCSI </span> 
   <span style="color:#000000;">或 </span> 
   <span style="color:#000000;">SATA </span> 
   <span style="color:#000000;">类型的</span> 
   <span style="color:#000000;">，否则会变成/dev/hd或</span> 
   <span style="color:#000000;">/dev/nvme </span> 
   <span style="color:#000000;">开头的名称，进而会因找不到硬盘设备而终止安装进程。 </span> 
  </div> 
  <div> 
   <span style="color:#000000;">第 </span> 
   <span style="color:#000000;">8 </span> 
   <span style="color:#000000;">行的软件仓库，应改为由 </span> 
   <span style="color:#000000;">FTP </span> 
   <span style="color:#000000;">服务器提供的网络路径。第 </span> 
   <span style="color:#000000;">10 行的安装源，也需要由 </span> 
   <span style="color:#000000;">CDROM </span> 
   <span style="color:#000000;">改为网络安装源：</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="92" src="https://images2.imgbox.com/aa/ae/zrwiDGbW_o.png" width="951"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">在第 </span> 
   <span style="color:#000000;">11</span> 
   <span style="color:#000000;">～</span> 
   <span style="color:#000000;">20 </span> 
   <span style="color:#000000;">行，</span> 
   <span style="color:#000000;">keyboard </span> 
   <span style="color:#000000;">参数为硬盘类型，一般都不需要修改。但一定要注意第 </span> 
   <span style="color:#000000;">17 行的网卡信息，一定要让网卡默认处于 </span> 
   <span style="color:#000000;">DHCP 模式，否则在几十、上百台主机同时被创建出来后，会因为 </span> 
   <span style="color:#000000;">IP </span> 
   <span style="color:#000000;">地址相互冲突而导致后续无法管理。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="92" src="https://images2.imgbox.com/18/ec/P7KLqdRB_o.png" width="988"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">在第 </span> 
   <span style="color:#000000;">21 </span> 
   <span style="color:#000000;">行</span> 
   <span style="color:#000000;">～</span> 
   <span style="color:#000000;">30 </span> 
   <span style="color:#000000;">行，</span> 
   <span style="color:#000000;">timezone 参数定义了系统默认时区为“上海”。如果大家的服务器时间不准确，则按照如下修改即可。在第 </span> 
   <span style="color:#000000;">29 </span> 
   <span style="color:#000000;">行，创建了一个普通用户，密码值可复制/etc/shadow文件中的加密密文，它由系统自动创建。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="227" src="https://images2.imgbox.com/da/12/e3fO5o7J_o.png" width="1029"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">最后的第 </span> 
   <span style="color:#000000;">31</span> 
   <span style="color:#000000;">～</span> 
   <span style="color:#000000;">44 </span> 
   <span style="color:#000000;">行表示要安装的软件来源。</span> 
   <span style="color:#000000;">graphical-server-environment 即带有图形化界面的服务器环境，它对应的是安装界面中的 </span> 
   <span style="color:#000000;">Server With GUI </span> 
   <span style="color:#000000;">选项。 </span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="251" src="https://images2.imgbox.com/5d/91/T2zcX2sw_o.png" width="924"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">Kickstart </span> 
   <span style="color:#000000;">应答文件将使用 </span> 
   <span style="color:#000000;">FTP 服务进行传输，然后由安装向导进行调用，因此也不需要重启任何服务。</span> 
  </div> 
 </div> 
 <h3>3.自动部署客户机</h3> 
 <div> 
  <div> 
   <span style="color:#000000;">在按照上文讲解的方法成功部署各个相关的服务程序后，就可以使用 PXE + Kickstart 无人值守安装系统了。在采用下面的步骤建立虚拟主机时，一定要把客户端的网络模式设定成与服务端一致的“仅主机模式”，否则两台设备无法进行通信，也就更别提自动安装系统了。其余硬件配置选项并没有强制性要求，大家可参考这里的配置选项来设定。 </span> 
  </div> 
 </div> 
 <div> 
  <strong>第一步：</strong>打开“新建虚拟机向导”程序，选择“自定义（高级）”配置类型，然后单击“下一步”按钮。在随后的虚拟机硬件兼容性选项中，选择默认的“Workstation16.x”，步骤省略。 
 </div> 
 <div> 
  <img alt="" height="551" src="https://images2.imgbox.com/c2/4a/xjZsxf36_o.png" width="570"> 
 </div> 
 <div> 
  <strong>第二步：</strong>将虚拟机操作系统的安装来源设置为“稍后安装操作系统”。这样做的目的是让虚拟机真正从网络中获取系统安装镜像，同时也可避免 VMware Workstation 虚拟机软件按照内设的方法自行安装系统。单击“下一步”按钮 
 </div> 
 <div> 
  <img alt="" height="551" src="https://images2.imgbox.com/39/bf/nTV257Xf_o.png" width="570"> 
 </div> 
 <div> 
  <strong>第三步：</strong>将“客户机操作系统”设置为 Linux，版本为“Red Hat Enterprise Linux 8 64 位”，然后单击“下一步”按钮 
 </div> 
 <div> 
  <img alt="" height="551" src="https://images2.imgbox.com/91/2d/1qmF0NvG_o.png" width="570"> 
 </div> 
 <div> 
  <strong>第四步：</strong>对虚拟机进行命名并设置安装位置。大家可自行定义虚拟机的名称，而安装位置则尽量选择磁盘空间较大的分区。然后单击“下一步”按钮。在随后设置虚拟机处理器的个数及核心数、内存容量值时，请大家根据实际情况自行选择，步骤省略。 
 </div> 
 <div> 
  <img alt="" height="551" src="https://images2.imgbox.com/d9/03/N2vKv2fk_o.png" width="570"> 
 </div> 
 <div> 
  <strong>第五步：</strong>设置虚拟机主机的网络连接类型为“使用仅主机模式网络”。一定要确保服务器与客户端同处于相同的网络模式，否则客户端无法获得从服务器传送过来的系统镜像及应答文件。随后的 SCSI 控制器类型选择默认的 LSI Logic，步骤省略。 
 </div> 
 <div> 
  <img alt="" height="551" src="https://images2.imgbox.com/14/33/aKhsU5Xt_o.png" width="570"> 
 </div> 
 <div> 
  <strong>第六步：</strong>设置硬盘类型并指定容量。设置“虚拟磁盘类型”为 SCSI 或 SATA，随后在硬盘创建确认界面，选择“创建新虚拟磁盘”选项，步骤省略。 
 </div> 
 <div> 
  <img alt="" height="551" src="https://images2.imgbox.com/59/57/QylLvuh2_o.png" width="570"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">这里将“最大磁盘大小”设置为 </span> 
   <span style="color:#000000;">20GB</span> 
   <span style="color:#000000;">。需要说明的是，这个 20GB 指的是虚拟机系统能够使用的最大上限，而不是会被立即占满，因此设置得稍微大一些也没有关系。然后单击“下一步”按钮</span> 
  </div> 
  <div></div> 
 </div> 
 <div> 
  <strong>第七步：</strong>结束“新建虚拟机向导程序”后，先不要着急打开虚拟机系统。大家还需要单击“自定义硬件”按钮，在弹出的界面中，把“网络适配器”设备同样也设置为“仅主机模式”（这个步骤非常重要），移除其他不需要的硬件，然后单击“确定”按钮。 
 </div> 
 <div> 
  <strong>第八步：</strong> 
  <span style="color:#000000;">现在，我们就同时准备好了 </span> 
  <span style="color:#000000;">PXE + Kickstart </span> 
  <span style="color:#000000;">无人值守安装系统与虚拟主机。在生产环境 </span> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">中，大家只需要将配置妥当的服务器上架，接通服务器和客户端主机之间的网线，然后启动客户端主机即可。接下</span> 
   <span style="color:#000000;">开始传输光盘镜像文件并进行自 动安装了</span> 
   <span style="color:#000000;">—期间完全无须人工干预，直到安装完毕时才需要运维人员进行简单的初始化 工作。</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="557" src="https://images2.imgbox.com/89/99/mUcHPNz4_o.png" width="1200"> 
 </div> 
 <div> 
  <img alt="" height="723" src="https://images2.imgbox.com/24/69/q9zu0aqu_o.png" width="1190"> 
 </div> 
 <div> 
  <img alt="" height="767" src="https://images2.imgbox.com/b9/41/9QXPjfJu_o.png" width="1200"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">由此可见，当生产环境工作中有数百台服务器需要批量安装系统时，使用无人值守安装系统的便捷性是不言而喻的。但是为了避免法律风险，红帽公司对于许可界面还不允许用应答文件自动完成，需要人工单击“</span> 
   <span style="color:#000000;">I accept the license agreement</span> 
   <span style="color:#000000;">”复选框后方可继续安装，如</span> 
  </div> 
 </div> 
 <div> 
  <img alt="" height="709" src="https://images2.imgbox.com/5a/0a/thQMW7bR_o.png" width="1200"> 
 </div> 
 <div></div> 
 <div></div> 
 <div></div> 
 <div></div> 
 <div></div> 
 <div></div> 
 <div></div> 
 <div></div> 
 <div></div> 
 <div></div> 
 <div></div> 
 <div></div> 
 <div></div> 
 <div></div> 
 <div></div> 
 <div></div> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/92411a22c0a31912b8a66b03fff16713/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux Windows相互下载 传输文件 scp命令</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fd7a7be7b731e8e1b020823c0aae1e2e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JavaScript中的迭代方法和这些方法的重构</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>