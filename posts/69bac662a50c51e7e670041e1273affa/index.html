<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MyBatis教程 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MyBatis教程" />
<meta property="og:description" content="转自 https://b：log.csdn.net/zpcandzhj/article/details/80878563 文章目录 1.从JDBC谈起1.1.使用IDEA创建maven工程1.2.引入mysql依赖包1.3.准备数据1.4.JDBC基础代码回顾1.5.JDBC缺点分析 2.MyBatis介绍3.Mybaits整体架构4.快速入门（quick start）4.1.引入依赖（pom.xml）4.2.全局配置文件（mybatis-config.xml）4.3.配置Map.xml（MyMapper.xml）4.4.修改全局配置文件（mybatis-config.xml）4.5.构建sqlSessionFactory（MybatisTest.java）4.6.打开sqlSession会话，并执行sql（MybatisTest.java）4.7.目录结构 5.分析5.1.引入日志依赖包（pom.xml）5.2.添加log4j.properties5.3.MyBatis使用步骤总结 6.完整的CRUD操作6.1.创建UserDao接口6.2.创建UserDaoImpl6.3.编写UserDao对应的UserDaoMapper.xml6.4.添加UserDao的测试用例6.5.编写UserDao的测试用例6.6.目录结构6.7.解决数据库字段名和实体类属性名不一致的问题 7. 动态代理Mapper实现类7.1.思考上述CRUD中的问题7.2.使用动态代理改造CRUD7.3.完整的例子7.4.动态代理总结 8.mybatis-config.xml详解8.1.properties属性读取外部资源8.2.settings设置8.3.typeAliases8.4.typeHandlers（类型处理器）8.5.plugins（插件）拦截器8.6.environments(环境)8.7.mappers 9.Mapper XML文件详解9.1.CRUD标签9.1.1.select9.1.2.insert9.1.3.update9.1.4.delete 9.2.#{}和${}9.3.面试题（#、$区别）9.4.resultMap9.5.sql片段 10.动态sql10.1.if10.2.choose when otherwise10.3.where 和set10.4.foreach 11.缓存11.1.一级缓存11.2.二级缓存 12.高级查询12.1.表关系说明12.2.一对一查询12.3.一对多查询12.4.多对多查询12.5.resultMap的继承12.6.高级查询的整理 13.延迟加载14.如果sql语句中出现’&lt;’的解决方案1、使用xml中的字符实体2、使用```&lt;![CDATA[ &lt; ]]&gt;``` 15.Spring 集成Mybatis15.1引入spring和Mybatis相关依赖15.2配置spring配置文件15.3 测试 16.SpringBoot 集成Mybatis17.Mybatis Generator的使用18.MyBatis整合分页插件 pageHelper 1.从JDBC谈起 1.1.使用IDEA创建maven工程 1.2.引入mysql依赖包 &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.32&lt;/version&gt; &lt;/dependency&gt; 12345 1.3.准备数据 创建数据库：
CREATE DATABASE ssmdemo;
创建表：
DROP TABLE IF EXISTS tb_user;
CREATE TABLE tb_user (
id char(32) NOT NULL,
user_name varchar(32) DEFAULT NULL,
password varchar(32) DEFAULT NULL,
name varchar(32) DEFAULT NULL," />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/69bac662a50c51e7e670041e1273affa/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-03-13T14:58:36+08:00" />
<meta property="article:modified_time" content="2019-03-13T14:58:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MyBatis教程</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <div class="article-copyright"> 
</div> 
<p>转自 <a href="https://b" rel="nofollow">https://b</a>：<a href="http://log.csdn.net/zpcandzhj/article/details/80878563" rel="nofollow">log.csdn.net/zpcandzhj/article/details/80878563</a> </p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#1JDBC_10" rel="nofollow noopener noreferrer" target="_self">1.从JDBC谈起</a></li><li><ul><li><a href="#11IDEAmaven_11" rel="nofollow noopener noreferrer" target="_self">1.1.使用IDEA创建maven工程</a></li><li><a href="#12mysql_17" rel="nofollow noopener noreferrer" target="_self">1.2.引入mysql依赖包</a></li><li><a href="#13_26" rel="nofollow noopener noreferrer" target="_self">1.3.准备数据</a></li><li><a href="#14JDBC_48" rel="nofollow noopener noreferrer" target="_self">1.4.JDBC基础代码回顾</a></li><li><a href="#15JDBC_103" rel="nofollow noopener noreferrer" target="_self">1.5.JDBC缺点分析</a></li></ul> 
    </li><li><a href="#2MyBatis_105" rel="nofollow noopener noreferrer" target="_self">2.MyBatis介绍</a></li><li><a href="#3Mybaits_109" rel="nofollow noopener noreferrer" target="_self">3.Mybaits整体架构</a></li><li><a href="#4quick_start_113" rel="nofollow noopener noreferrer" target="_self">4.快速入门（quick start）</a></li><li><ul><li><a href="#41pomxml_114" rel="nofollow noopener noreferrer" target="_self">4.1.引入依赖（pom.xml）</a></li><li><a href="#42mybatisconfigxml_124" rel="nofollow noopener noreferrer" target="_self">4.2.全局配置文件（mybatis-config.xml）</a></li><li><a href="#43MapxmlMyMapperxml_168" rel="nofollow noopener noreferrer" target="_self">4.3.配置Map.xml（MyMapper.xml）</a></li><li><a href="#44mybatisconfigxml_184" rel="nofollow noopener noreferrer" target="_self">4.4.修改全局配置文件（mybatis-config.xml）</a></li><li><a href="#45sqlSessionFactoryMybatisTestjava_214" rel="nofollow noopener noreferrer" target="_self">4.5.构建sqlSessionFactory（MybatisTest.java）</a></li><li><a href="#46sqlSessionsqlMybatisTestjava_223" rel="nofollow noopener noreferrer" target="_self">4.6.打开sqlSession会话，并执行sql（MybatisTest.java）</a></li><li><a href="#47_374" rel="nofollow noopener noreferrer" target="_self">4.7.目录结构</a></li></ul> 
    </li><li><a href="#5_376" rel="nofollow noopener noreferrer" target="_self">5.分析</a></li><li><ul><li><a href="#51pomxml_377" rel="nofollow noopener noreferrer" target="_self">5.1.引入日志依赖包（pom.xml）</a></li><li><a href="#52log4jproperties_387" rel="nofollow noopener noreferrer" target="_self">5.2.添加log4j.properties</a></li><li><a href="#53MyBatis_409" rel="nofollow noopener noreferrer" target="_self">5.3.MyBatis使用步骤总结</a></li></ul> 
    </li><li><a href="#6CRUD_417" rel="nofollow noopener noreferrer" target="_self">6.完整的CRUD操作</a></li><li><ul><li><a href="#61UserDao_418" rel="nofollow noopener noreferrer" target="_self">6.1.创建UserDao接口</a></li><li><a href="#62UserDaoImpl_463" rel="nofollow noopener noreferrer" target="_self">6.2.创建UserDaoImpl</a></li><li><a href="#63UserDaoUserDaoMapperxml_504" rel="nofollow noopener noreferrer" target="_self">6.3.编写UserDao对应的UserDaoMapper.xml</a></li><li><a href="#64UserDao_595" rel="nofollow noopener noreferrer" target="_self">6.4.添加UserDao的测试用例</a></li><li><a href="#65UserDao_610" rel="nofollow noopener noreferrer" target="_self">6.5.编写UserDao的测试用例</a></li><li><a href="#66_692" rel="nofollow noopener noreferrer" target="_self">6.6.目录结构</a></li><li><a href="#67_694" rel="nofollow noopener noreferrer" target="_self">6.7.解决数据库字段名和实体类属性名不一致的问题</a></li></ul> 
    </li><li><a href="#7_Mapper_722" rel="nofollow noopener noreferrer" target="_self">7. 动态代理Mapper实现类</a></li><li><ul><li><a href="#71CRUD_723" rel="nofollow noopener noreferrer" target="_self">7.1.思考上述CRUD中的问题</a></li><li><a href="#72CRUD_732" rel="nofollow noopener noreferrer" target="_self">7.2.使用动态代理改造CRUD</a></li><li><a href="#73_754" rel="nofollow noopener noreferrer" target="_self">7.3.完整的例子</a></li><li><a href="#74_1010" rel="nofollow noopener noreferrer" target="_self">7.4.动态代理总结</a></li></ul> 
    </li><li><a href="#8mybatisconfigxml_1013" rel="nofollow noopener noreferrer" target="_self">8.mybatis-config.xml详解</a></li><li><ul><li><a href="#81properties_1017" rel="nofollow noopener noreferrer" target="_self">8.1.properties属性读取外部资源</a></li><li><a href="#82settings_1049" rel="nofollow noopener noreferrer" target="_self">8.2.settings设置</a></li><li><a href="#83typeAliases_1075" rel="nofollow noopener noreferrer" target="_self">8.3.typeAliases</a></li><li><a href="#84typeHandlers_1093" rel="nofollow noopener noreferrer" target="_self">8.4.typeHandlers（类型处理器）</a></li><li><a href="#85plugins_1096" rel="nofollow noopener noreferrer" target="_self">8.5.plugins（插件）拦截器</a></li><li><a href="#86environments_1135" rel="nofollow noopener noreferrer" target="_self">8.6.environments(环境)</a></li><li><a href="#87mappers_1139" rel="nofollow noopener noreferrer" target="_self">8.7.mappers</a></li></ul> 
    </li><li><a href="#9Mapper_XML_1182" rel="nofollow noopener noreferrer" target="_self">9.Mapper XML文件详解</a></li><li><ul><li><a href="#91CRUD_1184" rel="nofollow noopener noreferrer" target="_self">9.1.CRUD标签</a></li><li><ul><li><a href="#911select_1185" rel="nofollow noopener noreferrer" target="_self">9.1.1.select</a></li><li><a href="#912insert_1191" rel="nofollow noopener noreferrer" target="_self">9.1.2.insert</a></li><li><a href="#913update_1199" rel="nofollow noopener noreferrer" target="_self">9.1.3.update</a></li><li><a href="#914delete_1203" rel="nofollow noopener noreferrer" target="_self">9.1.4.delete</a></li></ul> 
     </li><li><a href="#92_1208" rel="nofollow noopener noreferrer" target="_self">9.2.#{}和${}</a></li><li><a href="#93_1312" rel="nofollow noopener noreferrer" target="_self">9.3.面试题（#、$区别）</a></li><li><a href="#94resultMap_1336" rel="nofollow noopener noreferrer" target="_self">9.4.resultMap</a></li><li><a href="#95sql_1341" rel="nofollow noopener noreferrer" target="_self">9.5.sql片段</a></li></ul> 
    </li><li><a href="#10sql_1410" rel="nofollow noopener noreferrer" target="_self">10.动态sql</a></li><li><ul><li><a href="#101if_1413" rel="nofollow noopener noreferrer" target="_self">10.1.if</a></li><li><a href="#102choose_when_otherwise_1444" rel="nofollow noopener noreferrer" target="_self">10.2.choose when otherwise</a></li><li><a href="#103where_set_1488" rel="nofollow noopener noreferrer" target="_self">10.3.where 和set</a></li><li><a href="#104foreach_1568" rel="nofollow noopener noreferrer" target="_self">10.4.foreach</a></li></ul> 
    </li><li><a href="#11_1605" rel="nofollow noopener noreferrer" target="_self">11.缓存</a></li><li><ul><li><a href="#111_1606" rel="nofollow noopener noreferrer" target="_self">11.1.一级缓存</a></li><li><a href="#112_1687" rel="nofollow noopener noreferrer" target="_self">11.2.二级缓存</a></li></ul> 
    </li><li><a href="#12_1741" rel="nofollow noopener noreferrer" target="_self">12.高级查询</a></li><li><ul><li><a href="#121_1742" rel="nofollow noopener noreferrer" target="_self">12.1.表关系说明</a></li><li><a href="#122_1767" rel="nofollow noopener noreferrer" target="_self">12.2.一对一查询</a></li><li><a href="#123_1851" rel="nofollow noopener noreferrer" target="_self">12.3.一对多查询</a></li><li><a href="#124_1916" rel="nofollow noopener noreferrer" target="_self">12.4.多对多查询</a></li><li><a href="#125resultMap_2012" rel="nofollow noopener noreferrer" target="_self">12.5.resultMap的继承</a></li><li><a href="#126_2014" rel="nofollow noopener noreferrer" target="_self">12.6.高级查询的整理</a></li></ul> 
    </li><li><a href="#13_2028" rel="nofollow noopener noreferrer" target="_self">13.延迟加载</a></li><li><a href="#14sql_2057" rel="nofollow noopener noreferrer" target="_self">14.如果sql语句中出现’&lt;’的解决方案</a></li><li><ul><li><a href="#1xml_2058" rel="nofollow noopener noreferrer" target="_self">1、使用xml中的字符实体</a></li><li><a href="#2CDATA___2074" rel="nofollow noopener noreferrer" target="_self">2、使用```&lt;![CDATA[ &lt; ]]&gt;```</a></li></ul> 
    </li><li><a href="#15Spring_Mybatis_2094" rel="nofollow noopener noreferrer" target="_self">15.Spring 集成Mybatis</a></li><li><ul><li><a href="#151springMybatis_2095" rel="nofollow noopener noreferrer" target="_self">15.1引入spring和Mybatis相关依赖</a></li><li><a href="#152spring_2130" rel="nofollow noopener noreferrer" target="_self">15.2配置spring配置文件</a></li><li><a href="#153__2229" rel="nofollow noopener noreferrer" target="_self">15.3 测试</a></li></ul> 
    </li><li><a href="#16SpringBoot_Mybatis_2353" rel="nofollow noopener noreferrer" target="_self">16.SpringBoot 集成Mybatis</a></li><li><a href="#17Mybatis_Generator_2356" rel="nofollow noopener noreferrer" target="_self">17.Mybatis Generator的使用</a></li><li><a href="#18MyBatis_pageHelper_2503" rel="nofollow noopener noreferrer" target="_self">18.MyBatis整合分页插件 pageHelper</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="1JDBC_10" target="_blank"></a>1.从JDBC谈起</h4> 
<h5><a id="11IDEAmaven_11" target="_blank"></a>1.1.使用IDEA创建maven工程</h5> 
<p><img src="https://images2.imgbox.com/37/d8/4b9Qjtzi_o.png" alt="这里写图片描述"><br> <img src="https://images2.imgbox.com/ff/18/COcyB5Z8_o.png" alt="这里写图片描述"><br> <img src="https://images2.imgbox.com/88/dd/utmWqB3q_o.png" alt="这里写图片描述"></p> 
<h5><a id="12mysql_17" target="_blank"></a>1.2.引入mysql依赖包</h5> 
<pre class="prettyprint"><code class="prism language-java has-numbering"><span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>mysql<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mysql<span class="token operator">-</span>connector<span class="token operator">-</span>java<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">5.1</span><span class="token number">.32</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code>
 
 <div class="hljs-button"></div>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
<p><img src="https://images2.imgbox.com/52/ae/Acess8Qq_o.png" alt="这里写图片描述"></p> 
<h5><a id="13_26" target="_blank"></a>1.3.准备数据</h5> 
<ul><li> <p>创建数据库：<br> CREATE DATABASE ssmdemo;</p> </li><li> <p>创建表：<br> DROP TABLE IF EXISTS <code>tb_user</code>;<br> CREATE TABLE <code>tb_user</code> (<br> <code>id</code> char(32) NOT NULL,<br> <code>user_name</code> varchar(32) DEFAULT NULL,<br> <code>password</code> varchar(32) DEFAULT NULL,<br> <code>name</code> varchar(32) DEFAULT NULL,<br> <code>age</code> int(10) DEFAULT NULL,<br> <code>sex</code> int(2) DEFAULT NULL,<br> <code>birthday</code> date DEFAULT NULL,<br> <code>created</code> datetime DEFAULT NULL,<br> <code>updated</code> datetime DEFAULT NULL,<br> PRIMARY KEY (<code>id</code>)<br> ) ENGINE=InnoDB DEFAULT CHARSET=utf8;</p> </li><li> <p>插入数据：<br> INSERT INTO <code>ssmdemo</code>.<code>tb_user</code> ( <code>userName</code>, <code>password</code>, <code>name</code>, <code>age</code>, <code>sex</code>, <code>birthday</code>, <code>created</code>, <code>updated</code>) VALUES ( ‘zpc’, ‘123456’, ‘鹏程’, ‘22’, ‘1’, ‘1990-09-02’, sysdate(), sysdate());<br> INSERT INTO <code>ssmdemo</code>.<code>tb_user</code> ( <code>userName</code>, <code>password</code>, <code>name</code>, <code>age</code>, <code>sex</code>, <code>birthday</code>, <code>created</code>, <code>updated</code>) VALUES ( ‘hj’, ‘123456’, ‘静静’, ‘22’, ‘1’, ‘1993-09-05’, sysdate(), sysdate());</p> </li></ul> 
<h5><a id="14JDBC_48" target="_blank"></a>1.4.JDBC基础代码回顾</h5> 
<ul><li>JDBCTest.java</li></ul> 
<pre class="prettyprint"><code class="prism language-java has-numbering"><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Connection<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>DriverManager<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>PreparedStatement<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>ResultSet<span class="token punctuation">;</span>
</code></pre> 
<p><span class="token comment">/**</span></p> 
<ul><li> <p>@author Evan<br> */<br> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCTest</span> <span class="token punctuation">{<!-- --></span><br> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span><br> Connection connection <span class="token operator">=</span> null<span class="token punctuation">;</span><br> PreparedStatement prepareStatement <span class="token operator">=</span> null<span class="token punctuation">;</span><br> ResultSet rs <span class="token operator">=</span> null<span class="token punctuation">;</span></p> <pre><code> &lt;span class="token keyword"&gt;try&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
     &lt;span class="token comment"&gt;// 加载驱动&lt;/span&gt;
     Class&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;forName&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token string"&gt;"com.mysql.jdbc.Driver"&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
     &lt;span class="token comment"&gt;// 获取连接&lt;/span&gt;
     String url &lt;span class="token operator"&gt;=&lt;/span&gt; &lt;span class="token string"&gt;"jdbc:mysql://127.0.0.1:3306/ssmdemo"&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
     String user &lt;span class="token operator"&gt;=&lt;/span&gt; &lt;span class="token string"&gt;"root"&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
     String password &lt;span class="token operator"&gt;=&lt;/span&gt; &lt;span class="token string"&gt;"123456"&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
     connection &lt;span class="token operator"&gt;=&lt;/span&gt; DriverManager&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;getConnection&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;url&lt;span class="token punctuation"&gt;,&lt;/span&gt; user&lt;span class="token punctuation"&gt;,&lt;/span&gt; password&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
     &lt;span class="token comment"&gt;// 获取statement，preparedStatement&lt;/span&gt;
     String sql &lt;span class="token operator"&gt;=&lt;/span&gt; &lt;span class="token string"&gt;"select * from tb_user where id=?"&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
     prepareStatement &lt;span class="token operator"&gt;=&lt;/span&gt; connection&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;prepareStatement&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;sql&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
     &lt;span class="token comment"&gt;// 设置参数&lt;/span&gt;
     prepareStatement&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;setLong&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token number"&gt;1&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt; &lt;span class="token number"&gt;1&lt;/span&gt;l&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
     &lt;span class="token comment"&gt;// 执行查询&lt;/span&gt;
     rs &lt;span class="token operator"&gt;=&lt;/span&gt; prepareStatement&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;executeQuery&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
     &lt;span class="token comment"&gt;// 处理结果集&lt;/span&gt;
     &lt;span class="token keyword"&gt;while&lt;/span&gt; &lt;span class="token punctuation"&gt;(&lt;/span&gt;rs&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;next&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
         System&lt;span class="token punctuation"&gt;.&lt;/span&gt;out&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;println&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;rs&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;getString&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token string"&gt;"userName"&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
         System&lt;span class="token punctuation"&gt;.&lt;/span&gt;out&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;println&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;rs&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;getString&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token string"&gt;"name"&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
         System&lt;span class="token punctuation"&gt;.&lt;/span&gt;out&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;println&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;rs&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;getInt&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token string"&gt;"age"&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
         System&lt;span class="token punctuation"&gt;.&lt;/span&gt;out&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;println&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;rs&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;getDate&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token string"&gt;"birthday"&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
     &lt;span class="token punctuation"&gt;}&lt;/span&gt;
 &lt;span class="token punctuation"&gt;}&lt;/span&gt; &lt;span class="token keyword"&gt;finally&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
     &lt;span class="token comment"&gt;// 关闭连接，释放资源&lt;/span&gt;
     &lt;span class="token keyword"&gt;if&lt;/span&gt; &lt;span class="token punctuation"&gt;(&lt;/span&gt;rs &lt;span class="token operator"&gt;!=&lt;/span&gt; null&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
         rs&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;close&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
     &lt;span class="token punctuation"&gt;}&lt;/span&gt;
     &lt;span class="token keyword"&gt;if&lt;/span&gt; &lt;span class="token punctuation"&gt;(&lt;/span&gt;prepareStatement &lt;span class="token operator"&gt;!=&lt;/span&gt; null&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
         prepareStatement&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;close&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
     &lt;span class="token punctuation"&gt;}&lt;/span&gt;
     &lt;span class="token keyword"&gt;if&lt;/span&gt; &lt;span class="token punctuation"&gt;(&lt;/span&gt;connection &lt;span class="token operator"&gt;!=&lt;/span&gt; null&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
         connection&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;close&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
     &lt;span class="token punctuation"&gt;}&lt;/span&gt;
 &lt;span class="token punctuation"&gt;}&lt;/span&gt;
</code></pre> <p><span class="token punctuation">}</span><br> <span class="token punctuation">}</span></p> </li></ul> 
<div class="hljs-button"></div> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li><li>41</li><li>42</li><li>43</li><li>44</li><li>45</li><li>46</li><li>47</li><li>48</li><li>49</li><li>50</li></ul> 
<h5><a id="15JDBC_103" target="_blank"></a>1.5.JDBC缺点分析</h5> 
<p><img src="https://images2.imgbox.com/c4/7e/wGrLUIHe_o.png" alt="这里写图片描述"></p> 
<h4><a id="2MyBatis_105" target="_blank"></a>2.MyBatis介绍</h4> 
<p><img src="https://images2.imgbox.com/61/3b/su0XzUus_o.png" alt="这里写图片描述"><br> 官方文档 <a href="http://www.mybatis.org/mybatis-3/getting-started.html" rel="nofollow noopener noreferrer" target="_blank">http://www.mybatis.org/mybatis-3/getting-started.html</a></p> 
<h4><a id="3Mybaits_109" target="_blank"></a>3.Mybaits整体架构</h4> 
<p><img src="https://images2.imgbox.com/35/58/OsRC7OJE_o.png" alt="这里写图片描述"><br> <img src="https://images2.imgbox.com/58/4a/eF0OZ1Xw_o.png" alt="这里写图片描述"></p> 
<h4><a id="4quick_start_113" target="_blank"></a>4.快速入门（quick start）</h4> 
<h5><a id="41pomxml_114" target="_blank"></a>4.1.引入依赖（pom.xml）</h5> 
<pre class="prettyprint"><code class="prism language-java has-numbering"><span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>mybatis<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mybatis<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">3.2</span><span class="token number">.8</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code>
 
 <div class="hljs-button"></div>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
<h5><a id="42mybatisconfigxml_124" target="_blank"></a>4.2.全局配置文件（mybatis-config.xml）</h5> 
<pre class="prettyprint"><code class="prism language-xml has-numbering"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="token doctype">&lt;!DOCTYPE configuration
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span>
<span class="token comment">&lt;!-- 根标签 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.mysql.jdbc.Driver<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jdbc:mysql://127.0.0.1:3306/mybatis-110?useUnicode=true&amp;characterEncoding=utf-8&amp;allowMultiQueries=true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>123456<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><span class="token comment">&lt;!-- 环境，可以配置多个，default：指定采用哪个环境 --&gt;</span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>test<span class="token punctuation">”</span></span><span class="token punctuation">&gt;</span></span><br> <span class="token comment">&lt;!-- id：唯一标识 --&gt;</span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>test<span class="token punctuation">”</span></span><span class="token punctuation">&gt;</span></span><br> <span class="token comment">&lt;!-- 事务管理器，JDBC类型的事务管理器 --&gt;</span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>JDBC<span class="token punctuation">”</span></span> <span class="token punctuation">/&gt;</span></span><br> <span class="token comment">&lt;!-- 数据源，池类型的数据源 --&gt;</span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>POOLED<span class="token punctuation">”</span></span><span class="token punctuation">&gt;</span></span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>driver<span class="token punctuation">”</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>com.mysql.jdbc.Driver<span class="token punctuation">”</span></span> <span class="token punctuation">/&gt;</span></span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>url<span class="token punctuation">”</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>jdbc:mysql://127.0.0.1:3306/mybatis-110<span class="token punctuation">”</span></span> <span class="token punctuation">/&gt;</span></span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>username<span class="token punctuation">”</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>root<span class="token punctuation">”</span></span> <span class="token punctuation">/&gt;</span></span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>password<span class="token punctuation">”</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>123456<span class="token punctuation">”</span></span> <span class="token punctuation">/&gt;</span></span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>development<span class="token punctuation">”</span></span><span class="token punctuation">&gt;</span></span><br> <span class="token comment">&lt;!-- 事务管理器，JDBC类型的事务管理器 --&gt;</span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>JDBC<span class="token punctuation">”</span></span> <span class="token punctuation">/&gt;</span></span><br> <span class="token comment">&lt;!-- 数据源，池类型的数据源 --&gt;</span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>POOLED<span class="token punctuation">”</span></span><span class="token punctuation">&gt;</span></span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>driver<span class="token punctuation">”</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="katex--inline">KaTeX parse error: Expected 'EOF', got '&amp;' at position 90: … punctuation"&gt;/&amp;̲gt;&lt;/span&gt;&lt;/spa…</span>{url}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">“</span>username<span class="token punctuation">”</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="katex--inline">KaTeX parse error: Expected 'EOF', got '&amp;' at position 92: … punctuation"&gt;/&amp;̲gt;&lt;/span&gt;&lt;/spa…</span>{password}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span><br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span></p> 
<div class="hljs-button"></div> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li></ul> 
<h5><a id="43MapxmlMyMapperxml_168" target="_blank"></a>4.3.配置Map.xml（MyMapper.xml）</h5> 
<pre class="prettyprint"><code class="prism language-java has-numbering"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE mapper
  PUBLIC <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>
  <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> mapper<span class="token operator">:</span>根标签，namespace：命名空间，随便写，一般保证命名空间唯一 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>mapper namespace<span class="token operator">=</span><span class="token string">"MyMapper"</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> statement，内容：sql语句。id：唯一标识，随便写，在同一个命名空间下保持唯一
      resultType：sql语句查询结果集的封装类型<span class="token punctuation">,</span>tb_user即为数据库中的表
    <span class="token operator">--</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">"selectUser"</span> resultType<span class="token operator">=</span><span class="token string">"com.zpc.mybatis.User"</span><span class="token operator">&gt;</span>
      select <span class="token operator">*</span> from tb_user where id <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>id<span class="token punctuation">}</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>mapper<span class="token operator">&gt;</span>
</code>
 
 <div class="hljs-button"></div>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li></ul> 
<h5><a id="44mybatisconfigxml_184" target="_blank"></a>4.4.修改全局配置文件（mybatis-config.xml）</h5> 
<p>配上MyMapper.xml</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE configuration
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;
&lt;!-- 根标签 --&gt;
&lt;configuration&gt;
   &lt;!-- 环境，可以配置多个，default：指定采用哪个环境 --&gt;
   &lt;environments default="test"&gt;
      &lt;!-- id：唯一标识 --&gt;
      &lt;environment id="test"&gt;
         &lt;!-- 事务管理器，JDBC类型的事务管理器 --&gt;
         &lt;transactionManager type="JDBC" /&gt;
         &lt;!-- 数据源，池类型的数据源 --&gt;
         &lt;dataSource type="POOLED"&gt;
            &lt;property name="driver" value="com.mysql.jdbc.Driver" /&gt;
            &lt;property name="url" value="jdbc:mysql://127.0.0.1:3306/ssmdemo" /&gt;
            &lt;property name="username" value="root" /&gt;
            &lt;property name="password" value="123456" /&gt;
         &lt;/dataSource&gt;
      &lt;/environment&gt;
   &lt;/environments&gt;
   &lt;mappers&gt;
     &lt;mapper resource="mappers/MyMapper.xml" /&gt;
   &lt;/mappers&gt;
&lt;/configuration&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li></ul> 
<h5><a id="45sqlSessionFactoryMybatisTestjava_214" target="_blank"></a>4.5.构建sqlSessionFactory（MybatisTest.java）</h5> 
<pre class="prettyprint"><code class="prism language-java has-numbering">		<span class="token comment">// 指定全局配置文件</span>
        String resource <span class="token operator">=</span> <span class="token string">"mybatis-config.xml"</span><span class="token punctuation">;</span>
        <span class="token comment">// 读取配置文件</span>
        InputStream inputStream <span class="token operator">=</span> Resources<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 构建sqlSessionFactory</span>
        SqlSessionFactory sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code>
 
 <div class="hljs-button"></div>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<h5><a id="46sqlSessionsqlMybatisTestjava_223" target="_blank"></a>4.6.打开sqlSession会话，并执行sql（MybatisTest.java）</h5> 
<pre class="prettyprint"><code class="prism language-java has-numbering">	    <span class="token comment">// 获取sqlSession</span>
        SqlSession sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 操作CRUD，第一个参数：指定statement，规则：命名空间+“.”+statementId</span>
        <span class="token comment">// 第二个参数：指定传入sql的参数：这里是用户id</span>
        User user <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token string">"MyMapper.selectUser"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code>
 
 <div class="hljs-button"></div>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<ul><li>完整代码：<br> MybatisTest.java</li></ul> 
<pre class="prettyprint"><code class="prism language-java has-numbering">mport com<span class="token punctuation">.</span>zpc<span class="token punctuation">.</span>test<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span>User<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>io<span class="token punctuation">.</span>Resources<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>SqlSession<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>SqlSessionFactory<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>SqlSessionFactoryBuilder<span class="token punctuation">;</span>
</code></pre> 
<p><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>InputStream<span class="token punctuation">;</span></p> 
<p><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisTest</span> <span class="token punctuation">{<!-- --></span><br> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span><br> <span class="token comment">// 指定全局配置文件</span><br> String resource <span class="token operator">=</span> <span class="token string">“mybatis-config.xml”</span><span class="token punctuation">;</span><br> <span class="token comment">// 读取配置文件</span><br> InputStream inputStream <span class="token operator">=</span> Resources<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span><br> <span class="token comment">// 构建sqlSessionFactory</span><br> SqlSessionFactory sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span><br> <span class="token comment">// 获取sqlSession</span><br> SqlSession sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br> <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span><br> <span class="token comment">// 操作CRUD，第一个参数：指定statement，规则：命名空间+“.”+statementId</span><br> <span class="token comment">// 第二个参数：指定传入sql的参数：这里是用户id</span><br> User user <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token string">“MyMapper.selectUser”</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span><br> <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span><br> sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br> <span class="token punctuation">}</span><br> <span class="token punctuation">}</span><br> <span class="token punctuation">}</span></p> 
<div class="hljs-button"></div> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li></ul> 
<p>User.java</p> 
<pre class="prettyprint"><code class="prism language-java has-numbering"><span class="token keyword">import</span> java<span class="token punctuation">.</span>text<span class="token punctuation">.</span>SimpleDateFormat<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Date<span class="token punctuation">;</span>
</code></pre> 
<p><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span><br> <span class="token keyword">private</span> String id<span class="token punctuation">;</span><br> <span class="token keyword">private</span> String userName<span class="token punctuation">;</span><br> <span class="token keyword">private</span> String password<span class="token punctuation">;</span><br> <span class="token keyword">private</span> String name<span class="token punctuation">;</span><br> <span class="token keyword">private</span> Integer age<span class="token punctuation">;</span><br> <span class="token keyword">private</span> Integer sex<span class="token punctuation">;</span><br> <span class="token keyword">private</span> Date birthday<span class="token punctuation">;</span><br> <span class="token keyword">private</span> String created<span class="token punctuation">;</span><br> <span class="token keyword">private</span> String updated<span class="token punctuation">;</span></p> 
<pre><code>&lt;span class="token keyword"&gt;public&lt;/span&gt; String &lt;span class="token function"&gt;getId&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;return&lt;/span&gt; id&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;setId&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;String id&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;id &lt;span class="token operator"&gt;=&lt;/span&gt; id&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; String &lt;span class="token function"&gt;getUserName&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;return&lt;/span&gt; userName&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;setUserName&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;String userName&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;userName &lt;span class="token operator"&gt;=&lt;/span&gt; userName&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; String &lt;span class="token function"&gt;getPassword&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;return&lt;/span&gt; password&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;setPassword&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;String password&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;password &lt;span class="token operator"&gt;=&lt;/span&gt; password&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; String &lt;span class="token function"&gt;getName&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;return&lt;/span&gt; name&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;setName&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;String name&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;name &lt;span class="token operator"&gt;=&lt;/span&gt; name&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; Integer &lt;span class="token function"&gt;getAge&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;return&lt;/span&gt; age&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;setAge&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;Integer age&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;age &lt;span class="token operator"&gt;=&lt;/span&gt; age&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; Integer &lt;span class="token function"&gt;getSex&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;return&lt;/span&gt; sex&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;setSex&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;Integer sex&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;sex &lt;span class="token operator"&gt;=&lt;/span&gt; sex&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; Date &lt;span class="token function"&gt;getBirthday&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;return&lt;/span&gt; birthday&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;setBirthday&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;Date birthday&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;birthday &lt;span class="token operator"&gt;=&lt;/span&gt; birthday&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; String &lt;span class="token function"&gt;getCreated&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;return&lt;/span&gt; created&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;setCreated&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;String created&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;created &lt;span class="token operator"&gt;=&lt;/span&gt; created&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; String &lt;span class="token function"&gt;getUpdated&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;return&lt;/span&gt; updated&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;setUpdated&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;String updated&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;updated &lt;span class="token operator"&gt;=&lt;/span&gt; updated&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token annotation punctuation"&gt;@Override&lt;/span&gt;
&lt;span class="token keyword"&gt;public&lt;/span&gt; String &lt;span class="token function"&gt;toString&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;return&lt;/span&gt; &lt;span class="token string"&gt;"User{"&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt;
            &lt;span class="token string"&gt;"id='"&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt; id &lt;span class="token operator"&gt;+&lt;/span&gt; &lt;span class="token string"&gt;'\''&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt;
            &lt;span class="token string"&gt;", userName='"&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt; userName &lt;span class="token operator"&gt;+&lt;/span&gt; &lt;span class="token string"&gt;'\''&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt;
            &lt;span class="token string"&gt;", password='"&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt; password &lt;span class="token operator"&gt;+&lt;/span&gt; &lt;span class="token string"&gt;'\''&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt;
            &lt;span class="token string"&gt;", name='"&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt; name &lt;span class="token operator"&gt;+&lt;/span&gt; &lt;span class="token string"&gt;'\''&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt;
            &lt;span class="token string"&gt;", age="&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt; age &lt;span class="token operator"&gt;+&lt;/span&gt;
            &lt;span class="token string"&gt;", sex="&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt; sex &lt;span class="token operator"&gt;+&lt;/span&gt;
            &lt;span class="token string"&gt;", birthday='"&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt; &lt;span class="token keyword"&gt;new&lt;/span&gt; &lt;span class="token class-name"&gt;SimpleDateFormat&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token string"&gt;"yyyy-MM-dd"&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;format&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;birthday&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt; &lt;span class="token string"&gt;'\''&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt;
            &lt;span class="token string"&gt;", created='"&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt; created &lt;span class="token operator"&gt;+&lt;/span&gt; &lt;span class="token string"&gt;'\''&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt;
            &lt;span class="token string"&gt;", updated='"&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt; updated &lt;span class="token operator"&gt;+&lt;/span&gt; &lt;span class="token string"&gt;'\''&lt;/span&gt; &lt;span class="token operator"&gt;+&lt;/span&gt;
            &lt;span class="token string"&gt;'}'&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;
</code></pre> 
<p><span class="token punctuation">}</span></p> 
<div class="hljs-button"></div> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li><li>41</li><li>42</li><li>43</li><li>44</li><li>45</li><li>46</li><li>47</li><li>48</li><li>49</li><li>50</li><li>51</li><li>52</li><li>53</li><li>54</li><li>55</li><li>56</li><li>57</li><li>58</li><li>59</li><li>60</li><li>61</li><li>62</li><li>63</li><li>64</li><li>65</li><li>66</li><li>67</li><li>68</li><li>69</li><li>70</li><li>71</li><li>72</li><li>73</li><li>74</li><li>75</li><li>76</li><li>77</li><li>78</li><li>79</li><li>80</li><li>81</li><li>82</li><li>83</li><li>84</li><li>85</li><li>86</li><li>87</li><li>88</li><li>89</li><li>90</li><li>91</li><li>92</li><li>93</li><li>94</li><li>95</li><li>96</li><li>97</li><li>98</li><li>99</li><li>100</li><li>101</li></ul> 
<h5><a id="47_374" target="_blank"></a>4.7.目录结构</h5> 
<p><img src="https://images2.imgbox.com/27/1b/noXwSxqT_o.png" alt="这里写图片描述"></p> 
<h4><a id="5_376" target="_blank"></a>5.分析</h4> 
<h5><a id="51pomxml_377" target="_blank"></a>5.1.引入日志依赖包（pom.xml）</h5> 
<p>会自动引入log4j以及slf4j-api</p> 
<pre class="prettyprint"><code class="prism language-java has-numbering"><span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>slf4j<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>slf4j<span class="token operator">-</span>log4j12<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.7</span><span class="token number">.5</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code>
 
 <div class="hljs-button"></div>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
<h5><a id="52log4jproperties_387" target="_blank"></a>5.2.添加log4j.properties</h5> 
<pre class="prettyprint"><code class="prism language-java has-numbering">log4j<span class="token punctuation">.</span>rootLogger<span class="token operator">=</span>DEBUG<span class="token punctuation">,</span>A1
log4j<span class="token punctuation">.</span>logger<span class="token punctuation">.</span>org<span class="token punctuation">.</span>apache<span class="token operator">=</span>DEBUG
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>A1<span class="token operator">=</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>ConsoleAppender
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>A1<span class="token punctuation">.</span>layout<span class="token operator">=</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>PatternLayout
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>A1<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>ConversionPattern<span class="token operator">=</span><span class="token operator">%</span><span class="token operator">-</span>d<span class="token punctuation">{<!-- --></span>yyyy<span class="token operator">-</span>MM<span class="token operator">-</span>dd HH<span class="token operator">:</span>mm<span class="token operator">:</span>ss<span class="token punctuation">,</span>SSS<span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token operator">%</span>t<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">%</span>c<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span><span class="token operator">%</span>p<span class="token punctuation">]</span> <span class="token operator">%</span>m<span class="token operator">%</span>n
</code>
 
 <div class="hljs-button"></div>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
<p>再次运行程序会打印日志：</p> 
<pre class="prettyprint"><code class="prism language-java has-numbering"><span class="token number">2018</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">30</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">554</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>JdbcTransaction<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Opening JDBC Connection
<span class="token number">2018</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">30</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">818</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>pooled<span class="token punctuation">.</span>PooledDataSource<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Created connection <span class="token number">2094411587.</span>
<span class="token number">2018</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">30</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">818</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>JdbcTransaction<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Setting autocommit to <span class="token boolean">false</span> on JDBC Connection <span class="token punctuation">[</span>com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>JDBC4Connection<span class="token annotation punctuation">@7cd62f43</span><span class="token punctuation">]</span>
<span class="token number">2018</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">30</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">863</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>MyMapper<span class="token punctuation">.</span>selectUser<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing<span class="token operator">:</span> select <span class="token operator">*</span> from tb_user where id <span class="token operator">=</span> <span class="token operator">?</span> 
<span class="token number">2018</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">30</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">931</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>MyMapper<span class="token punctuation">.</span>selectUser<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token operator">==</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token function">1</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
<span class="token number">2018</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">30</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">953</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>MyMapper<span class="token punctuation">.</span>selectUser<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total<span class="token operator">:</span> <span class="token number">1</span>
User<span class="token punctuation">{<!-- --></span>id<span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">,</span> userName<span class="token operator">=</span><span class="token string">'zpc'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'123456'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'鹏程'</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">,</span> sex<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> birthday<span class="token operator">=</span><span class="token string">'1990-09-02'</span><span class="token punctuation">,</span> created<span class="token operator">=</span><span class="token string">'2018-06-30 18:20:18.0'</span><span class="token punctuation">,</span> updated<span class="token operator">=</span><span class="token string">'2018-06-30 18:20:18.0'</span><span class="token punctuation">}</span>
<span class="token number">2018</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">30</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">954</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>JdbcTransaction<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Resetting autocommit to <span class="token boolean">true</span> on JDBC Connection <span class="token punctuation">[</span>com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>JDBC4Connection<span class="token annotation punctuation">@7cd62f43</span><span class="token punctuation">]</span>
<span class="token number">2018</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">30</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">954</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>JdbcTransaction<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Closing JDBC Connection <span class="token punctuation">[</span>com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>JDBC4Connection<span class="token annotation punctuation">@7cd62f43</span><span class="token punctuation">]</span>
<span class="token number">2018</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">30</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">955</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>pooled<span class="token punctuation">.</span>PooledDataSource<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Returned connection <span class="token number">2094411587</span> to pool<span class="token punctuation">.</span>
</code>
 
 <div class="hljs-button"></div>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li></ul> 
<h5><a id="53MyBatis_409" target="_blank"></a>5.3.MyBatis使用步骤总结</h5> 
<p>1)配置mybatis-config.xml 全局的配置文件 (1、数据源，2、外部的mapper)<br> 2)创建SqlSessionFactory<br> 3)通过SqlSessionFactory创建SqlSession对象<br> 4)通过SqlSession操作数据库 CRUD<br> 5)调用session.commit()提交事务<br> 6)调用session.close()关闭会话</p> 
<h4><a id="6CRUD_417" target="_blank"></a>6.完整的CRUD操作</h4> 
<h5><a id="61UserDao_418" target="_blank"></a>6.1.创建UserDao接口</h5> 
<pre class="prettyprint"><code class="prism language-java has-numbering"><span class="token keyword">import</span> com<span class="token punctuation">.</span>zpc<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span>User<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>
</code></pre> 
<p><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{<!-- --></span></p> 
<pre><code>&lt;span class="token comment"&gt;/**
 * 根据id查询用户信息
 *
 * @param id
 * @return
 */&lt;/span&gt;
&lt;span class="token keyword"&gt;public&lt;/span&gt; User &lt;span class="token function"&gt;queryUserById&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;String id&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;

&lt;span class="token comment"&gt;/**
 * 查询所有用户信息
 *
 * @return
 */&lt;/span&gt;
&lt;span class="token keyword"&gt;public&lt;/span&gt; List&lt;span class="token generics function"&gt;&lt;span class="token punctuation"&gt;&amp;lt;&lt;/span&gt;User&lt;span class="token punctuation"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class="token function"&gt;queryUserAll&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;

&lt;span class="token comment"&gt;/**
 * 新增用户
 *
 * @param user
 */&lt;/span&gt;
&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;insertUser&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;User user&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;

&lt;span class="token comment"&gt;/**
 * 更新用户信息
 *
 * @param user
 */&lt;/span&gt;
&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;updateUser&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;User user&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;

&lt;span class="token comment"&gt;/**
 * 根据id删除用户信息
 *
 * @param id
 */&lt;/span&gt;
&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;deleteUser&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;String id&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
</code></pre> 
<p><span class="token punctuation">}</span></p> 
<div class="hljs-button"></div> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li><li>41</li></ul> 
<h5><a id="62UserDaoImpl_463" target="_blank"></a>6.2.创建UserDaoImpl</h5> 
<pre class="prettyprint"><code class="prism language-java has-numbering"><span class="token keyword">import</span> com<span class="token punctuation">.</span>zpc<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>UserDao<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>zpc<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span>User<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>SqlSession<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>
</code></pre> 
<p><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{<!-- --></span><br> <span class="token keyword">public</span> SqlSession sqlSession<span class="token punctuation">;</span></p> 
<pre><code>&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token function"&gt;UserDaoImpl&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;SqlSession sqlSession&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;sqlSession &lt;span class="token operator"&gt;=&lt;/span&gt; sqlSession&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token annotation punctuation"&gt;@Override&lt;/span&gt;
&lt;span class="token keyword"&gt;public&lt;/span&gt; User &lt;span class="token function"&gt;queryUserById&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;String id&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;return&lt;/span&gt; &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;sqlSession&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;selectOne&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token string"&gt;"UserDao.queryUserById"&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt; id&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token annotation punctuation"&gt;@Override&lt;/span&gt;
&lt;span class="token keyword"&gt;public&lt;/span&gt; List&lt;span class="token generics function"&gt;&lt;span class="token punctuation"&gt;&amp;lt;&lt;/span&gt;User&lt;span class="token punctuation"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class="token function"&gt;queryUserAll&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;return&lt;/span&gt; &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;sqlSession&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;selectList&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token string"&gt;"UserDao.queryUserAll"&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token annotation punctuation"&gt;@Override&lt;/span&gt;
&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;insertUser&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;User user&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;sqlSession&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;insert&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token string"&gt;"UserDao.insertUser"&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt; user&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token annotation punctuation"&gt;@Override&lt;/span&gt;
&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;updateUser&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;User user&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;sqlSession&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;update&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token string"&gt;"UserDao.updateUser"&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt; user&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;

&lt;span class="token annotation punctuation"&gt;@Override&lt;/span&gt;
&lt;span class="token keyword"&gt;public&lt;/span&gt; &lt;span class="token keyword"&gt;void&lt;/span&gt; &lt;span class="token function"&gt;deleteUser&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;String id&lt;span class="token punctuation"&gt;)&lt;/span&gt; &lt;span class="token punctuation"&gt;{&lt;/span&gt;
    &lt;span class="token keyword"&gt;this&lt;/span&gt;&lt;span class="token punctuation"&gt;.&lt;/span&gt;sqlSession&lt;span class="token punctuation"&gt;.&lt;/span&gt;&lt;span class="token function"&gt;delete&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token string"&gt;"UserDao.deleteUser"&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt; id&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token punctuation"&gt;}&lt;/span&gt;
</code></pre> 
<p><span class="token punctuation">}</span></p> 
<div class="hljs-button"></div> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li></ul> 
<h5><a id="63UserDaoUserDaoMapperxml_504" target="_blank"></a>6.3.编写UserDao对应的UserDaoMapper.xml</h5> 
<pre class="prettyprint"><code class="prism language-java has-numbering"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE mapper
        PUBLIC <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>
        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> mapper<span class="token operator">:</span>根标签，namespace：命名空间，随便写，一般保证命名空间唯一 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>mapper namespace<span class="token operator">=</span><span class="token string">"UserDao"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> statement，内容：sql语句。id：唯一标识，随便写，在同一个命名空间下保持唯一
       resultType：sql语句查询结果集的封装类型<span class="token punctuation">,</span>tb_user即为数据库中的表
     <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">"queryUserById"</span> resultType<span class="token operator">=</span><span class="token string">"com.zpc.mybatis.pojo.User"</span><span class="token operator">&gt;</span><span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>select <span class="token operator">*</span> from tb_user where id <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>id<span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span><span class="token operator">--</span><span class="token operator">&gt;</span>
</code><pre><code>&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token operator"&gt;!&lt;/span&gt;&lt;span class="token operator"&gt;--&lt;/span&gt;使用别名&lt;span class="token operator"&gt;--&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;select id&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"queryUserById"&lt;/span&gt; resultType&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"com.zpc.mybatis.pojo.User"&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
  select
   tuser&lt;span class="token punctuation"&gt;.&lt;/span&gt;id as id&lt;span class="token punctuation"&gt;,&lt;/span&gt;
   tuser&lt;span class="token punctuation"&gt;.&lt;/span&gt;user_name as userName&lt;span class="token punctuation"&gt;,&lt;/span&gt;
   tuser&lt;span class="token punctuation"&gt;.&lt;/span&gt;password as password&lt;span class="token punctuation"&gt;,&lt;/span&gt;
   tuser&lt;span class="token punctuation"&gt;.&lt;/span&gt;name as name&lt;span class="token punctuation"&gt;,&lt;/span&gt;
   tuser&lt;span class="token punctuation"&gt;.&lt;/span&gt;age as age&lt;span class="token punctuation"&gt;,&lt;/span&gt;
   tuser&lt;span class="token punctuation"&gt;.&lt;/span&gt;birthday as birthday&lt;span class="token punctuation"&gt;,&lt;/span&gt;
   tuser&lt;span class="token punctuation"&gt;.&lt;/span&gt;sex as sex&lt;span class="token punctuation"&gt;,&lt;/span&gt;
   tuser&lt;span class="token punctuation"&gt;.&lt;/span&gt;created as created&lt;span class="token punctuation"&gt;,&lt;/span&gt;
   tuser&lt;span class="token punctuation"&gt;.&lt;/span&gt;updated as updated
   from
   tb_user tuser
   where tuser&lt;span class="token punctuation"&gt;.&lt;/span&gt;id &lt;span class="token operator"&gt;=&lt;/span&gt; #&lt;span class="token punctuation"&gt;{&lt;/span&gt;id&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
</code></pre>
</pre> 
<p><span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span></p> 
<pre><code>&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;select id&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"queryUserAll"&lt;/span&gt; resultType&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"com.zpc.mybatis.pojo.User"&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
    select &lt;span class="token operator"&gt;*&lt;/span&gt; from tb_user&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token operator"&gt;/&lt;/span&gt;select&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;

&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token operator"&gt;!&lt;/span&gt;&lt;span class="token operator"&gt;--&lt;/span&gt;插入数据&lt;span class="token operator"&gt;--&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;insert id&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"insertUser"&lt;/span&gt; parameterType&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"com.zpc.mybatis.pojo.User"&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
    INSERT INTO tb_user &lt;span class="token punctuation"&gt;(&lt;/span&gt;
    user_name&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    password&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    name&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    age&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    sex&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    birthday&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    created&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    updated
    &lt;span class="token punctuation"&gt;)&lt;/span&gt;
    VALUES
    &lt;span class="token punctuation"&gt;(&lt;/span&gt;
    #&lt;span class="token punctuation"&gt;{&lt;/span&gt;userName&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    #&lt;span class="token punctuation"&gt;{&lt;/span&gt;password&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    #&lt;span class="token punctuation"&gt;{&lt;/span&gt;name&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    #&lt;span class="token punctuation"&gt;{&lt;/span&gt;age&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    #&lt;span class="token punctuation"&gt;{&lt;/span&gt;sex&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    #&lt;span class="token punctuation"&gt;{&lt;/span&gt;birthday&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    &lt;span class="token function"&gt;now&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    &lt;span class="token function"&gt;now&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;
    &lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token operator"&gt;/&lt;/span&gt;insert&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;

&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;update id&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"updateUser"&lt;/span&gt; parameterType&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"com.zpc.mybatis.pojo.User"&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
    UPDATE tb_user
    &lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;trim prefix&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"set"&lt;/span&gt; suffixOverrides&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;","&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token keyword"&gt;if&lt;/span&gt; test&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"userName!=null"&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;user_name &lt;span class="token operator"&gt;=&lt;/span&gt; #&lt;span class="token punctuation"&gt;{&lt;/span&gt;userName&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token operator"&gt;/&lt;/span&gt;&lt;span class="token keyword"&gt;if&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token keyword"&gt;if&lt;/span&gt; test&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"password!=null"&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;password &lt;span class="token operator"&gt;=&lt;/span&gt; #&lt;span class="token punctuation"&gt;{&lt;/span&gt;password&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token operator"&gt;/&lt;/span&gt;&lt;span class="token keyword"&gt;if&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token keyword"&gt;if&lt;/span&gt; test&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"name!=null"&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;name &lt;span class="token operator"&gt;=&lt;/span&gt; #&lt;span class="token punctuation"&gt;{&lt;/span&gt;name&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token operator"&gt;/&lt;/span&gt;&lt;span class="token keyword"&gt;if&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token keyword"&gt;if&lt;/span&gt; test&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"age!=null"&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;age &lt;span class="token operator"&gt;=&lt;/span&gt; #&lt;span class="token punctuation"&gt;{&lt;/span&gt;age&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token operator"&gt;/&lt;/span&gt;&lt;span class="token keyword"&gt;if&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token keyword"&gt;if&lt;/span&gt; test&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"sex!=null"&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;sex &lt;span class="token operator"&gt;=&lt;/span&gt; #&lt;span class="token punctuation"&gt;{&lt;/span&gt;sex&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token operator"&gt;/&lt;/span&gt;&lt;span class="token keyword"&gt;if&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token keyword"&gt;if&lt;/span&gt; test&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"birthday!=null"&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;birthday &lt;span class="token operator"&gt;=&lt;/span&gt; #&lt;span class="token punctuation"&gt;{&lt;/span&gt;birthday&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token operator"&gt;/&lt;/span&gt;&lt;span class="token keyword"&gt;if&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
        updated &lt;span class="token operator"&gt;=&lt;/span&gt; &lt;span class="token function"&gt;now&lt;/span&gt;&lt;span class="token punctuation"&gt;(&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;,&lt;/span&gt;
    &lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token operator"&gt;/&lt;/span&gt;trim&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
    WHERE
    &lt;span class="token punctuation"&gt;(&lt;/span&gt;id &lt;span class="token operator"&gt;=&lt;/span&gt; #&lt;span class="token punctuation"&gt;{&lt;/span&gt;id&lt;span class="token punctuation"&gt;}&lt;/span&gt;&lt;span class="token punctuation"&gt;)&lt;/span&gt;&lt;span class="token punctuation"&gt;;&lt;/span&gt;
&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token operator"&gt;/&lt;/span&gt;update&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;

&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;delete id&lt;span class="token operator"&gt;=&lt;/span&gt;&lt;span class="token string"&gt;"deleteUser"&lt;/span&gt;&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
    delete from tb_user where id&lt;span class="token operator"&gt;=&lt;/span&gt;#&lt;span class="token punctuation"&gt;{&lt;/span&gt;id&lt;span class="token punctuation"&gt;}&lt;/span&gt;
&lt;span class="token operator"&gt;&amp;lt;&lt;/span&gt;&lt;span class="token operator"&gt;/&lt;/span&gt;delete&lt;span class="token operator"&gt;&amp;gt;&lt;/span&gt;
</code></pre> 
<p><span class="token operator">&lt;</span><span class="token operator">/</span>mapper<span class="token operator">&gt;</span></p> 
<div class="hljs-button"></div> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li><li>41</li><li>42</li><li>43</li><li>44</li><li>45</li><li>46</li><li>47</li><li>48</li><li>49</li><li>50</li><li>51</li><li>52</li><li>53</li><li>54</li><li>55</li><li>56</li><li>57</li><li>58</li><li>59</li><li>60</li><li>61</li><li>62</li><li>63</li><li>64</li><li>65</li><li>66</li><li>67</li><li>68</li><li>69</li><li>70</li><li>71</li><li>72</li><li>73</li><li>74</li><li>75</li><li>76</li><li>77</li><li>78</li><li>79</li></ul> 
<p>在mybatis-config.xml中添加配置：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;mappers&gt;
    &lt;mapper resource="mappers/MyMapper.xml"/&gt;
    &lt;mapper resource="mappers/UserDaoMapper.xml"/&gt;
&lt;/mappers&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li></ul> 
<h5><a id="64UserDao_595" target="_blank"></a>6.4.添加UserDao的测试用例</h5> 
<p>Pom文件中添加junit依赖</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;dependency&gt;
    &lt;groupId&gt;junit&lt;/groupId&gt;
    &lt;artifactId&gt;junit&lt;/artifactId&gt;
    &lt;version&gt;4.12&lt;/version&gt;
&lt;/dependency&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
<p>按住Alt+Enter,选择create test<br> <img src="https://images2.imgbox.com/54/83/jKBShjzt_o.png" alt="这里写图片描述"></p> 
<p><img src="https://images2.imgbox.com/d1/78/BPzdLuNn_o.png" alt="这里写图片描述"></p> 
<h5><a id="65UserDao_610" target="_blank"></a>6.5.编写UserDao的测试用例</h5> 
<pre class="prettyprint"><code class="has-numbering">import com.zpc.mybatis.dao.UserDao;
import com.zpc.mybatis.dao.impl.UserDaoImpl;
import com.zpc.mybatis.pojo.User;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import org.junit.Before;
import org.junit.Test;
import java.io.InputStream;
import java.util.Date;
import java.util.List;
</code></pre> 
<p>public class UserDaoTest {<!-- --></p> 
<pre><code>public UserDao userDao;
public SqlSession sqlSession;

@Before
public void setUp() throws Exception {
    // mybatis-config.xml
    String resource = "mybatis-config.xml";
    // 读取配置文件
    InputStream is = Resources.getResourceAsStream(resource);
    // 构建SqlSessionFactory
    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is);
    // 获取sqlSession
    sqlSession = sqlSessionFactory.openSession();
    this.userDao = new UserDaoImpl(sqlSession);
}

@Test
public void queryUserById() throws Exception {
    System.out.println(this.userDao.queryUserById("1"));
}

@Test
public void queryUserAll() throws Exception {
    List&amp;lt;User&amp;gt; userList = this.userDao.queryUserAll();
    for (User user : userList) {
        System.out.println(user);
    }
}

@Test
public void insertUser() throws Exception {
    User user = new User();
    user.setAge(16);
    user.setBirthday(new Date("1990/09/02"));
    user.setName("大鹏");
    user.setPassword("123456");
    user.setSex(1);
    user.setUserName("evan");
    this.userDao.insertUser(user);
    this.sqlSession.commit();
}

@Test
public void updateUser() throws Exception {
    User user = new User();
    user.setBirthday(new Date());
    user.setName("静鹏");
    user.setPassword("654321");
    user.setSex(1);
    user.setUserName("evanjin");
    user.setId("1");
    this.userDao.updateUser(user);
    this.sqlSession.commit();
}

@Test
public void deleteUser() throws Exception {
    this.userDao.deleteUser("4");
    this.sqlSession.commit();
}
</code></pre> 
<p>}</p> 
<p></p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li><li>41</li><li>42</li><li>43</li><li>44</li><li>45</li><li>46</li><li>47</li><li>48</li><li>49</li><li>50</li><li>51</li><li>52</li><li>53</li><li>54</li><li>55</li><li>56</li><li>57</li><li>58</li><li>59</li><li>60</li><li>61</li><li>62</li><li>63</li><li>64</li><li>65</li><li>66</li><li>67</li><li>68</li><li>69</li><li>70</li><li>71</li><li>72</li><li>73</li><li>74</li><li>75</li><li>76</li><li>77</li><li>78</li></ul> 
<p></p> 
<h5><a id="66_692" target="_blank"></a>6.6.目录结构</h5> 
<p><img src="https://images2.imgbox.com/7c/c4/yAIl1EAd_o.png" alt="这里写图片描述"></p> 
<h5><a id="67_694" target="_blank"></a>6.7.解决数据库字段名和实体类属性名不一致的问题</h5> 
<p>查询数据的时候，发现查不到userName的信息，<br> User{id=‘2’, userName=‘<strong>null</strong>’, password=‘123456’, name=‘静静’, age=22, sex=0, birthday=‘1993-09-05’, created=‘2018-06-30 18:22:28.0’, updated=‘2018-06-30 18:22:28.0’}<br> 原因：数据库的字段名是user_name，POJO中的属性名字是userName<br> 两端不一致，造成mybatis无法填充对应的字段信息。修改方法：在sql语句中使用别名。<br> 解决方案1：在sql语句中使用别名：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;select id="queryUserById" resultType="com.zpc.mybatis.pojo.User"&gt;
   select
    tuser.id as id,
    tuser.user_name as userName,
    tuser.password as password,
    tuser.name as name,
    tuser.age as age,
    tuser.birthday as birthday,
    tuser.sex as sex,
    tuser.created as created,
    tuser.updated as updated
    from
    tb_user tuser
    where tuser.id = #{id};
&lt;/select&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li></ul> 
<p>解决方案2： 参考后面的resultMap –mapper具体的配置的时候</p> 
<p>解决方案3：参考驼峰匹配 — mybatis-config.xml 的时候</p> 
<h4><a id="7_Mapper_722" target="_blank"></a>7. 动态代理Mapper实现类</h4> 
<h5><a id="71CRUD_723" target="_blank"></a>7.1.思考上述CRUD中的问题</h5> 
<p>1、接口-&gt;实现类-&gt;mapper.xml<br> 2、实现类中，使用mybatis的方式非常类似<br> 3、xml中的sql statement 硬编码到java代码中。</p> 
<p>思考：能否只写接口，不写实现类。只编写接口和Mapper.xml即可？</p> 
<p>因为在dao（mapper）的实现类中对sqlsession的使用方式很类似。因此mybatis提供了接口的动态代理。</p> 
<h5><a id="72CRUD_732" target="_blank"></a>7.2.使用动态代理改造CRUD</h5> 
<ul><li>修改测试用例的setUp方法<br> <img src="https://images2.imgbox.com/bf/be/jlvwQbI5_o.png" alt="这里写图片描述"></li><li>执行queryUserAll()方法</li></ul> 
<p><img src="https://images2.imgbox.com/ef/9f/7onzw7jn_o.png" alt="这里写图片描述"></p> 
<pre class="prettyprint"><code class="has-numbering">org.apache.ibatis.binding.BindingException: Type interface com.zpc.mybatis.dao.UserDao is not known to the MapperRegistry.
	at org.apache.ibatis.binding.MapperRegistry.getMapper(MapperRegistry.java:47)
	at org.apache.ibatis.session.Configuration.getMapper(Configuration.java:655)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.getMapper(DefaultSqlSession.java:222)
at com.zpc.mybatis.test.UserDaoTest.setUp(UserDaoTest.java:32)
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
<ul><li>分析原因，在UserMapper.xml中配置接口的全路径<br> mapper.xml namespace<br> 如果希望使用mybatis通过的动态代理的接口，就需要namespace中的值，和需要对应的Mapper(dao)接口的全路径一致。Mapper中Namespace的定义本身是没有限制的，只要不重复即可，但如果使用Mybatis的DAO接口动态代理，则namespace必须为DAO接口的全路径，例如：com.zpc.mybatis.dao.UserDao</li></ul> 
<pre class="prettyprint"><code class="has-numbering">&lt;mapper namespace="com.zpc.mybatis.dao.UserDao"&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li></ul> 
<h5><a id="73_754" target="_blank"></a>7.3.完整的例子</h5> 
<p>1、创建UserMapper接口（对应原UserDao）</p> 
<pre class="prettyprint"><code class="has-numbering">public interface UserMapper {
</code></pre> 
<p>/**<br> * 登录（直接使用注解指定传入参数名称）<br> * @param userName<br> * @param password<br> * @return<br> */<br> public User login(@Param(“userName”) String userName, @Param(“password”) String password);</p> 
<p>/**<br> * 根据表名查询用户信息（直接使用注解指定传入参数名称）<br> * @param tableName<br> * @return<br> */<br> public List&lt;User&gt; queryUserByTableName(@Param(“tableName”) String tableName);</p> 
<p>/**<br> * 根据Id查询用户信息<br> * @param id<br> * @return<br> */<br> public User queryUserById(Long id);</p> 
<p>/**<br> * 查询所有用户信息<br> * @return<br> */<br> public List&lt;User&gt; queryUserAll();</p> 
<p>/**<br> * 新增用户信息<br> * @param user<br> */<br> public void insertUser(User user);</p> 
<p>/**<br> * 根据id更新用户信息<br> * @param user<br> */<br> public void updateUser(User user);</p> 
<p>/**<br> * 根据id删除用户信息<br> * @param id<br> */<br> public void deleteUserById(Long id);<br> }</p> 
<p></p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li><li>41</li><li>42</li><li>43</li><li>44</li><li>45</li><li>46</li><li>47</li><li>48</li><li>49</li></ul> 
<p></p> 
<p>2、创建UserMapper.xml</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
&lt;!-- mapper:根标签，namespace：命名空间，随便写，一般保证命名空间唯一 ，为了使用接口动态代理，这里必须是接口的全路径名--&gt;
&lt;mapper namespace="com.zpc.mybatis.dao.UserMapper"&gt;
    &lt;!--
       1.#{},预编译的方式preparedstatement，使用占位符替换，防止sql注入，一个参数的时候，任意参数名可以接收
       2.${},普通的Statement，字符串直接拼接，不可以防止sql注入，一个参数的时候，必须使用${value}接收参数
     --&gt;
    &lt;select id="queryUserByTableName" resultType="com.zpc.mybatis.pojo.User"&gt;
        select * from ${tableName}
    &lt;/select&gt;
</code><pre><code>&amp;lt;select id="login" resultType="com.zpc.mybatis.pojo.User"&amp;gt;
    select * from tb_user where user_name = #{userName} and password = #{password}
&amp;lt;/select&amp;gt;

&amp;lt;!-- statement，内容：sql语句。
   id：唯一标识，随便写，在同一个命名空间下保持唯一，使用动态代理之后要求和方法名保持一致
   resultType：sql语句查询结果集的封装类型，使用动态代理之后和方法的返回类型一致；resultMap：二选一
   parameterType：参数的类型，使用动态代理之后和方法的参数类型一致
 --&amp;gt;
&amp;lt;select id="queryUserById" resultType="com.zpc.mybatis.pojo.User"&amp;gt;
    select * from tb_user where id = #{id}
&amp;lt;/select&amp;gt;
&amp;lt;select id="queryUserAll" resultType="com.zpc.mybatis.pojo.User"&amp;gt;
    select * from tb_user
&amp;lt;/select&amp;gt;
&amp;lt;!-- 新增的Statement
   id：唯一标识，随便写，在同一个命名空间下保持唯一，使用动态代理之后要求和方法名保持一致
   parameterType：参数的类型，使用动态代理之后和方法的参数类型一致
   useGeneratedKeys:开启主键回写
   keyColumn：指定数据库的主键
   keyProperty：主键对应的pojo属性名
 --&amp;gt;
&amp;lt;insert id="insertUser" useGeneratedKeys="true" keyColumn="id" keyProperty="id"
        parameterType="com.zpc.mybatis.pojo.User"&amp;gt;
    INSERT INTO tb_user (
    id,
    user_name,
    password,
    name,
    age,
    sex,
    birthday,
    created,
    updated
    )
    VALUES
    (
    null,
    #{userName},
    #{password},
    #{name},
    #{age},
    #{sex},
    #{birthday},
    NOW(),
    NOW()
    );
&amp;lt;/insert&amp;gt;
&amp;lt;!-- 
   更新的statement
   id：唯一标识，随便写，在同一个命名空间下保持唯一，使用动态代理之后要求和方法名保持一致
   parameterType：参数的类型，使用动态代理之后和方法的参数类型一致
 --&amp;gt;
&amp;lt;update id="updateUser" parameterType="com.zpc.mybatis.pojo.User"&amp;gt;
    UPDATE tb_user
    &amp;lt;trim prefix="set" suffixOverrides=","&amp;gt;
        &amp;lt;if test="userName!=null"&amp;gt;user_name = #{userName},&amp;lt;/if&amp;gt;
        &amp;lt;if test="password!=null"&amp;gt;password = #{password},&amp;lt;/if&amp;gt;
        &amp;lt;if test="name!=null"&amp;gt;name = #{name},&amp;lt;/if&amp;gt;
        &amp;lt;if test="age!=null"&amp;gt;age = #{age},&amp;lt;/if&amp;gt;
        &amp;lt;if test="sex!=null"&amp;gt;sex = #{sex},&amp;lt;/if&amp;gt;
        &amp;lt;if test="birthday!=null"&amp;gt;birthday = #{birthday},&amp;lt;/if&amp;gt;
        updated = now(),
    &amp;lt;/trim&amp;gt;
    WHERE
    (id = #{id});
&amp;lt;/update&amp;gt;
&amp;lt;!-- 
   删除的statement
   id：唯一标识，随便写，在同一个命名空间下保持唯一，使用动态代理之后要求和方法名保持一致
   parameterType：参数的类型，使用动态代理之后和方法的参数类型一致
 --&amp;gt;
&amp;lt;delete id="deleteUserById" parameterType="java.lang.String"&amp;gt;
    delete from tb_user where id=#{id}
&amp;lt;/delete&amp;gt;
</code></pre>
</pre> 
<p>&lt;/mapper&gt;</p> 
<p></p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li><li>41</li><li>42</li><li>43</li><li>44</li><li>45</li><li>46</li><li>47</li><li>48</li><li>49</li><li>50</li><li>51</li><li>52</li><li>53</li><li>54</li><li>55</li><li>56</li><li>57</li><li>58</li><li>59</li><li>60</li><li>61</li><li>62</li><li>63</li><li>64</li><li>65</li><li>66</li><li>67</li><li>68</li><li>69</li><li>70</li><li>71</li><li>72</li><li>73</li><li>74</li><li>75</li><li>76</li><li>77</li><li>78</li><li>79</li><li>80</li><li>81</li><li>82</li><li>83</li><li>84</li><li>85</li><li>86</li><li>87</li><li>88</li><li>89</li><li>90</li><li>91</li></ul> 
<p></p> 
<p>3、全局配置文件mybatis-config.xml引入UserMapper.xml</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;mappers&gt;
    &lt;mapper resource="mappers/MyMapper.xml"/&gt;
    &lt;mapper resource="mappers/UserDaoMapper.xml"/&gt;
    &lt;mapper resource="mappers/UserMapper.xml"/&gt;
&lt;/mappers&gt;
</code></pre> 
<p></p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p></p> 
<p>4、创建UserMapper测试用例</p> 
<pre class="prettyprint"><code class="has-numbering">import com.zpc.mybatis.dao.UserMapper;
import com.zpc.mybatis.pojo.User;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import org.junit.Before;
import org.junit.Test;
</code></pre> 
<p>import java.io.InputStream;<br> import java.util.Date;<br> import java.util.List;</p> 
<p>public class UserMapperTest {<!-- --></p> 
<pre><code>public UserMapper userMapper;

@Before
public void setUp() throws Exception {
    // 指定配置文件
    String resource = "mybatis-config.xml";
    // 读取配置文件
    InputStream inputStream = Resources.getResourceAsStream(resource);
    // 构建sqlSessionFactory
    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
    // 获取sqlSession
    SqlSession sqlSession = sqlSessionFactory.openSession(true);

    // 1. 映射文件的命名空间（namespace）必须是mapper接口的全路径
    // 2. 映射文件的statement的id必须和mapper接口的方法名保持一致
    // 3. Statement的resultType必须和mapper接口方法的返回类型一致
    // 4. statement的parameterType必须和mapper接口方法的参数类型一致（不一定）
    this.userMapper = sqlSession.getMapper(UserMapper.class);
}

@Test
public void testQueryUserByTableName() {
    List&amp;lt;User&amp;gt; userList = this.userMapper.queryUserByTableName("tb_user");
    for (User user : userList) {
        System.out.println(user);
    }
}

@Test
public void testLogin() {
    System.out.println(this.userMapper.login("hj", "123456"));
}

@Test
public void testQueryUserById() {
    System.out.println(this.userMapper.queryUserById("1"));
}

@Test
public void testQueryUserAll() {
    List&amp;lt;User&amp;gt; userList = this.userMapper.queryUserAll();
    for (User user : userList) {
        System.out.println(user);
    }
}

@Test
public void testInsertUser() {
    User user = new User();
    user.setAge(20);
    user.setBirthday(new Date());
    user.setName("大神");
    user.setPassword("123456");
    user.setSex(2);
    user.setUserName("bigGod222");
    this.userMapper.insertUser(user);
    System.out.println(user.getId());
}

@Test
public void testUpdateUser() {
    User user = new User();
    user.setBirthday(new Date());
    user.setName("静静");
    user.setPassword("123456");
    user.setSex(0);
    user.setUserName("Jinjin");
    user.setId("1");
    this.userMapper.updateUser(user);
}

@Test
public void testDeleteUserById() {
    this.userMapper.deleteUserById("1");
}
</code></pre> 
<p>}</p> 
<p></p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li><li>41</li><li>42</li><li>43</li><li>44</li><li>45</li><li>46</li><li>47</li><li>48</li><li>49</li><li>50</li><li>51</li><li>52</li><li>53</li><li>54</li><li>55</li><li>56</li><li>57</li><li>58</li><li>59</li><li>60</li><li>61</li><li>62</li><li>63</li><li>64</li><li>65</li><li>66</li><li>67</li><li>68</li><li>69</li><li>70</li><li>71</li><li>72</li><li>73</li><li>74</li><li>75</li><li>76</li><li>77</li><li>78</li><li>79</li><li>80</li><li>81</li><li>82</li><li>83</li><li>84</li><li>85</li><li>86</li><li>87</li><li>88</li><li>89</li><li>90</li><li>91</li><li>92</li></ul> 
<p></p> 
<p>目录结构：<br> <img src="https://images2.imgbox.com/17/72/bq9ZhpBj_o.png" alt="这里写图片描述"></p> 
<h5><a id="74_1010" target="_blank"></a>7.4.动态代理总结</h5> 
<p><img src="https://images2.imgbox.com/ce/47/SDyKqltM_o.png" alt="这里写图片描述"></p> 
<h4><a id="8mybatisconfigxml_1013" target="_blank"></a>8.mybatis-config.xml详解</h4> 
<p>mybatis-config.xml讲究严格的顺序，具体顺序遵循文档的顺序<br> <img src="https://images2.imgbox.com/fa/95/1QjdfPFD_o.png" alt="这里写图片描述"></p> 
<h5><a id="81properties_1017" target="_blank"></a>8.1.properties属性读取外部资源</h5> 
<p>properties配置的属性都是可外部配置且可动态替换的，既可以在典型的 Java 属性文件中配置，亦可通过 properties 元素的子元素来传递。例如：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;properties resource="org/mybatis/example/config.properties"&gt;
  &lt;property name="username" value="dev_user"/&gt;
  &lt;property name="password" value="F2Fa3!33TYyg"/&gt;
&lt;/properties&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li></ul> 
<p>然后其中的属性就可以在整个配置文件中被用来替换需要动态配置的属性值。比如:</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;dataSource type="POOLED"&gt;
  &lt;property name="driver" value="${driver}"/&gt;
  &lt;property name="url" value="${url}"/&gt;
  &lt;property name="username" value="${username}"/&gt;
  &lt;property name="password" value="${password}"/&gt;
&lt;/dataSource&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>这个例子中的 username 和 password 将会由 properties 元素中设置的相应值来替换。 driver 和 url 属性将会由 config.properties 文件中对应的值来替换。这样就为配置提供了诸多灵活选择。</p> 
<p>属性也可以被传递到 SqlSessionFactoryBuilder.build()方法中。例如：</p> 
<pre class="prettyprint"><code class="has-numbering">SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(reader, props);
// ... or ...
SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(reader, environment, props);
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li></ul> 
<p>如果属性在不只一个地方进行了配置，那么 MyBatis 将按照下面的顺序来加载：<br> 1）在 properties 元素体内指定的属性首先被读取。<br> 2）然后根据 properties 元素中的 resource 属性读取类路径下属性文件或根据 url 属性指定的路径读取属性文件，并覆盖已读取的同名属性。<br> 3）最后读取作为方法参数传递的属性，并覆盖已读取的同名属性。<br> 因此，通过方法参数传递的属性具有最高优先级，resource/url 属性中指定的配置文件次之，最低优先级的是 properties 属性中指定的属性。</p> 
<h5><a id="82settings_1049" target="_blank"></a>8.2.settings设置</h5> 
<p><img src="https://images2.imgbox.com/19/8f/DL8kDlat_o.png" alt="这里写图片描述"></p> 
<pre class="prettyprint"><code class="has-numbering">&lt;settings&gt;
    &lt;setting name="mapUnderscoreToCamelCase" value="true"/&gt;
&lt;/settings&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li></ul> 
<p>测试：<br> 没有开启驼峰匹配：</p> 
<pre class="prettyprint"><code class="has-numbering">2018-07-01 13:57:56,486 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt;  Preparing: select * from tb_user where id = ? 
2018-07-01 13:57:56,524 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt; Parameters: 1(String)
2018-07-01 13:57:56,568 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] &lt;==      Total: 1
User{id='1', userName='null', password='123456', name='大神', age=20, sex=2, birthday='2018-07-01', created='2018-07-01 13:36:09.0', updated='2018-07-01 13:36:09.0'}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li></ul> 
<p>开启驼峰匹配：</p> 
<pre class="prettyprint"><code class="has-numbering">2018-07-01 13:58:40,599 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt;  Preparing: select * from tb_user where id = ? 
2018-07-01 13:58:40,642 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt; Parameters: 1(String)
2018-07-01 13:58:40,661 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] &lt;==      Total: 1
User{id='1', userName='bigGod222', password='123456', name='大神', age=20, sex=2, birthday='2018-07-01', created='2018-07-01 13:36:09.0', updated='2018-07-01 13:36:09.0'}
</code></pre> 
<p></p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
<p></p> 
<h5><a id="83typeAliases_1075" target="_blank"></a>8.3.typeAliases</h5> 
<p>类型别名是为 Java 类型命名的一个短的名字。它只和 XML 配置有关，存在的意义仅在于用来减少类完全限定名的冗余。</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;typeAliases&gt;
    &lt;typeAlias type="com.zpc.mybatis.pojo.User" alias="User"/&gt;
&lt;/typeAliases&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li></ul> 
<p>缺点：每个pojo类都要去配置。<br> 解决方案：使用扫描包，扫描指定包下的所有类，扫描之后的别名就是类名（不区分大小写），建议使用的时候和类名一致。</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;typeAliases&gt;
    &lt;!--type:实体类的全路径。alias:别名，通常首字母大写--&gt;
    &lt;!--&lt;typeAlias type="com.zpc.mybatis.pojo.User" alias="User"/&gt;--&gt;
    &lt;package name="com.zpc.mybatis.pojo"/&gt;
&lt;/typeAliases&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
<p>Mybatis已经为普通的 Java 类型内建了许多相应的类型别名。它们都是大小写不敏感的.<br> <img src="https://images2.imgbox.com/04/55/R4PR6d4m_o.png" alt="这里写图片描述"></p> 
<h5><a id="84typeHandlers_1093" target="_blank"></a>8.4.typeHandlers（类型处理器）</h5> 
<p>无论是 MyBatis 在预处理语句（PreparedStatement）中设置一个参数时，还是从结果集中取出一个值时， 都会用类型处理器将获取的值以合适的方式转换成 Java 类型。可以重写类型处理器或创建你自己的类型处理器来处理不支持的或非标准的类型。</p> 
<h5><a id="85plugins_1096" target="_blank"></a>8.5.plugins（插件）拦截器</h5> 
<p>MyBatis 允许你在已映射语句执行过程中的某一点进行拦截调用。默认情况下，MyBatis 允许使用插件来拦截的方法调用包括：<br> <a href="https://www.baidu.com/s?wd=Executor&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" rel="nofollow noopener noreferrer" target="_blank">Executor</a> (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)<br> ParameterHandler (getParameterObject, setParameters)<br> ResultSetHandler (handleResultSets, handleOutputParameters)<br> StatementHandler (prepare, parameterize, batch, update, query)</p> 
<p>现在一些MyBatis 插件比如PageHelper都是基于这个原理，有时为了监控sql执行效率，也可以使用插件机制<br> 原理：<br> <img src="https://images2.imgbox.com/93/5d/e69hnQVh_o.png" alt="这里写图片描述"><br> 自定义拦截器：</p> 
<pre class="prettyprint"><code class="has-numbering">// ExamplePlugin.java
@Intercepts({@Signature(
  type= Executor.class,
  method = "update",
  args = {MappedStatement.class,Object.class})})
public class ExamplePlugin implements Interceptor {
  public Object intercept(Invocation invocation) throws Throwable {
    return invocation.proceed();
  }
  public Object plugin(Object target) {
    return Plugin.wrap(target, this);
  }
  public void setProperties(Properties properties) {
  }
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li></ul> 
<p>配置：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;!-- mybatis-config.xml --&gt;
&lt;plugins&gt;
  &lt;plugin interceptor="org.mybatis.example.ExamplePlugin"&gt;
    &lt;property name="someProperty" value="100"/&gt;
  &lt;/plugin&gt;
&lt;/plugins&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>上面的插件将会拦截在 Executor 实例中所有的 “update” 方法调用， 这里的 Executor 是负责执行低层映射语句的内部对象。</p> 
<h5><a id="86environments_1135" target="_blank"></a>8.6.environments(环境)</h5> 
<p>MyBatis 可以配置成适应多种环境，例如，开发、测试和生产环境需要有不同的配置；<br> 尽管可以配置多个环境，每个 SqlSessionFactory 实例只能选择其一。<br> 虽然，这种方式也可以做到很方便的分离多个环境，但是实际使用场景下，我们更多的是选择使用spring来管理数据源，来做到环境的分离。</p> 
<h5><a id="87mappers_1139" target="_blank"></a>8.7.mappers</h5> 
<p>需要告诉 MyBatis 到哪里去找到 SQL 映射语句。即告诉 MyBatis 到哪里去找映射文件。你可以使用相对于类路径的资源引用， 或完全限定资源定位符（包括 file:/// 的 URL），或类名和包名等。例如：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;!-- 使用相对于类路径的资源引用 --&gt;
&lt;mappers&gt;
  &lt;mapper resource="org/mybatis/builder/AuthorMapper.xml"/&gt;
  &lt;mapper resource="org/mybatis/builder/BlogMapper.xml"/&gt;
  &lt;mapper resource="org/mybatis/builder/PostMapper.xml"/&gt;
&lt;/mappers&gt;
</code></pre> 
<p>&lt;!-- 使用映射器接口实现类的完全限定类名 --&gt;<br> &lt;mappers&gt;<br> &lt;mapper class=“org.mybatis.builder.AuthorMapper”/&gt;<br> &lt;mapper class=“org.mybatis.builder.BlogMapper”/&gt;<br> &lt;mapper class=“org.mybatis.builder.PostMapper”/&gt;<br> &lt;/mappers&gt;<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li></ul> 
<p></p> 
<p>这里所谓的mapper接口路径。实际上就是dao的接口路径。在mybatis中，通常把dao的包叫做mapper。类名，也叫做mapper<br> 1、定义一个接口。<br> 2、在接口所在的包中定义mapper.xml，并且要求xml文件和interface的名称要相同。<br> 3、在mybatis-config.xml 中通过class路径，引入mapper（注解方式）。要求mapper.xml 中的名称空间是类的接口的全路径。</p> 
<p>注解方式：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;mappers&gt;
    &lt;mapper resource="mappers/MyMapper.xml"/&gt;
    &lt;mapper resource="mappers/UserDaoMapper.xml"/&gt;
    &lt;!--注解方式可以使用如下配置方式--&gt;
    &lt;mapper class="com.zpc.mybatis.dao.UserMapper"/&gt;
&lt;/mappers&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>问题：<br> 1、mapper.xml 和 java文件没有分离。 之后的教程讲述和spring整合之后解决。<br> 2、需要一个一个的去加载mapper。</p> 
<p>当然也可以使用包扫描（必须使用注解方式，即在接口方法上使用注解，如@Select("select * from tb_user ")）：<br> </p> 
<p>缺点：<br> 1、如果包的路径有很多？<br> 2、mapper.xml和mapper.java没有分离。<br> spring整合的时候解决。</p> 
<h4><a id="9Mapper_XML_1182" target="_blank"></a>9.Mapper XML文件详解</h4> 
<h5><a id="91CRUD_1184" target="_blank"></a>9.1.CRUD标签</h5> 
<h6><a id="911select_1185" target="_blank"></a>9.1.1.select</h6> 
<p>select – 书写查询sql语句<br> select中的几个属性说明：<br> id属性：当前名称空间下的statement的唯一标识。必须。要求id和mapper接口中的方法的名字一致。<br> resultType：将结果集映射为java的对象类型。必须（和 resultMap 二选一）<br> parameterType：传入参数类型。可以省略</p> 
<h6><a id="912insert_1191" target="_blank"></a>9.1.2.insert</h6> 
<p>insert 的几个属性说明：<br> id：唯一标识，随便写，在同一个命名空间下保持唯一，使用动态代理之后要求和方法名保持一致<br> parameterType：参数的类型，使用动态代理之后和方法的参数类型一致<br> useGeneratedKeys:开启主键回写<br> keyColumn：指定数据库的主键<br> keyProperty：主键对应的pojo属性名<br> 标签内部：具体的sql语句。</p> 
<h6><a id="913update_1199" target="_blank"></a>9.1.3.update</h6> 
<p>id属性：当前名称空间下的statement的唯一标识(必须属性)；<br> parameterType：传入的参数类型，可以省略。<br> 标签内部：具体的sql语句。</p> 
<h6><a id="914delete_1203" target="_blank"></a>9.1.4.delete</h6> 
<p>delete 的几个属性说明：<br> id属性：当前名称空间下的statement的唯一标识(必须属性)；<br> parameterType：传入的参数类型，可以省略。<br> 标签内部：具体的sql语句。</p> 
<h5><a id="92_1208" target="_blank"></a>9.2.#{}和${}</h5> 
<p>场景：数据库有两个<a href="https://www.baidu.com/s?wd=%E4%B8%80%E6%A8%A1%E4%B8%80%E6%A0%B7&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" rel="nofollow noopener noreferrer" target="_blank">一模一样</a>的表。历史表，当前表<br> 查询表中的信息，有时候从历史表中去查询数据，有时候需要去新的表去查询数据。<br> 希望使用1个方法来完成操作。</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;select id="queryUserByTableName" resultType="com.zpc.mybatis.pojo.User"&gt;
    select * from #{tableName}
&lt;/select&gt;
</code></pre> 
<p>/**</p> 
<ul><li>根据表名查询用户信息（直接使用注解指定传入参数名称）</li><li><li>@param tableName</li><li>@return<br> */<br> public List&lt;User&gt; queryUserByTableName(String tableName);<br> 
  <ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li></ul></li></ul> 
<p>测试输出：<br> <img src="https://images2.imgbox.com/df/01/PorSGqnw_o.png" alt="这里写图片描述"><br> 有问题,报语法错误：相当于执行了这样一条sql:<br> select * from “tb_user”;<br> 显然表名多了引号。</p> 
<p>改正：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;select id="queryUserByTableName" resultType="com.zpc.mybatis.pojo.User"&gt;
    select * from ${tableName}
&lt;/select&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li></ul> 
<p>注意：<br> #{} 只是替换？，相当于PreparedStatement使用占位符去替换参数，可以防止sql注入。<br> ${} 是进行字符串拼接，相当于sql语句中的Statement，使用字符串去拼接sql；$可以是sql中的任一部分传入到Statement中，不能防止sql注入。</p> 
<p>使用${} 去取出参数值信息，需要使用${value}<br> #{} 只是表示占位，与参数的名字无关，如果只有一个参数，会自动对应。</p> 
<p>推荐：</p> 
<pre class="prettyprint"><code class="has-numbering">/**
 * 根据表名查询用户信息（直接使用注解指定传入参数名称）
 *
 * @param tableName
 * @return
 */
public List&lt;User&gt; queryUserByTableName(@Param("tableName") String tableName);
</code></pre> 
<p>&lt;select id=“queryUserByTableName” resultType=“com.zpc.mybatis.pojo.User”&gt;<br> select * from ${tableName}<br> &lt;/select&gt;<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li></ul> 
<p></p> 
<p>#{}多个参数时：</p> 
<pre class="prettyprint"><code class="has-numbering">/**
 * 登录（直接使用注解指定传入参数名称）
 *
 * @param userName
 * @param password
 * @return
 */
public User login( String userName, String password);
</code></pre> 
<p>&lt;select id=“login” resultType=“com.zpc.mybatis.pojo.User”&gt;<br> select * from tb_user where user_name = #{userName} and password = #{password}<br> &lt;/select&gt;<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li></ul> 
<p></p> 
<p>报错：</p> 
<pre class="prettyprint"><code class="has-numbering">org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.apache.ibatis.binding.BindingException: Parameter 'userName' not found. Available parameters are [0, 1, param1, param2]
### Cause: org.apache.ibatis.binding.BindingException: Parameter 'userName' not found. Available parameters are [0, 1, param1, param2]
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li></ul> 
<p>解决方案一：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;select id="login" resultType="com.zpc.mybatis.pojo.User"&gt;
    select * from tb_user where user_name = #{0} and password = #{1}
&lt;/select&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li></ul> 
<p>解决方案二：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;select id="login" resultType="com.zpc.mybatis.pojo.User"&gt;
    select * from tb_user where user_name = #{param1} and password = #{param2}
&lt;/select&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li></ul> 
<p>最终解决方案：</p> 
<pre class="prettyprint"><code class="has-numbering">/**
 * 登录（直接使用注解指定传入参数名称）
 *
 * @param userName
 * @param password
 * @return
 */
public User login(@Param("userName") String userName, @Param("password") String password);
</code></pre> 
<p>&lt;select id=“login” resultType=“com.zpc.mybatis.pojo.User”&gt;<br> select * from tb_user where user_name = #{userName} and password = #{password}<br> &lt;/select&gt;<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li></ul> 
<p></p> 
<p>通常在方法的参数列表上加上一个注释@Param(“xxxx”) 显式指定参数的名字，然后通过${“xxxx”}或#{“xxxx”}<br> sql语句动态生成的时候，使用${};<br> sql语句中某个参数进行占位的时候#{}</p> 
<h5><a id="93_1312" target="_blank"></a>9.3.面试题（#、$区别）</h5> 
<pre class="prettyprint"><code class="has-numbering">/**
 * #号
 * @param username1
 * @return
 */
User queryUserListByName1(@Param("username1") String username1);
</code></pre> 
<p>/**</p> 
<ul><li>$号</li><li>@param username2</li><li>@return<br> */<br> User queryUserListByName2(@Param(“username2”) String username2);</li></ul> 
<p>&lt;select id=“queryUserListByName1” resultType=“com.zpc.mybatis.pojo.User”&gt;<br> select * from tb_user WHERE user_name=#{username1}<br> &lt;/select&gt;</p> 
<p>&lt;select id=“queryUserListByName2” resultType=“com.zpc.mybatis.pojo.User”&gt;<br> select * from tb_user WHERE user_name=’${username2}’//手动加了引号<br> &lt;/select&gt;<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li></ul> 
<p></p> 
<h5><a id="94resultMap_1336" target="_blank"></a>9.4.resultMap</h5> 
<p><img src="https://images2.imgbox.com/1f/7e/GBp2yfNC_o.png" alt="这里写图片描述"><br> <img src="https://images2.imgbox.com/a1/56/3KsYUbja_o.png" alt="这里写图片描述"><br> 使用：<br> <img src="https://images2.imgbox.com/b9/47/3o2Tb2Sg_o.png" alt="这里写图片描述"></p> 
<h5><a id="95sql_1341" target="_blank"></a>9.5.sql片段</h5> 
<pre class="prettyprint"><code class="has-numbering">&lt;sql id=””&gt;&lt;/sql&gt;
&lt;include refId=”” /&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li></ul> 
<p>例如在UserMapper.xml中定义如下片段：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;sql id="commonSql"&gt;
		id,
			user_name,
			password,
			name,
			age,
			sex,
			birthday,
			created,
			updated	
&lt;/sql&gt; 
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li></ul> 
<p>则可以在UserMapper.xml中使用它：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;select id="queryUserById" resultMap="userResultMap"&gt;
	select &lt;include refid="commonSql"&gt;&lt;/include&gt; from tb_user where id = #{id}
&lt;/select&gt;
</code></pre> 
<p>&lt;select id=“queryUsersLikeUserName” resultType=“User”&gt;<br> select &lt;include refid=“commonSql”&gt;&lt;/include&gt; from tb_user where user_name like “%”#{userName}"%"<br> &lt;/select&gt;<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li></ul> 
<p></p> 
<p>Sql片段也可以定义在单独的.xml文件中如：<br> 定义CommonSQL.xml：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
&lt;mapper namespace="CommonSQL"&gt;
	&lt;sql id="commonSql"&gt;
		id,
			user_name,
			password,
			name,
			age,
			sex,
			birthday,
			created,
			updated	
	&lt;/sql&gt;
&lt;/mapper&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li></ul> 
<p>使用：</p> 
<pre class="prettyprint"><code class="has-numbering">	&lt;select id="queryUserById" resultMap="userResultMap"&gt;
		select &lt;include refid="CommonSQL.commonSql"&gt;&lt;/include&gt; from tb_user where id = #{id}
	&lt;/select&gt;
</code><pre><code>&amp;lt;select id="queryUsersLikeUserName" resultType="User"&amp;gt;
	select &amp;lt;include refid="CommonSQL.commonSql"&amp;gt;&amp;lt;/include&amp;gt; from tb_user where user_name like "%"#{userName}"%"
&amp;lt;/select&amp;gt;
</code></pre>
</pre> 
<p></p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li></ul> 
<p></p> 
<p>当然要完成这个功能还需要在全局配置文件mybatis-config.xml中引入该外部配置文件：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;mappers&gt;
		&lt;mapper resource="CommonSQL.xml"/&gt;
		&lt;!-- 开启mapper接口的包扫描，基于class的配置方式 --&gt;
		&lt;package name="com.zpc.mybatis.mapper"/&gt;
&lt;/mappers&gt;
</code></pre> 
<p></p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p></p> 
<h4><a id="10sql_1410" target="_blank"></a>10.动态sql</h4> 
<p>场景：查询男性用户，如果输入了姓名，按姓名模糊查询<br> <img src="https://images2.imgbox.com/60/44/Fm9crQRA_o.png" alt="这里写图片描述"></p> 
<h5><a id="101if_1413" target="_blank"></a>10.1.if</h5> 
<p>场景：查询男性用户，如果输入了姓名，则按姓名查询</p> 
<p>定义接口：</p> 
<pre class="prettyprint"><code class="has-numbering">/**
 * 查询男性用户，如果输入了姓名，则按姓名查询
 * @param name
 * @return
 */
List&lt;User&gt; queryUserList(@Param("name") String name);
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>编写mapper</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;select id="queryUserList" resultType="com.zpc.mybatis.pojo.User"&gt;
    select * from tb_user WHERE sex=1
    &lt;if test="name!=null and name.trim()!=''"&gt;
      and name like '%${name}%'
    &lt;/if&gt;
&lt;/select&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>测试</p> 
<pre class="prettyprint"><code class="has-numbering">@Test
public void testqueryUserList() {
    List&lt;User&gt; users = this.userMapper.queryUserList(null);
    for (User user : users) {
        System.out.println(user);
    }
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li></ul> 
<h5><a id="102choose_when_otherwise_1444" target="_blank"></a>10.2.choose when otherwise</h5> 
<p>场景：查询男性用户，如果输入了姓名则按照姓名模糊查找，否则如果输入了年龄则按照年龄查找，否则查找姓名为“鹏程”的用户。</p> 
<p>定义接口：</p> 
<pre class="prettyprint"><code class="has-numbering">/**
 * 查询男性用户，如果输入了姓名则按照姓名模糊查找，否则如果输入了年龄则按照年龄查找，否则查找姓名为“鹏程”的用户。
 * @param name
 * @param age
 * @return
 */
List&lt;User&gt; queryUserListByNameOrAge(@Param("name") String name,@Param("age") Integer age);
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li></ul> 
<p>编写mapper配置：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;select id="queryUserListByNameOrAge" resultType="com.zpc.mybatis.pojo.User"&gt;
    select * from tb_user WHERE sex=1
    &lt;!--
    1.一旦有条件成立的when，后续的when则不会执行
    2.当所有的when都不执行时,才会执行otherwise
    --&gt;
    &lt;choose&gt;
        &lt;when test="name!=null and name.trim()!=''"&gt;
            and name like '%${name}%'
        &lt;/when&gt;
        &lt;when test="age!=null"&gt;
            and age = #{age}
        &lt;/when&gt;
        &lt;otherwise&gt;
            and name='鹏程'
        &lt;/otherwise&gt;
    &lt;/choose&gt;
&lt;/select&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li></ul> 
<p>测试：</p> 
<pre class="prettyprint"><code class="has-numbering">@Test
public void queryUserListByNameOrAge() throws Exception {
    List&lt;User&gt; users = this.userMapper.queryUserListByNameOrAge(null, 16);
    for (User user : users) {
        System.out.println(user);
    }
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li></ul> 
<h5><a id="103where_set_1488" target="_blank"></a>10.3.where 和set</h5> 
<p>场景一：查询所有用户，如果输入了姓名按照姓名进行模糊查询，如果输入年龄，按照年龄进行查询，如果两者都输入，两个条件都要成立。</p> 
<p>接口：</p> 
<pre class="prettyprint"><code class="has-numbering">/**
 * 查询所有用户，如果输入了姓名按照姓名进行模糊查询，如果输入年龄，按照年龄进行查询，如果两者都输入，两个条件都要成立
 * @param name
 * @param age
 * @return
 */
List&lt;User&gt; queryUserListByNameAndAge(@Param("name") String name,@Param("age") Integer age);
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li></ul> 
<p>配置：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;select id="queryUserListByNameAndAge" resultType="com.zpc.mybatis.pojo.User"&gt;
    select * from tb_user
    &lt;!--如果多出一个and，会自动去除，如果缺少and或者多出多个and则会报错--&gt;
    &lt;where&gt;
        &lt;if test="name!=null and name.trim()!=''"&gt;
            and name like '%${name}%'
        &lt;/if&gt;
        &lt;if test="age!=null"&gt;
            and age = #{age}
        &lt;/if&gt;
    &lt;/where&gt;
&lt;/select&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li></ul> 
<p>测试：</p> 
<pre class="prettyprint"><code class="has-numbering">@Test
public void queryUserListByNameAndAge() throws Exception {
    List&lt;User&gt; users = this.userMapper.queryUserListByNameAndAge("鹏程", 20);
    for (User user : users) {
        System.out.println(user);
    }
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li></ul> 
<p>场景二：修改用户信息，如果参数user中的某个属性为null，则不修改。<br> 接口：</p> 
<pre class="prettyprint"><code class="has-numbering">/**
 * 根据id更新用户信息
 *
 * @param user
 */
public void updateUser(User user);
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>配置：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;update id="updateUser" parameterType="com.zpc.mybatis.pojo.User"&gt;
    UPDATE tb_user
    &lt;trim prefix="set" suffixOverrides=","&gt;
        &lt;if test="userName!=null"&gt;user_name = #{userName},&lt;/if&gt;
        &lt;if test="password!=null"&gt;password = #{password},&lt;/if&gt;
        &lt;if test="name!=null"&gt;name = #{name},&lt;/if&gt;
        &lt;if test="age!=null"&gt;age = #{age},&lt;/if&gt;
        &lt;if test="sex!=null"&gt;sex = #{sex},&lt;/if&gt;
        &lt;if test="birthday!=null"&gt;birthday = #{birthday},&lt;/if&gt;
        updated = now(),
    &lt;/trim&gt;
    WHERE
    (id = #{id});
&lt;/update&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li></ul> 
<p>测试：</p> 
<pre class="prettyprint"><code class="has-numbering">@Test
public void testUpdateUser() {
    User user = new User();
    user.setBirthday(new Date());
    user.setName("静静");
    user.setPassword("123456");
    user.setSex(0);
    user.setUserName("Jinjin");
    user.setId("1");
    this.userMapper.updateUser(user);
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li></ul> 
<h5><a id="104foreach_1568" target="_blank"></a>10.4.foreach</h5> 
<p>场景：按照多个id查询用户信息</p> 
<p>接口：</p> 
<pre class="prettyprint"><code class="has-numbering">/**
 * 按多个Id查询
 * @param ids
 * @return
 */
List&lt;User&gt; queryUserListByIds(@Param("ids") String[] ids);
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>配置：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;select id="queryUserListByIds" resultType="com.zpc.mybatis.pojo.User"&gt;
    select * from tb_user where id in
    &lt;foreach collection="ids" item="id" open="(" close=")" <a href="https://www.baidu.com/s?wd=separator&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" rel="nofollow noopener noreferrer" target="_blank">separator</a>=","&gt;
        #{id}
    &lt;/foreach&gt;
&lt;/select&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>测试：</p> 
<pre class="prettyprint"><code class="has-numbering">@Test
public void queryUserListByIds() throws Exception {
    List&lt;User&gt; users = this.userMapper.queryUserListByIds(new String[]{"1","2"});
    for (User user : users) {
        System.out.println(user);
    }
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li></ul> 
<p>If：testognl表达式或者简单java代码<br> Choose when otherwise—&gt;相当于if else if else<br> When test参考if<br> Where set 都有一定的纠错功能<br> Trim：prefix suffix prefixOverrides suffixOverrides<br> Foreach：collection item saparator open close</p> 
<h4><a id="11_1605" target="_blank"></a>11.缓存</h4> 
<h5><a id="111_1606" target="_blank"></a>11.1.一级缓存</h5> 
<p><img src="https://images2.imgbox.com/26/1a/St37r9rY_o.png" alt="这里写图片描述"><br> 在mybatis中，一级缓存默认是开启的，并且一直无法关闭</p> 
<p>一级缓存满足条件：<br> 1、同一个session中<br> 2、相同的SQL和参数</p> 
<p>测试：</p> 
<pre class="prettyprint"><code class="has-numbering">@Test
public void testQueryUserById() {
    System.out.println(this.userMapper.queryUserById("1"));
    System.out.println(this.userMapper.queryUserById("1"));
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
<pre class="prettyprint"><code class="has-numbering">2018-07-01 17:08:50,156 [main] [org.apache.ibatis.transaction.jdbc.JdbcTransaction]-[DEBUG] Opening JDBC Connection
2018-07-01 17:08:50,421 [main] [org.apache.ibatis.datasource.pooled.PooledDataSource]-[DEBUG] Created connection 242355057.
2018-07-01 17:08:50,423 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt;  Preparing: select * from tb_user where id = ? 
2018-07-01 17:08:50,476 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt; Parameters: 1(String)
2018-07-01 17:08:50,509 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] &lt;==      Total: 1
User{id='1', userName='bigGod222', password='123456', name='鹏程', age=20, sex=1, birthday='2018-07-01', created='2018-07-01 13:35:40.0', updated='2018-07-01 13:35:40.0'}
User{id='1', userName='bigGod222', password='123456', name='鹏程', age=20, sex=1, birthday='2018-07-01', created='2018-07-01 13:35:40.0', updated='2018-07-01 13:35:40.0'}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li></ul> 
<p>使用：sqlSession.clearCache();可以强制清除缓存</p> 
<p>测试：</p> 
<pre class="prettyprint"><code class="has-numbering">@Test
public void testQueryUserById() {
    System.out.println(this.userMapper.queryUserById("1"));
    sqlSession.clearCache();
    System.out.println(this.userMapper.queryUserById("1"));
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>日志：</p> 
<pre class="prettyprint"><code class="has-numbering">2018-07-01 17:10:51,065 [main] [org.apache.ibatis.transaction.jdbc.JdbcTransaction]-[DEBUG] Opening JDBC Connection
2018-07-01 17:10:51,359 [main] [org.apache.ibatis.datasource.pooled.PooledDataSource]-[DEBUG] Created connection 242355057.
2018-07-01 17:10:51,360 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt;  Preparing: select * from tb_user where id = ? 
2018-07-01 17:10:51,408 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt; Parameters: 1(String)
2018-07-01 17:10:51,437 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] &lt;==      Total: 1
User{id='1', userName='bigGod222', password='123456', name='鹏程', age=20, sex=1, birthday='2018-07-01', created='2018-07-01 13:35:40.0', updated='2018-07-01 13:35:40.0'}
2018-07-01 17:10:51,438 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt;  Preparing: select * from tb_user where id = ? 
2018-07-01 17:10:51,438 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt; Parameters: 1(String)
2018-07-01 17:10:51,440 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] &lt;==      Total: 1
User{id='1', userName='bigGod222', password='123456', name='鹏程', age=20, sex=1, birthday='2018-07-01', created='2018-07-01 13:35:40.0', updated='2018-07-01 13:35:40.0'}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li></ul> 
<p>执行update、insert、delete的时候，会清空缓存<br> 测试：</p> 
<pre class="prettyprint"><code class="has-numbering">@Test
public void testQueryUserById() {
    System.out.println(this.userMapper.queryUserById("1"));
    //sqlSession.clearCache();
</code><pre><code>User user=new User();
user.setName("美女");
user.setId("1");
userMapper.updateUser(user);

System.out.println(this.userMapper.queryUserById("1"));
</code></pre>
</pre> 
<p>}<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li></ul> 
<p></p> 
<p>日志：</p> 
<pre class="prettyprint"><code class="has-numbering">2018-07-01 17:18:15,128 [main] [org.apache.ibatis.transaction.jdbc.JdbcTransaction]-[DEBUG] Opening JDBC Connection
2018-07-01 17:18:15,399 [main] [org.apache.ibatis.datasource.pooled.PooledDataSource]-[DEBUG] Created connection 242355057.
2018-07-01 17:18:15,401 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt;  Preparing: select * from tb_user where id = ? 
2018-07-01 17:18:15,466 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt; Parameters: 1(String)
2018-07-01 17:18:15,492 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] &lt;==      Total: 1
User{id='1', userName='bigGod222', password='123456', name='鹏程', age=20, sex=1, birthday='2018-07-01', created='2018-07-01 13:35:40.0', updated='2018-07-01 13:35:40.0'}
2018-07-01 17:18:15,527 [main] [com.zpc.mybatis.dao.UserMapper.updateUser]-[DEBUG] ==&gt;  Preparing: UPDATE tb_user set name = ?, updated = now() WHERE (id = ?); 
2018-07-01 17:18:15,529 [main] [com.zpc.mybatis.dao.UserMapper.updateUser]-[DEBUG] ==&gt; Parameters: 美女(String), 1(String)
2018-07-01 17:18:15,532 [main] [com.zpc.mybatis.dao.UserMapper.updateUser]-[DEBUG] &lt;==    Updates: 1
2018-07-01 17:18:15,532 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt;  Preparing: select * from tb_user where id = ? 
2018-07-01 17:18:15,533 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt; Parameters: 1(String)
2018-07-01 17:18:15,538 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] &lt;==      Total: 1
User{id='1', userName='bigGod222', password='123456', name='美女', age=20, sex=1, birthday='2018-07-01', created='2018-07-01 13:35:40.0', updated='2018-07-01 17:18:15.0'}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li></ul> 
<h5><a id="112_1687" target="_blank"></a>11.2.二级缓存</h5> 
<p>mybatis 的二级缓存的作用域是一个mapper的namespace ，同一个namespace中查询sql可以从缓存中命中。</p> 
<p>开启二级缓存：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;mapper namespace="com.zpc.mybatis.dao.UserMapper"&gt;
    &lt;cache/&gt;
&lt;/mapper&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li></ul> 
<p>测试：</p> 
<pre class="prettyprint"><code class="has-numbering">@Test
public void testCache() {
    System.out.println(this.userMapper.queryUserById("1"));
</code><pre><code>sqlSession.close();
SqlSession sqlSession = sqlSessionFactory.openSession();
UserMapper mapper = sqlSession.getMapper(UserMapper.class);

System.out.println(mapper.queryUserById("1"));
</code></pre>
</pre> 
<p>}<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li></ul> 
<p></p> 
<p>开启二级缓存，必须序列化：</p> 
<pre class="prettyprint"><code class="has-numbering">public class User implements Serializable{
    private static final long serialVersionUID = -3330851033429007657L;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li></ul> 
<p>日志：</p> 
<pre class="prettyprint"><code class="has-numbering">2018-07-01 17:23:39,335 [main] [org.apache.ibatis.transaction.jdbc.JdbcTransaction]-[DEBUG] Opening JDBC Connection
2018-07-01 17:23:39,664 [main] [org.apache.ibatis.datasource.pooled.PooledDataSource]-[DEBUG] Created connection 2092769598.
2018-07-01 17:23:39,665 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt;  Preparing: select * from tb_user where id = ? 
2018-07-01 17:23:39,712 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] ==&gt; Parameters: 1(String)
2018-07-01 17:23:39,734 [main] [com.zpc.mybatis.dao.UserMapper.queryUserById]-[DEBUG] &lt;==      Total: 1
User{id='1', userName='bigGod222', password='123456', name='美女', age=20, sex=1, birthday='2018-07-01', created='2018-07-01 13:35:40.0', updated='2018-07-01 17:18:15.0'}
2018-07-01 17:23:39,743 [main] [org.apache.ibatis.transaction.jdbc.JdbcTransaction]-[DEBUG] Closing JDBC Connection [com.mysql.jdbc.JDBC4Connection@7cbd213e]
2018-07-01 17:23:39,744 [main] [org.apache.ibatis.datasource.pooled.PooledDataSource]-[DEBUG] Returned connection 2092769598 to pool.
2018-07-01 17:23:39,746 [main] [com.zpc.mybatis.dao.UserMapper]-[DEBUG] Cache Hit Ratio [com.zpc.mybatis.dao.UserMapper]: 0.5
User{id='1', userName='bigGod222', password='123456', name='美女', age=20, sex=1, birthday='2018-07-01', created='2018-07-01 13:35:40.0', updated='2018-07-01 17:18:15.0'}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li></ul> 
<p>关闭二级缓存：<br> 不开启，或者在全局的mybatis-config.xml 中去关闭二级缓存<br> <img src="https://images2.imgbox.com/2d/ff/cdSXnYsb_o.png" alt="这里写图片描述"></p> 
<pre class="prettyprint"><code class="has-numbering">&lt;settings&gt;
    &lt;!--开启驼峰匹配--&gt;
    &lt;setting name="mapUnderscoreToCamelCase" value="true"/&gt;
    &lt;!--开启二级缓存,全局总开关，这里关闭，mapper中开启了也没用--&gt;
    &lt;setting name="cacheEnabled" value="false"/&gt;
&lt;/settings&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p><img src="https://images2.imgbox.com/c4/55/aAcvIJ3S_o.png" alt="这里写图片描述"></p> 
<h4><a id="12_1741" target="_blank"></a>12.高级查询</h4> 
<h5><a id="121_1742" target="_blank"></a>12.1.表关系说明</h5> 
<p><img src="https://images2.imgbox.com/aa/56/JlF3odMx_o.png" alt="这里写图片描述"><br> 创建order表：<br> CREATE TABLE <code>tb_order</code> (<br> <code>id</code> int(11) NOT NULL AUTO_INCREMENT,<br> <code>user_id</code> int(11) DEFAULT NULL,<br> <code>order_number</code> varchar(255) DEFAULT NULL,<br> <code>create</code> datetime DEFAULT NULL,<br> <code>updated</code> datetime DEFAULT NULL,<br> PRIMARY KEY (<code>id</code>)<br> ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;</p> 
<pre class="prettyprint"><code class="has-numbering">public class Order {
    private Integer id;
    private Long userId;
    private String orderNumber;
    private Date created;
    private Date updated;
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li></ul> 
<p>需求说明：<br> <img src="https://images2.imgbox.com/b0/0b/trXrFHiu_o.png" alt="这里写图片描述"></p> 
<h5><a id="122_1767" target="_blank"></a>12.2.一对一查询</h5> 
<p>方法一：核心思想扩展Order对象，来完成映射<br> 新建OrderUser实体类继承Order：</p> 
<pre class="prettyprint"><code class="has-numbering">public class OrderUser extends Order {
    private String userName;
    private String password;
    private String name;
    private Integer age;
    private Integer sex;
    private Date birthday;
    private Date created;
    private Date updated;
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li></ul> 
<p>OrderMapper接口：</p> 
<pre class="prettyprint"><code class="has-numbering">public interface OrderMapper {
     OrderUser queryOrderUserByOrderNumber(@Param("number") String number);
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li></ul> 
<p>配置OrderMapper：</p> 
<pre class="prettyprint"><code class="has-numbering"> &lt;mapper namespace="com.zpc.mybatis.dao.OrderMapper"&gt;
    &lt;select id="queryOrderUserByOrderNumber" resultType="com.zpc.mybatis.pojo.OrderUser"&gt;
      select * from tb_order o left join tb_user u on o.user_id=u.id where o.order_number = #{number}
   &lt;/select&gt;
&lt;/mapper&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
<p>测试：</p> 
<pre class="prettyprint"><code class="has-numbering">@Test
public void queryOrderUserByOrderNumber() throws Exception {
    OrderUser orderUser = orderMapper.queryOrderUserByOrderNumber("201807010001");
    System.out.println(orderUser);
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
<p>方法二：面向对象的思想，在Order对象中添加User对象。</p> 
<p>在Order对象中添加User属性：</p> 
<pre class="prettyprint"><code class="has-numbering">public class Order {
    private Integer id;
    private Long userId;
    private String orderNumber;
    private Date created;
    private Date updated;
    private User user;
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li></ul> 
<p>接口：</p> 
<pre class="prettyprint"><code class="has-numbering">/**
 * 根据订单号查询订单用户的信息
 * @param number
 * @return
 */
Order queryOrderWithUserByOrderNumber(@Param("number") String number);
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>使用resultType不能完成自动映射，需要手动完成结果集映射resultMap：</p> 
<pre class="prettyprint"><code class="has-numbering"> &lt;resultMap id="OrderUserResultMap" type="com.zpc.mybatis.pojo.Order" autoMapping="true"&gt;
     &lt;id column="id" property="id"/&gt;
     &lt;!--association:完成子对象的映射--&gt;
     &lt;!--property:子对象在父对象中的属性名--&gt;
     &lt;!--javaType:子对象的java类型--&gt;
     &lt;!--autoMapping:完成子对象的自动映射，若开启驼峰，则按驼峰匹配--&gt;
     &lt;association property="user" javaType="com.zpc.mybatis.pojo.User" autoMapping="true"&gt;
         &lt;id column="user_id" property="id"/&gt;
     &lt;/association&gt;
 &lt;/resultMap&gt;
</code></pre> 
<p>&lt;select id=“queryOrderWithUserByOrderNumber” resultMap=“OrderUserResultMap”&gt;<br> select * from tb_order o left join tb_user u on o.user_id=<a href="http://u.id" rel="nofollow">u.id</a> where o.order_number = #{number}<br> &lt;/select&gt;<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li></ul> 
<p></p> 
<p>测试：</p> 
<pre class="prettyprint"><code class="has-numbering">@Test
public void queryOrderWithUserByOrderNumber() throws Exception {
    Order order = orderMapper.queryOrderWithUserByOrderNumber("201807010001");
    System.out.println(order.getUser());
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
<h5><a id="123_1851" target="_blank"></a>12.3.一对多查询</h5> 
<p>一对多查询：查询订单，查询出下单人信息并且查询出订单详情。</p> 
<p>Order类：</p> 
<pre class="prettyprint"><code class="has-numbering">public class Order {
    private Integer id;
    private Long userId;
    private String orderNumber;
    private Date created;
    private Date updated;
    private User user;
    private List&lt;OrderDetail&gt; detailList;
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li></ul> 
<pre class="prettyprint"><code class="has-numbering">public class OrderDetail {
    private Integer id;
    private Integer orderId;
    private Double totalPrice;
    private Integer status;
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>接口：</p> 
<pre class="prettyprint"><code class="has-numbering">/**
 * 根据订单号查询订单用户的信息及订单详情
 * @param number
 * @return
 */
Order queryOrderWithUserAndDetailByOrderNumber(@Param("number") String number);
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>Mapper映射：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;resultMap id="OrderUserDetailResultMap" type="com.zpc.mybatis.pojo.Order" autoMapping="true"&gt;
    &lt;id column="id" property="id"/&gt;
    &lt;!--collection:定义子对象集合映射--&gt;
    &lt;!--association:完成子对象的映射--&gt;
    &lt;!--property:子对象在父对象中的属性名--&gt;
    &lt;!--javaType:子对象的java类型--&gt;
    &lt;!--autoMapping:完成子对象的自动映射，若开启驼峰，则按驼峰匹配--&gt;
    &lt;association property="user" javaType="com.zpc.mybatis.pojo.User" autoMapping="true"&gt;
        &lt;id column="user_id" property="id"/&gt;
    &lt;/association&gt;
    &lt;collection property="detailList" javaType="List" ofType="com.zpc.mybatis.pojo.OrderDetail" autoMapping="true"&gt;
        &lt;id column="id" property="id"/&gt;
    &lt;/collection&gt;
&lt;/resultMap&gt;
</code></pre> 
<p>&lt;select id=“queryOrderWithUserAndDetailByOrderNumber” resultMap=“OrderUserDetailResultMap”&gt;<br> select * from tb_order o<br> left join tb_user u on o.user_id=<a href="http://u.id" rel="nofollow">u.id</a><br> left join tb_orderdetail od on o.id=od.order_id<br> where o.order_number = #{number}<br> &lt;/select&gt;<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li></ul> 
<p></p> 
<p>测试：</p> 
<pre class="prettyprint"><code class="has-numbering">@Test
public void queryOrderWithUserAndDetailByOrderNumber() throws Exception {
    Order order = orderMapper.queryOrderWithUserAndDetailByOrderNumber("201807010001");
    System.out.println(order.getUser());
    System.out.println(order.getDetailList());
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<h5><a id="124_1916" target="_blank"></a>12.4.多对多查询</h5> 
<p>多对多查询：查询订单，查询出下单人信息并且查询出订单详情中的商品数据。</p> 
<p>OrderDetail类</p> 
<pre class="prettyprint"><code class="has-numbering">public class OrderDetail {
    private Integer id;
    private Integer orderId;
    private Double totalPrice;
    private Integer status;
    private Item item;
}
</code></pre> 
<p>public class Item {<!-- --><br> private Integer id;<br> private String itemName;<br> private Float itemPrice;<br> private String itemDetail;<br> }<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li></ul> 
<p></p> 
<p>接口：</p> 
<pre class="prettyprint"><code class="has-numbering">/**
 * 根据订单号查询订单用户的信息及订单详情及订单详情对应的商品信息
 * @param number
 * @return
 */
Order queryOrderWithUserAndDetailItemByOrderNumber(@Param("number") String number);
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>Mapper配置：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;resultMap id="OrderUserDetailItemResultMap" type="com.zpc.mybatis.pojo.Order" autoMapping="true"&gt;
    &lt;id column="id" property="id"/&gt;
    &lt;association property="user" javaType="com.zpc.mybatis.pojo.User" autoMapping="true"&gt;
        &lt;id column="user_id" property="id"/&gt;
    &lt;/association&gt;
    &lt;collection property="detailList" javaType="List" ofType="com.zpc.mybatis.pojo.OrderDetail" autoMapping="true"&gt;
        &lt;id column="detail_id" property="id"/&gt;
        &lt;association property="item" javaType="com.zpc.mybatis.pojo.Item" autoMapping="true"&gt;
            &lt;id column="item_id" property="id"/&gt;
        &lt;/association&gt;
    &lt;/collection&gt;
&lt;/resultMap&gt;
</code></pre> 
<p>&lt;select id=“queryOrderWithUserAndDetailItemByOrderNumber” resultMap=“OrderUserDetailItemResultMap”&gt;<br> select * ,<a href="http://od.id" rel="nofollow">od.id</a> as detail_id from tb_order o<br> left join tb_user u on o.user_id=<a href="http://u.id" rel="nofollow">u.id</a><br> left join tb_orderdetail od on o.id=od.order_id<br> left join tb_item i on od.item_id=<a href="http://i.id" rel="nofollow">i.id</a><br> where o.order_number = #{number}<br> &lt;/select&gt;<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li></ul> 
<p></p> 
<p>测试：</p> 
<pre class="prettyprint"><code class="has-numbering">@Test
public void queryOrderWithUserAndDetailItemByOrderNumber() throws Exception {
    Order order = orderMapper.queryOrderWithUserAndDetailItemByOrderNumber("201807010001");
    System.out.println(order);
    System.out.println(order.getUser());
    System.out.println(order.getDetailList());
}
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li></ul> 
<p>至此，目录结构如下：<br> <img src="https://images2.imgbox.com/b2/8d/rK286gXA_o.png" alt="这里写图片描述"><br> 数据库脚本：<br> CREATE TABLE <code>tb_order</code> (<br> <code>id</code> int(11) NOT NULL AUTO_INCREMENT,<br> <code>user_id</code> int(11) DEFAULT NULL,<br> <code>order_number</code> varchar(255) DEFAULT NULL,<br> <code>create</code> datetime DEFAULT NULL,<br> <code>updated</code> datetime DEFAULT NULL,<br> PRIMARY KEY (<code>id</code>)<br> ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;<br> INSERT INTO <code>tb_order</code> VALUES (‘1’, ‘2’, ‘201807010001’, ‘2018-07-01 19:38:35’, ‘2018-07-01 19:38:40’);</p> 
<p>CREATE TABLE <code>tb_item</code> (<br> <code>id</code> int(11) NOT NULL,<br> <code>itemName</code> varchar(255) DEFAULT NULL,<br> <code>itemPrice</code> decimal(10,2) DEFAULT NULL,<br> <code>itemDetail</code> varchar(255) DEFAULT NULL,<br> PRIMARY KEY (<code>id</code>)<br> ) ENGINE=InnoDB DEFAULT CHARSET=utf8;<br> INSERT INTO <code>tb_item</code> VALUES (‘1’, ‘袜子’, ‘29.90’, ‘香香的袜子’);<br> INSERT INTO <code>tb_item</code> VALUES (‘2’, ‘套子’, ‘99.99’, ‘冈本001’);</p> 
<p>CREATE TABLE <code>tb_orderdetail</code> (<br> <code>id</code> int(11) NOT NULL AUTO_INCREMENT,<br> <code>order_id</code> int(11) DEFAULT NULL,<br> <code>total_price</code> decimal(10,0) DEFAULT NULL,<br> <code>item_id</code> int(11) DEFAULT NULL,<br> <code>status</code> int(10) unsigned zerofill DEFAULT NULL COMMENT ‘0成功非0失败’,<br> PRIMARY KEY (<code>id</code>)<br> ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;<br> INSERT INTO <code>tb_orderdetail</code> VALUES (‘1’, ‘1’, ‘10000’, ‘1’, ‘0000000001’);<br> INSERT INTO <code>tb_orderdetail</code> VALUES (‘2’, ‘1’, ‘2000’, ‘2’, ‘0000000000’);</p> 
<h5><a id="125resultMap_2012" target="_blank"></a>12.5.resultMap的继承</h5> 
<p><img src="https://images2.imgbox.com/37/31/0CMUxDMe_o.png" alt="这里写图片描述"></p> 
<h5><a id="126_2014" target="_blank"></a>12.6.高级查询的整理</h5> 
<p>resutlType无法帮助我们自动的去完成映射，所以只有使用resultMap手动的进行映射<br> type 结果集对应的数据类型 id 唯一标识，被引用的时候，进行指定</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;resultMap type="Order" id="orderUserLazyResultMap"&gt;
&lt;!—定义pojo中的单个对象的 property 定义对象的属性名， javaType 属性的类型，
		&lt;association property="user" javaType="User" autoMapping="true"&gt;
			&lt;id /&gt;
		&lt;/association&gt;
&lt;!—如果属性是集合使用collection ,javaType 集合的类型，ofType 表示集中的存储的元素类型
		&lt;collection property="details" javaType="List" ofType="OrderDetail" autoMapping="true"&gt;
			&lt;id /&gt;
&lt;/resultMap&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li></ul> 
<h4><a id="13_2028" target="_blank"></a>13.延迟加载</h4> 
<p><img src="https://images2.imgbox.com/c8/44/zzcL6UtP_o.png" alt="这里写图片描述"><br> <img src="https://images2.imgbox.com/5d/79/DHNmQ76O_o.png" alt="这里写图片描述"><br> 编写接口：<br> <img src="https://images2.imgbox.com/7c/d0/w3mcVs7i_o.png" alt="这里写图片描述"><br> Mapper配置：<br> <img src="https://images2.imgbox.com/52/8f/uSSWpaxT_o.png" alt="这里写图片描述"><br> 测试：<br> <img src="https://images2.imgbox.com/be/2a/22FHuMqu_o.png" alt="这里写图片描述"><br> 结果：<br> <img src="https://images2.imgbox.com/73/8a/YERZB1cR_o.png" alt="这里写图片描述"></p> 
<p>开启延迟加载：<br> <img src="https://images2.imgbox.com/de/9e/iRyKzvU0_o.png" alt="这里写图片描述"><br> 修改测试用例：<br> <img src="https://images2.imgbox.com/e7/e3/D8iHT8Hb_o.png" alt="这里写图片描述"><br> 执行，报错：<br> <img src="https://images2.imgbox.com/90/c3/UvGbTa3v_o.png" alt="这里写图片描述"><br> 添加cglib：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;dependency&gt;
		&lt;groupId&gt;cglib&lt;/groupId&gt;
		&lt;artifactId&gt;cglib&lt;/artifactId&gt;
		&lt;version&gt;3.1&lt;/version&gt;
	&lt;/dependency&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
<p>执行：<br> <img src="https://images2.imgbox.com/41/b7/7xoN9DP5_o.png" alt="这里写图片描述"></p> 
<h4><a id="14sql_2057" target="_blank"></a>14.如果sql语句中出现’&lt;’的解决方案</h4> 
<h5><a id="1xml_2058" target="_blank"></a>1、使用xml中的字符实体</h5> 
<p><img src="https://images2.imgbox.com/1d/79/s8w0KCHQ_o.png" alt="这里写图片描述"><br> 因为业务，需要在mybatis中，使用到大于号，小于号，所以就在SQL中直接使用了。<br> <code>SELECT * FROM test WHERE 1 = 1 AND start_date &lt;= CURRENT_DATE AND end_date &gt;= CURRENT_DATE</code><br> 可是，在执行时，总报错误：<br> ```Error creating document instance. Cause: org.xml.sax.SAXParseException; lineNumber: 74; columnNumber: 17; ``元素内容必须由格式正确的字符数据或标记组成。<br> 把AND start_date &gt;= CURRENT_DATE AND end_date &lt;= CURRENT_DATE去掉，就没有问题，所以确定是因为大于号，小于号引起的问题。</p> 
<p>于是就想到了特殊符号，于是用了转义字符把&gt;和&lt;替换掉，然后就没有问题了。<br> <code>SELECT * FROM test WHERE 1 = 1 AND start_date &lt;= CURRENT_DATE AND end_date &gt;= CURRENT_DATE</code><br> 案例：</p> 
<pre class="prettyprint"><code class="has-numbering">1.&lt;if test="startDateTime!=null"&gt; and mm.ttime &gt; to_date(#{startDateTime},'yyyy-mm-dd hh24:mi:ss')&lt;/if&gt;  
2.&lt;if test="endDateTime!=null"&gt; and mm.ttime &lt;= to_date(#{endDateTime},'yyyy-mm-dd hh24:mi:ss')&lt;/if&gt;  
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li></ul> 
<h5><a id="2CDATA___2074" target="_blank"></a>2、使用<code>&lt;![CDATA[ &lt; ]]&gt;</code></h5> 
<p>案例1：</p> 
<pre class="prettyprint"><code class="has-numbering">1.&lt;![CDATA[ 
2.       and mm.ttime &gt; to_date(#{startDateTime},'yyyy-mm-dd hh24:mi:ss') 
3.       and mm.ttime &lt;= to_date(#{endDateTime},'yyyy-mm-dd hh24:mi:ss') 
4.]]&gt;  
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li></ul> 
<p>案例2：</p> 
<p>mapper文件示例代码 ：</p> 
<pre class="prettyprint"><code class="has-numbering">and (t1.status &lt;![CDATA[ &gt;= ]]&gt; 1  and  t1.status &lt;![CDATA[ &lt;= ]]&gt; 2)
上述代码其实对应的sql：
and (t1.status &gt; =1 andt1.status &lt;= 2)
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li></ul> 
<p>注意：</p> 
<pre class="prettyprint"><code class="has-numbering">使用&lt;![CDATA[ ]]&gt;标记的sql语句中的&lt;where&gt; &lt;if&gt;等标签不会被解析。
</code>
 
 </pre><ul class="pre-numbering"><li>1</li></ul> 
<h4><a id="15Spring_Mybatis_2094" target="_blank"></a>15.Spring 集成Mybatis</h4> 
<h5><a id="151springMybatis_2095" target="_blank"></a>15.1引入spring和Mybatis相关依赖</h5> 
<p>pom.xml</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;!--数据库连接池--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;druid&lt;/artifactId&gt;
    &lt;version&gt;1.1.8&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;
    &lt;version&gt;1.2.2&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
    &lt;version&gt;4.1.3.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--spring集成Junit测试--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-test&lt;/artifactId&gt;
    &lt;version&gt;4.1.3.RELEASE&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;!--spring容器--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
    &lt;version&gt;4.1.3.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
</code></pre> 
<p></p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li></ul> 
<p></p> 
<h5><a id="152spring_2130" target="_blank"></a>15.2配置spring配置文件</h5> 
<p>applicationContext-dao.xml</p> 
<pre class="prettyprint"><code class="has-numbering">
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd
   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"&gt;
</code><pre><code>&amp;lt;!-- 加载配置文件 --&amp;gt;
&amp;lt;context:property-placeholder location="classpath:properties/*.properties"/&amp;gt;
&amp;lt;!-- 数据库连接池 --&amp;gt;
&amp;lt;bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource"
      destroy-method="close"&amp;gt;
    &amp;lt;property name="driverClassName" value="${jdbc.driver}"/&amp;gt;
    &amp;lt;property name="url"
              value="jdbc:mysql://${jdbc.host}:3306/${jdbc.database}?useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;zeroDateTimeBehavior=convertToNull"/&amp;gt;
    &amp;lt;property name="username" value="${jdbc.userName}"/&amp;gt;
    &amp;lt;property name="password" value="${jdbc.passWord}"/&amp;gt;
    &amp;lt;!-- 初始化连接大小 --&amp;gt;
    &amp;lt;property name="initialSize" value="${jdbc.initialSize}"&amp;gt;&amp;lt;/property&amp;gt;
    &amp;lt;!-- 连接池最大数据库连接数  0 为没有限制 --&amp;gt;
    &amp;lt;property name="maxActive" value="${jdbc.maxActive}"&amp;gt;&amp;lt;/property&amp;gt;
    &amp;lt;!-- 连接池最大的空闲连接数，这里取值为20，表示即使没有数据库连接时依然可以保持20空闲的连接，而不被清除，随时处于待命状态 0 为没有限制 --&amp;gt;
    &amp;lt;property name="maxIdle" value="${jdbc.maxIdle}"&amp;gt;&amp;lt;/property&amp;gt;
    &amp;lt;!-- 连接池最小空闲 --&amp;gt;
    &amp;lt;property name="minIdle" value="${jdbc.minIdle}"&amp;gt;&amp;lt;/property&amp;gt;
    &amp;lt;!--最大建立连接等待时间。如果超过此时间将接到异常。设为-1表示无限制--&amp;gt;
    &amp;lt;property name="maxWait" value="${jdbc.maxWait}"&amp;gt;&amp;lt;/property&amp;gt;
&amp;lt;/bean&amp;gt;

&amp;lt;!-- spring和MyBatis完美整合 --&amp;gt;
&amp;lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&amp;gt;
    &amp;lt;property name="dataSource" ref="dataSource"/&amp;gt;
    &amp;lt;!-- 自动扫描mapping.xml文件 --&amp;gt;
    &amp;lt;property name="mapperLocations" value="classpath:mappers/*.xml"&amp;gt;&amp;lt;/property&amp;gt;
    &amp;lt;!--如果mybatis-config.xml没有特殊配置也可以不需要下面的配置--&amp;gt;
    &amp;lt;property name="configLocation" value="classpath:mybatis-config.xml" /&amp;gt;
&amp;lt;/bean&amp;gt;

&amp;lt;!-- DAO接口所在包名，Spring会自动查找其下的类 --&amp;gt;
&amp;lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&amp;gt;
    &amp;lt;property name="basePackage" value="com.zpc.mybatis.dao"/&amp;gt;
    &amp;lt;property name="sqlSessionFactoryBeanName" value="sqlSessionFactory"&amp;gt;&amp;lt;/property&amp;gt;
&amp;lt;/bean&amp;gt;

&amp;lt;!-- (事务管理)transaction manager --&amp;gt;
&amp;lt;bean id="transactionManager"
      class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&amp;gt;
    &amp;lt;property name="dataSource" ref="dataSource"/&amp;gt;
&amp;lt;/bean&amp;gt;
</code></pre>
</pre> 
<p>&lt;/beans&gt;<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li><li>41</li><li>42</li><li>43</li><li>44</li><li>45</li><li>46</li><li>47</li><li>48</li><li>49</li><li>50</li><li>51</li><li>52</li><li>53</li></ul> 
<p></p> 
<p>db.properties</p> 
<pre class="prettyprint"><code class="has-numbering">jdbc.driver=com.mysql.jdbc.Driver
jdbc.host=localhost
jdbc.database=ssmdemo
jdbc.userName=root
jdbc.passWord=123456
jdbc.initialSize=0
jdbc.maxActive=20
jdbc.maxIdle=20
jdbc.minIdle=1
jdbc.maxWait=1000
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li></ul> 
<p>由于applicationContext-dao.xml中配置了Mapper接口扫描，所以删除mybatis-config.xml中的配置，否则报<strong>已映射</strong>错误：<br> Caused by: org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: java.lang.IllegalArgumentException: Mapped Statements collection <strong>already contains value</strong> for MyMapper.selectUser<br> 删除mybatis-config.xml中的映射配置：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;!--&lt;mappers&gt;--&gt;
    &lt;!--&lt;mapper resource="mappers/MyMapper.xml"/&gt;--&gt;
    &lt;!--&lt;mapper resource="mappers/UserDaoMapper.xml"/&gt;--&gt;
    &lt;!--&lt;mapper resource="mappers/UserMapper.xml"/&gt;--&gt;
    &lt;!--&lt;mapper resource="mappers/OrderMapper.xml"/&gt;--&gt;
&lt;!--&lt;/mappers&gt;--&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>或者在构建sqlSessionFactory时不配置mybatis-config.xml也行：</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;!-- spring和MyBatis完美整合 --&gt;
&lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&gt;
    &lt;property name="dataSource" ref="dataSource"/&gt;
    &lt;!-- 自动扫描mapping.xml文件 --&gt;
    &lt;property name="mapperLocations" value="classpath:mappers/*.xml"&gt;&lt;/property&gt;
    &lt;!--如果mybatis-config.xml没有特殊配置也可以不需要下面的配置--&gt;
    &lt;!--&lt;property name="configLocation" value="classpath:mybatis-config.xml" /&gt;--&gt;
&lt;/bean&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li></ul> 
<h5><a id="153__2229" target="_blank"></a>15.3 测试</h5> 
<p>UserMapperSpringTest.java</p> 
<pre class="prettyprint"><code class="has-numbering">import com.zpc.mybatis.dao.UserMapper;
import com.zpc.mybatis.pojo.User;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import java.io.InputStream;
import java.util.Date;
import java.util.List;
</code></pre> 
<p>//目标：测试一下spring的bean的某些功能<br> @RunWith(SpringJUnit4ClassRunner.class)//junit整合spring的测试//立马开启了spring的注解<br> @ContextConfiguration(locations=“classpath:spring/applicationContext-*.xml”)//加载核心配置文件，自动构建spring容器<br> public class UserMapperSpringTest {<!-- --></p> 
<pre><code>@Autowired
private UserMapper userMapper;

@Test
public void testQueryUserByTableName() {
    List&amp;lt;User&amp;gt; userList = this.userMapper.queryUserByTableName("tb_user");
    for (User user : userList) {
        System.out.println(user);
    }
}

@Test
public void testLogin() {
    System.out.println(this.userMapper.login("hj", "123456"));
}

@Test
public void testQueryUserById() {
    System.out.println(this.userMapper.queryUserById("1"));
    User user = new User();
    user.setName("美女");
    user.setId("1");
    userMapper.updateUser(user);

    System.out.println(this.userMapper.queryUserById("1"));
}

@Test
public void testQueryUserAll() {
    List&amp;lt;User&amp;gt; userList = this.userMapper.queryUserAll();
    for (User user : userList) {
        System.out.println(user);
    }
}

@Test
public void testInsertUser() {
    User user = new User();
    user.setAge(20);
    user.setBirthday(new Date());
    user.setName("大神");
    user.setPassword("123456");
    user.setSex(2);
    user.setUserName("bigGod222");
    this.userMapper.insertUser(user);
    System.out.println(user.getId());
}

@Test
public void testUpdateUser() {
    User user = new User();
    user.setBirthday(new Date());
    user.setName("静静");
    user.setPassword("123456");
    user.setSex(0);
    user.setUserName("Jinjin");
    user.setId("1");
    this.userMapper.updateUser(user);
}

@Test
public void testDeleteUserById() {
    this.userMapper.deleteUserById("1");
}

@Test
public void testqueryUserList() {
    List&amp;lt;User&amp;gt; users = this.userMapper.queryUserList(null);
    for (User user : users) {
        System.out.println(user);
    }
}

@Test
public void queryUserListByNameAndAge() throws Exception {
    List&amp;lt;User&amp;gt; users = this.userMapper.queryUserListByNameAndAge("鹏程", 20);
    for (User user : users) {
        System.out.println(user);
    }
}

@Test
public void queryUserListByNameOrAge() throws Exception {
    List&amp;lt;User&amp;gt; users = this.userMapper.queryUserListByNameOrAge(null, 16);
    for (User user : users) {
        System.out.println(user);
    }
}

@Test
public void queryUserListByIds() throws Exception {
    List&amp;lt;User&amp;gt; users = this.userMapper.queryUserListByIds(new String[]{"5", "2"});
    for (User user : users) {
        System.out.println(user);
    }
}
</code></pre> 
<p></p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li><li>41</li><li>42</li><li>43</li><li>44</li><li>45</li><li>46</li><li>47</li><li>48</li><li>49</li><li>50</li><li>51</li><li>52</li><li>53</li><li>54</li><li>55</li><li>56</li><li>57</li><li>58</li><li>59</li><li>60</li><li>61</li><li>62</li><li>63</li><li>64</li><li>65</li><li>66</li><li>67</li><li>68</li><li>69</li><li>70</li><li>71</li><li>72</li><li>73</li><li>74</li><li>75</li><li>76</li><li>77</li><li>78</li><li>79</li><li>80</li><li>81</li><li>82</li><li>83</li><li>84</li><li>85</li><li>86</li><li>87</li><li>88</li><li>89</li><li>90</li><li>91</li><li>92</li><li>93</li><li>94</li><li>95</li><li>96</li><li>97</li><li>98</li><li>99</li><li>100</li><li>101</li><li>102</li><li>103</li><li>104</li><li>105</li><li>106</li><li>107</li><li>108</li><li>109</li><li>110</li><li>111</li><li>112</li><li>113</li><li>114</li><li>115</li><li>116</li><li>117</li><li>118</li></ul> 
<p></p> 
<p>目录结构：<br> <img src="https://images2.imgbox.com/de/e7/6lccNepI_o.png" alt="这里写图片描述"></p> 
<h4><a id="16SpringBoot_Mybatis_2353" target="_blank"></a>16.SpringBoot 集成Mybatis</h4> 
<p>请参见博文：<a href="https://blog.csdn.net/hellozpc/article/details/82531834" rel="nofollow noopener noreferrer" target="_blank">https://blog.csdn.net/hellozpc/article/details/82531834</a></p> 
<h4><a id="17Mybatis_Generator_2356" target="_blank"></a>17.Mybatis Generator的使用</h4> 
<ul><li>MyBatis Generator（MBG）是MyBatis 和iBATIS的代码生成器。可以生成简单CRUD操作的XML配置文件、Mapper文件(DAO接口)、实体类。实际开发中能够有效减少程序员的工作量，甚至不用程序员手动写sql。<br> mybatis-generator有多种用法：命令行、maven插件等。命令行方式通常要把相关jar包下载到本地，再使用java -jar 运行。方便起见，本文演示使用maven插件的方式。</li></ul> 
<p>1.新建一个Maven项目(可以直接建立一个初始的springboot项目)<br> pom文件引入mybatis-generator-maven-plugin<br> <img src="https://images2.imgbox.com/73/ba/CAgCSGlN_o.png" alt="今天失恋了"></p> 
<pre class="prettyprint"><code class="has-numbering">&lt;!-- mybatis-generator自动生成代码插件 --&gt;
&lt;plugin&gt;
   &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;
   &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;
   &lt;version&gt;1.3.5&lt;/version&gt;
&lt;/plugin&gt;
</code>
 
 </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul> 
<p>2.将插件需要的配置文件拷入到resource目录下，并做配置<br> <img src="https://images2.imgbox.com/3d/e6/FcTdnfrU_o.png" alt="在这里插入图片描述"><br> generator.properties：配置数据库信息,在generatorConfig.xml使用：</p> 
<pre class="prettyprint"><code class="has-numbering">#generatorConfig Info
generator.location=D:\\software\\maven\\apache-maven-3.3.9\\repository\\mysql\\mysql-connector-java\\5.1.32\\mysql-connector-java-5.1.32.jar
generator.targetPackage=com.zpc.videoshow.generated
#gererator.schema=oracle-schema
gererator.tableName=video_info
gererator.domainObjectName=VideoInfo
</code></pre> 
<p>jdbc.driver=com.mysql.jdbc.Driver<br> jdbc.host=jdbc:mysql://localhost:3306/videoshow<br> jdbc.userName=root<br> jdbc.passWord=123456<br> jdbc.initialSize=0<br> jdbc.maxActive=20<br> jdbc.maxIdle=20<br> jdbc.minIdle=1<br> jdbc.maxWait=1000<br> </p> 
<ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li></ul> 
<p></p> 
<p>generatorConfig.xml：配置generator插件运行需要的参数信息</p> 
<pre class="prettyprint"><code class="has-numbering">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE generatorConfiguration PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;
&lt;generatorConfiguration&gt;
    &lt;!-- 引入配置文件 --&gt;
    &lt;properties resource="generator.properties"/&gt;
    &lt;!-- 数据库驱动包位置,路径请不要有中文--&gt;
    &lt;!-- &lt;classPathEntry location="D:\software\lib\mysql-connector-java-5.1.21.jar" /&gt; --&gt;
    &lt;classPathEntry location="${generator.location}"/&gt;
    &lt;!-- 一个数据库一个context--&gt;
    &lt;context id="DB2Tables" targetRuntime="MyBatis3"&gt;
        &lt;!-- 生成的pojo，将implements Serializable --&gt;
        &lt;plugin 
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/47bec42803339d4611a266ac8e1c9042/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Kubernetes之ServiceAccount&#43;Secret（超详细汇总）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bd5ad4a5a90ac9ae7c91c6fa34f2790a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[详细]Oracle新建数据库实例、创建用户和表空间及添加“本地Net服务名”</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>