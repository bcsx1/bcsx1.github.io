<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Compose Desktop 初体验之踩坑 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Compose Desktop 初体验之踩坑" />
<meta property="og:description" content="从 0 到 1 搞一个 Compose Desktop 版本的玩天气之踩坑 大家好，好久不见，接下来一段时间我会系统性地写一套关于 Compose Desktop 的文章，带大家从头到尾写一个桌面版的天气应用，并且打好包让别人也可以进行使用，接下来就开始吧！先来看下最终的实现效果吧！
视频
效果是不是挺好？哈哈哈！
其实作为一个安卓开发来说，当运行起第一个桌面版程序的时候内心突然感觉回到了最开始学习编程的时候，那种感觉就好像一个多年未见的老友对你说：久违了！特别是使用的技术还都是安卓开发的技术，只是有一些平台原因需要稍做修改的地方就能开发出一个完整的桌面版软件，内心还是非常激动，非常地有成就感，这种感觉太舒服了！
缘起 Compose 为什么会搞 Compose Desktop，这还得从 Jetpack Compose 说起：Google 从 2017 年开始立项开搞 Compose 到第一个正式版本用了四年的时间，那么久的时间，投入了那么多的人力，以及后面投入了大量经费宣传，无一不在告诉安卓开发者 Compose 很重要，这也是之后安卓开发的新方向！所以当第一个 alpha 版本的 Compose 出现的时候我就坐不住了，立马加上依赖尝试了下！刚开始写的时候感觉有点奇怪，毕竟从之前的开发模式变为了全新的声明式开发，但写了不到一周就感受到了 Compose 的优势，编写起来太快了，动画实现起来也太简单了，声明式编程也太方便了。。。。
其实 Compose Desktop 出现的也很早，Jetpack Compose 出来没多久它也就出来了，有很多同行在 Compose Desktop 出来第一个 alpha 版本的时候就开始研究，不过由于我是做安卓开发的，日常工作也不会涉及到桌面开发，况且 Compose Desktop 是 Jetbrains 开发的，并不 Google 开发的，毕竟是模仿 Jetpack Compose 的，未来两边的 API 都有可能对应不上，所以也就一直没有关注。
但是到后来转折点来了，公众号：《Android 开发者》在 2022 年 11 月 30 日早上发了一篇文章，名为：“Jetpack 更新一览 | 2022 Android 开发者峰会”，这篇文章的前半部分没有什么新鲜感，因为这些库我也一直在用，也经常关注着新版本和新功能，但看到文章最后的时候，里面有一段话是这么写的：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/f9173e121930f8955e30b2677bfd9548/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-18T10:12:55+08:00" />
<meta property="article:modified_time" content="2022-12-18T10:12:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Compose Desktop 初体验之踩坑</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0__1__Compose_Desktop__1"></a>从 0 到 1 搞一个 Compose Desktop 版本的玩天气之踩坑</h2> 
<p>大家好，好久不见，接下来一段时间我会系统性地写一套关于 <code>Compose Desktop</code> 的文章，带大家从头到尾写一个桌面版的天气应用，并且打好包让别人也可以进行使用，接下来就开始吧！先来看下最终的实现效果吧！</p> 
<p></p> 
<div class="csdn-video-box"> 
 <iframe id="vCRPf7iV-1671094909681" frameborder="0" src="https://live.csdn.net/v/embed/263193" allowfullscreen="true" data-mediaembed="csdn"></iframe> 
 <p>视频</p> 
</div> 
<p></p> 
<p>效果是不是挺好？哈哈哈！</p> 
<p>其实作为一个安卓开发来说，当运行起第一个桌面版程序的时候内心突然感觉回到了最开始学习编程的时候，那种感觉就好像一个多年未见的老友对你说：久违了！特别是使用的技术还都是安卓开发的技术，只是有一些平台原因需要稍做修改的地方就能开发出一个完整的桌面版软件，内心还是非常激动，非常地有成就感，这种感觉太舒服了！</p> 
<h3><a id="_Compose_13"></a>缘起 Compose</h3> 
<p>为什么会搞 <code>Compose Desktop</code>，这还得从 <code>Jetpack Compose</code> 说起：<code>Google</code> 从 2017 年开始立项开搞 <code>Compose</code> 到第一个正式版本用了四年的时间，那么久的时间，投入了那么多的人力，以及后面投入了大量经费宣传，无一不在告诉安卓开发者 <code>Compose</code> 很重要，这也是之后安卓开发的新方向！所以当第一个 <code>alpha</code> 版本的 <code>Compose</code> 出现的时候我就坐不住了，立马加上依赖尝试了下！刚开始写的时候感觉有点奇怪，毕竟从之前的开发模式变为了全新的声明式开发，但写了不到一周就感受到了 <code>Compose</code> 的优势，编写起来太快了，动画实现起来也太简单了，声明式编程也太方便了。。。。</p> 
<p>其实 <code>Compose Desktop</code> 出现的也很早，<code>Jetpack Compose</code> 出来没多久它也就出来了，有很多同行在 <code>Compose Desktop</code> 出来第一个 <code>alpha</code> 版本的时候就开始研究，不过由于我是做安卓开发的，日常工作也不会涉及到桌面开发，况且 <code>Compose Desktop</code> 是 <code>Jetbrains</code> 开发的，并不 <code>Google</code> 开发的，毕竟是模仿 <code>Jetpack Compose</code> 的，未来两边的 <code>API</code> 都有可能对应不上，所以也就一直没有关注。</p> 
<p>但是到后来转折点来了，公众号：《Android 开发者》在 2022 年 11 月 30 日早上发了一篇文章，名为：“<a href="https://mp.weixin.qq.com/s/-B5tT0na5BnwqMbrA53GOg" rel="nofollow">Jetpack 更新一览 | 2022 Android 开发者峰会</a>”，这篇文章的前半部分没有什么新鲜感，因为这些库我也一直在用，也经常关注着新版本和新功能，但看到文章最后的时候，里面有一段话是这么写的：</p> 
<blockquote> 
 <p>我们一直在尝试使 Jetbrains 的 Kotlin 多平台移动版支持跨平台共享代码。我们针对 Android 和 iOS 应用推出了实验性的 Collection 预览版和 DataStore 库。期待您的反馈！您可以查看相关博文，了解更多内容。</p> 
</blockquote> 
<p>这话说的，你们一直在尝试，<code>Jetpack Compose</code> 正式版都出来快一年半了！<code>Compose Desktop</code> 正式版也都一年多了！这么久怎么连点信都没有。。。不过好在现在有信了！<code>Google</code> 这也算放出了几个信号，也不知道我的理解是否正确😂：</p> 
<ol><li>他们也一直在关注 <code>Jetbrains</code> 的 <code>Compose Desktop</code></li><li>目前已经有两个 <code>Jetpack</code> 的库支持了 <code>Compose Desktop</code></li><li>后续也会将更多的 <code>Jetpack</code> 中的库支持 <code>Compose Desktop</code></li></ol> 
<h4><a id="_Flutter__29"></a>对标 Flutter ？</h4> 
<p><code>Flutter</code> 现在已经比较成熟了，它最大的优势就是跨平台，<code>Flutter</code> 虽然宣称的是原生的性能，一套代码多端实现，但其实对于跨平台来说一套代码并不能完全实现需求，肯定需要各种适配，只不过看框架适配的好与坏，<code>Compose Desktop</code> 也是如此，但 <code>Flutter</code> 的性能也只是媲美原生，而 <code>Compose</code> 就是原生啊！<code>Compose Desktop</code> 其实并不是和 <code>Flutter</code> 抢饭碗，它只是告诉广大安卓开发：你们并不需要学习安卓之外的东西就能开发各种设备上的应用！这也是 <code>Kotlin</code> 的辉煌，我个人认为这也是 <code>Jetbrains</code> 公司开发 <code>Compose Desktop</code> 的初衷。</p> 
<p>基于上面的分析，打开了 <code>Jetbrains</code> 的 <code>Compose Desktop</code> 的官网：<a href="https://www.jetbrains.com/zh-cn/lp/compose-desktop/" rel="nofollow">https://www.jetbrains.com/zh-cn/lp/compose-desktop/</a> ，也开始试着玩一玩桌面版的应用！</p> 
<h3><a id="_Compose_Desktop_35"></a>初探 Compose Desktop</h3> 
<p>我本来还想着使用 <code>Android Studio</code> 来使用 <code>Compose Desktop</code> 来着，结果打开 <code>Android Studio</code> 新建项目一看并没有找到创建 <code>Compose Desktop</code> 的入口，后来想想也对，<code>Android Studio</code> 嘛！本来就是为了构建 <code>Android</code> 项目的，并不是为了构建别的东西，对吧！（内心独白：可能是我自己没找到）</p> 
<p>那就使用 <code>IntelliJ Idea</code> 来看看吧，点击 New -&gt; Project 就会出现下面的页面：</p> 
<p><img src="https://images2.imgbox.com/15/1d/r7GOP4Uq_o.png" alt="在这里插入图片描述"><br> 选择 Kotlin 之后就可以看到右边有 <code>Compose Multiplatform</code> 的选项，里面有三种，第一种就是这段时间要搞的 <code>Compose Desktop</code> ，第二种就是多平台了，里面有 <code>Android</code> ，也有 <code>Compose Desktop</code> ，第三种是 <code>Compose Web</code> 。不得不说太强了！桌面、Web、移动端，<code>Compose</code> 一套搞定！目前 <code>IOS</code> 也支持了，不过这不是咱们要看的重点，还是来看 <code>Compose Desktop</code> 吧！接下来点击 Next ，之后选择配置项之后点击 Finish 后第一个 <code>Compose Desktop</code> 项目就创建好了！</p> 
<h4><a id="_44"></a>项目结构</h4> 
<p>接下来看下初始项目的结构吧：<br> <img src="https://images2.imgbox.com/25/14/siO1I4gA_o.png" alt="在这里插入图片描述"></p> 
<p>OK，有一个 Main.kt 文件，还有 build 和 settings 文件。下面咱们一个一个来看，先来看下 settings 文件吧：</p> 
<pre><code class="prism language-kotlin">pluginManagement <span class="token punctuation">{<!-- --></span>
    repositories <span class="token punctuation">{<!-- --></span>
        <span class="token function">google</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">gradlePluginPortal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">maven</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"https://maven.pkg.jetbrains.space/public/p/compose/dev"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
rootProject<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Demo"</span></span>
</code></pre> 
<p>嗯，这个很简单，放了依赖的仓库地址，还有项目的名称。</p> 
<p>接下来再来看下 build 文件：</p> 
<pre><code class="prism language-kotlin">plugins <span class="token punctuation">{<!-- --></span>
    <span class="token function">kotlin</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"jvm"</span></span><span class="token punctuation">)</span> version <span class="token string-literal singleline"><span class="token string">"1.5.31"</span></span>
    <span class="token function">id</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"org.jetbrains.compose"</span></span><span class="token punctuation">)</span> version <span class="token string-literal singleline"><span class="token string">"1.0.0"</span></span>
<span class="token punctuation">}</span>

dependencies <span class="token punctuation">{<!-- --></span>
    <span class="token function">implementation</span><span class="token punctuation">(</span>compose<span class="token punctuation">.</span>desktop<span class="token punctuation">.</span>currentOs<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

tasks<span class="token punctuation">.</span>withType<span class="token operator">&lt;</span>KotlinCompile<span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    kotlinOptions<span class="token punctuation">.</span>jvmTarget <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"11"</span></span>
<span class="token punctuation">}</span>

compose<span class="token punctuation">.</span><span class="token function">desktop</span> <span class="token punctuation">{<!-- --></span>
    application <span class="token punctuation">{<!-- --></span>
        mainClass <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"MainKt"</span></span>
        nativeDistributions <span class="token punctuation">{<!-- --></span>
            <span class="token function">targetFormats</span><span class="token punctuation">(</span>TargetFormat<span class="token punctuation">.</span>Dmg<span class="token punctuation">,</span> TargetFormat<span class="token punctuation">.</span>Msi<span class="token punctuation">,</span> TargetFormat<span class="token punctuation">.</span>Deb<span class="token punctuation">)</span>
            packageName <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Demo"</span></span>
            packageVersion <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"1.0.0"</span></span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>build 文件中稍微多点，分别是 plugins 、dependencies 、jvmTarget 和 application ，前几个就不过多介绍，因为安卓项目中都有，最后的 application 是这里独有的，其实这块就是对桌面项目的一些属性的配置，可以看到有包名和版本号等信息，这块在这里先不进行过多介绍，因为这块的内容很多，<code>Windows</code> 、<code>Mac</code> 、<code>Linux</code> 各个系统的配置都不太相同，在之后的文章中会着重来介绍，这里先跳过。</p> 
<h4><a id="_96"></a>初始代码</h4> 
<p>最后来看下 Main.kt 文件：</p> 
<pre><code class="prism language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token annotation builtin">@Preview</span>
<span class="token keyword">fun</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> text <span class="token keyword">by</span> remember <span class="token punctuation">{<!-- --></span> <span class="token function">mutableStateOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Hello, World!"</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    MaterialTheme <span class="token punctuation">{<!-- --></span>
        <span class="token function">Button</span><span class="token punctuation">(</span>onClick <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Hello, Desktop!"</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">Text</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> application <span class="token punctuation">{<!-- --></span>
    <span class="token function">Window</span><span class="token punctuation">(</span>onCloseRequest <span class="token operator">=</span> <span class="token operator">::</span>exitApplication<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>代码并不多，而且很熟悉，但也有不认识的地方。可以看到这里出现了 <code>Java</code> 中熟悉的 <code>Main</code> 方法，然后里面调用了一个 <code>application</code> 方法，在其中有一个可组合项 <code>Window</code> ，在里面调用了 <code>App</code> 可组合项。</p> 
<h4><a id="Application_123"></a>Application</h4> 
<p>可组合项咱们都是非常了解的，这块不太清楚的其实就是 <code>application</code> 和 <code>Window</code> ，因为这两个在之前 <code>Jetpack Compose</code> 中都是没有的，下面咱们就先来看看 <code>application</code> ：</p> 
<pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">application</span><span class="token punctuation">(</span>
    exitProcessOnExit<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> ApplicationScope<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit
<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">val</span> configureSwingGlobals <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"compose.application.configure.swing.globals"</span></span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string-literal singleline"><span class="token string">"true"</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>configureSwingGlobals<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">configureSwingGlobalsForCompose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    runBlocking <span class="token punctuation">{<!-- --></span>
        awaitApplication <span class="token punctuation">{<!-- --></span>
            <span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>exitProcessOnExit<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">exitProcess</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>application</code> 是 <code>Compose Desktop</code> 应用程序的入口点，这块需要注意的是：不要在这个函数中使用任何动画（例如，<code>withframamanos</code> 或 <code>animatefloatasstate</code> 等），因为底层的 <code>MonotonicFrameClock</code> 没有与任何显示同步，所以无法尽快地生成帧。</p> 
<p>方法一共接收两个参数，来分别看下：</p> 
<ul><li><strong>exitProcessOnExit</strong>：结束进程，默认为 true，在应用程序关闭后调用 <code>exitProcess(0) </code> ，<code>exitProcess</code> 加速进程退出（立即退出，而不是1-4秒）。如果为 false ，函数的执行将在应用程序退出后被解除阻塞（当最后一个窗口关闭，以及所有 LaunchedEffect 完成时）。</li><li><strong>content</strong>：放可组合项的，不做多介绍。</li></ul> 
<h4><a id="Window_154"></a>Window</h4> 
<p>下面再来看下可组合项 <code>Window</code> ：</p> 
<pre><code class="prism language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">Window</span><span class="token punctuation">(</span>
    onCloseRequest<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">,</span>
    state<span class="token operator">:</span> WindowState <span class="token operator">=</span> <span class="token function">rememberWindowState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    visible<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Untitled"</span></span><span class="token punctuation">,</span>
    icon<span class="token operator">:</span> Painter<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    undecorated<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    transparent<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    resizable<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    enabled<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    focusable<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    alwaysOnTop<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    onPreviewKeyEvent<span class="token operator">:</span> <span class="token punctuation">(</span>KeyEvent<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onKeyEvent<span class="token operator">:</span> <span class="token punctuation">(</span>KeyEvent<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> FrameWindowScope<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit
<span class="token punctuation">)</span>
</code></pre> 
<p><code>Window</code> 的代码有点多，这块咱们先不关心里面的具体实现，先来看看都有哪些功能。在当前 <code>Compose</code> 中组合成平台窗口。当 <code>Window</code> 进入组合成时，将创建一个新的平台窗口并接收焦点。当 <code>Window</code> 离开合成时，<code>Window</code> 将被释放并关闭。<code>Window</code> 的参数有点多，咱们分别来看下：</p> 
<ul><li><strong>onCloseRequest</strong>：当用户关闭窗口时将被调用的回调函数</li><li><strong>state</strong>：用于控制或观察窗口状态的状态对象</li><li><strong>visible</strong>：是否对用户可见</li><li><strong>title</strong>：窗口的名称</li><li><strong>icon</strong>：窗口的图标（<strong>和应用图标不同，完全两码事</strong>）</li><li><strong>undecorated</strong>：禁用或启用此窗口的装饰</li><li><strong>transparent</strong>：禁用或启用窗口透明度，需要注意：只有在窗口未装饰时才应该设置透明度，否则将引发异常</li><li><strong>resizable</strong>：用户是否可以调整窗口的大小</li><li><strong>enabled</strong>：窗口是否能对输入事件作出反应</li><li><strong>focusable</strong>：窗口是否可以接收焦点</li><li><strong>alwaysOnTop</strong>：窗口是否在另一个窗口的顶部</li><li><strong>onPreviewKeyEvent</strong>：当用户与硬件键盘交互时调用此回调，它为聚焦组件的祖先提供了拦截<code>KeyEvent</code> 的机会</li><li><strong>onKeyEvent</strong>：当用户与硬件键盘交互时调用此回调。在实现此回调时，返回 true 以停止此事件的传播。如果返回 false，<code>KeyEvent</code> 将被发送给这个 <code>onKeyEvent</code> 的父事件。</li></ul> 
<h4><a id="_194"></a>第一次运行</h4> 
<p>OK，到现在位置初始项目中的内容大概都过了一遍，接下来运行看下效果吧！</p> 
<p>那么问题又来了，怎么运行呢。。。之前咱们运行安卓项目的时候都是点击 <code>Android Studio</code> 上方运行，但现在看下：</p> 
<p><img src="https://images2.imgbox.com/57/97/KHFp8bDQ_o.png" alt="在这里插入图片描述"></p> 
<p>没有了，灰着的！不用担心，不还有 main 函数呢嘛！直接运行 main 函数！</p> 
<p><img src="https://images2.imgbox.com/01/d3/S7bsZKRS_o.png" alt="在这里插入图片描述"></p> 
<p>点击运行按钮看下：</p> 
<p><img src="https://images2.imgbox.com/af/e9/ZUy3X9DK_o.png" alt="在这里插入图片描述"></p> 
<p>直接弹出了一个<code> Java</code> 程序，里面放着一个按钮，刚才咱们看可组合项 <code>Window</code> 的时候不是可以修改名字嘛，下面修改下看看！</p> 
<pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> application <span class="token punctuation">{<!-- --></span>
    <span class="token function">Window</span><span class="token punctuation">(</span>onCloseRequest <span class="token operator">=</span> <span class="token operator">::</span>exitApplication<span class="token punctuation">,</span> title <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"天青色等烟雨"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>改了下名字，第二次运行的时候可以点击 main 函数，也可以点击 <code>Idea</code> 的上方运行按钮了，因为刚才运行的记录已经被保存下来了！</p> 
<p><img src="https://images2.imgbox.com/25/78/XgJQa4YV_o.png" alt="在这里插入图片描述"></p> 
<p>OK，点击运行查看结果：</p> 
<p><img src="https://images2.imgbox.com/10/98/fuAO7ejt_o.png" alt=""></p> 
<p>没错，和想的一样！</p> 
<p>到现在为止已经可以使用咱们之前学习的 <code>Jetpack Compose</code> 知识来愉快的编程了！</p> 
<h3><a id="_237"></a>显示图片</h3> 
<p>刚还想的可以好好使用 <code>Compose</code> 来编写桌面程序来着，可我刚想显示一张图片就发现了问题！怎么显示？？？</p> 
<h4><a id="_241"></a>普通图片</h4> 
<p>在 <code>Jetpack Compose</code> 中显示图片不叫事，直接使用 <code>painterResource</code> 将图片资源传进去就可以了，但在 <code>Compose Desktop</code> 中该怎么办呢？</p> 
<p>先来看下 <code>Compose Desktop</code> 中的 <code>Image</code> ：</p> 
<pre><code class="prism language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">Image</span><span class="token punctuation">(</span>
    painter<span class="token operator">:</span> Painter<span class="token punctuation">,</span>
    contentDescription<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">,</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    alignment<span class="token operator">:</span> Alignment <span class="token operator">=</span> Alignment<span class="token punctuation">.</span>Center<span class="token punctuation">,</span>
    contentScale<span class="token operator">:</span> ContentScale <span class="token operator">=</span> ContentScale<span class="token punctuation">.</span>Fit<span class="token punctuation">,</span>
    alpha<span class="token operator">:</span> Float <span class="token operator">=</span> DefaultAlpha<span class="token punctuation">,</span>
    colorFilter<span class="token operator">:</span> ColorFilter<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">)</span> 
</code></pre> 
<p>可以看到和 <code>Jetpack Compose</code> 中是一致的，不同的就是如何在 <code>Compose Desktop</code> 中构建 <code>Painter</code> 。</p> 
<p>先来看一种构建的方式吧：</p> 
<pre><code class="prism language-kotlin"><span class="token function">BitmapPainter</span><span class="token punctuation">(</span><span class="token function">useResource</span><span class="token punctuation">(</span>resourcePath<span class="token punctuation">,</span> <span class="token operator">::</span>loadImageBitmap<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>这块的 <code>resourcePath</code> 指的是图片的路径，这个路径是如何定义的呢？还记得上面创建完项目的初始结构么？里面有一个 <code>resource</code> 文件夹，这个文件夹就是根目录，比如 <code>resource</code> 文件夹中有一张图片“icon.png”，要构建这张图片的 <code>Painter</code> 就可以使用如下代码：</p> 
<pre><code class="prism language-kotlin"><span class="token function">BitmapPainter</span><span class="token punctuation">(</span><span class="token function">useResource</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"icon.png"</span></span><span class="token punctuation">,</span> <span class="token operator">::</span>loadImageBitmap<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>当然可以在 <code>resource</code> 中创建不同的文件夹来存放不同的资源，图片也是一样的。</p> 
<p>简单解释下这行代码吧，虽然看着就一行，其实使用到了好几个函数，首先说下 <code>useResource</code> ，它的作用是将传入的文件路径打开为 <code>InputStream</code> ，而 <code>loadImageBitmap</code> 函数是将 <code>InputStream</code> 转为 <code>ImageBitmap</code> ，最后通过使用 <code>BitmapPainter</code> 才构建出一个 <code>Painter</code> 。</p> 
<p>光说不练假把式！来整一张图片试下吧！</p> 
<pre><code class="prism language-kotlin"><span class="token function">Image</span><span class="token punctuation">(</span>painter <span class="token operator">=</span> <span class="token function">BitmapPainter</span><span class="token punctuation">(</span><span class="token function">useResource</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"image/icon.png"</span></span><span class="token punctuation">,</span> <span class="token operator">::</span>loadImageBitmap<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">"Test"</span></span><span class="token punctuation">)</span>
</code></pre> 
<p>由于我将图片放到 <code>resource</code> 中的 <code>image</code> 文件夹中，所以这块的路径做了一些修改，再来看下图片的目录吧：</p> 
<p><img src="https://images2.imgbox.com/c1/7c/sef8QWiS_o.png" alt="在这里插入图片描述"></p> 
<p>下面来运行看下效果！</p> 
<p><img src="https://images2.imgbox.com/95/a9/2xnnsemM_o.png" alt="在这里插入图片描述"></p> 
<p>OK，没问题，图片展示出来了！又向成功迈进了一步！！！</p> 
<h4><a id="SVG__296"></a>SVG 图片？</h4> 
<p>咱们现在在安卓中使用的图片大多改为了 SVG 格式的，体积又小且清晰，接下来按照相同的方式试一下，先放一张 SVG 格式的图片到刚才创建的 <code>image</code> 文件夹中：</p> 
<p><img src="https://images2.imgbox.com/7c/25/GGL178qy_o.png" alt="在这里插入图片描述"></p> 
<p>图片放好了，下面来修改下图片的路径：</p> 
<pre><code class="prism language-kotlin"><span class="token function">Image</span><span class="token punctuation">(</span>painter <span class="token operator">=</span> <span class="token function">BitmapPainter</span><span class="token punctuation">(</span><span class="token function">useResource</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"image/ic_launcher.svg"</span></span><span class="token punctuation">,</span> <span class="token operator">::</span>loadImageBitmap<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">"Test"</span></span><span class="token punctuation">)</span>
</code></pre> 
<p>再运行下程序！</p> 
<p><img src="https://images2.imgbox.com/60/80/1CC1p4bM_o.png" alt="在这里插入图片描述"></p> 
<p>额。。。刚不是还好好的嘛！这改了个图片格式就不行了？来看下报错信息吧！</p> 
<pre><code class="prism language-xml">Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: Failed to Image::makeFromEncoded
	at org.jetbrains.skia.Image$Companion.makeFromEncoded(Image.kt:139)
	at androidx.compose.ui.res.ImageResources_desktopKt.loadImageBitmap(ImageResources.desktop.kt:33)
	at MainKt$App$1.invoke(Main.kt:31)
	at MainKt$App$1.invoke(Main.kt:24)
</code></pre> 
<p>可以看到报了编码错误，这应该咋么搞？？？</p> 
<p><code>Compose Desktop</code> 早就为我们想到了：</p> 
<pre><code class="prism language-kotlin"><span class="token function">useResource</span><span class="token punctuation">(</span>resourcePath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token function">loadSvgPainter</span><span class="token punctuation">(</span>it<span class="token punctuation">,</span> <span class="token function">Density</span><span class="token punctuation">(</span><span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre> 
<p><code>Compose Desktop</code> 为我们提供了一个叫 <code>loadSvgPainter</code> 的函数，专门用来处理 SVG 图片，接下来使用下看看：</p> 
<pre><code class="prism language-kotlin"><span class="token function">Image</span><span class="token punctuation">(</span>painter <span class="token operator">=</span> <span class="token function">useResource</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"image/ic_launcher.svg"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token function">loadSvgPainter</span><span class="token punctuation">(</span>it<span class="token punctuation">,</span> <span class="token function">Density</span><span class="token punctuation">(</span><span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">"Test"</span></span><span class="token punctuation">)</span>
</code></pre> 
<p>使用也很简单，运行看下效果吧：</p> 
<p><img src="https://images2.imgbox.com/62/a4/ha4wsf5T_o.png" alt="在这里插入图片描述"></p> 
<p>嗯，没问题，正常展示！为了方便大家在 <code>Compose Desktop</code> 中使用图片，我写了一个构建 <code>Painter</code> 的函数：</p> 
<pre><code class="prism language-kotlin"><span class="token comment">/**
 * 构建Painter，为了图片使用
 * 
 * @param resourcePath 图片路径
 */</span>
<span class="token keyword">fun</span> <span class="token function">buildPainter</span><span class="token punctuation">(</span>resourcePath<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> Painter <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">val</span> painter<span class="token operator">:</span> Painter <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>resourcePath<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">".svg"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">useResource</span><span class="token punctuation">(</span>resourcePath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">loadSvgPainter</span><span class="token punctuation">(</span>it<span class="token punctuation">,</span> <span class="token function">Density</span><span class="token punctuation">(</span><span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>resourcePath<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">".png"</span></span><span class="token punctuation">)</span> <span class="token operator">||</span> resourcePath<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">".jpg"</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
        resourcePath<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">".jpeg"</span></span><span class="token punctuation">)</span> <span class="token operator">||</span> resourcePath<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">".webp"</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
        resourcePath<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">".PNG"</span></span><span class="token punctuation">)</span> <span class="token operator">||</span> resourcePath<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">".JPG"</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
        resourcePath<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">".JPEG"</span></span><span class="token punctuation">)</span> <span class="token operator">||</span> resourcePath<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">".WEBP"</span></span><span class="token punctuation">)</span> <span class="token operator">||</span> resourcePath<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">".ICO"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">BitmapPainter</span><span class="token punctuation">(</span><span class="token function">useResource</span><span class="token punctuation">(</span>resourcePath<span class="token punctuation">,</span> <span class="token operator">::</span>loadImageBitmap<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">throw</span> <span class="token function">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"resource is illegal argument"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> painter
<span class="token punctuation">}</span>
</code></pre> 
<p>这里并没有列举全所有的图片的后缀，但咱们一般使用到的都列举了出来，如果有特殊需求的话大家可以自己加上需要的后缀即可。</p> 
<h4><a id="_371"></a>柳暗花明</h4> 
<p>上面的一堆都是自己犯傻。。。其实 <code>Compose Desktop</code> 中也可以直接使用 <code>painterResource</code> 来构建图片。</p> 
<pre><code class="prism language-kotlin"><span class="token function">Image</span><span class="token punctuation">(</span>
    painter <span class="token operator">=</span> <span class="token function">painterResource</span><span class="token punctuation">(</span><span class="token function">getWeatherIcon</span><span class="token punctuation">(</span>dailyBean<span class="token punctuation">.</span>iconDay<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">""</span></span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre> 
<p><strong>哈哈哈，为什么要写上面的一大堆呢，是让大家体会下我当时写的时候的经历。。。（内心：我是不是太坏了，哈哈哈😂）</strong></p> 
<h4><a id="_383"></a>网络图片</h4> 
<p>在安卓中加载网络图片一般都会使用 <code>Glide</code> ，但 <code>Glide</code> 是依赖于安卓的，所以无法在 <code>Compose Desktop</code> 中使用，不过也没有必要，下面来看下如何在 <code>Compose Desktop</code> 中使用网络图片吧：</p> 
<pre><code class="prism language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">AsyncImage</span><span class="token punctuation">(</span>
    load<span class="token operator">:</span> <span class="token keyword">suspend</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> T<span class="token punctuation">,</span>
    painterFor<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Painter<span class="token punctuation">,</span>
    contentDescription<span class="token operator">:</span> String<span class="token punctuation">,</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    contentScale<span class="token operator">:</span> ContentScale <span class="token operator">=</span> ContentScale<span class="token punctuation">.</span>Fit<span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">val</span> image<span class="token operator">:</span> T<span class="token operator">?</span> <span class="token keyword">by</span> produceState<span class="token operator">&lt;</span>T<span class="token operator">?</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        value <span class="token operator">=</span> <span class="token function">withContext</span><span class="token punctuation">(</span>Dispatchers<span class="token punctuation">.</span>IO<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> IOException<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">null</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>image <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">Image</span><span class="token punctuation">(</span>
            painter <span class="token operator">=</span> <span class="token function">painterFor</span><span class="token punctuation">(</span>image<span class="token operator">!!</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            contentDescription <span class="token operator">=</span> contentDescription<span class="token punctuation">,</span>
            contentScale <span class="token operator">=</span> contentScale<span class="token punctuation">,</span>
            modifier <span class="token operator">=</span> modifier
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 加载网络图片 */</span>

<span class="token keyword">fun</span> <span class="token function">loadImageBitmap</span><span class="token punctuation">(</span>url<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> ImageBitmap <span class="token operator">=</span>
    <span class="token function">URL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">openStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buffered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token operator">::</span>loadImageBitmap<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">loadSvgPainter</span><span class="token punctuation">(</span>url<span class="token operator">:</span> String<span class="token punctuation">,</span> density<span class="token operator">:</span> Density<span class="token punctuation">)</span><span class="token operator">:</span> Painter <span class="token operator">=</span>
    <span class="token function">URL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">openStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buffered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span> <span class="token punctuation">{<!-- --></span> <span class="token function">loadSvgPainter</span><span class="token punctuation">(</span>it<span class="token punctuation">,</span> density<span class="token punctuation">)</span> <span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">loadXmlImageVector</span><span class="token punctuation">(</span>url<span class="token operator">:</span> String<span class="token punctuation">,</span> density<span class="token operator">:</span> Density<span class="token punctuation">)</span><span class="token operator">:</span> ImageVector <span class="token operator">=</span>
    <span class="token function">URL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">openStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buffered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span> <span class="token punctuation">{<!-- --></span> <span class="token function">loadXmlImageVector</span><span class="token punctuation">(</span><span class="token function">InputSource</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">,</span> density<span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre> 
<p>加载图片的方法有了，如何使用呢？</p> 
<pre><code class="prism language-kotlin"><span class="token function">AsyncImage</span><span class="token punctuation">(</span>
    load <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token function">loadImageBitmap</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"https://www.wanandroid.com/blogimgs/42da12d8-de56-4439-b40c-eab66c227a4b.png"</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    painterFor <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token function">BitmapPainter</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    contentDescription <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Sample"</span></span><span class="token punctuation">,</span>
    modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> 
<p>使用并不难，将图片的网址放进去即可，下面来运行看下效果吧：</p> 
<p><img src="https://images2.imgbox.com/a5/e8/Gs41jg8p_o.png" alt="在这里插入图片描述"></p> 
<p>还不错，图片显示得也挺快，大家可以试试！</p> 
<h3><a id="Retrofit_446"></a>网络请求—Retrofit</h3> 
<p>咱们要编写的天气应用肯定是需要网络请求的，这个项目中使用的是和风天气的免费 API，但问题来了，在 <code>Compose Desktop</code> 中要如何使用网络请求呢？</p> 
<p>难道要使用 <code>HttpURLConnection</code> 原生进行请求么？这根本不像一个安卓开发的风格啊！就算不能使用 <code>Retrofit</code> ，最不济也得使用 <code>OKHttp</code> 啊！那。。。在 <code>Compose Desktop</code> 中能使用这些安卓中的网络请求框架么？</p> 
<p>答案是能！为什么不能？这些框架又没有依赖安卓中的一些特定东西！对吧？</p> 
<p>说干就干！第一步当然还是添加依赖：</p> 
<pre><code class="prism language-kotlin">dependencies <span class="token punctuation">{<!-- --></span>
    <span class="token function">implementation</span><span class="token punctuation">(</span>compose<span class="token punctuation">.</span>desktop<span class="token punctuation">.</span>currentOs<span class="token punctuation">)</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"com.squareup.retrofit2:retrofit:2.9.0"</span></span><span class="token punctuation">)</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"com.squareup.retrofit2:converter-gson:2.9.0"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这代码是不是很熟悉？没错，在安卓项目中也是这么使用的啊！</p> 
<p>接下来和在安卓中的使用方法其实就是一样的了，协程也可以使用！</p> 
<pre><code class="prism language-kotlin"><span class="token keyword">object</span> ServiceCreator <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// 开发版</span>
    <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">val</span> BASE_URL <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"https://devapi.qweather.com/v7/"</span></span>
    <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">val</span> CONNECT_TIMEOUT <span class="token operator">=</span> <span class="token number">30L</span>
    <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">val</span> READ_TIMEOUT <span class="token operator">=</span> <span class="token number">10L</span>

    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">create</span><span class="token punctuation">(</span>url<span class="token operator">:</span> String <span class="token operator">=</span> BASE_URL<span class="token punctuation">)</span><span class="token operator">:</span> Retrofit <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">val</span> okHttpClientBuilder <span class="token operator">=</span> <span class="token function">OkHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">connectTimeout</span><span class="token punctuation">(</span>CONNECT_TIMEOUT<span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span>
            <span class="token function">readTimeout</span><span class="token punctuation">(</span>READ_TIMEOUT<span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token function">RetrofitBuild</span><span class="token punctuation">(</span>
            url <span class="token operator">=</span> url<span class="token punctuation">,</span>
            client <span class="token operator">=</span> okHttpClientBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            gsonFactory <span class="token operator">=</span> GsonConverterFactory<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">.</span>retrofit
    <span class="token punctuation">}</span>

    <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">create</span><span class="token punctuation">(</span>service<span class="token operator">:</span> Class<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>service<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>先构建了一个 <code>Retrofit</code> 对象，然后创建一个接口：</p> 
<pre><code class="prism language-kotlin"><span class="token keyword">interface</span> CityWeatherService <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 实时天气
     *
     * @param key 用户认证key
     * @param location 需要查询地区的LocationID或以英文逗号分隔的经度,纬度坐标
     * @param lang 多语言设置，默认中文
     *
     * 实时温度、体感温度、风力风向、相对湿度、大气压强、降水量、能见度、露点温度、云量等数据。
     */</span>
    <span class="token annotation builtin">@GET</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"weather/now"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">getWeatherNow</span><span class="token punctuation">(</span>
        <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"key"</span></span><span class="token punctuation">)</span> key<span class="token operator">:</span> String <span class="token operator">=</span> WEATHER_KEY<span class="token punctuation">,</span>
        <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"location"</span></span><span class="token punctuation">)</span> location<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"lang"</span></span><span class="token punctuation">)</span> lang<span class="token operator">:</span> String <span class="token operator">=</span> Lang<span class="token punctuation">.</span>ZH_HANS<span class="token punctuation">.</span>code
    <span class="token punctuation">)</span><span class="token operator">:</span> WeatherNowBean

<span class="token punctuation">}</span>
</code></pre> 
<p>这个没什么说的，接下来再创建一个调用的中间层：</p> 
<pre><code class="prism language-kotlin"><span class="token keyword">object</span> PlayWeatherNetwork <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">val</span> cityWeatherService <span class="token operator">=</span> ServiceCreator<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>CityWeatherService<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>

    <span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">getWeatherNow</span><span class="token punctuation">(</span>location<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> WeatherNowBean <span class="token operator">=</span>
        cityWeatherService<span class="token punctuation">.</span><span class="token function">getWeatherNow</span><span class="token punctuation">(</span>location <span class="token operator">=</span> location<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>OK，完事，最后调用下试试！</p> 
<pre><code class="prism language-kotlin"><span class="token function">LaunchedEffect</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">val</span> weatherNow <span class="token operator">=</span> PlayWeatherNetwork<span class="token punctuation">.</span><span class="token function">getWeatherNow</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"CN101010100"</span></span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"weatherNow:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">weatherNow</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行看结果！</p> 
<p>当然 <code>Window</code> 中显示还是刚才的截图，只不过这块打印出了网络请求的结果，来看下打印出的 Log 信息：</p> 
<pre><code class="prism language-kotlin">weatherNow<span class="token operator">:</span><span class="token function">WeatherNowBean</span><span class="token punctuation">(</span>fxLink<span class="token operator">=</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>hfx<span class="token punctuation">.</span>link<span class="token operator">/</span>2ax1<span class="token punctuation">,</span> code<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> refer<span class="token operator">=</span>model<span class="token punctuation">.</span><span class="token label symbol">Refer@</span>5a146688<span class="token punctuation">,</span> now<span class="token operator">=</span><span class="token function">NowBaseBean</span><span class="token punctuation">(</span>vis<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> temp<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> obsTime<span class="token operator">=</span><span class="token number">2022</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span>12T15<span class="token operator">:</span><span class="token number">56</span><span class="token operator">+</span><span class="token number">08</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">,</span> icon<span class="token operator">=</span><span class="token number">503</span><span class="token punctuation">,</span> wind360<span class="token operator">=</span><span class="token number">98</span><span class="token punctuation">,</span> windDir<span class="token operator">=</span>东风<span class="token punctuation">,</span> pressure<span class="token operator">=</span><span class="token number">1016</span><span class="token punctuation">,</span> feelsLike<span class="token operator">=</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> cloud<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> precip<span class="token operator">=</span><span class="token number">0.0</span><span class="token punctuation">,</span> dew<span class="token operator">=</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> humidity<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> text<span class="token operator">=</span>扬沙<span class="token punctuation">,</span> windSpeed<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">,</span> windScale<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> city<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span> updateTime<span class="token operator">=</span><span class="token number">2022</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span>12T16<span class="token operator">:</span><span class="token number">02</span><span class="token operator">+</span><span class="token number">08</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">)</span>
</code></pre> 
<p><code>WeatherNowBean</code> 就是网络请求的实体类，这块不做过多描述。</p> 
<p>通过这个小例子是为了告诉大家在 <code>Compose Desktop</code> 项目中也能使用咱们熟悉的 <code>Retrofit</code> ！大家知道这一点就够了！</p> 
<blockquote> 
 <p>这块我在写的时候还有一个小插曲，这块的实体类之前是直接复制和风天气开源项目中的，不是 <code>kotlin</code> 而是是 <code>java</code> 编写的，运行的时候就报错了，将实体类改为 <code>Kotlin</code> 后就能正常运行了。</p> 
</blockquote> 
<h3><a id="Jetpack__553"></a>Jetpack 库使用</h3> 
<p>刚才在上面提到了，我就是因为 <code>Google</code> 说 <code>Jetpack</code> 中的库之后会支持 <code>Compose Desktop</code> 才决定玩一玩 <code>Compose Desktop</code> 的，那肯定也要尝试使用下啊！</p> 
<p><code>Google</code> 目前只推出了两个库支持：<code>Collection</code> 和 <code>DataStore</code> ，<code>Collection</code> 目前使用不到，那就先来看看如何使用 <code>DataStore</code> 吧！</p> 
<p>第一步还是添加依赖：</p> 
<pre><code class="prism language-kotlin">dependencies <span class="token punctuation">{<!-- --></span>
  	<span class="token operator">..</span><span class="token operator">..</span><span class="token operator">..</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"androidx.datastore:datastore-preferences-core:1.1.0-dev01"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>其实 <code>DataStore</code> 的使用方法和之前在安卓中没有什么区别，唯一的区别就是创建的时候，先来看下在安卓中是如何创建 <code>DataStore</code> 的吧：</p> 
<pre><code class="prism language-kotlin"><span class="token keyword">val</span> Context<span class="token punctuation">.</span>dataStore<span class="token operator">:</span> DataStore<span class="token operator">&lt;</span>Preferences<span class="token operator">&gt;</span> <span class="token keyword">by</span> <span class="token function">preferencesDataStore</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"settings"</span></span><span class="token punctuation">)</span>
</code></pre> 
<p>这里用到了 <code>Context</code> ，这就是安卓中独有的，<code>Java</code> 中并没有啊，<code>Kotlin</code> 中也没有啊！那应该如何创建呢？</p> 
<pre><code class="prism language-kotlin"><span class="token keyword">val</span> dataStores <span class="token operator">=</span> PreferenceDataStoreFactory<span class="token punctuation">.</span><span class="token function">create</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">File</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token expression">System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"user.home"</span></span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/playWeatherData.preferences_pb"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>DataStore</code> 早就为我们考虑到了，使用 <code>PreferenceDataStoreFactory</code> 中的 <code>create</code> 方法就可以创建 <code>DataStore</code> 了。这块需要说明下 <code>System.getProperty("user.home")</code> ，这个获取的是用户 <code>home</code> 的路径，这块踩坑踩了很久，搞了大半天！最开始使用的是 <code>user.dir</code> ，这是项目 <code>work</code> 的目录，但是如果使用 <code>user.dir</code> 的话打包运行的话就会报错，说<strong>无法进行读写</strong>，所以修改为了 <code>"user.home"</code> 。其实还有一点也会报错，这块文件的后缀名一定得是 <code>preferences_pb</code> ，如果不写或修改为别的就会报错。这块帮助大家避下坑吧！</p> 
<p>剩下的使用方法就和安卓中一摸一样了！大家如果没有使用过的话可以看下我之前写 <code>DataStore</code> 的一篇文章：<a href="https://juejin.cn/post/6965672958165516295" rel="nofollow">再抱一抱DataStore</a> 。</p> 
<h3><a id="_586"></a>小结</h3> 
<p>本文从一个新建的 <code>Compose Desktop</code> 项目开始，列举了一些大家在开发过程中可能遇到的一些问题，提前帮助大家踩了踩坑，文中所有代码都在 <code>Github</code> 中，包括文章开始放的这回要编写的天气应用。</p> 
<p><code>Github</code> 地址：<a href="https://github.com/zhujiang521/PlayWeather/tree/desktop">https://github.com/zhujiang521/PlayWeather/tree/desktop</a></p> 
<p>如果文中写的有误，欢迎在评论区提出，咱们一起探讨。</p> 
<p>文章如果能帮助到大家，哪怕是一点，我也非常高兴，先这样。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5c2128e33941cb56221efad2c7f0c0a4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Compose Desktop 初体验之打包</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/47a34a9d6ce8f6ecb97788888b01c260/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JavaFX</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>