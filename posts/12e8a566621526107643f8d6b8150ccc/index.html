<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>UE5 C&#43;&#43; 斯坦福 Note1 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="UE5 C&#43;&#43; 斯坦福 Note1" />
<meta property="og:description" content="Class Hierarchy （类的层次结构） Object 所有虚幻实例(UObject)的基类√ Actor 可以被放置或生成在世界中的Object√ √ Pawn 可以被玩家或AI控制的Actor√ √ √ Character 包含步行移动组件的Pawn√ √ √ √ *Character 我们继承重写的C&#43;&#43;类 Class Prefixes （类的前缀） 虚幻引擎需要类始终保持前缀
U - 派生自UObject的类A - 派生自Actor的类F - 结构体E - 枚举I - 接口 BeginPlay 在Character刚被加载的时候首先调用
如果它被执行，那么它已经被完全加载，完全初始化，这是我们可以信赖的第一件事。
Tick 每一帧都会被调用，也传递了一个delta时间访问
相机组件 UCameraComponent
弹簧臂组件 USpringArmComponent
创建实例 CreateDefaultSubobject&lt;CLASSNAME&gt;(“TABNAME”)
其中CLASSNAME是实例的类型，TABNAME是它在编辑器中显示的名字
数据视图与完整蓝图编辑器 数据视图很难读懂正在发生的事情
蓝图读起来比较快
C&#43;&#43;层暴露组件，适当的显示出细节面板 设置弹簧臂正确的附着 弹簧臂 SetupAttachment(RootComponent)
RootComponent是层次结构中的第一个组件
设置相机正确的附着 相机 SetupAttachment(弹簧臂)
相机安装在弹簧臂上
因为我们想要角色和相机之间有一定的距离
Unreal Property System （虚幻资产系统） UPROPERTY，UFUNCTION，UCLASS，USTRUCT，UENUM（Unreal Macros 虚幻宏）
标记C&#43;&#43;类，用于像编辑这样的事情，蓝图访问，甚至对于网络行为。
定义你的代码应该在哪里运行，服务器还是在本地客户机上。
而且也是为了内存管理，将会用于追踪指针和一个对象的内存，" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/12e8a566621526107643f8d6b8150ccc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-24T14:36:50+08:00" />
<meta property="article:modified_time" content="2022-08-24T14:36:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">UE5 C&#43;&#43; 斯坦福 Note1</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Class_Hierarchy__0"></a>Class Hierarchy （类的层次结构）</h2> 
<ul><li>Object 所有虚幻实例(UObject)的基类</li><li>√ Actor 可以被放置或生成在世界中的Object</li><li>√ √ Pawn 可以被玩家或AI控制的Actor</li><li>√ √ √ Character 包含步行移动组件的Pawn</li><li>√ √ √ √ *Character 我们继承重写的C++类</li></ul> 
<h2><a id="Class_Prefixes__7"></a>Class Prefixes （类的前缀）</h2> 
<p>虚幻引擎需要类始终保持前缀</p> 
<ul><li>U - 派生自UObject的类</li><li>A - 派生自Actor的类</li><li>F - 结构体</li><li>E - 枚举</li><li>I - 接口</li></ul> 
<h2><a id="BeginPlay_16"></a>BeginPlay</h2> 
<p>在Character刚被加载的时候首先调用<br> 如果它被执行，那么它已经被完全加载，完全初始化，这是我们可以信赖的第一件事。</p> 
<h2><a id="Tick_20"></a>Tick</h2> 
<p>每一帧都会被调用，也传递了一个delta时间访问</p> 
<h2><a id="_23"></a>相机组件</h2> 
<p>UCameraComponent</p> 
<h2><a id="_26"></a>弹簧臂组件</h2> 
<p>USpringArmComponent</p> 
<h2><a id="_29"></a>创建实例</h2> 
<p>CreateDefaultSubobject&lt;<strong>CLASSNAME</strong>&gt;(“<strong>TABNAME</strong>”)<br> 其中CLASSNAME是实例的类型，TABNAME是它在编辑器中显示的名字</p> 
<h2><a id="_33"></a>数据视图与完整蓝图编辑器</h2> 
<p>数据视图很难读懂正在发生的事情<br> 蓝图读起来比较快</p> 
<h2><a id="C_37"></a>C++层暴露组件，适当的显示出细节面板</h2> 
<h2><a id="_39"></a>设置弹簧臂正确的附着</h2> 
<p>弹簧臂 SetupAttachment(RootComponent)</p> 
<p>RootComponent是层次结构中的第一个组件</p> 
<h2><a id="_44"></a>设置相机正确的附着</h2> 
<p>相机 SetupAttachment(弹簧臂)</p> 
<p>相机安装在弹簧臂上</p> 
<p>因为我们想要角色和相机之间有一定的距离</p> 
<h2><a id="Unreal_Property_System__51"></a>Unreal Property System （虚幻资产系统）</h2> 
<p><em><strong>UPROPERTY，UFUNCTION，UCLASS，USTRUCT，UENUM</strong></em>（Unreal Macros 虚幻宏）</p> 
<p>标记C++类，用于像编辑这样的事情，蓝图访问，甚至对于网络行为。</p> 
<p>定义你的代码应该在哪里运行，服务器还是在本地客户机上。</p> 
<p>而且也是为了内存管理，将会用于追踪指针和一个对象的内存，</p> 
<p>比如</p> 
<pre><code class="prism language-cpp"><span class="token function">UProperty</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">)</span> <span class="token comment">//它将在任何地方可见</span>
</code></pre> 
<h2><a id="_66"></a>玩家输入组件</h2> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">AMainCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">SetupPlayerInputComponent</span><span class="token punctuation">(</span>UInputComponent<span class="token operator">*</span> PlayerInputComponent<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">SetupPlayerInputComponent</span><span class="token punctuation">(</span>PlayerInputComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 加两个输入事件控制相机</span>
	<span class="token comment">// 轴运算</span>
	PlayerInputComponent <span class="token operator">-&gt;</span> <span class="token function">BindAxis</span><span class="token punctuation">(</span><span class="token string">"LookRight"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>AMainCharacter<span class="token double-colon punctuation">::</span>AddControllerYawInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerInputComponent <span class="token operator">-&gt;</span> <span class="token function">BindAxis</span><span class="token punctuation">(</span><span class="token string">"LookForward"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>AMainCharacter<span class="token double-colon punctuation">::</span>AddControllerPitchInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们其实有两个选择，BindAction和BindAxis<br> 在目前我们对绑定轴感兴趣，因为希望能够移动前进和倒退。</p> 
<p>我们可以联想一下，输入设备是GamePad的情况，拇指杆滑动，会在-1到1的区间里变化。</p> 
<p>在输入设备是键盘的情况下，它仅仅是按下Key和松开Key的问题（0,1 二值）。</p> 
<p>BindAxis 参数 (名称,接收输入对象,想要触发的函数)<br> 触发委托之后，会把名称传递给接收输入对象，传递一个需要被触发的函数</p> 
<h2><a id="_88"></a>移动函数</h2> 
<p>Character已经封装了一些函数，<br> 我们只需要说出往哪个方向走</p> 
<p>目前只需要前后左右四个方向，就可以用函数直接获取。<br> 再传递一个value 是一个-1到1的值</p> 
<pre><code class="prism language-cpp"><span class="token function">AddMovementInput</span><span class="token punctuation">(</span><span class="token function">GetActorForwardVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="_99"></a>绑定一个键</h2> 
<p>打开编辑器的项目设置，输入，绑定</p> 
<h2><a id="_102"></a>旋转函数</h2> 
<p>直接使用Pawn中提供的函数即可</p> 
<p>APawn::AddControllerYawInput</p> 
<p>在VS2019 IDE中 可以直接Ctrl+鼠标左键，跳转到对应函数，查看源码。</p> 
<blockquote> 
 <p>虚幻引擎的一个问题是，它有800万行的代码，检索代码是很慢的</p> 
</blockquote> 
<p>此处包含pitch、yaw、roll等知识点</p> 
<blockquote> 
 <p>Yaw 指的是水平旋转，pitch 指的是垂直旋转，roll 未知</p> 
</blockquote> 
<h2><a id="PlayerCharacter_115"></a>PlayerCharacter蓝图编辑</h2> 
<p>打开PlayerCharacter蓝图<br> 左上角会有<br> CapsuleComponent<br> ArrowComponent<br> Mesh<br> SpringArmComp （前面写的C++基类里的）<br> CameraComp （前面写的C++基类里的）<br> CharacterMovement</p> 
<h3><a id="Mesh_125"></a>选中Mesh进行模型更换</h3> 
<p>从detail页签可以随意修改模型引用路径</p> 
<p>可以在Transform里修改位置和朝向</p> 
<p>在Animation 选择Anim Class 动画蓝图或者动画C++基类</p> 
<p>动画的意义：看一下自己角色的状态（比如：移动速度有多快，哪个方向，是不是在做攻击之类的事情）并且融合各种姿势和动画，合成一个最终的姿势。</p> 
<p>Idle Pos 闲置状态。</p> 
<h2><a id="_136"></a>版本管理</h2> 
<p>git里面 可以看到修改了哪些文件，改动了哪些行</p> 
<h3><a id="uproject__139"></a>.uproject 文件</h3> 
<p>.uproject 文件 其实就是很像Json格式的明文字符串。</p> 
<p>下面是我打开了自己的一个项目的.uproject文件</p> 
<pre><code class="prism language-python"><span class="token punctuation">{<!-- --></span>
	<span class="token string">"FileVersion"</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
	<span class="token string">"EngineAssociation"</span><span class="token punctuation">:</span> <span class="token string">"{*******-****-****-****-*******}"</span><span class="token punctuation">,</span>
	<span class="token string">"Category"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
	<span class="token string">"Description"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
	<span class="token string">"Modules"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token string">"Name"</span><span class="token punctuation">:</span> <span class="token string">"UE5Build"</span><span class="token punctuation">,</span>
			<span class="token string">"Type"</span><span class="token punctuation">:</span> <span class="token string">"Runtime"</span><span class="token punctuation">,</span>
			<span class="token string">"LoadingPhase"</span><span class="token punctuation">:</span> <span class="token string">"Default"</span><span class="token punctuation">,</span>
			<span class="token string">"AdditionalDependencies"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
				<span class="token string">"Engine"</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"Plugins"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token string">"Name"</span><span class="token punctuation">:</span> <span class="token string">"ModelingToolsEditorMode"</span><span class="token punctuation">,</span>
			<span class="token string">"Enabled"</span><span class="token punctuation">:</span> true<span class="token punctuation">,</span>
			<span class="token string">"TargetAllowList"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
				<span class="token string">"Editor"</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="ConfigDefaultInputini_171"></a>Config/DefaultInput.ini</h3> 
<p>很多外部生成的内容，和我们自己绑定的输入。</p> 
<h3><a id="UEC_Git_174"></a>UEC++项目的 Git提交目录</h3> 
<p>/Config/<br> /Content/<br> /Source/<br> /.gitignore<br> /**.uproject<br> /README.md</p> 
<blockquote> 
 <p>.sln文件 会被.uproject编译的时候生成。</p> 
</blockquote> 
<p>GIT分析语言组成：C# 66.6% C++ 28.5% C 4.9%<br> C#主要是UBT和UHT自动生成的配置文件，占用较大。<br> C++是UObject类逻辑的主要实现地方，比C大一些。<br> C是UObject类的声明，不负责实现，占用最小。</p> 
<h2><a id="_189"></a>碰撞与物理学</h2> 
<p>每个Player都有一个PlayerController</p> 
<p>一旦他加入游戏，就会被分配到一个框架<br> 而且他会持有这个PlayerController直到他离开游戏或者地图被加载。</p> 
<p>这里PlayerController可能会控制一个Pawn，这个Pawn会死，也会重生，也会看到其他人死掉的Pawn。</p> 
<p>AI也是使用相似的类，AIController从Controller中驱动。</p> 
<h3><a id="_199"></a>通过控制器方向调整人物朝向</h3> 
<p>在PlayerCharacter蓝图中，勾选Pawn页签中的Use Controller Rotation</p> 
<p>把这个勾选去掉的话，移动鼠标旋转相机的同时，人物朝向不会再随着相机（实际上是关联的控制器）旋转了。</p> 
<p>再打开PlayerCharacter蓝图中的SpringComp，勾选CameraSettings页签中的Use Pawn Control Rotation</p> 
<p>把这个勾选去掉的话，移动鼠标旋转的同时，相机不会再随着关联的控制器旋转了。</p> 
<blockquote> 
 <p>这里的做法是为了可以让角色有机会看向相机，比如Dark Soul和Final Fantasy的运动机制。</p> 
</blockquote> 
<p>CharacterMovement的参数是十分庞大的，我们现在想把旋转定位到运动上，用最上方的快速搜索栏，搜索orient，找到Orient Rotation To Movement（定向旋转）</p> 
<p>这是一个小技巧，想要找CharaterMovement中是否存在这样的变量，就在蓝图中搜索吧，之后再去C++代码里编写修改这个值的地方。</p> 
<blockquote> 
 <p>编码规范，bool类型的变量前面要加b字母</p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token function">GetCharacterMovement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>bOrientRotationToMovement <span class="token operator">=</span> True<span class="token punctuation">;</span>
</code></pre> 
<p>这将使我们的Character旋转，我们目前正朝着什么方向移动。</p> 
<p>而不是只能向正面直直的移动，我们有侧面的移动。</p> 
<p>这时候Character的CPP报错了，因为我们在调用CharacterMovement类的函数，却没有对CharacterMovement的声明。</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"GameFramework/CharacterMovementComponent.h"</span></span>
</code></pre> 
<p>目前的效果是按下D会原地旋转，按下W会直直的向前走。</p> 
<p>对于前进的步伐，我们实际上想要的不是Pawn当前的方向，而是要向摄像机的方向移动。</p> 
<p>UE5默认的镜头方式其实是射击类游戏喜欢用的视角。</p> 
<p>现在我们要做的是类似黑魂、只狼、最终幻想之类的游戏。</p> 
<p>我们现在可以得到Controller的旋转，</p> 
<pre><code class="prism language-cpp">FRotator ControlRot <span class="token operator">=</span> <span class="token function">GetControlRotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><code>AddMovementInput</code>函数期望的是一个矢量，而不是一个旋转器（Rotator），但是我们可以非常容易地来回转换，在向量和Rotator之间转换，</p> 
<pre><code class="prism language-cpp"><span class="token function">AddMovementInput</span><span class="token punctuation">(</span>ControlRot<span class="token punctuation">.</span><span class="token function">Vector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>因为我们只对yaw感兴趣，yaw是水平旋转，我们不关心俯仰（pitch roll）的问题，</p> 
<pre><code class="prism language-cpp">ControlRot<span class="token punctuation">.</span>Pitch <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
ControlRot<span class="token punctuation">.</span>Roll <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
</code></pre> 
<p>左右旋转不正常<br> <a href="https://docs.microsoft.com/zh-hk/dotnet/api/microsoft.visualstudio.vsconstants.standardtoolwindows.findsymbol?view=visualstudiosdk-2022" rel="nofollow">Find Symbol工具</a><br> 搜索rightVector，查询所有带这个词的函数</p> 
<p>搜到 UKismetMathLibrary.GetRightVector</p> 
<blockquote> 
 <p>很多时候我们知道一个函数在蓝图里叫什么，但是不知道它在C++里叫什么，一些BOOL值可以通过命名规范推算出来，<br> Kismet的意思是蓝图（BluePrint） 在UE3中的老人都是这么说的，当提到Kismet在引擎代码或者其他地方，它意味着蓝图数学库。</p> 
</blockquote> 
<ul><li>Character局部坐标系的XYZ<br> X轴正方向是角色面朝的正前方 （Red红色）<br> Y轴正方向是角色的右方向 （Green绿色）<br> Z轴正方向是角色的头顶 （Blue蓝色）</li></ul> 
<pre><code class="prism language-cpp">FVector RightVector <span class="token operator">=</span> <span class="token function">FRotationMatrix</span><span class="token punctuation">(</span>ControlRot<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetScaledAxis</span><span class="token punctuation">(</span>EAxis<span class="token double-colon punctuation">::</span>Y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>EAxis::Y 就是枚举类型命名空间的常量Y的值</p> 
</blockquote> 
<h3><a id="Play_273"></a>Play期间不显示鼠标</h3> 
<p>Play的右边下拉菜单，找到高级设置，Play in Editor页签的第一个Game Gets Mouse Control</p> 
<h3><a id="_276"></a>快速热更新</h3> 
<p>Editor preference -&gt; General -&gt; Loading &amp; Saving<br> Startup页签下有加载级别的设置，设置为last opened</p> 
<h3><a id="_280"></a>魔法投射物</h3> 
<p>USphereComponent 是碰撞组件，这是最基本的<br> UProjectileMovementComponent 投射物运动组件，给定一个速度，它就会直直的移动<br> UParticleSystemComponent 粒子系统组件，让我们有东西可以展示出来</p> 
<h3><a id="_285"></a>附加层级</h3> 
<pre><code class="prism language-cpp">EffectComp<span class="token operator">-&gt;</span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>SphereComp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_291"></a>新建蓝图类</h3> 
<p>选择父类，魔法投射物C++类</p> 
<h3><a id="actor_294"></a>在世界中创建一个actor</h3> 
<p>需要传递创建实例的类型，transform参数（是一个结构体，在比例尺中保存一个位置和旋转），生成参数结构体。</p> 
<pre><code class="prism language-cpp"><span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">SpawnActor</span><span class="token generic class-name"><span class="token operator">&lt;</span>AActor<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>ProjectileClass<span class="token punctuation">,</span> SpawnTM<span class="token punctuation">,</span> SpawnParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="transform_300"></a>构造transform结构体</h3> 
<pre><code class="prism language-cpp">FTransform SpawnTM <span class="token operator">=</span> <span class="token function">FTransform</span><span class="token punctuation">(</span><span class="token function">GetControlRotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">GetActorLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_306"></a>构造生成所需参数结构体</h3> 
<pre><code class="prism language-cpp">FActorSpawnParameters SpawnParams<span class="token punctuation">;</span>
SpawnParams<span class="token punctuation">.</span>SpawnCollisionHandlingOverride <span class="token operator">=</span> FSpawnActorCollisionHandlingMethod<span class="token double-colon punctuation">::</span>AlwaysSpawn<span class="token punctuation">;</span>
</code></pre> 
<p>生成碰撞的覆盖处理，当物体在世界上产生的时候，将会检查它的碰撞，可以移动一些位置，让出现的时候不要和任何东西重叠。</p> 
<h3><a id="_315"></a>声明一个可编辑的类型</h3> 
<pre><code class="prism language-cpp"><span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnyWhere<span class="token punctuation">)</span>
TSubClassOf<span class="token operator">&lt;</span>AActor<span class="token operator">&gt;</span> ProjectileClass<span class="token punctuation">;</span>
</code></pre> 
<p>EditAnyWhere：在编辑器中可编辑<br> VisibleAnyWhere：在编辑器中可看</p> 
<p>打开PlayerCharacter蓝图就能看到了，直接在里面编辑。</p> 
<h3><a id="_327"></a>获取骨骼插槽位置</h3> 
<pre><code class="prism language-cpp">FVector HandLocation <span class="token operator">=</span> <span class="token function">GetMesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">GetSocketLocation</span><span class="token punctuation">(</span><span class="token string">"Muzzle_01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 骨骼名</span>
<span class="token comment">// 通过新的位置产生Transform结构体</span>
FTransform SpawnTM <span class="token operator">=</span> <span class="token function">FTransform</span><span class="token punctuation">(</span><span class="token function">GetControlRotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> HandLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>UE4的骨骼树中，灰色的名字是Socket插槽，白色的名字是普通的骨头。</p> 
<h3><a id="_337"></a>设置魔法投射物不下落</h3> 
<p>重力设置为0</p> 
<p>打开魔法投射物蓝图，选中MovementComp<br> 打开细节面板 找到Projectile页签下的 Projectile Gravity Scale 改为0</p> 
<h3><a id="_343"></a>控制魔法投射物的物理</h3> 
<p>打开魔法投射物蓝图，选中球体组件<br> 打开细节面板 找到Collision页签</p> 
<p>Visible ：AI能否看到你<br> Camera： 相机能否穿过组件</p> 
<p>碰撞条件会发生在两个物体相互之间最小的层级。<br> 比如你认为可以碰撞对方，但是对方认为不能碰撞你，那么就不会碰撞上。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/920bfbe9dc868c5fa58f672937e2374e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">单线程的Redis为什么这么快</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9d6db0bf3dee523409af1a22fa5ff02c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">docker安装mqtt服务器mosquitto</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>