<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>QT基础与细节理解 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="QT基础与细节理解" />
<meta property="og:description" content="前言 本博客旨在记录QT学习过程中的一些细节知识理解，由于问题的产生并非成体系，所以前期的记录可能会无序一些。烦请读者参阅目录进行快速的问题定位与跳转
QT基础与细节理解 前言正文部分QT基础：正确理解: QWidget(parent), ui(new Ui::ui_mywidget)QT基础：梳理图片拖动背后的逻辑QT基础：键盘事件中的AutoRepeat()到底在做什么QT基础：插件应该如何优雅的生成和加载QT基础：QOpenGL中，绘图坐标与材质坐标分别是怎样的QT基础：怎么快速发布QT程序QGraphicsItem碰撞检测Q&amp;A详析如何使得QWidget嵌入QGraphicsScene以备View显示，却不被Scene所管理QSlider的sliderMoved和valueChanged信号的不同妙用mouseDoubleClickEvent如何区分左右键双击 正文部分 QT基础：正确理解: QWidget(parent), ui(new Ui::ui_mywidget) 先摘抄一个定义完备的基本窗口项目，项目的结构如下：
- mywidget.pro --- qmake项目管理文件 - mywidget.h --- 基本窗口头文件 - mywidget.cpp --- 基本窗口类文件 - main.cpp --- 主类文件 - mywidget.ui --- 基本窗口样式文件 其中，mywidget.cpp中有参构造函数的写法引起我的注意：
MyWidget::MyWidget(QWidget *parent) : QWidget(parent), ui(new Ui::ui_mywidget) 经过查阅资料，得知这是C&#43;&#43;的一种参数初始化方式—参数初始化表，在正式进入构造函数前，会依次执行冒号后的初始化内容：
QWidget(parent) — 表征派生类MyWidget调用基类QWidget的有参构造方法QWidget(QWidget *parent)，用于将由派生类初始化的对象注册为parent的子窗口（如果parent非空）ui(new Ui::ui_mywidget) — 等价于Ui::ui_mywidget *ui = new Ui::ui_mywidget（也可以使用后者的写法，因为此参数的初始化不强调顺序），即完成指针变量ui的初始化工作 通过上述解析，我们可以清晰地认识到以下两个问题：
冒号后的内容是C&#43;&#43;的参数初始化表其有直接进行的函数调用，也有表征赋值的右值引用 QT基础：梳理图片拖动背后的逻辑 本小节内容来自《QT Creator第三版》5.3.2
要完成一个图片的拖动工作，关键在于四个基本虚函数的重写：
void mousePressEvent(QMouseEvent *event); // 鼠标按下事件void dragEnterEvent(QDragEnterEvent *event); // 拖动进入事件void dragMoveEvent(QDragMoveEvent *event); // 拖动事件void dropEvent(QDropEvent *event); // 放下事件 这里要区分一下dragEnterEvent和dragMoveEvent，前一个只在拖动开始时，和刚进入目标控件时调用，后一个则是在拖动过程中被不断的调用" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/17ae6d76230b01f4c2f20aceca2192f5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-27T15:59:41+08:00" />
<meta property="article:modified_time" content="2023-12-27T15:59:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">QT基础与细节理解</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>前言</h3> 
<p>本博客旨在记录QT学习过程中的一些细节知识理解，由于问题的产生并非成体系，所以前期的记录可能会无序一些。烦请读者参阅目录进行快速的问题定位与跳转</p> 
<p></p> 
<div class="toc"> 
 <h4>QT基础与细节理解</h4> 
 <ul><li><ul><li><a href="#_0" rel="nofollow">前言</a></li><li><a href="#_5" rel="nofollow">正文部分</a></li><li><ul><li><a href="#QT_QWidgetparent_uinew_Uiui_mywidget_6" rel="nofollow">QT基础：正确理解: QWidget(parent), ui(new Ui::ui_mywidget)</a></li><li><a href="#QT_31" rel="nofollow">QT基础：梳理图片拖动背后的逻辑</a></li><li><a href="#QTAutoRepeat_56" rel="nofollow">QT基础：键盘事件中的AutoRepeat()到底在做什么</a></li><li><a href="#QT_94" rel="nofollow">QT基础：插件应该如何优雅的生成和加载</a></li><li><a href="#QTQOpenGL_109" rel="nofollow">QT基础：QOpenGL中，绘图坐标与材质坐标分别是怎样的</a></li><li><a href="#QTQT_116" rel="nofollow">QT基础：怎么快速发布QT程序</a></li><li><a href="#QGraphicsItemQA_144" rel="nofollow">QGraphicsItem碰撞检测Q&amp;A详析</a></li><li><a href="#QWidgetQGraphicsSceneViewScene_152" rel="nofollow">如何使得QWidget嵌入QGraphicsScene以备View显示，却不被Scene所管理</a></li><li><a href="#QSlidersliderMovedvalueChanged_163" rel="nofollow">QSlider的sliderMoved和valueChanged信号的不同妙用</a></li><li><a href="#mouseDoubleClickEvent_213" rel="nofollow">mouseDoubleClickEvent如何区分左右键双击</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_5"></a>正文部分</h3> 
<h4><a id="QT_QWidgetparent_uinew_Uiui_mywidget_6"></a>QT基础：正确理解: QWidget(parent), ui(new Ui::ui_mywidget)</h4> 
<p>先摘抄一个定义完备的基本窗口项目，项目的结构如下：</p> 
<pre><code class="prism language-cpp"><span class="token operator">-</span> mywidget<span class="token punctuation">.</span>pro <span class="token operator">--</span><span class="token operator">-</span> qmake项目管理文件
<span class="token operator">-</span> mywidget<span class="token punctuation">.</span>h <span class="token operator">--</span><span class="token operator">-</span> 基本窗口头文件
<span class="token operator">-</span> mywidget<span class="token punctuation">.</span>cpp <span class="token operator">--</span><span class="token operator">-</span> 基本窗口类文件
<span class="token operator">-</span> main<span class="token punctuation">.</span>cpp <span class="token operator">--</span><span class="token operator">-</span> 主类文件
<span class="token operator">-</span> mywidget<span class="token punctuation">.</span>ui <span class="token operator">--</span><span class="token operator">-</span> 基本窗口样式文件
</code></pre> 
<p>其中，mywidget.cpp中有参构造函数的写法引起我的注意：</p> 
<pre><code class="prism language-cpp"><span class="token class-name">MyWidget</span><span class="token double-colon punctuation">::</span><span class="token function">MyWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ui</span><span class="token punctuation">(</span><span class="token keyword">new</span> Ui<span class="token double-colon punctuation">::</span>ui_mywidget<span class="token punctuation">)</span>
</code></pre> 
<p>经过查阅资料，得知这是C++的一种参数初始化方式—<strong>参数初始化表</strong>，在正式进入构造函数前，会依次执行冒号后的初始化内容：</p> 
<ul><li><code>QWidget(parent)</code> — 表征派生类<code>MyWidget</code>调用基类<code>QWidget</code>的有参构造方法<code>QWidget(QWidget *parent)</code>，用于将由派生类初始化的对象注册为<code>parent</code>的子窗口（如果<code>parent</code>非空）</li><li>ui(new Ui::ui_mywidget) — 等价于<code>Ui::ui_mywidget *ui = new Ui::ui_mywidget</code>（也可以使用后者的写法，因为此参数的初始化不强调顺序），即完成指针变量ui的初始化工作</li></ul> 
<p>通过上述解析，我们可以清晰地认识到以下两个问题：</p> 
<ul><li>冒号后的内容是C++的参数初始化表</li><li>其有直接进行的函数调用，也有表征赋值的右值引用</li></ul> 
<h4><a id="QT_31"></a>QT基础：梳理图片拖动背后的逻辑</h4> 
<blockquote> 
 <p>本小节内容来自《QT Creator第三版》5.3.2</p> 
</blockquote> 
<p>要完成一个图片的拖动工作，关键在于四个基本虚函数的重写：</p> 
<ul><li>void mousePressEvent(QMouseEvent *event); // 鼠标按下事件</li><li>void dragEnterEvent(QDragEnterEvent *event); // 拖动进入事件</li><li>void dragMoveEvent(QDragMoveEvent *event); // 拖动事件</li><li>void dropEvent(QDropEvent *event); // 放下事件</li></ul> 
<p>这里要区分一下dragEnterEvent和dragMoveEvent，前一个只在拖动开始时，和刚进入目标控件时调用，后一个则是在拖动过程中被不断的调用</p> 
<p>鼠标按下事件要完成的工作被总结为如下内容：</p> 
<div class="mermaid"> 
 <svg id="mermaid-svg-6NHfI69ZuagHLlL3" width="876.6000366210938" xmlns="http://www.w3.org/2000/svg" height="158" viewbox="0 0 876.6000366210938 158" class="mermaid-svg"> 
  <style>#mermaid-svg-6NHfI69ZuagHLlL3 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-6NHfI69ZuagHLlL3 .error-icon{fill:#552222;}#mermaid-svg-6NHfI69ZuagHLlL3 .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-6NHfI69ZuagHLlL3 .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-6NHfI69ZuagHLlL3 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-6NHfI69ZuagHLlL3 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-6NHfI69ZuagHLlL3 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-6NHfI69ZuagHLlL3 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-6NHfI69ZuagHLlL3 .marker{fill:#333333;stroke:#333333;}#mermaid-svg-6NHfI69ZuagHLlL3 .marker.cross{stroke:#333333;}#mermaid-svg-6NHfI69ZuagHLlL3 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-6NHfI69ZuagHLlL3 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-6NHfI69ZuagHLlL3 .cluster-label text{fill:#333;}#mermaid-svg-6NHfI69ZuagHLlL3 .cluster-label span{color:#333;}#mermaid-svg-6NHfI69ZuagHLlL3 .label text,#mermaid-svg-6NHfI69ZuagHLlL3 span{fill:#333;color:#333;}#mermaid-svg-6NHfI69ZuagHLlL3 .node rect,#mermaid-svg-6NHfI69ZuagHLlL3 .node circle,#mermaid-svg-6NHfI69ZuagHLlL3 .node ellipse,#mermaid-svg-6NHfI69ZuagHLlL3 .node polygon,#mermaid-svg-6NHfI69ZuagHLlL3 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-6NHfI69ZuagHLlL3 .node .label{text-align:center;}#mermaid-svg-6NHfI69ZuagHLlL3 .node.clickable{cursor:pointer;}#mermaid-svg-6NHfI69ZuagHLlL3 .arrowheadPath{fill:#333333;}#mermaid-svg-6NHfI69ZuagHLlL3 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-6NHfI69ZuagHLlL3 .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-6NHfI69ZuagHLlL3 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-6NHfI69ZuagHLlL3 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-6NHfI69ZuagHLlL3 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-6NHfI69ZuagHLlL3 .cluster text{fill:#333;}#mermaid-svg-6NHfI69ZuagHLlL3 .cluster span{color:#333;}#mermaid-svg-6NHfI69ZuagHLlL3 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-6NHfI69ZuagHLlL3 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"> 
      <path class="path" d="M164.27083333333331,56L177.72569444444443,51.833333333333336C191.18055555555554,47.666666666666664,218.09027777777774,39.333333333333336,243.71180555555554,35.166666666666664C269.3333333333333,31,293.6666666666667,31,305.8333333333333,31L318,31" marker-end="url(#arrowhead74)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead74" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-A LE-C" style="opacity: 1;" id="L-A-C"> 
      <path class="path" d="M164.27083333333331,102L177.72569444444443,106.16666666666667C191.18055555555554,110.33333333333333,218.09027777777774,118.66666666666667,255.32013914320203,122.83333333333333C292.5500005086263,127,340.1000010172526,127,363.87500127156574,127L387.6500015258789,127" marker-end="url(#arrowhead75)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead75" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-D" style="opacity: 1;" id="L-B-D"> 
      <path class="path" d="M509.3000030517578,31L513.4666697184244,31C517.6333363850912,31,525.9666697184244,31,534.3000030517578,31C542.6333363850912,31,550.9666697184244,31,555.1333363850912,31L559.3000030517578,31" marker-end="url(#arrowhead76)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead76" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-D LE-E" style="opacity: 1;" id="L-D-E"> 
      <path class="path" d="M734.6000061035156,31L738.7666727701823,31C742.933339436849,31,751.2666727701823,31,759.6000061035156,31C767.933339436849,31,776.2666727701823,31,780.433339436849,31L784.6000061035156,31" marker-end="url(#arrowhead77)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead77" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="translate(245,31)" style="opacity: 1;"> 
      <g transform="translate(-40,-13)" class="label"> 
       <rect rx="0" ry="0" width="80" height="26"></rect> 
       <foreignobject width="80" height="26"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B">是目标控件</span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform="translate(245,127)"> 
      <g transform="translate(-48,-13)" class="label"> 
       <rect rx="0" ry="0" width="96" height="26"></rect> 
       <foreignobject width="96" height="26"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-C" class="edgeLabel L-LS-A' L-LE-C">不是目标控件</span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-D" class="edgeLabel L-LS-B' L-LE-D"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-D-E" class="edgeLabel L-LS-D' L-LE-E"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-A-44" transform="translate(90,79)" style="opacity: 1;"> 
      <rect rx="0" ry="0" x="-82" y="-23" width="164" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-72,-13)"> 
        <foreignobject width="144" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           获取按下位置的控件 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-B-45" transform="translate(413.6500015258789,31)"> 
      <rect rx="0" ry="0" x="-95.6500015258789" y="-23" width="191.3000030517578" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-85.6500015258789,-13)"> 
        <foreignobject width="171.3000030517578" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           获取图片&amp;鼠标相对位置 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-C-47" transform="translate(413.6500015258789,127)"> 
      <rect rx="0" ry="0" x="-26" y="-23" width="52" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-16,-13)"> 
        <foreignobject width="32" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           结束 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-D-49" transform="translate(646.9500045776367,31)"> 
      <rect rx="0" ry="0" x="-87.6500015258789" y="-23" width="175.3000030517578" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-77.6500015258789,-13)"> 
        <foreignobject width="155.3000030517578" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           拖动显示&amp;原图片处理 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-E-51" transform="translate(826.6000061035156,31)"> 
      <rect rx="0" ry="0" x="-42" y="-23" width="84" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-32,-13)"> 
        <foreignobject width="64" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           执行拖动 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<p>当鼠标按下事件中开始执行拖动后（也就是QDrag的exec方法），开始会首先调用dragEnterEvent事件，拖动过程中则会不断调用dragMoveEvent事件，拖动结束后会返回事件类型以及调用dropEvent事件。因此为实现移动图片功能，接下来需要完成的工作是：</p> 
<ul><li>在dragEnterEvent和dragMoveEvent中设置事件类型为移动事件</li><li>当QDrag.exec执行完毕后，检测事件类型，如果是移动事件则关闭原目标控件</li><li>在dropEvent事件生成新目标控件</li></ul> 
<h4><a id="QTAutoRepeat_56"></a>QT基础：键盘事件中的AutoRepeat()到底在做什么</h4> 
<p>我们以一个键盘按下与释放的简单demo为例来探查一下键盘长按情况下，AutoRepeat()这个方法到底在做些什么？<br> demo的关键逻辑如下：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">Widget</span><span class="token double-colon punctuation">::</span><span class="token function">keyPressEvent</span><span class="token punctuation">(</span>QKeyEvent <span class="token operator">*</span>event<span class="token punctuation">)</span>       <span class="token comment">// 键盘按下事件</span>
<span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token operator">-&gt;</span><span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> Qt<span class="token double-colon punctuation">::</span>Key_Up<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>                  <span class="token comment">// 如果是向上方向键</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"press:"</span><span class="token operator">&lt;&lt;</span>event<span class="token operator">-&gt;</span><span class="token function">isAutoRepeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 是否自动重复</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token class-name">Widget</span><span class="token double-colon punctuation">::</span><span class="token function">keyReleaseEvent</span><span class="token punctuation">(</span>QKeyEvent <span class="token operator">*</span>event<span class="token punctuation">)</span>     <span class="token comment">// 按键释放事件</span>
<span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token operator">-&gt;</span><span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> Qt<span class="token double-colon punctuation">::</span>Key_Up<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"release:"</span><span class="token operator">&lt;&lt;</span> event<span class="token operator">-&gt;</span><span class="token function">isAutoRepeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"up"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>经过断点调试，我们得到了当长按Key_Up时的输出逻辑：</p> 
<pre><code class="prism language-bash">----初次长按时输出内容----
press: <span class="token boolean">false</span>
release: <span class="token boolean">true</span>
up
----持续长按过程中输出内容----
press: <span class="token boolean">true</span>
release: <span class="token boolean">true</span>
up
<span class="token punctuation">..</span>.<span class="token punctuation">(</span>此处开始循环，直至释放为止<span class="token punctuation">)</span>
----结束长按时输出内容----
press: <span class="token boolean">true</span>
release: <span class="token boolean">false</span>
up
</code></pre> 
<p>如上所述，AutoRepeat()将键盘按下与释放事件进行绑定，并调整为三阶段的输出内容</p> 
<h4><a id="QT_94"></a>QT基础：插件应该如何优雅的生成和加载</h4> 
<p>我们首先需要理解的是，要想正确的加载插件，插件就必须要位于项目根目录之后，下面这一文件结构的插件与项目就无法正常加载：</p> 
<pre><code class="prism language-bash">- plugins
	- example.a
	- example.dll
- build-example-<span class="token punctuation">[</span>主机与QT版本<span class="token punctuation">]</span>-Debug<span class="token punctuation">(</span>此为项目根目录<span class="token punctuation">)</span>
	- 依赖以及运行文件等
</code></pre> 
<p>上述结构的插件加载最终会以instance()==null告终，因为插件需求的qt环境不存在（未处于项目管理下）<br> 因此，要优雅的加载插件，就必须使得插件处于一个qt项目的根目录后。只要满足这一条件，这个插件就可以被该项目以及其子项目所使用（即使插件位于子项目前）</p> 
<h4><a id="QTQOpenGL_109"></a>QT基础：QOpenGL中，绘图坐标与材质坐标分别是怎样的</h4> 
<p>在QOpenGL中，绘图坐标是非常标准的以<strong>窗口中心为原点</strong>的右手坐标系，如下所示：<br> <img src="https://images2.imgbox.com/a9/9e/flwjizkp_o.png" alt="在这里插入图片描述"><br> 而材质坐标则是以图片的左下角为原点，建立标准坐标系，材质图片将全部处于第一象限中</p> 
<blockquote> 
 <p>题外话：读取材质时，由于QOpenGL将QImage读取的图片做了垂直镜像（即Y坐标取反），因此为在QOpenGL中还原，需要在QImage再次使用垂直镜像</p> 
</blockquote> 
<h4><a id="QTQT_116"></a>QT基础：怎么快速发布QT程序</h4> 
<p>最简单和最方便的做法是使用qt编译依赖下的windeployqt来执行自动发布，我们以Min_GW_64编译器为例来展现具体的做法：</p> 
<p>首先，需要在QT-Creator中，使用Min_GW_64编译器完成release包的构建任务，构建完成后，你可以得到如下所示的文件夹：</p> 
<pre><code class="prism language-bash">- build-XXXProject-Desktop_Qt_6_6_0_MinGW_64_bit-Release
	- release
		- XXXProject.exe
</code></pre> 
<p>只需要提取出XXXProject.exe放置在单独的文件夹下，再找到Min_GW_64编译器的控制台（如下所示）</p> 
<p><img src="https://images2.imgbox.com/5d/37/mhIkr57j_o.png" alt="在这里插入图片描述"><br> 单击后打开，cd到XXXProject.exe放置的单独文件夹，再使用命令：</p> 
<pre><code class="prism language-bash">windeployqt XXXProject.exe
</code></pre> 
<p>即可自动完成发布工作（此步需要确保<code>C:\Qt\6.6.0\mingw_64\bin</code>已被加入Path环境变量）</p> 
<p>发布过程中只有一点格外需要注意：构建时所使用的编译器一定要与windeployqt的编译器一致，否则就会出现<code>无法定位程序输入点</code>的错误</p> 
<blockquote> 
 <p>在进行上述操作的时候，我们也收获了一个关于Qt资源文件意义的思考。在编程的时候，我时常认为使用路径形式的图片引用，和使用资源文件的图片引用没有区别，甚至后者反而更加麻烦。其实，资源文件可以在打包的时候将图片以数组形式转为全局变量，以链接库的形式生成到本地，再组合成exe文件。经过上述过程，我们在发布exe时，即使未将图片拷贝到发布包里，exe也可以直接使用图片</p> 
</blockquote> 
<blockquote> 
 <p>此外，在使用资源文件时，有一点需要格外引起注意，<strong>如果你发现运行的exe程序未能正确读取资源文件下的图片，一定要先尝试重新执行qmake再运行</strong>，大部分情况下的未能读取都是由于没有重新qmake导致的。这样一个简单的疏忽却可能让我们排查很久</p> 
</blockquote> 
<h4><a id="QGraphicsItemQA_144"></a>QGraphicsItem碰撞检测Q&amp;A详析</h4> 
<p>本记录以Q&amp;A形式对QGraphicsItem碰撞检测中一些容易忽视或者错误理解的内容进行记录，所以Q&amp;A内容均以碰撞检测的默认模式<code>Qt::ItemSelectionMode</code>为准，其他模式可参考理解</p> 
<ul><li>Q1： Item的boundingRect和shape分别起什么作用</li><li>A1：boundingRect规定了item的绘制区域（不可超过该区域），而shape则提供给碰撞检测函数用于判断item是否与其他item的shape发生由模式规定的交互</li><li>Q2：默认模式<code>Qt::ItemSelectionMode</code>规定的交互是什么意思，能不能详细解释一下</li><li>A2：默认模式规定了两种类型的交互会被判定为碰撞：1. 完全包围；2. 线段相交。线段相交很好理解，完全包围则分为降维覆盖和同维包容。降维覆盖：例如一个item的shape被设定为一个点，另一个item的shape为一条线段且通过了该点，那么两者会被判断为碰撞；同维包容：分为形状完全重合，或是完全内含两种形式，均会被判断为碰撞</li></ul> 
<h4><a id="QWidgetQGraphicsSceneViewScene_152"></a>如何使得QWidget嵌入QGraphicsScene以备View显示，却不被Scene所管理</h4> 
<p>这是一个很有趣的技巧，由于QGraphicsScene用于嵌入QWidget的proxy类需要做父类判断，并只能嵌入topLevel widget进QGraphicsScene，这也就意味着，如果使用下面的代码进行嵌入，嵌入的QWidget就可以实现在view上显示，但不被QGraphicsScene所管理</p> 
<pre><code class="prism language-cpp"><span class="token comment">//当前代码块处于view类的cpp文件下，因此this指代的是view类</span>
QPushButton <span class="token operator">*</span>startBtn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"开始游戏"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>startBtn<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>由上述代码所声明的pushbutton将脱离scene管理而存在，因此，即使scene调用<code>scene-&gt;clear();</code>，该按钮仍然存在于view的显示中。这就实现了可能有用的按钮持久化功能</p> 
<h4><a id="QSlidersliderMovedvalueChanged_163"></a>QSlider的sliderMoved和valueChanged信号的不同妙用</h4> 
<p>有别于valueChanged只对value变化进行检测，sliderMoved还会对标志位sliderDown进行true检测。这意味着通过sliderMoved信号可以进行更细粒度的控制。</p> 
<p>例如在音频播放器中，我们使用QSlider来表示播放进度，此时需关联QMediaPlayer的positionChanged信号以及QSlider的setValue函数：</p> 
<pre><code class="prism language-cpp"><span class="token function">connect</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QMediaPlayer<span class="token double-colon punctuation">::</span>positionChanged<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MyWidget<span class="token double-colon punctuation">::</span>positionChanged<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">void</span> <span class="token class-name">MyWidget</span><span class="token double-colon punctuation">::</span><span class="token function">positionChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span> playerPos<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> sliderPos <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> playerPos <span class="token operator">/</span> player<span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	slider<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>sliderPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>此外，我们还希望当拖动slider时，可以改变MediaPlayer的播放位置，但如果使用valueChanged信号，就会出现循环的关联，从而导致失效</p> 
<p>因此，正确的做法是运用sliderMoved信号，通过对sliderDown进行判断，来区分改变position的到底是来自于slider的拖动，还是循环关联的slider的valueChanged，如果是后者，则直接返回从而打破循环，完整代码如下：</p> 
<pre><code class="prism language-cpp"><span class="token function">connect</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QMediaPlayer<span class="token double-colon punctuation">::</span>positionChanged<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MyWidget<span class="token double-colon punctuation">::</span>positionChanged<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">connect</span><span class="token punctuation">(</span>slider<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QSlider<span class="token double-colon punctuation">::</span>sliderMoved<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MyWidget<span class="token double-colon punctuation">::</span>changePosition<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">void</span> <span class="token class-name">MyWidget</span><span class="token double-colon punctuation">::</span><span class="token function">positionChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span> playerPos<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 即使通过此处进行设置，也不会导致再次调用sliderMoved，因为sliderDown标志位已为false，所以不会出现循环</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>silder<span class="token punctuation">.</span><span class="token function">isSliderDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">//这一行不能少，否则会导致拖动失效</span>
	<span class="token keyword">int</span> sliderPos <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> playerPos <span class="token operator">/</span> player<span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	slider<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>sliderPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MyWidget</span><span class="token double-colon punctuation">::</span><span class="token function">changePosition</span><span class="token punctuation">(</span><span class="token keyword">int</span> sliderPos<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 拖动时允许直接修改player的position</span>
	<span class="token keyword">int</span> playerPos <span class="token operator">=</span> <span class="token punctuation">(</span>sliderPos <span class="token operator">*</span> player<span class="token punctuation">.</span>duration<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
	player<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span>playerPos<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//此时会进入关联1，但由于关联1已经切断到2的通路，因此不会造成循环</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>使用valueChanged时的关系：</p> 
<div class="mermaid"> 
 <svg id="mermaid-svg-MNSJBt59Lzb1n5SA" width="765.175048828125" xmlns="http://www.w3.org/2000/svg" height="97" viewbox="0 0 765.175048828125 97" class="mermaid-svg"> 
  <style>#mermaid-svg-MNSJBt59Lzb1n5SA {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-MNSJBt59Lzb1n5SA .error-icon{fill:#552222;}#mermaid-svg-MNSJBt59Lzb1n5SA .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-MNSJBt59Lzb1n5SA .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-MNSJBt59Lzb1n5SA .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-MNSJBt59Lzb1n5SA .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-MNSJBt59Lzb1n5SA .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-MNSJBt59Lzb1n5SA .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-MNSJBt59Lzb1n5SA .marker{fill:#333333;stroke:#333333;}#mermaid-svg-MNSJBt59Lzb1n5SA .marker.cross{stroke:#333333;}#mermaid-svg-MNSJBt59Lzb1n5SA svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-MNSJBt59Lzb1n5SA .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-MNSJBt59Lzb1n5SA .cluster-label text{fill:#333;}#mermaid-svg-MNSJBt59Lzb1n5SA .cluster-label span{color:#333;}#mermaid-svg-MNSJBt59Lzb1n5SA .label text,#mermaid-svg-MNSJBt59Lzb1n5SA span{fill:#333;color:#333;}#mermaid-svg-MNSJBt59Lzb1n5SA .node rect,#mermaid-svg-MNSJBt59Lzb1n5SA .node circle,#mermaid-svg-MNSJBt59Lzb1n5SA .node ellipse,#mermaid-svg-MNSJBt59Lzb1n5SA .node polygon,#mermaid-svg-MNSJBt59Lzb1n5SA .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-MNSJBt59Lzb1n5SA .node .label{text-align:center;}#mermaid-svg-MNSJBt59Lzb1n5SA .node.clickable{cursor:pointer;}#mermaid-svg-MNSJBt59Lzb1n5SA .arrowheadPath{fill:#333333;}#mermaid-svg-MNSJBt59Lzb1n5SA .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-MNSJBt59Lzb1n5SA .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-MNSJBt59Lzb1n5SA .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-MNSJBt59Lzb1n5SA .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-MNSJBt59Lzb1n5SA .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-MNSJBt59Lzb1n5SA .cluster text{fill:#333;}#mermaid-svg-MNSJBt59Lzb1n5SA .cluster span{color:#333;}#mermaid-svg-MNSJBt59Lzb1n5SA div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-MNSJBt59Lzb1n5SA :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"> 
      <path class="path" d="M190.96250915527344,37.2241774663989L195.1291758219401,36.18681455533241C199.29584248860678,35.14945164426593,207.6291758219401,33.07472582213297,215.96250915527344,32.03736291106648C224.29584248860678,31,232.6291758219401,31,236.79584248860678,31L240.96250915527344,31" marker-end="url(#arrowhead93)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead93" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-C" style="opacity: 1;" id="L-B-C"> 
      <path class="path" d="M488.27500915527344,31L492.4416758219401,31C496.60834248860675,31,504.9416758219401,31,513.7445492799255,32C522.5474227379108,33,531.8198363205482,35,536.456043111867,36L541.0922499031856,37" marker-end="url(#arrowhead94)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead94" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-C LE-A" style="opacity: 1;" id="L-C-A"> 
      <path class="path" d="M541.0922499031856,83L536.456043111867,84C531.8198363205482,85,522.5474227379108,87,493.1351742799255,88C463.7229258219401,89,414.17084248860675,89,364.61875915527344,89C315.0666758219401,89,265.51459248860675,89,236.57188415527344,87.9626370889335C207.6291758219401,86.92527417786704,199.29584248860678,84.85054835573406,195.1291758219401,83.81318544466758L190.96250915527344,82.7758225336011" marker-end="url(#arrowhead95)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead95" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-C" class="edgeLabel L-LS-B' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-C-A" class="edgeLabel L-LS-C' L-LE-A"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-A-58" transform="translate(99.48125457763672,60)" style="opacity: 1;"> 
      <rect rx="0" ry="0" x="-91.48125457763672" y="-23" width="182.96250915527344" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-81.48125457763672,-13)"> 
        <foreignobject width="162.96250915527344" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           QSlider::valueChanged 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-B-59" transform="translate(364.61875915527344,31)"> 
      <rect rx="0" ry="0" x="-123.65625" y="-23" width="247.3125" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-113.65625,-13)"> 
        <foreignobject width="227.3125" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           QMediaPlayer::positionChanged 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-C-61" transform="translate(647.7250061035156,60)"> 
      <rect rx="0" ry="0" x="-109.45000457763672" y="-23" width="218.90000915527344" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-99.45000457763672,-13)"> 
        <foreignobject width="198.90000915527344" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           MyWidget::positionChanged 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<p>使用sliderMoved时的关系：</p> 
<div class="mermaid"> 
 <svg id="mermaid-svg-HoEolq0zhuShx38Y" width="750.6500244140625" xmlns="http://www.w3.org/2000/svg" height="62" viewbox="0 0 750.6500244140625 62" class="mermaid-svg"> 
  <style>#mermaid-svg-HoEolq0zhuShx38Y {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-HoEolq0zhuShx38Y .error-icon{fill:#552222;}#mermaid-svg-HoEolq0zhuShx38Y .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-HoEolq0zhuShx38Y .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-HoEolq0zhuShx38Y .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-HoEolq0zhuShx38Y .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-HoEolq0zhuShx38Y .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-HoEolq0zhuShx38Y .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-HoEolq0zhuShx38Y .marker{fill:#333333;stroke:#333333;}#mermaid-svg-HoEolq0zhuShx38Y .marker.cross{stroke:#333333;}#mermaid-svg-HoEolq0zhuShx38Y svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-HoEolq0zhuShx38Y .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-HoEolq0zhuShx38Y .cluster-label text{fill:#333;}#mermaid-svg-HoEolq0zhuShx38Y .cluster-label span{color:#333;}#mermaid-svg-HoEolq0zhuShx38Y .label text,#mermaid-svg-HoEolq0zhuShx38Y span{fill:#333;color:#333;}#mermaid-svg-HoEolq0zhuShx38Y .node rect,#mermaid-svg-HoEolq0zhuShx38Y .node circle,#mermaid-svg-HoEolq0zhuShx38Y .node ellipse,#mermaid-svg-HoEolq0zhuShx38Y .node polygon,#mermaid-svg-HoEolq0zhuShx38Y .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-HoEolq0zhuShx38Y .node .label{text-align:center;}#mermaid-svg-HoEolq0zhuShx38Y .node.clickable{cursor:pointer;}#mermaid-svg-HoEolq0zhuShx38Y .arrowheadPath{fill:#333333;}#mermaid-svg-HoEolq0zhuShx38Y .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-HoEolq0zhuShx38Y .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-HoEolq0zhuShx38Y .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-HoEolq0zhuShx38Y .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-HoEolq0zhuShx38Y .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-HoEolq0zhuShx38Y .cluster text{fill:#333;}#mermaid-svg-HoEolq0zhuShx38Y .cluster span{color:#333;}#mermaid-svg-HoEolq0zhuShx38Y div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-HoEolq0zhuShx38Y :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-B LE-C" id="L-B-C" style="opacity: 1;"> 
      <path class="path" d="M473.75,31L477.9166666666667,31C482.0833333333333,31,490.4166666666667,31,498.75,31C507.0833333333333,31,515.4166666666666,31,519.5833333333334,31L523.75,31" marker-end="url(#arrowhead107)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead107" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-A LE-B" style="opacity: 1;" id="L-A-B"> 
      <path class="path" d="M176.4375,31L180.60416666666666,31C184.77083333333334,31,193.10416666666666,31,201.4375,31C209.77083333333334,31,218.10416666666666,31,222.27083333333334,31L226.4375,31" marker-end="url(#arrowhead108)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead108" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-C" class="edgeLabel L-LS-B' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-B-68" transform="translate(350.09375,31)" style="opacity: 1;"> 
      <rect rx="0" ry="0" x="-123.65625" y="-23" width="247.3125" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-113.65625,-13)"> 
        <foreignobject width="227.3125" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           QMediaPlayer::positionChanged 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-C-69" transform="translate(633.1999969482422,31)"> 
      <rect rx="0" ry="0" x="-109.45000457763672" y="-23" width="218.90000915527344" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-99.45000457763672,-13)"> 
        <foreignobject width="198.90000915527344" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           MyWidget::positionChanged 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-A-70" transform="translate(92.21875,31)"> 
      <rect rx="0" ry="0" x="-84.21875" y="-23" width="168.4375" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-74.21875,-13)"> 
        <foreignobject width="148.4375" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           QSlider::sliderMoved 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<h4><a id="mouseDoubleClickEvent_213"></a>mouseDoubleClickEvent如何区分左右键双击</h4> 
<p>这个问题产生于一个小功能实现时，该功能是：我们需要实现一个音乐列表，左键双击播放音乐而右键双击则不做任何事。经过测试发现，该事件与mousePress或mouseRelease区分左右键并无任何区别，都是通过event-&gt;button()拿取到事件产生的按键</p> 
<p>此外，我们还注意到，在帮助文档中，对mouseDoubleClickEvent还有一条引申说明：</p> 
<blockquote> 
 <p>Note: The widget will also receive mouse press and mouse release events in addition to the double click event. And if another widget that overlaps this widget disappears in response to press or release events, then this widget will only receive the double click event. It is up to the developer to ensure that the application interprets these events correctly.<br> 提示：本窗口仍然会在接收到双击事件下，接收到鼠标按下或释放事件。除非有另一个窗口拦截了鼠标按下或释放事件并处理了它</p> 
</blockquote> 
<p>因此，如果我们还为音乐列表实现了一个单击右键弹出处理菜单的功能，那么由于单击右键事件已由contextMenuEvent去处理，所以本窗口将无法再接收到右键双击事件（除非重新实现click-&gt;mouseUp-&gt;mouseDown的逻辑判断）</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e9a4bc02667cc419ffa1bb93f7d0691c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Keil5 新建STM32工程步骤</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/55beeba1f6fbf0bcd1972597250a56f7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">医学影像知识（三）：三维医学影像各向同性与各向异性的对比</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>