<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VMware集群不可访问 证书到期 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="VMware集群不可访问 证书到期" />
<meta property="og:description" content="报错：
HTTP状态 500 - 内部服务器错误 原因：service-control --start vmware-vpxd 启动不了
查看内部原因是证书到期
root@localhost [ ~ ]# service-control --start vmware-vpxd
peration not cancellable. Please wait for it to finish...
Performing start operation on service vpxd...
Error executing start on service vpxd. Details {
&#34;resolution&#34;: null,
&#34;detail&#34;: [
{
&#34;translatable&#34;: &#34;An error occurred while starting service &#39;%(0)s&#39;&#34;,
&#34;localized&#34;: &#34;An error occurred while starting service &#39;vpxd&#39;&#34;,
&#34;args&#34;: [
&#34;vpxd&#34;
],
&#34;id&#34;: &#34;install.ciscommon.service.failstart&#34;
}
]," />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/81b6f287ea045bc057a1bb06c30ec3af/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-25T09:29:22+08:00" />
<meta property="article:modified_time" content="2023-05-25T09:29:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">VMware集群不可访问 证书到期</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>报错：</p> 
<p>HTTP状态 500 - 内部服务器错误 </p> 
<p>原因：service-control --start vmware-vpxd 启动不了</p> 
<p>查看内部原因是证书到期</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p><code>root</code><code>@localhost</code> <code>[ ~ ]# service-control --start vmware-vpxd</code></p> <p><code>peration not cancellable. Please wait </code><code>for</code> <code>it to finish...</code></p> <p><code>Performing start operation on service vpxd...</code></p> <p><code>Error executing start on service vpxd. Details {<!-- --></code></p> <p><code>  </code><code>"resolution"</code><code>: </code><code>null</code><code>,</code></p> <p><code>  </code><code>"detail"</code><code>: [</code></p> <p><code>  </code><code>{<!-- --></code></p> <p><code>  </code><code>"translatable"</code><code>: </code><code>"An error occurred while starting service '%(0)s'"</code><code>,</code></p> <p><code>  </code><code>"localized"</code><code>: </code><code>"An error occurred while starting service 'vpxd'"</code><code>,</code></p> <p><code>  </code><code>"args"</code><code>: [</code></p> <p><code>  </code><code>"vpxd"</code></p> <p><code>  </code><code>],</code></p> <p><code>  </code><code>"id"</code><code>: </code><code>"install.ciscommon.service.failstart"</code></p> <p><code>  </code><code>}</code></p> <p><code>  </code><code>],</code></p> <p><code>  </code><code>"problemId"</code><code>: </code><code>null</code><code>,</code></p> <p><code>  </code><code>"componentKey"</code><code>: </code><code>null</code></p> <p><code>}</code></p> <p><code>Service-control failed. Error: {<!-- --></code></p> <p><code>  </code><code>"resolution"</code><code>: </code><code>null</code><code>,</code></p> <p><code>  </code><code>"detail"</code><code>: [</code></p> <p><code>  </code><code>{<!-- --></code></p> <p><code>  </code><code>"translatable"</code><code>: </code><code>"An error occurred while starting service '%(0)s'"</code><code>,</code></p> <p><code>  </code><code>"localized"</code><code>: </code><code>"An error occurred while starting service 'vpxd'"</code><code>,</code></p> <p><code>  </code><code>"args"</code><code>: [</code></p> <p><code>  </code><code>"vpxd"</code></p> <p><code>  </code><code>],</code></p> <p><code>  </code><code>"id"</code><code>: </code><code>"install.ciscommon.service.failstart"</code></p> <p><code>  </code><code>}</code></p> <p><code>  </code><code>],</code></p> <p><code>  </code><code>"problemId"</code><code>: </code><code>null</code><code>,</code></p> <p><code>  </code><code>"componentKey"</code><code>: </code><code>null</code></p> <p><code>}</code></p> </td></tr></tbody></table> 
<p></p> 
<p>cat /var/log/vmware/sca/sca.log</p> 
<p>om.vmware.vim.vmomi.core.exception.CertificateValidationException: Server certificate chain is not trusted </p> 
<p></p> 
<p></p> 
<p>登录vc查看</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p><code>root</code><code>@localhost</code> <code>[ ~ ]# </code><code>for</code> <code>i in $(/usr/lib/vmware-vmafd/bin/vecs-cli store list); </code><code>do</code> <code>echo STORE $i; sudo /usr/lib/vmware-vmafd/bin/vecs-cli entry list --store $i --text | egrep </code><code>"Alias|Not After"</code><code>; done</code></p> <p><code>STORE MACHINE_SSL_CERT</code></p> <p><code>Alias : __MACHINE_CERT</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>33</code><code>:</code><code>16</code> <code>2023</code> <code>GMT</code></p> <p><code>STORE TRUSTED_ROOTS</code></p> <p><code>Alias : e09cebe9d04da849d3bca621db2ea698fd64e652</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2023</code> <code>GMT</code></p> <p><code>Alias : 0104dc7a7afa5004498ee631992e0e96a88671eb</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>43</code><code>:</code><code>15</code> <code>2023</code> <code>GMT</code></p> <p><code>STORE TRUSTED_ROOT_CRLS</code></p> <p><code>Alias : 511b76b2e2e6386d2099d9aaf9843d66b1fbc8aa</code></p> <p><code>Alias : 1332df98c6c8aaa33c237fccc5401e27c2abb2e4</code></p> <p><code>STORE machine</code></p> <p><code>Alias : machine</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>36</code><code>:</code><code>52</code> <code>2023</code> <code>GMT</code></p> <p><code>STORE vsphere-webclient</code></p> <p><code>Alias : vsphere-webclient</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>36</code><code>:</code><code>54</code> <code>2023</code> <code>GMT</code></p> <p><code>STORE vpxd</code></p> <p><code>Alias : vpxd</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>36</code><code>:</code><code>54</code> <code>2023</code> <code>GMT</code></p> <p><code>STORE vpxd-extension</code></p> <p><code>Alias : vpxd-extension</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>36</code><code>:</code><code>56</code> <code>2023</code> <code>GMT</code></p> <p><code>STORE hvc</code></p> <p><code>Alias : hvc</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>36</code><code>:</code><code>58</code> <code>2023</code> <code>GMT</code></p> <p><code>STORE data-encipherment</code></p> <p><code>Alias : data-encipherment</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2023</code> <code>GMT</code></p> <p><code>STORE APPLMGMT_PASSWORD</code></p> <p><code>STORE SMS</code></p> <p><code>Alias : sms_self_signed</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>31</code><code>:</code><code>32</code> <code>2023</code> <code>GMT</code></p> <p><code>STORE wcp</code></p> <p><code>Alias : wcp</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>36</code><code>:</code><code>58</code> <code>2023</code> <code>GMT</code></p> <p><code>STORE BACKUP_STORE</code></p> <p><code>Alias : bkp___MACHINE_CERT</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>19</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2023</code> <code>GMT</code></p> <p><code>Alias : bkp_machine</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2033</code> <code>GMT</code></p> <p><code>Alias : bkp_vsphere-webclient</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2023</code> <code>GMT</code></p> <p><code>Alias : bkp_vpxd</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2023</code> <code>GMT</code></p> <p><code>Alias : bkp_vpxd-extension</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2023</code> <code>GMT</code></p> <p><code>Alias : bkp_hvc</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2023</code> <code>GMT</code></p> <p><code>Alias : bkp_wcp</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2023</code> <code>GMT</code></p> </td></tr></tbody></table> 
<p></p> 
<p></p> 
<p></p> 
<p>处理过程：</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p><code>root</code><code>@localhost</code> <code>[ ~ ]#  /usr/lib/vmware-vmca/bin/certificate-manager</code></p> <p><code>         </code><code>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _</code></p> <p><code>        </code><code>|                                                                     |</code></p> <p><code>        </code><code>|      *** Welcome to the vSphere </code><code>6.8</code> <code>Certificate Manager  ***        |</code></p> <p><code>        </code><code>|                                                                     |</code></p> <p><code>        </code><code>|                   -- Select Operation --                            |</code></p> <p><code>        </code><code>|                                                                     |</code></p> <p><code>        </code><code>|      </code><code>1</code><code>. Replace Machine SSL certificate with Custom Certificate     |</code></p> <p><code>        </code><code>|                                                                     |</code></p> <p><code>        </code><code>|      </code><code>2</code><code>. Replace VMCA Root certificate with Custom Signing           |</code></p> <p><code>        </code><code>|         Certificate and replace all Certificates                    |</code></p> <p><code>        </code><code>|                                                                     |</code></p> <p><code>        </code><code>|      </code><code>3</code><code>. Replace Machine SSL certificate with VMCA Certificate       |</code></p> <p><code>        </code><code>|                                                                     |</code></p> <p><code>        </code><code>|      </code><code>4</code><code>. Regenerate a </code><code>new</code> <code>VMCA Root Certificate and                  |</code></p> <p><code>        </code><code>|         replace all certificates                                    |</code></p> <p><code>        </code><code>|                                                                     |</code></p> <p><code>        </code><code>|      </code><code>5</code><code>. Replace Solution user certificates with                     |</code></p> <p><code>        </code><code>|         Custom Certificate                                          |</code></p> <p><code>        </code><code>|         NOTE: Solution user certs will be deprecated in a future    |</code></p> <p><code>        </code><code>|         release of vCenter. Refer to release notes </code><code>for</code> <code>more details.|</code></p> <p><code>        </code><code>|                                                                     |</code></p> <p><code>        </code><code>|      </code><code>6</code><code>. Replace Solution user certificates with VMCA certificates   |</code></p> <p><code>        </code><code>|                                                                     |</code></p> <p><code>        </code><code>|      </code><code>7</code><code>. Revert last performed operation by re-publishing old        |</code></p> <p><code>        </code><code>|         certificates                                                |</code></p> <p><code>        </code><code>|                                                                     |</code></p> <p><code>        </code><code>|      </code><code>8</code><code>. Reset all Certificates                                      |</code></p> <p><code>        </code><code>|_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _|</code></p> <p><code>Note : Use Ctrl-D to exit.</code></p> <p><code>Option[</code><code>1</code> <code>to </code><code>8</code><code>]: </code><code>8</code></p> <p><code>Do you wish to generate all certificates using configuration file : Option[Y/N] ? : Y</code></p> <p></p> <p><code>Please provide valid SSO and VC privileged user credential to perform certificate operations.</code></p> <p><code>Enter username [Administrator</code><code>@vsphere</code><code>.local]:</code></p> <p><code>Enter password:</code></p> <p></p> <p><code>Please configure certool.cfg with proper values before proceeding to next step.</code></p> <p></p> <p><code>Press Enter key to skip optional parameters or use Default value.</code></p> <p></p> <p><code>Enter proper value </code><code>for</code> <code>'Country'</code> <code>[Default value : US] :</code></p> <p></p> <p><code>Enter proper value </code><code>for</code> <code>'Name'</code> <code>[Default value : CA] :</code></p> <p></p> <p><code>Enter proper value </code><code>for</code> <code>'Organization'</code> <code>[Default value : VMware] :</code></p> <p></p> <p><code>Enter proper value </code><code>for</code> <code>'OrgUnit'</code> <code>[Default value : VMware Engineering] :</code></p> <p></p> <p><code>Enter proper value </code><code>for</code> <code>'State'</code> <code>[Default value : California] :</code></p> <p></p> <p><code>Enter proper value </code><code>for</code> <code>'Locality'</code> <code>[Default value : Palo Alto] :</code></p> <p></p> <p><code>Enter proper value </code><code>for</code> <code>'IPAddress'</code> <code>(Provide comma separated values </code><code>for</code> <code>multiple IP addresses) [optional] : </code><code>10.10</code><code>.</code><code>10.10</code></p> <p></p> <p><code>Enter proper value </code><code>for</code> <code>'Email'</code> <code>[Default value : email</code><code>@acme</code><code>.com] :</code></p> <p></p> <p><code>Enter proper value </code><code>for</code> <code>'Hostname'</code> <code>(Provide comma separated values </code><code>for</code> <code>multiple Hostname entries) [Enter valid Fully Qualified Domain Name(FQDN), For Example : example.domain.com] : vsphere.local</code></p> <p></p> <p><code>Enter proper value </code><code>for</code> <code>VMCA </code><code>'Name'</code> <code>:vsphere.local</code></p> <p><code>Continue operation : Option[Y/N] ? : Y</code></p> <p></p> <p><code>You are going to reset by regenerating Root Certificate and replace all certificates using VMCA</code></p> <p><code>Continue operation : Option[Y/N] ? : Y</code></p> <p><code>Get site nameCompleted [Reset Machine SSL Cert...]                 </code></p> <p><code>default</code><code>-site</code></p> <p><code>Lookup all services</code></p> <p><code>Get service </code><code>default</code><code>-site:8d7d9dfe-a8a5-</code><code>4239</code><code>-98dd-11450c29e372</code></p> <p><code>Update service </code><code>default</code><code>-site:8d7d9dfe-a8a5-</code><code>4239</code><code>-98dd-11450c29e372; spec: /tmp/svcspec_ofokwzjb</code></p> <p><code>Get service </code><code>default</code><code>-site:7cce27d9-</code><code>2054</code><code>-42de-88d0-18e6dda92974</code></p> <p><code>Update service </code><code>default</code><code>-site:7cce27d9-</code><code>2054</code><code>-42de-88d0-18e6dda92974; spec: /tmp/svcspec_o33jb36v</code></p> <p><code>Get service </code><code>default</code><code>-site:b2989b91-cc7f-46fc-</code><code>9329</code><code>-51633c227544</code></p> <p><code>Update service </code><code>default</code><code>-site:b2989b91-cc7f-46fc-</code><code>9329</code><code>-51633c227544; spec: /tmp/svcspec_hg_3lbrr</code></p> <p><code>Get service 215a0ae7-f36c-4feb-a91b-64f542f10737</code></p> <p><code>Update service 215a0ae7-f36c-4feb-a91b-64f542f10737; spec: /tmp/svcspec_0g9aitb9</code></p> <p><code>Get service 9913dd5a-29d9-</code><code>4944</code><code>-</code><code>9023</code><code>-b36a7f3f9aab</code></p> <p><code>Update service 9913dd5a-29d9-</code><code>4944</code><code>-</code><code>9023</code><code>-b36a7f3f9aab; spec: /tmp/svcspec_p3wa5u5o</code></p> <p><code>Get service f55500bf-673b-41aa-bd4f-44cc4db2fe0a_com.vmware.vsphere.client</code></p> <p><code>Don't update service f55500bf-673b-41aa-bd4f-44cc4db2fe0a_com.vmware.vsphere.client</code></p> <p><code>Get service 083c382b-410e-</code><code>4068</code><code>-8f3f-46a6f384aabb_kv</code></p> <p><code>Update service 083c382b-410e-</code><code>4068</code><code>-8f3f-46a6f384aabb_kv; spec: /tmp/svcspec_9_qw87q7</code></p> <p><code>Get service a7b5290e-bdab-4b5f-835e-0e72025aec34</code></p> <p><code>Update service a7b5290e-bdab-4b5f-835e-0e72025aec34; spec: /tmp/svcspec_z6vwsink</code></p> <p><code>Get service 95d64ba2-42e2-41eb-a999-9b5b529c59c8</code></p> <p><code>Update service 95d64ba2-42e2-41eb-a999-9b5b529c59c8; spec: /tmp/svcspec_impoxn0n</code></p> <p><code>Get service af5ed366-41cf-42d0-8e4f-beae28ec85f1</code></p> <p><code>Update service af5ed366-41cf-42d0-8e4f-beae28ec85f1; spec: /tmp/svcspec_1yg0oc6w</code></p> <p><code>Get service f3163235-</code><code>3656</code><code>-</code><code>4761</code><code>-84aa-47f62508af07</code></p> <p><code>Update service f3163235-</code><code>3656</code><code>-</code><code>4761</code><code>-84aa-47f62508af07; spec: /tmp/svcspec_0ovp2qfp</code></p> <p><code>Get service c2c8bdc3-d12f-4ba4-9d46-ae02a3c84422</code></p> <p><code>Don't update service c2c8bdc3-d12f-4ba4-9d46-ae02a3c84422</code></p> <p><code>Get service 41c3a8d4-6fc2-</code><code>4681</code><code>-8ea2-11c04e38251d</code></p> <p><code>Update service 41c3a8d4-6fc2-</code><code>4681</code><code>-8ea2-11c04e38251d; spec: /tmp/svcspec_lbsneeph</code></p> <p><code>Get service 93aa8809-30dc-</code><code>4420</code><code>-ad6f-992274b208fc</code></p> <p><code>Update service 93aa8809-30dc-</code><code>4420</code><code>-ad6f-992274b208fc; spec: /tmp/svcspec__dpslmx_</code></p> <p><code>Get service d34464b3-8d33-</code><code>4666</code><code>-952b-12f86993dff9</code></p> <p><code>Update service d34464b3-8d33-</code><code>4666</code><code>-952b-12f86993dff9; spec: /tmp/svcspec_ix7p0ix2</code></p> <p><code>Get service 59be3a84-a8d1-43f7-a438-f96b05cd293f</code></p> <p><code>Update service 59be3a84-a8d1-43f7-a438-f96b05cd293f; spec: /tmp/svcspec_fzr_0wzy</code></p> <p><code>Get service b5857733-e43c-45a2-9eea-ffe828e342e5</code></p> <p><code>Update service b5857733-e43c-45a2-9eea-ffe828e342e5; spec: /tmp/svcspec_13838hnp</code></p> <p><code>Get service f4476059-f338-49e0-b593-bdbed7924b9f</code></p> <p><code>Update service f4476059-f338-49e0-b593-bdbed7924b9f; spec: /tmp/svcspec_heu48h53</code></p> <p><code>Get service 5cd17d52-143e-4f94-bdc9-460395aa2788</code></p> <p><code>Update service 5cd17d52-143e-4f94-bdc9-460395aa2788; spec: /tmp/svcspec_h44reiwc</code></p> <p><code>Get service eb4088cb-587c-462f-ae74-dee39ecd2d81</code></p> <p><code>Update service eb4088cb-587c-462f-ae74-dee39ecd2d81; spec: /tmp/svcspec_n3bn7nac</code></p> <p><code>Get service 77a8311e-f84b-4f6a-85af-5aad7410d07f</code></p> <p><code>Update service 77a8311e-f84b-4f6a-85af-5aad7410d07f; spec: /tmp/svcspec_4uagg_qw</code></p> <p><code>Get service 961ed673-</code><code>2103</code><code>-</code><code>4389</code><code>-a3ff-15fe1136c1c8</code></p> <p><code>Update service 961ed673-</code><code>2103</code><code>-</code><code>4389</code><code>-a3ff-15fe1136c1c8; spec: /tmp/svcspec_ama3feqa</code></p> <p><code>Get service dbc775d9-a14d-4c52-ab0f-04adc7f4e64e</code></p> <p><code>Update service dbc775d9-a14d-4c52-ab0f-04adc7f4e64e; spec: /tmp/svcspec_s28drpmn</code></p> <p><code>Get service 510feef8-19c7-4a8e-8b6f-81b20b391338</code></p> <p><code>Update service 510feef8-19c7-4a8e-8b6f-81b20b391338; spec: /tmp/svcspec_n3phr010</code></p> <p><code>Get service c4e34b09-</code><code>0335</code><code>-470e-a2cd-3fc032957b4c</code></p> <p><code>Update service c4e34b09-</code><code>0335</code><code>-470e-a2cd-3fc032957b4c; spec: /tmp/svcspec_ffb4f7ea</code></p> <p><code>Get service 721a3bc4-ecc8-4e0e-</code><code>8403</code><code>-1fd44e84e8cc</code></p> <p><code>Update service 721a3bc4-ecc8-4e0e-</code><code>8403</code><code>-1fd44e84e8cc; spec: /tmp/svcspec_g2yil2u2</code></p> <p><code>Get service 5989812c-590d-44cb-bc3a-8172ea0fa85f</code></p> <p><code>Update service 5989812c-590d-44cb-bc3a-8172ea0fa85f; spec: /tmp/svcspec_57e17tya</code></p> <p><code>Get service 083c382b-410e-</code><code>4068</code><code>-8f3f-46a6f384aabb</code></p> <p><code>Update service 083c382b-410e-</code><code>4068</code><code>-8f3f-46a6f384aabb; spec: /tmp/svcspec_5l0hyjrf</code></p> <p><code>Get service 5445743e-ca86-4e7a-85fc-106198e3a590</code></p> <p><code>Update service 5445743e-ca86-4e7a-85fc-106198e3a590; spec: /tmp/svcspec_jqs60mmd</code></p> <p><code>Get service 471ca192-a964-</code><code>4346</code><code>-9f1b-8a89c9684567</code></p> <p><code>Update service 471ca192-a964-</code><code>4346</code><code>-9f1b-8a89c9684567; spec: /tmp/svcspec_x4joob3k</code></p> <p><code>Get service eafc231a-</code><code>0493</code><code>-4d9f-</code><code>9351</code><code>-99c204ffc715</code></p> <p><code>Update service eafc231a-</code><code>0493</code><code>-4d9f-</code><code>9351</code><code>-99c204ffc715; spec: /tmp/svcspec_j1ln95s5</code></p> <p><code>Get service bf973dfe-</code><code>0161</code><code>-</code><code>4543</code><code>-befc-04fc23d1a1d1</code></p> <p><code>Update service bf973dfe-</code><code>0161</code><code>-</code><code>4543</code><code>-befc-04fc23d1a1d1; spec: /tmp/svcspec_f6ia8c_t</code></p> <p><code>Get service 7a5d1b63-e0f6-4eb1-8c99-2d1ffabf278b</code></p> <p><code>Update service 7a5d1b63-e0f6-4eb1-8c99-2d1ffabf278b; spec: /tmp/svcspec_udegb3_c</code></p> <p><code>Get service a3695900-ee1c-</code><code>4494</code><code>-9f2b-351b963cffa3</code></p> <p><code>Update service a3695900-ee1c-</code><code>4494</code><code>-9f2b-351b963cffa3; spec: /tmp/svcspec_3456cofm</code></p> <p><code>Get service 5b00a6a9-efa7-</code><code>4844</code><code>-</code><code>8144</code><code>-4b1e5f9d3fcc</code></p> <p><code>Update service 5b00a6a9-efa7-</code><code>4844</code><code>-</code><code>8144</code><code>-4b1e5f9d3fcc; spec: /tmp/svcspec_akqdsizn</code></p> <p><code>Get service 29f0ad2a-2d18-</code><code>4744</code><code>-8cdb-31b50764cbee</code></p> <p><code>Update service 29f0ad2a-2d18-</code><code>4744</code><code>-8cdb-31b50764cbee; spec: /tmp/svcspec_482hrta2</code></p> <p><code>Get service 29cbc4aa-</code><code>8893</code><code>-</code><code>4922</code><code>-afff-649cc25a6423</code></p> <p><code>Update service 29cbc4aa-</code><code>8893</code><code>-</code><code>4922</code><code>-afff-649cc25a6423; spec: /tmp/svcspec_3hrq76o2</code></p> <p><code>Get service 10e1363e-ef1d-47f0-b0b6-6cab7e37d144</code></p> <p><code>Update service 10e1363e-ef1d-47f0-b0b6-6cab7e37d144; spec: /tmp/svcspec_7zpp8yk9</code></p> <p><code>Get service b7ef48d7-c124-45e8-8d22-b850349027e2</code></p> <p><code>Update service b7ef48d7-c124-45e8-8d22-b850349027e2; spec: /tmp/svcspec_1s0nxvd4</code></p> <p><code>Get service 3ab8929e-91c8-42dc-aa31-786c45309610</code></p> <p><code>Update service 3ab8929e-91c8-42dc-aa31-786c45309610; spec: /tmp/svcspec_ti3j2mgb</code></p> <p><code>Get service 77e6dcf0-</code><code>5007</code><code>-42ff-b3be-3d496c6dc8b6</code></p> <p><code>Update service 77e6dcf0-</code><code>5007</code><code>-42ff-b3be-3d496c6dc8b6; spec: /tmp/svcspec_97989zbp</code></p> <p><code>Get service f55500bf-673b-41aa-bd4f-44cc4db2fe0a</code></p> <p><code>Update service f55500bf-673b-41aa-bd4f-44cc4db2fe0a; spec: /tmp/svcspec_1z9un83v</code></p> <p><code>Get service 083c382b-410e-</code><code>4068</code><code>-8f3f-46a6f384aabb_authz</code></p> <p><code>Update service 083c382b-410e-</code><code>4068</code><code>-8f3f-46a6f384aabb_authz; spec: /tmp/svcspec_k_f9rf40</code></p> <p><code>Get service 27a701a9-9b7b-</code><code>4072</code><code>-9ca8-a6695934395a</code></p> <p><code>Update service 27a701a9-9b7b-</code><code>4072</code><code>-9ca8-a6695934395a; spec: /tmp/svcspec_aut8vpy6</code></p> <p><code>Get service 3cc88284-b45c-48cd-8be1-f8d7bf53c2c3</code></p> <p><code>Update service 3cc88284-b45c-48cd-8be1-f8d7bf53c2c3; spec: /tmp/svcspec_fov0u_6x</code></p> <p><code>Get service f55500bf-673b-41aa-bd4f-44cc4db2fe0a_com.vmware.lcm.client</code></p> <p><code>Don't update service f55500bf-673b-41aa-bd4f-44cc4db2fe0a_com.vmware.lcm.client</code></p> <p><code>Get service f55500bf-673b-41aa-bd4f-44cc4db2fe0a_com.vmware.cloud.provider.services.plugin</code></p> <p><code>Don't update service f55500bf-673b-41aa-bd4f-44cc4db2fe0a_com.vmware.cloud.provider.services.plugin</code></p> <p><code>Get service f55500bf-673b-41aa-bd4f-44cc4db2fe0a_com.vmware.vcenter.wcp</code></p> <p><code>Don't update service f55500bf-673b-41aa-bd4f-44cc4db2fe0a_com.vmware.vcenter.wcp</code></p> <p><code>Updated </code><code>43</code> <code>service(s)</code></p> <p><code>Status : </code><code>60</code><code>% Completed [Reset vpxd-extension Cert...]                    </code></p> <p><code>2023</code><code>-</code><code>05</code><code>-10T07:</code><code>46</code><code>:</code><code>56</code><code>.882Z  Updating certificate </code><code>for</code> <code>"com.vmware.vim.eam"</code> <code>extension</code></p> <p></p> <p></p> <p><code>2023</code><code>-</code><code>05</code><code>-10T07:</code><code>46</code><code>:</code><code>57</code><code>.296Z  Updating certificate </code><code>for</code> <code>"com.vmware.rbd"</code> <code>extension</code></p> <p></p> <p></p> <p><code>2023</code><code>-</code><code>05</code><code>-10T07:</code><code>46</code><code>:</code><code>57</code><code>.693Z  Updating certificate </code><code>for</code> <code>"com.vmware.imagebuilder"</code> <code>extension</code></p> <p></p> <p><code>Reset status : </code><code>100</code><code>% Completed [Reset completed successfully]        </code></p> <p><code>                 </code> </p> <p><code>root</code><code>@localhost</code> <code>[ ~ ]# service-control --start --all</code></p> <p><code>Operation not cancellable. Please wait </code><code>for</code> <code>it to finish...</code></p> <p><code>Performing start operation on service lwsmd...</code></p> <p><code>Successfully started service lwsmd</code></p> <p><code>Performing start operation on service vmafdd...</code></p> <p><code>Successfully started service vmafdd</code></p> <p><code>Performing start operation on service vmdird...</code></p> <p><code>Successfully started service vmdird</code></p> <p><code>Performing start operation on service vmcad...</code></p> <p><code>Successfully started service vmcad</code></p> <p><code>Performing start operation on profile: ALL...</code></p> <p><code>Successfully started profile: ALL.</code></p> <p><code>Performing start operation on service observability...</code></p> <p><code>Successfully started service observability</code></p> <p><code>Performing start operation on service vmware-vdtc...</code></p> <p><code>Successfully started service vmware-vdtc</code></p> <p><code>Performing start operation on service vmware-pod...</code></p> <p><code>Service vmware-pod startup type is not automatic. Skip</code></p> </td></tr></tbody></table> 
<p>新证书查看</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p><code>root</code><code>@localhost</code> <code>[ ~ ]# </code><code>for</code> <code>i in $(/usr/lib/vmware-vmafd/bin/vecs-cli store list); </code><code>do</code> <code>echo STORE $i; sudo /usr/lib/vmware-vmafd/bin/vecs-cli entry list --store $i --text | egrep </code><code>"Alias|Not After"</code><code>; done</code></p> <p><code>STORE MACHINE_SSL_CERT</code></p> <p><code>Alias : __MACHINE_CERT</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>33</code><code>:</code><code>16</code> <code>2025</code> <code>GMT</code></p> <p><code>STORE TRUSTED_ROOTS</code></p> <p><code>Alias : e09cebe9d04da849d3bca621db2ea698fd64e652</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2031</code> <code>GMT</code></p> <p><code>Alias : 0104dc7a7afa5004498ee631992e0e96a88671eb</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>43</code><code>:</code><code>15</code> <code>2033</code> <code>GMT</code></p> <p><code>STORE TRUSTED_ROOT_CRLS</code></p> <p><code>Alias : 511b76b2e2e6386d2099d9aaf9843d66b1fbc8aa</code></p> <p><code>Alias : 1332df98c6c8aaa33c237fccc5401e27c2abb2e4</code></p> <p><code>STORE machine</code></p> <p><code>Alias : machine</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>36</code><code>:</code><code>52</code> <code>2025</code> <code>GMT</code></p> <p><code>STORE vsphere-webclient</code></p> <p><code>Alias : vsphere-webclient</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>36</code><code>:</code><code>54</code> <code>2025</code> <code>GMT</code></p> <p><code>STORE vpxd</code></p> <p><code>Alias : vpxd</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>36</code><code>:</code><code>54</code> <code>2025</code> <code>GMT</code></p> <p><code>STORE vpxd-extension</code></p> <p><code>Alias : vpxd-extension</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>36</code><code>:</code><code>56</code> <code>2025</code> <code>GMT</code></p> <p><code>STORE hvc</code></p> <p><code>Alias : hvc</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>36</code><code>:</code><code>58</code> <code>2025</code> <code>GMT</code></p> <p><code>STORE data-encipherment</code></p> <p><code>Alias : data-encipherment</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2031</code> <code>GMT</code></p> <p><code>STORE APPLMGMT_PASSWORD</code></p> <p><code>STORE SMS</code></p> <p><code>Alias : sms_self_signed</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>31</code><code>:</code><code>32</code> <code>2031</code> <code>GMT</code></p> <p><code>STORE wcp</code></p> <p><code>Alias : wcp</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>07</code><code>:</code><code>36</code><code>:</code><code>58</code> <code>2025</code> <code>GMT</code></p> <p><code>STORE BACKUP_STORE</code></p> <p><code>Alias : bkp___MACHINE_CERT</code></p> <p><code>            </code><code>Not After : May  </code><code>9</code> <code>19</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2023</code> <code>GMT</code></p> <p><code>Alias : bkp_machine</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2031</code> <code>GMT</code></p> <p><code>Alias : bkp_vsphere-webclient</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2031</code> <code>GMT</code></p> <p><code>Alias : bkp_vpxd</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2031</code> <code>GMT</code></p> <p><code>Alias : bkp_vpxd-extension</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2031</code> <code>GMT</code></p> <p><code>Alias : bkp_hvc</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2031</code> <code>GMT</code></p> <p><code>Alias : bkp_wcp</code></p> <p><code>            </code><code>Not After : May  </code><code>4</code> <code>07</code><code>:</code><code>26</code><code>:</code><code>41</code> <code>2031</code> <code>GMT</code></p> </td></tr></tbody></table> 
<p>更新vc  sts证书</p> 
<p>从官网下载文件checksts.py          fixsts.sh</p> 
<p>使用FTP工具传输到vc tmp文件夹下（可以新建一个文件夹）</p> 
<p>使用Xshell工具连接vc</p> 
<p>进入tmp文件下  cd /tmp        ls查看文件夹下文件</p> 
<p> 运行checksts.py       python  checksts.py</p> 
<pre><code class="hljs">#!/opt/vmware/bin/python


"""
Copyright 2020-2022 VMware, Inc.  All rights reserved. -- VMware Confidential
Author:  Keenan Matheny (keenanm@vmware.com)

"""
##### BEGIN IMPORTS #####

import os
import sys
import json
import subprocess
import re
import pprint
import ssl
from datetime import datetime, timedelta
import textwrap
from codecs import encode, decode
import subprocess
from time import sleep
try:
    # Python 3 hack.
    import urllib.request as urllib2
    import urllib.parse as urlparse
except ImportError:
    import urllib2
    import urlparse

sys.path.append(os.environ['VMWARE_PYTHON_PATH'])
from cis.defaults import def_by_os
sys.path.append(os.path.join(os.environ['VMWARE_CIS_HOME'],
                def_by_os('vmware-vmafd/lib64', 'vmafdd')))
import vmafd
from OpenSSL.crypto import (load_certificate, dump_privatekey, dump_certificate, X509, X509Name, PKey)
from OpenSSL.crypto import (TYPE_DSA, TYPE_RSA, FILETYPE_PEM, FILETYPE_ASN1 )

today = datetime.now()
today = today.strftime("%d-%m-%Y")

vcsa_kblink = "https://kb.vmware.com/s/article/76719"
win_kblink = "https://kb.vmware.com/s/article/79263"

##### END IMPORTS #####

class parseCert( object ):
    # Certificate parsing

    def format_subject_issuer(self, x509name): 
        items = []
        for item in x509name.get_components():
            items.append('%s=%s' %  (decode(item[0],'utf-8'), decode(item[1],'utf-8')))
        return ", ".join(items)

    def format_asn1_date(self, d):
        return datetime.strptime(decode(d,'utf-8'), '%Y%m%d%H%M%SZ').strftime("%Y-%m-%d %H:%M:%S GMT")

    def merge_cert(self, extensions, certificate):
        z = certificate.copy()
        z.update(extensions)
        return z

    def __init__(self, certdata):

        built_cert = certdata
        self.x509 = load_certificate(FILETYPE_PEM, built_cert)
        keytype = self.x509.get_pubkey().type()
        keytype_list = {TYPE_RSA:'rsaEncryption', TYPE_DSA:'dsaEncryption', 408:'id-ecPublicKey'}
        extension_list = ["extendedKeyUsage",
                        "keyUsage",
                        "subjectAltName",
                        "subjectKeyIdentifier",
                        "authorityKeyIdentifier"]
        key_type_str = keytype_list[keytype] if keytype in keytype_list else 'other'

        certificate = {}
        extension = {}
        for i in range(self.x509.get_extension_count()):
            critical = 'critical' if self.x509.get_extension(i).get_critical() else ''

            if decode(self.x509.get_extension(i).get_short_name(),'utf-8') in extension_list:
                extension[decode(self.x509.get_extension(i).get_short_name(),'utf-8')] = self.x509.get_extension(i).__str__()

        certificate = {'Thumbprint': decode(self.x509.digest('sha1'),'utf-8'), 'Version': self.x509.get_version(),
         'SignatureAlg' : decode(self.x509.get_signature_algorithm(),'utf-8'), 'Issuer' :self.format_subject_issuer(self.x509.get_issuer()), 
         'Valid From' : self.format_asn1_date(self.x509.get_notBefore()), 'Valid Until' : self.format_asn1_date(self.x509.get_notAfter()),
         'Subject' : self.format_subject_issuer(self.x509.get_subject())}
        
        combined = self.merge_cert(extension,certificate)
        cert_output = json.dumps(combined)

        self.subjectAltName = combined.get('subjectAltName')
        self.subject = combined.get('Subject')
        self.validfrom = combined.get('Valid From')
        self.validuntil = combined.get('Valid Until')
        self.thumbprint = combined.get('Thumbprint')
        self.subjectkey = combined.get('subjectKeyIdentifier')
        self.authkey = combined.get('authorityKeyIdentifier')
        self.combined = combined

class parseSts( object ):

    def __init__(self):
        self.processed = []
        self.results = {}
        self.results['expired'] = {}
        self.results['expired']['root'] = []
        self.results['expired']['leaf'] = []
        self.results['valid'] = {}
        self.results['valid']['root'] = []
        self.results['valid']['leaf'] = []

    def get_certs(self,force_refresh):
        urllib2.getproxies = lambda: {}
        vmafd_client = vmafd.client('localhost')
        domain_name = vmafd_client.GetDomainName()

        dc_name = vmafd_client.GetAffinitizedDC(domain_name, force_refresh)
        if vmafd_client.GetPNID() == dc_name:
            url = (
                'http://localhost:7080/idm/tenant/%s/certificates?scope=TENANT'
                % domain_name)
        else:
            url = (
                'https://%s/idm/tenant/%s/certificates?scope=TENANT'
                % (dc_name,domain_name))
        return json.loads(urllib2.urlopen(url).read().decode('utf-8'))

    def check_cert(self,certificate):
        cert = parseCert(certificate)
        certdetail = cert.combined

            #  Attempt to identify what type of certificate it is
        if cert.authkey:
            cert_type = "leaf"
        else:
            cert_type = "root"
        
        #  Try to only process a cert once
        if cert.thumbprint not in self.processed:
            # Date conversion
            self.processed.append(cert.thumbprint)
            exp = cert.validuntil.split()[0]
            conv_exp = datetime.strptime(exp, '%Y-%m-%d')
            exp = datetime.strftime(conv_exp, '%d-%m-%Y')
            now = datetime.strptime(today, '%d-%m-%Y')
            exp_date = datetime.strptime(exp, '%d-%m-%Y')
            
            # Get number of days until it expires
            diff = exp_date - now
            certdetail['daysUntil'] = diff.days

            # Sort expired certs into leafs and roots, put the rest in goodcerts.
            if exp_date &lt;= now:
                self.results['expired'][cert_type].append(certdetail)
            else:
                self.results['valid'][cert_type].append(certdetail)
    
    def execute(self):

        json = self.get_certs(force_refresh=False)
        for item in json:
            for certificate in item['certificates']:
                self.check_cert(certificate['encoded'])
        return self.results

def main():

    warning = False
    warningmsg = '''
    WARNING! 
    You have expired STS certificates.  Please follow the KB corresponding to your OS:
    VCSA:  %s
    Windows:  %s
    ''' % (vcsa_kblink, win_kblink)
    parse_sts = parseSts()
    results = parse_sts.execute()
    valid_count = len(results['valid']['leaf']) + len(results['valid']['root'])
    expired_count = len(results['expired']['leaf']) + len(results['expired']['root'])
          
    
    #### Display Valid ####
    print("\n%s VALID CERTS\n================" % valid_count)
    print("\n\tLEAF CERTS:\n")
    if len(results['valid']['leaf']) &gt; 0:
        for cert in results['valid']['leaf']:
            print("\t[] Certificate %s will expire in %s days (%s years)." % (cert['Thumbprint'], cert['daysUntil'], round(cert['daysUntil']/365)))
    else:
        print("\tNone")
    print("\n\tROOT CERTS:\n")
    if len(results['valid']['root']) &gt; 0:
        for cert in results['valid']['root']:
            print("\t[] Certificate %s will expire in %s days (%s years)." % (cert['Thumbprint'], cert['daysUntil'], round(cert['daysUntil']/365)))
    else:
        print("\tNone")


    #### Display expired ####
    print("\n%s EXPIRED CERTS\n================" % expired_count)
    print("\n\tLEAF CERTS:\n")
    if len(results['expired']['leaf']) &gt; 0:
        for cert in results['expired']['leaf']:
            print("\t[] Certificate: %s expired on %s!" % (cert.get('Thumbprint'),cert.get('Valid Until')))
            continue
    else:
        print("\tNone")

    print("\n\tROOT CERTS:\n")
    if len(results['expired']['root']) &gt; 0:
        for cert in results['expired']['root']:
            print("\t[] Certificate: %s expired on %s!" % (cert.get('Thumbprint'),cert.get('Valid Until')))
            continue
    else:
        print("\tNone")

    if expired_count &gt; 0:
        print(warningmsg)


if __name__ == '__main__':
    exit(main())

</code></pre> 
<p>         </p> 
<p>运行完可以查看sts证书是否过期，过期时间</p> 
<p>附加权限chmod +x fixsts.sh</p> 
<p>运行更新文件  ./fixsts.sh,完成后可以登录vc查看证书是否已经更新。</p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5570b42e90ae12b91036b5a43e171675/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java中的阻塞队列</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/158f970f06b8b982f60f4a8ad1bbd51c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用Vue 3和Vite构建基础案例整合饿了么UI、路由、组件和常用插件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>