<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JAVA设计模式 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JAVA设计模式" />
<meta property="og:description" content="JAVA设计模式 1.设计模式相关内容介绍1.1设计模式概述1.1.1 设计模式的分类 1.2类图1.1.1 类的表示方式1.2.2 类和类之间的表达方式1.2.2.1 关联关系1.2.2.2 聚合关系1.2.2.3 组合关系1.2.2.4 依赖关系1.2.2.5 继承关系1.2.2.6 实现关系 1.3软件设计原则1.3.1 开闭原则1.3.2 里式代换原则1.3.3 依赖倒转原则1.3.4 接口隔离原则1.3.5 合成复用原则 2.创建者模式2.1单例模式2.1.1 单例模式的实现2.1.2 序列化和反射会破坏单例模式1.2.3 Runtime饿汉式 2.3工厂方法模式2.3.1简单工厂模式2.3.2 工厂方法模式2.3.3 抽象工厂模式2.3.4 反射&#43;读配置文件实现解耦2.3.5 iterator 使用工厂类 2.4原型模式2.4.1原型模式实现2.4.2深克隆 2.5 建造者模式2.5.1 建造者模式的使用2.5.2 模式扩展（链式调用）2.5.3 创建者模式对比 3. 结构型模式3.1代理模式3.1.1 静态代理3.1.2 JDK代理3.1.3 CGLIB动态代理3.1.4 CGLIB动态代理3.1.5 优缺点和使用场景 3.2适配器模式3.2.1 代码实现3.2.2 对象模式适配器3.2.3 适配器应用场景和JDK源码解析 3.3装饰者模式3.3.1 代码实现3.3.2 好处3.3.3代理和装饰者的区别 3.4桥接模式3.4.1 代码实现3.4.2 好处和使用场景 3.5外观模式3.5.1优缺点和使用场景 3.6 享元模式3.6.1 享元模式的应用3.6.2 优缺点和使用场景 4. 行为型模式4.1模板方法模式4.1.1模板方法实现4.1.2 优缺点和适用场景4.1.3 JDK源码解析 4.2 策略模式4.2.1案例实现4.2.2 策略模式优缺点 4.3 命令模式4.3.1案例实现4.3.2 优缺点以及使用场景 4.4职责链模式4.4.1职责链模式代码实现4.4.2职责链模式优缺点 4.5状态模式4.5.1 优缺点和使用场景 4." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/870a4b47e88050fed39d44b623d234d3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-27T16:42:22+08:00" />
<meta property="article:modified_time" content="2023-12-27T16:42:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JAVA设计模式</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>JAVA设计模式</h4> 
 <ul><li><a href="#1_1" rel="nofollow">1.设计模式相关内容介绍</a></li><li><ul><li><a href="#11_3" rel="nofollow">1.1设计模式概述</a></li><li><ul><li><a href="#111__9" rel="nofollow">1.1.1 设计模式的分类</a></li></ul> 
   </li><li><a href="#12_16" rel="nofollow">1.2类图</a></li><li><ul><li><a href="#111__19" rel="nofollow">1.1.1 类的表示方式</a></li><li><a href="#122__31" rel="nofollow">1.2.2 类和类之间的表达方式</a></li><li><ul><li><a href="#1221__32" rel="nofollow">1.2.2.1 关联关系</a></li><li><a href="#1222__46" rel="nofollow">1.2.2.2 聚合关系</a></li><li><a href="#1223__51" rel="nofollow">1.2.2.3 组合关系</a></li><li><a href="#1224__55" rel="nofollow">1.2.2.4 依赖关系</a></li><li><a href="#1225__60" rel="nofollow">1.2.2.5 继承关系</a></li><li><a href="#1226__66" rel="nofollow">1.2.2.6 实现关系</a></li></ul> 
   </li></ul> 
   </li><li><a href="#13_70" rel="nofollow">1.3软件设计原则</a></li><li><ul><li><a href="#131__73" rel="nofollow">1.3.1 开闭原则</a></li><li><a href="#132__82" rel="nofollow">1.3.2 里式代换原则</a></li><li><a href="#133__89" rel="nofollow">1.3.3 依赖倒转原则</a></li><li><a href="#134__100" rel="nofollow">1.3.4 接口隔离原则</a></li><li><a href="#135__109" rel="nofollow">1.3.5 合成复用原则</a></li></ul> 
  </li></ul> 
  </li><li><a href="#2_126" rel="nofollow">2.创建者模式</a></li><li><ul><li><a href="#21_134" rel="nofollow">2.1单例模式</a></li><li><ul><li><a href="#211__141" rel="nofollow">2.1.1 单例模式的实现</a></li><li><a href="#212__249" rel="nofollow">2.1.2 序列化和反射会破坏单例模式</a></li><li><a href="#123__Runtime_318" rel="nofollow">1.2.3 Runtime饿汉式</a></li></ul> 
   </li><li><a href="#23_321" rel="nofollow">2.3工厂方法模式</a></li><li><ul><li><a href="#231_414" rel="nofollow">2.3.1简单工厂模式</a></li><li><a href="#232__466" rel="nofollow">2.3.2 工厂方法模式</a></li><li><a href="#233__595" rel="nofollow">2.3.3 抽象工厂模式</a></li><li><a href="#234__742" rel="nofollow">2.3.4 反射+读配置文件实现解耦</a></li><li><a href="#235__iterator__811" rel="nofollow">2.3.5 iterator 使用工厂类</a></li></ul> 
   </li><li><a href="#24_833" rel="nofollow">2.4原型模式</a></li><li><ul><li><a href="#241_839" rel="nofollow">2.4.1原型模式实现</a></li><li><a href="#242_981" rel="nofollow">2.4.2深克隆</a></li></ul> 
   </li><li><a href="#25__1024" rel="nofollow">2.5 建造者模式</a></li><li><ul><li><a href="#251__1039" rel="nofollow">2.5.1 建造者模式的使用</a></li><li><a href="#252__1191" rel="nofollow">2.5.2 模式扩展（链式调用）</a></li><li><a href="#253__1262" rel="nofollow">2.5.3 创建者模式对比</a></li></ul> 
  </li></ul> 
  </li><li><a href="#3__1270" rel="nofollow">3. 结构型模式</a></li><li><ul><li><a href="#31_1282" rel="nofollow">3.1代理模式</a></li><li><ul><li><a href="#311__1285" rel="nofollow">3.1.1 静态代理</a></li><li><a href="#312_JDK_1342" rel="nofollow">3.1.2 JDK代理</a></li><li><a href="#313_CGLIB_1440" rel="nofollow">3.1.3 CGLIB动态代理</a></li><li><a href="#314_CGLIB_1504" rel="nofollow">3.1.4 CGLIB动态代理</a></li><li><a href="#315__1512" rel="nofollow">3.1.5 优缺点和使用场景</a></li></ul> 
   </li><li><a href="#32_1528" rel="nofollow">3.2适配器模式</a></li><li><ul><li><a href="#321__1536" rel="nofollow">3.2.1 代码实现</a></li><li><a href="#322__1652" rel="nofollow">3.2.2 对象模式适配器</a></li><li><a href="#323_JDK_1681" rel="nofollow">3.2.3 适配器应用场景和JDK源码解析</a></li></ul> 
   </li><li><a href="#33_1694" rel="nofollow">3.3装饰者模式</a></li><li><ul><li><a href="#331__1704" rel="nofollow">3.3.1 代码实现</a></li><li><a href="#332__1863" rel="nofollow">3.3.2 好处</a></li><li><a href="#333_1867" rel="nofollow">3.3.3代理和装饰者的区别</a></li></ul> 
   </li><li><a href="#34_1881" rel="nofollow">3.4桥接模式</a></li><li><ul><li><a href="#341__1889" rel="nofollow">3.4.1 代码实现</a></li><li><a href="#342__1991" rel="nofollow">3.4.2 好处和使用场景</a></li></ul> 
   </li><li><a href="#35_1999" rel="nofollow">3.5外观模式</a></li><li><ul><li><a href="#351_2107" rel="nofollow">3.5.1优缺点和使用场景</a></li></ul> 
   </li><li><a href="#36__2115" rel="nofollow">3.6 享元模式</a></li><li><ul><li><a href="#361__2126" rel="nofollow">3.6.1 享元模式的应用</a></li><li><a href="#362__2223" rel="nofollow">3.6.2 优缺点和使用场景</a></li></ul> 
  </li></ul> 
  </li><li><a href="#4__2229" rel="nofollow">4. 行为型模式</a></li><li><ul><li><a href="#41_2245" rel="nofollow">4.1模板方法模式</a></li><li><ul><li><a href="#411_2260" rel="nofollow">4.1.1模板方法实现</a></li><li><a href="#412__2352" rel="nofollow">4.1.2 优缺点和适用场景</a></li><li><a href="#413_JDK_2365" rel="nofollow">4.1.3 JDK源码解析</a></li></ul> 
   </li><li><a href="#42__2410" rel="nofollow">4.2 策略模式</a></li><li><ul><li><a href="#421_2426" rel="nofollow">4.2.1案例实现</a></li><li><a href="#422__2525" rel="nofollow">4.2.2 策略模式优缺点</a></li></ul> 
   </li><li><a href="#43__2544" rel="nofollow">4.3 命令模式</a></li><li><ul><li><a href="#431_2554" rel="nofollow">4.3.1案例实现</a></li><li><a href="#432__2695" rel="nofollow">4.3.2 优缺点以及使用场景</a></li></ul> 
   </li><li><a href="#44_2710" rel="nofollow">4.4职责链模式</a></li><li><ul><li><a href="#441_2718" rel="nofollow">4.4.1职责链模式代码实现</a></li><li><a href="#442_2890" rel="nofollow">4.4.2职责链模式优缺点</a></li></ul> 
   </li><li><a href="#45_2910" rel="nofollow">4.5状态模式</a></li><li><ul><li><a href="#451___3115" rel="nofollow">4.5.1 优缺点和使用场景</a></li></ul> 
   </li><li><a href="#46_3128" rel="nofollow">4.6观察者模式</a></li><li><ul><li><a href="#461__3136" rel="nofollow">4.6.1 案例实现</a></li><li><a href="#462__3242" rel="nofollow">4.6.2 优缺点和使用场景</a></li></ul> 
   </li><li><a href="#47_3252" rel="nofollow">4.7迭代器模式</a></li><li><ul><li><a href="#471_3259" rel="nofollow">4.7.1迭代器模式代码实现</a></li><li><a href="#472_3408" rel="nofollow">4.7.2优缺点和使用场景</a></li></ul> 
   </li><li><a href="#48_3421" rel="nofollow">4.8访问者模式</a></li><li><ul><li><a href="#481_3428" rel="nofollow">4.8.1访问者代码实现</a></li><li><a href="#482__3552" rel="nofollow">4.8.2 优缺点和使用场景</a></li></ul> 
   </li><li><a href="#49_3564" rel="nofollow">4.9备忘录模式</a></li><li><ul><li><a href="#491__3573" rel="nofollow">4.9.1 备忘录模式代码实现</a></li><li><ul><li><a href="#4911__3578" rel="nofollow">4.9.1.1 白箱备忘录模式</a></li><li><a href="#4911___3765" rel="nofollow">4.9.1.1 黑箱备忘录模式</a></li><li><a href="#492__3947" rel="nofollow">4.9.2 优缺点和使用场景</a></li></ul> 
   </li></ul> 
   </li><li><a href="#410_3965" rel="nofollow">4.10解释器模式</a></li><li><ul><li><a href="#4101__3973" rel="nofollow">4.10.1 代码运行</a></li><li><a href="#4102___4107" rel="nofollow">4.10.2 优缺点</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_1"></a>1.设计模式相关内容介绍</h2> 
<p>本篇笔记对于JAVA23中设计模式，记录下来了21种，剩下的两种个人认为耦合度很高，看起来就很不舒服就没在本篇本章中做出记录</p> 
<h3><a id="11_3"></a>1.1设计模式概述</h3> 
<ul><li>设计模式，是一套被反复使用，多数人知晓的，经过分给编目的，代码设计经验的总结，它描述了软件设计过程中的一些不断重复发生的问题，以及该问题的解决方案，也就是说，它是解决特定问题的一系列套路，具有一定的普遍性，可以反复使用。</li><li><strong>设计模式的本质是面向对象设计原则的实际运用，是对类的封装性，继承性，和多态性以及类的关联关系和组合关系的充分理解。</strong><br> 掌握设计模式可以提高程序员的思维能力，编程能力和设计能力<br> 使程序更加标准化，代码编制更加工业化，使软件开发效率大大提高，继承和多态性以及类的关联关系和组合关系的充分理解</li></ul> 
<h4><a id="111__9"></a>1.1.1 设计模式的分类</h4> 
<ul><li><strong>创建型模式</strong><br> 用于描述怎样创建对象，它的主要特征是将对象的创建与使用分离，GoF（四人组）书中提供了单例，原型，工厂方法，抽象工厂，建造者等5种创建型模式</li><li><strong>结构型模式</strong><br> 用于描述如何将类或者对象按某种布局组成更大的结构，GoF（四人组）中提供了代理，适配器，桥接，外观，享元，组合等7中结构型模式</li><li><strong>行为型模式</strong><br> 用于描述类或者对象之间怎样相互协作，共同完成单个对象无法独立完成的任务，以及怎样分配职责GoF(四人组)书中提供了磨板方法，策略，命令，职责链，状态，观察者，中介者，迭代器，访问者，备忘录，解释器等11中行为型模式</li></ul> 
<h3><a id="12_16"></a>1.2类图</h3> 
<p>在软件工程中，类图是一种静态的结构图，描述了系统的类的集合，类的属性和类之间的关系，可以简化人们对系统的理解<br> 类图是系统分析和设计阶段的产物，是系统测试和编码的重要模型</p> 
<h4><a id="111__19"></a>1.1.1 类的表示方式</h4> 
<p>类使用包含类名，属性，和方法，且带有分割线的矩形来表示，如图下的Employee类，它包含name，age和address这三个属性以及worf()方法</p> 
<p><img src="https://images2.imgbox.com/09/e5/pHoS1EOC_o.png" alt="在这里插入图片描述"><br> 属性/方法名称前加的加号和减号表示了这个属性/方法的可见性，表示可见性的符号有三种<br> +：表示public<br> -：表示private<br> #:表示protected<br> 属性的完整表示方式是：可见性 名称 ：类型 [ =缺省值]<br> 方法的完整表示方式是: 可见性 名称（参数列表）返回值类型</p> 
<h4><a id="122__31"></a>1.2.2 类和类之间的表达方式</h4> 
<h5><a id="1221__32"></a>1.2.2.1 关联关系</h5> 
<p>关联关系是对象常用的一种引用关系，用于表示一类对象和另一类对象的联系，如：学生和老师，师傅和徒弟，妻子和丈夫等，关联关系是类与类中最常见的一种关系</p> 
<ul><li>1.单向关联<br> <img src="https://images2.imgbox.com/80/bd/DS3aOUyJ_o.png" alt="在这里插入图片描述"><br> 如图，单向关联用一个箭头表示，上图中每一个顾客都有一个地址，这通过让Customer类持有一个类型为Address的成员变量类实现</li><li>2.双向关联<br> <img src="https://images2.imgbox.com/2f/82/vrDpZWGy_o.png" alt="在这里插入图片描述"><br> 双向关联是各吃持有对象的变量为双向关联<br> 双向关联用一个不带箭头的直线表示，上图中在Customer类中维护了一个List&lt; Produce&gt; ,表示一个顾客可以购买多个商品，在Product中维护了一个顾客，双方都是互相关联的</li><li>自关联<br> <img src="https://images2.imgbox.com/0c/df/VFMY3fhk_o.png" alt="在这里插入图片描述"></li><li>Node类包含了自己，链表类型就是用这种表示的</li></ul> 
<h5><a id="1222__46"></a>1.2.2.2 聚合关系</h5> 
<ul><li>聚合关系是关联关系的一种，是强关联关系，是整体与部分之间关联</li><li>聚合关系也是通过成员变量来实现的，其中成员变量是整体对象的一部分，但是成员对象可以脱离整体而独立存在，例如学校和老师，学校包含老师，如果学校停办了老师依然存在，</li><li>聚合关系使用空心菱形实现来表示，菱形指向整体<br> <img src="https://images2.imgbox.com/ff/e8/O4oTjoJi_o.png" alt="在这里插入图片描述"></li></ul> 
<h5><a id="1223__51"></a>1.2.2.3 组合关系</h5> 
<ul><li>组合表示类之间的整体与部分之间的关系，但它是一种跟强烈的聚合关系</li><li>在组合对象中整体对象可以控制部分对象的生命周期，一旦整体对象不在了，部分对象也将不在，部分对象不能脱离整体对象而存在，头和嘴的关系，头没有了，嘴也不复存在<br> <img src="https://images2.imgbox.com/65/c0/30CBvC2e_o.png" alt="在这里插入图片描述"></li></ul> 
<h5><a id="1224__55"></a>1.2.2.4 依赖关系</h5> 
<ul><li>依赖关系是一种使用关系，它是对象之间耦合度最弱的一种关联方式，是临时性关联，在代码中某个类的方法通过局部变量，方法的参数或者对静态方法的调用来访问另一个类中某些方法来完成一个职责</li><li>依赖关系使用带箭头的虚线表示，箭头从使用类指向被依赖的类。引用关系</li></ul> 
<p><img src="https://images2.imgbox.com/c5/2e/nx65zhfh_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="1225__60"></a>1.2.2.5 继承关系</h5> 
<ul><li>继承关系是对象之间耦合度最大的一种关系，表示一般与特殊的关系，是父类与子类的一种关系是一种继承关系</li><li>泛化关系用带空心三角箭头的实线来表示，箭头从子类指向父类，代码实现时，使用面向对象的继承机制来实现泛化关系，例如Student和Teacher都是Persion的子类<br> <img src="https://images2.imgbox.com/24/66/Exl8Q5yt_o.png" alt="在这里插入图片描述"></li></ul> 
<h5><a id="1226__66"></a>1.2.2.6 实现关系</h5> 
<ul><li>实现关系是接口与实现类之间的关系，在这种关系中类实现了接口，类中的操作实现了接口中所声明的所有抽象操作。</li><li>使用空心三角虚线来表示，箭头从实现类指向了接口，例如汽车和船实现了交通工具<br> <img src="https://images2.imgbox.com/33/86/yPduZvxw_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="13_70"></a>1.3软件设计原则</h3> 
<ul><li>在软件开发中，为了提高软件系统的可维护性和复用性，增加软件和可扩展和灵活性，程序员要尽量根据6条原则来开发程序，从而提高软件开发效率，节约软件开发成本</li></ul> 
<h4><a id="131__73"></a>1.3.1 开闭原则</h4> 
<ul><li><code>对扩展开放，对修改关闭</code>在程序需要进行扩展的时候，不能去修改原有的代码，实现一个热插拔的效果，简言之，是为了使程序的扩展性好，易于维护和升级</li><li>想要达到这样的效果我们需要使用接口和抽象类</li><li>因为抽象灵活性好，适应性广，只要抽象的合理，介意基本保持软件架构的稳定，从软件中易变的细节可以从抽象派生来的实现类进行扩展，当软件需要发生改变时，只需要重新派生一个实现类来扩展就好了</li></ul> 
<p><strong>通过车案例说明</strong><br> <img src="https://images2.imgbox.com/14/28/alKwgZaV_o.png" alt="在这里插入图片描述"></p> 
<ul><li>一个抽象类，车，aodi,benchi,baoma，实现了车重写了价格方法，客户client想买车，只需要去4s店里面告诉他你想要的车型号，他就会帮你查出价格，除了这三辆车，想要在添加也不需要修改源代码，只需要在添加一个实现类即可</li></ul> 
<h4><a id="132__82"></a>1.3.2 里式代换原则</h4> 
<ul><li>里式代换原则是面向对象设计的基本原则之一</li><li>里式代还原则：任何基类可以出现的地方，子类一定可以出现，通俗理解：子类可以扩展父类的功能，但不改变父类原有的功能，换句话说，除添加新的方法完成新增功能外，尽量不要重写父类的方法</li><li>例：正方形不是长方形</li><li>在数学领域中，正方是是长方形，因为正方形的四个边都相等，所以正方形是长方形的一种特殊情况。</li><li><strong>以下是一个例子，需要做一个正方形扩容的方法，判断宽&lt;长的话宽+1，传参使用长方形，虽说正方形也是长方形，但是正方形四条边相等，是无法进入到这个while循环的</strong><br> <img src="https://images2.imgbox.com/63/c7/3R8Hemjq_o.png" alt="在这里插入图片描述"></li></ul> 
<h4><a id="133__89"></a>1.3.3 依赖倒转原则</h4> 
<p>高层模块不应该依赖底层模块，两者都应该依赖其抽象，抽象不应该依赖细节，细节应该依赖抽象，简单说就是要求对抽象进行编程，不要对实现进行编程，这样就降低了客户与实现模块的耦和</p> 
<ul><li>通过案例演示：</li><li>现在要组装电脑，需要配件cpu，内存条，硬盘只有这些配件都有了，计算机才能正常的运行，选择cpu有很多的选择，如Inter，ADM等，硬盘可以选择希捷，西数等内存条可以选择金士顿，海盗船等。<br> 类图如下</li><li>电脑中对以下指定配件进行引用，编写getset方法，用户在测试类中实例化配件，实例化电脑，将配件传给电脑就可以运行了<br> <img src="https://images2.imgbox.com/39/77/LU5ikpoT_o.png" alt="在这里插入图片描述"></li><li>上述关系图是可以实现功能的，但是组装电脑貌似只能用InterCpu，呢欧村条只能用金士顿的，硬盘只能用希捷的，这对用户不友好，用户肯定是想自己组装电脑的时候用上自己喜欢的配件，但是用喜欢的配件就得需要更改代码了，违反了开闭原则，于是就衍生下面这张图，定义接口，用户想用什么cpu就新开一个类去继承接口。</li></ul> 
<p><img src="https://images2.imgbox.com/74/8b/1m8QTxFj_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="134__100"></a>1.3.4 接口隔离原则</h4> 
<ul><li>客户端不应该被迫依赖于它不使用的方法，一个类对于另一个类的依赖应该建立在最小的接口上<br> <img src="https://images2.imgbox.com/1c/cc/ni3dtSw9_o.png" alt="在这里插入图片描述"></li><li>在例：</li></ul> 
<p><img src="https://images2.imgbox.com/f8/6e/XlA8Nezt_o.png" alt="在这里插入图片描述"></p> 
<ul><li>改进如下，我现在想实现哪种就实现哪种再也不用担心，他有3个功能，我就想实现1个还要被迫的实现另外两个</li></ul> 
<p><img src="https://images2.imgbox.com/fc/07/mAhWzLgI_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="135__109"></a>1.3.5 合成复用原则</h4> 
<p>合成复用原则指的是：尽量先使用组合或者聚合等关联关系来实现，其次才考虑使用继承关系来实现<br> 通常类的复用分为继承复用和合成复用两种<br> 继承复用虽然有简单易实现的优点，但是它也存在以下缺点</p> 
<ol><li>继承复用破坏了类的封装性，因此继承会将父类的实现细节暴露给子类，父类对子类是透明的，所以这种复用又被称为白箱复用</li><li>子类和父类的耦合度高，父类实现的热河改变都会导致子类的实现发生变化，这不利于维护类的扩展和维护</li><li>它限制了复用的灵活性，从父类继承而来的实现是静态的，在编译时候就已定义，不会发生改变</li></ol> 
<ul><li>举例说明<br> 汽车按照动力源可以分为：汽油汽车，电动汽车，等，按颜色划分可以分为白色汽车，红色汽车，黑色汽车等，如果同时考虑这两种就会产生如下：</li></ul> 
<p><img src="https://images2.imgbox.com/43/b6/Un9RPSVP_o.png" alt="在这里插入图片描述"></p> 
<ul><li>可以更改为颜色接口，有对应的颜色实现类，定义一个Car类，引颜色接口，并且Car类有两个实现类<br> <img src="https://images2.imgbox.com/b8/4c/cxpCgoi0_o.png" alt="在这里插入图片描述"></li></ul> 
<h2><a id="2_126"></a>2.创建者模式</h2> 
<ul><li>创建者模式主要关注的是怎样创建对象，它的主要特点是将对象的创建和使用分离</li><li>创建型模式分为：</li><li>单例模式</li><li>工厂方法模式</li><li>抽象工厂模式</li><li>原型模式</li><li>建造者模式</li></ul> 
<h3><a id="21_134"></a>2.1单例模式</h3> 
<ul><li>单例模式，是java中最简单的设计模式之一，这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式</li><li>这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保有单个对象被创建，这个类提供了唯一一的对象方式可以直接实例化对象，不需要被创建</li><li>单例模式主要有以下角色：</li><li>单例类：只能创建一个对象的实例</li><li>访问类：使用单例类</li></ul> 
<hr> 
<h4><a id="211__141"></a>2.1.1 单例模式的实现</h4> 
<p>单例模式分为懒汉式和饿汉式<br> 饿汉式：类加载就会导致该单例对象被创建<br> 懒汉式：类加载不会导致该单例对象被创建，而是首次使用对象才会被创建</p> 
<ul><li>饿汉式1：静态变量方式</li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc  饿汉式，类加载的时候就会实例化
 * @time 2023--12--22--9:54
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singletons</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">//私有构造方法，这样外部就无法通过构造方法来实例化对象</span>
    <span class="token keyword">private</span> <span class="token class-name">Singletons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token comment">//在本类中创建对象</span>
    <span class="token keyword">private</span>  <span class="token keyword">static</span>  <span class="token class-name">Singletons</span> singletons<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Singletons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//外部可以通过对象.方法的方式拿到创建的实例对象</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span>  <span class="token class-name">Singletons</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span>  singletons<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
         <span class="token class-name">Singletons</span> instance <span class="token operator">=</span> <span class="token class-name">Singletons</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Singletons</span> instance2 <span class="token operator">=</span> <span class="token class-name">Singletons</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>instance<span class="token operator">==</span>instance2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//结果为true证明是一个对象</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>饿汉式2：静态代码块方式</li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc  饿汉式通过静态代码块
 * @time 2023--12--22--10:02
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singgletons2</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//私有化</span>
    <span class="token keyword">private</span> <span class="token class-name">Singgletons2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span>  <span class="token class-name">Singgletons2</span> singgletons2<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{<!-- --></span>
        singgletons2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Singgletons2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//外部可以通过对象.方法的方式拿到创建的实例对象</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singgletons2</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span>  singgletons2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ps:静态变量会随着类的加载而创建，这样操作如果加载了一直不用势必会造成内存的浪费</p> 
<ul><li>单例模式</li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc 单例模式
 * @time 2023--12--22--10:14
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singletons3</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token comment">//私有化构造器</span>
    <span class="token keyword">private</span> <span class="token class-name">Singletons3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token comment">//定义静态变量，并且使用volatile,volatile可以保证在多线程环境下的可见性和有序性</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span>  <span class="token keyword">volatile</span>   <span class="token class-name">Singletons3</span> <span class="token class-name">Instance</span><span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token comment">//初始化方法</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singletons3</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//双重检查的方式，既有了加锁安全的方式又不会造成因为每个线程都上锁的堵塞</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Instance</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//对Instance是null的情况进行加锁，是写操作保证线程的安全</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singletons3</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Instance</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">Instance</span><span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singletons3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token class-name">Instance</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li>单例模式静态内部类的实现</li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc  懒汉式，静态内部类实现
 * @time 2023--12--22--10:24
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singletons4</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Singletons4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonsHead</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">static</span>    <span class="token class-name">Singletons4</span> <span class="token constant">SINGLETONS</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Singletons4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span>  <span class="token class-name">Singletons4</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonsHead</span><span class="token punctuation">.</span><span class="token constant">SINGLETONS</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="212__249"></a>2.1.2 序列化和反射会破坏单例模式</h4> 
<ul><li>以下通过读文件流，写文件流，最后读的两个对象地址值是不一样的</li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--22--10:42
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo5</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>  <span class="token keyword">throws</span>  <span class="token class-name">Exception</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">//        writeSingletons();</span>
        <span class="token function">readSingletons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">readSingletons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//读文件流</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">readSingletons</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span>  <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>

        <span class="token keyword">final</span> <span class="token class-name">ObjectInputStream</span> objectInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\Users\\20505\\Desktop\\ctg\\5.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Singletons4</span> instance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singletons4</span><span class="token punctuation">)</span> objectInputStream<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        objectInputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//写文件流</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">writeSingletons</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span>  <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>

        <span class="token keyword">final</span> <span class="token class-name">Singletons4</span> instance <span class="token operator">=</span> <span class="token class-name">Singletons4</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">final</span> <span class="token class-name">ObjectOutputStream</span> objectOutputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\Users\\20505\\Desktop\\ctg\\5.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//写入对象</span>
        objectOutputStream<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//释放资源</span>
        objectOutputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li> <p>理由：writeObject是没有问题的，readObject也可以成功的读取到对象，但是</p> </li><li> <p>readObject底层他读出对象之后会判断对象中又没有readResolve（）方法，如果有这个方法就返回里面的值，如果没有就返回一个新的对象，这就是为什么两次读出来的数据是不一样的<br> <img src="https://images2.imgbox.com/80/20/f65qrU4Y_o.png" alt="在这里插入图片描述"></p> </li><li> <p>代码改正</p> </li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc  懒汉式，静态内部类实现
 * @time 2023--12--22--10:24
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singletons4</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Singletons4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonsHead</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">static</span>    <span class="token class-name">Singletons4</span> <span class="token constant">SINGLETONS</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Singletons4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span>  <span class="token class-name">Singletons4</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonsHead</span><span class="token punctuation">.</span><span class="token constant">SINGLETONS</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">readResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonsHead</span><span class="token punctuation">.</span><span class="token constant">SINGLETONS</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li>最后的结果是正确的<br> <img src="https://images2.imgbox.com/ad/a3/4DlDsEPV_o.png" alt="在这里插入图片描述"></li></ul> 
<h4><a id="123__Runtime_318"></a>1.2.3 Runtime饿汉式</h4> 
<ul><li>Runtime是java.long包下的一个类，是饿汉式的<br> <img src="https://images2.imgbox.com/9e/bd/LiV8BWEp_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="23_321"></a>2.3工厂方法模式</h3> 
<ul><li>点咖啡案例<br> 设计一个咖啡店(Coffee)并定义两个子类，（美式咖啡（AmericanCoffee）和拿铁咖啡(LatteCoffee)）;在设计一个咖啡店（CoffeeStore），咖啡店具有点咖啡的功能<br> <img src="https://images2.imgbox.com/9e/43/GV8Jgk7Z_o.png" alt="在这里插入图片描述"></li><li>代码实现</li></ul> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc   咖啡的抽象类
 * @time 2023--12--22--15:33
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Coffee</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">//咖啡名字</span>
   <span class="token keyword">abstract</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addMilk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"加牛奶"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">addsugar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"加糖"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc   美式咖啡
 * @time 2023--12--22--15:35
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanCoffee</span> <span class="token keyword">extends</span> <span class="token class-name">Coffee</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"我是美式咖啡"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc拿铁咖啡
 * @time 2023--12--22--15:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LatteCoffee</span> <span class="token keyword">extends</span> <span class="token class-name">Coffee</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"我是拿铁咖啡"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc  咖啡店
 * @time 2023--12--22--15:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeStore</span> <span class="token punctuation">{<!-- --></span>

    <span class="token class-name">Coffee</span> coffee<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"american"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            coffee<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"latte"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            coffee<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span>  <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"对不起咖啡点完了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//加糖，加牛奶</span>
        coffee<span class="token punctuation">.</span><span class="token function">addsugar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addMilk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span>  coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc   测试类
 * @time 2023--12--22--15:39
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//实例化咖啡店</span>
        <span class="token class-name">CoffeeStore</span> coffeeStore<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">CoffeeStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//向咖啡店要一杯美式咖啡</span>
        <span class="token keyword">final</span> <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> coffeeStore<span class="token punctuation">.</span><span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token string">"american"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coffee<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li>在java中万物皆对象这些对象都需要创建，如果创建的时候直接new对象，会让对象的耦合严重，假如我们要更换对象，所有new对象的地方都要修改一遍，这显然违背了开闭原则，如果我们使用工厂来生产对象，沃恩就之和工厂就可以了，彻底和对象解耦，如果要更换对象，直接在工厂历更换对象即可，达到了对象的解耦目的，所哟说工厂模式最大的优点就是<strong>解耦</strong></li></ul> 
<h4><a id="231_414"></a>2.3.1简单工厂模式</h4> 
<ul><li>简单工厂其实更像是一种习惯并不属于规范的工厂模式，有些人为了方便会这样书写，<br> <img src="https://images2.imgbox.com/1a/76/CkTG990u_o.png" alt="在这里插入图片描述"></li><li>代码如下,对咖啡店进行代码修改(CoffeeStore ),新增咖啡工厂类SimpleCoffeeFactory ，简单工厂实现了咖啡店的解耦，但是并没有咖啡工厂类还继续存在耦合，还需要继续修改，</li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc  咖啡店
 * @time 2023--12--22--15:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeStore</span> <span class="token punctuation">{<!-- --></span>

    <span class="token class-name">Coffee</span> coffee<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

        <span class="token comment">//调用咖啡简单工厂模式，</span>
       
      coffee<span class="token operator">=</span><span class="token class-name">SimpleCoffeeFactory</span><span class="token punctuation">.</span><span class="token function">getinterFactor</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//加糖，加牛奶</span>
        coffee<span class="token punctuation">.</span><span class="token function">addsugar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addMilk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span>  coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc   咖啡工厂类，
 * @time 2023--12--22--15:46
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCoffeeFactory</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">getinterFactor</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"american"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"latte"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span>  <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"对不起咖啡点完了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li>简单工厂优缺点：</li><li>优点:封装了创建对象的过程，可以通过参数直接获取对象，把对象的创建和业务逻辑分开，这样就避免了直接修改客户代码，</li><li>缺点：违背了开闭原则，增加产品的时候还需要修改工厂的代码</li></ul> 
<h4><a id="232__466"></a>2.3.2 工厂方法模式</h4> 
<ul><li>针对于上面的问题可以使用工厂方法模式可以完美解决问题并且遵守开闭原则</li><li>定义一个用于创建对象的接口，让子类决定实例化哪个产品对象，工厂方法使一个产品类的实例化延迟到其工厂的子类</li><li>抽象工厂（Abstract Factory）提供了创建产品的接口，调用者可以通过它访问具体工厂的工厂方法来创建产品</li><li>具体工厂（ConcreleFactory）主要是实现抽象工厂中的抽象方法，完成具体产品的创建</li><li>抽象产品（Product）定义了产品的规范，描述了产品的主要特性和习惯</li><li>具体产品（ConCreteProduct）实现了抽象产品角色所定义的接口，由具体工厂来创建，它与具体工厂一 一对应<br> <img src="https://images2.imgbox.com/52/d5/sUjR9WJp_o.png" alt="在这里插入图片描述"></li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc   咖啡的抽象类
 * @time 2023--12--22--15:33
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Coffee</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">//咖啡名字</span>
   <span class="token keyword">abstract</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addMilk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"加牛奶"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">addsugar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"加糖"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc   美式咖啡
 * @time 2023--12--22--15:35
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanCoffee</span> <span class="token keyword">extends</span> <span class="token class-name">Coffee</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"我是美式咖啡"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc拿铁咖啡
 * @time 2023--12--22--15:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LatteCoffee</span> <span class="token keyword">extends</span> <span class="token class-name">Coffee</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"我是拿铁咖啡"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc 接口
 * @time 2023--12--22--16:02
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{<!-- --></span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffeeFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--22--16:03
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanCoffeeFactory</span> <span class="token keyword">implements</span>  <span class="token class-name">CoffeeFactory</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffeeFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--22--16:04
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LatteCoffeeCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffeeFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc  咖啡店
 * @time 2023--12--22--15:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeStore</span> <span class="token punctuation">{<!-- --></span>

    <span class="token class-name">CoffeeFactory</span> coffeeFactory<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCoffee</span><span class="token punctuation">(</span> <span class="token class-name">CoffeeFactory</span> coffeeFactory<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>coffeeFactory <span class="token operator">=</span> coffeeFactory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

         <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffeeFactory<span class="token punctuation">.</span><span class="token function">createCoffeeFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//加糖，加牛奶</span>
        coffee<span class="token punctuation">.</span><span class="token function">addsugar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addMilk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span>  coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc   测试类
 * @time 2023--12--22--15:39
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//实例化咖啡店</span>
        <span class="token class-name">CoffeeStore</span> coffeeStore<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">CoffeeStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//向咖啡店要一杯美式咖啡</span>
        coffeeStore<span class="token punctuation">.</span><span class="token function">setCoffee</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AmericanCoffeeFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">final</span> <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> coffeeStore<span class="token punctuation">.</span><span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coffee<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> 
<h4><a id="233__595"></a>2.3.3 抽象工厂模式</h4> 
<ul><li>前面的介绍的工厂模式只适用于一系列产品的生产，比如畜牧业只养牲畜，电视机厂家只生产电视机，笔记本厂家只能生产笔记本 等等，</li><li>这些工厂只生产同类的产品，同种类产品称之为同级产品，也就是说：工厂方法模式只考虑同等级的产品，但是在现实生活中许多工厂是综合性工厂，能生产多等级（种类）的产品，如果电器成产厂家又生产洗衣机或者空调，大学既有计算机专业还有其他专业等，如果不同等级的产品还用工行模式来生产<strong>会产生类爆炸，即创建的类特别多</strong><br> <img src="https://images2.imgbox.com/c6/b2/ix9thZTF_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/68/7f/32GCTRYH_o.png" alt="在这里插入图片描述"></li><li>是一种类访问类提供一个创建一组相关或相互依赖对象的接口，且访问类无需指定所要产品的具体类就能得到同族的不同等级的产品模式结构</li><li>抽象工厂模式是工厂模式的升级版本，工厂模式只适用于生产同一级别的产品，抽象工厂模式可生产多个等级的产品</li></ul> 
<hr> 
<ul><li>现咖啡店的业务发生了变化，不仅要生产咖啡还要生产甜点，如提拉米苏，抹茶慕斯等等，要是按照工厂模式需要创建提拉米斯类，莫斯蛋糕类，提拉米苏工厂，抹茶慕斯工厂，甜点工厂，很容易发生类爆炸的情况，其中拿铁卡得，美式咖啡是一个产品等级的咖啡，提拉米苏，抹茶蛋糕又是一个产品等级，所以这个案例可以这样写拿铁咖啡和提拉米苏是一个产品族，（都是意大利风味），美式咖啡和抹茶慕斯也是一个产品族（属于美式风味）<br> <img src="https://images2.imgbox.com/bc/8d/l88NP6qg_o.png" alt="在这里插入图片描述"></li><li>代码实现</li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc   咖啡的抽象类
 * @time 2023--12--22--15:33
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Coffee</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">//咖啡名字</span>
   <span class="token keyword">abstract</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addMilk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"加牛奶"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">addsugar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"加糖"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc 美式咖啡
 * @time 2023--12--22--15:35
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanCoffee</span> <span class="token keyword">extends</span> <span class="token class-name">Coffee</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"我是美式咖啡"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc拿铁咖啡
 * @time 2023--12--22--15:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LatteCoffee</span> <span class="token keyword">extends</span> <span class="token class-name">Coffee</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"我是拿铁咖啡"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc  甜点
 * @time 2023--12--22--16:47
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Dessert</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">abstract</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--22--16:48
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TimisuDessert</span> <span class="token keyword">extends</span> <span class="token class-name">Dessert</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"我是提拉米苏"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--22--16:49
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MoMusiDessert</span> <span class="token keyword">extends</span> <span class="token class-name">Dessert</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"抹茶慕斯"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc   风味，风味接口
 * @time 2023--12--22--16:55
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DessertFacory</span> <span class="token punctuation">{<!-- --></span>

    <span class="token class-name">Coffee</span> <span class="token function">createcoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Dessert</span> <span class="token function">createDesser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--22--16:57
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItalyDessertFactory</span> <span class="token keyword">implements</span>  <span class="token class-name">DessertFacory</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createcoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDesser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TimisuDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--22--16:56
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanDessrtFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFacory</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createcoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDesser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MoMusiDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc   测试类
 * @time 2023--12--22--15:39
 */</span>
<span class="token keyword">public</span>  <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ItalyDessertFactory</span> italyDessertFactory<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ItalyDessertFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"italyDessertFactory.createcoffee().getName() = "</span> <span class="token operator">+</span> italyDessertFactory<span class="token punctuation">.</span><span class="token function">createcoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"italyDessertFactory.createcoffee().getName() = "</span> <span class="token operator">+</span> italyDessertFactory<span class="token punctuation">.</span><span class="token function">createDesser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/37/99/aX7On8Wo_o.png" alt="在这里插入图片描述"></p> 
<ul><li>优缺点：</li><li>当一个产品族中的多个对象被设计成一起工作时，它能保证客户端只使用同一个产品族的对象</li><li>缺点：当需要增加一个新产品的时候，所有的工厂类都需要更改</li></ul> 
<h4><a id="234__742"></a>2.3.4 反射+读配置文件实现解耦</h4> 
<p>可以通过工厂迷失+配置文件的方式接触工厂对象和产品对象的耦合，在工厂类中加载配置文件中的全类名，并创建对象进行存储，客户端如果需要对象，直接获取即可</p> 
<pre><code class="prism language-java">american<span class="token operator">=</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>rj<span class="token punctuation">.</span>jand<span class="token punctuation">.</span>patten<span class="token punctuation">.</span>propper<span class="token punctuation">.</span></span>AmericanCoffee</span>
latte<span class="token operator">=</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>rj<span class="token punctuation">.</span>jand<span class="token punctuation">.</span>patten<span class="token punctuation">.</span>propper<span class="token punctuation">.</span></span>LatteCoffee</span>
</code></pre> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc  咖啡店
 * @time 2023--12--22--15:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeStore</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">//存储咖啡对象</span>
    <span class="token keyword">private</span>  <span class="token keyword">static</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Coffee</span><span class="token punctuation">&gt;</span></span>map<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//通过读取配置文件+反射获取</span>
    <span class="token keyword">static</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//加载Properties对象</span>
        <span class="token class-name">Properties</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">CoffeeStore</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"bean.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
             <span class="token comment">//加载读取</span>
             p<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>

              <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> keySet <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> keySet<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                 <span class="token comment">//通过反射拿到自己写的类名字（String）</span>
                 <span class="token class-name">String</span> <span class="token class-name">ClassName</span> <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token comment">//通过反射技术获取对象</span>
                 <span class="token keyword">final</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> aClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token class-name">ClassName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token keyword">final</span> <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Coffee</span><span class="token punctuation">)</span>aClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                 map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>o<span class="token punctuation">,</span> coffee<span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

         <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

        <span class="token keyword">return</span>  map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--22--17:13
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">CoffeeStore</span> coffeeStore<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">CoffeeStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> coffeeStore<span class="token punctuation">.</span><span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token string">"american"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coffee<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Coffee</span> coffeee <span class="token operator">=</span> coffeeStore<span class="token punctuation">.</span><span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token string">"latte"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coffeee<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/9b/d5/RJqRZR7G_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="235__iterator__811"></a>2.3.5 iterator 使用工厂类</h4> 
<pre><code class="prism language-java">  <span class="token class-name">List</span> list<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Iterator</span> iterator <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li> <p>使用迭代器遍历集合，获取集合中的元素而单列集合获取迭代器就使用到了工厂模式，我们看看类结构<br> <img src="https://images2.imgbox.com/4c/02/xs1MXRk5_o.png" alt="在这里插入图片描述"></p> </li><li> <p>Collection作为list的顶层父接口，引用了Iterator<br> <img src="https://images2.imgbox.com/39/92/OiD0LwYK_o.png" alt="在这里插入图片描述"></p> </li><li> <p>我们现在是实现的是ArrayList，他的父类是List,list中又一个 Iterator iterator();的方法</p> </li><li> <p>ArrayList作为他的子类，实现了这个方法，返回了一个内部实现类，</p> </li></ul> 
<p><img src="https://images2.imgbox.com/bb/7e/RbTpCOEY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="24_833"></a>2.4原型模式</h3> 
<ul><li>用一个已经创建的实例作为原型，通过复制该原型对象来创建一个和原型对象相同的新对象</li><li>原型对象包含如下角色：</li><li>抽象圆形类：规定了具体原型对象必须实现的方法clone()方法</li><li>具体原型类：实现抽象原型类的clone()方法，它是可被复制的对象</li><li>访问类：使用具体原型类中clone()方法来复制新的对象</li></ul> 
<h4><a id="241_839"></a>2.4.1原型模式实现</h4> 
<ul><li>原型模式分为浅克隆和深克隆</li></ul> 
<pre><code>浅克隆：创建一个新对象，新对象的属性和原来对象完全相同，对于非基本类型属性，仍指向原有属性所指向的内存地址
深克隆：创建一个新对象，属性中引用的其他对象也会被克隆，不在指向原有内存地址
Java中的object类中提供了clone()方法来实现浅克隆，cloneable接口是上面的类图中的抽象原型类，而实现了clineable接口的子实现类
就是具体的原型类，代码如下
</code></pre> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--14:33
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Certificate</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span>   <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"恭喜本年度"</span><span class="token operator">+</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"荣获三好学生奖状，特发此证，以资鼓励"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Certificate</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Certificate</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--14:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>

        <span class="token comment">//第一个对象</span>
        <span class="token class-name">Certificate</span> certificate<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Certificate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">//第二个帝乡</span>
        <span class="token class-name">Certificate</span> clone <span class="token operator">=</span> certificate<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        certificate<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        clone<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        certificate<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        clone<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> 
<p><img src="https://images2.imgbox.com/c4/6d/a6TRtOsi_o.png" alt="在这里插入图片描述"></p> 
<ul><li>目前使用的是浅克隆，如果被克隆体里面的属性是对象的话，克隆出来的对象还是指向同一个内存地址：看代码</li></ul> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--14:33
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--14:33
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Certificate</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Student</span>  student<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">getStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> student<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>student <span class="token operator">=</span> student<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span>   <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"恭喜本年度"</span><span class="token operator">+</span><span class="token function">getStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"荣获三好学生奖状，特发此证，以资鼓励"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Certificate</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Certificate</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--14:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>

        <span class="token comment">//第一个对象</span>
        <span class="token class-name">Certificate</span> certificate<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Certificate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        student<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        certificate<span class="token punctuation">.</span><span class="token function">setStudent</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//第二个帝乡</span>
        <span class="token class-name">Certificate</span> clone <span class="token operator">=</span> certificate<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        clone<span class="token punctuation">.</span><span class="token function">getStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        certificate<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        clone<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/02/4c/O9twANdg_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="242_981"></a>2.4.2深克隆</h4> 
<p>通过ObjectOutputStream和ObjectInputStream对象读写流，将对象进行深克隆</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>rj<span class="token punctuation">.</span>jand<span class="token punctuation">.</span>patten<span class="token punctuation">.</span>prototype</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileOutputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ObjectInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ObjectOutputStream</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--14:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{<!-- --></span>

        <span class="token comment">//第一个对象</span>
        <span class="token class-name">Certificate</span> certificate<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Certificate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        student<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        certificate<span class="token punctuation">.</span><span class="token function">setStudent</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//写对象操作</span>
         <span class="token class-name">ObjectOutputStream</span> objectOutputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\Users\\20505\\Desktop\\ctg\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        objectOutputStream<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>certificate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//读对象操作</span>
         <span class="token class-name">ObjectInputStream</span> objectInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\Users\\20505\\Desktop\\ctg\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Certificate</span> clone <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Certificate</span><span class="token punctuation">)</span> objectInputStream<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        clone<span class="token punctuation">.</span><span class="token function">getStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        certificate<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        clone<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//关流</span>
        objectOutputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        objectInputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/98/0b/qEgTZlOG_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="25__1024"></a>2.5 建造者模式</h3> 
<ul><li>将一个复杂的对象的构建与表示进行分离，使得同样的构建过程可以使用创建不同的表示</li></ul> 
<p><img src="https://images2.imgbox.com/05/b3/NU4WDjiq_o.png" alt="在这里插入图片描述"></p> 
<ul><li>分离了部件的构造(由Builder来负责)和装配（由Director负责），从而可以构造出复杂的对象，这个模式适用于：某个对象的构造过程和复杂的情况</li><li>由于实现了构建和装配的解耦，不同的构造器，相同的配置，也可以做出不同的对象，相同的构建起，不同的装配顺序也可以做出不同的对象，也就是实现了构建算法，装配算法的解耦，实现了更好的复用</li><li>建造者模式可以将部件和其组装过程分类，一步一步创建一个复杂的对象。用户只需要指定复杂对象的类型就可以得到该对象，而无需知道内部的具体构造细节</li></ul> 
<hr> 
<ul><li>建造者（Builder）模式包含如下角色</li><li>抽象建造者类（Buider）：这个接口规定要实现复杂对象的那些部分的创建，而不涉及具体的对象部件的创建</li><li>具体建造者类（ConcreteBuilder）：实现Builder接口。完成复杂产品的各个部件的具体创建方法，在构造过程玩成狗，提供产品的实例</li><li>产品类（Produce）：要创建的复杂对象</li><li>指挥者类（Diector）调用具体建造者来创建复杂对象的各个部分，在指导者中不涉及具体产品的信息，只负责保证对象各部分按照某种顺序创建</li></ul> 
<p><img src="https://images2.imgbox.com/fb/a2/mWGxK2dM_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="251__1039"></a>2.5.1 建造者模式的使用</h4> 
<p>创建共享单车<br> 生产自行车是一个复杂的付过程，它包含了车架，车座等组件的生产。而车架又有碳纤维，铝合金等材质，车座又有橡胶，真皮等材质对于自行车的生产可以使用建造者模式</p> 
<p><img src="https://images2.imgbox.com/e6/98/BF74XNgc_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc  实体
 * @time 2023--12--23--15:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bilke</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> frame<span class="token punctuation">;</span>  <span class="token comment">//框架</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span>  seat<span class="token punctuation">;</span><span class="token comment">//车座</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token class-name">String</span> frame<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>frame <span class="token operator">=</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token class-name">String</span> seat<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>seat <span class="token operator">=</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Bilke{"</span> <span class="token operator">+</span>
                <span class="token string">"frame='"</span> <span class="token operator">+</span> frame <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", seat='"</span> <span class="token operator">+</span> seat <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--15:38
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">protected</span>   <span class="token class-name">Bilke</span> bilke<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Bilke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">builderFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span>  <span class="token keyword">abstract</span>  <span class="token keyword">void</span> <span class="token function">builderSear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span>  <span class="token keyword">abstract</span>  <span class="token class-name">Bilke</span> <span class="token function">createBilke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc  哈罗创建
 * @time 2023--12--23--15:40
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MoBikeBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span><span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">builderFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        bilke<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">"碳纤维"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">builderSear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        bilke<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">"橡胶"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bilke</span> <span class="token function">createBilke</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> bilke<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--15:42
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OfoBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">builderFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        bilke<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">"铝合金"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">builderSear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        bilke<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">"真皮"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bilke</span> <span class="token function">createBilke</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> bilke<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--15:43
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Director</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Builder</span> builder<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Director</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>builder <span class="token operator">=</span> builder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span>  <span class="token class-name">Bilke</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        builder<span class="token punctuation">.</span><span class="token function">builderFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        builder<span class="token punctuation">.</span><span class="token function">builderSear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">createBilke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--15:45
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cilent</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Director</span> director<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Director</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MoBikeBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Bilke</span> construct <span class="token operator">=</span> director<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>construct<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> 
<p><img src="https://images2.imgbox.com/68/05/3uHPDgeY_o.png" alt="在这里插入图片描述"></p> 
<ul><li>缺点：</li><li>建造者模式的封装性很好，使用建造者模式可以有效的封装变化，在使用建造模式的场景中，一般产品类和建造类是比较稳定的，因此，将主要的业务逻辑封装在指挥类中对整体而言可以去的更好的稳定性</li><li>在建造者模式中，客户端不必知道产品组成的细节，将产品本身与产品的创建过程进行解耦，使得相同的创建过程可以创建不同的产品对象</li><li>可以更加精细的控制产品的创建过程，将复杂的产品的创建步骤分解在不同的方法中，使得创建过程更加清晰，也更方便使用程序来控制创建过程</li><li>建造者模式也很容易进行扩展，如果有新的需求，通过实现一个新的建造者就可完成，基本上不用修改之前已经测试通过的代码，因此也讲究不会对原有功能引入风险，符合开闭原则</li><li>缺点：<br> 建造者模式所创建的产品一般具有比较多的共同点，其在组成部分像素，如果产品之间的差异性很大，则不适合使用建造者模式，因此其使用规范受到了一定的限制</li></ul> 
<h4><a id="252__1191"></a>2.5.2 模式扩展（链式调用）</h4> 
<ul><li>平常这样写很不美观，也很不优雅，不装b，下面使用建造者模式将其变为链式调用<br> <img src="https://images2.imgbox.com/10/e7/Pn10lZwq_o.png" alt="在这里插入图片描述"></li></ul> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--15:54
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span>  screen<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">,</span> <span class="token class-name">String</span> screen<span class="token punctuation">,</span> <span class="token class-name">String</span> memory<span class="token punctuation">,</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screen <span class="token operator">=</span> screen<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard <span class="token operator">=</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Phone{"</span> <span class="token operator">+</span>
                <span class="token string">"cpu='"</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", screen='"</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", memory='"</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", mainboard='"</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span>  <span class="token keyword">class</span> <span class="token class-name">Builder</span><span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span>  screen<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>



    <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">cpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu<span class="token operator">=</span>cpu<span class="token punctuation">;</span>
        <span class="token keyword">return</span>  <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">screen</span><span class="token punctuation">(</span><span class="token class-name">String</span> screen<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screen<span class="token operator">=</span>screen<span class="token punctuation">;</span>
        <span class="token keyword">return</span>  <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">memory</span><span class="token punctuation">(</span><span class="token class-name">String</span> memory<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory<span class="token operator">=</span>memory<span class="token punctuation">;</span>
        <span class="token keyword">return</span>  <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> mainboard<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard<span class="token operator">=</span>mainboard<span class="token punctuation">;</span>
        <span class="token keyword">return</span>  <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Phone</span> <span class="token function">bilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cpu<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>screen<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>memory<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>mainboard<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/3d/08/mxDo4tVR_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="253__1262"></a>2.5.3 创建者模式对比</h4> 
<ul><li>工厂方法模式vs 建造者模式</li><li>工厂模式注重的是整体对象的创建方式，而建造者模式注重的是部件构造的过程，以在通过一步步的精确构造对象</li><li>我们举个栗子来说明两者的差异，如果要制造一个超人，如果使用工厂方法模式，直接生产出来的就是一个力大无穷，能够飞翔，内裤外穿的超人，如果使用建造者模式，则需要组装手，头，脚，躯干部分，然后把内裤外穿，于是一个超人就诞生了</li><li>抽象工厂模式vs建造者模式</li><li>抽象工厂模式实现产品家族的创建，一个产品家族就是这样的一系列产品，具有不同分为纬度的产品组合，采用抽象工厂模式则不需要关心构建过程，只关心什么产品由什么工厂生产即可</li><li>建造者模式则要按照要求指定的蓝图建造产品，它的主要目的是通过组装零配件而产生一个新产品</li><li>如果将抽象工厂模式看成汽车配件成产工厂，生产一个产品族的产品，那么建造者密室就是一个汽车组装工厂，通过对部件的组装可以返回一辆完整的汽车</li></ul> 
<h2><a id="3__1270"></a>3. 结构型模式</h2> 
<ul><li>结构性模式描述如何将类或者对象按某种布局组成更大的结构，它分为类结构性模式，前者采用继承机制来阻止接口和类，后者采用阻止或聚合类组合对象</li><li>由于组合关系或聚合关系比继承关系耦和度更低，满足“合成复用原则”，所以对象结构型模式具有更大的灵活性</li><li>结构型模式分为以下其中：<br> 代理模式<br> 适配器模式<br> 装饰器模式<br> 桥接模式<br> 外观模式<br> 组合模式<br> 享元模式</li></ul> 
<h3><a id="31_1282"></a>3.1代理模式</h3> 
<p>由于某些原因需要给某对象提供一个代理以控制该对象的访问，这时访问对象不适合或者不能直接引用目标对象，代理对象作为访问对象和目标对象直接的中介<br> Java中的代理按照代理类生成实际不同又分为静态代理和动态代理，静态代理在编译期就产生，而动态代理类则是在Java运行时动态产生，动态代理又有JDK代理和CGLib代理两种</p> 
<h4><a id="311__1285"></a>3.1.1 静态代理</h4> 
<ul><li>火车站卖票</li><li>如果要买或者票的话就要去火车站卖票，坐车到火车站，排队等一系列操作，显然比较麻烦，而火车站在多个地方都有代售点，我们去代售点卖票就方便很多了<br> <img src="https://images2.imgbox.com/b1/76/IZ0FS8wC_o.png" alt="在这里插入图片描述"></li></ul> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc  火车站
 * @time 2023--12--23--18:25
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"火车站售票成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--18:21
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc   代理类
 * @time 2023--12--23--18:27
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Procypoint</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span><span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span>  <span class="token class-name">SellTickets</span> sellTickets<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        sellTickets<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--18:26
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Procypoint</span> procypoint<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Procypoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        procypoint<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="312_JDK_1342"></a>3.1.2 JDK代理</h4> 
<ul><li>使用jdk代理来实现</li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--18:46
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Procypoint</span> procypoint<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Procypoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        procypoint<span class="token punctuation">.</span><span class="token function">getproxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc 代理类
 * @time 2023--12--23--18:27
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Procypoint</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//实例化火车站</span>
    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> sellTickets<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">getproxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">/**
         * ClassLoader loader,
         *   Class&lt;?&gt;[] interfaces,
         *  InvocationHandler h
         */</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>
                sellTickets<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                sellTickets<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"代理点收取一定的费用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>sellTickets<span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--18:21
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc 火车站
 * @time 2023--12--23--18:25
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"火车站售票成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li>jdk代理 执行流程</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Procypoint</span> procypoint<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Procypoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        procypoint<span class="token punctuation">.</span><span class="token function">getproxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>上述代码通过代理调用了sell方法，会在在内存中生成对应的代码<br> ![在这里插入图片描述](https://img-blog.csdnimg.cn/direct/73bb8673c878443abc04f92e54662d27.png</li><li>调用sell方法的时候调用了InvocationHandler里面的invoke方法</li></ul> 
<pre><code class="prism language-java">  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>
                sellTickets<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                sellTickets<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"代理点收取一定的费用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>sellTickets<span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在invoke中通过method.invoke通过反射去调用对应的sell（）方法，我们可以在这个步骤进行打印log日志啊，收取费用等等操作，是做一个功能的增强</p> 
<h4><a id="313_CGLIB_1440"></a>3.1.3 CGLIB动态代理</h4> 
<ul><li>CGLIB动态代理实现需要引起maven</li></ul> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--23--19:22
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Procypoint</span> procypoint<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Procypoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        procypoint<span class="token punctuation">.</span><span class="token function">getproxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc 代理类
 * @time 2023--12--23--18:27
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Procypoint</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//实例化火车站</span>
    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> sellTickets<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">getproxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//创建Enhancer对象</span>
        <span class="token class-name">Enhancer</span> enhancer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置父类的字节码对象</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置回调函数，传递的应该是MethodInterceptor对象，这里实现一下，传入this即可</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//创建代理对象</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> objects<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> methodProxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"收取代理费用了开始"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>sellTickets<span class="token punctuation">,</span>objects<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc 火车站
 * @time 2023--12--23--18:25
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"火车站售票成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>cglib<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>cglib<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">2.2</span><span class="token number">.2</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>


</code></pre> 
<h4><a id="314_CGLIB_1504"></a>3.1.4 CGLIB动态代理</h4> 
<ul><li>jak代理和cjlib代理</li><li>使用CGLIB实现动态代理，CGLIB的底层采用ASM字节码生成框架，使用字节码技术生成代理类，在JDK1.6之前比使用JAVA反射效率要高，唯一需要注意的是，CGLIB不能对生命为final的类或者方法进行代理，因为CGLIB原理是动态生成被代理的子类</li><li>在JDK1.6,JDK1.7,JDK1.8逐步对JDK动态代理优化之后，在调用次数少的情况下，JDK代理效率要高高于CGLIB代理效率，只有当进行大量调用的时候，JDK1.6和JDK1.7比CGLIB代理效率低一点，但是到JDK1.8的时候，JDK代理效率高于CGLIB代理，所以如果有接口使用JDK动态代理，如果没有接口使用CGLIB代理</li><li>动态代理和静态代理</li><li>动态代理与静态代理想比较，最大的好处是接口中声明的所有方法都被转移到调用处理器一个几种的方法中处理，这样在接口方法数量比较多的时候，我们可以进行灵活处理，而不需要静态代理那样每一个方法进行呢中专</li><li>如果接口增加一个方法，静态代理模式除了所有实现类需要实现这个方法外，所有代理类也需要实现此方法，增加了代码维护的复杂度，而董涛代理不会出现这个问题</li></ul> 
<h4><a id="315__1512"></a>3.1.5 优缺点和使用场景</h4> 
<ul><li>优点：</li><li>代理模式在客户端与目标之间起到一个中介作用和保护目标对象的作用</li><li>代理对象可以扩展目标对象的功能</li><li>代理模式能将客户端与目标对象分离，在一定程度上降低了系统的耦合度</li><li>缺点：</li><li>增加了系统的复杂度</li></ul> 
<hr> 
<ul><li>使用场景</li><li>远程代理</li><li>本地服务通过网络请求远程服务，为了实现本地到远程的通信，我们需要实现网络通信，处理其中可能的异常，为良好的代码设计和可维护性，我们将网络通信部分隐藏起来，只暴露给本地服务一个接口，通过该接口即可远程服务提供的功能，而不必过多关心通信部分的细节</li><li>防火墙</li><li>当你将浏览器配置成使用代理功能时，防火墙就将你的浏览器的请求转给互联网，当互联网返回响应时，代理服务器再把它转给你的浏览器</li><li>保护代理</li><li>控制一个对象的访问，如果需要，可以给不同的用户使用不同级别的使用权限</li></ul> 
<h3><a id="32_1528"></a>3.2适配器模式</h3> 
<ul><li>如果去欧洲旅游的话，他们出走如最左边是标准的欧洲插头，而我们使用的插头是下图最右边，因此我们的笔记本电脑，手机在当地不能直接使用，就需要一个转换器，转换器第一面插入当地的插座，第二面供我们充点，这样是的我们的插头在当地能使用，生活中这样的例子很多读卡器等等，转接头，其实就是使用到了适配器模式</li></ul> 
<p><img src="https://images2.imgbox.com/f7/98/HGNATVqm_o.png" alt="在这里插入图片描述"></p> 
<ul><li>适配器模式（Adapter）包含以下主要角色</li><li>目标（Target）接口，当前系统业务所期待的接口，它尅是抽象类或者是接口</li><li>适配器（Adaptee）类，它是访问和适配的显存组件库中的组件接口</li><li>适配器（Adapter）类，它是一个转换器，通过继承或引用适配器对象，把是适配者接口转换为目标接口，让客户按照目标接口的方式直接访问适配者</li></ul> 
<h4><a id="321__1536"></a>3.2.1 代码实现</h4> 
<p>实现方式：<strong>定义一个适配器类来实现当前 系统的业务接口，同时又继承现有组件库中已经存在的组件</strong><br> 例：【读卡器案例】<br> 现有一台电脑只能读取SD卡，而要读取到TF卡中的数据就要用到适配器模式，创建一个读卡器，将TF中的内容读取出来<br> <img src="https://images2.imgbox.com/44/eb/sFS3Vv7J_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc TF卡
 * @time 2023--12--24--13:43
 */</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--13:44
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TFCardImple</span> <span class="token keyword">implements</span> <span class="token class-name">TFCard</span><span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"TF读取成功，内容是：Hello Word"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"TF存储成功，内容是："</span><span class="token operator">+</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc  SD卡
 * @time 2023--12--24--13:45
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{<!-- --></span>

    <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--13:46
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDCardImple</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"SD读取成功，内容是：Hello Word"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"SD存储成功，内容是："</span><span class="token operator">+</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc  电脑类，但是电脑类只能读取SD卡
 * @time 2023--12--24--13:48
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token class-name">SDCard</span> sdCard<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sdCard<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">"SDCard is not null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span>  sdCard<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc  类适配器
 * @time 2023--12--24--13:50
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span> <span class="token keyword">extends</span> <span class="token class-name">TFCardImple</span> <span class="token keyword">implements</span>  <span class="token class-name">SDCard</span><span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--13:52
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token comment">//实例化电脑</span>
        <span class="token class-name">Computer</span> computer<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"computer.readSD(new SDAdapterTF()) = "</span> <span class="token operator">+</span> computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li>通过适配器模式，成功的读取到了TF中的内容</li></ul> 
<p><img src="https://images2.imgbox.com/70/9f/lr64JfhW_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="322__1652"></a>3.2.2 对象模式适配器</h4> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc  类适配器
 * @time 2023--12--24--13:50
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span>   <span class="token keyword">implements</span>  <span class="token class-name">SDCard</span><span class="token punctuation">{<!-- --></span>

    <span class="token class-name">TFCardImple</span> tfCardImple<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token class-name">TFCardImple</span> tfCardImple<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tfCardImple <span class="token operator">=</span> tfCardImple<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> tfCardImple<span class="token punctuation">.</span><span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        tfCardImple<span class="token punctuation">.</span><span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="323_JDK_1681"></a>3.2.3 适配器应用场景和JDK源码解析</h4> 
<ul><li>应用场景</li><li>以前开发的系统存在满足新系统功能需求的类，但其接口通新系统的接口不一致</li><li>使用第三方提供的组件，但组件接口定义和自己要求的接口定义不同</li></ul> 
<hr> 
<ul><li>JDK中的适配器</li><li>Reader(字符流)，InputStream(字节流)的适配使用的是InputStreamReader</li><li>InputStreamReader继承自java.io包中的Reader，对他中的抽象的未实现的方法给出解释。如：<br> <img src="https://images2.imgbox.com/15/2a/XGGWwIwr_o.png" alt="在这里插入图片描述"><br> 如果上图代码中sd(StreamDecoder类对象）在Sun的JDK实现中，实际的方式实现是对sun.nio.cs.StreamDecoder类的同名方法的调用封装</li></ul> 
<p><img src="https://images2.imgbox.com/36/17/0CBIwg3H_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="33_1694"></a>3.3装饰者模式</h3> 
<ul><li>快餐店例子：</li><li>快餐店有炒面，炒饭这些套餐，可以额外父加鸡蛋，火腿，培根等配菜当然加配菜需要额外的加钱，每个配菜的价钱通常不太一样，那么计算总价就会显得比较麻烦</li><li>在不改变现有结构的情况下，动态得给该对象增加一些职责（即增加额外的功能）</li><li>结构：</li><li>抽象构建（Component）角色，定义一个抽象接口以规范准备接受附加责任的对象</li><li>具体构建（Concrete Componenet）角色，实现抽象构建，通过装饰角色，为其增加一份职责</li><li>抽象装饰（Decorator）角色，继承或实现抽象构建，并包含具体构建的实例，可以通过其子类扩展实现具体构建的功能</li><li>具体装饰（ConcreteDecorator）角色：实现抽象装饰的相关方法，并给具体构添加附加的责任<br> <img src="https://images2.imgbox.com/87/60/IGu4aGnZ_o.png" alt="在这里插入图片描述"></li></ul> 
<h4><a id="331__1704"></a>3.3.1 代码实现</h4> 
<pre><code class="prism language-java">

<span class="token comment">/**
 * @author LXY
 * @desc  快餐类
 * @time 2023--12--24--14:53
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">float</span> price<span class="token punctuation">;</span> <span class="token comment">//价格</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span>   <span class="token comment">//描述</span>


    <span class="token comment">//返回具体的价格</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">//构造器</span>
    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//getset方法</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDesc</span><span class="token punctuation">(</span><span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc 炒面
 * @time 2023--12--24--14:56
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedNode</span> <span class="token keyword">extends</span>  <span class="token class-name">FastFood</span><span class="token punctuation">{<!-- --></span>


    <span class="token keyword">public</span> <span class="token class-name">FriedNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token string">"炒面"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token number">15</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc 炒饭类(10块)
 * @time 2023--12--24--14:55
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedRice</span>  <span class="token keyword">extends</span>  <span class="token class-name">FastFood</span><span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"扬州炒饭"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc 装饰者类
 * @time 2023--12--24--14:57
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Garnish</span>  <span class="token keyword">extends</span> <span class="token class-name">FastFood</span><span class="token punctuation">{<!-- --></span>

    <span class="token comment">//声明快餐变量</span>
    <span class="token keyword">private</span> <span class="token class-name">FastFood</span> fastFood<span class="token punctuation">;</span>


    <span class="token comment">//有参数构造器</span>
    <span class="token keyword">public</span> <span class="token class-name">Garnish</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">,</span> <span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>price<span class="token punctuation">,</span> desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


        <span class="token comment">//getset</span>
    <span class="token keyword">public</span> <span class="token class-name">FastFood</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFastFood</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc  鸡蛋类
 * @time 2023--12--24--14:59
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Egg</span> <span class="token keyword">extends</span> <span class="token class-name">Garnish</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"鸡蛋"</span><span class="token punctuation">,</span> fastFood<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--15:03
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token class-name">FastFood</span> fastFood<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FriedNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        fastFood<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span>fastFood<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"您已点"</span><span class="token operator">+</span>fastFood<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">",其价格是"</span><span class="token operator">+</span>fastFood<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li>实现原理：通过实例化炒面，定义价格是15，描述是炒面，定义Garnish 是一个抽象类，私有fastFood属性，并且继承fastFood，在构造器中传递旧的fastFood属性保存为私有对象，然后再传递新的fastFood传递给父类，鸡蛋类继承Garnish ，通过重写，就可以通过父类的私有fastFood属性拿到之前的价格，并且通过重写，将之前的价格+上自己也就是鸡蛋的价格进行赋值，运用到了数据结构，对象的地址内存不会变的特点</li></ul> 
<h4><a id="332__1863"></a>3.3.2 好处</h4> 
<ul><li>装饰者模式可以带来比继承更加灵活性的扩展功能，使用更加方便，可以通过组合不同的装饰着对象来获取具有不同行为状态多样化的结果，装置这模式比继承更具有良好的扩展性，玩么的遵循开闭原则，继承是静态的附加责任，装饰着则是动态的附加责任</li><li>装饰类和被装饰类可以独立发展，不会相互耦和，装饰模式是继承的一个替代模式，装饰模式可以动态扩展一个实现类的功能</li></ul> 
<h4><a id="333_1867"></a>3.3.3代理和装饰者的区别</h4> 
<p>静态代理和装饰着的区别<br> 相同点：</p> 
<ul><li>都是实现与目标类薪享通的业务接口</li><li>在两个类中都要声明目标对象</li><li>都可以在不修改目标的前提下增强方法<br> 不同点：</li><li>目的不同<br> 装饰着为了增强目标对象<br> 静态代理是为了保护和隐目标对象</li><li>获取目标，对象构建的地方不同<br> 装饰着是由于外界传递进来，可以通过构造方法传递<br> 静态代理是在代理类内部创建，以此来隐藏目标对象</li></ul> 
<h3><a id="34_1881"></a>3.4桥接模式</h3> 
<ul><li>将抽象与实现分离使他们可以独立变化,它是用组合关系代替继承关系来实现，从而降低了抽象和实现这两个可变维度的耦合</li><li>票结模式主要包含以下角色</li><li>抽象化（Abstraction)角色：定义抽象类，并包含一个对实现化对象的引用</li><li>扩展抽象化（Refined Abstraction)角色：是抽象化角色的子类，实现父类中的业务方法，并通过组合关系调用实现化角色中的业务方法</li><li>实现化（Implementor)角色：定义实现化角色的接口，供扩展抽象化角色调用</li><li>具体实现化（Concrete Implementor）角色：给出实现化角色接口的具体实现</li></ul> 
<h4><a id="341__1889"></a>3.4.1 代码实现</h4> 
<p>开发一份跨平台视频播放器，可以在不同操作系统平台如(Windows,Mac,Linux等）上播放多种格式的视频文件，常见的视频格式包括EMVB,AVI,WMV等，该播放器包含了两个维度，适合使用桥接模式<br> <img src="https://images2.imgbox.com/8d/24/44j3sOeM_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--16:14
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Windows</span> win<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RMVBFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        win<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">"战狼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--16:06
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{<!-- --></span>

 <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token class-name">Fiename</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--16:07
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RMVBFile</span> <span class="token keyword">extends</span> <span class="token class-name">VideoFile</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token class-name">Fiename</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"RMVBFile正在播放文件：+"</span><span class="token operator">+</span><span class="token class-name">Fiename</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--16:12
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Windows</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystem</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token class-name">Filename</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">Filename</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--16:09
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">OperatingSystem</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">protected</span>  <span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OperatingSystem</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>videoFile <span class="token operator">=</span> videoFile<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">abstract</span>  <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token class-name">Filename</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--16:12
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MAC</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystem</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token function">MAC</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token class-name">Filename</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">Filename</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--16:07
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AVIFile</span> <span class="token keyword">extends</span> <span class="token class-name">VideoFile</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token class-name">Fiename</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"AVIFile正在播放文件：+"</span><span class="token operator">+</span><span class="token class-name">Fiename</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> 
<h4><a id="342__1991"></a>3.4.2 好处和使用场景</h4> 
<p>桥接模式提高了系统的可扩充性，在两个变化维度中任意扩展一个维度，都不需要修改原有的系统<br> 如：如果现在还有一种视频文件类型wmv，我们只需要在定义一个类实现VIDERFILE接口即可，其他类不需要发生变化<br> 实现细节对客户透明</p> 
<ul><li>使用场景：</li><li>当一个类存在两个独立变化的维度，且这两个维度都需要进行扩展时</li><li>当一个系统不希望使用继承或因为多层次继承导致类的个数极具增加时</li><li>当一个系统需要在构建的抽象化角色和具体化角色之间增加更多的灵活性时，避免在两个层次之间建立静态的继承练习，通过桥接模式可以使它们在抽象层建立一个关联关系</li></ul> 
<h3><a id="35_1999"></a>3.5外观模式</h3> 
<ul><li>编写一个智能家电，通过输入开关指令做到一键关灯，关电视</li></ul> 
<p><img src="https://images2.imgbox.com/d5/c2/kKViuqI8_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--16:45
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TV</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"TV  on()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span>  <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"TV  off()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--16:45
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Light</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Light  on()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span>  <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Light  off()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--16:45
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AirCondition</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"AirCondition  on()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span>  <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"AirCondition  off()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--16:47
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartAppliancesFacade</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//做一个聚合操作</span>
    <span class="token class-name">Light</span> light<span class="token punctuation">;</span>
    <span class="token class-name">TV</span> tv<span class="token punctuation">;</span>
    <span class="token class-name">AirCondition</span> airCondition<span class="token punctuation">;</span>

    <span class="token comment">//构造器</span>
    <span class="token keyword">public</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        light<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">TV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">AirCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"关灯"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
        <span class="token punctuation">}</span><span class="token keyword">else</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"开灯"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        light<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        light<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--16:51
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cilent</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">SmartAppliancesFacade</span> smartAppliancesFacade<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        smartAppliancesFacade<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">"开灯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> 
<h4><a id="351_2107"></a>3.5.1优缺点和使用场景</h4> 
<ul><li>优点：降低了子系统与客户端之间的耦合度，使得子系统的变化不会影响调用它的客户类</li><li>对客户屏蔽了子系统组件，减少了客户处理对象的数目，并使得子系统使用起来更加容易</li><li>缺点：不符合开闭原则，很麻烦</li><li>使用场景：</li><li>对分层系统构建时，使用外观模式定义子系统中每层的入口点可以简化组系统之间的依赖关系</li><li>当一个复杂系统的子系统很多时，外观模式可以为系统设计一个简单的接口供外界访问</li><li>当客户端与多个子系统存在很大的联系时，引入外观模式可以将他们分离，从而提高子系统的独立性和可移植性</li></ul> 
<h3><a id="36__2115"></a>3.6 享元模式</h3> 
<ul><li>运用共享技术有效的支持大量细粒度对象的复用，它通过共享已经存在的对象，避免大量相似对象的开销，从而提高系统资源的利用率</li><li>享元（Flyweight）模式存在以下两种状态</li><li>1.内部状态，即不会随着环境的改变而改变的可共享部分</li><li>2.外部状态，指随着环境改变而改变的不可以共享的部分。享元模式的实现要领就是区分应用总的这两种状态，并将外部状态外部化</li><li>享元模式有以下角色：</li><li>抽取享元角色（Flyweight)通常是一个接口或者抽象类，在抽象享元类中声明了具体享元类公共的方法 ，这些方法可以向外界提供享元享元对象的内部数据（内部状态），同时也可以通过这些方法来设置外部数据(外部状态)</li><li>具体享元(Concrete Flyweight)角色：它实现了抽象享元类，称为享元对象，在具体享元类中为内部状态提供了存储空间，通常我们可以结合单例模式来设计具体享元类，为每一个具体享元提供为一个的享元对象</li><li>享元工厂（Flyweight Factory）角色：负责创建和管理享元角色，当客户对象请求一个享元对象时，享元工厂检查系统中是否存在符合要求的享元对象，如果不存在，则创建一个新的享元对象</li><li>非享元（Unsharable Flyweight)角色：并不是所有的抽象享元类的子类都需要被共享，不能被共享的子类可设计为非共享具体享元类；当需要一个非共享具体享元类的对象时，可以直接通过实例化创建</li></ul> 
<h4><a id="361__2126"></a>3.6.1 享元模式的应用</h4> 
<p>俄罗斯方块，如果在这里每一个方块都是一个对象就需要占据很大的空间，下面用享元模式实现<br> <img src="https://images2.imgbox.com/c3/d5/wMNSk80q_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/0e/00/qpTgOs61_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--18:35
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{<!-- --></span>

   <span class="token keyword">abstract</span>  <span class="token class-name">String</span> <span class="token function">getshape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"颜色是"</span><span class="token operator">+</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--18:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IBOX</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">String</span> <span class="token function">getshape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"IBOX"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--18:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LBOX</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">String</span> <span class="token function">getshape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"LBOX"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--18:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OBOX</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">String</span> <span class="token function">getshape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"OBOX"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc  工厂
 * @time 2023--12--24--18:37
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BoxFactory</span> <span class="token punctuation">{<!-- --></span>

     <span class="token keyword">static</span>  <span class="token keyword">volatile</span>   <span class="token class-name">BoxFactory</span> <span class="token constant">BOX_FACTORY</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//这里当map当做是缓存</span>
    <span class="token keyword">private</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">AbstractBox</span><span class="token punctuation">&gt;</span></span>map<span class="token punctuation">;</span>
    <span class="token comment">//构造器</span>
    <span class="token keyword">public</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        map<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"L"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">LBOX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"O"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">OBOX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"I"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">IBOX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
     <span class="token comment">//单例</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">BoxFactory</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token constant">BOX_FACTORY</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">AbstractBox</span> <span class="token function">getBox</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--24--18:41
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">AbstractBox</span> l <span class="token operator">=</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBox</span><span class="token punctuation">(</span><span class="token string">"L"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        l<span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token string">"Red"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> 
<h4><a id="362__2223"></a>3.6.2 优缺点和使用场景</h4> 
<ul><li>优点：极大的减少内存中像素或相同对象数量，借阅系统资源，提供稳定性能</li><li>享元模式中的外部状态相对独立，且不影响内部状态</li><li>缺点：为了使对象可以共享，需要将享元对象的部分状态外部化，分离内部状态和外部状态，使程序逻辑复杂</li></ul> 
<h2><a id="4__2229"></a>4. 行为型模式</h2> 
<ul><li>行为模式用于描述程序在运行时复杂的流程控制，即描述多个类或者对象之间怎样相互协作共同完成单个对象都须发独立完成的任务，它设计算法与对象间的职责分配</li><li>行为型模式分为类行为模式和对象行为模式，前者采用继承机制在类间分派行动，后者采用组合或聚合在对象间分配行为，由于组合关系或聚合关系比继承关系耦合度更低，满足“合成复用原则”，所以对象行为模式比类行为模式具有更大的灵活性</li><li>行为模式分为：</li><li>模板方法模式</li><li>策略模式</li><li>命令模式</li><li>职责链模式</li><li>状态模式</li><li>观察者模式</li><li>中介者模式</li><li>迭代器模式</li><li>访问者模式</li><li>备忘录模式</li><li>解释器模式</li><li></ul> 
<h3><a id="41_2245"></a>4.1模板方法模式</h3> 
<p>在面向对象程序设计过程中，程序员常常遇到这样的问题，设计一个系统知道了算法所需的关键步骤，而且确定了这些步骤的执行顺序，但某些步骤的具体实现还未知，或者说某些步骤的实现与具体的环境相关<br> 例如：去银行办理业务一般要经历以下4个流程：取号，排队，办理具体业务，对银行工作人员进行评分等，其中取号，排队，和对银行工作人员进行评分云业务对每个客户是一样的，可以再父类中实现，但是办理具体业务缺因人而异，它可能是存款，取款，或者转账等，可以延迟到子类实现</p> 
<ul><li> <p>定义：定义一个操作中的算法骨架，而将算法的一些步骤延迟到子类中，是的子类可以不改变算法结构的情况下重定义该算法的某些特定步骤</p> </li><li> <p>模板方法(Template Method)模式包含以下主要角色</p> </li><li> <p>抽象类（Abstract class）：负责给出一个算法的轮廓和骨架，它是由一个模板方法和若干基本方法构成</p> </li><li> 
  <ul><li>模板方法：定义了算法的骨架，按某种顺序调用其包含的基本方法</li></ul> </li><li> 
  <ul><li>基本方法：是实现算法各个步骤的方法，是模板方法的组成部分，基本方法又可以分为三种</li></ul> </li><li> 
  <ol><li>抽象方法（Abstract Method）：一个抽象方法由抽象类声明，由其具体子类实现</li></ol> </li><li> <p>2.具体方法（Concrete Method）：一个具体方法由一个抽象类或具体类声明并实现，其子类可以进行覆盖也可以直接继承</p> </li><li> <p>3.钩子方法（Hook Method）在抽象类中已经实现，包括用于判断的逻辑方法和需要重写子类的空方法两种</p> </li><li> <p>一般钩子方法适用于判断的扩机方法，这类方法名一般为isXxx,返回值是boolwan类型</p> </li><li> <p>具体子类（Concrete Class）:实现了抽象类中所定义的抽象方法和钩子方法，他们是一个顶级逻辑的组成步骤</p> </li></ul> 
<h4><a id="411_2260"></a>4.1.1模板方法实现</h4> 
<ul><li>炒菜的步骤是固定的，分为倒油，热油，倒蔬菜，倒调料品，翻炒等步骤</li></ul> 
<p><img src="https://images2.imgbox.com/99/16/uD4bcDaM_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java">
 <span class="token operator">*</span> <span class="token annotation punctuation">@author</span> <span class="token constant">LXY</span>
 <span class="token operator">*</span> <span class="token annotation punctuation">@desc</span>
 <span class="token operator">*</span> <span class="token annotation punctuation">@time</span> <span class="token number">2023</span><span class="token operator">--</span><span class="token number">12</span><span class="token operator">--</span><span class="token number">25</span><span class="token operator">--</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">26</span>
 <span class="token operator">*</span><span class="token operator">/</span>
<span class="token keyword">public</span>  <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstartClass</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">prouroi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//倒油</span>
        <span class="token function">heatoil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//热油</span>
        <span class="token function">pouvegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//下菜</span>
        <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//放调料</span>
        <span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//炒菜</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">prouroi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"倒油"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">heatoil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"热油"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//倒蔬菜是不一样的（一个是下包菜，一个是空心菜）</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pouvegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//到的调料品是不一样的</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span>  <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"炒菜，炒到熟"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--11:29
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcerateClass_BaoCai</span>  <span class="token keyword">extends</span> <span class="token class-name">AbstartClass</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pouvegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"下包菜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"下辣椒"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--11:29
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcerateClass_CaiXin</span> <span class="token keyword">extends</span> <span class="token class-name">AbstartClass</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pouvegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"下卷心菜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"下盐"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--11:30
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cliet</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ConcerateClass_BaoCai</span> concerateClass_baoCai<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ConcerateClass_BaoCai</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        concerateClass_baoCai<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="412__2352"></a>4.1.2 优缺点和适用场景</h4> 
<p>-优点：</p> 
<ul><li>提高代码的复用性<br> 将相同部分的代码放在抽象的父类中，而将不同的代码放入不同的代码放入不同的子类中</li><li>实现了反向控制<br> 通过一个父类调用其子类的操作，通过对子类的具体实现扩展不同的行为，实现了反向控制，并符合开闭原则</li><li>缺点：</li><li>对每个不同的实现都需要定义一个子类，这会导致类的个数增加，系统更加庞大，设计也更加抽象</li><li>父类中的抽象方法由子类实现，子类执行的结果会影响父类的结果，这导致一种反向的控制结构，它提高了代码阅读的难度</li><li>适用场景：</li><li>算法的整体步骤很稳定，但其中个别部分易变时，这时候可以使用模板方法模式，将容易变的部分抽象出来，供子类实现</li><li>需要通过子类来决定父类中某个步骤是否执行，实现子类对父类的反向控制</li></ul> 
<h4><a id="413_JDK_2365"></a>4.1.3 JDK源码解析</h4> 
<ul><li>InputStream 中就使用了模板模式<br> -有三个重载的read方法</li><li>read(byte b[])中调用的是自己的三个参数的重载方法</li><li>在read(byte b[], int off, int len) 中，其中调用的是read()的无法方法</li><li>注意这个read()方法是抽象的，需要子类去实现，最终的实现还是子类</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">InputStream</span> <span class="token keyword">implements</span> <span class="token class-name">Closeable</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

 <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> off<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>off <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>length <span class="token operator">-</span> off<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        b<span class="token punctuation">[</span>off<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>

        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                b<span class="token punctuation">[</span>off <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ee<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> 
<h3><a id="42__2410"></a>4.2 策略模式</h3> 
<ul><li>概述</li><li>我们去旅游出行，可以选择很多种，可以骑自行车，坐汽车，坐火车，坐飞机<br> <img src="https://images2.imgbox.com/18/8c/PaAXKtKG_o.png" alt="在这里插入图片描述"></li><li>作为一个程序员，开发也要选择一款开发工具，当然可以进行代码开发的工具有很多，可以选择idea开发，也可以进行eclispse开发</li></ul> 
<p><img src="https://images2.imgbox.com/a6/2d/dmLxqE8s_o.png" alt="在这里插入图片描述"></p> 
<ul><li>该模式定义了一系列的算法，并将每个算法封装起来，使他们之间可以相互替换，且算法的变化不会影响使用算法的客户，策略模式属于对象行为模式，它通过对算法进行封装，把使用算法的责任和算法的实现分割开，并委派给不同的对象对这些算法进行管理</li></ul> 
<hr> 
<ul><li>结构：<br> 抽象策略（strategy）类：这是一个抽象角色，通常由一个接口或抽象类实现，此角色给出所有的具体策略类所需的接口<br> 具体策略（Concrete Strategy）类：实现了抽象策略定义的接口，提供具体的算法实现或行为<br> 环境（Context）类：持有一个策略类的引用，最终给客户端调用</li></ul> 
<h4><a id="421_2426"></a>4.2.1案例实现</h4> 
<ul><li>一家百货公司在年度促销活动，针对不同的（春节，中秋，圣诞）退出不同的促销活动，由促销员将促销活动展示给客户：类图如下<br> <img src="https://images2.imgbox.com/af/fc/mn1XwnwK_o.png" alt="在这里插入图片描述"></li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--14:20
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span>  <span class="token keyword">abstract</span>  <span class="token keyword">void</span>  <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--14:20
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StartegyA</span>  <span class="token keyword">extends</span> <span class="token class-name">Strategy</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"满500减200"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--14:20
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StartegyB</span> <span class="token keyword">extends</span> <span class="token class-name">Strategy</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"满一送一"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--14:20
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StartegyC</span> <span class="token keyword">extends</span> <span class="token class-name">Strategy</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"满500抽免单"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--14:21
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SalesMan</span> <span class="token punctuation">{<!-- --></span>

    <span class="token class-name">Strategy</span> strategy<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SalesMan</span><span class="token punctuation">(</span><span class="token class-name">Strategy</span> strategy<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Strategy</span> <span class="token function">getStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> strategy<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStrategy</span><span class="token punctuation">(</span><span class="token class-name">Strategy</span> strategy<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">salesManshow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        strategy<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--14:22
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">SalesMan</span> salesMan<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SalesMan</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StartegyA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        salesMan<span class="token punctuation">.</span><span class="token function">salesManshow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        salesMan<span class="token punctuation">.</span><span class="token function">setStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StartegyB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        salesMan<span class="token punctuation">.</span><span class="token function">salesManshow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        salesMan<span class="token punctuation">.</span><span class="token function">setStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StartegyC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        salesMan<span class="token punctuation">.</span><span class="token function">salesManshow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> 
<h4><a id="422__2525"></a>4.2.2 策略模式优缺点</h4> 
<ul><li>优点</li><li>策略类之间可以自由切换<br> 由于策略类都实现同一个实现，所以使他们之间可以自由切换</li><li>易于扩展<br> 增加一个新的策略只需要添加一个具体的策略类即可，基本不需要改变原有的代码，符合开闭原则</li><li>避免使用多重条件选择语句（if ese）,充分体现面向对象设计思想</li><li>缺点：</li><li>客户端必须知道所有的策略类，并自行决定使用哪一个策略类</li><li>策略模式将造成产生很多策略类，可以使用享元模式在一定程度上减少对象的数量</li></ul> 
<hr> 
<ul><li>使用场景</li><li>一个系统需要动态的在几种算法中选择一种，可将每个算法封装到策略类中</li><li>一个类定义了多种行为，并且这些行为在这个类的操作中以多个条件语句的形式出现，可将每个条件分支移入它们各自的策略类中以代替这些条件语句</li><li>系统中各算法彼此完全独立，且要求对客户隐藏具体算法的实现细节时</li><li>系统要求使用算法的客户不应该知道其操作的数据时，可使用策略模式来隐藏与算法相关的数据结构</li><li>多个类只区别在表现行为不同，可以使用策略模式，在运行时动态选择具体要执行的行为</li></ul> 
<h3><a id="43__2544"></a>4.3 命令模式</h3> 
<ul><li>日常出去玩都会想到这样的场景：<br> <img src="https://images2.imgbox.com/3a/ff/s4sKFd4E_o.png" alt="在这里插入图片描述"></li><li>定义：将一个请求封装为一个对象，使发出请求的责任和执行请求的责任分割开，这样两者之间通过命令对象进行沟通，这样方便将命令对象进行存储传递，调用，增加与管理</li><li>结构</li><li>命令模式包含以下主要角色</li><li>抽象命令类（Command）角色：定义命令的接口，声明执行的方法</li><li>具体命令（Concrete Command）角色：具体的命令，实现命令接口；通常会持有接受者，并调用接受者的功能来完成命令要执行的啊哦做</li><li>实现者/接受者（Receiver）角色：接受者，真正执行命令的对象，任何类都可能成为一个接受者，只要它讷讷狗实现命令要求实现的相对应功能</li><li>调用者/请求者（Invoke）角色：要求命令对象执行请求，通常会持有命令对象，可以持有很多的命令对象，这个是客户端真正触发命令并要求命令执行响应操作的地方，也就是说相当于使用命令对象的入口</li></ul> 
<h4><a id="431_2554"></a>4.3.1案例实现</h4> 
<ul><li>服务员：就是调用者角色由她来发起命令</li><li>资深大厨：就是接受者角色，真正命令执行的对象</li><li>订单：命令这种包含订单<br> <img src="https://images2.imgbox.com/28/81/irCqNJTC_o.png" alt="在这里插入图片描述"></li></ul> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc  厨师
 * @time 2023--12--25--15 :31
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SenoirCherf</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">makFood</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">,</span><span class="token class-name">String</span> footName<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"座位号："</span><span class="token operator">+</span>num<span class="token operator">+</span><span class="token string">"正在做："</span><span class="token operator">+</span>footName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc  订单类
 * @time 2023--12--25--15:28
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//餐桌号</span>
    <span class="token keyword">int</span> daningTable<span class="token punctuation">;</span>
    <span class="token comment">//点餐</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDaningTable</span><span class="token punctuation">(</span><span class="token keyword">int</span> daningTable<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>daningTable <span class="token operator">=</span> daningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDaningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> daningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMap</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> num<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--15:32
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Command</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--15:33
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderCommand</span> <span class="token keyword">implements</span> <span class="token class-name">Command</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//厨师</span>
    <span class="token class-name">SenoirCherf</span> senoirCherf<span class="token punctuation">;</span>
    <span class="token class-name">Order</span> order<span class="token punctuation">;</span>  <span class="token comment">//订单</span>

    <span class="token keyword">public</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span><span class="token class-name">SenoirCherf</span> senoirCherf<span class="token punctuation">,</span> <span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>senoirCherf <span class="token operator">=</span> senoirCherf<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>order <span class="token operator">=</span> order<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"接受到的订单"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> order<span class="token punctuation">.</span><span class="token function">getMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//获取到订单</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> str <span class="token operator">:</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"订单来了：菜品是"</span><span class="token operator">+</span>str<span class="token operator">+</span><span class="token string">",数量是:"</span><span class="token operator">+</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            senoirCherf<span class="token punctuation">.</span><span class="token function">makFood</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDaningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--15:37
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Waitor</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//多个命令类一个服务员可以发送多个命令</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Command</span><span class="token punctuation">&gt;</span></span><span class="token class-name">Commands</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//载入数据</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setList</span><span class="token punctuation">(</span><span class="token class-name">Command</span> command<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Commands</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>command<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">void</span> <span class="token class-name">Orderup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Command</span> command <span class="token operator">:</span> <span class="token class-name">Commands</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            command<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--15:40
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//生成两份订单</span>
        <span class="token class-name">Order</span> order1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">setDaningTable</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">setMap</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"可乐"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">setMap</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"汉堡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Order</span> order2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">setDaningTable</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">setMap</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"西红柿炒鸡蛋"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">setMap</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"炒河粉"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//指定厨师</span>
        <span class="token class-name">SenoirCherf</span> senoirCherf<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SenoirCherf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">Command</span> command1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>senoirCherf<span class="token punctuation">,</span>order1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Command</span> command2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>senoirCherf<span class="token punctuation">,</span>order2<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">Waitor</span> waitor<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        waitor<span class="token punctuation">.</span><span class="token function">setList</span><span class="token punctuation">(</span>command1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        waitor<span class="token punctuation">.</span><span class="token function">setList</span><span class="token punctuation">(</span>command2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">waitor<span class="token punctuation">.</span></span>Orderup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//开始</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f8/75/L6ZqxwTD_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="432__2695"></a>4.3.2 优缺点以及使用场景</h4> 
<ul><li>优点</li><li>降低系统的耦合度，命令模式能将调用操作的对象与实现该操作的对象解耦</li><li>增加或删除命令非常方便，采用命令模式增加与删除命令不会影响其他类，它满足开闭原则，对扩展比较灵活</li><li>可以实现宏命令，命令模式可以与组合模式结合，将多个命令装配成一个组合命令，既宏命令</li><li>方便实现undo和Redo操作，命令模式可以与后面介绍的备忘录模式结合，实现命令的撤销与恢复</li><li>缺点：使用命令模式可能会导致某些系统有过多的具体命令类</li><li>系统结构更加复杂</li></ul> 
<hr> 
<ul><li>使用场景</li><li>系统需要将请求调用者和请求接受者解耦，使得调用者和接受者不直接交互</li><li>系统需要在不同的时间指定请求，将请求排队和执行请求</li><li>系统需要支持命令的核销（Undo）曹组和恢复（Redo）操作</li></ul> 
<h3><a id="44_2710"></a>4.4职责链模式</h3> 
<ul><li>在现实生活中，常常会出现这样的事例：一个请求有多个对象可以处理，但每个对象的处理条件或者权限不同，例如：公司员工请假，可批假的有部门负责人，副总经理，总经理等，但每个领导能批准的天数不同，员工必须根据自己要请假的天数去找不同的领导签名，也就是说员工必须记住每个领导的姓名，电话和地址等信息，这增加了难度，这样的例子还有很多，如找领导出差报销，生活中的击鼓传花游戏等</li><li>定义：又名职责链模式，为了避免请求发送者与多个请求矗立着耦和在一起，将所有的请求矗立着通过前一对象记住下一对象引用链连城一条链，可将请求沿着这条链传递，直到有对象处理它为止</li></ul> 
<hr> 
<p>结构：朱泽连模式主要包含以下角色：</p> 
<ul><li>抽象处理者（Handler）角色：定义一个处理请求的接口，包含抽象出来方法和一个后继连接</li><li>具体处理者（Concrete Handler）角色：实现抽象处理者的处理方法，潘丹是否处理本次请求，如果可以处理请求则处理，否则将该请求传给他的后继者</li><li>客户类（Client）角色：创建处理链，并将链头的具体处理者对象提交请求，它不关心处理细节和请求的传递过程</li></ul> 
<h4><a id="441_2718"></a>4.4.1职责链模式代码实现</h4> 
<ul><li>现需开发一个请假流程控制系统，请假一天以下的假只需要小组长同意即可，请假1-3天需要部门经理统一，请假3-7天需要总经理同意<br> <img src="https://images2.imgbox.com/57/da/DcCtSKBy_o.png" alt="在这里插入图片描述"></li></ul> 
<pre><code class="prism language-java">

<span class="token comment">/**
 * @author LXY
 * @desc 请假条类
 * @time 2023--12--25--16:40
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LeavRepuest</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Integer</span> num<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNum</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> num<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContent</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc  抽象的
 * @time 2023--12--25--16:34
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Hander</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">//定义常量用于判断请假时间</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token constant">NUM_ONE</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token constant">NUM_THREE</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token constant">NUM_SEVEN</span><span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">;</span>

    <span class="token class-name">Hander</span> nexHand<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Integer</span> numStart<span class="token punctuation">;</span>   <span class="token comment">//能管理的开始时间</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> numEnd<span class="token punctuation">;</span>  <span class="token comment">//能管理的最终时间</span>
    <span class="token comment">//子类需要重写构造器，传递给父类自己能审批的时间</span>
    <span class="token keyword">public</span> <span class="token class-name">Hander</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> numStart<span class="token punctuation">,</span> <span class="token class-name">Integer</span> numEnd<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numEnd <span class="token operator">=</span> numEnd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNexHand</span><span class="token punctuation">(</span><span class="token class-name">Hander</span> nexHand<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nexHand <span class="token operator">=</span> nexHand<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//需要子类重写该方法，这是一个审批方法</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span>  <span class="token keyword">void</span> <span class="token function">setNexHand</span><span class="token punctuation">(</span><span class="token class-name">LeavRepuest</span> leavRepuest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//提交</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sumbit</span><span class="token punctuation">(</span><span class="token class-name">LeavRepuest</span> leavRepuest<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>leavRepuest<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span>  <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">"请假时间不能为空"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>leavRepuest<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>leavRepuest<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token keyword">this</span><span class="token punctuation">.</span>numEnd<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token function">setNexHand</span><span class="token punctuation">(</span>leavRepuest<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//开始请假</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>nexHand<span class="token punctuation">.</span><span class="token function">sumbit</span><span class="token punctuation">(</span>leavRepuest<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//如果自己没权限就去链上寻找</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc 总经理
 * @time 2023--12--25--16:46
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GeneralManager</span> <span class="token keyword">extends</span> <span class="token class-name">Hander</span><span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token constant">NUM_THREE</span><span class="token punctuation">,</span> <span class="token constant">NUM_SEVEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNexHand</span><span class="token punctuation">(</span><span class="token class-name">LeavRepuest</span> leavRepuest<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"总经理请假同意：请假人姓名-"</span><span class="token operator">+</span>leavRepuest<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">",请假天数:"</span><span class="token operator">+</span>leavRepuest<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">",请假理由:"</span><span class="token operator">+</span>leavRepuest<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc  组长
 * @time 2023--12--25--16:46
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GroupLeader</span> <span class="token keyword">extends</span> <span class="token class-name">Hander</span><span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">NUM_ONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNexHand</span><span class="token punctuation">(</span><span class="token class-name">LeavRepuest</span> leavRepuest<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"小组长请假同意：请假人姓名-"</span><span class="token operator">+</span>leavRepuest<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">",请假天数:"</span><span class="token operator">+</span>leavRepuest<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">",请假理由:"</span><span class="token operator">+</span>leavRepuest<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc 经理
 * @time 2023--12--25--16:46
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Hander</span><span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token constant">NUM_ONE</span><span class="token punctuation">,</span> <span class="token constant">NUM_THREE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNexHand</span><span class="token punctuation">(</span><span class="token class-name">LeavRepuest</span> leavRepuest<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"经理请假同意：请假人姓名-"</span><span class="token operator">+</span>leavRepuest<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">",请假天数:"</span><span class="token operator">+</span>leavRepuest<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">",请假理由:"</span><span class="token operator">+</span>leavRepuest<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--16:51
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Hander</span> groupLeader <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{<!-- --></span>

        <span class="token comment">//组长</span>
        groupLeader <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//副总经理</span>
        <span class="token class-name">Hander</span> manager<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//总经理</span>
        <span class="token class-name">Hander</span> generalManager<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//绑定职责链</span>
        groupLeader<span class="token punctuation">.</span><span class="token function">setNexHand</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">;</span>
        manager<span class="token punctuation">.</span><span class="token function">setNexHand</span><span class="token punctuation">(</span>generalManager<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">LeavRepuest</span> leavRepuest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LeavRepuest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        leavRepuest<span class="token punctuation">.</span><span class="token function">setNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        leavRepuest<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token string">"支原体感染"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        leavRepuest<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//因为员工只认识自己的上级，所以就只能找自己的上级，组长处理不了继续往上找</span>
        groupLeader<span class="token punctuation">.</span><span class="token function">sumbit</span><span class="token punctuation">(</span>leavRepuest<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> 
<p><img src="https://images2.imgbox.com/61/2d/pma4sZbd_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="442_2890"></a>4.4.2职责链模式优缺点</h4> 
<ul><li> <p>优点</p> </li><li> <p>降低了对象之间的耦合度<br> 该模式降低了请求发送你这和接受者的耦合度</p> </li><li> <p>增强了系统的可扩展性<br> 可以根据需要增加新的请求处理类，满足开闭原则</p> </li><li> <p>增强了给对象指派职责的灵活性<br> 当工作流程发生变化，可以懂爱的改变链内的成员或者修改它们的次序，也可以动态的新增或者删除责任</p> </li><li> <p>责任链简化了对象之间的连接<br> 一个对象只需保持一个指向其后继者的引用，不需保持其他所有处理者的引用，这避免了使用众多的if或者if…else语句</p> </li><li> <p>责任分担<br> 每个类只需要处理自己该处理的工作，不能处理的传递给下一个对象完成，明确各类的职责范围，符合单一职责原则</p> </li><li> <p>缺点：</p> </li><li> <p>不能保证每个请求一定被处理，由于一个请求没有明确的接受者，所以不能保证它一定会被处理，该请求可能传递发哦链的末端都得不到处理</p> </li><li> <p>队比较长的则热念，请求的处理可能设计多个对象，系统性能会受到一定的影响</p> </li></ul> 
<hr> 
<p>在JAVA中的过滤器链和设计模式的职责从某种程度上是一样的</p> 
<h3><a id="45_2910"></a>4.5状态模式</h3> 
<ul><li> <p>概述，通过按钮来控制一个电梯的状态，一个电梯有关门状态，开门状态，停止状态，运行状态，每一种状态都可以改变，都有可能根据其他状态来更新处理，例如：如果电梯门处于运行状态，就不能进行开门操作，如果电梯门是停止状态就可以执行开门操作<br> <img src="https://images2.imgbox.com/b1/b5/6wigTSIs_o.png" alt="在这里插入图片描述"></p> </li><li> <p>状态模式，以下代码略微有点不好理解，可以理解为在Client中，客户首先传递的是Open模式（数据源），<br> 然后去调用Open状态下的open方法，打印，然后调用Open模式下的close方法，但是close方法需要在close模式下才能打印，只能通过 context.setLiftState(context.closeIngState); 去修改之前传递的open模式，这样数据源就变成了close模式</p> </li></ul> 
<pre><code class="prism language-java">  <span class="token operator">-</span> 核心代码
   <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">LiftState</span> liftState<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token operator">=</span>liftState<span class="token punctuation">;</span>
        liftState<span class="token punctuation">.</span><span class="token function">setContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//将自己传给LiftState对象的Context以供子类使用，这样就做到了数据地址不变数据一样就可以实现在子类切换数据源了</span>
    <span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--18:47
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">protected</span>  <span class="token class-name">Context</span> context<span class="token punctuation">;</span>

    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">setContext</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token operator">=</span>context<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span>  <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span>  <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span>  <span class="token keyword">abstract</span>  <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc  上下文类
 * @time 2023--12--25--18:46
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{<!-- --></span>


    <span class="token comment">//实例化四个状态</span>
    <span class="token keyword">public</span>   <span class="token class-name">OpenIngState</span> openIngState<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">OpenIngState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span>   <span class="token class-name">CloseIngState</span> closeIngState<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">CloseIngState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span>   <span class="token class-name">RunIngState</span> runIngState<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RunIngState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span>    <span class="token class-name">StopIngState</span> stopIngState<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">StopIngState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token keyword">private</span> <span class="token class-name">LiftState</span> liftState<span class="token punctuation">;</span>

    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">LiftState</span> liftState<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token operator">=</span>liftState<span class="token punctuation">;</span>
        liftState<span class="token punctuation">.</span><span class="token function">setContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--18:49
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OpenIngState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"电梯门已开"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>closeIngState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//电梯门开着不能启动</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token comment">//电梯门开着不能停止运行</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--18:49
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunIngState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//整在运行不能开门</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"正在运行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>stopIngState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--18:49
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StopIngState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>openIngState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>closeIngState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>runIngState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"电梯已经停止"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--18:49
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CloseIngState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>openIngState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"电梯门已关"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>runIngState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>stopIngState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--25--18:59
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Context</span> context<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        context.setLiftState(new OpenIngState());</span>
<span class="token comment">//        context.setLiftState(new CloseIngState());</span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RunIngState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="451___3115"></a>4.5.1 优缺点和使用场景</h4> 
<ul><li>优点：</li><li>将所有与某个状态有关的行为放到一个类中，并且可以方便的增加新的状态，只需要改变对象状态即可改变对象的行为</li><li>允许状态转换逻辑与状态对象合成一体，而不是某一个巨大的条件语句块</li><li>缺点：</li><li>状态模式的使用必然会增加系统类和对象的个数</li><li>状态模式的结构与实现都较为复杂，如果使用不当将导致程序结构和代码的混乱</li><li>状态模式对开闭原则的支持不太好</li></ul> 
<hr> 
<ul><li>使用场景：</li><li>当一个对象的行为取决于他的状态，并且它必须在运行时根据状态改变它的行为，就尅考虑使用状态模式</li><li>一个操作中含有庞大的分支结构，并且这些分支决定于对象的状态时</li></ul> 
<h3><a id="46_3128"></a>4.6观察者模式</h3> 
<ul><li>定义：又称为发布订阅模式（Publish/subscribe）模式，它定义了一种一对多的依赖关系，让观察者对象同时监听某一个主题对象，这个主题对象在状态变化时，会通知所有的观察者对象，使他们能够自动更新自己</li><li>结构：</li><li>Subject:抽象主题（抽象被观察者），抽象主题角色把所有观察者对象保存在一个集合中，每个主图都可以有任意数量的观察者，抽象主题提供一个接口，可以增加和删除观察者对象</li><li>ConcreteSubject:具体主题（具体被观察者），该角色将有关状态存入具体观察者对象，在具体主题的内部状态发生改变时，给所注册过的观察者发送通知</li><li>observer:抽象观察者，是观察者的抽象类，它定义了一个更新接口，使得在的发哦主题更改通知时更新自己</li><li>ConcrereObserver：具体观察者，实现抽象观察者定义的更新接口，以便在得到主题更改通知时更新自身的状态</li></ul> 
<h4><a id="461__3136"></a>4.6.1 案例实现</h4> 
<ul><li>使用微信公众号，关注的内容有更新的话，它会推送给关注公众号的微信用户端，我们使用观察者模式来模拟这样的场景，微信用户就是观察者，微信用户就是被观察者</li></ul> 
<p><img src="https://images2.imgbox.com/00/23/XKsR71ko_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc  抽象的被观察者
 * @time 2023--12--26--10:09
 */</span>
<span class="token keyword">public</span>  <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Subject</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">//添加方法</span>
    <span class="token keyword">abstract</span>  <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">ObjectServer</span>  server<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//删除方法</span>
    <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">ObjectServer</span> server<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//发送消息</span>
    <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--10:12
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubscriptionSubject</span> <span class="token keyword">extends</span> <span class="token class-name">Subject</span><span class="token punctuation">{<!-- --></span>

    <span class="token comment">//观察者集合</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ObjectServer</span><span class="token punctuation">&gt;</span></span>serverList<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">SubscriptionSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        serverList<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">ObjectServer</span> server<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        serverList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">ObjectServer</span> server<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        serverList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//给每一个观察者发送消息</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ObjectServer</span> objectServer <span class="token operator">:</span> serverList<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            objectServer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--10:10
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ObjectServer</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">void</span>  <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> mess<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--10:14
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeixinUser</span> <span class="token keyword">implements</span> <span class="token class-name">ObjectServer</span><span class="token punctuation">{<!-- --></span>

    <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> mes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token operator">+</span><span class="token string">"接收到了消息："</span><span class="token operator">+</span>mes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--10:15
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token comment">//实例化微信用户</span>
         <span class="token class-name">SubscriptionSubject</span> subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubscriptionSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"孙悟空"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"杨戬"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"哪吒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        subject<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">"您关注的天庭趣事更新了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/9b/fa/NIGQyWha_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="462__3242"></a>4.6.2 优缺点和使用场景</h4> 
<ul><li>优点：降低了目标与观察者之间的耦和关系，两者之间是抽象耦和关系</li><li>被观察者发送了通知，所有注册的观察者都会收到信息【可以实现广播机制】</li><li>缺点：</li><li>如果观察者非常多的话，那么所有的观察者收到被观察者发送的通知会消耗</li><li>如果被观察者有循环依赖的话，那么被观察者发送通知会使观察者循环调用，导致系统崩溃</li></ul> 
<hr> 
<ul><li>使用场景</li><li>对象存在一对多关系，一个对象的状态发生改变会影响其他对象</li></ul> 
<h3><a id="47_3252"></a>4.7迭代器模式</h3> 
<ul><li>概述： 提供了一个对戏那个来顺序访问聚合对象中的一系列数据，而不暴露聚合对象的内部表示</li><li>迭代器模式主要包含以下角色</li><li>抽象聚合（Aggregate）角色：定义存储，添加，删除聚合元素以及创建迭代器对象的接口</li><li>具体聚合（ConcreteAggregate）角色：实现聚合抽象类，返回一个具体迭代器的实例</li><li>抽象迭代器（Iterator）角色：东一访问和遍历聚合元素的接口，通常包含hashNext(),Next()等方法</li><li>具体迭代器（ConcreteIterator）角色：实现抽象迭代器中所定义的方法，完成对聚合对象的遍历，记录遍历的当前位置</li></ul> 
<h4><a id="471_3259"></a>4.7.1迭代器模式代码实现</h4> 
<p>`<img src="https://images2.imgbox.com/29/8e/QbPgGAwQ_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc  学生实体类
 * @time 2023--12--26--11:22
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//学号，姓名</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> num<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> num<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Student{"</span> <span class="token operator">+</span>
                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", num='"</span> <span class="token operator">+</span> num <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNum</span><span class="token punctuation">(</span><span class="token class-name">String</span> num<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc  迭代器接口
 * @time 2023--12--26--11:24
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentItetator</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">//用来判断有没有下一个元素</span>
    <span class="token keyword">boolean</span> <span class="token function">hasNex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc  迭代器接口的实现
 * @time 2023--12--26--11:25
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentItetatorImple</span> <span class="token keyword">implements</span>  <span class="token class-name">StudentItetator</span><span class="token punctuation">{<!-- --></span>

    <span class="token comment">//学生存储对象</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span>studentList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">StudentItetatorImple</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> studentList<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>studentList <span class="token operator">=</span> studentList<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> position<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>   <span class="token comment">//定义计数器</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> position<span class="token operator">&lt;</span>studentList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//拿到数据</span>
        <span class="token class-name">Student</span> student <span class="token operator">=</span> studentList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        position<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token comment">//计数器+1</span>
        <span class="token keyword">return</span> student<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc  对学生的功能操作的获取学生迭代器
 * @time 2023--12--26--11:23
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">StudentItetator</span> <span class="token function">getStudentItetator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--11:29
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentAggregateImple</span> <span class="token keyword">implements</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span>studentList<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">StudentAggregateImple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>studentList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        studentList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        studentList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">StudentItetator</span> <span class="token function">getStudentItetator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">StudentItetatorImple</span><span class="token punctuation">(</span>studentList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--11:32
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">StudentAggregateImple</span> studentAggregateImple <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StudentAggregateImple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        studentAggregateImple<span class="token punctuation">.</span><span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span><span class="token string">"001"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        studentAggregateImple<span class="token punctuation">.</span><span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">,</span><span class="token string">"008"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        studentAggregateImple<span class="token punctuation">.</span><span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"张飞"</span><span class="token punctuation">,</span><span class="token string">"006"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">final</span> <span class="token class-name">StudentItetator</span> studentItetator <span class="token operator">=</span> studentAggregateImple<span class="token punctuation">.</span><span class="token function">getStudentItetator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>studentItetator<span class="token punctuation">.</span><span class="token function">hasNex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">final</span> <span class="token class-name">Student</span> next <span class="token operator">=</span> studentItetator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span>

</code></pre> 
<h4><a id="472_3408"></a>4.7.2优缺点和使用场景</h4> 
<ul><li>优点：</li><li>它支持以不同的方式遍历一个聚合对象，在同一个聚合对象上可以定义多种遍历方式，在迭代器模式中只需要用一个不同迭代器来替换原有迭代器即可改变遍历算法，我们也可以自定义迭代器的子类以支持新的遍历方式</li><li>迭代器简化了聚合类，由于引入了迭代器，在原有的聚合对象中不需要再自行提供数据遍历等方法，这样可以简化聚合类的设计</li><li>在迭代器模式中，由于引入了抽象层，增加新的聚合类的迭代器都很方便，无需修改原有代码，满足“开闭原则”的 要求</li><li>缺点：</li><li>增加了类的使用个数，这在一点程度上增加了系统的复杂性</li></ul> 
<hr> 
<p>使用场景<br> 当需要为聚合对象提供多种遍历方式时。<br> 当需要为遍历不同的聚合结构提供一个统一接口时<br> 当访问一个聚合对象的内容而无需暴露其内部细节的表示时</p> 
<h3><a id="48_3421"></a>4.8访问者模式</h3> 
<ul><li>概述：封装一些用于某种数据结构中的各元素操作，它可以在不改变这个数据结构的前提下定义作用域这些元素的新的操作</li><li>结构：</li><li>抽象访问者（Visitor）角色：定义了对每一个元素（Element）访问的行为，它的参数就是可以访问的元素，它的方法个数理论上来讲与元素类个数（Element的实现类个数）是一样的，从这点不难看出，访问模式要求元素类的个数不能改变</li><li>具体元素（ConcreteElement）角色 ：提供接受访问方法的具体实现，而这个具体的实现，通常情况下是使用访问者模式提供的访问该元素的方法</li><li>抽象元素（Element）角色：定义了一个接受访问者的方法（Accept）其意义是指每一个元素都要可以被访问者访问</li><li>对象结构（Object Structure）角色：定义当中所提到的对象结构，对象结构是一个抽象表述，具体点可以理解为一个具有容器性质或者复合对象特征的类，它会含有一组元素（Element），并且可以迭代这些元素，供访问者访问</li></ul> 
<h4><a id="481_3428"></a>4.8.1访问者代码实现</h4> 
<ul><li>以下的例子是一个喂猫的例子，有猫和狗两种类型，其中有主人来喂，也有别人代替喂<br> Animal中的Accept方法，其中Dog和Cat实现了是为了调用Persion中对应的重载的feed方法<br> <img src="https://images2.imgbox.com/ca/1b/Ej0QbIC1_o.png" alt="在这里插入图片描述"></li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--14:53
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Aminal</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">void</span>  <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Persion</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--14:54
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Aminal</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Persion</span> p<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        p<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"喵喵---"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--14:54
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Aminal</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Persion</span> p<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        p<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"汪汪汪"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--14:53
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Persion</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--14:56
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Someone</span> <span class="token keyword">implements</span> <span class="token class-name">Persion</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"  Someone  喂猫"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"  Someone  喂狗 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--14:55
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Owner</span> <span class="token keyword">implements</span> <span class="token class-name">Persion</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"  Owner  喂猫"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"  Owner  喂狗 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--14:58
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//存错多个动物</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aminal</span><span class="token punctuation">&gt;</span></span>aminalList<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aminal</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Aminal</span> aminal<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        aminalList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>aminal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token class-name">Persion</span> persion<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Aminal</span> aminal <span class="token operator">:</span> aminalList<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            aminal<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>persion<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--15:00
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Home</span> home<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Someone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="482__3552"></a>4.8.2 优缺点和使用场景</h4> 
<ul><li>优点</li><li>扩展性好<br> 在不修改对象结构元素中的元素的情况下，为对象结构中的元素添加新的功能</li><li>复用性好<br> 通过访问者来定义整个对象结构通用的功能，从而提高复用程度</li><li>分离无关行为<br> 通过访问者来分离无关行为，把相关的行为封装在一起，构成一个访问者，这样每一个访问者的功能都比较单一</li><li>缺点：</li><li>对象结构变化很困难<br> 在访问者模式中每增加一个元素类都要在具体访问者类中增加对应具体啊哦做，这违背了开闭原则</li></ul> 
<h3><a id="49_3564"></a>4.9备忘录模式</h3> 
<ul><li>概述： 备忘录模式提供了一种状态回复的实现机制，使得用户可以方便的回到某一个特定的历史步骤，当前的状态无效或者存在问题时，可以使用暂时存储起来的备忘录将状态复原，很多软件都提供了撤销操作，如Word，记事本，Phostsshop,IDea等软件在编辑时候按照撤销就可以撤回当前操作</li><li>定义：又叫快照模式，在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态，一遍以后需要时能将该对象恢复到原先保存的状态</li></ul> 
<hr> 
<ul><li>结构：</li><li>备忘录模式的主要角色如下：</li><li>发起人（Originator）角色：记录当前时刻的内部状态信息，提供创建备忘录和恢复备忘录数据的功能，实现其他业务功能，它可以访问备忘录里的所有信息</li><li>备忘录（Memente）角色：负责存储发起人的内部状态，在需要的时候提供这些内部状态发起人</li><li>管理者（Caretaker）角色：对备忘录进行管理，提供保存与获取备忘录的功能，但其不能对备忘录的内容进行访问与修改</li></ul> 
<h4><a id="491__3573"></a>4.9.1 备忘录模式代码实现</h4> 
<p>例：【挑战游戏Boss】<br> 游戏中的某个场景，一游戏角色有生命力，攻击力，防御力等数据，在打Boss前后是不一样的，我们允许玩家如果感觉与Boss决定的效果不理想可以让游戏恢复到决斗之前的状态</p> 
<ul><li>要实现上述案例，有两种方式</li><li>白箱备忘录模式，黑箱备忘录模式</li></ul> 
<h5><a id="4911__3578"></a>4.9.1.1 白箱备忘录模式</h5> 
<ul><li>备忘录角色对任何独享都提供一个接口，即宽接口，备忘录角色的内部存储的状态就对所有对象公开<br> <img src="https://images2.imgbox.com/88/eb/LnvTVbUj_o.png" alt="在这里插入图片描述"></li></ul> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc  角色类
 * @time 2023--12--26--16:06
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GanmeRole</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token class-name">Vit</span><span class="token punctuation">;</span>   <span class="token comment">//生命力</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>  <span class="token comment">//攻击力</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>  <span class="token comment">//防御力</span>

    <span class="token comment">//初始化状态</span>
    <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>Vit</span><span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//和boss进行战斗</span>
    <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>Vit</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk<span class="token operator">=</span><span class="token number">120</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//保存备忘录</span>
     <span class="token class-name">RoleStateMemento</span> <span class="token function">savaState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>Vit</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>atk<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>def<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

    <span class="token comment">//备忘录的数据进行恢复</span>
    <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAtk</span><span class="token punctuation">(</span>roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setDef</span><span class="token punctuation">(</span>roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setVit</span><span class="token punctuation">(</span>roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name">Vit</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Vit</span> <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">GanmeRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">GanmeRole</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Vit</span> <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"GanmeRole{"</span> <span class="token operator">+</span>
                <span class="token string">"Vit="</span> <span class="token operator">+</span> <span class="token class-name">Vit</span> <span class="token operator">+</span>
                <span class="token string">", atk="</span> <span class="token operator">+</span> atk <span class="token operator">+</span>
                <span class="token string">", def="</span> <span class="token operator">+</span> def <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc  备忘录，可以通过我来进行数据的恢复
 * @time 2023--12--26--16:09
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token class-name">Vit</span><span class="token punctuation">;</span>   <span class="token comment">//生命力</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>  <span class="token comment">//攻击力</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>  <span class="token comment">//防御力</span>


    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Vit</span> <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name">Vit</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Vit</span> <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc  游戏管理者对象
 * @time 2023--12--26--16:14
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{<!-- --></span>

    <span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">;</span>


    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>roleStateMemento <span class="token operator">=</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>roleStateMemento <span class="token operator">=</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>
    
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--16:14
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cliet</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">GanmeRole</span> ganmeRole<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">GanmeRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//初始化角色类</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------战斗开始--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ganmeRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ganmeRole<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//创建游戏管理者对象</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//战斗开始的时候做一下备份 这是备份出来的数据</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span> ganmeRole<span class="token punctuation">.</span><span class="token function">savaState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-----------战斗结束---------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ganmeRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ganmeRole<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------恢复数据--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ganmeRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ganmeRole<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/c8/6a/EUSEvzaK_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="4911___3765"></a>4.9.1.1 黑箱备忘录模式</h5> 
<ul><li>将RoleStateMemento 变为内部类实现Memento ，对外暴露的窄宽口是Memento ，这样就不会直接保留里面的代码，暴露出去的是接口</li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @author LXY
 * @desc  备忘录接口，对外提供的窄接口
 * @time 2023--12--26--16:27
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Memento</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc 角色类
 * @time 2023--12--26--16:06
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GanmeRole</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token class-name">Vit</span><span class="token punctuation">;</span>   <span class="token comment">//生命力</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>  <span class="token comment">//攻击力</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>  <span class="token comment">//防御力</span>

    <span class="token comment">//初始化状态</span>
    <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>Vit</span><span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//和boss进行战斗</span>
    <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>Vit</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk<span class="token operator">=</span><span class="token number">120</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//保存备忘录</span>
     <span class="token class-name">RoleStateMemento</span> <span class="token function">savaState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>Vit</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>atk<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>def<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

    <span class="token comment">//备忘录的数据进行恢复</span>
    <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span><span class="token punctuation">)</span> memento<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAtk</span><span class="token punctuation">(</span>roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setDef</span><span class="token punctuation">(</span>roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setVit</span><span class="token punctuation">(</span>roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name">Vit</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Vit</span> <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">GanmeRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">GanmeRole</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Vit</span> <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"GanmeRole{"</span> <span class="token operator">+</span>
                <span class="token string">"Vit="</span> <span class="token operator">+</span> <span class="token class-name">Vit</span> <span class="token operator">+</span>
                <span class="token string">", atk="</span> <span class="token operator">+</span> atk <span class="token operator">+</span>
                <span class="token string">", def="</span> <span class="token operator">+</span> def <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span>  <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span>  <span class="token keyword">implements</span> <span class="token class-name">Memento</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token class-name">Vit</span><span class="token punctuation">;</span>   <span class="token comment">//生命力</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>  <span class="token comment">//攻击力</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>  <span class="token comment">//防御力</span>


        <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Vit</span> <span class="token operator">=</span> vit<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token class-name">Vit</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Vit</span> <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc 游戏管理者对象
 * @time 2023--12--26--16:14
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{<!-- --></span>

    <span class="token class-name">Memento</span> memento<span class="token punctuation">;</span>


    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemento</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memento <span class="token operator">=</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--16:14
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cliet</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>rj<span class="token punctuation">.</span>jand<span class="token punctuation">.</span>patten<span class="token punctuation">.</span>memorandum<span class="token punctuation">.</span></span>BlackMemoradum<span class="token punctuation">.</span>GanmeRole</span> ganmeRole<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">GanmeRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//初始化角色类</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------战斗开始--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ganmeRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ganmeRole<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">final</span> <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//战斗开始的时候做一下备份 这是备份出来的数据</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setMemento</span><span class="token punctuation">(</span> ganmeRole<span class="token punctuation">.</span><span class="token function">savaState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-----------战斗结束---------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ganmeRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ganmeRole<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------恢复数据--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ganmeRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ganmeRole<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h5><a id="492__3947"></a>4.9.2 优缺点和使用场景</h5> 
<ul><li>优点：</li><li>提醒了一种可以恢复状态的机制，当用户需要时能够比较方便的将数据恢复到某个历史的状态</li><li>实现了内部状态的封装，除了创建它的发起人之外，其他对象都不能够访问 这些状态信息</li><li>简化饿发起人类，发起人不再需要管理员和保存其内部状态的各个备份，所有的状态信息都保存在备忘录中，并由管理者进行管理，这符合单一职责原则</li><li>缺点：</li><li>资源消耗大，如果要保存的内部状态信息过多或者特别频繁，将会占用比较大的内存资源</li></ul> 
<hr> 
<p>需要保存与恢复数据的场景，如玩游戏时的中间结果的存档功能，<br> 需要提供一个可回滚操作的场景，如word，PS，idea等软件的撤销功能，还有数据库中事务的操作</p> 
<h3><a id="410_3965"></a>4.10解释器模式</h3> 
<ul><li>结构：</li><li>解释器模式包含以下主要角色</li><li>抽象表达式（Abstract Expression）角色：定义解释器的接口，约定解释器的解释操作，主要包含解释方法interpret()</li><li>终结符表达式（Terminal Expression）角色：是抽象表达式的子类，用来实现文法中与终结符相关的操作，文法中的每一个终结符都有一个具体表达式与之相对应</li><li>非终结符表达式（Nonterminal Expression）角色：也是抽象表达的子类，用来实现文法中与非终结符相关的操作，文法中的每条规则都对应于一个非终结符表达式</li><li>环境（Context）角色：通常包含各个解释器需要的数据或是公共的功能，一把用来传递被所有解释器共享的数据，后面解释器可以从这里获取这些值</li><li>客户端（Client）主要任务是将需要分析的句子或表达式转换成使用解释器对象描述的抽象语法书，然后调用解释器的解释方法</li></ul> 
<h4><a id="4101__3973"></a>4.10.1 代码运行</h4> 
<ul><li>设计只有一个加减法的计算器</li><li><img src="https://images2.imgbox.com/ef/2c/7o6JBRmi_o.png" alt="在这里插入图片描述"></li></ul> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--17:04
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AbstractEcpresssion</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>




<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--17:06
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Plus</span> <span class="token keyword">implements</span> <span class="token class-name">AbstractEcpresssion</span><span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">AbstractEcpresssion</span> left<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">AbstractEcpresssion</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token class-name">AbstractEcpresssion</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractEcpresssion</span> right<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//相加</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token operator">+</span>right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc  减法
 * @time 2023--12--26--17:06
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Minus</span> <span class="token keyword">implements</span> <span class="token class-name">AbstractEcpresssion</span><span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">AbstractEcpresssion</span> left<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">AbstractEcpresssion</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span><span class="token class-name">AbstractEcpresssion</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractEcpresssion</span> right<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//相加</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token operator">-</span>right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--17:05
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Variable</span> <span class="token keyword">implements</span> <span class="token class-name">AbstractEcpresssion</span><span class="token punctuation">{<!-- --></span>

    <span class="token class-name">String</span> name<span class="token punctuation">;</span>


    <span class="token keyword">public</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">getvalue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--17:05
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//定义存储Variable</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Variable</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span>map<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> val<span class="token punctuation">,</span><span class="token class-name">Integer</span> value<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getvalue</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> v<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @author LXY
 * @desc
 * @time 2023--12--26--17:11
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Variable</span> a<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> b<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> c<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> d<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Context</span> context<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//简单加减法  1+2</span>
<span class="token comment">//        AbstractEcpresssion abstractEcpresssion=new Plus(a,b);</span>
                    <span class="token comment">//1+2-3</span>
        <span class="token class-name">AbstractEcpresssion</span> abstractEcpresssion<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"abstractEcpresssion.interpret(context) = "</span> <span class="token operator">+</span> abstractEcpresssion<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/4a/b0/JVwaWtJ5_o.png" alt="``` "></p> 
<h4><a id="4102___4107"></a>4.10.2 优缺点</h4> 
<ul><li> <p>优点：易于改变和扩展文法<br> 由于在解释器模式中使用类来表示文言的文法规则，因此可以通过继承机制来改变或扩展文法，每一条文法负责都可以表示是一个类，因此可以方便的实现一个简单的语言</p> </li><li> <p>实现文法比较容易<br> 在抽象语法书中每一个表达式节点类的实现方式都是相似的，这些类的代码编写的都不会特别复杂</p> </li><li> <p>增加新的解释表达式较为方便<br> 如果用户需要增加新的解释表达式只需要对应增加一个新的总结福表达式或者非终结符表达式类，原有表达式类大马无需修改，符合开闭原则</p> </li><li> <p>缺点：</p> </li><li> <p>对于复杂文法难以维护<br> 在解释器模式中，每一条规则至少需要定义一个类，因此如果一个预压包含太多文法规则，类的个数将会急剧增加，导致系统难以管理和维护</p> </li><li> <p>执行效率低<br> 由于在解释器模式使用了大量的循环和递归调用，因此在解释较为复杂的句子时速度很慢，而代码的调试过程也比较麻烦</p> </li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0cf5fdc8c419a059f9d5cd73a782f0d8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Unity坦克大战开发全流程——开始场景——排行榜数据逻辑</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bb491ef9c275bb0c16b291e7d1593999/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【1】Docker详解与部署微服务实战</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>