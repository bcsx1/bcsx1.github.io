<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python实现我的世界小游戏源代码 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python实现我的世界小游戏源代码" />
<meta property="og:description" content="这篇文章主要介绍了Python实现我的世界小游戏源代码,代码简单易懂，对大家的学习或工作具有一定的参考借鉴价值，需要的朋友可以参考下
我的世界小游戏使用方法：
移动
前进：W，后退：S，向左：A，向右：D，环顾四周:鼠标，跳起：空格键，切换飞行模式:Tab;
选择建筑材料
砖：1，草：2，沙子：3，删除建筑：鼠标左键单击，创建建筑块：鼠标右键单击
ESC退出程序。
完整程序包请通过文末地址下载，程序运行截图如下：
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/21acbe4c72a2904900946ddce7bb8622/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-22T14:00:50+08:00" />
<meta property="article:modified_time" content="2023-07-22T14:00:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python实现我的世界小游戏源代码</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>这篇文章主要介绍了Python实现我的世界小游戏源代码,代码简单易懂，对大家的学习或工作具有一定的参考借鉴价值，需要的朋友可以参考下</p> 
<p>我的世界小游戏使用方法：</p> 
<p>移动</p> 
<p>前进：W，后退：S，向左：A，向右：D，环顾四周:鼠标，跳起：空格键，切换飞行模式:Tab;</p> 
<p>选择建筑材料</p> 
<p>砖：1，草：2，沙子：3，删除建筑：鼠标左键单击，创建建筑块：鼠标右键单击</p> 
<p>ESC退出程序。</p> 
<p>完整程序包请通过文末地址下载，程序运行截图如下：</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="1080" src="https://images2.imgbox.com/4c/c1/5klDPdkG_o.jpg" width="1200"></p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>5</p> <p>6</p> <p>7</p> <p>8</p> <p>9</p> <p>10</p> <p>11</p> <p>12</p> <p>13</p> <p>14</p> <p>15</p> <p>16</p> <p>17</p> <p>18</p> <p>19</p> <p>20</p> <p>21</p> <p>22</p> <p>23</p> <p>24</p> <p>25</p> <p>26</p> <p>27</p> <p>28</p> <p>29</p> <p>30</p> <p>31</p> <p>32</p> <p>33</p> <p>34</p> <p>35</p> <p>36</p> <p>37</p> <p>38</p> <p>39</p> <p>40</p> <p>41</p> <p>42</p> <p>43</p> <p>44</p> <p>45</p> <p>46</p> <p>47</p> <p>48</p> <p>49</p> <p>50</p> <p>51</p> <p>52</p> <p>53</p> <p>54</p> <p>55</p> <p>56</p> <p>57</p> <p>58</p> <p>59</p> <p>60</p> <p>61</p> <p>62</p> <p>63</p> <p>64</p> <p>65</p> <p>66</p> <p>67</p> <p>68</p> <p>69</p> <p>70</p> <p>71</p> <p>72</p> <p>73</p> <p>74</p> <p>75</p> <p>76</p> <p>77</p> <p>78</p> <p>79</p> <p>80</p> <p>81</p> <p>82</p> <p>83</p> <p>84</p> <p>85</p> <p>86</p> <p>87</p> <p>88</p> <p>89</p> <p>90</p> <p>91</p> <p>92</p> <p>93</p> <p>94</p> <p>95</p> <p>96</p> <p>97</p> <p>98</p> <p>99</p> <p>100</p> <p>101</p> <p>102</p> <p>103</p> <p>104</p> <p>105</p> <p>106</p> <p>107</p> <p>108</p> <p>109</p> <p>110</p> <p>111</p> <p>112</p> <p>113</p> <p>114</p> <p>115</p> <p>116</p> <p>117</p> <p>118</p> <p>119</p> <p>120</p> <p>121</p> <p>122</p> <p>123</p> <p>124</p> <p>125</p> <p>126</p> <p>127</p> <p>128</p> <p>129</p> <p>130</p> <p>131</p> <p>132</p> <p>133</p> <p>134</p> <p>135</p> <p>136</p> <p>137</p> <p>138</p> <p>139</p> <p>140</p> <p>141</p> <p>142</p> <p>143</p> <p>144</p> <p>145</p> <p>146</p> <p>147</p> <p>148</p> <p>149</p> <p>150</p> <p>151</p> <p>152</p> <p>153</p> <p>154</p> <p>155</p> <p>156</p> <p>157</p> <p>158</p> <p>159</p> <p>160</p> <p>161</p> <p>162</p> <p>163</p> <p>164</p> <p>165</p> <p>166</p> <p>167</p> <p>168</p> <p>169</p> <p>170</p> <p>171</p> <p>172</p> <p>173</p> <p>174</p> <p>175</p> <p>176</p> <p>177</p> <p>178</p> <p>179</p> <p>180</p> <p>181</p> <p>182</p> <p>183</p> <p>184</p> <p>185</p> <p>186</p> <p>187</p> <p>188</p> <p>189</p> <p>190</p> <p>191</p> <p>192</p> <p>193</p> <p>194</p> <p>195</p> <p>196</p> <p>197</p> <p>198</p> <p>199</p> <p>200</p> <p>201</p> <p>202</p> <p>203</p> <p>204</p> <p>205</p> <p>206</p> <p>207</p> <p>208</p> <p>209</p> <p>210</p> <p>211</p> <p>212</p> <p>213</p> <p>214</p> <p>215</p> <p>216</p> <p>217</p> <p>218</p> <p>219</p> <p>220</p> <p>221</p> <p>222</p> <p>223</p> <p>224</p> <p>225</p> <p>226</p> <p>227</p> <p>228</p> <p>229</p> <p>230</p> <p>231</p> <p>232</p> <p>233</p> <p>234</p> <p>235</p> <p>236</p> <p>237</p> <p>238</p> <p>239</p> <p>240</p> <p>241</p> <p>242</p> <p>243</p> <p>244</p> <p>245</p> <p>246</p> <p>247</p> <p>248</p> <p>249</p> <p>250</p> <p>251</p> <p>252</p> <p>253</p> <p>254</p> <p>255</p> <p>256</p> <p>257</p> <p>258</p> <p>259</p> <p>260</p> <p>261</p> <p>262</p> <p>263</p> <p>264</p> <p>265</p> <p>266</p> <p>267</p> <p>268</p> <p>269</p> <p>270</p> <p>271</p> <p>272</p> <p>273</p> <p>274</p> <p>275</p> <p>276</p> <p>277</p> <p>278</p> <p>279</p> <p>280</p> <p>281</p> <p>282</p> <p>283</p> <p>284</p> <p>285</p> <p>286</p> <p>287</p> <p>288</p> <p>289</p> <p>290</p> <p>291</p> <p>292</p> <p>293</p> <p>294</p> <p>295</p> <p>296</p> <p>297</p> <p>298</p> <p>299</p> <p>300</p> <p>301</p> <p>302</p> <p>303</p> <p>304</p> <p>305</p> <p>306</p> <p>307</p> <p>308</p> <p>309</p> <p>310</p> <p>311</p> <p>312</p> <p>313</p> <p>314</p> <p>315</p> <p>316</p> <p>317</p> <p>318</p> <p>319</p> <p>320</p> <p>321</p> <p>322</p> <p>323</p> <p>324</p> <p>325</p> <p>326</p> <p>327</p> <p>328</p> <p>329</p> <p>330</p> <p>331</p> <p>332</p> <p>333</p> <p>334</p> <p>335</p> <p>336</p> <p>337</p> <p>338</p> <p>339</p> <p>340</p> <p>341</p> <p>342</p> <p>343</p> <p>344</p> <p>345</p> <p>346</p> <p>347</p> <p>348</p> <p>349</p> <p>350</p> <p>351</p> <p>352</p> <p>353</p> <p>354</p> <p>355</p> <p>356</p> <p>357</p> <p>358</p> <p>359</p> <p>360</p> <p>361</p> <p>362</p> <p>363</p> <p>364</p> <p>365</p> <p>366</p> <p>367</p> <p>368</p> <p>369</p> <p>370</p> <p>371</p> <p>372</p> <p>373</p> <p>374</p> <p>375</p> <p>376</p> <p>377</p> <p>378</p> <p>379</p> <p>380</p> <p>381</p> <p>382</p> <p>383</p> <p>384</p> <p>385</p> <p>386</p> <p>387</p> <p>388</p> <p>389</p> <p>390</p> <p>391</p> <p>392</p> <p>393</p> <p>394</p> <p>395</p> <p>396</p> <p>397</p> <p>398</p> <p>399</p> <p>400</p> <p>401</p> <p>402</p> <p>403</p> <p>404</p> <p>405</p> <p>406</p> <p>407</p> <p>408</p> <p>409</p> <p>410</p> <p>411</p> <p>412</p> <p>413</p> <p>414</p> <p>415</p> <p>416</p> <p>417</p> <p>418</p> <p>419</p> <p>420</p> <p>421</p> <p>422</p> <p>423</p> <p>424</p> <p>425</p> <p>426</p> <p>427</p> <p>428</p> <p>429</p> <p>430</p> <p>431</p> <p>432</p> <p>433</p> <p>434</p> <p>435</p> <p>436</p> <p>437</p> <p>438</p> <p>439</p> <p>440</p> <p>441</p> <p>442</p> <p>443</p> <p>444</p> <p>445</p> <p>446</p> <p>447</p> <p>448</p> <p>449</p> <p>450</p> <p>451</p> <p>452</p> <p>453</p> <p>454</p> <p>455</p> <p>456</p> <p>457</p> <p>458</p> <p>459</p> <p>460</p> <p>461</p> <p>462</p> <p>463</p> <p>464</p> <p>465</p> <p>466</p> <p>467</p> <p>468</p> <p>469</p> <p>470</p> <p>471</p> <p>472</p> <p>473</p> <p>474</p> <p>475</p> <p>476</p> <p>477</p> <p>478</p> <p>479</p> <p>480</p> <p>481</p> <p>482</p> <p>483</p> <p>484</p> <p>485</p> <p>486</p> <p>487</p> <p>488</p> <p>489</p> <p>490</p> <p>491</p> <p>492</p> <p>493</p> <p>494</p> <p>495</p> <p>496</p> <p>497</p> <p>498</p> <p>499</p> <p>500</p> <p>501</p> <p>502</p> <p>503</p> <p>504</p> <p>505</p> <p>506</p> <p>507</p> <p>508</p> <p>509</p> <p>510</p> <p>511</p> <p>512</p> <p>513</p> <p>514</p> <p>515</p> <p>516</p> <p>517</p> <p>518</p> <p>519</p> <p>520</p> <p>521</p> <p>522</p> <p>523</p> <p>524</p> <p>525</p> <p>526</p> <p>527</p> <p>528</p> <p>529</p> <p>530</p> <p>531</p> <p>532</p> <p>533</p> <p>534</p> <p>535</p> <p>536</p> <p>537</p> <p>538</p> <p>539</p> <p>540</p> <p>541</p> <p>542</p> <p>543</p> <p>544</p> <p>545</p> <p>546</p> <p>547</p> <p>548</p> <p>549</p> <p>550</p> <p>551</p> <p>552</p> <p>553</p> <p>554</p> <p>555</p> <p>556</p> <p>557</p> <p>558</p> <p>559</p> <p>560</p> <p>561</p> <p>562</p> <p>563</p> <p>564</p> <p>565</p> <p>566</p> <p>567</p> <p>568</p> <p>569</p> <p>570</p> <p>571</p> <p>572</p> <p>573</p> <p>574</p> <p>575</p> <p>576</p> <p>577</p> <p>578</p> <p>579</p> <p>580</p> <p>581</p> <p>582</p> <p>583</p> <p>584</p> <p>585</p> <p>586</p> <p>587</p> <p>588</p> <p>589</p> <p>590</p> <p>591</p> <p>592</p> <p>593</p> <p>594</p> <p>595</p> <p>596</p> <p>597</p> <p>598</p> <p>599</p> <p>600</p> <p>601</p> <p>602</p> <p>603</p> <p>604</p> <p>605</p> <p>606</p> <p>607</p> <p>608</p> <p>609</p> <p>610</p> <p>611</p> <p>612</p> <p>613</p> <p>614</p> <p>615</p> <p>616</p> <p>617</p> <p>618</p> <p>619</p> <p>620</p> <p>621</p> <p>622</p> <p>623</p> <p>624</p> <p>625</p> <p>626</p> <p>627</p> <p>628</p> <p>629</p> <p>630</p> <p>631</p> <p>632</p> <p>633</p> <p>634</p> <p>635</p> <p>636</p> <p>637</p> <p>638</p> <p>639</p> <p>640</p> <p>641</p> <p>642</p> <p>643</p> <p>644</p> <p>645</p> <p>646</p> <p>647</p> <p>648</p> <p>649</p> <p>650</p> <p>651</p> <p>652</p> <p>653</p> <p>654</p> <p>655</p> <p>656</p> <p>657</p> <p>658</p> <p>659</p> <p>660</p> <p>661</p> <p>662</p> <p>663</p> <p>664</p> <p>665</p> <p>666</p> <p>667</p> <p>668</p> <p>669</p> <p>670</p> <p>671</p> <p>672</p> <p>673</p> <p>674</p> <p>675</p> <p>676</p> <p>677</p> <p>678</p> <p>679</p> <p>680</p> <p>681</p> <p>682</p> <p>683</p> <p>684</p> <p>685</p> <p>686</p> <p>687</p> <p>688</p> <p>689</p> <p>690</p> <p>691</p> <p>692</p> <p>693</p> <p>694</p> <p>695</p> <p>696</p> <p>697</p> <p>698</p> <p>699</p> <p>700</p> <p>701</p> <p>702</p> <p>703</p> <p>704</p> <p>705</p> <p>706</p> <p>707</p> <p>708</p> <p>709</p> <p>710</p> <p>711</p> <p>712</p> <p>713</p> <p>714</p> <p>715</p> <p>716</p> <p>717</p> <p>718</p> <p>719</p> <p>720</p> <p>721</p> <p>722</p> <p>723</p> <p>724</p> <p>725</p> <p>726</p> <p>727</p> <p>728</p> <p>729</p> <p>730</p> <p>731</p> <p>732</p> <p>733</p> <p>734</p> <p>735</p> <p>736</p> <p>737</p> <p>738</p> <p>739</p> <p>740</p> <p>741</p> <p>742</p> <p>743</p> <p>744</p> <p>745</p> <p>746</p> <p>747</p> <p>748</p> <p>749</p> <p>750</p> <p>751</p> <p>752</p> <p>753</p> <p>754</p> <p>755</p> <p>756</p> <p>757</p> <p>758</p> <p>759</p> <p>760</p> <p>761</p> <p>762</p> <p>763</p> <p>764</p> <p>765</p> <p>766</p> <p>767</p> <p>768</p> <p>769</p> <p>770</p> <p>771</p> <p>772</p> <p>773</p> <p>774</p> <p>775</p> <p>776</p> <p>777</p> <p>778</p> <p>779</p> <p>780</p> <p>781</p> <p>782</p> <p>783</p> <p>784</p> <p>785</p> <p>786</p> <p>787</p> <p>788</p> <p>789</p> <p>790</p> <p>791</p> <p>792</p> <p>793</p> <p>794</p> <p>795</p> <p>796</p> <p>797</p> <p>798</p> <p>799</p> <p>800</p> <p>801</p> <p>802</p> <p>803</p> <p>804</p> <p>805</p> <p>806</p> <p>807</p> <p>808</p> <p>809</p> <p>810</p> <p>811</p> <p>812</p> <p>813</p> <p>814</p> <p>815</p> <p>816</p> <p>817</p> <p>818</p> <p>819</p> <p>820</p> <p>821</p> <p>822</p> <p>823</p> <p>824</p> <p>825</p> <p>826</p> <p>827</p> <p>828</p> <p>829</p> <p>830</p> <p>831</p> <p>832</p> <p>833</p> <p>834</p> <p>835</p> <p>836</p> <p>837</p> <p>838</p> <p>839</p> <p>840</p> <p>841</p> <p>842</p> <p>843</p> <p>844</p> <p>845</p> <p>846</p> <p>847</p> <p>848</p> <p>849</p> <p>850</p> <p>851</p> <p>852</p> <p>853</p> <p>854</p> <p>855</p> <p>856</p> <p>857</p> <p>858</p> <p>859</p> <p>860</p> <p>861</p> <p>862</p> <p>863</p> <p>864</p> <p>865</p> <p>866</p> <p>867</p> <p>868</p> <p>869</p> <p>870</p> <p>871</p> <p>872</p> <p>873</p> <p>874</p> <p>875</p> <p>876</p> <p>877</p> <p>878</p> <p>879</p> <p>880</p> <p>881</p> <p>882</p> <p>883</p> <p>884</p> <p>885</p> <p>886</p> <p>887</p> <p>888</p> <p>889</p> <p>890</p> <p>891</p> <p>892</p> <p>893</p> <p>894</p> <p>895</p> <p>896</p> <p>897</p> <p>898</p> <p>899</p> <p>900</p> <p>901</p> <p>902</p> </td><td> <p><code>from</code> <code>__future__ </code><code>import</code> <code>division</code></p> <p></p> <p><code>import</code> <code>sys</code></p> <p><code>import</code> <code>math</code></p> <p><code>import</code> <code>random</code></p> <p><code>import</code> <code>time</code></p> <p></p> <p><code>from</code> <code>collections </code><code>import</code> <code>deque</code></p> <p><code>from</code> <code>pyglet </code><code>import</code> <code>image</code></p> <p><code>from</code> <code>pyglet.gl </code><code>import</code> <code>*</code></p> <p><code>from</code> <code>pyglet.graphics </code><code>import</code> <code>TextureGroup</code></p> <p><code>from</code> <code>pyglet.window </code><code>import</code> <code>key, mouse</code></p> <p></p> <p><code>TICKS_PER_SEC </code><code>=</code> <code>60</code></p> <p></p> <p><code># Size of sectors used to ease block loading.</code></p> <p><code>SECTOR_SIZE </code><code>=</code> <code>16</code></p> <p></p> <p><code>WALKING_SPEED </code><code>=</code> <code>5</code></p> <p><code>FLYING_SPEED </code><code>=</code> <code>15</code></p> <p></p> <p><code>GRAVITY </code><code>=</code> <code>20.0</code></p> <p><code>MAX_JUMP_HEIGHT </code><code>=</code> <code>1.0</code> <code># About the height of a block.</code></p> <p><code># To derive the formula for calculating jump speed, first solve</code></p> <p><code>#  v_t = v_0 + a * t</code></p> <p><code># for the time at which you achieve maximum height, where a is the acceleration</code></p> <p><code># due to gravity and v_t = 0. This gives:</code></p> <p><code>#  t = - v_0 / a</code></p> <p><code># Use t and the desired MAX_JUMP_HEIGHT to solve for v_0 (jump speed) in</code></p> <p><code>#  s = s_0 + v_0 * t + (a * t^2) / 2</code></p> <p><code>JUMP_SPEED </code><code>=</code> <code>math.sqrt(</code><code>2</code> <code>*</code> <code>GRAVITY </code><code>*</code> <code>MAX_JUMP_HEIGHT)</code></p> <p><code>TERMINAL_VELOCITY </code><code>=</code> <code>50</code></p> <p></p> <p><code>PLAYER_HEIGHT </code><code>=</code> <code>2</code></p> <p></p> <p><code>if</code> <code>sys.version_info[</code><code>0</code><code>] &gt;</code><code>=</code> <code>3</code><code>:</code></p> <p><code>  </code><code>xrange</code> <code>=</code> <code>range</code></p> <p></p> <p><code>def</code> <code>cube_vertices(x, y, z, n):</code></p> <p><code>  </code><code>""" Return the vertices of the cube at position x, y, z with size 2*n.</code></p> <p></p> <p><code>  </code><code>"""</code></p> <p><code>  </code><code>return</code> <code>[</code></p> <p><code>    </code><code>x</code><code>-</code><code>n,y</code><code>+</code><code>n,z</code><code>-</code><code>n, x</code><code>-</code><code>n,y</code><code>+</code><code>n,z</code><code>+</code><code>n, x</code><code>+</code><code>n,y</code><code>+</code><code>n,z</code><code>+</code><code>n, x</code><code>+</code><code>n,y</code><code>+</code><code>n,z</code><code>-</code><code>n, </code><code># top</code></p> <p><code>    </code><code>x</code><code>-</code><code>n,y</code><code>-</code><code>n,z</code><code>-</code><code>n, x</code><code>+</code><code>n,y</code><code>-</code><code>n,z</code><code>-</code><code>n, x</code><code>+</code><code>n,y</code><code>-</code><code>n,z</code><code>+</code><code>n, x</code><code>-</code><code>n,y</code><code>-</code><code>n,z</code><code>+</code><code>n, </code><code># bottom</code></p> <p><code>    </code><code>x</code><code>-</code><code>n,y</code><code>-</code><code>n,z</code><code>-</code><code>n, x</code><code>-</code><code>n,y</code><code>-</code><code>n,z</code><code>+</code><code>n, x</code><code>-</code><code>n,y</code><code>+</code><code>n,z</code><code>+</code><code>n, x</code><code>-</code><code>n,y</code><code>+</code><code>n,z</code><code>-</code><code>n, </code><code># left</code></p> <p><code>    </code><code>x</code><code>+</code><code>n,y</code><code>-</code><code>n,z</code><code>+</code><code>n, x</code><code>+</code><code>n,y</code><code>-</code><code>n,z</code><code>-</code><code>n, x</code><code>+</code><code>n,y</code><code>+</code><code>n,z</code><code>-</code><code>n, x</code><code>+</code><code>n,y</code><code>+</code><code>n,z</code><code>+</code><code>n, </code><code># right</code></p> <p><code>    </code><code>x</code><code>-</code><code>n,y</code><code>-</code><code>n,z</code><code>+</code><code>n, x</code><code>+</code><code>n,y</code><code>-</code><code>n,z</code><code>+</code><code>n, x</code><code>+</code><code>n,y</code><code>+</code><code>n,z</code><code>+</code><code>n, x</code><code>-</code><code>n,y</code><code>+</code><code>n,z</code><code>+</code><code>n, </code><code># front</code></p> <p><code>    </code><code>x</code><code>+</code><code>n,y</code><code>-</code><code>n,z</code><code>-</code><code>n, x</code><code>-</code><code>n,y</code><code>-</code><code>n,z</code><code>-</code><code>n, x</code><code>-</code><code>n,y</code><code>+</code><code>n,z</code><code>-</code><code>n, x</code><code>+</code><code>n,y</code><code>+</code><code>n,z</code><code>-</code><code>n, </code><code># back</code></p> <p><code>  </code><code>]</code></p> <p></p> <p></p> <p><code>def</code> <code>tex_coord(x, y, n</code><code>=</code><code>4</code><code>):</code></p> <p><code>  </code><code>""" Return the bounding vertices of the texture square.</code></p> <p></p> <p><code>  </code><code>"""</code></p> <p><code>  </code><code>m </code><code>=</code> <code>1.0</code> <code>/</code> <code>n</code></p> <p><code>  </code><code>dx </code><code>=</code> <code>x </code><code>*</code> <code>m</code></p> <p><code>  </code><code>dy </code><code>=</code> <code>y </code><code>*</code> <code>m</code></p> <p><code>  </code><code>return</code> <code>dx, dy, dx </code><code>+</code> <code>m, dy, dx </code><code>+</code> <code>m, dy </code><code>+</code> <code>m, dx, dy </code><code>+</code> <code>m</code></p> <p></p> <p></p> <p><code>def</code> <code>tex_coords(top, bottom, side):</code></p> <p><code>  </code><code>""" Return a list of the texture squares for the top, bottom and side.</code></p> <p></p> <p><code>  </code><code>"""</code></p> <p><code>  </code><code>top </code><code>=</code> <code>tex_coord(</code><code>*</code><code>top)</code></p> <p><code>  </code><code>bottom </code><code>=</code> <code>tex_coord(</code><code>*</code><code>bottom)</code></p> <p><code>  </code><code>side </code><code>=</code> <code>tex_coord(</code><code>*</code><code>side)</code></p> <p><code>  </code><code>result </code><code>=</code> <code>[]</code></p> <p><code>  </code><code>result.extend(top)</code></p> <p><code>  </code><code>result.extend(bottom)</code></p> <p><code>  </code><code>result.extend(side </code><code>*</code> <code>4</code><code>)</code></p> <p><code>  </code><code>return</code> <code>result</code></p> <p></p> <p></p> <p><code>TEXTURE_PATH </code><code>=</code> <code>'texture.png'</code></p> <p></p> <p><code>GRASS </code><code>=</code> <code>tex_coords((</code><code>1</code><code>, </code><code>0</code><code>), (</code><code>0</code><code>, </code><code>1</code><code>), (</code><code>0</code><code>, </code><code>0</code><code>))</code></p> <p><code>SAND </code><code>=</code> <code>tex_coords((</code><code>1</code><code>, </code><code>1</code><code>), (</code><code>1</code><code>, </code><code>1</code><code>), (</code><code>1</code><code>, </code><code>1</code><code>))</code></p> <p><code>BRICK </code><code>=</code> <code>tex_coords((</code><code>2</code><code>, </code><code>0</code><code>), (</code><code>2</code><code>, </code><code>0</code><code>), (</code><code>2</code><code>, </code><code>0</code><code>))</code></p> <p><code>STONE </code><code>=</code> <code>tex_coords((</code><code>2</code><code>, </code><code>1</code><code>), (</code><code>2</code><code>, </code><code>1</code><code>), (</code><code>2</code><code>, </code><code>1</code><code>))</code></p> <p></p> <p><code>FACES </code><code>=</code> <code>[</code></p> <p><code>  </code><code>( </code><code>0</code><code>, </code><code>1</code><code>, </code><code>0</code><code>),</code></p> <p><code>  </code><code>( </code><code>0</code><code>,</code><code>-</code><code>1</code><code>, </code><code>0</code><code>),</code></p> <p><code>  </code><code>(</code><code>-</code><code>1</code><code>, </code><code>0</code><code>, </code><code>0</code><code>),</code></p> <p><code>  </code><code>( </code><code>1</code><code>, </code><code>0</code><code>, </code><code>0</code><code>),</code></p> <p><code>  </code><code>( </code><code>0</code><code>, </code><code>0</code><code>, </code><code>1</code><code>),</code></p> <p><code>  </code><code>( </code><code>0</code><code>, </code><code>0</code><code>,</code><code>-</code><code>1</code><code>),</code></p> <p><code>]</code></p> <p></p> <p></p> <p><code>def</code> <code>normalize(position):</code></p> <p><code>  </code><code>""" Accepts `position` of arbitrary precision and returns the block</code></p> <p><code>  </code><code>containing that position.</code></p> <p></p> <p><code>  </code><code>Parameters</code></p> <p><code>  </code><code>----------</code></p> <p><code>  </code><code>position : tuple of len 3</code></p> <p></p> <p><code>  </code><code>Returns</code></p> <p><code>  </code><code>-------</code></p> <p><code>  </code><code>block_position : tuple of ints of len 3</code></p> <p></p> <p><code>  </code><code>"""</code></p> <p><code>  </code><code>x, y, z </code><code>=</code> <code>position</code></p> <p><code>  </code><code>x, y, z </code><code>=</code> <code>(</code><code>int</code><code>(</code><code>round</code><code>(x)), </code><code>int</code><code>(</code><code>round</code><code>(y)), </code><code>int</code><code>(</code><code>round</code><code>(z)))</code></p> <p><code>  </code><code>return</code> <code>(x, y, z)</code></p> <p></p> <p></p> <p><code>def</code> <code>sectorize(position):</code></p> <p><code>  </code><code>""" Returns a tuple representing the sector for the given `position`.</code></p> <p></p> <p><code>  </code><code>Parameters</code></p> <p><code>  </code><code>----------</code></p> <p><code>  </code><code>position : tuple of len 3</code></p> <p></p> <p><code>  </code><code>Returns</code></p> <p><code>  </code><code>-------</code></p> <p><code>  </code><code>sector : tuple of len 3</code></p> <p></p> <p><code>  </code><code>"""</code></p> <p><code>  </code><code>x, y, z </code><code>=</code> <code>normalize(position)</code></p> <p><code>  </code><code>x, y, z </code><code>=</code> <code>x </code><code>/</code><code>/</code> <code>SECTOR_SIZE, y </code><code>/</code><code>/</code> <code>SECTOR_SIZE, z </code><code>/</code><code>/</code> <code>SECTOR_SIZE</code></p> <p><code>  </code><code>return</code> <code>(x, </code><code>0</code><code>, z)</code></p> <p></p> <p></p> <p><code>class</code> <code>Model(</code><code>object</code><code>):</code></p> <p></p> <p><code>  </code><code>def</code> <code>__init__(</code><code>self</code><code>):</code></p> <p></p> <p><code>    </code><code># A Batch is a collection of vertex lists for batched rendering.</code></p> <p><code>    </code><code>self</code><code>.batch </code><code>=</code> <code>pyglet.graphics.Batch()</code></p> <p></p> <p><code>    </code><code># A TextureGroup manages an OpenGL texture.</code></p> <p><code>    </code><code>self</code><code>.group </code><code>=</code> <code>TextureGroup(image.load(TEXTURE_PATH).get_texture())</code></p> <p></p> <p><code>    </code><code># A mapping from position to the texture of the block at that position.</code></p> <p><code>    </code><code># This defines all the blocks that are currently in the world.</code></p> <p><code>    </code><code>self</code><code>.world </code><code>=</code> <code>{}</code></p> <p></p> <p><code>    </code><code># Same mapping as `world` but only contains blocks that are shown.</code></p> <p><code>    </code><code>self</code><code>.shown </code><code>=</code> <code>{}</code></p> <p></p> <p><code>    </code><code># Mapping from position to a pyglet `VertextList` for all shown blocks.</code></p> <p><code>    </code><code>self</code><code>._shown </code><code>=</code> <code>{}</code></p> <p></p> <p><code>    </code><code># Mapping from sector to a list of positions inside that sector.</code></p> <p><code>    </code><code>self</code><code>.sectors </code><code>=</code> <code>{}</code></p> <p></p> <p><code>    </code><code># Simple function queue implementation. The queue is populated with</code></p> <p><code>    </code><code># _show_block() and _hide_block() calls</code></p> <p><code>    </code><code>self</code><code>.queue </code><code>=</code> <code>deque()</code></p> <p></p> <p><code>    </code><code>self</code><code>._initialize()</code></p> <p></p> <p><code>  </code><code>def</code> <code>_initialize(</code><code>self</code><code>):</code></p> <p><code>    </code><code>""" Initialize the world by placing all the blocks.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>n </code><code>=</code> <code>80</code> <code># 1/2 width and height of world</code></p> <p><code>    </code><code>s </code><code>=</code> <code>1</code> <code># step size</code></p> <p><code>    </code><code>y </code><code>=</code> <code>0</code> <code># initial y height</code></p> <p><code>    </code><code>for</code> <code>x </code><code>in</code> <code>xrange</code><code>(</code><code>-</code><code>n, n </code><code>+</code> <code>1</code><code>, s):</code></p> <p><code>      </code><code>for</code> <code>z </code><code>in</code> <code>xrange</code><code>(</code><code>-</code><code>n, n </code><code>+</code> <code>1</code><code>, s):</code></p> <p><code>        </code><code># create a layer stone an grass everywhere.</code></p> <p><code>        </code><code>self</code><code>.add_block((x, y </code><code>-</code> <code>2</code><code>, z), GRASS, immediate</code><code>=</code><code>False</code><code>)</code></p> <p><code>        </code><code>self</code><code>.add_block((x, y </code><code>-</code> <code>3</code><code>, z), STONE, immediate</code><code>=</code><code>False</code><code>)</code></p> <p><code>        </code><code>if</code> <code>x </code><code>in</code> <code>(</code><code>-</code><code>n, n) </code><code>or</code> <code>z </code><code>in</code> <code>(</code><code>-</code><code>n, n):</code></p> <p><code>          </code><code># create outer walls.</code></p> <p><code>          </code><code>for</code> <code>dy </code><code>in</code> <code>xrange</code><code>(</code><code>-</code><code>2</code><code>, </code><code>3</code><code>):</code></p> <p><code>            </code><code>self</code><code>.add_block((x, y </code><code>+</code> <code>dy, z), STONE, immediate</code><code>=</code><code>False</code><code>)</code></p> <p></p> <p><code>    </code><code># generate the hills randomly</code></p> <p><code>    </code><code>o </code><code>=</code> <code>n </code><code>-</code> <code>10</code></p> <p><code>    </code><code>for</code> <code>_ </code><code>in</code> <code>xrange</code><code>(</code><code>120</code><code>):</code></p> <p><code>      </code><code>a </code><code>=</code> <code>random.randint(</code><code>-</code><code>o, o) </code><code># x position of the hill</code></p> <p><code>      </code><code>b </code><code>=</code> <code>random.randint(</code><code>-</code><code>o, o) </code><code># z position of the hill</code></p> <p><code>      </code><code>c </code><code>=</code> <code>-</code><code>1</code> <code># base of the hill</code></p> <p><code>      </code><code>h </code><code>=</code> <code>random.randint(</code><code>1</code><code>, </code><code>6</code><code>) </code><code># height of the hill</code></p> <p><code>      </code><code>s </code><code>=</code> <code>random.randint(</code><code>4</code><code>, </code><code>8</code><code>) </code><code># 2 * s is the side length of the hill</code></p> <p><code>      </code><code>d </code><code>=</code> <code>1</code> <code># how quickly to taper off the hills</code></p> <p><code>      </code><code>t </code><code>=</code> <code>random.choice([GRASS, SAND, BRICK])</code></p> <p><code>      </code><code>for</code> <code>y </code><code>in</code> <code>xrange</code><code>(c, c </code><code>+</code> <code>h):</code></p> <p><code>        </code><code>for</code> <code>x </code><code>in</code> <code>xrange</code><code>(a </code><code>-</code> <code>s, a </code><code>+</code> <code>s </code><code>+</code> <code>1</code><code>):</code></p> <p><code>          </code><code>for</code> <code>z </code><code>in</code> <code>xrange</code><code>(b </code><code>-</code> <code>s, b </code><code>+</code> <code>s </code><code>+</code> <code>1</code><code>):</code></p> <p><code>            </code><code>if</code> <code>(x </code><code>-</code> <code>a) </code><code>*</code><code>*</code> <code>2</code> <code>+</code> <code>(z </code><code>-</code> <code>b) </code><code>*</code><code>*</code> <code>2</code> <code>&gt; (s </code><code>+</code> <code>1</code><code>) </code><code>*</code><code>*</code> <code>2</code><code>:</code></p> <p><code>              </code><code>continue</code></p> <p><code>            </code><code>if</code> <code>(x </code><code>-</code> <code>0</code><code>) </code><code>*</code><code>*</code> <code>2</code> <code>+</code> <code>(z </code><code>-</code> <code>0</code><code>) </code><code>*</code><code>*</code> <code>2</code> <code>&lt; </code><code>5</code> <code>*</code><code>*</code> <code>2</code><code>:</code></p> <p><code>              </code><code>continue</code></p> <p><code>            </code><code>self</code><code>.add_block((x, y, z), t, immediate</code><code>=</code><code>False</code><code>)</code></p> <p><code>        </code><code>s </code><code>-</code><code>=</code> <code>d </code><code># decrement side lenth so hills taper off</code></p> <p></p> <p><code>  </code><code>def</code> <code>hit_test(</code><code>self</code><code>, position, vector, max_distance</code><code>=</code><code>8</code><code>):</code></p> <p><code>    </code><code>""" Line of sight search from current position. If a block is</code></p> <p><code>    </code><code>intersected it is returned, along with the block previously in the line</code></p> <p><code>    </code><code>of sight. If no block is found, return None, None.</code></p> <p></p> <p><code>    </code><code>Parameters</code></p> <p><code>    </code><code>----------</code></p> <p><code>    </code><code>position : tuple of len 3</code></p> <p><code>      </code><code>The (x, y, z) position to check visibility from.</code></p> <p><code>    </code><code>vector : tuple of len 3</code></p> <p><code>      </code><code>The line of sight vector.</code></p> <p><code>    </code><code>max_distance : int</code></p> <p><code>      </code><code>How many blocks away to search for a hit.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>m </code><code>=</code> <code>8</code></p> <p><code>    </code><code>x, y, z </code><code>=</code> <code>position</code></p> <p><code>    </code><code>dx, dy, dz </code><code>=</code> <code>vector</code></p> <p><code>    </code><code>previous </code><code>=</code> <code>None</code></p> <p><code>    </code><code>for</code> <code>_ </code><code>in</code> <code>xrange</code><code>(max_distance </code><code>*</code> <code>m):</code></p> <p><code>      </code><code>key </code><code>=</code> <code>normalize((x, y, z))</code></p> <p><code>      </code><code>if</code> <code>key !</code><code>=</code> <code>previous </code><code>and</code> <code>key </code><code>in</code> <code>self</code><code>.world:</code></p> <p><code>        </code><code>return</code> <code>key, previous</code></p> <p><code>      </code><code>previous </code><code>=</code> <code>key</code></p> <p><code>      </code><code>x, y, z </code><code>=</code> <code>x </code><code>+</code> <code>dx </code><code>/</code> <code>m, y </code><code>+</code> <code>dy </code><code>/</code> <code>m, z </code><code>+</code> <code>dz </code><code>/</code> <code>m</code></p> <p><code>    </code><code>return</code> <code>None</code><code>, </code><code>None</code></p> <p></p> <p><code>  </code><code>def</code> <code>exposed(</code><code>self</code><code>, position):</code></p> <p><code>    </code><code>""" Returns False is given `position` is surrounded on all 6 sides by</code></p> <p><code>    </code><code>blocks, True otherwise.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>x, y, z </code><code>=</code> <code>position</code></p> <p><code>    </code><code>for</code> <code>dx, dy, dz </code><code>in</code> <code>FACES:</code></p> <p><code>      </code><code>if</code> <code>(x </code><code>+</code> <code>dx, y </code><code>+</code> <code>dy, z </code><code>+</code> <code>dz) </code><code>not</code> <code>in</code> <code>self</code><code>.world:</code></p> <p><code>        </code><code>return</code> <code>True</code></p> <p><code>    </code><code>return</code> <code>False</code></p> <p></p> <p><code>  </code><code>def</code> <code>add_block(</code><code>self</code><code>, position, texture, immediate</code><code>=</code><code>True</code><code>):</code></p> <p><code>    </code><code>""" Add a block with the given `texture` and `position` to the world.</code></p> <p></p> <p><code>    </code><code>Parameters</code></p> <p><code>    </code><code>----------</code></p> <p><code>    </code><code>position : tuple of len 3</code></p> <p><code>      </code><code>The (x, y, z) position of the block to add.</code></p> <p><code>    </code><code>texture : list of len 3</code></p> <p><code>      </code><code>The coordinates of the texture squares. Use `tex_coords()` to</code></p> <p><code>      </code><code>generate.</code></p> <p><code>    </code><code>immediate : bool</code></p> <p><code>      </code><code>Whether or not to draw the block immediately.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>if</code> <code>position </code><code>in</code> <code>self</code><code>.world:</code></p> <p><code>      </code><code>self</code><code>.remove_block(position, immediate)</code></p> <p><code>    </code><code>self</code><code>.world[position] </code><code>=</code> <code>texture</code></p> <p><code>    </code><code>self</code><code>.sectors.setdefault(sectorize(position), []).append(position)</code></p> <p><code>    </code><code>if</code> <code>immediate:</code></p> <p><code>      </code><code>if</code> <code>self</code><code>.exposed(position):</code></p> <p><code>        </code><code>self</code><code>.show_block(position)</code></p> <p><code>      </code><code>self</code><code>.check_neighbors(position)</code></p> <p></p> <p><code>  </code><code>def</code> <code>remove_block(</code><code>self</code><code>, position, immediate</code><code>=</code><code>True</code><code>):</code></p> <p><code>    </code><code>""" Remove the block at the given `position`.</code></p> <p></p> <p><code>    </code><code>Parameters</code></p> <p><code>    </code><code>----------</code></p> <p><code>    </code><code>position : tuple of len 3</code></p> <p><code>      </code><code>The (x, y, z) position of the block to remove.</code></p> <p><code>    </code><code>immediate : bool</code></p> <p><code>      </code><code>Whether or not to immediately remove block from canvas.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>del</code> <code>self</code><code>.world[position]</code></p> <p><code>    </code><code>self</code><code>.sectors[sectorize(position)].remove(position)</code></p> <p><code>    </code><code>if</code> <code>immediate:</code></p> <p><code>      </code><code>if</code> <code>position </code><code>in</code> <code>self</code><code>.shown:</code></p> <p><code>        </code><code>self</code><code>.hide_block(position)</code></p> <p><code>      </code><code>self</code><code>.check_neighbors(position)</code></p> <p></p> <p><code>  </code><code>def</code> <code>check_neighbors(</code><code>self</code><code>, position):</code></p> <p><code>    </code><code>""" Check all blocks surrounding `position` and ensure their visual</code></p> <p><code>    </code><code>state is current. This means hiding blocks that are not exposed and</code></p> <p><code>    </code><code>ensuring that all exposed blocks are shown. Usually used after a block</code></p> <p><code>    </code><code>is added or removed.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>x, y, z </code><code>=</code> <code>position</code></p> <p><code>    </code><code>for</code> <code>dx, dy, dz </code><code>in</code> <code>FACES:</code></p> <p><code>      </code><code>key </code><code>=</code> <code>(x </code><code>+</code> <code>dx, y </code><code>+</code> <code>dy, z </code><code>+</code> <code>dz)</code></p> <p><code>      </code><code>if</code> <code>key </code><code>not</code> <code>in</code> <code>self</code><code>.world:</code></p> <p><code>        </code><code>continue</code></p> <p><code>      </code><code>if</code> <code>self</code><code>.exposed(key):</code></p> <p><code>        </code><code>if</code> <code>key </code><code>not</code> <code>in</code> <code>self</code><code>.shown:</code></p> <p><code>          </code><code>self</code><code>.show_block(key)</code></p> <p><code>      </code><code>else</code><code>:</code></p> <p><code>        </code><code>if</code> <code>key </code><code>in</code> <code>self</code><code>.shown:</code></p> <p><code>          </code><code>self</code><code>.hide_block(key)</code></p> <p></p> <p><code>  </code><code>def</code> <code>show_block(</code><code>self</code><code>, position, immediate</code><code>=</code><code>True</code><code>):</code></p> <p><code>    </code><code>""" Show the block at the given `position`. This method assumes the</code></p> <p><code>    </code><code>block has already been added with add_block()</code></p> <p></p> <p><code>    </code><code>Parameters</code></p> <p><code>    </code><code>----------</code></p> <p><code>    </code><code>position : tuple of len 3</code></p> <p><code>      </code><code>The (x, y, z) position of the block to show.</code></p> <p><code>    </code><code>immediate : bool</code></p> <p><code>      </code><code>Whether or not to show the block immediately.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>texture </code><code>=</code> <code>self</code><code>.world[position]</code></p> <p><code>    </code><code>self</code><code>.shown[position] </code><code>=</code> <code>texture</code></p> <p><code>    </code><code>if</code> <code>immediate:</code></p> <p><code>      </code><code>self</code><code>._show_block(position, texture)</code></p> <p><code>    </code><code>else</code><code>:</code></p> <p><code>      </code><code>self</code><code>._enqueue(</code><code>self</code><code>._show_block, position, texture)</code></p> <p></p> <p><code>  </code><code>def</code> <code>_show_block(</code><code>self</code><code>, position, texture):</code></p> <p><code>    </code><code>""" Private implementation of the `show_block()` method.</code></p> <p></p> <p><code>    </code><code>Parameters</code></p> <p><code>    </code><code>----------</code></p> <p><code>    </code><code>position : tuple of len 3</code></p> <p><code>      </code><code>The (x, y, z) position of the block to show.</code></p> <p><code>    </code><code>texture : list of len 3</code></p> <p><code>      </code><code>The coordinates of the texture squares. Use `tex_coords()` to</code></p> <p><code>      </code><code>generate.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>x, y, z </code><code>=</code> <code>position</code></p> <p><code>    </code><code>vertex_data </code><code>=</code> <code>cube_vertices(x, y, z, </code><code>0.5</code><code>)</code></p> <p><code>    </code><code>texture_data </code><code>=</code> <code>list</code><code>(texture)</code></p> <p><code>    </code><code># create vertex list</code></p> <p><code>    </code><code># FIXME Maybe `add_indexed()` should be used instead</code></p> <p><code>    </code><code>self</code><code>._shown[position] </code><code>=</code> <code>self</code><code>.batch.add(</code><code>24</code><code>, GL_QUADS, </code><code>self</code><code>.group,</code></p> <p><code>      </code><code>(</code><code>'v3f/static'</code><code>, vertex_data),</code></p> <p><code>      </code><code>(</code><code>'t2f/static'</code><code>, texture_data))</code></p> <p></p> <p><code>  </code><code>def</code> <code>hide_block(</code><code>self</code><code>, position, immediate</code><code>=</code><code>True</code><code>):</code></p> <p><code>    </code><code>""" Hide the block at the given `position`. Hiding does not remove the</code></p> <p><code>    </code><code>block from the world.</code></p> <p></p> <p><code>    </code><code>Parameters</code></p> <p><code>    </code><code>----------</code></p> <p><code>    </code><code>position : tuple of len 3</code></p> <p><code>      </code><code>The (x, y, z) position of the block to hide.</code></p> <p><code>    </code><code>immediate : bool</code></p> <p><code>      </code><code>Whether or not to immediately remove the block from the canvas.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>self</code><code>.shown.pop(position)</code></p> <p><code>    </code><code>if</code> <code>immediate:</code></p> <p><code>      </code><code>self</code><code>._hide_block(position)</code></p> <p><code>    </code><code>else</code><code>:</code></p> <p><code>      </code><code>self</code><code>._enqueue(</code><code>self</code><code>._hide_block, position)</code></p> <p></p> <p><code>  </code><code>def</code> <code>_hide_block(</code><code>self</code><code>, position):</code></p> <p><code>    </code><code>""" Private implementation of the 'hide_block()` method.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>self</code><code>._shown.pop(position).delete()</code></p> <p></p> <p><code>  </code><code>def</code> <code>show_sector(</code><code>self</code><code>, sector):</code></p> <p><code>    </code><code>""" Ensure all blocks in the given sector that should be shown are</code></p> <p><code>    </code><code>drawn to the canvas.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>for</code> <code>position </code><code>in</code> <code>self</code><code>.sectors.get(sector, []):</code></p> <p><code>      </code><code>if</code> <code>position </code><code>not</code> <code>in</code> <code>self</code><code>.shown </code><code>and</code> <code>self</code><code>.exposed(position):</code></p> <p><code>        </code><code>self</code><code>.show_block(position, </code><code>False</code><code>)</code></p> <p></p> <p><code>  </code><code>def</code> <code>hide_sector(</code><code>self</code><code>, sector):</code></p> <p><code>    </code><code>""" Ensure all blocks in the given sector that should be hidden are</code></p> <p><code>    </code><code>removed from the canvas.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>for</code> <code>position </code><code>in</code> <code>self</code><code>.sectors.get(sector, []):</code></p> <p><code>      </code><code>if</code> <code>position </code><code>in</code> <code>self</code><code>.shown:</code></p> <p><code>        </code><code>self</code><code>.hide_block(position, </code><code>False</code><code>)</code></p> <p></p> <p><code>  </code><code>def</code> <code>change_sectors(</code><code>self</code><code>, before, after):</code></p> <p><code>    </code><code>""" Move from sector `before` to sector `after`. A sector is a</code></p> <p><code>    </code><code>contiguous x, y sub-region of world. Sectors are used to speed up</code></p> <p><code>    </code><code>world rendering.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>before_set </code><code>=</code> <code>set</code><code>()</code></p> <p><code>    </code><code>after_set </code><code>=</code> <code>set</code><code>()</code></p> <p><code>    </code><code>pad </code><code>=</code> <code>4</code></p> <p><code>    </code><code>for</code> <code>dx </code><code>in</code> <code>xrange</code><code>(</code><code>-</code><code>pad, pad </code><code>+</code> <code>1</code><code>):</code></p> <p><code>      </code><code>for</code> <code>dy </code><code>in</code> <code>[</code><code>0</code><code>]: </code><code># xrange(-pad, pad + 1):</code></p> <p><code>        </code><code>for</code> <code>dz </code><code>in</code> <code>xrange</code><code>(</code><code>-</code><code>pad, pad </code><code>+</code> <code>1</code><code>):</code></p> <p><code>          </code><code>if</code> <code>dx </code><code>*</code><code>*</code> <code>2</code> <code>+</code> <code>dy </code><code>*</code><code>*</code> <code>2</code> <code>+</code> <code>dz </code><code>*</code><code>*</code> <code>2</code> <code>&gt; (pad </code><code>+</code> <code>1</code><code>) </code><code>*</code><code>*</code> <code>2</code><code>:</code></p> <p><code>            </code><code>continue</code></p> <p><code>          </code><code>if</code> <code>before:</code></p> <p><code>            </code><code>x, y, z </code><code>=</code> <code>before</code></p> <p><code>            </code><code>before_set.add((x </code><code>+</code> <code>dx, y </code><code>+</code> <code>dy, z </code><code>+</code> <code>dz))</code></p> <p><code>          </code><code>if</code> <code>after:</code></p> <p><code>            </code><code>x, y, z </code><code>=</code> <code>after</code></p> <p><code>            </code><code>after_set.add((x </code><code>+</code> <code>dx, y </code><code>+</code> <code>dy, z </code><code>+</code> <code>dz))</code></p> <p><code>    </code><code>show </code><code>=</code> <code>after_set </code><code>-</code> <code>before_set</code></p> <p><code>    </code><code>hide </code><code>=</code> <code>before_set </code><code>-</code> <code>after_set</code></p> <p><code>    </code><code>for</code> <code>sector </code><code>in</code> <code>show:</code></p> <p><code>      </code><code>self</code><code>.show_sector(sector)</code></p> <p><code>    </code><code>for</code> <code>sector </code><code>in</code> <code>hide:</code></p> <p><code>      </code><code>self</code><code>.hide_sector(sector)</code></p> <p></p> <p><code>  </code><code>def</code> <code>_enqueue(</code><code>self</code><code>, func, </code><code>*</code><code>args):</code></p> <p><code>    </code><code>""" Add `func` to the internal queue.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>self</code><code>.queue.append((func, args))</code></p> <p></p> <p><code>  </code><code>def</code> <code>_dequeue(</code><code>self</code><code>):</code></p> <p><code>    </code><code>""" Pop the top function from the internal queue and call it.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>func, args </code><code>=</code> <code>self</code><code>.queue.popleft()</code></p> <p><code>    </code><code>func(</code><code>*</code><code>args)</code></p> <p></p> <p><code>  </code><code>def</code> <code>process_queue(</code><code>self</code><code>):</code></p> <p><code>    </code><code>""" Process the entire queue while taking periodic breaks. This allows</code></p> <p><code>    </code><code>the game loop to run smoothly. The queue contains calls to</code></p> <p><code>    </code><code>_show_block() and _hide_block() so this method should be called if</code></p> <p><code>    </code><code>add_block() or remove_block() was called with immediate=False</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>start </code><code>=</code> <code>time.perf_counter()</code></p> <p><code>    </code><code>while</code> <code>self</code><code>.queue </code><code>and</code> <code>time.time()</code><code>-</code> <code>start &lt; </code><code>1.0</code> <code>/</code> <code>TICKS_PER_SEC:</code></p> <p><code>      </code><code>self</code><code>._dequeue()</code></p> <p></p> <p><code>  </code><code>def</code> <code>process_entire_queue(</code><code>self</code><code>):</code></p> <p><code>    </code><code>""" Process the entire queue with no breaks.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>while</code> <code>self</code><code>.queue:</code></p> <p><code>      </code><code>self</code><code>._dequeue()</code></p> <p></p> <p></p> <p><code>class</code> <code>Window(pyglet.window.Window):</code></p> <p></p> <p><code>  </code><code>def</code> <code>__init__(</code><code>self</code><code>, </code><code>*</code><code>args, </code><code>*</code><code>*</code><code>kwargs):</code></p> <p><code>    </code><code>super</code><code>(Window, </code><code>self</code><code>).__init__(</code><code>*</code><code>args, </code><code>*</code><code>*</code><code>kwargs)</code></p> <p></p> <p><code>    </code><code># Whether or not the window exclusively captures the mouse.</code></p> <p><code>    </code><code>self</code><code>.exclusive </code><code>=</code> <code>False</code></p> <p></p> <p><code>    </code><code># When flying gravity has no effect and speed is increased.</code></p> <p><code>    </code><code>self</code><code>.flying </code><code>=</code> <code>False</code></p> <p></p> <p><code>    </code><code># Strafing is moving lateral to the direction you are facing,</code></p> <p><code>    </code><code># e.g. moving to the left or right while continuing to face forward.</code></p> <p><code>    </code><code>#</code></p> <p><code>    </code><code># First element is -1 when moving forward, 1 when moving back, and 0</code></p> <p><code>    </code><code># otherwise. The second element is -1 when moving left, 1 when moving</code></p> <p><code>    </code><code># right, and 0 otherwise.</code></p> <p><code>    </code><code>self</code><code>.strafe </code><code>=</code> <code>[</code><code>0</code><code>, </code><code>0</code><code>]</code></p> <p></p> <p><code>    </code><code># Current (x, y, z) position in the world, specified with floats. Note</code></p> <p><code>    </code><code># that, perhaps unlike in math class, the y-axis is the vertical axis.</code></p> <p><code>    </code><code>self</code><code>.position </code><code>=</code> <code>(</code><code>0</code><code>, </code><code>0</code><code>, </code><code>0</code><code>)</code></p> <p></p> <p><code>    </code><code># First element is rotation of the player in the x-z plane (ground</code></p> <p><code>    </code><code># plane) measured from the z-axis down. The second is the rotation</code></p> <p><code>    </code><code># angle from the ground plane up. Rotation is in degrees.</code></p> <p><code>    </code><code>#</code></p> <p><code>    </code><code># The vertical plane rotation ranges from -90 (looking straight down) to</code></p> <p><code>    </code><code># 90 (looking straight up). The horizontal rotation range is unbounded.</code></p> <p><code>    </code><code>self</code><code>.rotation </code><code>=</code> <code>(</code><code>0</code><code>, </code><code>0</code><code>)</code></p> <p></p> <p><code>    </code><code># Which sector the player is currently in.</code></p> <p><code>    </code><code>self</code><code>.sector </code><code>=</code> <code>None</code></p> <p></p> <p><code>    </code><code># The crosshairs at the center of the screen.</code></p> <p><code>    </code><code>self</code><code>.reticle </code><code>=</code> <code>None</code></p> <p></p> <p><code>    </code><code># Velocity in the y (upward) direction.</code></p> <p><code>    </code><code>self</code><code>.dy </code><code>=</code> <code>0</code></p> <p></p> <p><code>    </code><code># A list of blocks the player can place. Hit num keys to cycle.</code></p> <p><code>    </code><code>self</code><code>.inventory </code><code>=</code> <code>[BRICK, GRASS, SAND]</code></p> <p></p> <p><code>    </code><code># The current block the user can place. Hit num keys to cycle.</code></p> <p><code>    </code><code>self</code><code>.block </code><code>=</code> <code>self</code><code>.inventory[</code><code>0</code><code>]</code></p> <p></p> <p><code>    </code><code># Convenience list of num keys.</code></p> <p><code>    </code><code>self</code><code>.num_keys </code><code>=</code> <code>[</code></p> <p><code>      </code><code>key._1, key._2, key._3, key._4, key._5,</code></p> <p><code>      </code><code>key._6, key._7, key._8, key._9, key._0]</code></p> <p></p> <p><code>    </code><code># Instance of the model that handles the world.</code></p> <p><code>    </code><code>self</code><code>.model </code><code>=</code> <code>Model()</code></p> <p></p> <p><code>    </code><code># The label that is displayed in the top left of the canvas.</code></p> <p><code>    </code><code>self</code><code>.label </code><code>=</code> <code>pyglet.text.Label('</code><code>', font_name='</code><code>Arial', font_size</code><code>=</code><code>18</code><code>,</code></p> <p><code>      </code><code>x</code><code>=</code><code>10</code><code>, y</code><code>=</code><code>self</code><code>.height </code><code>-</code> <code>10</code><code>, anchor_x</code><code>=</code><code>'left'</code><code>, anchor_y</code><code>=</code><code>'top'</code><code>,</code></p> <p><code>      </code><code>color</code><code>=</code><code>(</code><code>0</code><code>, </code><code>0</code><code>, </code><code>0</code><code>, </code><code>255</code><code>))</code></p> <p></p> <p><code>    </code><code># This call schedules the `update()` method to be called</code></p> <p><code>    </code><code># TICKS_PER_SEC. This is the main game event loop.</code></p> <p><code>    </code><code>pyglet.clock.schedule_interval(</code><code>self</code><code>.update, </code><code>1.0</code> <code>/</code> <code>TICKS_PER_SEC)</code></p> <p></p> <p><code>  </code><code>def</code> <code>set_exclusive_mouse(</code><code>self</code><code>, exclusive):</code></p> <p><code>    </code><code>""" If `exclusive` is True, the game will capture the mouse, if False</code></p> <p><code>    </code><code>the game will ignore the mouse.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>super</code><code>(Window, </code><code>self</code><code>).set_exclusive_mouse(exclusive)</code></p> <p><code>    </code><code>self</code><code>.exclusive </code><code>=</code> <code>exclusive</code></p> <p></p> <p><code>  </code><code>def</code> <code>get_sight_vector(</code><code>self</code><code>):</code></p> <p><code>    </code><code>""" Returns the current line of sight vector indicating the direction</code></p> <p><code>    </code><code>the player is looking.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>x, y </code><code>=</code> <code>self</code><code>.rotation</code></p> <p><code>    </code><code># y ranges from -90 to 90, or -pi/2 to pi/2, so m ranges from 0 to 1 and</code></p> <p><code>    </code><code># is 1 when looking ahead parallel to the ground and 0 when looking</code></p> <p><code>    </code><code># straight up or down.</code></p> <p><code>    </code><code>m </code><code>=</code> <code>math.cos(math.radians(y))</code></p> <p><code>    </code><code># dy ranges from -1 to 1 and is -1 when looking straight down and 1 when</code></p> <p><code>    </code><code># looking straight up.</code></p> <p><code>    </code><code>dy </code><code>=</code> <code>math.sin(math.radians(y))</code></p> <p><code>    </code><code>dx </code><code>=</code> <code>math.cos(math.radians(x </code><code>-</code> <code>90</code><code>)) </code><code>*</code> <code>m</code></p> <p><code>    </code><code>dz </code><code>=</code> <code>math.sin(math.radians(x </code><code>-</code> <code>90</code><code>)) </code><code>*</code> <code>m</code></p> <p><code>    </code><code>return</code> <code>(dx, dy, dz)</code></p> <p></p> <p><code>  </code><code>def</code> <code>get_motion_vector(</code><code>self</code><code>):</code></p> <p><code>    </code><code>""" Returns the current motion vector indicating the velocity of the</code></p> <p><code>    </code><code>player.</code></p> <p></p> <p><code>    </code><code>Returns</code></p> <p><code>    </code><code>-------</code></p> <p><code>    </code><code>vector : tuple of len 3</code></p> <p><code>      </code><code>Tuple containing the velocity in x, y, and z respectively.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>if</code> <code>any</code><code>(</code><code>self</code><code>.strafe):</code></p> <p><code>      </code><code>x, y </code><code>=</code> <code>self</code><code>.rotation</code></p> <p><code>      </code><code>strafe </code><code>=</code> <code>math.degrees(math.atan2(</code><code>*</code><code>self</code><code>.strafe))</code></p> <p><code>      </code><code>y_angle </code><code>=</code> <code>math.radians(y)</code></p> <p><code>      </code><code>x_angle </code><code>=</code> <code>math.radians(x </code><code>+</code> <code>strafe)</code></p> <p><code>      </code><code>if</code> <code>self</code><code>.flying:</code></p> <p><code>        </code><code>m </code><code>=</code> <code>math.cos(y_angle)</code></p> <p><code>        </code><code>dy </code><code>=</code> <code>math.sin(y_angle)</code></p> <p><code>        </code><code>if</code> <code>self</code><code>.strafe[</code><code>1</code><code>]:</code></p> <p><code>          </code><code># Moving left or right.</code></p> <p><code>          </code><code>dy </code><code>=</code> <code>0.0</code></p> <p><code>          </code><code>m </code><code>=</code> <code>1</code></p> <p><code>        </code><code>if</code> <code>self</code><code>.strafe[</code><code>0</code><code>] &gt; </code><code>0</code><code>:</code></p> <p><code>          </code><code># Moving backwards.</code></p> <p><code>          </code><code>dy </code><code>*</code><code>=</code> <code>-</code><code>1</code></p> <p><code>        </code><code># When you are flying up or down, you have less left and right</code></p> <p><code>        </code><code># motion.</code></p> <p><code>        </code><code>dx </code><code>=</code> <code>math.cos(x_angle) </code><code>*</code> <code>m</code></p> <p><code>        </code><code>dz </code><code>=</code> <code>math.sin(x_angle) </code><code>*</code> <code>m</code></p> <p><code>      </code><code>else</code><code>:</code></p> <p><code>        </code><code>dy </code><code>=</code> <code>0.0</code></p> <p><code>        </code><code>dx </code><code>=</code> <code>math.cos(x_angle)</code></p> <p><code>        </code><code>dz </code><code>=</code> <code>math.sin(x_angle)</code></p> <p><code>    </code><code>else</code><code>:</code></p> <p><code>      </code><code>dy </code><code>=</code> <code>0.0</code></p> <p><code>      </code><code>dx </code><code>=</code> <code>0.0</code></p> <p><code>      </code><code>dz </code><code>=</code> <code>0.0</code></p> <p><code>    </code><code>return</code> <code>(dx, dy, dz)</code></p> <p></p> <p><code>  </code><code>def</code> <code>update(</code><code>self</code><code>, dt):</code></p> <p><code>    </code><code>""" This method is scheduled to be called repeatedly by the pyglet</code></p> <p><code>    </code><code>clock.</code></p> <p></p> <p><code>    </code><code>Parameters</code></p> <p><code>    </code><code>----------</code></p> <p><code>    </code><code>dt : float</code></p> <p><code>      </code><code>The change in time since the last call.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>self</code><code>.model.process_queue()</code></p> <p><code>    </code><code>sector </code><code>=</code> <code>sectorize(</code><code>self</code><code>.position)</code></p> <p><code>    </code><code>if</code> <code>sector !</code><code>=</code> <code>self</code><code>.sector:</code></p> <p><code>      </code><code>self</code><code>.model.change_sectors(</code><code>self</code><code>.sector, sector)</code></p> <p><code>      </code><code>if</code> <code>self</code><code>.sector </code><code>is</code> <code>None</code><code>:</code></p> <p><code>        </code><code>self</code><code>.model.process_entire_queue()</code></p> <p><code>      </code><code>self</code><code>.sector </code><code>=</code> <code>sector</code></p> <p><code>    </code><code>m </code><code>=</code> <code>8</code></p> <p><code>    </code><code>dt </code><code>=</code> <code>min</code><code>(dt, </code><code>0.2</code><code>)</code></p> <p><code>    </code><code>for</code> <code>_ </code><code>in</code> <code>xrange</code><code>(m):</code></p> <p><code>      </code><code>self</code><code>._update(dt </code><code>/</code> <code>m)</code></p> <p></p> <p><code>  </code><code>def</code> <code>_update(</code><code>self</code><code>, dt):</code></p> <p><code>    </code><code>""" Private implementation of the `update()` method. This is where most</code></p> <p><code>    </code><code>of the motion logic lives, along with gravity and collision detection.</code></p> <p></p> <p><code>    </code><code>Parameters</code></p> <p><code>    </code><code>----------</code></p> <p><code>    </code><code>dt : float</code></p> <p><code>      </code><code>The change in time since the last call.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code># walking</code></p> <p><code>    </code><code>speed </code><code>=</code> <code>FLYING_SPEED </code><code>if</code> <code>self</code><code>.flying </code><code>else</code> <code>WALKING_SPEED</code></p> <p><code>    </code><code>d </code><code>=</code> <code>dt </code><code>*</code> <code>speed </code><code># distance covered this tick.</code></p> <p><code>    </code><code>dx, dy, dz </code><code>=</code> <code>self</code><code>.get_motion_vector()</code></p> <p><code>    </code><code># New position in space, before accounting for gravity.</code></p> <p><code>    </code><code>dx, dy, dz </code><code>=</code> <code>dx </code><code>*</code> <code>d, dy </code><code>*</code> <code>d, dz </code><code>*</code> <code>d</code></p> <p><code>    </code><code># gravity</code></p> <p><code>    </code><code>if</code> <code>not</code> <code>self</code><code>.flying:</code></p> <p><code>      </code><code># Update your vertical speed: if you are falling, speed up until you</code></p> <p><code>      </code><code># hit terminal velocity; if you are jumping, slow down until you</code></p> <p><code>      </code><code># start falling.</code></p> <p><code>      </code><code>self</code><code>.dy </code><code>-</code><code>=</code> <code>dt </code><code>*</code> <code>GRAVITY</code></p> <p><code>      </code><code>self</code><code>.dy </code><code>=</code> <code>max</code><code>(</code><code>self</code><code>.dy, </code><code>-</code><code>TERMINAL_VELOCITY)</code></p> <p><code>      </code><code>dy </code><code>+</code><code>=</code> <code>self</code><code>.dy </code><code>*</code> <code>dt</code></p> <p><code>    </code><code># collisions</code></p> <p><code>    </code><code>x, y, z </code><code>=</code> <code>self</code><code>.position</code></p> <p><code>    </code><code>x, y, z </code><code>=</code> <code>self</code><code>.collide((x </code><code>+</code> <code>dx, y </code><code>+</code> <code>dy, z </code><code>+</code> <code>dz), PLAYER_HEIGHT)</code></p> <p><code>    </code><code>self</code><code>.position </code><code>=</code> <code>(x, y, z)</code></p> <p></p> <p><code>  </code><code>def</code> <code>collide(</code><code>self</code><code>, position, height):</code></p> <p><code>    </code><code>""" Checks to see if the player at the given `position` and `height`</code></p> <p><code>    </code><code>is colliding with any blocks in the world.</code></p> <p></p> <p><code>    </code><code>Parameters</code></p> <p><code>    </code><code>----------</code></p> <p><code>    </code><code>position : tuple of len 3</code></p> <p><code>      </code><code>The (x, y, z) position to check for collisions at.</code></p> <p><code>    </code><code>height : int or float</code></p> <p><code>      </code><code>The height of the player.</code></p> <p></p> <p><code>    </code><code>Returns</code></p> <p><code>    </code><code>-------</code></p> <p><code>    </code><code>position : tuple of len 3</code></p> <p><code>      </code><code>The new position of the player taking into account collisions.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code># How much overlap with a dimension of a surrounding block you need to</code></p> <p><code>    </code><code># have to count as a collision. If 0, touching terrain at all counts as</code></p> <p><code>    </code><code># a collision. If .49, you sink into the ground, as if walking through</code></p> <p><code>    </code><code># tall grass. If &gt;= .5, you'll fall through the ground.</code></p> <p><code>    </code><code>pad </code><code>=</code> <code>0.25</code></p> <p><code>    </code><code>p </code><code>=</code> <code>list</code><code>(position)</code></p> <p><code>    </code><code>np </code><code>=</code> <code>normalize(position)</code></p> <p><code>    </code><code>for</code> <code>face </code><code>in</code> <code>FACES: </code><code># check all surrounding blocks</code></p> <p><code>      </code><code>for</code> <code>i </code><code>in</code> <code>xrange</code><code>(</code><code>3</code><code>): </code><code># check each dimension independently</code></p> <p><code>        </code><code>if</code> <code>not</code> <code>face[i]:</code></p> <p><code>          </code><code>continue</code></p> <p><code>        </code><code># How much overlap you have with this dimension.</code></p> <p><code>        </code><code>d </code><code>=</code> <code>(p[i] </code><code>-</code> <code>np[i]) </code><code>*</code> <code>face[i]</code></p> <p><code>        </code><code>if</code> <code>d &lt; pad:</code></p> <p><code>          </code><code>continue</code></p> <p><code>        </code><code>for</code> <code>dy </code><code>in</code> <code>xrange</code><code>(height): </code><code># check each height</code></p> <p><code>          </code><code>op </code><code>=</code> <code>list</code><code>(np)</code></p> <p><code>          </code><code>op[</code><code>1</code><code>] </code><code>-</code><code>=</code> <code>dy</code></p> <p><code>          </code><code>op[i] </code><code>+</code><code>=</code> <code>face[i]</code></p> <p><code>          </code><code>if</code> <code>tuple</code><code>(op) </code><code>not</code> <code>in</code> <code>self</code><code>.model.world:</code></p> <p><code>            </code><code>continue</code></p> <p><code>          </code><code>p[i] </code><code>-</code><code>=</code> <code>(d </code><code>-</code> <code>pad) </code><code>*</code> <code>face[i]</code></p> <p><code>          </code><code>if</code> <code>face </code><code>=</code><code>=</code> <code>(</code><code>0</code><code>, </code><code>-</code><code>1</code><code>, </code><code>0</code><code>) </code><code>or</code> <code>face </code><code>=</code><code>=</code> <code>(</code><code>0</code><code>, </code><code>1</code><code>, </code><code>0</code><code>):</code></p> <p><code>            </code><code># You are colliding with the ground or ceiling, so stop</code></p> <p><code>            </code><code># falling / rising.</code></p> <p><code>            </code><code>self</code><code>.dy </code><code>=</code> <code>0</code></p> <p><code>          </code><code>break</code></p> <p><code>    </code><code>return</code> <code>tuple</code><code>(p)</code></p> <p></p> <p><code>  </code><code>def</code> <code>on_mouse_press(</code><code>self</code><code>, x, y, button, modifiers):</code></p> <p><code>    </code><code>""" Called when a mouse button is pressed. See pyglet docs for button</code></p> <p><code>    </code><code>amd modifier mappings.</code></p> <p></p> <p><code>    </code><code>Parameters</code></p> <p><code>    </code><code>----------</code></p> <p><code>    </code><code>x, y : int</code></p> <p><code>      </code><code>The coordinates of the mouse click. Always center of the screen if</code></p> <p><code>      </code><code>the mouse is captured.</code></p> <p><code>    </code><code>button : int</code></p> <p><code>      </code><code>Number representing mouse button that was clicked. 1 = left button,</code></p> <p><code>      </code><code>4 = right button.</code></p> <p><code>    </code><code>modifiers : int</code></p> <p><code>      </code><code>Number representing any modifying keys that were pressed when the</code></p> <p><code>      </code><code>mouse button was clicked.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>if</code> <code>self</code><code>.exclusive:</code></p> <p><code>      </code><code>vector </code><code>=</code> <code>self</code><code>.get_sight_vector()</code></p> <p><code>      </code><code>block, previous </code><code>=</code> <code>self</code><code>.model.hit_test(</code><code>self</code><code>.position, vector)</code></p> <p><code>      </code><code>if</code> <code>(button </code><code>=</code><code>=</code> <code>mouse.RIGHT) </code><code>or</code> <code>\</code></p> <p><code>          </code><code>((button </code><code>=</code><code>=</code> <code>mouse.LEFT) </code><code>and</code> <code>(modifiers &amp; key.MOD_CTRL)):</code></p> <p><code>        </code><code># ON OSX, control + left click = right click.</code></p> <p><code>        </code><code>if</code> <code>previous:</code></p> <p><code>          </code><code>self</code><code>.model.add_block(previous, </code><code>self</code><code>.block)</code></p> <p><code>      </code><code>elif</code> <code>button </code><code>=</code><code>=</code> <code>pyglet.window.mouse.LEFT </code><code>and</code> <code>block:</code></p> <p><code>        </code><code>texture </code><code>=</code> <code>self</code><code>.model.world[block]</code></p> <p><code>        </code><code>if</code> <code>texture !</code><code>=</code> <code>STONE:</code></p> <p><code>          </code><code>self</code><code>.model.remove_block(block)</code></p> <p><code>    </code><code>else</code><code>:</code></p> <p><code>      </code><code>self</code><code>.set_exclusive_mouse(</code><code>True</code><code>)</code></p> <p></p> <p><code>  </code><code>def</code> <code>on_mouse_motion(</code><code>self</code><code>, x, y, dx, dy):</code></p> <p><code>    </code><code>""" Called when the player moves the mouse.</code></p> <p></p> <p><code>    </code><code>Parameters</code></p> <p><code>    </code><code>----------</code></p> <p><code>    </code><code>x, y : int</code></p> <p><code>      </code><code>The coordinates of the mouse click. Always center of the screen if</code></p> <p><code>      </code><code>the mouse is captured.</code></p> <p><code>    </code><code>dx, dy : float</code></p> <p><code>      </code><code>The movement of the mouse.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>if</code> <code>self</code><code>.exclusive:</code></p> <p><code>      </code><code>m </code><code>=</code> <code>0.15</code></p> <p><code>      </code><code>x, y </code><code>=</code> <code>self</code><code>.rotation</code></p> <p><code>      </code><code>x, y </code><code>=</code> <code>x </code><code>+</code> <code>dx </code><code>*</code> <code>m, y </code><code>+</code> <code>dy </code><code>*</code> <code>m</code></p> <p><code>      </code><code>y </code><code>=</code> <code>max</code><code>(</code><code>-</code><code>90</code><code>, </code><code>min</code><code>(</code><code>90</code><code>, y))</code></p> <p><code>      </code><code>self</code><code>.rotation </code><code>=</code> <code>(x, y)</code></p> <p></p> <p><code>  </code><code>def</code> <code>on_key_press(</code><code>self</code><code>, symbol, modifiers):</code></p> <p><code>    </code><code>""" Called when the player presses a key. See pyglet docs for key</code></p> <p><code>    </code><code>mappings.</code></p> <p></p> <p><code>    </code><code>Parameters</code></p> <p><code>    </code><code>----------</code></p> <p><code>    </code><code>symbol : int</code></p> <p><code>      </code><code>Number representing the key that was pressed.</code></p> <p><code>    </code><code>modifiers : int</code></p> <p><code>      </code><code>Number representing any modifying keys that were pressed.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>if</code> <code>symbol </code><code>=</code><code>=</code> <code>key.W:</code></p> <p><code>      </code><code>self</code><code>.strafe[</code><code>0</code><code>] </code><code>-</code><code>=</code> <code>1</code></p> <p><code>    </code><code>elif</code> <code>symbol </code><code>=</code><code>=</code> <code>key.S:</code></p> <p><code>      </code><code>self</code><code>.strafe[</code><code>0</code><code>] </code><code>+</code><code>=</code> <code>1</code></p> <p><code>    </code><code>elif</code> <code>symbol </code><code>=</code><code>=</code> <code>key.A:</code></p> <p><code>      </code><code>self</code><code>.strafe[</code><code>1</code><code>] </code><code>-</code><code>=</code> <code>1</code></p> <p><code>    </code><code>elif</code> <code>symbol </code><code>=</code><code>=</code> <code>key.D:</code></p> <p><code>      </code><code>self</code><code>.strafe[</code><code>1</code><code>] </code><code>+</code><code>=</code> <code>1</code></p> <p><code>    </code><code>elif</code> <code>symbol </code><code>=</code><code>=</code> <code>key.SPACE:</code></p> <p><code>      </code><code>if</code> <code>self</code><code>.dy </code><code>=</code><code>=</code> <code>0</code><code>:</code></p> <p><code>        </code><code>self</code><code>.dy </code><code>=</code> <code>JUMP_SPEED</code></p> <p><code>    </code><code>elif</code> <code>symbol </code><code>=</code><code>=</code> <code>key.ESCAPE:</code></p> <p><code>      </code><code>self</code><code>.set_exclusive_mouse(</code><code>False</code><code>)</code></p> <p><code>    </code><code>elif</code> <code>symbol </code><code>=</code><code>=</code> <code>key.TAB:</code></p> <p><code>      </code><code>self</code><code>.flying </code><code>=</code> <code>not</code> <code>self</code><code>.flying</code></p> <p><code>    </code><code>elif</code> <code>symbol </code><code>in</code> <code>self</code><code>.num_keys:</code></p> <p><code>      </code><code>index </code><code>=</code> <code>(symbol </code><code>-</code> <code>self</code><code>.num_keys[</code><code>0</code><code>]) </code><code>%</code> <code>len</code><code>(</code><code>self</code><code>.inventory)</code></p> <p><code>      </code><code>self</code><code>.block </code><code>=</code> <code>self</code><code>.inventory[index]</code></p> <p></p> <p><code>  </code><code>def</code> <code>on_key_release(</code><code>self</code><code>, symbol, modifiers):</code></p> <p><code>    </code><code>""" Called when the player releases a key. See pyglet docs for key</code></p> <p><code>    </code><code>mappings.</code></p> <p></p> <p><code>    </code><code>Parameters</code></p> <p><code>    </code><code>----------</code></p> <p><code>    </code><code>symbol : int</code></p> <p><code>      </code><code>Number representing the key that was pressed.</code></p> <p><code>    </code><code>modifiers : int</code></p> <p><code>      </code><code>Number representing any modifying keys that were pressed.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>if</code> <code>symbol </code><code>=</code><code>=</code> <code>key.W:</code></p> <p><code>      </code><code>self</code><code>.strafe[</code><code>0</code><code>] </code><code>+</code><code>=</code> <code>1</code></p> <p><code>    </code><code>elif</code> <code>symbol </code><code>=</code><code>=</code> <code>key.S:</code></p> <p><code>      </code><code>self</code><code>.strafe[</code><code>0</code><code>] </code><code>-</code><code>=</code> <code>1</code></p> <p><code>    </code><code>elif</code> <code>symbol </code><code>=</code><code>=</code> <code>key.A:</code></p> <p><code>      </code><code>self</code><code>.strafe[</code><code>1</code><code>] </code><code>+</code><code>=</code> <code>1</code></p> <p><code>    </code><code>elif</code> <code>symbol </code><code>=</code><code>=</code> <code>key.D:</code></p> <p><code>      </code><code>self</code><code>.strafe[</code><code>1</code><code>] </code><code>-</code><code>=</code> <code>1</code></p> <p></p> <p><code>  </code><code>def</code> <code>on_resize(</code><code>self</code><code>, width, height):</code></p> <p><code>    </code><code>""" Called when the window is resized to a new `width` and `height`.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code># label</code></p> <p><code>    </code><code>self</code><code>.label.y </code><code>=</code> <code>height </code><code>-</code> <code>10</code></p> <p><code>    </code><code># reticle</code></p> <p><code>    </code><code>if</code> <code>self</code><code>.reticle:</code></p> <p><code>      </code><code>self</code><code>.reticle.delete()</code></p> <p><code>    </code><code>x, y </code><code>=</code> <code>self</code><code>.width </code><code>/</code><code>/</code> <code>2</code><code>, </code><code>self</code><code>.height </code><code>/</code><code>/</code> <code>2</code></p> <p><code>    </code><code>n </code><code>=</code> <code>10</code></p> <p><code>    </code><code>self</code><code>.reticle </code><code>=</code> <code>pyglet.graphics.vertex_list(</code><code>4</code><code>,</code></p> <p><code>      </code><code>(</code><code>'v2i'</code><code>, (x </code><code>-</code> <code>n, y, x </code><code>+</code> <code>n, y, x, y </code><code>-</code> <code>n, x, y </code><code>+</code> <code>n))</code></p> <p><code>    </code><code>)</code></p> <p></p> <p><code>  </code><code>def</code> <code>set_2d(</code><code>self</code><code>):</code></p> <p><code>    </code><code>""" Configure OpenGL to draw in 2d.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>width, height </code><code>=</code> <code>self</code><code>.get_size()</code></p> <p><code>    </code><code>glDisable(GL_DEPTH_TEST)</code></p> <p><code>    </code><code>viewport </code><code>=</code> <code>self</code><code>.get_viewport_size()</code></p> <p><code>    </code><code>glViewport(</code><code>0</code><code>, </code><code>0</code><code>, </code><code>max</code><code>(</code><code>1</code><code>, viewport[</code><code>0</code><code>]), </code><code>max</code><code>(</code><code>1</code><code>, viewport[</code><code>1</code><code>]))</code></p> <p><code>    </code><code>glMatrixMode(GL_PROJECTION)</code></p> <p><code>    </code><code>glLoadIdentity()</code></p> <p><code>    </code><code>glOrtho(</code><code>0</code><code>, </code><code>max</code><code>(</code><code>1</code><code>, width), </code><code>0</code><code>, </code><code>max</code><code>(</code><code>1</code><code>, height), </code><code>-</code><code>1</code><code>, </code><code>1</code><code>)</code></p> <p><code>    </code><code>glMatrixMode(GL_MODELVIEW)</code></p> <p><code>    </code><code>glLoadIdentity()</code></p> <p></p> <p><code>  </code><code>def</code> <code>set_3d(</code><code>self</code><code>):</code></p> <p><code>    </code><code>""" Configure OpenGL to draw in 3d.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>width, height </code><code>=</code> <code>self</code><code>.get_size()</code></p> <p><code>    </code><code>glEnable(GL_DEPTH_TEST)</code></p> <p><code>    </code><code>viewport </code><code>=</code> <code>self</code><code>.get_viewport_size()</code></p> <p><code>    </code><code>glViewport(</code><code>0</code><code>, </code><code>0</code><code>, </code><code>max</code><code>(</code><code>1</code><code>, viewport[</code><code>0</code><code>]), </code><code>max</code><code>(</code><code>1</code><code>, viewport[</code><code>1</code><code>]))</code></p> <p><code>    </code><code>glMatrixMode(GL_PROJECTION)</code></p> <p><code>    </code><code>glLoadIdentity()</code></p> <p><code>    </code><code>gluPerspective(</code><code>65.0</code><code>, width </code><code>/</code> <code>float</code><code>(height), </code><code>0.1</code><code>, </code><code>60.0</code><code>)</code></p> <p><code>    </code><code>glMatrixMode(GL_MODELVIEW)</code></p> <p><code>    </code><code>glLoadIdentity()</code></p> <p><code>    </code><code>x, y </code><code>=</code> <code>self</code><code>.rotation</code></p> <p><code>    </code><code>glRotatef(x, </code><code>0</code><code>, </code><code>1</code><code>, </code><code>0</code><code>)</code></p> <p><code>    </code><code>glRotatef(</code><code>-</code><code>y, math.cos(math.radians(x)), </code><code>0</code><code>, math.sin(math.radians(x)))</code></p> <p><code>    </code><code>x, y, z </code><code>=</code> <code>self</code><code>.position</code></p> <p><code>    </code><code>glTranslatef(</code><code>-</code><code>x, </code><code>-</code><code>y, </code><code>-</code><code>z)</code></p> <p></p> <p><code>  </code><code>def</code> <code>on_draw(</code><code>self</code><code>):</code></p> <p><code>    </code><code>""" Called by pyglet to draw the canvas.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>self</code><code>.clear()</code></p> <p><code>    </code><code>self</code><code>.set_3d()</code></p> <p><code>    </code><code>glColor3d(</code><code>1</code><code>, </code><code>1</code><code>, </code><code>1</code><code>)</code></p> <p><code>    </code><code>self</code><code>.model.batch.draw()</code></p> <p><code>    </code><code>self</code><code>.draw_focused_block()</code></p> <p><code>    </code><code>self</code><code>.set_2d()</code></p> <p><code>    </code><code>self</code><code>.draw_label()</code></p> <p><code>    </code><code>self</code><code>.draw_reticle()</code></p> <p></p> <p><code>  </code><code>def</code> <code>draw_focused_block(</code><code>self</code><code>):</code></p> <p><code>    </code><code>""" Draw black edges around the block that is currently under the</code></p> <p><code>    </code><code>crosshairs.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>vector </code><code>=</code> <code>self</code><code>.get_sight_vector()</code></p> <p><code>    </code><code>block </code><code>=</code> <code>self</code><code>.model.hit_test(</code><code>self</code><code>.position, vector)[</code><code>0</code><code>]</code></p> <p><code>    </code><code>if</code> <code>block:</code></p> <p><code>      </code><code>x, y, z </code><code>=</code> <code>block</code></p> <p><code>      </code><code>vertex_data </code><code>=</code> <code>cube_vertices(x, y, z, </code><code>0.51</code><code>)</code></p> <p><code>      </code><code>glColor3d(</code><code>0</code><code>, </code><code>0</code><code>, </code><code>0</code><code>)</code></p> <p><code>      </code><code>glPolygonMode(GL_FRONT_AND_BACK, GL_LINE)</code></p> <p><code>      </code><code>pyglet.graphics.draw(</code><code>24</code><code>, GL_QUADS, (</code><code>'v3f/static'</code><code>, vertex_data))</code></p> <p><code>      </code><code>glPolygonMode(GL_FRONT_AND_BACK, GL_FILL)</code></p> <p></p> <p><code>  </code><code>def</code> <code>draw_label(</code><code>self</code><code>):</code></p> <p><code>    </code><code>""" Draw the label in the top left of the screen.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>x, y, z </code><code>=</code> <code>self</code><code>.position</code></p> <p><code>    </code><code>self</code><code>.label.text </code><code>=</code> <code>'%02d (%.2f, %.2f, %.2f) %d / %d'</code> <code>%</code> <code>(</code></p> <p><code>      </code><code>pyglet.clock.get_fps(), x, y, z,</code></p> <p><code>      </code><code>len</code><code>(</code><code>self</code><code>.model._shown), </code><code>len</code><code>(</code><code>self</code><code>.model.world))</code></p> <p><code>    </code><code>self</code><code>.label.draw()</code></p> <p></p> <p><code>  </code><code>def</code> <code>draw_reticle(</code><code>self</code><code>):</code></p> <p><code>    </code><code>""" Draw the crosshairs in the center of the screen.</code></p> <p></p> <p><code>    </code><code>"""</code></p> <p><code>    </code><code>glColor3d(</code><code>0</code><code>, </code><code>0</code><code>, </code><code>0</code><code>)</code></p> <p><code>    </code><code>self</code><code>.reticle.draw(GL_LINES)</code></p> <p></p> <p></p> <p><code>def</code> <code>setup_fog():</code></p> <p><code>  </code><code>""" Configure the OpenGL fog properties.</code></p> <p></p> <p><code>  </code><code>"""</code></p> <p><code>  </code><code># Enable fog. Fog "blends a fog color with each rasterized pixel fragment's</code></p> <p><code>  </code><code># post-texturing color."</code></p> <p><code>  </code><code>glEnable(GL_FOG)</code></p> <p><code>  </code><code># Set the fog color.</code></p> <p><code>  </code><code>glFogfv(GL_FOG_COLOR, (GLfloat </code><code>*</code> <code>4</code><code>)(</code><code>0.5</code><code>, </code><code>0.69</code><code>, </code><code>1.0</code><code>, </code><code>1</code><code>))</code></p> <p><code>  </code><code># Say we have no preference between rendering speed and quality.</code></p> <p><code>  </code><code>glHint(GL_FOG_HINT, GL_DONT_CARE)</code></p> <p><code>  </code><code># Specify the equation used to compute the blending factor.</code></p> <p><code>  </code><code>glFogi(GL_FOG_MODE, GL_LINEAR)</code></p> <p><code>  </code><code># How close and far away fog starts and ends. The closer the start and end,</code></p> <p><code>  </code><code># the denser the fog in the fog range.</code></p> <p><code>  </code><code>glFogf(GL_FOG_START, </code><code>20.0</code><code>)</code></p> <p><code>  </code><code>glFogf(GL_FOG_END, </code><code>60.0</code><code>)</code></p> <p></p> <p></p> <p><code>def</code> <code>setup():</code></p> <p><code>  </code><code>""" Basic OpenGL configuration.</code></p> <p></p> <p><code>  </code><code>"""</code></p> <p><code>  </code><code># Set the color of "clear", i.e. the sky, in rgba.</code></p> <p><code>  </code><code>glClearColor(</code><code>0.5</code><code>, </code><code>0.69</code><code>, </code><code>1.0</code><code>, </code><code>1</code><code>)</code></p> <p><code>  </code><code># Enable culling (not rendering) of back-facing facets -- facets that aren't</code></p> <p><code>  </code><code># visible to you.</code></p> <p><code>  </code><code>glEnable(GL_CULL_FACE)</code></p> <p><code>  </code><code># Set the texture minification/magnification function to GL_NEAREST (nearest</code></p> <p><code>  </code><code># in Manhattan distance) to the specified texture coordinates. GL_NEAREST</code></p> <p><code>  </code><code># "is generally faster than GL_LINEAR, but it can produce textured 图片</code></p> <p><code>  </code><code># with sharper edges because the transition between texture elements is not</code></p> <p><code>  </code><code># as smooth."</code></p> <p><code>  </code><code>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST)</code></p> <p><code>  </code><code>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST)</code></p> <p><code>  </code><code>setup_fog()</code></p> <p></p> <p></p> <p><code>def</code> <code>main():</code></p> <p><code>  </code><code>window </code><code>=</code> <code>Window(width</code><code>=</code><code>1800</code><code>, height</code><code>=</code><code>1600</code><code>, caption</code><code>=</code><code>'Pyglet'</code><code>, resizable</code><code>=</code><code>True</code><code>)</code></p> <p><code>  </code><code># Hide the mouse cursor and prevent the mouse from leaving the window.</code></p> <p><code>  </code><code>window.set_exclusive_mouse(</code><code>True</code><code>)</code></p> <p><code>  </code><code>setup()</code></p> <p><code>  </code><code>pyglet.app.run()</code></p> <p></p> <p></p> <p><code>if</code> <code>__name__ </code><code>=</code><code>=</code> <code>'__main__'</code><code>:</code></p> <p><code>  </code><code>main()</code></p> </td></tr></tbody></table> 
<p>我的世界小游戏python源代码包下载地址：</p> 
<p>链接: <a href="https://pan.baidu.com/s/1gKAheRzAeNmRXgSU-A4PPg" rel="nofollow" title="百度网盘 请输入提取码">百度网盘 请输入提取码</a></p> 
<p>提取码: rya9</p> 
<p>到此这篇关于Python实现我的世界小游戏源代码的文章就介绍到这了.</p> 
<blockquote> 
 <p><a class="link-info" href="http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&amp;k=MQcUJHwkQ6ec-0gZ4PjgAqOjP2PbE-K1&amp;authKey=whFGZWvHxi2uiypFCRtI29cAwlY7065EZZfMBPEtjKPoQ9VLhfrWlpEv8gJjk6Vd&amp;noverify=0&amp;group_code=818162404" rel="nofollow" title="点击拿去">点击拿去</a>50G+学习视频教程<br> 100+Python初阶、中阶、高阶电子书籍</p> 
</blockquote> 
<p>     </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9548ce45ec4534bf80e676344970ea82/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu20.04根目录扩容</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dca402bf96c42b80b6207b0907616ba4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">文字超出一行显示展开按钮，点击展开全部显示，点击收起只显示一行</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>