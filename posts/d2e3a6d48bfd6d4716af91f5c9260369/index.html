<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JavaWeb（Maven、Tomcat、Servlet、Jsp） - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JavaWeb（Maven、Tomcat、Servlet、Jsp）" />
<meta property="og:description" content="网站是如何进行访问的： 输入一个域名/地址，回车；检查本机的：C:\Windows\System32\drivers\etc\hosts配置文件下有没有这个域名映射； 有：直接返回对应的ip地址，这个地址中，有我们需要访问的web程序，可以直接访问。没有：去DNS服务器找，找到的话就返回，找不到就返回找不到。 发布一个web网站 将自己写的网站，放到服务器（Tomcat）中指定的web应用的文件夹（webapps）下，就可以访问了。 网站应该有的结构 （webapps中一个文件夹代表一个web应用，可以进行访问）
--webapps : Tomcat服务器的web目录 -ROOT ：Tomcat发布的网站 -项目名 ： 网站的目录名 WEB-INF -class : java程序	-lib : web应用所依赖的jar包 -web.xml : 网站配置文件 -index.html 默认的首页 Http Http（超文本传输协议）是一个简单的请求-响应协议，它通常运行在TCP之上。
文本：html，字符串，…超文本：图片，音乐，视频，定位，地图…默认端口：80 https：安全
默认端口：443 http的两个时代：
http1.0 HTTP/1.0：客户端可以与web服务器连接后，只能获得一个web资源，断开连接。 http2.0 HTTP/1.1：客户端可以与web服务器连接后，可以获得多个web资源。 Http请求
客户端——发请求（Request）——服务器 百度举例：
Request URL: https://www.baidu.com/	请求地址 Request Method: GET	get方法/post方法 Status Code: 200 OK	状态码 200 Remote Address: 14.215.177.38:443	远程地址 Referrer Policy: strict-origin-when-cross-origin	协议 Accept: text/html	类型 Accept-Encoding: gzip, deflate, br	类型编码 Accept-Language: zh-CN,zh;q=0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/d2e3a6d48bfd6d4716af91f5c9260369/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-05T11:36:56+08:00" />
<meta property="article:modified_time" content="2023-05-05T11:36:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JavaWeb（Maven、Tomcat、Servlet、Jsp）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5><a id="_0"></a>网站是如何进行访问的：</h5> 
<ol><li>输入一个域名/地址，回车；</li><li>检查本机的：C:\Windows\System32\drivers\etc\hosts配置文件下有没有这个域名映射； 
  <ol><li>有：直接返回对应的ip地址，这个地址中，有我们需要访问的web程序，可以直接访问。</li><li>没有：去DNS服务器找，找到的话就返回，找不到就返回找不到。</li></ol> </li></ol> 
<h5><a id="web_7"></a>发布一个web网站</h5> 
<ul><li>将自己写的网站，放到服务器（Tomcat）中指定的web应用的文件夹（webapps）下，就可以访问了。</li></ul> 
<p><strong>网站应该有的结构 （webapps中一个文件夹代表一个web应用，可以进行访问）</strong></p> 
<pre><code>--webapps : Tomcat服务器的web目录
	-ROOT ：Tomcat发布的网站
	-项目名 ： 网站的目录名
		WEB-INF
			-class : java程序	
			-lib : web应用所依赖的jar包
			-web.xml : 网站配置文件
		-index.html 默认的首页
</code></pre> 
<hr> 
<h4><a id="Http_26"></a>Http</h4> 
<ul><li> <p>Http（超文本传输协议）是一个简单的请求-响应协议，它通常运行在TCP之上。</p> 
  <ul><li>文本：html，字符串，…</li><li>超文本：图片，音乐，视频，定位，地图…</li><li>默认端口：80</li></ul> </li><li> <p>https：安全</p> 
  <ul><li>默认端口：443</li></ul> </li><li> <p>http的两个时代：</p> 
  <ul><li>http1.0 
    <ul><li>HTTP/1.0：客户端可以与web服务器连接后，只能获得一个web资源，断开连接。</li></ul> </li><li>http2.0 
    <ul><li>HTTP/1.1：客户端可以与web服务器连接后，可以获得多个web资源。</li></ul> </li></ul> </li><li> <p>Http请求</p> 
  <ul><li>客户端——发请求（Request）——服务器</li></ul> </li></ul> 
<p>百度举例：</p> 
<pre><code>Request URL: https://www.baidu.com/		请求地址
Request Method: GET		get方法/post方法
Status Code: 200 OK		状态码 200
Remote Address: 14.215.177.38:443		远程地址
Referrer Policy: strict-origin-when-cross-origin	协议
</code></pre> 
<pre><code class="prism language-java"><span class="token class-name">Accept</span><span class="token operator">:</span> text<span class="token operator">/</span>html	类型
<span class="token class-name">Accept</span><span class="token operator">-</span><span class="token class-name">Encoding</span><span class="token operator">:</span> gzip<span class="token punctuation">,</span> deflate<span class="token punctuation">,</span> br	类型编码
<span class="token class-name">Accept</span><span class="token operator">-</span><span class="token class-name">Language</span><span class="token operator">:</span> zh<span class="token operator">-</span>CN<span class="token punctuation">,</span>zh<span class="token punctuation">;</span>q<span class="token operator">=</span><span class="token number">0.9</span>		语言
<span class="token class-name">Cache</span><span class="token operator">-</span><span class="token class-name">Control</span><span class="token operator">:</span> max<span class="token operator">-</span>age<span class="token operator">=</span><span class="token number">0</span>
<span class="token class-name">Connection</span><span class="token operator">:</span> keep<span class="token operator">-</span>alive
</code></pre> 
<ul><li>请求行 
  <ul><li>请求行中的请求方式：GET</li><li>请求方式：**Get，Post， **HEAD,DELETE,PUT,TRACT… 
    <ul><li><strong>get：请求能够携带的参数比较少，大小有限制，会在浏览器的URL地址栏显示数据内容，不安全，但高效。</strong></li><li><strong>post：请求能够携带的参数没有限制，大小没有限制，不会在浏览器的URL地址栏显示数据内容，安全，但不高效。</strong></li></ul> </li></ul> </li><li>消息头</li></ul> 
<pre><code class="prism language-java"><span class="token class-name">Accept</span><span class="token operator">:</span>告诉浏览器，它所支持的数据类型
<span class="token class-name">Accept</span><span class="token operator">-</span><span class="token class-name">Encoding</span><span class="token operator">:</span>支持哪种编码格式 GBK UTF<span class="token operator">-</span><span class="token number">8</span> GB2312 IOS8859<span class="token operator">-</span><span class="token number">1</span>
<span class="token class-name">Accept</span><span class="token operator">-</span><span class="token class-name">Language</span><span class="token operator">:</span>告诉浏览器，它的语言环境
<span class="token class-name">Cache</span><span class="token operator">-</span><span class="token class-name">Control</span><span class="token operator">:</span>缓存控制
<span class="token class-name">Connection</span><span class="token operator">:</span>告诉浏览器，请求完成是断开还是保持连接
HOST<span class="token operator">:</span>主机
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<ul><li>Http响应 
  <ul><li>服务器——响应——客户端</li></ul> </li></ul> 
<p>百度举例：</p> 
<pre><code class="prism language-java"><span class="token class-name">Cache</span><span class="token operator">-</span><span class="token class-name">Control</span><span class="token operator">:</span> <span class="token keyword">private</span>		缓冲控制
<span class="token class-name">Connection</span><span class="token operator">:</span> keep<span class="token operator">-</span>alive		连接：保持连接
<span class="token class-name">Content</span><span class="token operator">-</span><span class="token class-name">Encoding</span><span class="token operator">:</span> gzip		编码
<span class="token class-name">Content</span><span class="token operator">-</span><span class="token class-name">Type</span><span class="token operator">:</span> text<span class="token operator">/</span>html<span class="token punctuation">;</span>charset<span class="token operator">=</span>utf<span class="token operator">-</span><span class="token number">8</span>		类型
</code></pre> 
<ul><li> <p>响应体</p> <pre><code class="prism language-java"><span class="token class-name">Accept</span><span class="token operator">:</span>告诉浏览器，它所支持的数据类型
<span class="token class-name">Accept</span><span class="token operator">-</span><span class="token class-name">Encoding</span><span class="token operator">:</span>支持哪种编码格式 GBK UTF<span class="token operator">-</span><span class="token number">8</span> GB2312 IOS8859<span class="token operator">-</span><span class="token number">1</span>
<span class="token class-name">Accept</span><span class="token operator">-</span><span class="token class-name">Language</span><span class="token operator">:</span>告诉浏览器，它的语言环境
<span class="token class-name">Cache</span><span class="token operator">-</span><span class="token class-name">Control</span><span class="token operator">:</span>缓存控制
<span class="token class-name">Connection</span><span class="token operator">:</span>告诉浏览器，请求完成是断开还是保持连接
HOST<span class="token operator">:</span>主机
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token class-name">Refresh</span><span class="token operator">:</span>告诉客户端，多久刷新一次
<span class="token class-name">Location</span><span class="token operator">:</span>让网页重新定位
</code></pre> </li><li> <p>响应状态码</p> 
  <ul><li>200：请求响应成功</li><li>3xx：请求重定向 
    <ul><li>重定向：请求重新到给定的新位置去；</li></ul> </li><li>4xx：找不到资源 404 
    <ul><li>资源部存在；</li></ul> </li><li>5xx：服务器代码错误 500 502：网关错误</li></ul> </li></ul> 
<h4><a id="Maven_121"></a>Maven</h4> 
<p>为什么需要使用Maven</p> 
<ol><li> <p>在JavaWeb开发中，需要使用大量的jar包，需要手动去导入；</p> </li><li> <p>如何能够让一个东西自动帮助导入和配置jar包。</p> <p>基于此类情况，所以有了Maven。</p> </li></ol> 
<h5><a id="11_Maven_131"></a>1.1 Maven项目架构管理工具</h5> 
<p>我们目前用来就是方便导入jar包的</p> 
<p>Maven的核心思想：<strong>约定大于配置</strong></p> 
<ul><li>有约束，就不要去违反</li></ul> 
<p>Maven会规定好你该如何去编写我们的Java代码，必须按照这个规范来；</p> 
<h5><a id="12_Maven_141"></a>1.2 去Maven官网下载，然后解压即可。</h5> 
<p>https://maven.apache.org</p> 
<h5><a id="13__145"></a>1.3 配置环境变量</h5> 
<p>配置如下：</p> 
<ul><li>M2_HOME maven目录下的bin目录</li><li>MAVEN_HOME maven的目录</li><li>在系统的path中配置 %MAVEN_HOME%\bin</li><li>mvn -version（检查）</li></ul> 
<h5><a id="14__154"></a>1.4 阿里云镜像</h5> 
<ul><li>镜像：mirrors（位置：maven目录\conf\settings.xml）可以配置多个 
  <ul><li>作用：加速我们的下载</li></ul> </li><li>国内建议使用阿里云的镜像，自行百度。 
  <ul><li>放在配置文件的"mirrors"标签中</li></ul> </li></ul> 
<h5><a id="15__161"></a>1.5 本地仓库</h5> 
<p>建立一个本地仓库：标签是：localRepository</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>localRepository</span><span class="token punctuation">&gt;</span></span>D:\A\B\maven-repo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>localRepository</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>建立一个文件夹，仓库地址配置指向你的文件夹路径</p> 
<h5><a id="16IDEAMaven_169"></a>1.6在IDEA中使用Maven</h5> 
<p>创建MavenWeb项目<br> <img src="https://images2.imgbox.com/c5/61/W5XPuhG2_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/df/b5/OCiE2Xwa_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/8d/a6/t2xnAyrp_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/5f/3a/bjKdiYhM_o.png" alt="在这里插入图片描述"></p> 
<ul><li>等待项目初始化完毕</li><li>IDEA中的Maven设置</li></ul> 
<p>​ IDEA项目创建成功后，确认一下配置信息是否有误<br> <img src="https://images2.imgbox.com/e0/8c/5LGz4VSO_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="17_Mavennext_182"></a>1.7 创建普通的Maven项目（直接next）</h5> 
<p><img src="https://images2.imgbox.com/3b/f8/yPhSOu9q_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/eb/6c/eyY5aa89_o.png" alt="在这里插入图片描述"></p> 
<p>这个只有在Web应用下才会有。<br> <img src="https://images2.imgbox.com/77/db/W7RFjXrO_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="18__189"></a>1.8 标记文件夹功能</h5> 
<p><img src="https://images2.imgbox.com/bd/b9/Xi2LRO6I_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/a9/a3/p49CzkFC_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/bb/9b/e1O3XOW3_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="19_IDEATomcat_196"></a>1.9 在IDEA中配置Tomcat</h5> 
<p><img src="https://images2.imgbox.com/1f/44/bGNiz5Bt_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/70/d6/EPE2mT56_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/01/c2/aMs0j0bd_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/fc/2d/wjpTBC24_o.png" alt="在这里插入图片描述"></p> 
<p><strong>解决警告问题</strong></p> 
<p><strong>必须要的配置：为什么会有这个问题：我们访问一个网站，需要指定一个文件夹名字；</strong></p> 
<p><img src="https://images2.imgbox.com/e1/48/W6w5cp8c_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/6a/86/NIRAgFM3_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/25/ee/oxlr7FHf_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/94/a4/KzrAYk2v_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="110_pom_218"></a>1.10 pom文件</h5> 
<p><strong>pom.xml是maven的核心配置文件</strong></p> 
<p><img src="https://images2.imgbox.com/a7/bf/CkGqzwob_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ba/35/Xb9EyARM_o.png" alt="在这里插入图片描述"></p> 
<p>接上图<br> <img src="https://images2.imgbox.com/24/79/UqAuI27L_o.png" alt="在这里插入图片描述"></p> 
<p>Maven会帮助你导入的这个jar包所依赖的其他jar</p> 
<p><img src="https://images2.imgbox.com/43/a2/f8OiVXxK_o.png" alt="在这里插入图片描述"></p> 
<p>maven由于它的约定大于配置，所以说之后可能遇到自己写的配置文件，无法被导出或者生效的问题。解决方案：</p> 
<p>在build中加入resources配置：</p> 
<p><img src="https://images2.imgbox.com/cc/ce/JQFh8f0T_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="111_Maven_239"></a>1.11 Maven仓库的使用</h5> 
<p>地址：https://mvnrepository.com/</p> 
<h4><a id="Servlet_243"></a>Servlet</h4> 
<h5><a id="11Servlet_245"></a>1.1、Servlet简介</h5> 
<ul><li>Servlet就是sun公司开发动态web的一门技术</li><li>Sun在这些API中提供一个接口叫做：Servlet，如果你想开发一个Servlet程序，只需要完成两个小步骤： 
  <ul><li>编写一个类，实现Servlet接口</li><li>把开发好的Java类部署到web服务器中</li></ul> </li></ul> 
<p><strong>把实现了Servlet接口的Java程序叫做，Servlet</strong></p> 
<h5><a id="12_HelloServlet_254"></a>1.2 HelloServlet</h5> 
<ol><li> <p>构建一个普通的Maven项目，删掉里面的src目录，以后就可以在这个项目里面建立Moudel；这个空的工程就是Maven主工程;</p> </li><li> <p>关于Maven父子工程的理解：</p> <p>父项目中的pom.xml会包含子项目的标签如下：</p> <pre><code>&lt;modules&gt;
	&lt;module&gt;servlet-01&lt;/module&gt;
&lt;/modules&gt;
</code></pre> <p>子项目中的pom.xml会包含父项目的标签如下：</p> <pre><code>&lt;parent&gt;
	&lt;artifactId&gt;javaweb-servlet&lt;/artifactId&gt;
	&lt;groupId&gt;com.wang&lt;/groupId&gt;
	&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;/parent&gt;
</code></pre> <p>父项目中的java子项目可以直接使用，可以理解为java的中子类继承父类；</p> </li><li> <p>Maven环境优化</p> 
  <ol><li>修改web.xml文件为Tomcat里面的web.xml</li><li>将maven的结构搭建完整（新建java、resource文件夹标记）</li></ol> </li><li> <p>编写一个Servlet程序</p> 
  <ol><li> <p>编写一个普通类</p> </li><li> <p>实现Servlet接口，选择直接继承HttpServlet</p> <pre><code>public class HelloServlet extends HttpServlet {

    //由于get或者post只是请求实现的不同方式，可以相互调用，业务逻辑都一样；
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //ServletOutputStream outputStream = resp.getOutputStream();
        PrintWriter writer = resp.getWriter();//响应流
        writer.print("Hello,Servlet");
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</code></pre> </li></ol> </li><li> <p>编写Servlet的映射</p> </li></ol> 
<p>为什么需要映射：我们写的是JAVA程序，但是要通过浏览器访问，而浏览器需要连接web服务器，所以我们需要再web服务中注册我 们写的Servlet，还需给他一个浏览器能够访问的路径；</p> 
<pre><code> &lt;!--注册Servlet--&gt;
 &lt;servlet&gt;
     &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
     &lt;servlet-class&gt;com.wang.servlet.HelloServlet&lt;/servlet-class&gt;
 &lt;/servlet&gt;
 &lt;!--Servlet的请求路径--&gt;
 &lt;servlet-mapping&gt;
     &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
     &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;
 &lt;/servlet-mapping&gt;
</code></pre> 
<ol start="6"><li> <p>配置Tomcat</p> <p>注意：配置项目发布的路径</p> </li><li> <p>启动测试</p> </li></ol> 
<h5><a id="13_Servlet_332"></a>1.3 Servlet原理</h5> 
<p>Servlet是由Web服务器调用，web服务器在收到浏览器请求之后：</p> 
<p><img src="https://images2.imgbox.com/d1/80/CRUZGjX5_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="14_Mapping_338"></a>1.4 Mapping问题</h5> 
<ol><li> <p>一个Servlet可以指定一个映射路径</p> <pre><code>&lt;servlet-mapping&gt;
	&lt;servlet-name&gt;hello&lt;/servlet-name&gt;
	&lt;url-pattern&gt;/hello&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre> </li><li> <p>一个Servlet可以指定多个映射路径</p> <pre><code>    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/hello1&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/hello2&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
</code></pre> </li><li> <p>一个Servlet可以指定通用映射路径</p> <pre><code>&lt;servlet-mapping&gt;
	&lt;servlet-name&gt;hello&lt;/servlet-name&gt;
	&lt;url-pattern&gt;/hello/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre> </li><li> <p>默认请求路径</p> <pre><code>&lt;servlet-mapping&gt;
	&lt;servlet-name&gt;hello&lt;/servlet-name&gt;
	&lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre> </li><li> <p>指定一些后缀或者前缀等…</p> <pre><code>&lt;!--
可以自定义后缀实现，请求映射
注意:*前面不能加项目映射的路径
hell/asdfasdfa.do
--&gt;
&lt;servlet-mapping&gt;
	&lt;servlet-name&gt;hello&lt;/servlet-name&gt;
	&lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre> </li></ol> 
<h5><a id="15_ServletContext_398"></a>1.5 ServletContext</h5> 
<p>web容器在启动的时候，它会为每个web程序都创建一个对应的ServletContext对象，它代表了当前的web应用;</p> 
<ul><li> <h6><a id="1__402"></a>1. 共享数据</h6> <p>在这个Servlet中保存数据，可以在另外一个Servlet中拿到：</p> <p>在一个Servlet中放入数据：</p> <pre><code>public class HelloServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        //this.getInitParameter();  初始化参数
        //this.getServletConfig();  Servlet配置
        //this.getServletContext()  Servlet上下文

        ServletContext context = this.getServletContext();
        String UserName = "小明";
        context.setAttribute("UserName", UserName);//将一个数据保存在了ServletContext中，名字为：UserName 值：UserName

    }
}
</code></pre> <p>在另一个Servlet中拿到数据：</p> <pre><code>public class getServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        ServletContext context = this.getServletContext();
        String userName = (String) context.getAttribute("UserName");

        resp.setContentType("text/html");
        resp.setCharacterEncoding("UTF-8");
        resp.getWriter().print("名字为：" + userName);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }

}
</code></pre> <p>配置web.xml中的Servlet映射：</p> <pre><code> &lt;servlet&gt;
        &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.wang.servlet.HelloServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;


    &lt;servlet&gt;
        &lt;servlet-name&gt;getServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.wang.servlet.getServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;getServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/getServlet&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
</code></pre> </li><li> <h6><a id="2__470"></a>2. 获取初始化参数</h6> <pre><code>&lt;!--配置一些web应用初始化参数--&gt;
&lt;context-param&gt;
	&lt;param-name&gt;url&lt;/param-name&gt;
	&lt;param-value&gt;jdbc:mysql://localhsot:3306/mybatis&lt;/param-value&gt;
&lt;/context-param&gt;
</code></pre> <pre><code>public class ParamServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        ServletContext context = this.getServletContext();
        String url = context.getInitParameter("url");
        resp.getWriter().print(url);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</code></pre> </li><li> <h6><a id="3__496"></a>3. 请求转发</h6> <pre><code>public class ServletDemo01 extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        ServletContext context = this.getServletContext();
        //RequestDispatcher requestDispatcher = context.getRequestDispatcher("/getParam");//转发请求的路径
        //requestDispatcher.forward(req, resp);//调用forward实现请求转发
        context.getRequestDispatcher("/getParam").forward(req, resp);//合并成一句
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</code></pre> <p>当然一样还是要在web.xml中配置对应的映射。</p> <p><strong>请求转发在浏览器的路径中地址并不会发生改变</strong></p> </li></ul> 
<p><img src="https://images2.imgbox.com/31/c2/lCajVgdQ_o.png" alt="在这里插入图片描述"></p> 
<ul><li> <h6><a id="4__521"></a>4. 读取资源文件</h6> <p>properties</p> 
  <ul><li>在java目录下新建properties</li><li>在resource目录下新建properties</li></ul> <p>发现：都被打包到了同一个路径下：class，这种路径我们称之为classpath；</p> <p>思路：需要一个文件流；</p> <p>在properties文件中设置值：</p> <pre><code class="prism language-prop">name  = 1131;
passs = zxzxzx;
</code></pre> <p>读取：</p> <pre><code>public class ServletDemo02 extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        InputStream is = this.getServletContext().getResourceAsStream("/WEB-INF/class/xx.properties");

        Properties pro = new Properties();
        pro.load(is);
        String name = pro.getProperty("name");
        String passs = pro.getProperty("passs");
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</code></pre> </li></ul> 
<h5><a id="16_HttpServletRequest_559"></a>1.6 HttpServletRequest</h5> 
<p>HttpServletRequest代表客户端的请求，用户通过Http协议访问服务器，HTP请求中的所有信息会被封装到HttpServletRequest，通过这个HttpServletRequest的方法，获得客户端的所有信息；</p> 
<h6><a id="___563"></a>获取前端传递的参数 和 请求转发</h6> 
<pre><code class="prism language-jsp">&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;登录&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;%--当前表单：以psot方式提交表单，提交到login请求--%&gt;
&lt;%--${pageContext.request.contextPath}代表当前的项目--%&gt;
&lt;form action="${pageContext.request.contextPath}/login" method="post"&gt;
    用户名：&lt;input type="text" name="username"&gt;
    &lt;br&gt;
    密码：&lt;input type="password" name="password"&gt;
    &lt;br&gt;
    爱好：
    &lt;input type="checkbox" name="hobby" value="1"&gt;1
    &lt;input type="checkbox" name="hobby" value="2"&gt;2
    &lt;input type="checkbox" name="hobby" value="3"&gt;3
    &lt;input type="checkbox" name="hobby" value="4"&gt;4
    &lt;input type="submit"&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//获取前端传递的参数</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取前端传递的参数 数组</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hobbies <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token string">"hobby"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>hobbies<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//通过请求转发</span>
        <span class="token comment">//在这里的  “/” 代表当前的web应用</span>
        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/succe.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>​</p> 
<h5><a id="17_HttpServletResponse_617"></a>1.7 HttpServletResponse</h5> 
<p>web服务器接收到客户端的http请求，针对这个请求，分别创建一个代表请求的HttpServletRequest对象，代表响应的一个HttpServletResponse;</p> 
<ul><li> <p>如果要获取客户端请求过来的参数：找HttpServletRequest</p> </li><li> <p>如果要给客户端响应一些信息：找HttpServletResponse<br> 1.简单分类</p> <p>负责向浏览器发送数据的方法</p> <pre><code class="prism language-java"><span class="token class-name">ServletOutputStream</span> <span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>

<span class="token class-name">PrintWriter</span> <span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
</code></pre> <p>负责向浏览器发送响应头的方法</p> <pre><code class="prism language-java"><span class="token keyword">void</span> <span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token class-name">String</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setContentLength</span><span class="token punctuation">(</span><span class="token keyword">int</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setContentLengthLong</span><span class="token punctuation">(</span><span class="token keyword">long</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token class-name">String</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">addDateHeader</span><span class="token punctuation">(</span><span class="token class-name">String</span> var1<span class="token punctuation">,</span> <span class="token keyword">long</span> var2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token class-name">String</span> var1<span class="token punctuation">,</span> <span class="token class-name">String</span> var2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token class-name">String</span> var1<span class="token punctuation">,</span> <span class="token class-name">String</span> var2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setIntHeader</span><span class="token punctuation">(</span><span class="token class-name">String</span> var1<span class="token punctuation">,</span> <span class="token keyword">int</span> var2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">addIntHeader</span><span class="token punctuation">(</span><span class="token class-name">String</span> var1<span class="token punctuation">,</span> <span class="token keyword">int</span> var2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <p>响应的状态码：</p> <pre><code class="prism language-java"><span class="token keyword">int</span> SC_CONTINUE <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> SC_SWITCHING_PROTOCOLS <span class="token operator">=</span> <span class="token number">101</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> SC_OK <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> SC_CREATED <span class="token operator">=</span> <span class="token number">201</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> SC_ACCEPTED <span class="token operator">=</span> <span class="token number">202</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> SC_NON_AUTHORITATIVE_INFORMATION <span class="token operator">=</span> <span class="token number">203</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> SC_NO_CONTENT <span class="token operator">=</span> <span class="token number">204</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> SC_RESET_CONTENT <span class="token operator">=</span> <span class="token number">205</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> SC_PARTIAL_CONTENT <span class="token operator">=</span> <span class="token number">206</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> SC_MULTIPLE_CHOICES <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> SC_MOVED_PERMANENTLY <span class="token operator">=</span> <span class="token number">301</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> SC_MOVED_TEMPORARILY <span class="token operator">=</span> <span class="token number">302</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> SC_FOUND <span class="token operator">=</span> <span class="token number">302</span><span class="token punctuation">;</span>
</code></pre> <p>2.常见应用</p> 
  <ol><li> <p>向浏览器输出消息</p> </li><li> <p>下载文件<br> <img src="https://images2.imgbox.com/9f/0e/AgjX1583_o.png" alt="在这里插入图片描述"> 3. 验证码功能<br> <img src="https://images2.imgbox.com/ca/00/dkaOrBI4_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/53/e0/26nzInNd_o.png" alt="在这里插入图片描述"><br> 4.实现重定向<br> <img src="https://images2.imgbox.com/db/eb/qnCNlvSx_o.png" alt="在这里插入图片描述"></p> <p>一个Web资源(B)收到客户端(A)请求后，它(B)会通知客户端(A)去访问另一个web资源（C），这个过程叫做重定向。</p> <p><strong>常见场景：</strong></p> 
    <ul><li> <p>用户登录</p> <pre><code class="prism language-java"><span class="token keyword">void</span> <span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token class-name">String</span> var1<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span> 
</code></pre> </li><li> <p>测试过程：</p> 
      <ol><li> <p>编写一个重定向的Servlet：在这个servlet中重定向到另一web.xml中配置的映射路径。</p> <p>注意：这个路径前面需要加上访问的项目名，不然路径访问不到。</p> <pre><code>public class RedirectServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        resp.sendRedirect("/servlet_02/getParam");//重定向
    }
 
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</code></pre> </li><li> <p>web.xml中的配置映射如下：</p> <pre><code>    &lt;servlet&gt;
        &lt;servlet-name&gt;getParam&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.wang.servlet.ParamServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;getParam&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/getParam&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;RedirectServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.wang.servlet.RedirectServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;RedirectServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/redirectServlet&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
</code></pre> </li><li> <p>浏览器请求路径：http://localhost:8080/servlet_02/redirectServlet后，会发现浏览器地址会改成重定向后之后的地址http://localhost:8080/servlet_02/getParam</p> </li><li> <p>查看浏览器的控制台调试：</p> <p><img src="https://images2.imgbox.com/ed/5c/WW4FUth6_o.png" alt="在这里插入图片描述"></p> <p><img src="https://images2.imgbox.com/0b/ff/LR0c4BQi_o.png" alt="在这里插入图片描述"></p> <p><img src="https://images2.imgbox.com/de/2e/qIOA4DiI_o.png" alt="在这里插入图片描述"></p> <p>发现：重定向之前对浏览器的响应就是做了两个事情；即：</p> <pre><code>@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
	/*resp.setHeader("Location", "/servlet_02/getParam");
	resp.setStatus(302);*/
	resp.sendRedirect("/servlet_02/getParam");//重定向
}
</code></pre> <p><strong>重定向和转发的区别</strong></p> <p>相同点：</p> 
        <ul><li>页面都会实现跳转</li></ul> <p>不同点：</p> 
        <ul><li>请求转发的时候，url地址栏不会发生变化；状态码307</li><li>重定向的时候，url地址栏会发生变化；状态码302</li></ul> </li></ol> </li></ul> </li></ol> </li></ul> 
<h4><a id="Cookie_Session_768"></a>Cookie 、Session</h4> 
<h5><a id="11__770"></a>1.1 会话</h5> 
<p><strong>会话：用户打开一个浏览器，点击了很多超链接，访问多个web资源，关闭浏览器，这个过程可以称之为会话</strong></p> 
<p><strong>有状态的会话：一个人来过某个地方，下次再来这里，就会知道这个人曾经来过，称之为有状态会话；</strong></p> 
<p>一个网站，怎么证明你来过？</p> 
<p>客户端 服务端</p> 
<ol><li>服务端给客户端一个信件，客户端下次访问的服务端带上信件就可以了；cookie</li><li>服务器登记你来过来，下次你来的时候来匹配你；session</li></ol> 
<h5><a id="12__783"></a>1.2 保存会话的两种技术</h5> 
<p><strong>cookie</strong></p> 
<ul><li>客户端技术（响应，请求）：服务端响应给客户端一个信件标识，客户端下次请求的时候带着这个标识过来。</li></ul> 
<p><strong>session</strong></p> 
<ul><li>服务器技术，利用这个技术，可以保存用户的会话信息。我们可以把信息或者数据放在session中。</li></ul> 
<p>常见应用：网站登录之后，你下次不用再登录了，第二次访问直接就上去了。</p> 
<h5><a id="13_Cookie_795"></a>1.3 Cookie</h5> 
<p><strong>(你第一次来请求我，我给你发一个cookie，下次你来的时候，带着这个cookie，那么我就知道你之前来过了)</strong></p> 
<ol><li>从请求中拿到cookie信息</li><li>服务器响应给客户端cookie</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CookieDemo01</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/*
    这个大概的逻辑是：请求一来，判断是是否带有Cookie的信息，如果有那就获取对应的Cookie。
    如果没有那服务器就响应给客户端一个Cookie信息
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//服务器 告诉请求 来的时间，把这个时间封装成一个信件，下次请求带过来，服务器就能知道这个请求来过了</span>

        <span class="token comment">//设置请求和响应的编码格式</span>
        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//响应输出</span>
        <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Cookie,服务器端从客户端获取Cookie信息</span>
        <span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里返回数组，说明Cookie可能存在多个</span>
        <span class="token comment">//判断Cookie是否存在</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cookies <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//如果存在</span>
            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"你上一次访问的时间是："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cookies<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> cookies<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token comment">//获取cookie的名字</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"LastLogin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token comment">//获得Cookie中的key</span>
                    <span class="token comment">//获取cookie的值</span>
                    <span class="token class-name">Long</span> lastLoginTime <span class="token operator">=</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">parseLong</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获得Cookie中的value</span>
                    <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>lastLoginTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"这是您第一次访问本网站"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//服务器给客户端响应一个Cookie，新建一个Cookie</span>
        <span class="token class-name">Cookie</span> lastLoginCookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"LastLogin"</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//cookie有效期为1天，设置cookie的有效期</span>
        lastLoginCookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//响应给客户端一个Cookie</span>
        resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>lastLoginCookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>以上是举例，cookie的设置信息等可以在浏览器的"应用程序"栏查看详情</strong></p> 
<p><strong>cookie：一般保存在本地的用户目录下</strong></p> 
<p>一个网站cooki是否存在上限</p> 
<ul><li>一个cookie只能保存一个信息；（由于是键值对的形式）</li><li>一个web站点可以给浏览器发送多个cookie，最多存放20个cookie</li><li>cookie大小有限制4kb</li><li>300个cookie浏览器上限</li></ul> 
<p>删除cookie：</p> 
<ul><li>不设置有效期，关闭浏览器，自动失效</li><li>设置有效期时间为0（cookie.setMaxAge(0);）</li></ul> 
<p>编码解码：</p> 
<pre><code class="prism language-java"> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"名字"</span><span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="14_Session_873"></a>1.4 Session</h5> 
<p><strong>（你来了之后，我这里会进行登记你的信息Session(唯一标识SessionID)，然后（通过cookie）进行发放给用户一个SessionID,用户可以通过对应的SessionID拿到服务器对应的数据）</strong></p> 
<p>什么是Session:</p> 
<ul><li>服务器会给每个用户（浏览器）创建一个Session对象；</li><li>一个Session独占一个浏览器，只要浏览器没有关闭，这个Session就存在；</li><li>用户登录之后，整个网站都可以访问。——&gt;保存用户的信息；保存购物车的信息…</li></ul> 
<p>Session和Cookie的区别：</p> 
<ul><li>cookie是把用户的数据写给用户的浏览器，浏览器保存（可以保存多个）</li><li>session把用户的数据写到用户独占的Session中，服务器端保存。（保存重要信息，减少服务器资源的浪费）</li><li>session对象由服务器创建</li></ul> 
<p>使用场景：</p> 
<ul><li>保存一个登录用户的信息；</li><li>购物车信息；</li><li>在整个网站中经常会使用的数据，将它保存在Session中；</li></ul> 
<p>使用session：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SessionDemo01</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//设置请求和响应的编码格式</span>
        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置响应浏览器的类型</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//得到一个Session</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//给Session中放入东西</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"小红"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取Session的ID</span>
        <span class="token class-name">String</span> sessionId <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//判断Sessions是不是新创建的</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>session<span class="token punctuation">.</span><span class="token function">isNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Session创建成功，ID："</span> <span class="token operator">+</span> sessionId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Session已经在服务器中存在了，ID："</span> <span class="token operator">+</span> sessionId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//Seesion创建的时候做了什么事情：</span>
<span class="token comment">//        Cookie cookie = new Cookie("JSESSIONID",sessionId);</span>
<span class="token comment">//        resp.addCookie(cookie);</span>
        
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>



 <span class="token comment">//得到Session</span>
 <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 session<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">//手动注销Session</span>
 session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>会话自动过期：web.xml配置</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!--设置Session默认的失效时间--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--一分钟后session自动失效，以分钟为单位--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="JSP_953"></a>JSP</h4> 
<h5><a id="1_jsp_955"></a>1. 什么是jsp</h5> 
<p>Java Server Pages(可以理解为java服务器端页面)，也和servlet一样，用于动态Web技术。</p> 
<p>早期的页面就是这样在servlet中进行字符串的拼接输出成网页：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletDemo01</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;html&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;head&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;body&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;h2&gt;Hello World&lt;/h2&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;/body&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;/head&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;html&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>最大的特点：</p> 
<ul><li>写JSP就像在写HTML</li><li>区别： 
  <ul><li>HTML只给用于提供静态的数据</li><li>JSP页面中可以嵌入Java代码，为用户提供动态数据</li></ul> </li></ul> 
<h5><a id="2_JSP_989"></a>2. JSP原理</h5> 
<p>思路：jsp到底怎么执行的</p> 
<ul><li> <p>在IDEA中参看编译后的target目录中对于的jsp文件，并无异样。</p> </li><li> <p>查看服务器（Tomcat）内部工作</p> 
  <ul><li>Tomcat中有一个work目录</li><li>在IDEA中使用Tomcat，会在IDEA的Tomcat中生成一个work目录</li></ul> </li></ul> 
<p><img src="https://images2.imgbox.com/7d/e9/TawfJ511_o.png" alt="在这里插入图片描述"></p> 
<ul><li> <p><strong>发现页面转变成了Java程序（有些页面没有生成，那是因为还没有进行访问，一旦访问了这个页面，那就会生成对应的java程序）</strong></p> <p><img src="https://images2.imgbox.com/60/33/RcQklO1V_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>浏览器像服务器发送请求，不管访问什么资源，其实都是在访问Servlet</strong></p> </li><li> <p>JSP最终也会被转换成为一个Java类</p> </li><li> <p>分析源码：</p> <p><img src="https://images2.imgbox.com/6c/dd/z2Aey95y_o.png" alt="在这里插入图片描述"></p> <p>这里解析成的Java类继承着"org.apache.jasper.runtime.HttpJspBase"这个类，然而找到这个对应的类的源码查看会发现这个类也继承者"HttpServlet"</p> <p><img src="https://images2.imgbox.com/d8/de/C0EIUGaM_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>所以说JSP本质上就是一个Servlet</strong></p> </li><li> <p>对比jsp页面和转变后的java程序：</p> <p><img src="https://images2.imgbox.com/b9/8a/q7xq7wPk_o.png" alt="在这里插入图片描述"></p> <p>不难发现，我们写的jsp的页面在转变后的java程序都变成了手动的输出拼接字符串</p> </li><li> <p>查看转变java程序后的文件：</p> <pre><code class="prism language-java">  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">_jspInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">//初始化</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">_jspDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">//销毁</span>
  <span class="token punctuation">}</span>

	<span class="token comment">//JSPService</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">_jspService</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span>HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span>HttpServletResponse</span> response<span class="token punctuation">)</span>
      <span class="token keyword">throws</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>IOException</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span>ServletException</span> <span class="token punctuation">{<!-- --></span>
</code></pre> 
  <ol><li> <p>判断请求</p> <pre><code class="prism language-java">  <span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span> _jspx_method <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">"GET"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>_jspx_method<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">"POST"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>_jspx_method<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">"HEAD"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>_jspx_method<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span>DispatcherType</span><span class="token punctuation">.</span>ERROR<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getDispatcherType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      response<span class="token punctuation">.</span><span class="token function">sendError</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">.</span>SC_METHOD_NOT_ALLOWED<span class="token punctuation">,</span> <span class="token string">"JSP 只允许 GET、POST 或 HEAD。Jasper 还允许 OPTIONS"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> </li><li> <p>内置一些对象</p> <pre><code class="prism language-java"><span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span></span>PageContext</span> pageContext<span class="token punctuation">;</span>	<span class="token comment">//页面上下文</span>
<span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span>HttpSession</span> session <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>		<span class="token comment">//session</span>
<span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span>ServletContext</span> application<span class="token punctuation">;</span>		<span class="token comment">//application(这个就是之前的ServletContext)</span>
<span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span>ServletConfig</span> config<span class="token punctuation">;</span>			<span class="token comment">//config</span>
<span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span></span>JspWriter</span> out <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>				<span class="token comment">//out</span>
<span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Object</span> page <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>					<span class="token comment">//page(指当前页面)</span>

<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
<span class="token comment">//再加上方法中传递的参数对象</span>
<span class="token class-name">HttpServletRequest</span> request							<span class="token comment">//请求</span>
<span class="token class-name"><span class="token namespace">http<span class="token punctuation">.</span></span>HttpServletResponse</span> response					<span class="token comment">//响应</span>
</code></pre> </li><li> <p>输出页面前增加的代码</p> <pre><code class="prism language-java">response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//设置响应的页面类型</span>
pageContext <span class="token operator">=</span> _jspxFactory<span class="token punctuation">.</span><span class="token function">getPageContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span>
                                          <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">8192</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
_jspx_page_context <span class="token operator">=</span> pageContext<span class="token punctuation">;</span>
application <span class="token operator">=</span> pageContext<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
config <span class="token operator">=</span> pageContext<span class="token punctuation">.</span><span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
session <span class="token operator">=</span> pageContext<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out <span class="token operator">=</span> pageContext<span class="token punctuation">.</span><span class="token function">getOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
_jspx_out <span class="token operator">=</span> out<span class="token punctuation">;</span>
</code></pre> </li><li> <p>以上的这些对象，可以在JSP页面中直接使用</p> <p>举例：</p> <pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF-8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> <span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>html<span class="token punctuation">&gt;</span></span>
<span class="token generics"><span class="token punctuation">&lt;</span>head<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>title<span class="token punctuation">&gt;</span></span><span class="token class-name">Title</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>body<span class="token punctuation">&gt;</span></span>
$<span class="token punctuation">{<!-- --></span>pageContext<span class="token punctuation">}</span>
$<span class="token punctuation">{<!-- --></span>sessionScope<span class="token punctuation">}</span>
$<span class="token punctuation">{<!-- --></span>requestScope<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">%</span>
    out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"ABC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>

</code></pre> </li><li> <p>画图解释JSP为什么是Servlet</p> <p><img src="https://images2.imgbox.com/d9/b0/Yo0CYdCV_o.png" alt="在这里插入图片描述"></p> <p>在JSP页面中：(如下图)</p> <p>只要是Java代码就会原封不动的输出；</p> <p>如果是HTML代码，就会被转换为这样的格式输出到前端</p> <pre><code class="prism language-java">out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;html&gt;\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <p><img src="https://images2.imgbox.com/43/6c/7RJo1jGh_o.png" alt="在这里插入图片描述"></p> </li></ol> </li></ul> 
<h5><a id="3JSP_1128"></a>3.JSP基础语法</h5> 
<p>任何语言都有自己的语法。JSP作为Java技术的一种应用，它拥有一些自己扩充的语法， Java所有语法都支持。</p> 
<p><strong>JSP表达式</strong></p> 
<pre><code class="prism language-jsp">&lt;%--JSP表达式
作用：用来将程序的输出，输出到客户端
&lt;%=变量 或者 表达式%&gt;
--%&gt;
&lt;%= new java.util.Date()%&gt;
</code></pre> 
<p><strong>JSP脚本片段</strong></p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span>JSP脚本片段<span class="token operator">--</span><span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">%</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//为什么这里可以直接用out，这个在JSP转成java程序的时候就已经内置了，所以可以直接使用</span>
    out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"&lt;h1&gt;sum="</span> <span class="token operator">+</span> sum <span class="token operator">+</span> <span class="token string">"&lt;/h1&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">%</span><span class="token operator">&gt;</span>
</code></pre> 
<p><strong>脚本片段的再实现</strong></p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>
    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>p<span class="token punctuation">&gt;</span></span>这是一个JSP文档<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">%</span>
    <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">%</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span>在代码里嵌入HTML元素<span class="token operator">--</span><span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">%</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token operator">%</span><span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>h1<span class="token punctuation">&gt;</span></span><span class="token class-name">Hello</span><span class="token punctuation">,</span><span class="token class-name">Word</span> <span class="token operator">&lt;</span><span class="token operator">%=</span>i<span class="token operator">%</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">%</span>
    <span class="token punctuation">}</span>
<span class="token operator">%</span><span class="token operator">&gt;</span>
</code></pre> 
<p><strong>JSP声明(这样声明的变量不作用域"_jspService"，这个方法之中。)</strong></p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">!</span>
    <span class="token keyword">static</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Loading Servlet"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> glvar <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"进入了方法test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">%</span><span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9c/56/lRU2Sazl_o.png" alt="在这里插入图片描述"></p> 
<p><strong>jsp声明：会被编译到JSP生成的Java类中。其他的，就会被生成到_jspService方法中。</strong></p> 
<p>注释：JSP的注释，不会在客户端显示，而HTML的会显示。</p> 
<p>JSP：&lt;%–JSP注释–%&gt;</p> 
<p>HTML： 
 </p> 
<h5><a id="4JSP_1206"></a>4.JSP指令</h5> 
<p>定制错误页面举例：(可以用指令配置，也可以在web.xml中进行标签配置)</p> 
<pre><code class="prism language-jsp">&lt;%--定制错误页面--%&gt;
&lt;%--errorPage=""地址为错误页面的路径--%&gt;
&lt;%@page errorPage="" %&gt;
</code></pre> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!--location表示跳转到对应错误页面的地址路径，"/" 表示当前项目--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-code</span><span class="token punctuation">&gt;</span></span>404<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-code</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-code</span><span class="token punctuation">&gt;</span></span>500<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-code</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-jsp">&lt;%--这种用户页面头部，和尾部的嵌入--%&gt;
&lt;%@include file="common/header.jsp" %&gt;
&lt;%--还有一个类似的作用的标签是：--%&gt;
&lt;jsp:include page="/common/header.jsp"&gt;
</code></pre> 
<p>建议使用&lt;jsp:include page=“”&gt;这种的，因为通过查看转换的java程序源码，上面的那种引用实际上解析的时候会将页面合二为一。这样造成的后果就是，假如我在引用的头部页面定义了一个变量，然后我在当前页面也定义了一个相同的变量，编译的时候就会报错。因为定义了两个一样的变量。具体可以查看生成的java类。但是建议使用的那个标签就不会出现类似问题。</p> 
<h5><a id="59_1239"></a>5.9大内置对象</h5> 
<p><strong>JSP页面在第一次访问的时候，容器会被转变成一个java类，然后被编译成一个class文件，自动生成的九个内置对象</strong></p> 
<ul><li>pageContext——存储数据</li><li>Request——存储数据</li><li>Response</li><li>Session——存储数据</li><li>Application【ServletContext】——存储数据</li><li>config【ServletConfig】</li><li>out</li><li>page</li><li>Exception</li></ul> 
<pre><code class="prism language-jsp">&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;%--内置对象--%&gt;
&lt;%
    //（新建一个页面，在另一个页面中不能取到“name1”的值）
    pageContext.setAttribute("name1", "名字1");//保存的数据只在一个页面中有效
    //（新建一个页面，在另一个页面中不能取到“name2”的值）
    request.setAttribute("name2", "名字2");//保存的数据只在一次请求中有效，如果请求转发会携带这个数据
    //（新建一个页面，在另一个页面中能取到“name3”的值）
    session.setAttribute("name3", "名字3");//保存的数据只在一次会话中有效，从打开浏览器到关闭浏览器
    //（新建一个页面，在另一个页面中能取到“name4”的值）
    application.setAttribute("name4", "名字4");//保存的数据在服务器中有效，从打开服务器到关闭服务器
%&gt;
&lt;%
    //从pageContext取出，通过寻找的方式起来。这里不使用对应的get方法来取，可以使用对应的get来取。例如：
    //pageContext.getAttribute("name1");
    //request.getAttribute("name2");
    //从底层到高层（作用域）：page——&gt;request——&gt;session——&gt;application（如果没找到就去上层找，一直到找不到则输出找不到）
    //类似JVM双亲委派机制
    String name1 = (String) pageContext.findAttribute("name1");
    String name2 = (String) pageContext.findAttribute("name2");
    String name3 = (String) pageContext.findAttribute("name3");
    String name4 = (String) pageContext.findAttribute("name4");
    String name5 = (String) pageContext.findAttribute("name5");//不存在
%&gt;

&lt;%--使用EL表达式输出
就等同于&lt;%=%&gt;这种形式
这里说明一下：在name5没有的情况下，使用EL表达式会自动过滤掉不输出，
使用&lt;%=%&gt;这种方式则会输出null
--%&gt;
&lt;h2&gt;取出的值为：&lt;/h2&gt;
&lt;h3&gt;${name1}&lt;/h3&gt;
&lt;h3&gt;${name2}&lt;/h3&gt;
&lt;h3&gt;${name3}&lt;/h3&gt;
&lt;h3&gt;${name4}&lt;/h3&gt;
&lt;h3&gt;${name5}&lt;/h3&gt;
&lt;%--null--%&gt;
&lt;h3&gt;
    &lt;%=name5%&gt;
&lt;/h3&gt;


&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p><strong>通过源码分析作用域的设置：</strong></p> 
<p>首先使用pageContext.setAttribute设置数据的时候，看到是有两个实现的方法的。查看截图中的方法：</p> 
<p><img src="https://images2.imgbox.com/d3/ec/n9WXvGii_o.png" alt="在这里插入图片描述"></p> 
<p>找到对应方法的源码分析：发现在传递的第三个参数中存在的选择结构的判断。分别是如果是1、2、3、4的情况给设置对应的作用域。</p> 
<p><img src="https://images2.imgbox.com/84/70/2MkQ8RtC_o.png" alt="在这里插入图片描述"></p> 
<p>查看PageContext类中定义的常量，1、2、3、4分别对应着的作用域的变量。</p> 
<p><img src="https://images2.imgbox.com/2d/2e/kRyi4YXn_o.png" alt="在这里插入图片描述"></p> 
<p><strong>所以得出以下的结论：</strong></p> 
<pre><code class="prism language-java">    <span class="token comment">/*置值的时候，其实是可以设置作用域的，比如说：*/</span>
    <span class="token comment">/*不建议这种用法*/</span>
    pageContext<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token class-name">PageContext</span><span class="token punctuation">.</span>SESSION_SCOPE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//这样设置的作用域其实就等同于</span>
    session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>页面转发的方式：</p> 
<pre><code class="prism language-java"><span class="token comment">//在页面的转发</span>
pageContext<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token string">"/index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//在servlet中的方法</span>
request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>举例内置对象的应用场景：</p> 
<ul><li>request：客户端向服务器发送请求，产生的数据，用户看完就没用了，比如：新闻，用户看完没用的；</li><li>session：客户端向服务器发送请求，产生的数据，用户用完一会还有用，比如:购物车;</li><li>application：客户端向服务器发送请求，产生的数据，一个用户用完了，其他用户还可能使用，比如：聊天数据。</li></ul> 
<h5><a id="6JSPJSTLEL_1347"></a>6.JSP标签、JSTL标签、EL表达式.</h5> 
<p><strong>EL表达式：${}</strong></p> 
<ul><li>获取数据</li><li>执行运算</li><li>获取Web开发的常用对象</li><li><s>调用Java方法</s>（使用较少）</li></ul> 
<p><strong>JSP标签：</strong></p> 
<pre><code class="prism language-jsp">&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;%--之前已经见过的一种--%&gt;
&lt;jsp:include page=""&gt;&lt;/jsp:include&gt;

&lt;%--
这个请求转发并且携带参数就类似于：
localhost:8080/jsptag.jsp?name=wong&amp;age=20
--%&gt;
&lt;jsp:forward page="index.jsp"&gt;
    &lt;jsp:param name="name" value="wong"/&gt;
    &lt;jsp:param name="age" value="20"/&gt;
&lt;/jsp:forward&gt;

&lt;%--
在对应页面的取值方式
由于这使用EL表达式取request的时候，并取不到对象，只能取到这个作用域一样的东西：
${requestScope}
所以使用JSP表达式
--%&gt;
&lt;%=request.getAttribute("name")%&gt;
&lt;%=request.getAttribute("age")%&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p><strong>JSTL表达式：</strong></p> 
<p>JSTL标签库的使用就是为了弥补HTML标签的不足，它自定义许多标签，可以供我们使用，标签的功能和ava代码一样。</p> 
<p>使用对应的标签，需要导入对应的标签库。</p> 
<ul><li> <p>格式化标签</p> </li><li> <p>SQL标签</p> </li><li> <p>XML标签</p> </li><li> <p>核心标签</p> </li></ul> 
<p>核心标签使用举例：</p> 
<pre><code class="prism language-jsp">&lt;%@ page import="java.util.ArrayList" %&gt;
&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;%--引入jstl核心标签库，才能使用jstl标签-core--%&gt;
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;测试&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;%--action="jsptag.jsp"请求由当前页面来处理--%&gt;
&lt;form action="jsptag.jsp" method="get"&gt;
    &lt;%--
    EL表达式获取表单中的数据
    ${param.参数名}
    --%&gt;
    &lt;input type="text" name="username" value="${param.username}"&gt;
    &lt;input type="submit" value="登录"&gt;
&lt;/form&gt;
&lt;%--判断如果提交的用户名是管理员，则登录成功--%&gt;
&lt;%--
之前使用Java判断的逻辑是：
&lt;%
    if (request.getParameter("username").equals("admin")) {
        out.print("登录成功");
    }
%&gt;
--%&gt;
&lt;c:if test="${param.username == 'admin'}" var="isAdmin"&gt;
    &lt;c:out value="管理员欢迎您"&gt;&lt;/c:out&gt;
&lt;/c:if&gt;
&lt;c:out value="${isAdmin}"&gt;&lt;/c:out&gt;


&lt;%--定义一个变量score，值为85--%&gt;
&lt;c:set var="score" value="85"&gt;&lt;/c:set&gt;

&lt;c:choose&gt;
    &lt;c:when test="${score&gt;=90}"&gt;
        你的成绩为优秀
    &lt;/c:when&gt;
    &lt;c:when test="${score&gt;=80}"&gt;
        你的成绩为一般
    &lt;/c:when&gt;
    &lt;c:when test="${score&gt;=70}"&gt;
        你的成绩为良好
    &lt;/c:when&gt;
    &lt;c:when test="${score&lt;=60}"&gt;
        你的成绩为差
    &lt;/c:when&gt;
&lt;/c:choose&gt;


&lt;%
    //新建List，可以不给下标。如果给下标，一定要从 0 开始，不然就会报错。
    ArrayList&lt;String&gt; people = new ArrayList&lt;&gt;();
    people.add(0, "张三");
    people.add(1, "李四");
    people.add(2, "王五");
    people.add(3, "赵六");
    request.setAttribute("list", people);
%&gt;

&lt;%--
var 每一次变量出来的变量
items 要遍历的对象
begin 哪里开始
end 哪里结束
step 步长
--%&gt;
&lt;c:forEach var="people" items="${list}"&gt;
    &lt;c:out value="${people}"&gt;&lt;/c:out&gt;
&lt;/c:forEach&gt;
&lt;%--就类似于这种的--%&gt;
&lt;%
    for (String person : people) {

    }
%&gt;
&lt;c:forEach var="people" items="${list}" begin="1" end="3" step="2"&gt;
    &lt;c:out value="${people}"&gt;&lt;/c:out&gt;
&lt;/c:forEach&gt;
&lt;%--就类似于这种的：--%&gt;
&lt;%
    for (int i = 0; i &lt; people.size(); i += 2) {

    }
%&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<h4><a id="JavaBean_1495"></a>JavaBean</h4> 
<p>JavaBean有特定的写法：</p> 
<ul><li>必须要有一个无参构造（手动定义有参构造方法之后，无参构造方法就没了，需要手动显式的把无参构造方法加上）</li><li>属性必须私有化</li><li>必须有对应的get/set方法；</li></ul> 
<p>一般用来和数据库的字段做映射 ORM</p> 
<p>ORM：对象关系映射</p> 
<ul><li>表——&gt;类</li><li>字段——&gt;属性</li><li>行记录——&gt;对象</li></ul> 
<pre><code class="prism language-jsp">&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;%
    /*下面Jsp中使用javaBean的用法，在Java可理解为这样；*/
    People people = new People();
    people.setId();
    people.getId
%&gt;
&lt;%--class对应javaweb中的实体--%&gt;
&lt;jsp:useBean id="pelple" class="com.wang.." scope="page"&gt;&lt;/jsp:useBean&gt;
&lt;jsp:setProperty name="pelple" property="id" value="1"&gt;&lt;/jsp:setProperty&gt;
&lt;jsp:setProperty name="pelple" property="name" value="欢欢"&gt;&lt;/jsp:setProperty&gt;
&lt;jsp:setProperty name="pelple" property="age" value="20"&gt;&lt;/jsp:setProperty&gt;
&lt;%--
也等同于这种写法：
&lt;%=people.getId%&gt;
&lt;%=people.getName%&gt;
&lt;%=people.getAge%&gt;
--%&gt;
ID:
&lt;jsp:getProperty name="pelple" property="id"/&gt;
姓名：
&lt;jsp:getProperty name="pelple" property="name"/&gt;
年龄：
&lt;jsp:getProperty name="pelple" property="age"/&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<h4><a id="MVC_1545"></a>MVC三层架构</h4> 
<p>什么是MVC：Model View Controller 模型、视图、控制器</p> 
<h5><a id="1_1549"></a>1.较早之前的操作模式：</h5> 
<p><img src="https://images2.imgbox.com/bb/36/x4RHz38R_o.png" alt="在这里插入图片描述"></p> 
<p>用户直接访问控制层，控制层就可以直接操作数据库；</p> 
<pre><code class="prism language-java"><span class="token class-name">Servlet</span><span class="token operator">--</span>CRUD<span class="token operator">--</span>数据库
弊端：程序臃肿，不利于维护。
<span class="token class-name">Servlet</span>的代码中：处理请求、响应、视图跳转、处理JDBC、处理业务代码、处理逻辑代码
    
在架构的思想中有一句话：没有什么是加一层解决不了的。

所以加入了一层JDBC

调用JDBC来实现对数据库的操作    
</code></pre> 
<h5><a id="2MVC___1568"></a>2.MVC 三层架构</h5> 
<p><img src="https://images2.imgbox.com/73/9b/ZThQLfP7_o.png" alt="在这里插入图片描述"></p> 
<p>Model</p> 
<ul><li>业务处理：业务逻辑（Service）</li><li>数据持久层：CRUD（Dao）</li></ul> 
<p>View</p> 
<ul><li>展示数据</li><li>提供连接发起Servlet请求（发起请求的操作：a标签、form表单、img…）</li></ul> 
<p>Controller(Servlet)</p> 
<ul><li> <p>接受用户的请求：（req：请求参数、Session信息…）</p> </li><li> <p>交给业务层处理对应的代码</p> </li><li> <p>控制视图的跳转</p> <pre><code class="prism language-java">登录——<span class="token operator">&gt;</span>接受用户的登录请求——<span class="token operator">&gt;</span>处理用户的请求（获取用户登录的参数username、password）——<span class="token operator">&gt;</span>交个业务层处理登录业务（判断用户名密码是否正确<span class="token operator">-</span>还有事务处理等）——<span class="token operator">&gt;</span><span class="token class-name">Dao</span>层查询用户名和密码是否正确——<span class="token operator">&gt;</span>数据库
</code></pre> </li></ul> 
<h4><a id="Filter__1595"></a>Filter 过滤器</h4> 
<p>Filter：用来过滤网站的数据；</p> 
<ul><li>中文乱码</li><li>登录验证</li><li>…</li></ul> 
<p><img src="https://images2.imgbox.com/51/55/2JH5sJ58_o.png" alt="在这里插入图片描述"></p> 
<p>之前处理乱码问题，我们都是在Servlet中设置请求和响应的编码格式，这在过滤器中可以进行实现。又比如我们在网页中进行骂人的信息，会自动变成**等。</p> 
<p><strong>Filter开发步骤：</strong></p> 
<ol><li> <p>导入对应的包</p> <p><img src="https://images2.imgbox.com/3e/36/4USiHWjZ_o.png" alt="在这里插入图片描述"></p> </li><li> <p>实现Filter接口，重写对应的方法</p> <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wang<span class="token punctuation">.</span>filter</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CharacterEncodingFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//初始化：web服务器启动，就已经初始化了，随时等待过滤对象出现。</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"CharacterEncodingFilter初始化"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//Chain：链</span>
       <span class="token comment">/*
       1.过滤器中的所有代码，在过滤特定请求的时候都会执行（每请求一次都会执行这个过滤器）
       2.必须要让过滤器继续通行，加上下面这句话就可以了。
        filterChain.doFilter(servletRequest, servletResponse);
        因为可能还有多个过滤器，所以需要
        */</span>
        servletRequest<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        servletResponse<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        servletResponse<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"CharacterEncodingFilter执行前。。。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//让请求继续走，如果不写，程序到这里就被拦截停止。</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span> servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"CharacterEncodingFilter执行后。。。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//销毁：web服务器关闭的时候，过滤器会销毁</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"CharacterEncodingFilter销毁"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>在web.xml中配置filter</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>com.wang.filter.CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--只要是/servlet的任何请求，会经过这个过滤器--&gt;</span>
    <span class="token comment">&lt;!--如果配置成/*则是整个网站的访问请求都需要过滤--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/servlet/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li></ol> 
<h4><a id="_1671"></a>监听器</h4> 
<p>实现一个监听器的接口（有很多种监听的类型。例如：键盘回车监听…等）</p> 
<ol><li> <p>编写一个监听器</p> <p>实现监听器的接口</p> <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wang<span class="token punctuation">.</span>listener</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletContext</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSessionEvent</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSessionListener</span><span class="token punctuation">;</span>

<span class="token comment">//统计网站在线人数：（实际就是统计Session）</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> listenerTest <span class="token keyword">implements</span> <span class="token class-name">HttpSessionListener</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token comment">//创建session监听</span>
    <span class="token comment">//一旦创建Session就会触发一次这个事件</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionCreated</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> se<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> se<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>se<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> servletContext<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> count <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        servletContext<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token comment">//销毁Session监听</span>
    <span class="token comment">//一旦销毁Session就会触发一次这个事件</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionDestroyed</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> se<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> se<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> servletContext<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> count <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        servletContext<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>web.xml中注册监听器</p> <pre><code class="prism language-xml"><span class="token comment">&lt;!--注册监听器--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">&gt;</span></span>com.wang.listener.listenerTest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li><li> <p>看情况是否使用</p> <p>这里放入当前手写例子中查看页面</p> <pre><code class="prism language-jsp">&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;当前在线人数：&lt;span&gt;&lt;%=this.getServletConfig().getServletContext().getAttribute("user")%&gt;&lt;/span&gt;&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> </li></ol> 
<h4><a id="JDBC_1746"></a>JDBC</h4> 
<p>什么是JDBC：Java连接数据库</p> 
<p><img src="https://images2.imgbox.com/0e/af/pXVUKjt8_o.png" alt="在这里插入图片描述"></p> 
<p>需要jar包的支持：</p> 
<ul><li>mysql-conneter-java…（连接驱动）</li></ul> 
<p><strong>JDBC固定步骤：</strong></p> 
<ol><li>加载驱动</li><li>连接数据库</li><li>向数据库发发送SQL的对象Statement：CRUD</li><li>编写SQL（根据业务类型，不同的SQL）</li><li>执行SQL</li><li>关闭连接</li></ol> 
<p><img src="https://images2.imgbox.com/85/9f/cpcBEnz3_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/5f/13/ue0Qazcn_o.png" alt="在这里插入图片描述"></p> 
<p>预编译SQL：</p> 
<p><img src="https://images2.imgbox.com/c9/f1/ec0pCDsb_o.png" alt="在这里插入图片描述"></p> 
<p><strong>事务</strong></p> 
<p>要么都成功，要么都失败。</p> 
<p>ACID原则：保证数据的安全</p> 
<pre><code class="prism language-java">开始事务
事务提交
事务回滚
关闭事务
</code></pre> 
<p><img src="https://images2.imgbox.com/6f/71/D5PqHxyo_o.png" alt="在这里插入图片描述"></p> 
<p><strong>Junit单元测试</strong></p> 
<p>依赖</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>简单使用：</p> 
<p>@Test注解只有在方法上有效，只要加了这个注解的方法，就可以直接运行。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/101471acebafde7cd27baf0f3a4f64e5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">学成在线项目（个人精简升级）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/58a2855eb78bd4ec04828b7b9e17141e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android 去除广告</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>