<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>图像相似度算法--SIFT算法详解 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="图像相似度算法--SIFT算法详解" />
<meta property="og:description" content="尺度不变特征变换匹配算法详解
Scale Invariant Feature Transform(SIFT)
Just For Fun zdd zddmail@gmail.com or (zddhub@gmail.com) 对于初学者，从David G.Lowe的论文到实现，有许多鸿沟，本文帮你跨越。
如果你学习SIFI得目的是为了做检索，也许OpenSSE更适合你，欢迎使用。
1、SIFT综述 尺度不变特征转换(Scale-invariant feature transform或SIFT)是一种电脑视觉的算法用来侦测与描述影像中的局部性特征，它在空间尺度中寻找极值点，并提取出其位置、尺度、旋转不变量，此算法由 David Lowe在1999年所发表，2004年完善总结。
其应用范围包含物体辨识、机器人地图感知与导航、影像缝合、3D模型建立、手势辨识、影像追踪和动作比对。
此算法有其专利，专利拥有者为英属哥伦比亚大学。
局部影像特征的描述与侦测可以帮助辨识物体，SIFT 特征是基于物体上的一些局部外观的兴趣点而与影像的大小和旋转无关。对于光线、噪声、些微视角改变的容忍度也相当高。基于这些特性，它们是高度显著而且相对容易撷取，在母数庞大的特征数据库中，很容易辨识物体而且鲜有误认。使用 SIFT特征描述对于部分物体遮蔽的侦测率也相当高，甚至只需要3个以上的SIFT物体特征就足以计算出位置与方位。在现今的电脑硬件速度下和小型的特征数据库条件下，辨识速度可接近即时运算。SIFT特征的信息量大，适合在海量数据库中快速准确匹配。
SIFT算法的特点有：
1. SIFT特征是图像的局部特征，其对旋转、尺度缩放、亮度变化保持不变性，对视角变化、仿射变换、噪声也保持一定程度的稳定性；
2. 独特性（Distinctiveness）好，信息量丰富，适用于在海量特征数据库中进行快速、准确的匹配；
3. 多量性，即使少数的几个物体也可以产生大量的SIFT特征向量；
4. 高速性，经优化的SIFT匹配算法甚至可以达到实时的要求；
5. 可扩展性，可以很方便的与其他形式的特征向量进行联合。
SIFT算法可以解决的问题：
目标的自身状态、场景所处的环境和成像器材的成像特性等因素影响图像配准/目标识别跟踪的性能。而SIFT算法在一定程度上可解决：
1. 目标的旋转、缩放、平移（RST）
2. 图像仿射/投影变换（视点viewpoint）
3. 光照影响（illumination）
4. 目标遮挡（occlusion）
5. 杂物场景（clutter）
6. 噪声
SIFT算法的实质是在不同的尺度空间上查找关键点(特征点)，并计算出关键点的方向。SIFT所查找到的关键点是一些十分突出，不会因光照，仿射变换和噪音等因素而变化的点，如角点、边缘点、暗区的亮点及亮区的暗点等。 Lowe将SIFT算法分解为如下四步：
1. 尺度空间极值检测：搜索所有尺度上的图像位置。通过高斯微分函数来识别潜在的对于尺度和旋转不变的兴趣点。
2. 关键点定位：在每个候选的位置上，通过一个拟合精细的模型来确定位置和尺度。关键点的选择依据于它们的稳定程度。
3. 方向确定：基于图像局部的梯度方向，分配给每个关键点位置一个或多个方向。所有后面的对图像数据的操作都相对于关键点的方向、尺度和位置进行变换，从而提供对于这些变换的不变性。
4. 关键点描述：在每个关键点周围的邻域内，在选定的尺度上测量图像局部的梯度。这些梯度被变换成一种表示，这种表示允许比较大的局部形状的变形和光照变化。
本文沿着Lowe的步骤，参考Rob Hess及Andrea Vedaldi源码，详解SIFT算法的实现过程。
2、高斯模糊 SIFT算法是在不同的尺度空间上查找关键点，而尺度空间的获取需要使用高斯模糊来实现，Lindeberg等人已证明高斯卷积核是实现尺度变换的唯一变换核，并且是唯一的线性核。本节先介绍高斯模糊算法。
2.1二维高斯函数 高斯模糊是一种图像滤波器，它使用正态分布(高斯函数)计算模糊模板，并使用该模板与原图像做卷积运算，达到模糊图像的目的。
N维空间正态分布方程为：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/d74b194ed9326c9e89b1d112582e4cdb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-10-08T18:37:36+08:00" />
<meta property="article:modified_time" content="2014-10-08T18:37:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">图像相似度算法--SIFT算法详解</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><span style="font-size:18px">尺度不变特征变换匹配算法详解<br> Scale Invariant Feature Transform(SIFT)<br> Just For Fun</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t2" style="color:rgb(202,0,0)"></a>zdd  <a target="_blank" href="mailto:zddmail@gmail.com" rel="nofollow noopener noreferrer" style="color:rgb(202,0,0); text-decoration:none">zddmail@gmail.com</a> or (zddhub@gmail.com)</h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 对于初学者，从<span style="font-family:'Times New Roman'">David G.Lowe</span><span style="font-family:宋体">的论文到实现，有许多鸿沟，本文帮你跨越。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <span style="font-family:宋体">如果你学习SIFI得目的是为了做检索，也许<a target="_blank" href="http://opensse.com/" rel="nofollow noopener noreferrer" style="color:rgb(202,0,0); text-decoration:none"><strong><span style="font-size:18px">OpenSSE</span></strong></a>更适合你，欢迎使用。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t3" style="color:rgb(202,0,0)"></a>1<span style="font-family:宋体">、</span><span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">综述</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 尺度不变特征转换<span style="font-family:'Times New Roman'">(Scale-invariant feature transform</span><span style="font-family:宋体">或</span><span style="font-family:'Times New Roman'">SIFT)</span><span style="font-family:宋体">是一种电脑视觉的算法用来侦测与描述影像中的局部性特征，它在空间尺度中寻找极值点，并提取出其位置、尺度、旋转不变量，此算法由 </span><span style="font-family:'Times New Roman'">David Lowe</span><span style="font-family:宋体">在</span><span style="font-family:'Times New Roman'">1999</span><span style="font-family:宋体">年所发表，</span><span style="font-family:'Times New Roman'">2004</span><span style="font-family:宋体">年完善总结。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 其应用范围包含物体辨识、机器人地图感知与导航、影像缝合、<span style="font-family:'Times New Roman'">3D</span><span style="font-family:宋体">模型建立、手势辨识、影像追踪和动作比对。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 此算法有其专利，专利拥有者为英属哥伦比亚大学。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 局部影像特征的描述与侦测可以帮助辨识物体，<span style="font-family:'Times New Roman'">SIFT </span><span style="font-family:宋体">特征是基于物体上的一些局部外观的兴趣点而与影像的大小和旋转无关。对于光线、噪声、些微视角改变的容忍度也相当高。基于这些特性，它们是高度显著而且相对容易撷取，在母数庞大的特征数据库中，很容易辨识物体而且鲜有误认。使用 </span><span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">特征描述对于部分物体遮蔽的侦测率也相当高，甚至只需要</span><span style="font-family:'Times New Roman'">3</span><span style="font-family:宋体">个以上的</span><span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">物体特征就足以计算出位置与方位。在现今的电脑硬件速度下和小型的特征数据库条件下，辨识速度可接近即时运算。</span><span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">特征的信息量大，适合在海量数据库中快速准确匹配。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> SIFT<span style="font-family:宋体">算法的特点有：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 1. SIFT<span style="font-family:宋体">特征是图像的局部特征，其对旋转、尺度缩放、亮度变化保持不变性，对视角变化、仿射变换、噪声也保持一定程度的稳定性；</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 2. 独特性（<span style="font-family:'Times New Roman'">Distinctiveness</span><span style="font-family:宋体">）好，信息量丰富，适用于在海量特征数据库中进行快速、准确的匹配；</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 3. 多量性，即使少数的几个物体也可以产生大量的<span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">特征向量；</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 4. 高速性，经优化的<span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">匹配算法甚至可以达到实时的要求；</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 5. 可扩展性，可以很方便的与其他形式的特征向量进行联合。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> SIFT<span style="font-family:宋体">算法可以解决的问题：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 目标的自身状态、场景所处的环境和成像器材的成像特性等因素影响图像配准<span style="font-family:'Times New Roman'">/</span><span style="font-family:宋体">目标识别跟踪的性能。而</span><span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">算法在一定程度上可解决：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 1. <span style="font-family:宋体">目标的旋转、缩放、平移（</span><span style="font-family:'Times New Roman'">RST</span><span style="font-family:宋体">）</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 2. <span style="font-family:宋体">图像仿射</span><span style="font-family:'Times New Roman'">/</span><span style="font-family:宋体">投影变换（视点</span><span style="font-family:'Times New Roman'">viewpoint</span><span style="font-family:宋体">）</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 3. <span style="font-family:宋体">光照影响（</span><span style="font-family:'Times New Roman'">illumination</span><span style="font-family:宋体">）</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 4. <span style="font-family:宋体">目标遮挡（</span><span style="font-family:'Times New Roman'">occlusion</span><span style="font-family:宋体">）</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 5. <span style="font-family:宋体">杂物场景（</span><span style="font-family:'Times New Roman'">clutter</span><span style="font-family:宋体">）</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 6. <span style="font-family:宋体">噪声</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> SIFT<span style="font-family:宋体">算法的实质是在不同的尺度空间上查找关键点</span><span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">特征点</span><span style="font-family:'Times New Roman'">)</span><span style="font-family:宋体">，并计算出关键点的方向。</span><span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">所查找到的关键点是一些十分突出，不会因光照，仿射变换和噪音等因素而变化的点，如角点、边缘点、暗区的亮点及亮区的暗点等。 </span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> Lowe<span style="font-family:宋体">将</span><span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">算法分解为如下四步：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 1. <span style="font-family:宋体">尺度空间极值检测：搜索所有尺度上的图像位置。通过高斯微分函数来识别潜在的对于尺度和旋转不变的兴趣点。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 2. <span style="font-family:宋体">关键点定位：在每个候选的位置上，通过一个拟合精细的模型来确定位置和尺度。关键点的选择依据于它们的稳定程度。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 3. <span style="font-family:宋体">方向确定：基于图像局部的梯度方向，分配给每个关键点位置一个或多个方向。所有后面的对图像数据的操作都相对于关键点的方向、尺度和位置进行变换，从而提供对于这些变换的不变性。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 4. 关键点描述：在每个关键点周围的邻域内，在选定的尺度上测量图像局部的梯度。这些梯度被变换成一种表示，这种表示允许比较大的局部形状的变形和光照变化。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 本文沿着Lowe<span style="font-family:宋体">的步骤，参考</span>Rob Hess<span style="font-family:宋体">及</span><span style="font-family:'Times New Roman'">Andrea Vedaldi</span><span style="font-family:宋体">源码，详解</span><span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">算法的实现过程。</span></p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t4" style="color:rgb(202,0,0)"></a>2<span style="font-family:宋体">、高斯模糊</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> SIFT<span style="font-family:宋体">算法是在不同的尺度空间上查找关键点，而尺度空间的获取需要使用高斯模糊来实现，</span><span style="font-family:'Times New Roman'">Lindeberg</span><span style="font-family:宋体">等人已证明高斯卷积核是实现尺度变换的唯一变换核，并且是唯一的线性核。本节先介绍高斯模糊算法。</span></p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t5" style="color:rgb(202,0,0)"></a>2.1<span style="font-family:宋体">二维高斯函数</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 高斯模糊是一种图像滤波器，它使用正态分布<span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">高斯函数</span><span style="font-family:'Times New Roman'">)</span><span style="font-family:宋体">计算模糊模板，并使用该模板与原图像做卷积运算，达到模糊图像的目的。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> N<span style="font-family:宋体">维空间正态分布方程为：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/95/1b/bWppGSAh_o.jpg" style="border:none; max-width:100%">（<span style="font-family:'Times New Roman'">1-1</span><span style="font-family:宋体">）</span><br> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 其中，<img alt="" src="https://images2.imgbox.com/16/06/DAiqo26o_o.jpg" style="border:none; max-width:100%">是正态分布的标准差，<img alt="" src="https://images2.imgbox.com/75/b1/KvLKBE0Q_o.jpg" style="border:none; max-width:100%">值越大，图像越模糊<span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">平滑</span><span style="font-family:'Times New Roman'">)</span><span style="font-family:宋体">。</span><span style="font-family:'Times New Roman'">r</span><span style="font-family:宋体">为模糊半径，模糊半径是指模板元素到模板中心的距离。如二维模板大小为</span><span style="font-family:'Times New Roman'">m*n</span><span style="font-family:宋体">，则模板上的元素</span><span style="font-family:'Times New Roman'">(x,y)</span><span style="font-family:宋体">对应的高斯计算公式为：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/5e/cd/fS7NNc4m_o.jpg" style="border:none; max-width:100%">（<span style="font-family:'Times New Roman'">1-2</span><span style="font-family:宋体">）</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">    在二维空间中，这个公式生成的曲面的等高线是从中心开始呈正态分布的同心圆，如图2.1所示。分布不为零的像素组成的卷积矩阵与原始图像做变换。每个像素的值都是周围相邻像素值的加权平均。原始像素的值有最大的高斯分布值，所以有最大的权重，相邻像素随着距离原始像素越来越远，其权重也越来越小。这样进行模糊处理比其它的均衡模糊滤波器更高地保留了边缘效果。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<img alt="" src="https://images2.imgbox.com/d4/0e/L2LkkMjr_o.jpg" style="border:none; max-width:100%; font-family:Arial; font-size:14px; line-height:26px"> 
<span style="font-family:Arial; font-size:14px; line-height:26px"></span> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 理论上来讲，图像中每点的分布都不为零，这也就是说每个像素的计算都需要包含整幅图像。在实际应用中，在计算高斯函数的离散近似时，在大概3σ距离之外的像素都可以看作不起作用，这些像素的计算也就可以忽略。通常，图像处理程序只需要计算<img alt="" src="https://images2.imgbox.com/f0/11/aIOesZrl_o.jpg" style="border:none; max-width:100%">的矩阵就可以保证相关像素影响。</p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t6" style="color:rgb(202,0,0)"></a>2.2 <span style="font-family:宋体">图像的二维高斯模糊</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 根据σ的值，计算出高斯模板矩阵的大小(<img alt="" src="https://images2.imgbox.com/ed/80/u28lASHD_o.jpg" style="border:none; max-width:100%">)，使用公式(1-2)计算高斯模板矩阵的值，与原图像做卷积，即可获得原图像的平滑(高斯模糊)图像。为了确保模板矩阵中的元素在[0,1]之间，需将模板矩阵归一化。5*5的高斯模板如表<span style="font-family:'Times New Roman'">2.1</span><span style="font-family:宋体">所示。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/7c/89/4Adk9knc_o.jpg" style="border:none; max-width:100%"></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <br> 下图是<span style="font-family:'Times New Roman'">5*5</span><span style="font-family:宋体">的高斯模板卷积计算示意图。</span>高斯模板是中心对称的。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<img alt="" src="https://images2.imgbox.com/49/9c/kdAl7J3P_o.jpg" style="border:none; max-width:100%; font-family:Arial; font-size:14px; line-height:26px"> 
<span style="font-family:Arial; font-size:14px; line-height:26px"></span> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <span style="font-family:宋体"></span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<img alt="" src="https://images2.imgbox.com/70/56/QXjW8PDh_o.jpg" style="border:none; max-width:100%; font-family:Arial; font-size:14px; line-height:26px"> 
<span style="font-family:Arial; font-size:14px; line-height:26px"></span> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <span style="font-family:宋体"></span></p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t7" style="color:rgb(202,0,0)"></a>2.3<span style="font-family:宋体">分离高斯模糊</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 如图<span style="font-family:'Times New Roman'">2.3</span><span style="font-family:宋体">所示，使用二维的高斯模板达到了模糊图像的目的，但是会因模板矩阵的关系而造成边缘图像缺失</span><span style="font-family:'Times New Roman'">(2.3 b,c)</span><span style="font-family:宋体">，<img alt="" src="https://images2.imgbox.com/32/d0/tNdoBjOU_o.jpg" style="border:none; max-width:100%"></span>越大，缺失像素越多<span style="font-family:'Times New Roman'">,</span><span style="font-family:宋体">丢弃模板会造成黑边</span><span style="font-family:'Times New Roman'">(2.3 d)</span><span style="font-family:宋体">。更重要的是当变大时，高斯模板</span><span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">高斯核</span><span style="font-family:'Times New Roman'">)</span><span style="font-family:宋体">和卷积运算量将大幅度提高。根据高斯函数的可分离性，可对二维高斯模糊函数进行改进。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 高斯函数的可分离性是指使用二维矩阵变换得到的效果也可以通过在水平方向进行一维高斯矩阵变换加上竖直方向的一维高斯矩阵变换得到。从计算的角度来看，这是一项有用的特性，因为这样只需要<img alt="" src="https://images2.imgbox.com/5c/a0/1ftmcMpS_o.jpg" style="border:none; max-width:100%">次计算，而二维不可分的矩阵则需要<img alt="" src="https://images2.imgbox.com/52/b7/KsmsfP41_o.jpg" style="border:none; max-width:100%">次计算，其中，m,n<span style="font-family:宋体">为高斯矩阵的维数，</span><span style="font-family:'Times New Roman'">M,N</span><span style="font-family:宋体">为二维图像的维数。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 另外，两次一维的高斯卷积将消除二维高斯矩阵所产生的边缘。(关于消除边缘的论述如下图2.4所示， 对用模板矩阵超出边界的部分——虚线框，将不做卷积计算。如图2.4中x方向的第一个模板1*5，将退化成1*3的模板，只在图像之内的部分做卷积。)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<img alt="" src="https://images2.imgbox.com/2f/58/4c6cZOz6_o.jpg" style="border:none; max-width:100%; font-family:Arial; font-size:14px; line-height:26px"> 
<span style="font-family:Arial; font-size:14px; line-height:26px"></span> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <span style="font-family:宋体"></span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/d9/b8/hlQZ3VRC_o.jpg" style="border:none; max-width:100%"><br> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 附录<span style="font-family:'Times New Roman'">1</span><span style="font-family:宋体">是用</span><span style="font-family:'Times New Roman'">opencv2.2</span><span style="font-family:宋体">实现的二维高斯模糊和分离高斯模糊。表</span><span style="font-family:'Times New Roman'">2.2</span><span style="font-family:宋体">为上述两种方法和</span><span style="font-family:'Times New Roman'">opencv2.3</span><span style="font-family:宋体">开源库实现的高斯模糊程序的比较。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/ba/15/MNlFMOYy_o.jpg" style="border:none; max-width:100%"><span style="font-family:'Times New Roman'"></span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <strong><br> 3、尺度空间极值检测</strong></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 尺度空间使用高斯金字塔表示。<span style="font-family:'Times New Roman'">Tony Lindeberg</span><span style="font-family:宋体">指出尺度规范化的</span><span style="font-family:'Times New Roman'">LoG(Laplacion of Gaussian)</span><span style="font-family:宋体">算子具有真正的尺度不变性，</span><span style="font-family:'Times New Roman'">Lowe</span><span style="font-family:宋体">使用高斯差分金字塔近似</span><span style="font-family:'Times New Roman'">LoG</span><span style="font-family:宋体">算子，在尺度空间检测稳定的关键点。</span></p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t8" style="color:rgb(202,0,0)"></a>3.1 <span style="font-family:宋体">尺度空间理论</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 尺度空间<span style="font-family:'Times New Roman'">(scale space)</span><span style="font-family:宋体">思想最早是由</span><span style="font-family:'Times New Roman'">Iijima</span><span style="font-family:宋体">于</span><span style="font-family:'Times New Roman'">1962</span><span style="font-family:宋体">年提出的，后经</span><span style="font-family:'Times New Roman'">witkin</span><span style="font-family:宋体">和</span><span style="font-family:'Times New Roman'">Koenderink</span><span style="font-family:宋体">等人的推广逐渐得到关注，在计算机视觉<span style="background-color:rgb(255,150,50)">邻<span size="+0">域</span></span>使用广泛。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 尺度空间理论的基本思想是：在图像信息处理模型中引入一个被视为尺度的参数，通过连续变化尺度参数获得多尺度下的尺度空间表示序列，对这些序列进行尺度空间主轮廓的提取，并以该主轮廓作为一种特征向量，实现边缘、角点检测和不同分辨率上的特征提取等。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 尺度空间方法将传统的单尺度图像信息处理技术纳入尺度不断变化的动态分析框架中，更容易获取图像的本质特征。尺度空间中各尺度图像的模糊程度逐渐变大，能够模拟人在距离目标由近到远时目标在视网膜上的形成过程。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 尺度空间满足视觉不变性。该不变性的视觉解释如下：当我们用眼睛观察物体时，一方面当物体所处背景的光照条件变化时，视网膜感知图像的亮度水平和对比度是不同的，因此要求尺度空间算子对图像的分析不受图像的灰度水平和对比度变化的影响，即满足灰度不变性和对比度不变性。另一方面，相对于某一固定坐标系，当观察者和物体之间的相对位置变化时，视网膜所感知的图像的位置、大小、角度和形状是不同的，因此要求尺度空间算子对图像的分析和图像的位置、大小、角度以及仿射变换无关，即满足平移不变性、尺度不变性、欧几里德不变性以及仿射不变性。</p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t9" style="color:rgb(202,0,0)"></a>3.2 <span style="font-family:宋体">尺度空间的表示</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 一个图像的尺度空间，<img alt="" src="https://images2.imgbox.com/1d/89/A2fbm2ZH_o.jpg" style="border:none; max-width:100%">定义为一个变化尺度的高斯函数<img alt="" src="https://images2.imgbox.com/a2/a6/cv9cOHTz_o.jpg" style="border:none; max-width:100%">与原图像<img alt="" src="https://images2.imgbox.com/5d/35/sODIl4oD_o.jpg" style="border:none; max-width:100%">的卷积。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">   <img alt="" src="https://images2.imgbox.com/4c/7e/R0gPagdq_o.jpg" style="border:none; max-width:100%">(3-1)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 其中，*表示卷积运算，</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">   <img alt="" src="https://images2.imgbox.com/18/f5/WgXlj1eS_o.jpg" style="border:none; max-width:100%">(3-2)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 与公式<span style="font-family:'Times New Roman'">(1-2)</span><span style="font-family:宋体">相同，</span><span style="font-family:'Times New Roman'">m</span><span style="font-family:宋体">，</span><span style="font-family:'Times New Roman'">n</span><span style="font-family:宋体">表示高斯模板的维度</span><span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">由<img alt="" src="https://images2.imgbox.com/4b/0a/QZs2d94V_o.jpg" style="border:none; max-width:100%"></span>确定)<span style="font-family:宋体">。</span><span style="font-family:'Times New Roman'">(x, y)</span><span style="font-family:宋体">代表图像的像素位置。<img alt="" src="https://images2.imgbox.com/ea/43/PcEOLlSq_o.jpg" style="border:none; max-width:100%"></span>是尺度空间因子，值越小表示图像被平滑的越少，相应的尺度也就越小。大尺度对应于图像的概貌特征，小尺度对应于图像的细节特征。</p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t10" style="color:rgb(202,0,0)"></a>3.3 <span style="font-family:宋体">高斯金字塔的构建</span></h4> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t11" style="color:rgb(202,0,0)"></a><span style="font-weight:normal">尺度空间在实现时使用高斯金字塔表示，高斯金字塔的构建分为两部分：</span></h4> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t12" style="color:rgb(202,0,0)"></a><span style="font-weight:normal">1. <span style="font-family:宋体">对图像做不同尺度的高斯模糊；</span></span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 2. <span style="font-family:宋体">对图像做降采样</span><span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">隔点采样</span><span style="font-family:'Times New Roman'">)</span><span style="font-family:宋体">。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/76/0d/tV07jcNH_o.jpg" style="border:none; max-width:100%"><br> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 图像的金字塔模型是指，将原始图像不断降阶采样，得到一系列大小不一的图像，由大到小，从下到上构成的塔状模型。原图像为金子塔的第一层，每次降采样所得到的新图像为金字塔的一层<span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">每层一张图像</span><span style="font-family:'Times New Roman'">)</span><span style="font-family:宋体">，每个金字塔共</span><span style="font-family:'Times New Roman'">n</span><span style="font-family:宋体">层。金字塔的层数根据图像的原始大小和塔顶图像的大小共同决定，其计算公式如下：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/f7/e5/iFIpLVYI_o.jpg" style="border:none; max-width:100%">(3-3)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 其中<span style="font-family:'Times New Roman'">M</span><span style="font-family:宋体">，</span><span style="font-family:'Times New Roman'">N</span><span style="font-family:宋体">为原图像的大小</span><span style="font-family:'Times New Roman'">,t</span><span style="font-family:宋体">为塔顶图像的最小维数的对数值。如，对于大小为</span><span style="font-family:'Times New Roman'">512*512</span><span style="font-family:宋体">的图像，金字塔上各层图像的大小如表</span><span style="font-family:'Times New Roman'">3.1</span><span style="font-family:宋体">所示，当塔顶图像为</span><span style="font-family:'Times New Roman'">4*4</span><span style="font-family:宋体">时，</span><span style="font-family:'Times New Roman'">n=7</span><span style="font-family:宋体">，当塔顶图像为</span><span style="font-family:'Times New Roman'">2*2</span><span style="font-family:宋体">时，</span><span style="font-family:'Times New Roman'">n=8</span><span style="font-family:宋体">。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/a5/80/11awXB3q_o.jpg" style="border:none; max-width:100%"></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 为了让尺度体现其连续性，高斯金字塔在简单降采样的基础上加上了高斯滤波。如图3.1所示，将图像金字塔每层的一张图像使用不同参数做高斯模糊，使得金字塔的每层含有多张高斯模糊图像，将金字塔每层多张图像合称为一组(Octave)，金字塔每层只有一组图像，组数和金字塔层数相等，使用公式(3-3)计算，每组含有多张(也叫层Interval)图像。另外，降采样时，高斯金字塔上一组图像的初始图像(底层图像)是由前一组图像的倒数第三张图像隔点采样得到的。</p> 
<span style="font-size:14px; line-height:26px; font-family:宋体"></span> 
<span style="font-family:Arial; font-size:14px; line-height:26px"></span> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <span style="font-family:宋体"></span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 注：由于组内的多张图像按层次叠放，因此组内的多张图像也称做多层，为避免与金字塔层的概念混淆，本文以下内容中，若不特别说明是金字塔层数，层一般指组内各层图像。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 注：如3.4节所示，为了在每组中检测S个尺度的极值点，则DOG金字塔每组需S+2层图像，而DOG金字塔由高斯金字塔相邻两层相减得到，则高斯金字塔每组需S+3层图像，实际计算时S在3到5之间。取S=3时，假定高斯金字塔存储索引如下：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 第0组(即第-1组)：  0 1  2  3  4   5</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 第1组：            6 7  8  9  10 11</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 第2组：            ？</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 则第2组第一张图片根据第一组中索引为9的图片降采样得到，其它类似。  </p> 
<br style="font-family:Arial; font-size:14px; line-height:26px"> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t13" style="color:rgb(202,0,0)"></a>3.4 <span style="font-family:宋体">高斯差分金字塔</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 2002年Mikolajczyk在详细的实验比较中发现尺度归一化的高斯拉普拉斯函数<img alt="" src="https://images2.imgbox.com/e3/ec/OUKPNqku_o.jpg" style="border:none; max-width:100%">的极大值和极小值同其它的特征提取函数，例如：梯度，Hessian或Harris角特征比较，能够产生最稳定的图像特征。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 而Lindeberg早在1994<span style="font-family:宋体">年就发现高斯差分函数（</span><span style="font-family:'Times New Roman'">Difference of Gaussian </span><span style="font-family:宋体">，简称</span><span style="font-family:'Times New Roman'">DOG</span><span style="font-family:宋体">算子）与尺度归一化的高斯拉普拉斯函数<img alt="" src="https://images2.imgbox.com/05/50/pJKlcDk7_o.jpg" style="border:none; max-width:100%"></span>非常近似。其中<img alt="" src="https://images2.imgbox.com/f5/cc/KhyDeZ0O_o.jpg" style="border:none; max-width:100%">和<img alt="" src="https://images2.imgbox.com/cf/0b/StZPIkRj_o.jpg" style="border:none; max-width:100%">的关系可以从如下公式推导得到：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/a7/ac/bTSYI3sR_o.jpg" style="border:none; max-width:100%"></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 利用差分近似代替微分，则有：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">   <img alt="" src="https://images2.imgbox.com/02/c0/w7oyTO6J_o.jpg" style="border:none; max-width:100%">                 </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 因此有</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/a2/17/I8nILVUR_o.jpg" style="border:none; max-width:100%"></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 其中k-1是个常数，并不影响极值点位置的求取。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/3e/14/JdgtBtBd_o.jpg" style="border:none; max-width:100%"><br> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 如图<span style="font-family:'Times New Roman'">3.2</span><span style="font-family:宋体">所示，红色曲线表示的是高斯差分算子，而蓝色曲线表示的是高斯拉普拉斯算子。</span><span style="font-family:'Times New Roman'">Lowe</span><span style="font-family:宋体">使用更高效的高斯差分算子代替拉普拉斯算子进行极值检测，如下：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/6b/30/n2JclEFQ_o.jpg" style="border:none; max-width:100%">(3-4)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 在实际计算时，使用高斯金字塔每组中相邻上下两层图像相减，得到高斯差分图像，如图<span style="font-family:'Times New Roman'">3.3</span><span style="font-family:宋体">所示，进行极值检测。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/ae/80/JiZnBa8T_o.jpg" style="border:none; max-width:100%"><span style="font-family:宋体"></span></p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t14" style="color:rgb(202,0,0)"></a>3.5 <span style="font-family:宋体">空间极值点检测</span><span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">关键点的初步探查</span><span style="font-family:'Times New Roman'">)</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 关键点是由<span style="font-family:'Times New Roman'">DOG</span><span style="font-family:宋体">空间的局部极值点组成的，关键点的初步探查是通过同一组内各</span><span style="font-family:'Times New Roman'">DoG</span><span style="font-family:宋体">相邻两层图像之间比较完成的。为了寻找</span><span style="font-family:'Times New Roman'">DoG</span><span style="font-family:宋体">函数的极值点，每一个像素点要和它所有的相邻点比较，看其是否比它的图像域和尺度域的相邻点大或者小。如图</span><span style="font-family:'Times New Roman'">3.4</span><span style="font-family:宋体">所示，中间的检测点和它同尺度的</span><span style="font-family:'Times New Roman'">8</span><span style="font-family:宋体">个相邻点和上下相邻尺度对应的</span><span style="font-family:'Times New Roman'">9</span><span style="font-family:宋体">×</span><span style="font-family:'Times New Roman'">2</span><span style="font-family:宋体">个点共</span><span style="font-family:'Times New Roman'">26</span><span style="font-family:宋体">个点比较，以确保在尺度空间和二维图像空间都检测到极值点。 </span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/d8/ad/M5t31FFg_o.jpg" style="border:none; max-width:100%"><span style="font-family:宋体"></span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 由于要在相邻尺度进行比较，如图<span style="font-family:'Times New Roman'">3.3</span><span style="font-family:宋体">右侧每组含</span><span style="font-family:'Times New Roman'">4</span><span style="font-family:宋体">层的高斯差分金子塔，只能在中间两层中进行两个尺度的极值点检测，其它尺度则只能在不同组中进行。为了在每组中检测</span><span style="font-family:'Times New Roman'">S</span><span style="font-family:宋体">个尺度的极值点，则</span><span style="font-family:'Times New Roman'">DOG</span><span style="font-family:宋体">金字塔每组需</span><span style="font-family:'Times New Roman'">S+2</span><span style="font-family:宋体">层图像，而</span><span style="font-family:'Times New Roman'">DOG</span><span style="font-family:宋体">金字塔由高斯金字塔相邻两层相减得到，则高斯金字塔每组需</span><span style="font-family:'Times New Roman'">S+3</span><span style="font-family:宋体">层图像，实际计算时</span><span style="font-family:'Times New Roman'">S</span><span style="font-family:宋体">在</span><span style="font-family:'Times New Roman'">3</span><span style="font-family:宋体">到</span><span style="font-family:'Times New Roman'">5</span><span style="font-family:宋体">之间。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 当然这样产生的极值点并不全都是稳定的特征点，因为某些极值点响应较弱，而且<span style="font-family:'Times New Roman'">DOG</span><span style="font-family:宋体">算子会产生较强的边缘响应。</span></p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t15" style="color:rgb(202,0,0)"></a>3.6 <span style="font-family:宋体">构建尺度空间需确定的参数</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">   <img alt="" src="https://images2.imgbox.com/93/ff/lyXiNfm1_o.jpg" style="border:none; max-width:100%">—尺度空间坐标</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">     O—组(octave)<span style="font-family:宋体">数</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">     S— 组内层数</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 在上述尺度空间中，O和S，<img alt="" src="https://images2.imgbox.com/22/1d/bSJy8NYS_o.jpg" style="border:none; max-width:100%">的关系如下：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">  <img alt="" src="https://images2.imgbox.com/f9/8b/wLjAyotM_o.jpg" style="border:none; max-width:100%">(3-5)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 其中<img alt="" src="https://images2.imgbox.com/fa/bd/gXyz2ifw_o.jpg" style="border:none; max-width:100%">是基准层尺度，o为组octave<span style="font-family:宋体">的索引，</span><span style="font-family:'Times New Roman'">s</span><span style="font-family:宋体">为组内层的索引。关键点的尺度坐标<img alt="" src="https://images2.imgbox.com/50/47/3SoyUm4F_o.jpg" style="border:none; max-width:100%"></span>就是按关键点所在的组和组内的层，利用公式(3-5)<span style="font-family:宋体">计算而来。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 在最开始建立高斯金字塔时，要预先模糊输入图像来作为第<span style="font-family:'Times New Roman'">0</span><span style="font-family:宋体">个组的第</span><span style="font-family:'Times New Roman'">0</span><span style="font-family:宋体">层的图像，这时相当于丢弃了最高的空域的采样率。因此通常的做法是先将图像的尺度扩大一倍来生成第</span><span style="font-family:'Times New Roman'">-1</span><span style="font-family:宋体">组。我们假定初始的输入图像为了抗击混淆现象，已经对其进行<img alt="" src="https://images2.imgbox.com/c2/01/MecBmRxi_o.jpg" style="border:none; max-width:100%"></span>的高斯模糊，如果输入图像的尺寸用双线性插值扩大一倍，那么相当于<img alt="" src="https://images2.imgbox.com/03/bb/pCRJDRK8_o.jpg" style="border:none; max-width:100%">。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 取式<span style="font-family:'Times New Roman'">(3-4)</span><span style="font-family:宋体">中的</span><span style="font-family:'Times New Roman'">k</span><span style="font-family:宋体">为组内总层数的倒数，即</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">   <img alt="" src="https://images2.imgbox.com/8e/a2/yOdAwxgN_o.jpg" style="border:none; max-width:100%"> (3-6)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 在构建高斯金字塔时，组内每层的尺度坐标按如下公式计算：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/32/7a/ulBIW2ue_o.jpg" style="border:none; max-width:100%">(3-7)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 其中<img alt="" src="https://images2.imgbox.com/9f/27/HQZDxO48_o.jpg" style="border:none; max-width:100%">初始尺度，<span style="font-family:'Times New Roman'">lowe</span><span style="font-family:宋体">取</span><img alt="" src="https://images2.imgbox.com/0c/25/xE6MUZ1j_o.jpg" style="border:none; max-width:100%">，<span style="font-family:'Times New Roman'">s</span><span style="font-family:宋体">为组内的层索引，不同组相同层的组内尺度坐标<img alt="" src="https://images2.imgbox.com/f4/74/PFWvVNWd_o.jpg" style="border:none; max-width:100%"></span>相同。组内下一层图像是由前一层图像按<img alt="" src="https://images2.imgbox.com/77/1c/m5ICQ8CS_o.jpg" style="border:none; max-width:100%">进行高斯模糊所得。式<span style="font-family:'Times New Roman'">(3-7)</span><span style="font-family:宋体">用于一次生成组内不同尺度的高斯图像，而在计算组内某一层图像的尺度时，直接使用如下公式进行计算：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/5a/35/cjCcRBTE_o.jpg" style="border:none; max-width:100%">(3-8)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 该组内尺度在方向分配和特征描述时确定采样窗口的大小。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 由上，式<span style="font-family:'Times New Roman'">(3-4)</span><span style="font-family:宋体">可记为</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/29/ad/7jn3GtGu_o.jpg" style="border:none; max-width:100%">(3-9)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 图<span style="font-family:'Times New Roman'">3.5</span><span style="font-family:宋体">为构建</span><span style="font-family:'Times New Roman'">DOG</span><span style="font-family:宋体">金字塔的示意图，原图采用</span><span style="font-family:'Times New Roman'">128*128</span><span style="font-family:宋体">的</span><span style="font-family:'Times New Roman'">jobs</span><span style="font-family:宋体">图像，扩大一倍后构建金字塔。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/14/c3/RZBoDnfm_o.jpg" style="border:none; max-width:100%"><br> <br> <span style="font-family:宋体"></span></p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t16" style="color:rgb(202,0,0)"></a>4、关键点定位</h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 以上方法检测到的极值点是离散空间的极值点，以下通过拟合三维二次函数来精确确定关键点的位置和尺度，同时去除低对比度的关键点和不稳定的边缘响应点<span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">因为</span><span style="font-family:'Times New Roman'">DoG</span><span style="font-family:宋体">算子会产生较强的边缘响应</span><span style="font-family:'Times New Roman'">)</span><span style="font-family:宋体">，以增强匹配稳定性、提高抗噪声能力。</span></p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t17" style="color:rgb(202,0,0)"></a>4.1<span style="font-family:宋体">关键点的精确定位</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 离散空间的极值点并不是真正的极值点，图<span style="font-family:'Times New Roman'">4.1</span><span style="font-family:宋体">显示了二维函数离散空间得到的极值点与连续空间极值点的差别。利用已知的离散空间点插值得到的连续空间极值点的方法叫做子像素插值（</span><span style="font-family:'Times New Roman'">Sub-pixel Interpolation</span><span style="font-family:宋体">）。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/81/13/BY6bQdmv_o.jpg" style="border:none; max-width:100%"><span style="font-family:宋体"></span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 为了提高关键点的稳定性，需要对尺度空间<span style="font-family:'Times New Roman'">DoG</span><span style="font-family:宋体">函数进行曲线拟合。利用</span><span style="font-family:'Times New Roman'">DoG</span><span style="font-family:宋体">函数在尺度空间的</span><span style="font-family:'Times New Roman'">Taylor</span><span style="font-family:宋体">展开式</span><span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">拟合函数</span><span style="font-family:'Times New Roman'">)</span><span style="font-family:宋体">为：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/a1/82/lJA7nIjR_o.jpg" style="border:none; max-width:100%">(4-1)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 其中，<img alt="" src="https://images2.imgbox.com/be/16/bfLhiT5t_o.jpg" style="border:none; max-width:100%">。求导并让方程等于零，可以得到极值点的偏移量为：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/0e/88/OhJnHuqH_o.jpg" style="border:none; max-width:100%">(4-2)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 对应极值点，方程的值为：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/c8/65/1DNs5LWG_o.jpg" style="border:none; max-width:100%">(4-3)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 其中<span style="font-family:'Times New Roman'">,<img alt="" src="https://images2.imgbox.com/aa/8b/356oEgNq_o.jpg" style="border:none; max-width:100%"></span>代表相对插值中心的偏移量，当它在任一维度上的偏移量大于<span style="font-family:'Times New Roman'">0.5</span><span style="font-family:宋体">时（即</span><span style="font-family:'Times New Roman'">x</span><span style="font-family:宋体">或</span><span style="font-family:'Times New Roman'">y</span><span style="font-family:宋体">或<img alt="" src="https://images2.imgbox.com/df/75/NCkSnEyK_o.jpg" style="border:none; max-width:100%"></span>），意味着插值中心已经偏移到它的邻近点上，所以必须改变当前关键点的位置。同时在新的位置上反复插值直到收敛；也有可能超出所设定的迭代次数或者超出图像边界的范围，此时这样的点应该删除，在<span style="font-family:'Times New Roman'">Lowe</span><span style="font-family:宋体">中进行了</span><span style="font-family:'Times New Roman'">5</span><span style="font-family:宋体">次迭代。另外，<img alt="" src="https://images2.imgbox.com/5e/8a/jj1SCybb_o.jpg" style="border:none; max-width:100%"></span>过小的点易受噪声的干扰而变得不稳定，所以将<img alt="" src="https://images2.imgbox.com/a7/1d/GxfeyCCh_o.jpg" style="border:none; max-width:100%">小于某个经验值<span style="font-family:'Times New Roman'">(Lowe</span><span style="font-family:宋体">论文中使用</span><span style="font-family:'Times New Roman'">0.03</span><span style="font-family:宋体">，</span><span style="font-family:'Times New Roman'">Rob Hess</span><span style="font-family:宋体">等人实现时使用</span><span style="font-family:'Times New Roman'">0.04/S)</span><span style="font-family:宋体">的极值点删除。同时，在此过程中获取特征点的精确位置</span><span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">原位置加上拟合的偏移量</span><span style="font-family:'Times New Roman'">)</span><span style="font-family:宋体">以及尺度</span><span style="font-family:'Times New Roman'">(</span><img alt="" src="https://images2.imgbox.com/42/21/9TLGM50p_o.jpg" style="border:none; max-width:100%">)<span style="font-family:宋体">。</span></p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t18" style="color:rgb(202,0,0)"></a>4.2<span style="font-family:宋体">消除边缘响应</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 一个定义不好的高斯差分算子的极值在横跨边缘的地方有较大的主曲率，而在垂直边缘的方向有较小的主曲率。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> DOG<span style="font-family:宋体">算子会产生较强的边缘响应，需要剔除不稳定的边缘响应点。获取特征点处的</span><span style="font-family:'Times New Roman'">Hessian</span><span style="font-family:宋体">矩阵，主曲率通过一个</span><span style="font-family:'Times New Roman'">2x2 </span><span style="font-family:宋体">的</span><span style="font-family:'Times New Roman'">Hessian</span><span style="font-family:宋体">矩阵</span><span style="font-family:'Times New Roman'">H</span><span style="font-family:宋体">求出：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">   <img alt="" src="https://images2.imgbox.com/1a/29/Opop2Oxy_o.jpg" style="border:none; max-width:100%">(4-4)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> H的特征值α和β代表x和y方向的梯度，</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">  <img alt="" src="https://images2.imgbox.com/4a/85/vFJN8QRa_o.jpg" style="border:none; max-width:100%">(4-5)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 表示矩阵H对角线元素之和，表示矩阵H的行列式。假设是α较大的特征值，而是β较小的特征值，令<img alt="" src="https://images2.imgbox.com/6c/25/dZwclyop_o.jpg" style="border:none; max-width:100%">，则</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/ed/d3/z7OPCRQl_o.jpg" style="border:none; max-width:100%">(4-6)                </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 导数由采样点相邻差估计得到,<span style="font-family:宋体">在下一节中说明</span>。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> D的主曲率和H的特征值成正比，令为α最大特征值，β为最小的特征值，则公式<img alt="" src="https://images2.imgbox.com/5e/a7/SmOyFXMD_o.jpg" style="border:none; max-width:100%">的值在两个特征值相等时最小，随着的增大而增大。值越大，说明两个特征值的比值越大，即在某一个方向的梯度值越大，而在另一个方向的梯度值越小，而边缘恰恰就是这种情况。所以为了剔除边缘响应点，需要让该比值小于一定的阈值，因此，为了检测主曲率是否在某域值r下，只需检测</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/74/1b/bYbVuvQP_o.jpg" style="border:none; max-width:100%">(4-7)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 式<span style="font-family:'Times New Roman'">(4-7)</span><span style="font-family:宋体">成立时将关键点保留，反之剔除。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 在Lowe的文章中，取r＝10。图4.2<span style="font-family:宋体">右侧为消除边缘响应后的关键点分布图。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">   </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/79/e1/1CwLB9Gx_o.jpg" style="border:none; max-width:100%"><span style="font-family:宋体"></span></p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t19" style="color:rgb(202,0,0)"></a>4.3<span style="font-family:宋体">有限差分法求导</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 有限差分法以变量离散取值后对应的函数值来近似微分方程中独立变量的连续取值。在有限差分方法中，我们放弃了微分方程中独立变量可以取连续值的特征，而关注独立变量离散取值后对应的函数值。但是从原则上说，这种方法仍然可以达到任意满意的计算精度。因为方程的连续数值解可以通过减小独立变量离散取值的间格，或者通过离散点上的函数值插值计算来近似得到。这种方法是随着计算机的诞生和应用而发展起来的。其计算格式和程序的设计都比较直观和简单，因而，它在计算数学中使用广泛。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 有限差分法的具体操作分为两个部分：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 1. <span style="font-family:宋体">用差分代替微分方程中的微分，将连续变化的变量离散化，从而得到差分方程组的数学形式；</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 2. <span style="font-family:宋体">求解差分方程组。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 一个函数在<span style="font-family:'Times New Roman'">x</span><span style="font-family:宋体">点上的一阶和二阶微商，可以近似地用它所临近的两点上的函数值的差分来表示。如对一个单变量函数f(x)</span>，<span style="font-family:'Times New Roman'">x</span><span style="font-family:宋体">为定义在区间[a,b]</span>上的连续变量，以步长<img alt="" src="https://images2.imgbox.com/31/45/qPZ3FmwV_o.jpg" style="border:none; max-width:100%">将区间[a,b]离散化，我们会得到一系列节点，</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/93/40/0dd36tPZ_o.jpg" style="border:none; max-width:100%"></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 然后求出f(x)在这些点上的近似值。显然步长<span style="font-family:'Times New Roman'">h</span><span style="font-family:宋体">越小，近似解的精度就越好。与节点<img alt="" src="https://images2.imgbox.com/af/4e/dMqpNEyj_o.jpg" style="border:none; max-width:100%"></span>相邻的节点有<img alt="" src="https://images2.imgbox.com/0d/d1/vNOk1kgi_o.jpg" style="border:none; max-width:100%">和<img alt="" src="https://images2.imgbox.com/bc/72/PMLAvHrf_o.jpg" style="border:none; max-width:100%">，所以在节点<img alt="" src="https://images2.imgbox.com/aa/20/E0TIGUmX_o.jpg" style="border:none; max-width:100%">处可构造如下形式的差值：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">  <img alt="" src="https://images2.imgbox.com/34/8e/9K7ticTb_o.jpg" style="border:none; max-width:100%">节点的一阶向前差分</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/9c/23/Dc6HQhGN_o.jpg" style="border:none; max-width:100%">节点的一阶向后差分</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/7a/75/Efmy2Uvv_o.jpg" style="border:none; max-width:100%">节点的一阶中心差分</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 本文使用中心差分法利用泰勒展开式求解第四节所使用的导数，现做如下推导。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 函数f(x)在<img alt="" src="https://images2.imgbox.com/75/9a/TF6hA5Dz_o.jpg" style="border:none; max-width:100%">处的泰勒展开式为：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/23/0b/w301cRSZ_o.jpg" style="border:none; max-width:100%">(4-8)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 则，</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/d0/2d/d5ZMHhua_o.jpg" style="border:none; max-width:100%">(4-9)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/1c/ce/AIJowjAt_o.jpg" style="border:none; max-width:100%">(4-10)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 忽略<span style="font-family:'Times New Roman'">h</span><span style="font-family:宋体">平方之后的项，联立式</span><span style="font-family:'Times New Roman'">(4-9)</span><span style="font-family:宋体">，</span><span style="font-family:'Times New Roman'">(4-10)</span><span style="font-family:宋体">解方程组得：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/bd/b8/SCBxW1zR_o.jpg" style="border:none; max-width:100%">(4-11)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/7d/2d/VmXZh8Pb_o.jpg" style="border:none; max-width:100%"> (4-12)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 二元函数的泰勒展开式如下：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/e6/33/STfgBahZ_o.jpg" style="border:none; max-width:100%"><br> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 将<img alt="" src="https://images2.imgbox.com/da/59/oyfdYZxA_o.jpg" style="border:none; max-width:100%">展开后忽略次要项联立解方程得二维混合偏导如下：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/0a/5e/MZYd9ubq_o.jpg" style="border:none; max-width:100%">(4-13)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 综上，推导了<span style="font-family:'Times New Roman'">4.1,4.2</span><span style="font-family:宋体">遇到的所有导数计算。同理，利用多元泰勒展开式，可得任意偏导的近似差分表示。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/6b/96/41wz8HvA_o.jpg" style="border:none; max-width:100%"><span style="font-family:宋体"></span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 在图像处理中，取<span style="font-family:'Times New Roman'">h=1</span><span style="font-family:宋体">，在图</span><span style="font-family:'Times New Roman'">4.2</span><span style="font-family:宋体">所示的图像中，将像素</span><span style="font-family:'Times New Roman'">0</span><span style="font-family:宋体">的基本中点导数公式整理如下：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/84/a1/ZDrcvvZ7_o.jpg" style="border:none; max-width:100%"><br> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/b6/71/zRvMAkUN_o.jpg" style="border:none; max-width:100%"><br> </p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t20" style="color:rgb(202,0,0)"></a>4.4 <span style="font-family:宋体">三阶矩阵求逆公式</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 高阶矩阵的求逆算法主要有归一法和消元法两种，现将三阶矩阵求逆公式总结如下：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 若矩阵</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t21" style="color:rgb(202,0,0)"></a><span style="font-family:宋体"><img alt="" src="https://images2.imgbox.com/94/5f/gYNXNnBd_o.jpg" style="border:none; max-width:100%"></span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 可逆，即<img alt="" src="https://images2.imgbox.com/10/77/IrHqdUCy_o.jpg" style="border:none; max-width:100%">时，</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/81/fe/2SATueuf_o.jpg" style="border:none; max-width:100%">(4-14)</p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t22" style="color:rgb(202,0,0)"></a>5、关键点方向分配</h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 为了使描述符具有旋转不变性，需要利用图像的局部特征为给每一个关键点分配一个基准方向。使用图像梯度的方法求取局部结构的稳定方向。对于在<span style="font-family:'Times New Roman'">DOG</span><span style="font-family:宋体">金字塔中检测出的关键点点，采集其所在高斯金字塔图像3σ</span><span style="background-color:rgb(255,150,50)">邻<span size="+0">域</span></span>窗口内像素的梯度和方向分布特征。梯度的模值和方向如下：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/05/37/rgR90aMs_o.jpg" style="border:none; max-width:100%">(5-1)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> L<span style="font-family:宋体">为关键点所在的尺度空间值，按</span><span style="font-family:'Times New Roman'">Lowe</span><span style="font-family:宋体">的建议，梯度的模值m(x,y)</span>按<img alt="" src="https://images2.imgbox.com/79/70/TkkeWeiu_o.jpg" style="border:none; max-width:100%">的高斯分布加成，按尺度采样的<span style="font-family:宋体">3σ</span>原则，<span style="background-color:rgb(255,150,50)">邻</span>域窗口半径为<img alt="" src="https://images2.imgbox.com/97/8f/w0o9TQpg_o.jpg" style="border:none; max-width:100%">。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 在完成关键点的梯度计算后，使用直方图统计<span style="background-color:rgb(255,150,50)">邻</span><span size="+0">域</span>内像素的梯度和方向。梯度直方图将<span style="font-family:'Times New Roman'">0~360</span><span style="font-family:宋体">度的方向范围分为</span><span style="font-family:'Times New Roman'">36</span><span style="font-family:宋体">个柱</span><span style="font-family:'Times New Roman'">(bins)</span><span style="font-family:宋体">，其中每柱</span><span style="font-family:'Times New Roman'">10</span><span style="font-family:宋体">度。如图</span><span style="font-family:'Times New Roman'">5.1</span><span style="font-family:宋体">所示，直方图的峰值方向代表了关键点的主方向，</span><span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">为简化，图中只画了八个方向的直方图</span><span style="font-family:'Times New Roman'">)</span><span style="font-family:宋体">。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/a7/76/cZlfYyat_o.jpg" style="border:none; max-width:100%"><span style="font-family:宋体"></span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 方向直方图的峰值则代表了该特征点处邻域梯度的方向，以直方图中最大值作为该关键点的主方向。为了增强匹配的鲁棒性，只保留峰值大于主方向峰值80％的方向作为该关键点的辅方向。因此，对于同一梯度值的多个峰值的关键点位置，在相同位置和尺度将会有多个关键点被创建但方向不同。仅有15％的关键点被赋予多个方向，但可以明显的提高关键点匹配的稳定性。实际编程实现中，就是把该关键点复制成多份关键点，并将方向值分别赋给这些复制后的关键点，并且，离散的梯度方向直方图要进行插值拟合处理，来求得更精确的方向角度值，检测结果如图5.2<span style="font-family:宋体">所示</span>。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/06/31/9VYrC9TS_o.jpg" style="border:none; max-width:100%"><span style="font-family:宋体"></span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 至此，将检测出的含有位置、尺度和方向的关键点即是该图像的SIFT特征点。</p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t23" style="color:rgb(202,0,0)"></a>6、关键点特征描述</h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 通过以上步骤，对于每一个关键点，拥有三个信息：位置、尺度以及方向。接下来就是为每个关键点建立一个描述符，用一组向量将这个关键点描述出来，使其不随各种变化而改变，比如光照变化、视角变化等等。这个描述子不但包括关键点，也包含关键点周围对其有贡献的像素点，并且描述符应该有较高的独特性，以便于提高特征点正确匹配的概率。 </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> SIFT<span style="font-family:宋体">描述子是关键点<span style="background-color:rgb(255,150,50)">邻<span size="+0">域</span></span>高斯图像梯度统计结果的一种表示。通过对关键点周围图像区域分块，计算块内梯度直方图，生成具有独特性的向量，这个向量是该区域图像信息的一种抽象，具有唯一性。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> Lowe<span style="font-family:宋体">建议描述子使用在关键点尺度空间内4*4</span>的窗口中计算的<span style="font-family:'Times New Roman'">8</span><span style="font-family:宋体">个方向的梯度信息，共4*4*8=128</span>维向量表征。表示步骤如下：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 1. 确定计算描述子所需的图像区域</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 特征描述子与特征点所在的尺度有关，因此，对梯度的求取应在特征点对应的高斯图像上进行。将关键点附近的<span style="background-color:rgb(255,150,50)">邻<span size="+0">域</span></span>划分为d*d(Lowe<span style="font-family:宋体">建议</span><span style="font-family:'Times New Roman'">d=4)</span><span style="font-family:宋体">个子区域，每个子区域做为一个种子点，每个种子点有</span><span style="font-family:'Times New Roman'">8</span><span style="font-family:宋体">个方向。每个子区域的大小与关键点方向分配时相同，即每个区域有</span>个<img alt="" src="https://images2.imgbox.com/80/29/BKJnDLqm_o.jpg" style="border:none; max-width:100%">子像素，为每个子区域分配边长为<img alt="" src="https://images2.imgbox.com/c2/ca/lMBEeW5J_o.jpg" style="border:none; max-width:100%">的矩形区域进行采样<span style="font-family:'Times New Roman'">(</span>个子像素实际用边长为<img alt="" src="https://images2.imgbox.com/4d/44/fiCKAvTB_o.jpg" style="border:none; max-width:100%">的矩形区域即可包含，但由式<span style="font-family:'Times New Roman'">(3-8)</span><span style="font-family:宋体">，<img alt="" src="https://images2.imgbox.com/35/f6/p3VI7ovk_o.jpg" style="border:none; max-width:100%"></span>不大，为了简化计算取其边长为<img alt="" src="https://images2.imgbox.com/2e/f8/eMCZcfX1_o.jpg" style="border:none; max-width:100%">，并且采样点宜多不宜少<span style="font-family:'Times New Roman'">)</span><span style="font-family:宋体">。考虑到实际计算时，需要采用双线性插值，所需图像窗口边长为<img alt="" src="https://images2.imgbox.com/5c/5d/gDBLxsSP_o.jpg" style="border:none; max-width:100%"></span>。在考虑到旋转因素<span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">方便下一步将坐标轴旋转到关键点的方向</span><span style="font-family:'Times New Roman'">)</span><span style="font-family:宋体">，如下图</span><span style="font-family:'Times New Roman'">6.1</span><span style="font-family:宋体">所示，实际计算所需的图像区域半径为：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">  <img alt="" src="https://images2.imgbox.com/9a/23/WWu7y8za_o.jpg" style="border:none; max-width:100%">  (6-1)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 计算结果四舍五入取整。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/65/92/dHvTOIoT_o.jpg" style="border:none; max-width:100%"><span style="font-family:宋体"></span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 2. 将坐标轴旋转为关键点的方向，以确保旋转不变性，如6.2<span style="font-family:宋体">所示。</span> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/dd/aa/4ysV0YwY_o.jpg" style="border:none; max-width:100%"><span style="font-family:宋体"></span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 旋转后<span style="background-color:rgb(255,150,50)">邻<span size="+0">域</span></span>内采样点的新坐标为：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">   <img alt="" src="https://images2.imgbox.com/61/56/GtFiyXeS_o.jpg" style="border:none; max-width:100%">(6-2)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 3. 将<span style="background-color:rgb(255,150,50)">邻<span size="+0">域</span></span>内的采样点分配到对应的子区域内，将子区域内的梯度值分配到<span style="font-family:'Times New Roman'">8</span><span style="font-family:宋体">个方向上，计算其权值。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 旋转后的采样点坐标在半径为<span style="font-family:'Times New Roman'">radius</span><span style="font-family:宋体">的圆内被分配到<img alt="" src="https://images2.imgbox.com/c8/55/Ucvvlgi6_o.jpg" style="border:none; max-width:100%"></span>的子区域，计算影响子区域的采样点的梯度和方向，分配到<span style="font-family:'Times New Roman'">8</span><span style="font-family:宋体">个方向上。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 旋转后的采样点<img alt="" src="https://images2.imgbox.com/da/20/qo1L1PFD_o.jpg" style="border:none; max-width:100%">落在子区域的下标为</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">    <img alt="" src="https://images2.imgbox.com/f5/10/kvGyPuFs_o.jpg" style="border:none; max-width:100%"> (6-3)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> Lowe<span style="font-family:宋体">建议子区域的像素的梯度大小按<img alt="" src="https://images2.imgbox.com/af/7f/9OyDyI6f_o.jpg" style="border:none; max-width:100%"></span>的高斯加权计算，即</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/fd/d5/tH7C0Uwq_o.jpg" style="border:none; max-width:100%">(6-4)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 其中<span style="font-family:'Times New Roman'">a</span><span style="font-family:宋体">，</span><span style="font-family:'Times New Roman'">b</span><span style="font-family:宋体">为关键点在高斯金字塔图像中的位置坐标。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 4. 插值计算每个种子点八个方向的梯度。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/1c/c3/I3ywnLV0_o.jpg" style="border:none; max-width:100%"><span style="font-family:宋体"></span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 如图<span style="font-family:'Times New Roman'">6.3</span><span style="font-family:宋体">所示，将由式</span><span style="font-family:'Times New Roman'">(6-3)</span><span style="font-family:宋体">所得采样点在子区域中的下标<img alt="" src="https://images2.imgbox.com/a8/e4/kvrMMtgW_o.jpg" style="border:none; max-width:100%"></span>(<span style="font-family:宋体">图中蓝色窗口内红色点</span><span style="font-family:'Times New Roman'">)</span><span style="font-family:宋体">线性插值，计算其对每个种子点的贡献。如图中的红色点，落在第</span><span style="font-family:'Times New Roman'">0</span><span style="font-family:宋体">行和第</span><span style="font-family:'Times New Roman'">1</span><span style="font-family:宋体">行之间，对这两行都有贡献。对第</span><span style="font-family:'Times New Roman'">0</span><span style="font-family:宋体">行第</span><span style="font-family:'Times New Roman'">3</span><span style="font-family:宋体">列种子点的贡献因子为</span><span style="font-family:'Times New Roman'">dr</span><span style="font-family:宋体">，对第</span><span style="font-family:'Times New Roman'">1</span><span style="font-family:宋体">行第</span><span style="font-family:'Times New Roman'">3</span><span style="font-family:宋体">列的贡献因子为</span><span style="font-family:'Times New Roman'">1-dr</span><span style="font-family:宋体">，同理，对邻近两列的贡献因子为</span><span style="font-family:'Times New Roman'">dc</span><span style="font-family:宋体">和</span><span style="font-family:'Times New Roman'">1-dc</span><span style="font-family:宋体">，对邻近两个方向的贡献因子为</span><span style="font-family:'Times New Roman'">do</span><span style="font-family:宋体">和</span><span style="font-family:'Times New Roman'">1-do</span><span style="font-family:宋体">。则最终累加在每个方向上的梯度大小为：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/52/e0/5dG0ksJG_o.jpg" style="border:none; max-width:100%">(6-5)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 其中<span style="font-family:'Times New Roman'">k</span><span style="font-family:宋体">，</span><span style="font-family:'Times New Roman'">m</span><span style="font-family:宋体">，</span><span style="font-family:'Times New Roman'">n</span><span style="font-family:宋体">为</span><span style="font-family:'Times New Roman'">0</span><span style="font-family:宋体">或为</span><span style="font-family:'Times New Roman'">1</span><span style="font-family:宋体">。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 5. 如上统计的4*4*8=128个梯度信息即为该关键点的特征向量。特征向量形成后，为了去除光照变化的影响，需要对它们进行归一化处理，对于图像灰度值整体漂移，图像各点的梯度是邻域像素相减得到，所以也能去除。得到的描述子向量为<img alt="" src="https://images2.imgbox.com/5f/ec/vj3QVWmK_o.jpg" style="border:none; max-width:100%">，归一化后的特征向量为<img alt="" src="https://images2.imgbox.com/2c/ea/kgkghZ2k_o.jpg" style="border:none; max-width:100%">则</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/04/60/fadOOKHe_o.jpg" style="border:none; max-width:100%"> (6-7)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 6. 描述子向量门限。非线性光照，相机饱和度变化对造成某些方向的梯度值过大，而对方向的影响微弱。因此设置门限值<span style="font-family:'Times New Roman'">(</span><span style="font-family:宋体">向量归一化后，一般取</span><span style="font-family:'Times New Roman'">0.2)</span><span style="font-family:宋体">截断较大的梯度值。</span>然后，再进行一次归一化处理，提高特征的鉴别性。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 7. 按特征点的尺度对特征描述向量进行排序。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 至此，<span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">特征描述向量生成。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <span style="font-family:宋体"></span> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 描述向量这块不好理解，我画了个草图，供参考：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/ba/85/Dl5r7bzz_o.png" width="843" height="693" style="border:none; max-width:100%"></p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t24" style="color:rgb(202,0,0)"></a>7、SIFT<span style="font-family:宋体">的缺点</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> SIFT<span style="font-family:宋体">在图像的不变特征提取方面拥有无与伦比的优势，但并不完美，仍然存在：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 1. <span style="font-family:宋体">实时性不高。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 2. <span style="font-family:宋体">有时特征点较少。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 3. <span style="font-family:宋体">对边缘光滑的目标无法准确提取特征点。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 等缺点，如下图<span style="font-family:'Times New Roman'">7.1</span><span style="font-family:宋体">所示，对模糊的图像和边缘平滑的图像，检测出的特征点过少，对圆更是无能为力。近来不断有人改进，其中最著名的有</span><span style="font-family:'Times New Roman'">SURF</span><span style="font-family:宋体">和</span><span style="font-family:'Times New Roman'">CSIFT</span><span style="font-family:宋体">。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <img alt="" src="https://images2.imgbox.com/c1/91/0D80in4x_o.jpg" style="border:none; max-width:100%"><span style="font-family:宋体"></span></p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t25" style="color:rgb(202,0,0)"></a>8、总结</h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 本人研究<span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">算法一月有余，鉴于相关知识的缺失，尺度空间技术和差分近似求导曾困我良久。</span><span style="font-family:'Times New Roman'">Lowe</span><span style="font-family:宋体">在论文中对细节提之甚少，甚至只字未提，给实现带来了很大困难。经过多方查阅，实现，总结成此文。自认为是到目前为止，关于</span><span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">算法最为详尽的资料，现分享给你，望批评指正。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 一同分享给你的还有同时实现的高斯模糊源码，<span style="font-family:'Times New Roman'">sift</span><span style="font-family:宋体">算法源码，见附录</span><span style="font-family:'Times New Roman'">1</span><span style="font-family:宋体">，</span><span style="font-family:'Times New Roman'">2</span><span style="font-family:宋体">。源码使用</span><span style="font-family:'Times New Roman'">vs2010+opencv2.2</span><span style="font-family:宋体">实现。</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> zdd</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 2012<span style="font-family:宋体">年</span><span style="font-family:'Times New Roman'">4</span><span style="font-family:宋体">月</span><span style="font-family:'Times New Roman'">28</span><span style="font-family:宋体">日 于北师大</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 2012年5月17日15:33:23第一次修正</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 修正内容：第3.3部分内容，图3.1，图3.5。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 修正后代码：<a target="_blank" href="http://download.csdn.net/detail/zddmail/4309418" style="color:rgb(202,0,0); text-decoration:none" rel="noopener noreferrer">http://download.csdn.net/detail/zddmail/4309418</a></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">  </p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t26" style="color:rgb(202,0,0)"></a>参考资料</h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 1、David G.Lowe Distinctive Image Features from Scale-Invariant Keypoints. January 5, 2004.</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 2、David G.Lowe Object Recognition from Local Scale-Invariant Features. 1999</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 3、Matthew Brown and David Lowe Invariant Features from Interest Point Groups. In British Machine Vision Conference, Cardiff, Wales, pp. 656-665.</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 4、PETER J. BURT, MEMBER, IEEE, AND EDWARD H. ADELSON, The Laplacian Pyramid as a Compact Image Code. IEEE TRANSACTIONS ON COMMUNICATIONS, VOL. COM-3l, NO. 4, APRIL 1983</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 5、宋丹 <span style="font-family:'Times New Roman'">10905056 </span><span style="font-family:宋体">尺度不变特征变换匹配算法</span><span style="font-family:'Times New Roman'">Scale Invariant Feature Transform </span><span style="font-family:宋体">（</span><span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">）</span><span style="font-family:'Times New Roman'">(PPT)</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 6、RaySaint 的博客<span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">算法研究</span><span style="font-family:'Times New Roman'">http://underthehood.blog.51cto.com/2531780/658350</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 7、Jason Clemons SIFT: SCALE INVARIANT FEATURE TRANSFORM BY DAVID LOWE(ppt)</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 8、Tony Lindeberg Scale-space theory: A basic tool for analysing  structures at different scales.1994</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 9、SIFT<span style="font-family:宋体">官网的</span><span style="font-family:'Times New Roman'">Rob Hess </span><a target="_blank" href="mailto:&lt;hess@eecs.oregonstate.edu&gt;" rel="nofollow noopener noreferrer" style="color:rgb(202,0,0); text-decoration:none">&lt;hess@eecs.oregonstate.edu&gt;</a> SIFT<span style="font-family:宋体">源码</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 10、Opencv2.2 Andrea Vedaldi(UCLA VisionLab)<span style="font-family:宋体">实现的</span><span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">源码 </span><a target="_blank" href="http://www.vlfeat.org/~vedaldi/code/siftpp.html," rel="nofollow noopener noreferrer" style="color:rgb(202,0,0); text-decoration:none">http://www.vlfeat.org/~vedaldi/code/siftpp.html,</a>  opencv2.3<span style="font-family:宋体">改用</span><span style="font-family:'Times New Roman'">Rob Hess</span><span style="font-family:宋体">的源码</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 11、科学计算中的偏微分方程有限差分法 杨乐主编</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 12、维基百科<span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">词条：</span><a target="_blank" href="http://zh.wikipedia.org/zh-cn/Scale-invariant_feature_transform" rel="nofollow noopener noreferrer" style="color:rgb(202,0,0); text-decoration:none">http://zh.wikipedia.org/zh-cn/Scale-invariant_feature_transform</a></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 13、百度百科<span style="font-family:'Times New Roman'">SIFT</span><span style="font-family:宋体">词条：</span><a target="_blank" href="http://baike.baidu.com/view/2832304.htm" rel="nofollow noopener noreferrer" style="color:rgb(202,0,0); text-decoration:none">http://baike.baidu.com/view/2832304.htm</a></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 14、其它互联网资料</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t27" style="color:rgb(202,0,0)"></a>附录<span style="font-family:'Times New Roman'">1 </span><span style="font-family:宋体">高斯模糊源码</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <a target="_blank" href="http://blog.csdn.net/zddmail/article/details/7450033" style="color:rgb(202,0,0); text-decoration:none" rel="noopener noreferrer">http://blog.csdn.net/zddmail/article/details/7450033</a></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <a target="_blank" href="http://download.csdn.net/detail/zddmail/4217704" style="color:rgb(202,0,0); text-decoration:none" rel="noopener noreferrer">http://download.csdn.net/detail/zddmail/4217704</a></p> 
<h4 style="margin:0px; padding:0px; font-family:Arial; line-height:26px"><a target="_blank" name="t28" style="color:rgb(202,0,0)"></a>附录<span style="font-family:'Times New Roman'">2 SIFT</span><span style="font-family:宋体">算法源码</span></h4> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <a target="_blank" href="http://download.csdn.net/detail/zddmail/4264810" style="color:rgb(202,0,0); text-decoration:none" rel="noopener noreferrer">http://download.csdn.net/detail/zddmail/4309418</a></p> 
<div id="dict__tip" style="visibility:hidden; top:auto; left:auto; right:auto"> 
 <div id="dict__tip_dict_info" style="width:auto"> 
  <span id="dict__tip_dict_link" class="dict-link"><a target="_blank" id="dict__tip_copy_translate" href="" rel="nofollow noopener noreferrer">复制</a><a target="_blank" id="dict__tip_translate_link" href="#" rel="nofollow noopener noreferrer">去Google翻译</a></span> 
  <span id="dict__tip_dict_copyright" class="dict-copyright">翻译结果</span> 
 </div> 
 <div id="dict__tip_translate_result"></div> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4a85cf496f94d21701699997a5584bd9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">最简单的基于FFmpeg的封装格式处理：视音频分离器（demuxer）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b50195494051356d9044d0c5003ff817/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">最简单的基于FFmpeg的封装格式处理：视音频复用器（muxer）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>