<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Vue3&#43;TypeScript】快速上手_笔记 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Vue3&#43;TypeScript】快速上手_笔记" />
<meta property="og:description" content="前言 1. Vue3简介 2020年9月18日，Vue.js发布版3.0版本，代号：One Piece（n
经历了：4800&#43;次提交、40&#43;个RFC、600&#43;次PR、300&#43;贡献者
官方发版地址：Release v3.0.0 One Piece · vuejs/core
截止2023年10月，最新的公开版本为：3.3.4
1.1. 【性能的提升】 打包大小减少41%。
初次渲染快55%, 更新渲染快133%。
内存减少54%。
1.2.【 源码的升级】 使用Proxy代替defineProperty实现响应式。
重写虚拟DOM的实现和Tree-Shaking。
1.3. 【拥抱TypeScript】 Vue3可以更好的支持TypeScript。 1.4. 【新的特性】 Composition API（组合API）：
setup
ref与reactive
computed与watch
…
新的内置组件：
Fragment
Teleport
Suspense
…
其他改变：
新的生命周期钩子
data 选项应始终被声明为一个函数
移除keyCode支持作为 v-on 的修饰符
…
2. 创建Vue3工程 2.1. 【基于 vue-cli 创建】 点击查看官方文档
备注：目前vue-cli已处于维护模式，官方推荐基于 Vite 创建项目。
## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上 vue --version ## 安装或者升级你的@vue/cli npm install -g @vue/cli ## 执行创建命令 vue create vue_test ## 随后选择3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/cf266bd18deb2fa23a7091a62b10b24b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-25T20:30:51+08:00" />
<meta property="article:modified_time" content="2023-12-25T20:30:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Vue3&#43;TypeScript】快速上手_笔记</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>前言</h2> 
<p><img src="https://images2.imgbox.com/01/8e/gSwNnhJJ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/32/c4/o95AVR96_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b6/91/DcLInFXL_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="1_Vue3_5"></a>1. Vue3简介</h2> 
<ul><li> <p>2020年9月18日，<code>Vue.js</code>发布版<code>3.0</code>版本，代号：<code>One Piece</code>（n</p> </li><li> <p>经历了：<a href="https://github.com/vuejs/core/commits/main">4800+次提交</a>、<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">40+个RFC</a>、<a href="https://github.com/vuejs/vue-next/pulls?q=is%3Apr+is%3Amerged+-author%3Aapp%2Fdependabot-preview+">600+次PR</a>、<a href="https://github.com/vuejs/core/graphs/contributors">300+贡献者</a></p> </li><li> <p>官方发版地址：<a href="https://github.com/vuejs/core/releases/tag/v3.0.0">Release v3.0.0 One Piece · vuejs/core</a></p> </li><li> <p>截止2023年10月，最新的公开版本为：<code>3.3.4</code><br> <img src="https://images2.imgbox.com/0a/2f/UXeOiOZY_o.png" alt="在这里插入图片描述"></p> </li></ul> 
<h3><a id="11__17"></a>1.1. 【性能的提升】</h3> 
<ul><li> <p>打包大小减少<code>41%</code>。</p> </li><li> <p>初次渲染快<code>55%</code>, 更新渲染快<code>133%</code>。</p> </li><li> <p>内存减少<code>54%</code>。</p> </li></ul> 
<h3><a id="12__27"></a>1.2.【 源码的升级】</h3> 
<ul><li> <p>使用<code>Proxy</code>代替<code>defineProperty</code>实现响应式。</p> </li><li> <p>重写虚拟<code>DOM</code>的实现和<code>Tree-Shaking</code>。</p> </li></ul> 
<h3><a id="13_TypeScript_35"></a>1.3. 【拥抱TypeScript】</h3> 
<ul><li><code>Vue3</code>可以更好的支持<code>TypeScript</code>。</li></ul> 
<h3><a id="14__41"></a>1.4. 【新的特性】</h3> 
<ol><li> <p><code>Composition API</code>（组合<code>API</code>）：</p> 
  <ul><li> <p><code>setup</code></p> </li><li> <p><code>ref</code>与<code>reactive</code></p> </li><li> <p><code>computed</code>与<code>watch</code></p> <p>…</p> </li></ul> </li><li> <p>新的内置组件：</p> 
  <ul><li> <p><code>Fragment</code></p> </li><li> <p><code>Teleport</code></p> </li><li> <p><code>Suspense</code></p> <p>…</p> </li></ul> </li><li> <p>其他改变：</p> 
  <ul><li> <p>新的生命周期钩子</p> </li><li> <p><code>data</code> 选项应始终被声明为一个函数</p> </li><li> <p>移除<code>keyCode</code>支持作为<code> v-on</code> 的修饰符</p> <p>…</p> </li></ul> </li></ol> 
<h2><a id="2_Vue3_75"></a>2. 创建Vue3工程</h2> 
<h3><a id="21__vuecli__77"></a>2.1. 【基于 vue-cli 创建】</h3> 
<p>点击查看<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create" rel="nofollow">官方文档</a></p> 
<blockquote> 
 <p>备注：目前<code>vue-cli</code>已处于维护模式，官方推荐基于 <code>Vite</code> 创建项目。</p> 
</blockquote> 
<pre><code class="prism language-powershell"><span class="token comment">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span>
vue <span class="token operator">--</span>version

<span class="token comment">## 安装或者升级你的@vue/cli </span>
npm install <span class="token operator">-</span>g @vue/<span class="token function">cli</span>

<span class="token comment">## 执行创建命令</span>
vue create vue_test

<span class="token comment">##  随后选择3.x</span>
<span class="token comment">##  Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span>
<span class="token comment">##  &gt; 3.x</span>
<span class="token comment">##    2.x</span>

<span class="token comment">## 启动</span>
cd vue_test
npm run serve
</code></pre> 
<hr> 
<h3><a id="22__vite__105"></a>2.2. 【基于 vite 创建】(推荐)</h3> 
<p><code>vite</code> 是新一代前端构建工具，官网地址：<a href="https://vitejs.cn/" rel="nofollow">https://vitejs.cn</a>，<code>vite</code>的优势如下：</p> 
<ul><li> <p>轻量快速的热重载（<code>HMR</code>），能实现极速的服务启动。</p> </li><li> <p>对 <code>TypeScript</code>、<code>JSX</code>、<code>CSS</code> 等支持开箱即用。</p> </li><li> <p>真正的按需编译，不再等待整个应用编译完成。</p> </li><li> <p><code>webpack</code>构建 与 <code>vite</code>构建对比图如下：</p> <p><strong>webpack:</strong><img src="https://images2.imgbox.com/4f/b0/MsstBPom_o.png" alt="在这里插入图片描述"><br> <strong>vite:</strong><img src="https://images2.imgbox.com/cc/dc/3JnwQMAS_o.png" alt="在这里插入图片描述"></p> </li></ul> 
<ul><li>具体操作如下（点击查看<a href="https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application" rel="nofollow">官方文档</a>）</li></ul> 
<pre><code class="prism language-powershell"><span class="token comment">## 1.创建命令</span>
npm create vue@latest

<span class="token comment">## 2.具体配置</span>
<span class="token comment">## 配置项目名称</span>
√ Project name: vue3_test
<span class="token comment">## 是否添加TypeScript支持</span>
√ Add TypeScript?  Yes
<span class="token comment">## 是否添加JSX支持</span>
√ Add JSX Support?  No
<span class="token comment">## 是否添加路由环境</span>
√ Add Vue Router <span class="token keyword">for</span> Single Page Application development?  No
<span class="token comment">## 是否添加pinia环境</span>
√ Add Pinia <span class="token keyword">for</span> state management?  No
<span class="token comment">## 是否添加单元测试</span>
√ Add Vitest <span class="token keyword">for</span> Unit Testing?  No
<span class="token comment">## 是否添加端到端测试方案</span>
√ Add an <span class="token keyword">End</span><span class="token operator">-</span>to-<span class="token keyword">End</span> Testing Solution? » No
<span class="token comment">## 是否添加ESLint语法检查</span>
√ Add ESLint <span class="token keyword">for</span> code quality?  Yes
<span class="token comment">## 是否添加Prettiert代码格式化</span>
√ Add Prettier <span class="token keyword">for</span> code formatting?  No
</code></pre> 
<p>自己动手编写一个App组件</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="app"&gt;
    &lt;h1&gt;你好啊！&lt;/h1&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts"&gt;
  export default {
    name:'App' //组件名
  }
&lt;/script&gt;

&lt;style&gt;
  .app {
    background-color: #ddd;
    box-shadow: 0 0 10px;
    border-radius: 10px;
    padding: 20px;
  }
&lt;/style&gt;
</code></pre> 
<p>安装官方推荐的<code>vscode</code>插件：</p> 
<p><img src="https://images2.imgbox.com/74/1c/37pqwPAw_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/21/3f/hrRfIILr_o.png" alt="在这里插入图片描述"></p> 
<p>总结：</p> 
<ul><li><code>Vite</code> 项目中，<code>index.html</code> 是项目的入口文件，在项目最外层。</li><li>加载<code>index.html</code>后，<code>Vite</code> 解析 <code>&lt;script type="module" src="xxx"&gt;</code> 指向的<code>JavaScript</code>。</li><li><code>Vue3</code>**中是通过 **<code>createApp</code> 函数创建一个应用实例。</li></ul> 
<p><img src="https://images2.imgbox.com/af/9f/k8E1xVMj_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f9/81/7v1p3c2U_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b7/8e/R5Hfn7V6_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/38/6b/c5VoDg8P_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="23__187"></a>2.3. 【一个简单的效果】</h3> 
<p><code>Vue3</code>向下兼容<code>Vue2</code>语法，且<code>Vue3</code>中的模板中可以没有根标签</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h2&gt;姓名：{<!-- -->{name}}&lt;/h2&gt;
    &lt;h2&gt;年龄：{<!-- -->{age}}&lt;/h2&gt;
    &lt;button @click="changeName"&gt;修改名字&lt;/button&gt;
    &lt;button @click="changeAge"&gt;年龄+1&lt;/button&gt;
    &lt;button @click="showTel"&gt;点我查看联系方式&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts"&gt;
  export default {
    name:'App',
    data() {
      return {
        name:'张三',
        age:18,
        tel:'13888888888'
      }
    },
    methods:{
      changeName(){
        this.name = 'zhang-san'
      },
      changeAge(){
        this.age += 1
      },
      showTel(){
        alert(this.tel)
      }
    },
  }
&lt;/script&gt;
</code></pre> 
<h2><a id="3_Vue3_228"></a>3. Vue3核心语法</h2> 
<h3><a id="31__OptionsAPIAPI__CompositionAPIAPI_230"></a>3.1. 【OptionsAPI（选项式API） 与 CompositionAPI（组合式API）】</h3> 
<ul><li><code>Vue2</code>的<code>API</code>设计是<code>Options</code>（配置）风格的。</li><li><code>Vue3</code>的<code>API</code>设计是<code>Composition</code>（组合）风格的。</li></ul> 
<h4><a id="Options_API__235"></a>Options API 的弊端</h4> 
<p><code>Options</code>类型的 <code>API</code>，数据、方法、计算属性等，是分散在：<code>data</code>、<code>methods</code>、<code>computed</code>中的，若想新增或者修改一个需求，就需要分别修改：<code>data</code>、<code>methods</code>、<code>computed</code>，不便于维护和复用。</p> 
<p><img src="https://images2.imgbox.com/d4/45/tYSh0gI9_o.gif" alt="在这里插入图片描述"> <br> <img src="https://images2.imgbox.com/76/d0/aPoOrFAo_o.gif" alt="在这里插入图片描述"></p> 
<h4><a id="Composition_API__243"></a>Composition API 的优势</h4> 
<p>可以用函数的方式，更加优雅的组织代码，让相关功能的代码更加有序的组织在一起。</p> 
<p><img src="https://images2.imgbox.com/45/0d/qp75mtkh_o.gif" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f5/be/r3NWnNXh_o.gif" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>说明：以上四张动图原创作者：大帅老猿</p> 
</blockquote> 
<h3><a id="32__setup_253"></a>3.2. 【拉开序幕的 setup】</h3> 
<h4><a id="setup__255"></a>setup 概述</h4> 
<p><code>setup</code>是<code>Vue3</code>中一个新的配置项，值是一个函数，它是 <code>Composition API</code> <strong>“表演的舞台</strong><em><strong>”</strong></em>，组件中所用到的：数据、方法、计算属性、监视…等等，均配置在<code>setup</code>中。</p> 
<p>特点如下：</p> 
<ul><li><code>setup</code>函数返回的对象中的内容，可直接在模板中使用。</li><li><code>setup</code>中访问<code>this</code>是<code>undefined</code>。</li><li><code>setup</code>函数会在<code>beforeCreate</code>之前调用，它是“领先”所有钩子执行的。</li></ul> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h2&gt;姓名：{<!-- -->{name}}&lt;/h2&gt;
    &lt;h2&gt;年龄：{<!-- -->{age}}&lt;/h2&gt;
    &lt;button @click="changeName"&gt;修改名字&lt;/button&gt;
    &lt;button @click="changeAge"&gt;年龄+1&lt;/button&gt;
    &lt;button @click="showTel"&gt;点我查看联系方式&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts"&gt;
  export default {
    name:'Person',
    setup(){
      // 数据，原来写在data中（注意：此时的name、age、tel数据都不是响应式数据）
      let name = '张三'
      let age = 18
      let tel = '13888888888'

      // 方法，原来写在methods中
      function changeName(){
        name = 'zhang-san' //注意：此时这么修改name页面是不变化的
        console.log(name)
      }
      function changeAge(){
        age += 1 //注意：此时这么修改age页面是不变化的
        console.log(age)
      }
      function showTel(){
        alert(tel)
      }

      // 返回一个对象，对象中的内容，模板中可以直接使用
      return {name,age,tel,changeName,changeAge,showTel}
    }
  }
&lt;/script&gt;
</code></pre> 
<h4><a id="setup__305"></a>setup 的返回值</h4> 
<ul><li>若返回一个<strong>对象</strong>：则对象中的：属性、方法等，在模板中均可以直接使用**（重点关注）。**</li><li>若返回一个<strong>函数</strong>：则可以自定义渲染内容，代码如下：</li></ul> 
<pre><code class="prism language-jsx">setup(){
  return ()=&gt; '你好啊！'
}
</code></pre> 
<h4><a id="setup__Options_API__316"></a>setup 与 Options API 的关系</h4> 
<ul><li><code>Vue2</code> 的配置（<code>data</code>、<code>methos</code>…）中<strong>可以访问到</strong> <code>setup</code>中的属性、方法。</li><li>但在<code>setup</code>中<strong>不能访问到</strong><code>Vue2</code>的配置（<code>data</code>、<code>methos</code>…）。</li><li>如果与<code>Vue2</code>冲突，则<code>setup</code>优先。</li></ul> 
<h4><a id="setup__322"></a>setup 语法糖</h4> 
<p><code>setup</code>函数有一个语法糖，这个语法糖，可以让我们把<code>setup</code>独立出去，代码如下：</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h2&gt;姓名：{<!-- -->{name}}&lt;/h2&gt;
    &lt;h2&gt;年龄：{<!-- -->{age}}&lt;/h2&gt;
    &lt;button @click="changName"&gt;修改名字&lt;/button&gt;
    &lt;button @click="changAge"&gt;年龄+1&lt;/button&gt;
    &lt;button @click="showTel"&gt;点我查看联系方式&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts"&gt;
  export default {
    name:'Person',
  }
&lt;/script&gt;

&lt;!-- 下面的写法是setup语法糖 --&gt;
&lt;script setup lang="ts"&gt;
  console.log(this) //undefined
  
  // 数据（注意：此时的name、age、tel都不是响应式数据）
  let name = '张三'
  let age = 18
  let tel = '13888888888'

  // 方法
  function changName(){
    name = '李四'//注意：此时这么修改name页面是不变化的
  }
  function changAge(){
    console.log(age)
    age += 1 //注意：此时这么修改age页面是不变化的
  }
  function showTel(){
    alert(tel)
  }
&lt;/script&gt;
</code></pre> 
<p>扩展：上述代码，还需要编写一个不写<code>setup</code>的<code>script</code>标签，去指定组件名字，比较麻烦，我们可以借助<code>vite</code>中的插件简化</p> 
<ol><li>第一步：<code>npm i vite-plugin-vue-setup-extend -D</code></li><li>第二步：<code>vite.config.ts</code></li></ol> 
<pre><code class="prism language-jsx">import { defineConfig } from 'vite'
import VueSetupExtend from 'vite-plugin-vue-setup-extend'

export default defineConfig({
  plugins: [ VueSetupExtend() ]
})
</code></pre> 
<ol start="3"><li>第三步：<code>&lt;script setup lang="ts" name="Person"&gt;</code></li></ol> 
<p><img src="https://images2.imgbox.com/95/4e/tsd5V3bv_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="33_ref__385"></a>3.3. 【ref 创建：基本类型的响应式数据】</h3> 
<ul><li>**作用：**定义响应式变量。</li><li><strong>语法：</strong><code>let xxx = ref(初始值)</code>。</li><li>**返回值：**一个<code>RefImpl</code>的实例对象，简称<code>ref对象</code>或<code>ref</code>，<code>ref</code>对象的<code>value</code><strong>属性是响应式的</strong>。</li><li><strong>注意点：</strong> 
  <ul><li><code>JS</code>中操作数据需要：<code>xxx.value</code>，但模板中不需要<code>.value</code>，直接使用即可。</li><li>对于<code>let name = ref('张三')</code>来说，<code>name</code>不是响应式的，<code>name.value</code>是响应式的。</li></ul> </li></ul> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h2&gt;姓名：{<!-- -->{name}}&lt;/h2&gt;
    &lt;h2&gt;年龄：{<!-- -->{age}}&lt;/h2&gt;
    &lt;button @click="changeName"&gt;修改名字&lt;/button&gt;
    &lt;button @click="changeAge"&gt;年龄+1&lt;/button&gt;
    &lt;button @click="showTel"&gt;点我查看联系方式&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="Person"&gt;
  import {ref} from 'vue'
  // name和age是一个RefImpl的实例对象，简称ref对象，它们的value属性是响应式的。
  let name = ref('张三')
  let age = ref(18)
  // tel就是一个普通的字符串，不是响应式的
  let tel = '13888888888'

  function changeName(){
    // JS中操作ref对象时候需要.value
    name.value = '李四'
    console.log(name.value)

    // 注意：name不是响应式的，name.value是响应式的，所以如下代码并不会引起页面的更新。
    // name = ref('zhang-san')
  }
  function changeAge(){
    // JS中操作ref对象时候需要.value
    age.value += 1 
    console.log(age.value)
  }
  function showTel(){
    alert(tel)
  }
&lt;/script&gt;
</code></pre> 
<h3><a id="34_reactive__432"></a>3.4. 【reactive 创建：对象类型的响应式数据】</h3> 
<ul><li><strong>作用：<strong>定义一个</strong>响应式对象</strong>（基本类型不要用它，要用<code>ref</code>，否则报错）</li><li><strong>语法：</strong><code>let 响应式对象= reactive(源对象)</code>。</li><li>**返回值：**一个<code>Proxy</code>的实例对象，简称：响应式对象。</li><li><strong>注意点：</strong><code>reactive</code>定义的响应式数据是“深层次”的。</li></ul> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h2&gt;汽车信息：一台{<!-- -->{ car.brand }}汽车，价值{<!-- -->{ car.price }}万&lt;/h2&gt;
    &lt;h2&gt;游戏列表：&lt;/h2&gt;
    &lt;ul&gt;
      &lt;li v-for="g in games" :key="g.id"&gt;{<!-- -->{ g.name }}&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h2&gt;测试：{<!-- -->{obj.a.b.c.d}}&lt;/h2&gt;
    &lt;button @click="changeCarPrice"&gt;修改汽车价格&lt;/button&gt;
    &lt;button @click="changeFirstGame"&gt;修改第一游戏&lt;/button&gt;
    &lt;button @click="test"&gt;测试&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="Person"&gt;
import { reactive } from 'vue'

// 数据
let car = reactive({ brand: '奔驰', price: 100 })
let games = reactive([
  { id: 'ahsgdyfa01', name: '英雄联盟' },
  { id: 'ahsgdyfa02', name: '王者荣耀' },
  { id: 'ahsgdyfa03', name: '原神' }
])
let obj = reactive({
  a:{
    b:{
      c:{
        d:666
      }
    }
  }
})

function changeCarPrice() {
  car.price += 10
}
function changeFirstGame() {
  games[0].name = '流星蝴蝶剑'
}
function test(){
  obj.a.b.c.d = 999
}
&lt;/script&gt;
</code></pre> 
<h3><a id="35_ref__486"></a>3.5. 【ref 创建：对象类型的响应式数据】</h3> 
<ul><li>其实<code>ref</code>接收的数据可以是：<strong>基本类型</strong>、<strong>对象类型</strong>。</li><li>若<code>ref</code>接收的是对象类型，内部其实也是调用了<code>reactive</code>函数。</li></ul> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h2&gt;汽车信息：一台{<!-- -->{ car.brand }}汽车，价值{<!-- -->{ car.price }}万&lt;/h2&gt;
    &lt;h2&gt;游戏列表：&lt;/h2&gt;
    &lt;ul&gt;
      &lt;li v-for="g in games" :key="g.id"&gt;{<!-- -->{ g.name }}&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h2&gt;测试：{<!-- -->{obj.a.b.c.d}}&lt;/h2&gt;
    &lt;button @click="changeCarPrice"&gt;修改汽车价格&lt;/button&gt;
    &lt;button @click="changeFirstGame"&gt;修改第一游戏&lt;/button&gt;
    &lt;button @click="test"&gt;测试&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="Person"&gt;
import { ref } from 'vue'

// 数据
let car = ref({ brand: '奔驰', price: 100 })
let games = ref([
  { id: 'ahsgdyfa01', name: '英雄联盟' },
  { id: 'ahsgdyfa02', name: '王者荣耀' },
  { id: 'ahsgdyfa03', name: '原神' }
])
let obj = ref({
  a:{
    b:{
      c:{
        d:666
      }
    }
  }
})

console.log(car)

function changeCarPrice() {
  car.value.price += 10
}
function changeFirstGame() {
  games.value[0].name = '流星蝴蝶剑'
}
function test(){
  obj.value.a.b.c.d = 999
}
&lt;/script&gt;
</code></pre> 
<h3><a id="36_ref__reactive_540"></a>3.6. 【ref 对比 reactive】</h3> 
<p>宏观角度看：</p> 
<blockquote> 
 <ol><li> <p><code>ref</code>用来定义：<strong>基本类型数据</strong>、<strong>对象类型数据</strong>；</p> </li><li> <p><code>reactive</code>用来定义：<strong>对象类型数据</strong>。</p> </li></ol> 
</blockquote> 
<ul><li>区别：</li></ul> 
<blockquote> 
 <ol><li> <p><code>ref</code>创建的变量必须使用<code>.value</code>（可以使用<code>volar</code>插件自动添加<code>.value</code>）。</p> <p><img src="https://images2.imgbox.com/b2/db/IH6BHaSw_o.png" alt="在这里插入图片描述"></p> </li></ol> 
</blockquote> 
<blockquote> 
 <ol start="2"><li><code>reactive</code>重新分配一个新对象，会<strong>失去</strong>响应式（可以使用<code>Object.assign</code>去整体替换）。</li></ol> 
</blockquote> 
<ul><li>使用原则：</li></ul> 
<blockquote> 
 <ol><li>若需要一个基本类型的响应式数据，必须使用<code>ref</code>。</li><li>若需要一个响应式对象，层级不深，<code>ref</code>、<code>reactive</code>都可以。</li><li>若需要一个响应式对象，且层级较深，推荐使用<code>reactive</code>。</li></ol> 
</blockquote> 
<h3><a id="37_toRefs__toRef_563"></a>3.7. 【toRefs 与 toRef】</h3> 
<ul><li>作用：将一个响应式对象中的每一个属性，转换为<code>ref</code>对象。</li><li>备注：<code>toRefs</code>与<code>toRef</code>功能一致，但<code>toRefs</code>可以批量转换。</li><li>语法如下：</li></ul> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h2&gt;姓名：{<!-- -->{person.name}}&lt;/h2&gt;
    &lt;h2&gt;年龄：{<!-- -->{person.age}}&lt;/h2&gt;
    &lt;h2&gt;性别：{<!-- -->{person.gender}}&lt;/h2&gt;
    &lt;button @click="changeName"&gt;修改名字&lt;/button&gt;
    &lt;button @click="changeAge"&gt;修改年龄&lt;/button&gt;
    &lt;button @click="changeGender"&gt;修改性别&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="Person"&gt;
  import {ref,reactive,toRefs,toRef} from 'vue'

  // 数据
  let person = reactive({name:'张三', age:18, gender:'男'})
	
  // 通过toRefs将person对象中的n个属性批量取出，且依然保持响应式的能力
  let {name,gender} =  toRefs(person)
	
  // 通过toRef将person对象中的gender属性取出，且依然保持响应式的能力
  let age = toRef(person,'age')

  // 方法
  function changeName(){
    name.value += '~'
  }
  function changeAge(){
    age.value += 1
  }
  function changeGender(){
    gender.value = '女'
  }
&lt;/script&gt;
</code></pre> 
<h3><a id="38_computed_606"></a>3.8. 【computed】</h3> 
<p>作用：根据已有数据计算出新数据（和<code>Vue2</code>中的<code>computed</code>作用一致）。</p> 
<p><img src="https://images2.imgbox.com/7a/33/dApyQIKD_o.gif" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    姓：&lt;input type="text" v-model="firstName"&gt; &lt;br&gt;
    名：&lt;input type="text" v-model="lastName"&gt; &lt;br&gt;
    全名：&lt;span&gt;{<!-- -->{fullName}}&lt;/span&gt; &lt;br&gt;
    &lt;button @click="changeFullName"&gt;全名改为：li-si&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="App"&gt;
  import {ref,computed} from 'vue'

  let firstName = ref('zhang')
  let lastName = ref('san')

  // 计算属性——只读取，不修改
  /* let fullName = computed(()=&gt;{
    return firstName.value + '-' + lastName.value
  }) */


  // 计算属性——既读取又修改
  let fullName = computed({
    // 读取
    get(){
      return firstName.value + '-' + lastName.value
    },
    // 修改
    set(val){
      console.log('有人修改了fullName',val)
      firstName.value = val.split('-')[0]
      lastName.value = val.split('-')[1]
    }
  })

  function changeFullName(){
    fullName.value = 'li-si'
  } 
&lt;/script&gt;
</code></pre> 
<h3><a id="39watch_654"></a>3.9.【watch】</h3> 
<ul><li>作用：监视数据的变化（和<code>Vue2</code>中的<code>watch</code>作用一致）</li><li>特点：<code>Vue3</code>中的<code>watch</code>只能监视以下<strong>四种数据</strong>：</li></ul> 
<blockquote> 
 <ol><li><code>ref</code>定义的数据。</li><li><code>reactive</code>定义的数据。</li><li>函数返回一个值（<code>getter</code>函数）。</li><li>一个包含上述内容的数组。</li></ol> 
</blockquote> 
<p>我们在<code>Vue3</code>中使用<code>watch</code>的时候，通常会遇到以下几种情况：</p> 
<h4><a id="__666"></a>* 情况一</h4> 
<p>监视<code>ref</code>定义的【基本类型】数据：直接写数据名即可，监视的是其<code>value</code>值的改变。</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h1&gt;情况一：监视【ref】定义的【基本类型】数据&lt;/h1&gt;
    &lt;h2&gt;当前求和为：{<!-- -->{sum}}&lt;/h2&gt;
    &lt;button @click="changeSum"&gt;点我sum+1&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="Person"&gt;
  import {ref,watch} from 'vue'
  // 数据
  let sum = ref(0)
  // 方法
  function changeSum(){
    sum.value += 1
  }
  // 监视，情况一：监视【ref】定义的【基本类型】数据
  const stopWatch = watch(sum,(newValue,oldValue)=&gt;{
    console.log('sum变化了',newValue,oldValue)
    if(newValue &gt;= 10){
      stopWatch()
    }
  })
&lt;/script&gt;
</code></pre> 
<h4><a id="__697"></a>* 情况二</h4> 
<p>监视<code>ref</code>定义的【对象类型】数据：直接写数据名，监视的是对象的【地址值】，若想监视对象内部的数据，要手动开启深度监视。</p> 
<blockquote> 
 <p>注意：</p> 
 <ul><li> <p>若修改的是<code>ref</code>定义的对象中的属性，<code>newValue</code> 和 <code>oldValue</code> 都是新值，因为它们是同一个对象。</p> </li><li> <p>若修改整个<code>ref</code>定义的对象，<code>newValue</code> 是新值， <code>oldValue</code> 是旧值，因为不是同一个对象了。</p> </li></ul> 
</blockquote> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h1&gt;情况二：监视【ref】定义的【对象类型】数据&lt;/h1&gt;
    &lt;h2&gt;姓名：{<!-- -->{ person.name }}&lt;/h2&gt;
    &lt;h2&gt;年龄：{<!-- -->{ person.age }}&lt;/h2&gt;
    &lt;button @click="changeName"&gt;修改名字&lt;/button&gt;
    &lt;button @click="changeAge"&gt;修改年龄&lt;/button&gt;
    &lt;button @click="changePerson"&gt;修改整个人&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="Person"&gt;
  import {ref,watch} from 'vue'
  // 数据
  let person = ref({
    name:'张三',
    age:18
  })
  // 方法
  function changeName(){
    person.value.name += '~'
  }
  function changeAge(){
    person.value.age += 1
  }
  function changePerson(){
    person.value = {name:'李四',age:90}
  }
  /* 
    监视，情况一：监视【ref】定义的【对象类型】数据，监视的是对象的地址值，若想监视对象内部属性的变化，需要手动开启深度监视
    watch的第一个参数是：被监视的数据
    watch的第二个参数是：监视的回调
    watch的第三个参数是：配置对象（deep、immediate等等.....） 
  */
  watch(person,(newValue,oldValue)=&gt;{
    console.log('person变化了',newValue,oldValue)
  },{deep:true})
  
&lt;/script&gt;
</code></pre> 
<h4><a id="___749"></a>* 情况三</h4> 
<p>监视<code>reactive</code>定义的【对象类型】数据，且默认开启了深度监视。</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h1&gt;情况三：监视【reactive】定义的【对象类型】数据&lt;/h1&gt;
    &lt;h2&gt;姓名：{<!-- -->{ person.name }}&lt;/h2&gt;
    &lt;h2&gt;年龄：{<!-- -->{ person.age }}&lt;/h2&gt;
    &lt;button @click="changeName"&gt;修改名字&lt;/button&gt;
    &lt;button @click="changeAge"&gt;修改年龄&lt;/button&gt;
    &lt;button @click="changePerson"&gt;修改整个人&lt;/button&gt;
    &lt;hr&gt;
    &lt;h2&gt;测试：{<!-- -->{obj.a.b.c}}&lt;/h2&gt;
    &lt;button @click="test"&gt;修改obj.a.b.c&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="Person"&gt;
  import {reactive,watch} from 'vue'
  // 数据
  let person = reactive({
    name:'张三',
    age:18
  })
  let obj = reactive({
    a:{
      b:{
        c:666
      }
    }
  })
  // 方法
  function changeName(){
    person.name += '~'
  }
  function changeAge(){
    person.age += 1
  }
  function changePerson(){
    Object.assign(person,{name:'李四',age:80})
  }
  function test(){
    obj.a.b.c = 888
  }

  // 监视，情况三：监视【reactive】定义的【对象类型】数据，且默认是开启深度监视的
  watch(person,(newValue,oldValue)=&gt;{
    console.log('person变化了',newValue,oldValue)
  })
  watch(obj,(newValue,oldValue)=&gt;{
    console.log('Obj变化了',newValue,oldValue)
  })
&lt;/script&gt;
</code></pre> 
<h4><a id="__806"></a>* 情况四</h4> 
<p>监视<code>ref</code>或<code>reactive</code>定义的【对象类型】数据中的<strong>某个属性</strong>，注意点如下：</p> 
<ol><li>若该属性值<strong>不是</strong>【对象类型】，需要写成函数形式。</li><li>若该属性值是<strong>依然</strong>是【对象类型】，可直接编，也可写成函数，建议写成函数。</li></ol> 
<p>结论：监视的要是对象里的属性，那么最好写函数式，注意点：若是对象监视的是地址值，需要关注对象内部，需要手动开启深度监视。</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h1&gt;情况四：监视【ref】或【reactive】定义的【对象类型】数据中的某个属性&lt;/h1&gt;
    &lt;h2&gt;姓名：{<!-- -->{ person.name }}&lt;/h2&gt;
    &lt;h2&gt;年龄：{<!-- -->{ person.age }}&lt;/h2&gt;
    &lt;h2&gt;汽车：{<!-- -->{ person.car.c1 }}、{<!-- -->{ person.car.c2 }}&lt;/h2&gt;
    &lt;button @click="changeName"&gt;修改名字&lt;/button&gt;
    &lt;button @click="changeAge"&gt;修改年龄&lt;/button&gt;
    &lt;button @click="changeC1"&gt;修改第一台车&lt;/button&gt;
    &lt;button @click="changeC2"&gt;修改第二台车&lt;/button&gt;
    &lt;button @click="changeCar"&gt;修改整个车&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="Person"&gt;
  import {reactive,watch} from 'vue'

  // 数据
  let person = reactive({
    name:'张三',
    age:18,
    car:{
      c1:'奔驰',
      c2:'宝马'
    }
  })
  // 方法
  function changeName(){
    person.name += '~'
  }
  function changeAge(){
    person.age += 1
  }
  function changeC1(){
    person.car.c1 = '奥迪'
  }
  function changeC2(){
    person.car.c2 = '大众'
  }
  function changeCar(){
    person.car = {c1:'雅迪',c2:'爱玛'}
  }

  // 监视，情况四：监视响应式对象中的某个属性，且该属性是基本类型的，要写成函数式
  /* watch(()=&gt; person.name,(newValue,oldValue)=&gt;{
    console.log('person.name变化了',newValue,oldValue)
  }) */

  // 监视，情况四：监视响应式对象中的某个属性，且该属性是对象类型的，可以直接写，也能写函数，更推荐写函数
  watch(()=&gt;person.car,(newValue,oldValue)=&gt;{
    console.log('person.car变化了',newValue,oldValue)
  },{deep:true})
&lt;/script&gt;
</code></pre> 
<h4><a id="__871"></a>* 情况五</h4> 
<p>监视上述的多个数据</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h1&gt;情况五：监视上述的多个数据&lt;/h1&gt;
    &lt;h2&gt;姓名：{<!-- -->{ person.name }}&lt;/h2&gt;
    &lt;h2&gt;年龄：{<!-- -->{ person.age }}&lt;/h2&gt;
    &lt;h2&gt;汽车：{<!-- -->{ person.car.c1 }}、{<!-- -->{ person.car.c2 }}&lt;/h2&gt;
    &lt;button @click="changeName"&gt;修改名字&lt;/button&gt;
    &lt;button @click="changeAge"&gt;修改年龄&lt;/button&gt;
    &lt;button @click="changeC1"&gt;修改第一台车&lt;/button&gt;
    &lt;button @click="changeC2"&gt;修改第二台车&lt;/button&gt;
    &lt;button @click="changeCar"&gt;修改整个车&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="Person"&gt;
  import {reactive,watch} from 'vue'

  // 数据
  let person = reactive({
    name:'张三',
    age:18,
    car:{
      c1:'奔驰',
      c2:'宝马'
    }
  })
  // 方法
  function changeName(){
    person.name += '~'
  }
  function changeAge(){
    person.age += 1
  }
  function changeC1(){
    person.car.c1 = '奥迪'
  }
  function changeC2(){
    person.car.c2 = '大众'
  }
  function changeCar(){
    person.car = {c1:'雅迪',c2:'爱玛'}
  }

  // 监视，情况五：监视上述的多个数据
  watch([()=&gt;person.name,person.car],(newValue,oldValue)=&gt;{
    console.log('person.car变化了',newValue,oldValue)
  },{deep:true})

&lt;/script&gt;
</code></pre> 
<h3><a id="310_watchEffect_927"></a>3.10. 【watchEffect】</h3> 
<ul><li> <p>官网：立即运行一个函数，同时响应式地追踪其依赖，并在依赖更改时重新执行该函数。</p> </li><li> <p><code>watch</code>对比<code>watchEffect</code></p> 
  <blockquote> 
   <ol><li> <p>都能监听响应式数据的变化，不同的是监听数据变化的方式不同</p> </li><li> <p><code>watch</code>：要明确指出监视的数据</p> </li><li> <p><code>watchEffect</code>：不用明确指出监视的数据（函数中用到哪些属性，那就监视哪些属性）。</p> </li></ol> 
  </blockquote> </li><li> <p>示例代码：</p> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h1&gt;需求：水温达到50℃，或水位达到20cm，则联系服务器&lt;/h1&gt;
    &lt;h2 id="demo"&gt;水温：{<!-- -->{temp}}&lt;/h2&gt;
    &lt;h2&gt;水位：{<!-- -->{height}}&lt;/h2&gt;
    &lt;button @click="changePrice"&gt;水温+1&lt;/button&gt;
    &lt;button @click="changeSum"&gt;水位+10&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="Person"&gt;
  import {ref,watch,watchEffect} from 'vue'
  // 数据
  let temp = ref(0)
  let height = ref(0)

  // 方法
  function changePrice(){
    temp.value += 10
  }
  function changeSum(){
    height.value += 1
  }

  // 用watch实现，需要明确的指出要监视：temp、height
  watch([temp,height],(value)=&gt;{
    // 从value中获取最新的temp值、height值
    const [newTemp,newHeight] = value
    // 室温达到50℃，或水位达到20cm，立刻联系服务器
    if(newTemp &gt;= 50 || newHeight &gt;= 20){
      console.log('联系服务器')
    }
  })

  // 用watchEffect实现，不用
  const stopWtach = watchEffect(()=&gt;{
    // 室温达到50℃，或水位达到20cm，立刻联系服务器
    if(temp.value &gt;= 50 || height.value &gt;= 20){
      console.log(document.getElementById('demo')?.innerText)
      console.log('联系服务器')
    }
    // 水温达到100，或水位达到50，取消监视
    if(temp.value === 100 || height.value === 50){
      console.log('清理了')
      stopWtach()
    }
  })
&lt;/script&gt;
</code></pre> </li></ul> 
<h3><a id="311__ref__994"></a>3.11. 【标签的 ref 属性】</h3> 
<p>作用：用于注册模板引用。</p> 
<blockquote> 
 <ul><li> <p>用在普通<code>DOM</code>标签上，获取的是<code>DOM</code>节点。</p> </li><li> <p>用在组件标签上，获取的是组件实例对象。</p> </li></ul> 
</blockquote> 
<p>用在普通<code>DOM</code>标签上：</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h1 ref="title1"&gt;尚硅谷&lt;/h1&gt;
    &lt;h2 ref="title2"&gt;前端&lt;/h2&gt;
    &lt;h3 ref="title3"&gt;Vue&lt;/h3&gt;
    &lt;input type="text" ref="inpt"&gt; &lt;br&gt;&lt;br&gt;
    &lt;button @click="showLog"&gt;点我打印内容&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="Person"&gt;
  import {ref} from 'vue'
	
  let title1 = ref()
  let title2 = ref()
  let title3 = ref()

  function showLog(){
    // 通过id获取元素
    const t1 = document.getElementById('title1')
    // 打印内容
    console.log((t1 as HTMLElement).innerText)
    console.log((&lt;HTMLElement&gt;t1).innerText)
    console.log(t1?.innerText)
    
		/************************************/
		
    // 通过ref获取元素
    console.log(title1.value)
    console.log(title2.value)
    console.log(title3.value)
  }
&lt;/script&gt;
</code></pre> 
<p>用在组件标签上：</p> 
<pre><code class="prism language-vue">&lt;!-- 父组件App.vue --&gt;
&lt;template&gt;
  &lt;Person ref="ren"/&gt;
  &lt;button @click="test"&gt;测试&lt;/button&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="App"&gt;
  import Person from './components/Person.vue'
  import {ref} from 'vue'

  let ren = ref()

  function test(){
    console.log(ren.value.name)
    console.log(ren.value.age)
  }
&lt;/script&gt;


&lt;!-- 子组件Person.vue中要使用defineExpose暴露内容 --&gt;
&lt;script lang="ts" setup name="Person"&gt;
  import {ref,defineExpose} from 'vue'
	// 数据
  let name = ref('张三')
  let age = ref(18)
  /****************************/
  /****************************/
  // 使用defineExpose将组件中的数据交给外部
  defineExpose({name,age})
&lt;/script&gt;
</code></pre> 
<h3><a id="312_props_1077"></a>3.12. 【props】</h3> 
<blockquote> 
 <pre><code class="prism language-js"><span class="token comment">// 定义一个接口，限制每个Person对象的格式</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">PersonInter</span> <span class="token punctuation">{<!-- --></span>
<span class="token literal-property property">id</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
<span class="token literal-property property">name</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
 <span class="token literal-property property">age</span><span class="token operator">:</span>number
<span class="token punctuation">}</span>

<span class="token comment">// 定义一个自定义类型Persons</span>
<span class="token keyword">export</span> type Persons <span class="token operator">=</span> Array<span class="token operator">&lt;</span>PersonInter<span class="token operator">&gt;</span>
</code></pre> 
 <p><code>App.vue</code>中代码：</p> 
 <pre><code class="prism language-vue">&lt;template&gt;
	&lt;Person :list="persons"/&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="App"&gt;
import Person from './components/Person.vue'
import {reactive} from 'vue'
 import {type Persons} from './types'

 let persons = reactive&lt;Persons&gt;([
  {id:'e98219e12',name:'张三',age:18},
   {id:'e98219e13',name:'李四',age:19},
    {id:'e98219e14',name:'王五',age:20}
  ])
&lt;/script&gt;

</code></pre> 
 <p><code>Person.vue</code>中代码：</p> 
 <pre><code class="prism language-Vue">&lt;template&gt;
&lt;div class="person"&gt;
&lt;ul&gt;
  &lt;li v-for="item in list" :key="item.id"&gt;
     {<!-- -->{item.name}}--{<!-- -->{item.age}}
   &lt;/li&gt;
 &lt;/ul&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="Person"&gt;
import {defineProps} from 'vue'
import {type PersonInter} from '@/types'

// 第一种写法：仅接收
// const props = defineProps(['list'])

// 第二种写法：接收+限制类型
// defineProps&lt;{list:Persons}&gt;()

// 第三种写法：接收+限制类型+指定默认值+限制必要性
let props = withDefaults(defineProps&lt;{list?:Persons}&gt;(),{
  list:()=&gt;[{id:'asdasg01',name:'小猪佩奇',age:18}]
})
console.log(props)
&lt;/script&gt;
</code></pre> 
</blockquote> 
<h3><a id="313__1143"></a>3.13. 【生命周期】</h3> 
<ul><li> <p>概念：<code>Vue</code>组件实例在创建时要经历一系列的初始化步骤，在此过程中<code>Vue</code>会在合适的时机，调用特定的函数，从而让开发者有机会在特定阶段运行自己的代码，这些特定的函数统称为：生命周期钩子<br> <img src="https://images2.imgbox.com/5a/03/4sPgLeXq_o.png" alt="在这里插入图片描述"></p> </li><li> <p>规律：</p> 
  <blockquote> 
   <p>生命周期整体分为四个阶段，分别是：<strong>创建、挂载、更新、销毁</strong>，每个阶段都有两个钩子，一前一后。</p> 
  </blockquote> </li><li> <p><code>Vue2</code>的生命周期</p> 
  <blockquote> 
   <p>创建阶段：<code>beforeCreate</code>、<code>created</code></p> 
   <p>挂载阶段：<code>beforeMount</code>、<code>mounted</code></p> 
   <p>更新阶段：<code>beforeUpdate</code>、<code>updated</code></p> 
   <p>销毁阶段：<code>beforeDestroy</code>、<code>destroyed</code></p> 
  </blockquote> </li><li> <p><code>Vue3</code>的生命周期</p> 
  <blockquote> 
   <p>创建阶段：<code>setup</code></p> 
   <p>挂载阶段：<code>onBeforeMount</code>、<code>onMounted</code></p> 
   <p>更新阶段：<code>onBeforeUpdate</code>、<code>onUpdated</code></p> 
   <p>卸载阶段：<code>onBeforeUnmount</code>、<code>onUnmounted</code></p> 
  </blockquote> </li><li> <p>常用的钩子：<code>onMounted</code>(挂载完毕)、<code>onUpdated</code>(更新完毕)、<code>onBeforeUnmount</code>(卸载之前)</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="person"&gt;
    &lt;h2&gt;当前求和为：{<!-- -->{ sum }}&lt;/h2&gt;
    &lt;button @click="changeSum"&gt;点我sum+1&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;!-- vue3写法 --&gt;
&lt;script lang="ts" setup name="Person"&gt;
  import { 
    ref, 
    onBeforeMount, 
    onMounted, 
    onBeforeUpdate, 
    onUpdated, 
    onBeforeUnmount, 
    onUnmounted 
  } from 'vue'

  // 数据
  let sum = ref(0)
  // 方法
  function changeSum() {
    sum.value += 1
  }
  console.log('setup')
  // 生命周期钩子
  onBeforeMount(()=&gt;{
    console.log('挂载之前')
  })
  onMounted(()=&gt;{
    console.log('挂载完毕')
  })
  onBeforeUpdate(()=&gt;{
    console.log('更新之前')
  })
  onUpdated(()=&gt;{
    console.log('更新完毕')
  })
  onBeforeUnmount(()=&gt;{
    console.log('卸载之前')
  })
  onUnmounted(()=&gt;{
    console.log('卸载完毕')
  })
&lt;/script&gt;
</code></pre> </li></ul> 
<h3><a id="314_hook_1225"></a>3.14. 【自定义hook】</h3> 
<ul><li> <p>什么是<code>hook</code>？—— 本质是一个函数，把<code>setup</code>函数中使用的<code>Composition API</code>进行了封装，类似于<code>vue2.x</code>中的<code>mixin</code>。</p> </li><li> <p>自定义<code>hook</code>的优势：复用代码, 让<code>setup</code>中的逻辑更清楚易懂。</p> </li></ul> 
<p>示例代码：</p> 
<ul><li> <p><code>useSum.ts</code>中内容如下：</p> <pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>ref<span class="token punctuation">,</span>onMounted<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    sum<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    sum<span class="token punctuation">.</span>value <span class="token operator">-=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">//向外部暴露数据</span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>sum<span class="token punctuation">,</span>increment<span class="token punctuation">,</span>decrement<span class="token punctuation">}</span>
<span class="token punctuation">}</span>		
</code></pre> </li><li> <p><code>useDog.ts</code>中内容如下：</p> <pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>reactive<span class="token punctuation">,</span>onMounted<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> axios<span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>AxiosError<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> dogList <span class="token operator">=</span> reactive<span class="token operator">&lt;</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// 方法</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 发请求</span>
      <span class="token keyword">let</span> <span class="token punctuation">{<!-- --></span>data<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://dog.ceo/api/breed/pembroke/images/random'</span><span class="token punctuation">)</span>
      <span class="token comment">// 维护数据</span>
      dogList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 处理错误</span>
      <span class="token keyword">const</span> err <span class="token operator">=</span> <span class="token operator">&lt;</span>AxiosError<span class="token operator">&gt;</span>error
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 挂载钩子</span>
  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">getDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
	
  <span class="token comment">//向外部暴露数据</span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>dogList<span class="token punctuation">,</span>getDog<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>组件中具体使用：</p> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;h2&gt;当前求和为：{<!-- -->{sum}}&lt;/h2&gt;
  &lt;button @click="increment"&gt;点我+1&lt;/button&gt;
  &lt;button @click="decrement"&gt;点我-1&lt;/button&gt;
  &lt;hr&gt;
  &lt;img v-for="(u,index) in dogList.urlList" :key="index" :src="(u as string)"&gt; 
  &lt;span v-show="dogList.isLoading"&gt;加载中......&lt;/span&gt;&lt;br&gt;
  &lt;button @click="getDog"&gt;再来一只狗&lt;/button&gt;
&lt;/template&gt;

&lt;script lang="ts"&gt;
  import {defineComponent} from 'vue'

  export default defineComponent({
    name:'App',
  })
&lt;/script&gt;

&lt;script setup lang="ts"&gt;
  import useSum from './hooks/useSum'
  import useDog from './hooks/useDog'
	
  let {sum,increment,decrement} = useSum()
  let {dogList,getDog} = useDog()
&lt;/script&gt;
</code></pre> </li></ul> 
<hr> 
<h2><a id="4__1323"></a>4. 路由</h2> 
<h3><a id="41__1325"></a>4.1. 【对路由的理解】</h3> 
<p><img src="https://images2.imgbox.com/03/90/F29MSRkg_o.png" alt="在这里插入图片描述"><br> SPA（single page web application）应用——单页面应用（只有一个.html）<br> <img src="https://images2.imgbox.com/77/ba/DYun72rT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/11/29/Bd5OCc86_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/22/6c/W104osyC_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="42__1333"></a>4.2. 【基本切换效果】</h3> 
<ul><li> <p><code>Vue3</code>中要使用<code>vue-router</code>的最新版本，目前是<code>4</code>版本。</p> </li><li> <p>路由配置文件代码如下：</p> <pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>createRouter<span class="token punctuation">,</span>createWebHistory<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'@/pages/Home.vue'</span>
<span class="token keyword">import</span> News <span class="token keyword">from</span> <span class="token string">'@/pages/News.vue'</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">'@/pages/About.vue'</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">history</span><span class="token operator">:</span><span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>Home
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>About
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre> </li></ul> 
<ul><li> <p><code>main.ts</code>代码如下：</p> <pre><code class="prism language-js"><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router/index'</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> </li></ul> 
<ul><li> <p><code>App.vue</code>代码如下</p> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="app"&gt;
    &lt;h2 class="title"&gt;Vue路由测试&lt;/h2&gt;
    &lt;!-- 导航区 --&gt;
    &lt;div class="navigate"&gt;
      &lt;RouterLink to="/home" active-class="active"&gt;首页&lt;/RouterLink&gt;
      &lt;RouterLink to="/news" active-class="active"&gt;新闻&lt;/RouterLink&gt;
      &lt;RouterLink to="/about" active-class="active"&gt;关于&lt;/RouterLink&gt;
    &lt;/div&gt;
    &lt;!-- 展示区 --&gt;
    &lt;div class="main-content"&gt;
      &lt;RouterView&gt;&lt;/RouterView&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup name="App"&gt;
  import {RouterLink,RouterView} from 'vue-router'  
&lt;/script&gt;
</code></pre> </li></ul> 
<h3><a id="43__1394"></a>4.3. 【两个注意点】</h3> 
<blockquote> 
 <ol><li> <p>路由组件通常存放在<code>pages</code> 或 <code>views</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</p> </li><li> <p>通过点击导航，视觉效果上“消失” 了的路由组件，默认是被<strong>卸载</strong>掉的，需要的时候再去<strong>挂载</strong>。</p> </li></ol> 
</blockquote> 
<p><img src="https://images2.imgbox.com/e3/d5/5e2Yx3Wp_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="44_1402"></a>4.4.【路由器工作模式】</h3> 
<p><img src="https://images2.imgbox.com/a7/35/w3n7lUKa_o.png" alt="在这里插入图片描述"></p> 
<ol><li> <p><code>history</code>模式</p> 
  <blockquote> 
   <p>优点：<code>URL</code>更加美观，不带有<code>#</code>，更接近传统的网站<code>URL</code>。</p> 
   <p>缺点：后期项目上线，需要服务端配合处理路径问题，否则刷新会有<code>404</code>错误。</p> 
   <pre><code class="prism language-js"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">history</span><span class="token operator">:</span><span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//history模式</span>
	<span class="token comment">/******/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
  </blockquote> </li><li> <p><code>hash</code>模式</p> 
  <blockquote> 
   <p>优点：兼容性更好，因为不需要服务器端处理路径。</p> 
   <p>缺点：<code>URL</code>带有<code>#</code>不太美观，且在<code>SEO</code>优化方面相对较差。</p> 
   <pre><code class="prism language-js"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">history</span><span class="token operator">:</span><span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//hash模式</span>
	<span class="token comment">/******/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
  </blockquote> </li></ol> 
<h3><a id="45_to_1431"></a>4.5. 【to的两种写法】</h3> 
<pre><code class="prism language-vue">&lt;!-- 第一种：to的字符串写法 --&gt;
&lt;router-link active-class="active" to="/home"&gt;主页&lt;/router-link&gt;

&lt;!-- 第二种：to的对象写法 --&gt;
&lt;router-link active-class="active" :to="{path:'/home'}"&gt;Home&lt;/router-link&gt;
</code></pre> 
<h3><a id="46__1441"></a>4.6. 【命名路由】</h3> 
<p>作用：可以简化路由跳转及传参（后面就讲）。</p> 
<p>给路由规则命名：</p> 
<pre><code class="prism language-js"><span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'zhuye'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span>Home
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xinwen'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/news'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span>News<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'guanyu'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span>About
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> 
<p>跳转路由：</p> 
<pre><code class="prism language-vue">&lt;!--简化前：需要写完整的路径（to的字符串写法） --&gt;
&lt;router-link to="/news/detail"&gt;跳转&lt;/router-link&gt;

&lt;!--简化后：直接通过名字跳转（to的对象写法配合name属性） --&gt;
&lt;router-link :to="{name:'guanyu'}"&gt;跳转&lt;/router-link&gt;
</code></pre> 
<h3><a id="47__1479"></a>4.7. 【嵌套路由】</h3> 
<ol><li> <p>编写<code>News</code>的子路由：<code>Detail.vue</code></p> </li><li> <p>配置路由规则，使用<code>children</code>配置项：</p> <pre><code class="prism language-ts"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  history<span class="token operator">:</span><span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	routes<span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token punctuation">{<!-- --></span>
			name<span class="token operator">:</span><span class="token string">'zhuye'</span><span class="token punctuation">,</span>
			path<span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
			component<span class="token operator">:</span>Home
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{<!-- --></span>
			name<span class="token operator">:</span><span class="token string">'xinwen'</span><span class="token punctuation">,</span>
			path<span class="token operator">:</span><span class="token string">'/news'</span><span class="token punctuation">,</span>
			component<span class="token operator">:</span>News<span class="token punctuation">,</span>
			children<span class="token operator">:</span><span class="token punctuation">[</span>
				<span class="token punctuation">{<!-- --></span>
					name<span class="token operator">:</span><span class="token string">'xiang'</span><span class="token punctuation">,</span>
					path<span class="token operator">:</span><span class="token string">'detail'</span><span class="token punctuation">,</span>
					component<span class="token operator">:</span>Detail
				<span class="token punctuation">}</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{<!-- --></span>
			name<span class="token operator">:</span><span class="token string">'guanyu'</span><span class="token punctuation">,</span>
			path<span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>
			component<span class="token operator">:</span>About
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre> </li><li> <p>跳转路由（记得要加完整路径）：</p> <pre><code class="prism language-vue">&lt;router-link to="/news/detail"&gt;xxxx&lt;/router-link&gt;
&lt;!-- 或 --&gt;
&lt;router-link :to="{path:'/news/detail'}"&gt;xxxx&lt;/router-link&gt;
</code></pre> </li><li> <p>记得去<code>Home</code>组件中预留一个<code>&lt;router-view&gt;</code></p> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="news"&gt;
    &lt;nav class="news-list"&gt;
      &lt;RouterLink v-for="news in newsList" :key="news.id" :to="{path:'/news/detail'}"&gt;
        {<!-- -->{news.name}}
      &lt;/RouterLink&gt;
    &lt;/nav&gt;
    &lt;div class="news-detail"&gt;
      &lt;RouterView/&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre> </li></ol> 
<h3><a id="48__1543"></a>4.8. 【路由传参】</h3> 
<h4><a id="query_1545"></a>query参数</h4> 
<ol><li> <p>传递参数</p> <pre><code class="prism language-vue">&lt;!-- 跳转并携带query参数（to的字符串写法） --&gt;
&lt;router-link to="/news/detail?a=1&amp;b=2&amp;content=欢迎你"&gt;
	跳转
&lt;/router-link&gt;
				
&lt;!-- 跳转并携带query参数（to的对象写法） --&gt;
&lt;RouterLink 
  :to="{
    //name:'xiang', //用name也可以跳转
    path:'/news/detail',
    query:{
      id:news.id,
      title:news.title,
      content:news.content
    }
  }"
&gt;
  {<!-- -->{news.title}}
&lt;/RouterLink&gt;
</code></pre> </li><li> <p>接收参数：</p> <pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>useRoute<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 打印query参数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>query<span class="token punctuation">)</span>
</code></pre> </li></ol> 
<h4><a id="params_1581"></a>params参数</h4> 
<ol><li> <p>传递参数</p> <pre><code class="prism language-vue">&lt;!-- 跳转并携带params参数（to的字符串写法） --&gt;
&lt;RouterLink :to="`/news/detail/001/新闻001/内容001`"&gt;{<!-- -->{news.title}}&lt;/RouterLink&gt;
				
&lt;!-- 跳转并携带params参数（to的对象写法） --&gt;
&lt;RouterLink 
  :to="{
    name:'xiang', //用name跳转
    params:{
      id:news.id,
      title:news.title,
      content:news.title
    }
  }"
&gt;
  {<!-- -->{news.title}}
&lt;/RouterLink&gt;
</code></pre> </li><li> <p>接收参数：</p> <pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>useRoute<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 打印params参数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
</code></pre> </li></ol> 
<blockquote> 
 <p>备注1：传递<code>params</code>参数时，若使用<code>to</code>的对象写法，必须使用<code>name</code>配置项，不能用<code>path</code>。</p> 
 <p>备注2：传递<code>params</code>参数时，需要提前在规则中占位。</p> 
</blockquote> 
<h3><a id="49_props_1617"></a>4.9. 【路由的props配置】</h3> 
<p>作用：让路由组件更方便的收到参数（可以将路由参数作为<code>props</code>传给组件）</p> 
<pre><code class="prism language-js"><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xiang'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'detail/:id/:title/:content'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">component</span><span class="token operator">:</span>Detail<span class="token punctuation">,</span>

  <span class="token comment">// props的对象写法，作用：把对象中的每一组key-value作为props传给Detail组件</span>
  <span class="token comment">// props:{a:1,b:2,c:3}, </span>

  <span class="token comment">// props的布尔值写法，作用：把收到了每一组params参数，作为props传给Detail组件</span>
  <span class="token comment">// props:true</span>
  
  <span class="token comment">// props的函数写法，作用：把返回的对象中每一组key-value作为props传给Detail组件</span>
  <span class="token function">props</span><span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> route<span class="token punctuation">.</span>query
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="410__replace_1640"></a>4.10. 【 replace属性】</h3> 
<ol><li> <p>作用：控制路由跳转时操作浏览器历史记录的模式。</p> </li><li> <p>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>：</p> 
  <ul><li><code>push</code>是追加历史记录（默认值）。</li><li><code>replace</code>是替换当前记录。</li></ul> </li><li> <p>开启<code>replace</code>模式：</p> <pre><code class="prism language-vue">&lt;RouterLink replace .......&gt;News&lt;/RouterLink&gt;
</code></pre> </li></ol> 
<h3><a id="411__1655"></a>4.11. 【编程式导航】</h3> 
<p>路由组件的两个重要的属性：<code>$route</code>和<code>$router</code>变成了两个<code>hooks</code></p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>useRoute<span class="token punctuation">,</span>useRouter<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>query<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>parmas<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span>push<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span>replace<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="412__1671"></a>4.12. 【重定向】</h3> 
<ol><li> <p>作用：将特定的路径，重新定向到已有路由。</p> </li><li> <p>具体编码：</p> <pre><code class="prism language-js"><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">'/about'</span>
<span class="token punctuation">}</span>
</code></pre> </li></ol> 
<h2><a id="5_pinia_1686"></a>5. pinia</h2> 
<p><img src="https://images2.imgbox.com/d8/eb/5ysPLgTa_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a2/37/oV1Z4f30_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="51_1690"></a>5.1【准备一个效果】</h3> 
<p><img src="https://images2.imgbox.com/e1/7b/mY7z2Nil_o.gif" alt="在这里插入图片描述"></p> 
<h3><a id="52_pinia__1694"></a>5.2【搭建 pinia 环境】</h3> 
<p>第一步：<code>npm install pinia</code></p> 
<p>第二步：操作<code>src/main.ts</code></p> 
<pre><code class="prism language-ts"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>

<span class="token comment">/* 引入createPinia，用于创建pinia */</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token comment">/* 创建pinia */</span>
<span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

<span class="token comment">/* 使用插件 */</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> 
<p>此时开发者工具中已经有了<code>pinia</code>选项</p> 
<p><img src="https://images2.imgbox.com/c1/87/WFXhuJCp_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="53_1721"></a>5.3【存储+读取数据】</h3> 
<ol><li> <p><code>Store</code>是一个保存：<strong>状态</strong>、<strong>业务逻辑</strong> 的实体，每个组件都可以<strong>读取</strong>、<strong>写入</strong>它。</p> </li><li> <p>它有三个概念：<code>state</code>、<code>getter</code>、<code>action</code>，相当于组件中的： <code>data</code>、 <code>computed</code> 和 <code>methods</code>。</p> </li><li> <p>具体编码：<code>src/store/count.ts</code></p> <pre><code class="prism language-ts"><span class="token comment">// 引入defineStore用于创建store</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>defineStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token comment">// 定义并暴露一个store（这里用分别暴露，也可以使用统一暴露或默认暴露。总之得对外暴露）		</span>
<span class="token comment">//@@defineStore有两个参数值,第一个参数为Id值,最好和文件名保持一致;第二个参数为配置对象</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useCountStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 动作</span>
  actions<span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 状态（真正存储数据的地方）</span>
  <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      sum<span class="token operator">:</span><span class="token number">6</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 计算</span>
  getters<span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>具体编码：<code>src/store/talk.ts</code></p> <pre><code class="prism language-js"><span class="token comment">// 引入defineStore用于创建store</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>defineStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token comment">// 定义并暴露一个store</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useTalkStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'talk'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 动作</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 状态</span>
  <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">talkList</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'yuysada01'</span><span class="token punctuation">,</span><span class="token literal-property property">content</span><span class="token operator">:</span><span class="token string">'你今天有点怪，哪里怪？怪好看的！'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
     		<span class="token punctuation">{<!-- --></span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'yuysada02'</span><span class="token punctuation">,</span><span class="token literal-property property">content</span><span class="token operator">:</span><span class="token string">'草莓、蓝莓、蔓越莓，你想我了没？'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'yuysada03'</span><span class="token punctuation">,</span><span class="token literal-property property">content</span><span class="token operator">:</span><span class="token string">'心里给你留了一块地，我的死心塌地'</span><span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 计算</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>组件中使用<code>state</code>中的数据</p> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;h2&gt;当前求和为：{<!-- -->{ sumStore.sum }}&lt;/h2&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="Count"&gt;
  // 引入对应的useXxxxxStore	
  import {useSumStore} from '@/store/sum'
  
  // 调用useXxxxxStore得到对应的store
  const sumStore = useSumStore()
&lt;/script&gt;
</code></pre> <pre><code class="prism language-vue">&lt;template&gt;
	&lt;ul&gt;
    &lt;li v-for="talk in talkStore.talkList" :key="talk.id"&gt;
      {<!-- -->{ talk.content }}
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="Count"&gt;
  import axios from 'axios'
  import {useTalkStore} from '@/store/talk'

  const talkStore = useTalkStore()
&lt;/script&gt;
</code></pre> </li></ol> 
<h3><a id="54_1809"></a>5.4.【修改数据】(三种方式)</h3> 
<ol><li> <p>第一种修改方式，直接修改</p> <pre><code class="prism language-ts">countStore<span class="token punctuation">.</span>sum <span class="token operator">=</span> <span class="token number">666</span>
</code></pre> </li><li> <p>第二种修改方式：批量修改</p> <pre><code class="prism language-ts">countStore<span class="token punctuation">.</span><span class="token function">$patch</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  sum<span class="token operator">:</span><span class="token number">999</span><span class="token punctuation">,</span>
  school<span class="token operator">:</span><span class="token string">'atguigu'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>第三种修改方式：借助<code>action</code>修改（<code>action</code>中可以编写一些业务逻辑）</p> <pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useCountStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">/*************/</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//加</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span>number</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sum <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//操作countStore中的sum</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sum <span class="token operator">+=</span> value
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//减</span>
    <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span>number</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sum <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sum <span class="token operator">-=</span> value
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/*************/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>组件中调用<code>action</code>即可</p> <pre><code class="prism language-js"><span class="token comment">// 使用countStore</span>
<span class="token keyword">const</span> countStore <span class="token operator">=</span> <span class="token function">useCountStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 调用对应action</span>
countStore<span class="token punctuation">.</span><span class="token function">incrementOdd</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
</code></pre> </li></ol> 
<h3><a id="55storeToRefs_1863"></a>5.5.【storeToRefs】</h3> 
<ul><li>借助<code>storeToRefs</code>将<code>store</code>中的数据转为<code>ref</code>对象，方便在模板中使用。</li><li>注意：<code>pinia</code>提供的<code>storeToRefs</code>只会将数据做转换，而<code>Vue</code>的<code>toRefs</code>会转换<code>store</code>中数据。</li></ul> 
<pre><code class="prism language-vue">&lt;template&gt;
	&lt;div class="count"&gt;
		&lt;h2&gt;当前求和为：{<!-- -->{sum}}&lt;/h2&gt;
	&lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="Count"&gt;
  import { useCountStore } from '@/store/count'
  /* 引入storeToRefs */
  import { storeToRefs } from 'pinia'

	/* 得到countStore */
  const countStore = useCountStore()
  /* 使用storeToRefs转换countStore，随后解构 */
  const {sum} = storeToRefs(countStore)
&lt;/script&gt;

</code></pre> 
<h3><a id="56getters_1888"></a>5.6.【getters】</h3> 
<ol><li> <p>概念：当<code>state</code>中的数据，需要经过处理后再使用时，可以使用<code>getters</code>配置。</p> </li><li> <p>追加<code>getters</code>配置。</p> <pre><code class="prism language-js"><span class="token comment">// 引入defineStore用于创建store</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>defineStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token comment">// 定义并暴露一个store</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useCountStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 动作</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">/************/</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 状态</span>
  <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">sum</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token literal-property property">school</span><span class="token operator">:</span><span class="token string">'atguigu'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 计算</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">bigSum</span><span class="token operator">:</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token operator">:</span><span class="token parameter">number</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>sum <span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token function">upperSchool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>string<span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span> school<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>组件中读取数据：</p> <pre><code class="prism language-js"><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>increment<span class="token punctuation">,</span>decrement<span class="token punctuation">}</span> <span class="token operator">=</span> countStore
<span class="token keyword">let</span> <span class="token punctuation">{<!-- --></span>sum<span class="token punctuation">,</span>school<span class="token punctuation">,</span>bigSum<span class="token punctuation">,</span>upperSchool<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">storeToRefs</span><span class="token punctuation">(</span>countStore<span class="token punctuation">)</span>
</code></pre> </li></ol> 
<h3><a id="57subscribe_1930"></a>5.7.【$subscribe】</h3> 
<p>通过 store 的 <code>$subscribe()</code> 方法侦听 <code>state</code> 及其变化</p> 
<pre><code class="prism language-ts">talkStore<span class="token punctuation">.</span><span class="token function">$subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>mutate<span class="token punctuation">,</span>state<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'LoveTalk'</span><span class="token punctuation">,</span>mutate<span class="token punctuation">,</span>state<span class="token punctuation">)</span>
  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'talk'</span><span class="token punctuation">,</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>talkList<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="58_store_1943"></a>5.8. 【store组合式写法】</h3> 
<pre><code class="prism language-ts"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>defineStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>nanoid<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'nanoid'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>reactive<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useTalkStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'talk'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// talkList就是state</span>
  <span class="token keyword">const</span> talkList <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>
    <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'talkList'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span>

  <span class="token comment">// getATalk函数相当于action</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getATalk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 发请求，下面这行的写法是：连续解构赋值+重命名</span>
    <span class="token keyword">let</span> <span class="token punctuation">{<!-- --></span>data<span class="token operator">:</span><span class="token punctuation">{<!-- --></span>content<span class="token operator">:</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://api.uomg.com/api/rand.qinghua?format=json'</span><span class="token punctuation">)</span>
    <span class="token comment">// 把请求回来的字符串，包装成一个对象</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>id<span class="token operator">:</span><span class="token function">nanoid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>title<span class="token punctuation">}</span>
    <span class="token comment">// 放到数组中</span>
    talkList<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>talkList<span class="token punctuation">,</span>getATalk<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="6__1972"></a>6. 组件通信</h2> 
<p><strong><code>Vue3</code>组件通信和<code>Vue2</code>的区别：</strong></p> 
<ul><li>移出事件总线，使用<code>mitt</code>代替。</li></ul> 
<ul><li><code>vuex</code>换成了<code>pinia</code>。</li><li>把<code>.sync</code>优化到了<code>v-model</code>里面了。</li><li>把<code>$listeners</code>所有的东西，合并到<code>$attrs</code>中了。</li><li><code>$children</code>被砍掉了。</li></ul> 
<p><strong>常见搭配形式：</strong></p> 
<p><img src="https://images2.imgbox.com/90/d9/3T4ekcIo_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="61_props_1987"></a>6.1. 【props】</h3> 
<p>概述：<code>props</code>是使用频率最高的一种通信方式，常用与 ：<strong>父 ↔ 子</strong>。</p> 
<ul><li>若 <strong>父传子</strong>：属性值是<strong>非函数</strong>。</li><li>若 <strong>子传父</strong>：属性值是<strong>函数</strong>。</li></ul> 
<p>父组件：</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="father"&gt;
    &lt;h3&gt;父组件，&lt;/h3&gt;
		&lt;h4&gt;我的车：{<!-- -->{ car }}&lt;/h4&gt;
		&lt;h4&gt;儿子给的玩具：{<!-- -->{ toy }}&lt;/h4&gt;
		&lt;Child :car="car" :getToy="getToy"/&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="Father"&gt;
	import Child from './Child.vue'
	import { ref } from "vue";
	// 数据
	const car = ref('奔驰')
	const toy = ref()
	// 方法
	function getToy(value:string){
		toy.value = value
	}
&lt;/script&gt;
</code></pre> 
<p>子组件</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="child"&gt;
    &lt;h3&gt;子组件&lt;/h3&gt;
		&lt;h4&gt;我的玩具：{<!-- -->{ toy }}&lt;/h4&gt;
		&lt;h4&gt;父给我的车：{<!-- -->{ car }}&lt;/h4&gt;
		&lt;button @click="getToy(toy)"&gt;玩具给父亲&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="Child"&gt;
	import { ref } from "vue";
	const toy = ref('奥特曼')
	
	defineProps(['car','getToy'])
&lt;/script&gt;
</code></pre> 
<h3><a id="62__2039"></a>6.2. 【自定义事件】</h3> 
<ol><li>概述：自定义事件常用于：<strong>子 =&gt; 父。</strong></li><li>注意区分好：原生事件、自定义事件。</li></ol> 
<ul><li>原生事件： 
  <ul><li>事件名是特定的（<code>click</code>、<code>mosueenter</code>等等）</li><li>事件对象<code>$event</code>: 是包含事件相关信息的对象（<code>pageX</code>、<code>pageY</code>、<code>target</code>、<code>keyCode</code>）</li></ul> </li><li>自定义事件： 
  <ul><li>事件名是任意名称</li><li><strong>事件对象<code>$event</code>: 是调用<code>emit</code>时所提供的数据，可以是任意类型！！！</strong></li></ul> </li></ul> 
<ol start="3"><li> <p>示例：</p> <pre><code class="prism language-html"><span class="token comment">&lt;!--在父组件中，给子组件绑定自定义事件：--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span> <span class="token attr-name">@send-toy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toy = $event<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!--注意区分原生事件与自定义事件中的$event--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toy = $event<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <pre><code class="prism language-js"><span class="token comment">//子组件中，触发事件：</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'send-toy'</span><span class="token punctuation">,</span> 具体数据<span class="token punctuation">)</span>
</code></pre> </li></ol> 
<h3><a id="63_mitt_2066"></a>6.3. 【mitt】</h3> 
<p><img src="https://images2.imgbox.com/c9/0a/Uzuf6rLE_o.png" alt="在这里插入图片描述"></p> 
<p>概述：与消息订阅与发布（<code>pubsub</code>）功能类似，可以实现任意组件间通信。</p> 
<p>安装<code>mitt</code></p> 
<pre><code class="prism language-shell"><span class="token function">npm</span> i mitt
</code></pre> 
<p>新建文件：<code>src\utils\emitter.ts</code></p> 
<pre><code class="prism language-javascript"><span class="token comment">// 引入mitt </span>
<span class="token keyword">import</span> mitt <span class="token keyword">from</span> <span class="token string">"mitt"</span><span class="token punctuation">;</span>

<span class="token comment">// 创建emitter</span>
<span class="token keyword">const</span> emitter <span class="token operator">=</span> <span class="token function">mitt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/*
  // 绑定事件
  emitter.on('abc',(value)=&gt;{
    console.log('abc事件被触发',value)
  })
  emitter.on('xyz',(value)=&gt;{
    console.log('xyz事件被触发',value)
  })

  setInterval(() =&gt; {
    // 触发事件
    emitter.emit('abc',666)
    emitter.emit('xyz',777)
  }, 1000);

  setTimeout(() =&gt; {
    // 清理事件
    emitter.all.clear()
  }, 3000); 
*/</span>

<span class="token comment">// 创建并暴露mitt</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> emitter
</code></pre> 
<p>接收数据的组件中：绑定事件、同时在销毁前解绑事件：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> emitter <span class="token keyword">from</span> <span class="token string">"@/utils/emitter"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> onUnmounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>

<span class="token comment">// 绑定事件</span>
emitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'send-toy'</span><span class="token punctuation">,</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'send-toy事件被触发'</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 解绑事件</span>
  emitter<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'send-toy'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>【第三步】：提供数据的组件，在合适的时候触发事件</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> emitter <span class="token keyword">from</span> <span class="token string">"@/utils/emitter"</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">sendToy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 触发事件</span>
  emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'send-toy'</span><span class="token punctuation">,</span>toy<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>注意这个重要的内置关系，总线依赖着这个内置关系</strong></p> 
<h3><a id="64vmodel_2141"></a>6.4.【v-model】</h3> 
<ol><li> <p>概述：实现 <strong>父↔子</strong> 之间相互通信。</p> </li><li> <p>前序知识 —— <code>v-model</code>的本质</p> <pre><code class="prism language-vue">&lt;!-- 使用v-model指令 --&gt;
&lt;input type="text" v-model="userName"&gt;

&lt;!-- v-model的本质是下面这行代码 --&gt;
&lt;input 
  type="text" 
  :value="userName" 
  @input="userName =(&lt;HTMLInputElement&gt;$event.target).value"
&gt;
</code></pre> </li><li> <p>组件标签上的<code>v-model</code>的本质：<code>:moldeValue</code> ＋ <code>update:modelValue</code>事件。</p> <pre><code class="prism language-vue">&lt;!-- 组件标签上使用v-model指令 --&gt;
&lt;AtguiguInput v-model="userName"/&gt;

&lt;!-- 组件标签上v-model的本质 --&gt;
&lt;AtguiguInput :modelValue="userName" @update:model-value="userName = $event"/&gt;
</code></pre> <p><code>AtguiguInput</code>组件中：</p> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="box"&gt;
    &lt;!--将接收的value值赋给input元素的value属性，目的是：为了呈现数据 --&gt;
		&lt;!--给input元素绑定原生input事件，触发input事件时，进而触发update:model-value事件--&gt;
    &lt;input 
       type="text" 
       :value="modelValue" 
       @input="emit('update:model-value',$event.target.value)"
    &gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="AtguiguInput"&gt;
  // 接收props
  defineProps(['modelValue'])
  // 声明事件
  const emit = defineEmits(['update:model-value'])
&lt;/script&gt;
</code></pre> </li><li> <p>也可以更换<code>value</code>，例如改成<code>abc</code></p> <pre><code class="prism language-vue">&lt;!-- 也可以更换value，例如改成abc--&gt;
&lt;AtguiguInput v-model:abc="userName"/&gt;

&lt;!-- 上面代码的本质如下 --&gt;
&lt;AtguiguInput :abc="userName" @update:abc="userName = $event"/&gt;
</code></pre> <p><code>AtguiguInput</code>组件中：</p> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="box"&gt;
    &lt;input 
       type="text" 
       :value="abc" 
       @input="emit('update:abc',$event.target.value)"
    &gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="AtguiguInput"&gt;
  // 接收props
  defineProps(['abc'])
  // 声明事件
  const emit = defineEmits(['update:abc'])
&lt;/script&gt;
</code></pre> </li><li> <p>如果<code>value</code>可以更换，那么就可以在组件标签上多次使用<code>v-model</code></p> <pre><code class="prism language-vue">&lt;AtguiguInput v-model:abc="userName" v-model:xyz="password"/&gt;
</code></pre> </li></ol> 
<p><img src="https://images2.imgbox.com/68/42/N4lLr0ux_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="65attrs__2233"></a>6.5.【$attrs 】</h3> 
<ol><li> <p>概述：<code>$attrs</code>用于实现<strong>当前组件的父组件</strong>，向<strong>当前组件的子组件</strong>通信（<strong>祖→孙</strong>）。</p> </li><li> <p>具体说明：<code>$attrs</code>是一个对象，包含所有父组件传入的标签属性。</p> 
  <blockquote> 
   <p>注意：<code>$attrs</code>会自动排除<code>props</code>中声明的属性(可以认为声明过的 <code>props</code> 被子组件自己“消费”了)</p> 
  </blockquote> </li></ol> 
<p>父组件：</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="father"&gt;
    &lt;h3&gt;父组件&lt;/h3&gt;
		&lt;Child :a="a" :b="b" :c="c" :d="d" v-bind="{x:100,y:200}" :updateA="updateA"/&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="Father"&gt;
	import Child from './Child.vue'
	import { ref } from "vue";
	let a = ref(1)
	let b = ref(2)
	let c = ref(3)
	let d = ref(4)

	function updateA(value){
		a.value = value
	}
&lt;/script&gt;
</code></pre> 
<p>子组件：</p> 
<pre><code class="prism language-vue">&lt;template&gt;
	&lt;div class="child"&gt;
		&lt;h3&gt;子组件&lt;/h3&gt;
		&lt;GrandChild v-bind="$attrs"/&gt;
	&lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="Child"&gt;
	import GrandChild from './GrandChild.vue'
&lt;/script&gt;
</code></pre> 
<p>孙组件：</p> 
<pre><code class="prism language-vue">&lt;template&gt;
	&lt;div class="grand-child"&gt;
		&lt;h3&gt;孙组件&lt;/h3&gt;
		&lt;h4&gt;a：{<!-- -->{ a }}&lt;/h4&gt;
		&lt;h4&gt;b：{<!-- -->{ b }}&lt;/h4&gt;
		&lt;h4&gt;c：{<!-- -->{ c }}&lt;/h4&gt;
		&lt;h4&gt;d：{<!-- -->{ d }}&lt;/h4&gt;
		&lt;h4&gt;x：{<!-- -->{ x }}&lt;/h4&gt;
		&lt;h4&gt;y：{<!-- -->{ y }}&lt;/h4&gt;
		&lt;button @click="updateA(666)"&gt;点我更新A&lt;/button&gt;
	&lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="GrandChild"&gt;
	defineProps(['a','b','c','d','x','y','updateA'])
&lt;/script&gt;
</code></pre> 
<h3><a id="66_refs_parent_2301"></a>6.6. 【$refs、 $parent】</h3> 
<ol><li> <p>概述：</p> 
  <ul><li><code>$refs</code>用于 ：<strong>父→子。</strong></li><li><code>$parent</code>用于：<strong>子→父。</strong></li></ul> </li><li> <p>原理如下：</p> 
  <table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td><code>$refs</code></td><td>值为对象，包含所有被<code>ref</code>属性标识的<code>DOM</code>元素或组件实例。</td></tr><tr><td><code>$parent</code></td><td>值为对象，当前组件的父组件实例对象。</td></tr></tbody></table></li></ol> 
<h3><a id="67_provideinject_2315"></a>6.7. 【provide、inject】</h3> 
<ol><li> <p>概述：实现<strong>祖孙组件</strong>直接通信</p> </li><li> <p>具体使用：</p> 
  <ul><li>在祖先组件中通过<code>provide</code>配置向后代组件提供数据</li><li>在后代组件中通过<code>inject</code>配置来声明接收数据</li></ul> </li><li> <p>具体编码：</p> <p>【第一步】父组件中，使用<code>provide</code>提供数据</p> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="father"&gt;
    &lt;h3&gt;父组件&lt;/h3&gt;
    &lt;h4&gt;资产：{<!-- -->{ money }}&lt;/h4&gt;
    &lt;h4&gt;汽车：{<!-- -->{ car }}&lt;/h4&gt;
    &lt;button @click="money += 1"&gt;资产+1&lt;/button&gt;
    &lt;button @click="car.price += 1"&gt;汽车价格+1&lt;/button&gt;
    &lt;Child/&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="Father"&gt;
  import Child from './Child.vue'
  import { ref,reactive,provide } from "vue";
  // 数据
  let money = ref(100)
  let car = reactive({
    brand:'奔驰',
    price:100
  })
  // 用于更新money的方法
  function updateMoney(value:number){
    money.value += value
  }
  // 提供数据
  provide('moneyContext',{money,updateMoney})
  provide('car',car)
&lt;/script&gt;
</code></pre> 
  <blockquote> 
   <p>注意：子组件中不用编写任何东西，是不受到任何打扰的</p> 
  </blockquote> <p>【第二步】孙组件中使用<code>inject</code>配置项接受数据。</p> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="grand-child"&gt;
    &lt;h3&gt;我是孙组件&lt;/h3&gt;
    &lt;h4&gt;资产：{<!-- -->{ money }}&lt;/h4&gt;
    &lt;h4&gt;汽车：{<!-- -->{ car }}&lt;/h4&gt;
    &lt;button @click="updateMoney(6)"&gt;点我&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts" name="GrandChild"&gt;
  import { inject } from 'vue';
  // 注入数据
 let {money,updateMoney} = inject('moneyContext',{money:0,updateMoney:(x:number)=&gt;{}})
  let car = inject('car')
&lt;/script&gt;
</code></pre> </li></ol> 
<h3><a id="68_pinia_2382"></a>6.8. 【pinia】</h3> 
<p>参考之前<code>pinia</code>部分的讲解</p> 
<h3><a id="69_slot_2386"></a>6.9. 【slot】</h3> 
<h4><a id="1__2388"></a>1. 默认插槽</h4> 
<p><img src="https://images2.imgbox.com/02/9e/VttJlxAq_o.png" alt="img"></p> 
<pre><code class="prism language-vue">父组件中：
        &lt;Category title="今日热门游戏"&gt;
          &lt;ul&gt;
            &lt;li v-for="g in games" :key="g.id"&gt;{<!-- -->{ g.name }}&lt;/li&gt;
          &lt;/ul&gt;
        &lt;/Category&gt;
子组件中：
        &lt;template&gt;
          &lt;div class="item"&gt;
            &lt;h3&gt;{<!-- -->{ title }}&lt;/h3&gt;
            &lt;!-- 默认插槽 --&gt;
            &lt;slot&gt;&lt;/slot&gt;
          &lt;/div&gt;
        &lt;/template&gt;
</code></pre> 
<h4><a id="2__2409"></a>2. 具名插槽</h4> 
<p>具名插槽：具有名字的插槽<br> <img src="https://images2.imgbox.com/df/6e/VhWJ5UYl_o.png" alt="在这里插入图片描述"><br> <strong>v-slot只能放在components标签或者&lt;template&gt;标签上</strong><br> <img src="https://images2.imgbox.com/f3/24/F8k7EcjU_o.png" alt="在这里插入图片描述"><br> <strong>&lt;template v-slot:s1&gt; 等同于 &lt;template #s1&gt;</strong></p> 
<pre><code class="prism language-vue">父组件中：
        &lt;Category title="今日热门游戏"&gt;
          &lt;template v-slot:s1&gt;
            &lt;ul&gt;
              &lt;li v-for="g in games" :key="g.id"&gt;{<!-- -->{ g.name }}&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/template&gt;
          &lt;template #s2&gt;
            &lt;a href=""&gt;更多&lt;/a&gt;
          &lt;/template&gt;
        &lt;/Category&gt;
子组件中：
        &lt;template&gt;
          &lt;div class="item"&gt;
            &lt;h3&gt;{<!-- -->{ title }}&lt;/h3&gt;
            &lt;slot name="s1"&gt;&lt;/slot&gt;
            &lt;slot name="s2"&gt;&lt;/slot&gt;
          &lt;/div&gt;
        &lt;/template&gt;
</code></pre> 
<h4><a id="3__2437"></a>3. 作用域插槽</h4> 
<ol><li> <p>理解：数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。（新闻数据在<code>News</code>组件中，但使用数据所遍历出来的结构由<code>App</code>组件决定）<br> <img src="https://images2.imgbox.com/55/9d/xxlGJynt_o.png" alt="在这里插入图片描述"></p> </li><li> <p>具体编码：</p> <pre><code class="prism language-vue">父组件中：
      &lt;Game v-slot="params"&gt;
      &lt;!-- &lt;Game v-slot:default="params"&gt; --&gt;
      &lt;!-- &lt;Game #default="params"&gt; --&gt;
        &lt;ul&gt;
          &lt;li v-for="g in params.games" :key="g.id"&gt;{<!-- -->{ g.name }}&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/Game&gt;

子组件中：
      &lt;template&gt;
        &lt;div class="category"&gt;
          &lt;h2&gt;今日游戏榜单&lt;/h2&gt;
          &lt;slot :games="games" a="哈哈"&gt;&lt;/slot&gt;
        &lt;/div&gt;
      &lt;/template&gt;

      &lt;script setup lang="ts" name="Category"&gt;
        import {reactive} from 'vue'
        let games = reactive([
          {id:'asgdytsa01',name:'英雄联盟'},
          {id:'asgdytsa02',name:'王者荣耀'},
          {id:'asgdytsa03',name:'红色警戒'},
          {id:'asgdytsa04',name:'斗罗大陆'}
        ])
      &lt;/script&gt;
</code></pre> </li></ol> 
<h2><a id="7__API_2475"></a>7. 其它 API</h2> 
<h3><a id="71shallowRef__shallowReactive__2477"></a>7.1.【shallowRef 与 shallowReactive 】</h3> 
<h4><a id="shallowRef_2479"></a><code>shallowRef</code></h4> 
<p>shallow(浅的，肤浅的)，shallowRef：浅层Ref，只处理第一层的响应式。比如：sum.value和person.value为第一层可以处理，但是person.value.age这第二层无法处理。即shallowRef定义的只能处理到.value处。<br> 好处：如果一个对象属性非常多，shallowRef可以提升效率，不用对每个属性做响应式处理</p> 
<ol><li> <p>作用：创建一个响应式数据，但只对顶层属性进行响应式处理。</p> </li><li> <p>用法：</p> <pre><code class="prism language-js"><span class="token keyword">let</span> myVar <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li><li> <p>特点：只跟踪引用值的变化，不关心值内部的属性变化。</p> </li></ol> 
<h4><a id="shallowReactive_2493"></a><code>shallowReactive</code></h4> 
<ol><li> <p>作用：创建一个浅层响应式对象，只会使对象的最顶层属性变成响应式的，对象内部的嵌套属性则不会变成响应式的<br> <img src="https://images2.imgbox.com/1d/3e/wJgQR2q2_o.png" alt="在这里插入图片描述"></p> </li><li> <p>用法：</p> <pre><code class="prism language-js"><span class="token keyword">const</span> myObj <span class="token operator">=</span> <span class="token function">shallowReactive</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li><li> <p>特点：对象的顶层属性是响应式的，但嵌套对象的属性不是。</p> </li></ol> 
<h4><a id="_2506"></a>总结</h4> 
<blockquote> 
 <p>通过使用 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref" rel="nofollow"><code>shallowRef()</code></a> 和 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive" rel="nofollow"><code>shallowReactive()</code></a> 来绕开深度响应。浅层式 <code>API</code> 创建的状态只在其顶层是响应式的，对所有深层的对象不会做任何处理，避免了对每一个内部属性做响应式所带来的性能成本，这使得属性的访问变得更快，可提升性能。</p> 
</blockquote> 
<h3><a id="72readonly__shallowReadonly_2512"></a>7.2.【readonly 与 shallowReadonly】</h3> 
<h4><a id="readonly_2514"></a><strong><code>readonly</code></strong></h4> 
<ol><li> <p>作用：用于创建一个对象的深只读副本。</p> </li><li> <p>用法：</p> <pre><code class="prism language-js"><span class="token keyword">const</span> original <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> readOnlyCopy <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li><li> <p>特点：</p> 
  <ul><li>对象的所有嵌套属性都将变为只读。</li><li>任何尝试修改这个对象的操作都会被阻止（在开发模式下，还会在控制台中发出警告）。</li></ul> </li><li> <p>应用场景：</p> 
  <ul><li>创建不可变的状态快照。</li><li>保护全局状态或配置不被修改。</li></ul> </li></ol> 
<h4><a id="shallowReadonly_2535"></a><strong><code>shallowReadonly</code></strong></h4> 
<ol><li> <p>作用：与 <code>readonly</code> 类似，但只作用于对象的顶层属性。</p> </li><li> <p>用法：</p> <pre><code class="prism language-js"><span class="token keyword">const</span> original <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> shallowReadOnlyCopy <span class="token operator">=</span> <span class="token function">shallowReadonly</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li><li> <p>特点：</p> 
  <ul><li> <p>只将对象的顶层属性设置为只读，对象内部的嵌套属性仍然是可变的。</p> </li><li> <p>适用于只需保护对象顶层属性的场景。</p> </li></ul> </li></ol> 
<h3><a id="73toRaw__markRaw_2553"></a>7.3.【toRaw 与 markRaw】</h3> 
<h4><a id="toRaw_2555"></a><code>toRaw</code></h4> 
<ol><li>作用：用于获取一个响应式对象的原始对象， <code>toRaw</code> 返回的对象不再是响应式的，不会触发视图更新。<br> <strong>响应式数据：</strong><br> <img src="https://images2.imgbox.com/70/b7/IuhCiZ1D_o.png" alt="在这里插入图片描述"><br> <strong>用于获取单纯的数据，非响应式的：</strong><br> <img src="https://images2.imgbox.com/20/90/tfdQIFO3_o.png" alt="在这里插入图片描述"></li></ol> 
<p><img src="https://images2.imgbox.com/0e/a4/bMGTslGY_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>官网描述：这是一个可以用于临时读取而不引起代理访问/跟踪开销，或是写入而不触发更改的特殊方法。不建议保存对原始对象的持久引用，请谨慎使用。</p> 
</blockquote> 
<blockquote> 
 <p>何时使用？ —— 在需要将响应式对象传递给非 <code>Vue</code> 的库或外部系统时，使用 <code>toRaw</code> 可以确保它们收到的是普通对象</p> 
</blockquote> 
<ol start="2"><li> <p>具体编码：</p> <pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> reactive<span class="token punctuation">,</span>toRaw<span class="token punctuation">,</span>markRaw<span class="token punctuation">,</span>isReactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>

<span class="token comment">/* toRaw */</span>
<span class="token comment">// 响应式对象</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'tony'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 原始对象</span>
<span class="token keyword">let</span> rawPerson <span class="token operator">=</span> <span class="token function">toRaw</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>


<span class="token comment">/* markRaw */</span>
<span class="token keyword">let</span> citysd <span class="token operator">=</span> <span class="token function">markRaw</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'asdda01'</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'北京'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'asdda02'</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'上海'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'asdda03'</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'天津'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'asdda04'</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'重庆'</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了</span>
<span class="token keyword">let</span> citys2 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>citys<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReactive</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReactive</span><span class="token punctuation">(</span>rawPerson<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReactive</span><span class="token punctuation">(</span>citys<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReactive</span><span class="token punctuation">(</span>citys2<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> </li></ol> 
<h4><a id="markRaw_2596"></a><code>markRaw</code></h4> 
<ol><li> <p>作用：标记一个对象，使其<strong>永远不会</strong>变成响应式的。</p> 
  <blockquote> 
   <p>例如使用<code>mockjs</code>时，为了防止误把<code>mockjs</code>变为响应式对象，可以使用 <code>markRaw</code> 去标记<code>mockjs</code></p> 
  </blockquote> </li><li> <p>编码：</p> <pre><code class="prism language-js"><span class="token comment">/* markRaw */</span>
<span class="token keyword">let</span> citys <span class="token operator">=</span> <span class="token function">markRaw</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'asdda01'</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'北京'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'asdda02'</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'上海'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'asdda03'</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'天津'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'asdda04'</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'重庆'</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了</span>
<span class="token keyword">let</span> citys2 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>citys<span class="token punctuation">)</span>
</code></pre> </li></ol> 
<h3><a id="74customRef_2616"></a>7.4.【customRef】</h3> 
<p>作用：创建一个自定义的<code>ref</code>，并对其依赖项跟踪和更新触发进行逻辑控制。<br> @@：get()读数据上来就先调track()；set()改数据全都改完了最后调trigger()</p> 
<p>实现防抖效果（<code>useSumRef.ts</code>）：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>customRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span>initValue<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>delay<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span>track<span class="token punctuation">,</span>trigger<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> timer<span class="token operator">:</span><span class="token builtin">number</span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 告诉Vue数据msg很重要，要对msg持续关注，一旦变化就更新</span>
        <span class="token keyword">return</span> initValue
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          initValue <span class="token operator">=</span> value
          <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//通知Vue数据msg变化了</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> 
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>msg<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>组件中使用：</p> 
<h2><a id="8_Vue3_2650"></a>8. Vue3新组件</h2> 
<h3><a id="81_Teleport_2652"></a>8.1. 【Teleport】</h3> 
<p>Teleport：传送</p> 
<ul><li>什么是Teleport？—— Teleport 是一种能够将我们的<strong>组件html结构</strong>移动到指定位置的技术。</li></ul> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>body<span class="token punctuation">'</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal<span class="token punctuation">"</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShow<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>我是一个弹窗<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>我是弹窗中的一些内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShow = false<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>关闭弹窗<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>teleport</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="82_Suspense_2666"></a>8.2. 【Suspense】</h3> 
<ul><li>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</li><li>使用步骤： 
  <ul><li>异步引入组件</li><li>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code></li></ul> </li></ul> 
<pre><code class="prism language-tsx">import { defineAsyncComponent,Suspense } from "vue";
const Child = defineAsyncComponent(()=&gt;import('./Child.vue'))
</code></pre> 
<pre><code class="prism language-vue">&lt;template&gt;
    &lt;div class="app"&gt;
        &lt;h3&gt;我是App组件&lt;/h3&gt;
        &lt;Suspense&gt;
          &lt;template v-slot:default&gt;
            &lt;Child/&gt;
          &lt;/template&gt;
          &lt;template v-slot:fallback&gt;
            &lt;h3&gt;加载中.......&lt;/h3&gt;
          &lt;/template&gt;
        &lt;/Suspense&gt;
    &lt;/div&gt;
&lt;/template&gt;
</code></pre> 
<h3><a id="83API_2696"></a>8.3.【全局API转移到应用对象】</h3> 
<ul><li><code>app.component</code></li><li><code>app.config</code></li><li><code>app.directive</code></li><li><code>app.mount</code></li><li><code>app.unmount</code></li><li><code>app.use</code><br> <img src="https://images2.imgbox.com/74/50/tY33JglS_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="84_2705"></a>8.4.【其他】</h3> 
<ul><li> <p>过渡类名 <code>v-enter</code> 修改为 <code>v-enter-from</code>、过渡类名 <code>v-leave</code> 修改为 <code>v-leave-from</code>。</p> </li><li> <p><code>keyCode</code> 作为 <code>v-on</code> 修饰符的支持。</p> </li><li> <p><code>v-model</code> 指令在组件上的使用已经被重新设计，替换掉了 <code>v-bind.sync。</code></p> </li><li> <p><code>v-if</code> 和 <code>v-for</code> 在同一个元素身上使用时的优先级发生了变化。</p> </li><li> <p>移除了<code>$on</code>、<code>$off</code> 和 <code>$once</code> 实例方法。</p> </li><li> <p>移除了过滤器 <code>filter</code>。</p> </li><li> <p>移除了<code>$children</code> 实例 <code>propert</code>。</p> <p>…<br> <strong>vue2与vue3的区别：</strong><br> <img src="https://images2.imgbox.com/5e/40/XqFdLs5i_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/cf/9e/cmCNGcYZ_o.png" alt="在这里插入图片描述"></p> </li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f1aea3e05c3e701361242d664db47be9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Maven : Failure to find jar</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b6532bfd4ea71758fd078fdb7c97aadd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">双端队列、优先级队列、阻塞队列</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>