<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Proxmox虚拟环境（PVE）简介 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Proxmox虚拟环境（PVE）简介" />
<meta property="og:description" content="Proxmox虚拟环境（简称PVE）是用于操作来宾操作系统的基于Debian Linux和KVM的虚拟化平台。Proxmox免费提供 -可以通过制造商（维也纳的Proxmox Server Solutions GmbH）购买商业支持。
Proxmox 至少需要3台物理服务器才能在群集中稳定运行。
Proxmox的主页：https ://www.proxmox.com/de/
Proxmox的优点：
与Hyper-V，VMWare，OpenStack或Cloudstack相比，Proxmox具有一些优势：
Proxmox 几乎可以在所有x86硬件上运行每台主机不到5分钟即可完成安装Proxmox可以从3台服务器映射高可用性。有没有许可证费用为Proxmox 开源的基础是和KVM管理程序 与VSphere，OpenStack或Cloudstack等著名的云平台相比，Proxmox仍具有管理GUI在虚拟化主机上运行的优势。因此，不需要其他主机即可管理或管理集群
Proxmox的局限性：
Proxmox使用corosync来管理集群。Corosync最多可以管理或控制32个节点。也就是说，Proxmox群集的虚拟化和存储主机的最大数量为32台物理服务器。
Proxmox的安装
在使用Proxmox之前，应从https://www.proxmox.com/zh-CN/downloads/category/iso-images-pve下载最新的ISO映像或ISO安装程序。
建议在DVD或USB记忆棒（至少1 GB）上使用该图像。例如，软件Etcher适用于在棍子上演奏。（下载：https : //etcher.io/）
要求/最低要求
为了稳定运行Proxmox，应满足以下要求
3台主机或物理服务器中央存储（如果要实时移动虚拟机）-例如Ceph或NFS在提供虚拟化的主机上，必须在CPU中启用VT扩展以进行虚拟化。 重要信息：如果要在以后的运行中实时移动虚拟机，则主机上的网络接口（NIC）名称必须相同。
内部LAN端口的标准接口称为“ vmbr0”。外部接口应命名为“ vmbr1”。
如果虚拟机的磁盘映像集中存储（例如通过Ceph），则应使用10G交换机。当然，连接到10G网络的Proxmox主机将至少需要一个10G网络连接。
准备：
Proxmox主机的主机名和IP地址以后很难更改。在开始安装之前，应指定主机名和要安装的主机的（内部）IP地址：
主机名
IP地址
子网掩码
密码
pvehost01
10.20.30.1
/ 24
Pvehost02
10.20.30.2
/ 24
Pvehost03
10.20.30.3
/ 24
Proxmox的欢迎屏幕
安装第一台服务器
从DVD或USB闪存盘引导第一台服务器。如果已正确检测到ISO映像，Proxmox将以以下屏幕欢迎您：
单击“安装Proxmox VE”。在下一个屏幕中，您要做的就是确认Proxmox的许可条款。然后单击右下角的“下一步”。
选择启动分区
在下一页的“目标硬盘”下，选择您的引导分区，将立即在其中安装Proxmox。对于物理硬件上的标准安装，通常将第一个磁盘称为/ dev / sda。
注意：硬盘在安装前已分区，即删除分区上的所有数据。
国家和键盘选择
随后，选择服务器的国家和键盘布局，然后再次单击“下一步”。
在下一个屏幕中，将根帐户的密码设置为（1），然后在（2）下输入一个电子邮件地址。
密码和电子邮件地址
注意：该电子邮件必须有效。伪造的电子邮件不起作用。
进一步的规格
在最后一个屏幕中，设置（1）内部网络接口。
注意：由于服务器通常具有多个NIC，因此请提前检查哪个NIC属于哪个端口。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/8dfdfdf6efbf44b084760a10056463bc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-11-07T06:51:20+08:00" />
<meta property="article:modified_time" content="2019-11-07T06:51:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Proxmox虚拟环境（PVE）简介</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0cm;">Proxmox虚拟环境（简称PVE）是<strong>用于操作来宾操作系统</strong>的基于Debian <a href="https://www.biteno.com/it-dienstleistungen/linux-administration/" rel="nofollow"><strong>Linux</strong></a>和KVM的<strong>虚拟化平台</strong>。<strong>Proxmox</strong><strong>免费提供</strong> -可以通过制造商（维也纳的Proxmox Server Solutions GmbH）购买商业支持。</p> 
<p style="margin-left:0cm;">Proxmox <strong>至少</strong>需要<strong>3</strong><strong>台物理服务器才能</strong>在群集中稳定运行。</p> 
<p style="margin-left:0cm;">Proxmox的主页：<a href="https://www.proxmox.com/de/" rel="nofollow"><strong>https</strong></a> ://www.proxmox.com/de/</p> 
<p style="margin-left:0cm;"><strong>Proxmox</strong><strong>的优点：</strong></p> 
<p style="margin-left:0cm;">与Hyper-V，VMWare，OpenStack或Cloudstack相比，Proxmox具有一些优势：</p> 
<ul><li>Proxmox <strong>几乎可以在所有</strong><strong>x86</strong><strong>硬件上运行</strong></li><li>每台主机<strong>不到</strong><strong>5</strong><strong>分钟即可</strong>完成安装</li><li>Proxmox可以从3台服务器映射<strong>高可用性</strong>。</li><li>有<strong>没有许可证费用</strong>为Proxmox <a href="https://www.biteno.com/tag/opensource/" rel="nofollow"><strong>开源的</strong></a>基础是和KVM管理程序</li></ul> 
<p style="margin-left:0cm;">与VSphere，OpenStack或Cloudstack等著名的云平台相比，Proxmox仍具有管理GUI在虚拟化主机上运行的优势。因此，<strong>不需要其他主机即可</strong>管理或管理集群</p> 
<p style="margin-left:0cm;"><strong>Proxmox</strong><strong>的局限性：</strong></p> 
<p style="margin-left:0cm;">Proxmox使用corosync来管理集群。Corosync最多可以<strong>管理或控制</strong><strong>32</strong><strong>个节点</strong>。也就是说，Proxmox群集的虚拟化和存储主机的最大数量为32台物理服务器。</p> 
<p style="margin-left:0cm;"><strong>Proxmox</strong><strong>的安装</strong></p> 
<p style="margin-left:0cm;">在使用Proxmox之前，应从<a href="https://www.proxmox.com/de/downloads/category/iso-images-pve" rel="nofollow"><strong>https://www.proxmox.com/zh-CN/downloads/category/iso-images-pve</strong></a>下载<strong>最新的</strong><strong>ISO</strong><strong>映像</strong>或ISO安装程序。</p> 
<p style="margin-left:0cm;">建议在DVD或USB记忆棒（至少1 GB）上使用该图像。例如，软件Etcher适用于在棍子上演奏。（下载：<a href="https://etcher.io/" rel="nofollow"><strong>https</strong></a> : <a href="https://etcher.io/" rel="nofollow"><strong>//etcher.io/</strong></a>）</p> 
<p style="margin-left:0cm;"><strong>要求</strong><strong>/</strong><strong>最低要求</strong></p> 
<p style="margin-left:0cm;">为了稳定运行Proxmox，应满足<strong>以下要求</strong></p> 
<ul><li>3台主机或物理<a href="https://www.biteno.com/was-ist-ein-terminalserver/" rel="nofollow"><strong>服务器</strong></a></li><li>中央存储（如果要实时移动虚拟机）-例如<a href="https://www.biteno.com/wie-man-mit-ceph-das-datenwachstum-kontrollieren-und-optimieren-kann/" rel="nofollow"><strong>Ceph</strong></a>或NFS</li><li>在提供虚拟化的主机上，必须在CPU中启用VT扩展以进行虚拟化。</li></ul> 
<p style="margin-left:0cm;"><strong>重要信息：</strong>如果要在以后的运行中实时移动虚拟机，则主机上的<strong>网络接口</strong>（NIC）<strong>名称</strong>必须相同。</p> 
<p style="margin-left:0cm;">内部LAN端口的<strong>标准接口</strong>称为“ vmbr0”。外部接口应命名为“ vmbr1”。</p> 
<p style="margin-left:0cm;">如果虚拟机的磁盘映像集中存储（例如通过Ceph），则应使用<strong>10G</strong><strong>交换机</strong>。当然，连接到10G网络的Proxmox主机将<strong>至少</strong>需要<strong>一个</strong><strong>10G</strong><strong>网络连接</strong>。</p> 
<p style="margin-left:0cm;"><strong>准备：</strong></p> 
<p style="margin-left:0cm;">Proxmox主机的主机名和IP地址以后很难更改。在开始安装之前，应指定主机名和要安装的主机的（内部）IP地址：</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#f7f7f7;width:120pt;"> <p style="margin-left:0cm;">主机名</p> </td><td style="border-color:#f7f7f7;width:120pt;"> <p style="margin-left:0cm;">IP地址</p> </td><td style="border-color:#f7f7f7;width:120.75pt;"> <p style="margin-left:0cm;">子网掩码</p> </td><td style="border-color:#f7f7f7;width:120.75pt;"> <p style="margin-left:0cm;">密码</p> </td></tr><tr><td style="border-color:#f7f7f7;width:120pt;"> <p style="margin-left:0cm;">pvehost01</p> </td><td style="width:120pt;"> <p style="margin-left:0cm;">10.20.30.1</p> </td><td style="width:120.75pt;"> <p style="margin-left:0cm;">/ 24</p> </td><td style="width:120.75pt;"> </td></tr><tr><td style="border-color:#f7f7f7;width:120pt;"> <p style="margin-left:0cm;">Pvehost02</p> </td><td style="width:120pt;"> <p style="margin-left:0cm;">10.20.30.2</p> </td><td style="width:120.75pt;"> <p style="margin-left:0cm;">/ 24</p> </td><td style="width:120.75pt;"> </td></tr><tr><td style="border-color:#f7f7f7;width:120pt;"> <p style="margin-left:0cm;">Pvehost03</p> </td><td style="width:120pt;"> <p style="margin-left:0cm;">10.20.30.3</p> </td><td style="width:120.75pt;"> <p style="margin-left:0cm;">/ 24</p> </td><td style="width:120.75pt;"> </td></tr></tbody></table> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="160" src="https://images2.imgbox.com/c9/0d/dvF5DQtE_o.jpg" width="300"></p> 
<p style="margin-left:0cm;"><em>Proxmox</em><em>的欢迎屏幕</em></p> 
<p style="margin-left:0cm;"><strong>安装第一台服务器</strong></p> 
<p style="margin-left:0cm;">从DVD或USB闪存盘引导第一台服务器。如果已正确检测到ISO映像，Proxmox将以以下屏幕欢迎您：</p> 
<p style="margin-left:0cm;">单击“安装Proxmox VE”。在下一个屏幕中，您要做的就是确认Proxmox的许可条款。然后单击右下角的“下一步”。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="190" src="https://images2.imgbox.com/dc/7c/Dlrj4yCU_o.jpg" width="300"></p> 
<p style="margin-left:0cm;"><em>选择启动分区</em></p> 
<p style="margin-left:0cm;">在下一页的“目标硬盘”下，选择您的引导分区，将立即在其中安装Proxmox。对于物理硬件上的标准安装，通常将第一个<strong>磁盘</strong>称为<strong>/ dev / sda</strong>。</p> 
<p style="margin-left:0cm;"><strong>注意：</strong>硬盘在安装前已分区，即删除分区上的所有数据。</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="113" src="https://images2.imgbox.com/5c/c6/smHfAIxP_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>国家和键盘选择</em></p> 
<p style="margin-left:0cm;">随后，选择服务器的国家和键盘布局，然后再次单击“下一步”。</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">在下一个屏幕中，将根帐户的<a href="https://www.biteno.com/von-fundamentaler-bedeutung-fuer-jede-it-abteilung-sichere-passwoerter/" rel="nofollow"><strong>密码</strong></a>设置为（1），然后在（2）下输入一个电子邮件地址。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="117" src="https://images2.imgbox.com/9d/08/5Efbkvrt_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>密码和电子邮件地址</em></p> 
<p style="margin-left:0cm;">注意：该电子邮件必须有效。伪造的电子邮件不起作用。</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="159" src="https://images2.imgbox.com/1f/d3/FvgWQXiW_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>进一步的规格</em></p> 
<p style="margin-left:0cm;">在最后一个屏幕中，设置（1）内部网络接口。</p> 
<p style="margin-left:0cm;">注意：由于服务器通常具有多个NIC，因此请提前检查哪个NIC属于哪个端口。</p> 
<p style="margin-left:0cm;">在（2）下，输入完整的主机名（fqdn，包括域）。在（3）中输入<a href="https://www.biteno.com/was-ist-meine-ip-adresse-und-wie-funktioniert-sie/" rel="nofollow"><strong>IP</strong><strong>地址</strong></a>，包括网络掩码，网关和DNS服务器。</p> 
<p style="margin-left:0cm;">如果然后单击“下一步”，则开始实际安装Proxmox。在<strong>安装过程</strong> Proxmox的需要，根据硬件<strong>3-5</strong><strong>分钟</strong>每台主机。</p> 
<p style="margin-left:0cm;">安装过程成功完成后，系统将提示您重新引导新安装的主机。取出USB记忆棒或DVD，然后重新启动主机。</p> 
<p style="margin-left:0cm;">现在，您可以通过Web连接到新主机，以执行以下大多数任务：https：// &lt;IP&gt;：8006 /</p> 
<p style="margin-left:0cm;"><strong>在第一台主机上构建集群配置</strong></p> 
<p style="margin-left:0cm;">为了以后可以向Proxmox群集添加一个或多个主机，必须首先创建群集配置。登录到当前安装的主机。</p> 
<p style="margin-left:0cm;"><strong>重要提示</strong>：您只能对集群执行一次此设置。</p> 
<p style="margin-left:0cm;">（通过ssh或Web GUI-&gt;服务器（左）-&gt; Shell（右）</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="165" src="https://images2.imgbox.com/d9/5f/AY6AifHl_o.png" width="605"></p> 
<p style="margin-left:0cm;"><em>要输入的命令的屏幕截图</em></p> 
<p style="margin-left:0cm;">输入以下命令：</p> 
<table cellspacing="0"><tbody><tr><td style="width:24.75pt;"> <p style="margin-left:0cm;">1</p> </td><td style="width:.3pt;"> <p style="margin-left:0cm;">根@ pvehost01：pvecm创建＆lt; clustername＆gt; ＃将“ clustername”替换为集群名称。</p> </td></tr></tbody></table> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">使用以下命令检查新创建的集群的状态：</p> 
<p style="margin-left:0cm;">根@ pvehost01：〜＃pvecm状态</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">输出应类似于以下内容：</p> 
<table cellspacing="0"><tbody><tr><td style="width:24.75pt;"> <p style="margin-left:0cm;">1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br> 10<br> 11<br> 12<br> 13<br> 14<br> 15<br> 16<br> 17<br> 18<br> 19<br> 20</p> </td><td style="width:.3pt;"> <p style="margin-left:0cm;">法定信息<br> ------------------<br> 日期：2018年1月17日星期三17:50:12<br> 法定提供者：corosync_votequorum<br> 节点：1<br> 节点ID：0x00000001<br> 环ID：1/4<br> 法定：是<br> Votequorum信息<br> ----------------------<br> 预期投票数：1<br> 最高期望值：1<br> 总投票数：1<br> 法定人数：1<br> 标志：法定<br><br> 成员资格信息<br> ----- -----------------<br> Nodeid投票名称<br> 0x00000001 1 10.20.30.1（本地）</p> </td></tr></tbody></table> 
<p style="margin-left:0cm;"><strong>安装其他服务器</strong></p> 
<p style="margin-left:0cm;"><a href="https://www.biteno.com/tutorial/sicherung-von-windows-servern-mit-online-backup-von-ahsay/" rel="nofollow"><strong>您</strong></a>安装的所有其他<a href="https://www.biteno.com/tutorial/sicherung-von-windows-servern-mit-online-backup-von-ahsay/" rel="nofollow"><strong>服务器都</strong></a>类似于第一个服务器。（当然具有不同的主机名和IP地址）。</p> 
<p style="margin-left:0cm;">安装完成后，<strong>登录到第二台服务器</strong>并将新主机注册到现有群集。为此，在以下命令中，将群集中已经存在的主机的IP用作目标IP地址。</p> 
<p style="margin-left:0cm;">输入以下命令：pvecm add &lt;IP-first-host&gt;</p> 
<p style="margin-left:0cm;">例：</p> 
<table cellspacing="0"><tbody><tr><td style="width:24.75pt;"> <p style="margin-left:0cm;">1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br> 10<br> 11<br> 12<br> 13</p> </td><td style="width:.3pt;"> <p style="margin-left:0cm;">root @ pvehost02：〜＃pvecm add 10.20.30.1<br> 无法建立主机'10 .20.30.111（10.20.30.1）'的真实性。<br> ＆LT; ...＆GT;<br> 您确定要继续连接（是/否）吗？是<br> root@10.20.30.1的密码：<br> 复制corosync身份验证密钥<br> pve-cluster服务<br> 备份旧数据库，以<br> 等待仲裁...确定，<br> 生成节点证书<br> 合并merge_hosts 文件<br> 重新启动服务已<br> 成功将节点“ pvehost02”添加到群集。</p> </td></tr></tbody></table> 
<p style="margin-left:0cm;"><strong>检查集群状态</strong></p> 
<p style="margin-left:0cm;">使用“ pvecm status”再次检查2节点群集的状态：</p> 
<p style="margin-left:0cm;"> </p> 
<table cellspacing="0"><tbody><tr><td style="width:24.75pt;"> <p style="margin-left:0cm;">1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br> 10<br> 11<br> 12<br> 13<br> 14<br> 15<br> 16<br> 17<br> 18<br> 19<br> 20<br> 21<br> 22<br> 23</p> </td><td style="width:.3pt;"> <p style="margin-left:0cm;">root @ pvehost02：〜＃pvecm status<br> 仲裁信息<br> ------------------<br> 日期：2018年1月17日星期三17:59:36<br> 仲裁提供者：corosync_votequorum<br> 节点：2<br> 节点ID：0x00000002<br> 环ID：1/8<br> 法定人数：是<br><br> Votequorum信息<br> ----------------------<br> 预期投票数：2<br> 最高预期投票率：2<br> 总投票数：2<br> 法定人数：2<br> 旗帜：正式<br><br> 会员资格信息<br> ----------------------<br> Nodeid投票名称<br> 0x00000001 1 10.20.30.1<br> 0x00000002 1 10.20.30.2（本地）</p> </td></tr></tbody></table> 
<p style="margin-left:0cm;">重要的是条目期望投票数和总投票数。这两个值（此处为“ 2”）应相同。</p> 
<p style="margin-left:0cm;"><strong>Proxmox Web GUI</strong><strong>概述</strong></p> 
<p style="margin-left:0cm;">一旦网络中的第一台主机处于活动状态，您就可以通过Web GUI登录到群集。基本上，可以通过以下URL登录到任何主机：</p> 
<p style="margin-left:0cm;">https：// &lt;IP&gt;：8006 /; 用主机的IP或主机名替换IP。</p> 
<p style="margin-left:0cm;"><strong>GUI</strong><strong>概述</strong></p> 
<p style="margin-left:0cm;">对于用户名，请使用“ root”和您在安装过程中输入的密码。</p> 
<p style="margin-left:0cm;"><strong>GUI</strong><strong>的元素</strong></p> 
<p style="margin-left:0cm;">左上方：（1）选择左侧树形结构的视图</p> 
<p style="margin-left:0cm;">链接：（2）树结构（服务器，池）</p> 
<p style="margin-left:0cm;">高中（3）：搜索功能</p> 
<p style="margin-left:0cm;">右：查看或编辑项目（数据中心，主机，来宾）。在窗口的左侧，是用于更改相应对象（集群，主机，来宾）的命令（4）的栏。（5）</p> 
<p style="margin-left:0cm;">右上方：（6）用于创建VM /容器的命令按钮</p> 
<p style="margin-left:0cm;">下方：（7）状态栏</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="857" src="https://images2.imgbox.com/6a/0f/eTMu7V6P_o.png" width="1200"></p> 
<p style="margin-left:0cm;"><em>GUI</em><em>的元素</em></p> 
<p style="margin-left:0cm;">在所谓的数据中心或“数据中心”的标准概述中，您可以查看所有节点的状态以及整个集群的CPU，RAM（主内存）和存储利用率。</p> 
<p style="margin-left:0cm;">要在Proxmox中更改元素（主机，来宾或群集），请首先单击要更改或查看的元素（2）。然后在元素的菜单栏中编辑设置（4）。</p> 
<p style="margin-left:0cm;"><strong>配置</strong><strong>Proxmox</strong><strong>集群以进行操作</strong></p> 
<p style="margin-left:0cm;">为了使群集准备好与主机进行实际操作，现在必须为<strong>ISO</strong><strong>映像</strong>或<strong>模板</strong>以及来宾操作系统<strong>的虚拟</strong><strong><a href="https://www.biteno.com/externe-festplatte-oder-cloudspeicher-wie-bewahren-privatpersonen-ihre-daten-am-sinnvollsten-auf/" rel="nofollow">磁盘</a></strong>的<strong>存储</strong>设置中央存储库。我们还需要在这一个目录<strong>备份</strong>虚拟机可以被保存（备份），和快照。</p> 
<p style="margin-left:0cm;"><strong>注意：</strong>当然，Proxmox可以将模板和机器映像本地存储在相应的Proxmox主机上。但是随后在运行期间无法移动虚拟机。</p> 
<p style="margin-left:0cm;"><strong>Proxmox</strong><strong>支持的内存</strong></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="294" src="https://images2.imgbox.com/8a/38/hy9755bP_o.png" width="155"></p> 
<p style="margin-left:0cm;"><em>内存类型</em></p> 
<p style="margin-left:0cm;">除了本地存储（通常是LVM）之外，Proxmox还支持以下类型的存储</p> 
<ul><li>文件夹（S）</li><li>LVM</li><li>LVM薄</li><li>NFS</li><li>GlusterFS</li><li>iSCSI的</li><li>RBD（Ceph），从Proxmox获得</li><li>RBS（ceph），外部集群</li><li>ZFS</li><li>通过iSCSI的ZFS</li></ul> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">关于Ceph的注意事项：Proxmox 不仅非常支持<a href="https://www.biteno.com/die-richtige-ceph-netzwerkstruktur/" rel="nofollow"><strong>Ceph</strong></a>。<a href="https://www.biteno.com/software-defined-storage-mit-ceph/" rel="nofollow"><strong>Ceph</strong></a>也可以由Proxmox本身安装和管理。与纯种ceph安装不同，Proxmox本身对Ceph的管理（RBD（PVE）选项）对非Linux管理员也很有利，因为Proxmox供应商已对其进行了一些简化。</p> 
<p style="margin-left:0cm;">通常，并非所有形式的存储都可以存储在所有类型的存储中。以下概述显示了可以在哪种存储类型上确切存储的内容：</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#f7f7f7;width:67.5pt;"> <p style="margin-left:0cm;"><strong>存储</strong></p> </td><td style="border-color:#f7f7f7;width:79.5pt;"> <p style="margin-left:0cm;"><strong>磁盘映像</strong></p> </td><td style="border-color:#f7f7f7;width:63.75pt;"> <p style="margin-left:0cm;"><strong>ISO</strong><strong>映像</strong></p> </td><td style="border-color:#f7f7f7;width:92.25pt;"> <p style="margin-left:0cm;"><strong>容器模板</strong></p> </td><td style="border-color:#f7f7f7;width:78pt;"> <p style="margin-left:0cm;"><strong>VZ</strong><strong>备份</strong></p> </td><td style="border-color:#f7f7f7;width:78pt;"> <p style="margin-left:0cm;"><strong>容器</strong></p> </td></tr><tr><td style="border-color:#f7f7f7;width:67.5pt;"> <p style="margin-left:0cm;">目录</p> </td><td style="width:79.5pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:63.75pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:92.25pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:78pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:78pt;"> <p style="margin-left:0cm;">X</p> </td></tr><tr><td style="border-color:#f7f7f7;width:67.5pt;"> <p style="margin-left:0cm;">LVM</p> </td><td style="width:79.5pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:63.75pt;"> </td><td style="width:92.25pt;"> </td><td style="width:78pt;"> </td><td style="width:78pt;"> <p style="margin-left:0cm;">X</p> </td></tr><tr><td style="border-color:#f7f7f7;width:67.5pt;"> <p style="margin-left:0cm;">LVM薄</p> </td><td style="width:79.5pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:63.75pt;"> </td><td style="width:92.25pt;"> </td><td style="width:78pt;"> </td><td style="width:78pt;"> <p style="margin-left:0cm;">X</p> </td></tr><tr><td style="border-color:#f7f7f7;width:67.5pt;"> <p style="margin-left:0cm;">NFS</p> </td><td style="width:79.5pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:63.75pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:92.25pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:78pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:78pt;"> <p style="margin-left:0cm;">X</p> </td></tr><tr><td style="border-color:#f7f7f7;width:67.5pt;"> <p style="margin-left:0cm;">iSCSI的</p> </td><td style="width:79.5pt;"> </td><td style="width:63.75pt;"> </td><td style="width:92.25pt;"> </td><td style="width:78pt;"> </td><td style="width:78pt;"> </td></tr><tr><td style="border-color:#f7f7f7;width:67.5pt;"> <p style="margin-left:0cm;">GlusterFS</p> </td><td style="width:79.5pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:63.75pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:92.25pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:78pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:78pt;"> </td></tr><tr><td style="border-color:#f7f7f7;width:67.5pt;"> <p style="margin-left:0cm;">RBD（PVE）</p> </td><td style="width:79.5pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:63.75pt;"> </td><td style="width:92.25pt;"> </td><td style="width:78pt;"> </td><td style="width:78pt;"> <p style="margin-left:0cm;">X</p> </td></tr><tr><td style="border-color:#f7f7f7;width:67.5pt;"> <p style="margin-left:0cm;">RBD（外部）</p> </td><td style="width:79.5pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:63.75pt;"> </td><td style="width:92.25pt;"> </td><td style="width:78pt;"> </td><td style="width:78pt;"> <p style="margin-left:0cm;">X</p> </td></tr><tr><td style="border-color:#f7f7f7;width:67.5pt;"> <p style="margin-left:0cm;">ZFS iSCSI</p> </td><td style="width:79.5pt;"> </td><td style="width:63.75pt;"> </td><td style="width:92.25pt;"> </td><td style="width:78pt;"> </td><td style="width:78pt;"> </td></tr><tr><td style="border-color:#f7f7f7;width:67.5pt;"> <p style="margin-left:0cm;">ZFS</p> </td><td style="width:79.5pt;"> <p style="margin-left:0cm;">X</p> </td><td style="width:63.75pt;"> </td><td style="width:92.25pt;"> </td><td style="width:78pt;"> </td><td style="width:78pt;"> <p style="margin-left:0cm;">X</p> </td></tr></tbody></table> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><strong>设置模板目录</strong></p> 
<p style="margin-left:0cm;">在我们的测试集群中，我们将在下面添加基于NFS的ISO映像的模板目录。NFS目录可以位于Proxmox主机，另一台Linux服务器或NAS上。</p> 
<p style="margin-left:0cm;">您需要：</p> 
<ul><li>NFS服务器的IP地址或主机名</li><li>NFS共享的名称</li></ul> 
<p style="margin-left:0cm;"><img alt="" class="has" height="227" src="https://images2.imgbox.com/59/d2/TT4rMMuk_o.png" width="689"></p> 
<p style="margin-left:0cm;"><em>逐步设置模板目录</em><em>1</em></p> 
<p style="margin-left:0cm;">要设置模板中央目录，请单击顶部的“数据中心”（1），然后在右侧菜单中单击“存储”（2），然后单击“添加”（3），然后选择“ NFS”。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="161" src="https://images2.imgbox.com/16/0e/4WSO07Q3_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>逐步设置模板目录</em><em>2</em></p> 
<p style="margin-left:0cm;">在以下掩码中，在（1，ID）下输入最适合您目录的名称。</p> 
<p style="margin-left:0cm;">在（2）中是IP地址（或者是主机名），在（3）中是NFS导出的路径。在内容（4）中，选择“容器模板”。确保没有选择其他内容。如果要使模板仅对某些服务器可用，可以在（5）下进行设置。单击添加创建。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="107" src="https://images2.imgbox.com/cf/1b/fQ1dVKin_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>逐步设置模板目录</em><em>3</em></p> 
<p style="margin-left:0cm;">要查看存储位置的内容，请单击结构栏中左侧的Proxmox主机之一，然后单击其新创建的目录（此处为：ISO映像（1））。然后在内容上（2）。使用上载按钮（3），您可以上载任何ISO映像（例如，具有Windows或Linux操作系统的DVD或CD）。您以后可以将映像作为DVD驱动器内容部署到虚拟机。</p> 
<p style="margin-left:0cm;">待办事项现在将ISO映像上载到模板的存储区域。为了进行测试，您可以使用CentOS或其他Linux发行版中的映像。这些是免费的。当然，Windows安装CD / DVD的任何映像都可以使用。</p> 
<ul><li><a href="http://isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1708.iso" rel="nofollow"><strong>http://isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1708.iso</strong><strong>（</strong><strong>Centos</strong></a>）</li><li><a href="https://www.ubuntu.com/download/server" rel="nofollow"><strong>https://www.ubuntu.com/download/server</strong><strong>（</strong><strong>Ubuntu</strong></a>）</li><li><a href="https://www.debian.org/CD/http-ftp/#stable" rel="nofollow"><strong>https://www.debian.org/CD/http-ftp/#stable</strong><strong>（</strong><strong>Debian</strong></a>）</li><li><a href="https://www.microsoft.com/de-de/evalcenter/evaluate-windows-server-2012-r2" rel="nofollow"><strong>https://www.microsoft.com/zh-cn/evalcenter/evaluate-windows-server-2012-r2</strong><strong>（</strong><strong>Windows</strong></a> 2012试用版）</li><li><a href="https://www.microsoft.com/de-de/evalcenter/evaluate-windows-server-2016" rel="nofollow"><strong>https://www.microsoft.com/zh-cn/evalcenter/evaluate-windows-server-2016</strong><strong>（</strong><strong>Windows</strong></a> 2016试用版/ Eval）</li></ul> 
<p style="margin-left:0cm;"><strong>设置磁盘映像的存储</strong></p> 
<p style="margin-left:0cm;">现在，以与模板相同的方式，为虚拟机磁盘映像设置存储位置。这是来宾操作系统的虚拟磁盘的存储位置。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="103" src="https://images2.imgbox.com/31/e2/hfHrZLdA_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>设置磁盘映像的存储</em></p> 
<p style="margin-left:0cm;">注意：来宾系统一直在访问磁盘映像（即虚拟硬盘）。与模板不同，此位置应同时具有快速磁盘和良好的网络连接。</p> 
<p style="margin-left:0cm;">现在，我们将添加（作为示例）ceph的存储池作为磁盘映像的位置。在左上角，单击“数据中心”，“存储”，然后单击“添加”。</p> 
<p style="margin-left:0cm;">给您的位置取一个有意义的名称（1），如果是Ceph（2），请在此处选择适当的池。通过选择内容（3），可以确定可以在此处存储的内容。在我们的例子中，这是“磁盘映像”。</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><strong><a href="https://www.biteno.com/tutorial/opsi-installieren/" rel="nofollow">更多关于：</a></strong></p> 
<p style="margin-left:0cm;"><strong><u><a href="https://www.biteno.com/tutorial/opsi-installieren/" rel="nofollow">安装OPSI</a></u></strong></p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><strong>设置备份存储</strong></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="145" src="https://images2.imgbox.com/bb/48/h6TLkAZn_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>设置备份存储</em></p> 
<p style="margin-left:0cm;">备份位置不必太快。但是，这通常需要很高的容量，具体取决于您要从虚拟客户机创建多少快照和备份。</p> 
<p style="margin-left:0cm;">该过程与模板或磁盘映像存储器的设置相同。您可以从目录，NFS和GlusterFS中选择。只要确保选择“ VZDump Backup file”作为内存内容即可。</p> 
<p style="margin-left:0cm;"><strong>为主机设置第二个网络接口</strong></p> 
<p style="margin-left:0cm;">为了使虚拟机也可以稍后在Internet上进行通信，每个Proxmox主机都需要一个相应的网络接口。</p> 
<p style="margin-left:0cm;">在安装过程中，将自动创建逻辑接口“ vmbr0”（vmbr代表虚拟机桥）。界面vmbr0通常显示在受保护的内部网络中。如果要直接为VM连接到Internet，则必须首先向每个Proxmox主机添加一个适当的接口，此接口以后将允许VM访问Internet。</p> 
<p style="margin-left:0cm;">要立即创建逻辑接口“ vmbr1”，必须首先确定Proxmox服务器上物理网络接口的名称。为此，首先单击主机（1），然后单击外壳程序（2），然后输入以下内容：</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="400" src="https://images2.imgbox.com/f2/c3/xpybuHoC_o.png" width="989"></p> 
<p style="margin-left:0cm;"><em>设置第二个网络接口</em><em>1</em></p> 
<p style="margin-left:0cm;">Proxmox＃IP链接显示</p> 
<p style="margin-left:0cm;">在下面的列表中，物理接口在Debian Linux上以“ en”开头。在我们的示例中，两个NIC分别称为“ ens1f0”和“ ens1f1”。</p> 
<p style="margin-left:0cm;">在列表的后面，您可以看到逻辑接口vmbr0已经创建。</p> 
<p style="margin-left:0cm;">为此，首先单击主机（1），然后单击（2）Network，然后单击“创建”。然后选择“ Linux Bridge”。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="273" src="https://images2.imgbox.com/37/c9/ndxzKxrl_o.png" width="759"></p> 
<p style="margin-left:0cm;"><em>设置第二个网络接口</em><em>2</em></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="149" src="https://images2.imgbox.com/9a/b7/xjzZHdgv_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>设置第二个网络接口</em><em>3</em></p> 
<p style="margin-left:0cm;">在以下掩码中，为接口命名（此处为：vmbr1）（1），并为IP地址分配（2）和匹配的子网掩码（2）。释放网关（3）。在（4）中，输入您刚在Shell中标识的物理网络接口。</p> 
<p style="margin-left:0cm;">重复这些步骤，在应该直接访问Internet（或其他网络）的所有Proxmox主机上创建“ vmbr1”接口。</p> 
<p style="margin-left:0cm;">注意：创建vmbr1网络接口后，您仍然必须重新引导Proxmox主机以使Proxmox处于活动状态（直到现在）。</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">Linux专业人员可以执行以下操作：</p> 
<table cellspacing="0"><tbody><tr><td style="width:24.75pt;"> <p style="margin-left:0cm;">1<br> 2<br> 3<br> 4</p> </td><td style="width:.3pt;"> <p style="margin-left:0cm;">Pve＃cd / etc / network<br> pve＃cp接口intefaces.save<br> pve＃cp interfaces.new接口<br> Pve＃ifup vmbr1</p> </td></tr></tbody></table> 
<p style="margin-left:0cm;"><strong>Proxmox</strong><strong>管理员简介</strong></p> 
<p style="margin-left:0cm;">绝大多数管理任务可以通过Web界面完成。这是最重要的：</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="134" src="https://images2.imgbox.com/8d/f4/6Zalc08P_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>创建虚拟机</em><em>1</em></p> 
<p style="margin-left:0cm;"><strong>创建一个虚拟机</strong></p> 
<p style="margin-left:0cm;">要创建新的<a href="https://www.biteno.com/was-ist-virtualisierung/" rel="nofollow"><strong>虚拟</strong></a>机，请单击右上角的“创建VM”或左侧树中的主机，然后在上下文菜单中单击“创建VM”。在德语中，该命令称为“创建VM”。将打开一个向导来指导您完成该设施。</p> 
<p style="margin-left:0cm;">在“节点”下，选择要在其上启动VM的Proxmox主机。VM ID（2）是Proxmox提供给来宾的唯一ID。在（3）中，命名新的虚拟机。然后点击右下角的“前进”或“下一个”</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="108" src="https://images2.imgbox.com/6f/ec/opVoN6IL_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>创建虚拟机</em><em>2</em></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="248" src="https://images2.imgbox.com/a1/66/qTmWcG3H_o.png" width="277"></p> 
<p style="margin-left:0cm;"><em>创建虚拟机</em><em>3</em></p> 
<p style="margin-left:0cm;">在“ OS”选项卡中，指定VM是否获取DVD驱动器内容，然后在（1）下选择它。在（2），您可以指定将哪种VM类型作为来宾运行。您可以在“ Linux”，Windows和Solaris之间进行选择。</p> 
<p style="margin-left:0cm;">如果要安装Windows操作系统，请在“版本”（Version）下拉列表中选择适当的版本。</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="279" src="https://images2.imgbox.com/91/f4/EqDAVXXu_o.png" width="583"></p> 
<p style="margin-left:0cm;"><em>定义驱动器</em></p> 
<p style="margin-left:0cm;"><strong>定义驱动器</strong></p> 
<p style="margin-left:0cm;">下一步是为新VM设置第一个磁盘的位置和大小：</p> 
<p style="margin-left:0cm;">使用（2），您可以定义为来宾模拟哪个驱动程序或哪个总线系统。在（3）下，选择存储区域。在（4）处，以GB为单位定义磁盘的初始大小。</p> 
<p style="margin-left:0cm;">注意：Proxmox中的硬盘可以稍后扩大-但不能缩小大小。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="82" src="https://images2.imgbox.com/2a/fd/nBAEApms_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>设置</em><em>CPU</em></p> 
<p style="margin-left:0cm;"><strong>设置</strong><strong>CPU</strong></p> 
<p style="margin-left:0cm;">在“ CPU”选项卡中，指定虚拟机的插槽和核心数。可用核的数量之后是插槽x核的乘积。（数学上：套接字乘以内核）</p> 
<p style="margin-left:0cm;"><strong>设置</strong><strong>RAM /</strong><strong>主内存</strong></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="212" src="https://images2.imgbox.com/0f/e5/z8dXcKF4_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>设置</em><em>RAM</em></p> 
<p style="margin-left:0cm;">在“内存”选项卡中，指定虚拟机的主内存。您可以以MB为单位指定固定的内存大小（1）（在图片中为4 GB）。或者，您可以通过单击（2）来设置动态范围。</p> 
<p style="margin-left:0cm;">如何在KVM或Proxmox中完成分配的详细信息，请参见此处：<a href="https://pve.proxmox.com/wiki/Dynamic_Memory_Management" rel="nofollow"><strong>https</strong></a>：<a href="https://pve.proxmox.com/wiki/Dynamic_Memory_Management" rel="nofollow"><strong>//pve.proxmox.com/wiki/Dynamic_Memory_Management</strong></a></p> 
<p style="margin-left:0cm;"><strong>分配网络接口</strong></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="355" src="https://images2.imgbox.com/f4/7c/iAnz5OIS_o.png" width="727"></p> 
<p style="margin-left:0cm;"><em>分配网络接口</em></p> 
<p style="margin-left:0cm;">在最后一步中，您将确定VM通过哪个接口连接到外部。</p> 
<p style="margin-left:0cm;">在（1）中选择桥接模式。在这里，您可以选择先前定义的逻辑接口vmbr0或vmbr1。</p> 
<p style="margin-left:0cm;">也可以选择NAT（网络地址转换）或根本不提供网卡。</p> 
<p style="margin-left:0cm;">对于模型（2），选择Proxmox应该模拟的NIC模型类型。如果需要，例如，在PXE引导或dhcp中，您还可以在（3）下分配一个MAC地址。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="540" src="https://images2.imgbox.com/b6/2f/Ih3axmDu_o.png" width="732"></p> 
<p style="margin-left:0cm;"><em>确认设定</em></p> 
<p style="margin-left:0cm;"><strong>确认设置并创建</strong><strong>VM</strong></p> 
<p style="margin-left:0cm;">在最后一步，您将看到一个概述屏幕，现在您可以在其中实际创建虚拟机之前再次检查所有设置。</p> 
<p style="margin-left:0cm;">如果仍要进行更改，请单击适当的选项卡并调整设置。</p> 
<p style="margin-left:0cm;">单击完成后，将创建新的VM。这可能需要一点时间，具体取决于硬件和大小。</p> 
<p style="margin-left:0cm;"><strong>添加更多硬件。</strong></p> 
<p style="margin-left:0cm;">您可以稍后向每个虚拟机添加更多资源。关于更多硬盘驱动器或其他网络接口。</p> 
<p style="margin-left:0cm;"><strong>启动虚拟机</strong></p> 
<p style="margin-left:0cm;">要启动新创建的VM，请首先在新VM上单击（1）。然后，您可以在VM的上下文菜单（2）或右上方（3）中启动虚拟机。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="371" src="https://images2.imgbox.com/b7/ef/eVNvEsXE_o.png" width="825"></p> 
<p style="margin-left:0cm;"><em>启动虚拟机</em></p> 
<p style="margin-left:0cm;"><strong>切换到访客的虚拟控制台</strong></p> 
<p style="margin-left:0cm;">要切换到新创建的计算机的控制台，请在VM菜单中单击“控制台”。</p> 
<p style="margin-left:0cm;">现在，在菜单（2）旁边的屏幕区域（3）中，您可以使用键盘和鼠标来控制虚拟机，就像站在物理硬件的前面一样。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="611" src="https://images2.imgbox.com/1d/9b/ohZFWvmF_o.png" width="999"></p> 
<p style="margin-left:0cm;"><em>切换到访客的虚拟控制台</em></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="274" src="https://images2.imgbox.com/cc/29/ENJbvuTE_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>服务虚拟机</em></p> 
<p style="margin-left:0cm;"><strong>暂停</strong><strong>/</strong><strong>关闭</strong><strong>/</strong><strong>停止虚拟机</strong></p> 
<p style="margin-left:0cm;">如果可能，您应该通过已安装的操作系统关闭虚拟机。如果无法做到这一点，则可以“强制”关闭VM。</p> 
<p style="margin-left:0cm;">您还可以选择在操作期间停止VM。</p> 
<p style="margin-left:0cm;"><strong>删除虚拟机</strong></p> 
<p style="margin-left:0cm;">您只能在关闭电源或关闭电源后删除虚拟机。为此，请选择左侧的VM，然后单击右上方的“更多”（2），然后单击“删除”。（3）</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="194" src="https://images2.imgbox.com/14/18/MIrFWA8T_o.png" width="1114"></p> 
<p style="margin-left:0cm;"><em>删除虚拟机</em></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="103" src="https://images2.imgbox.com/32/31/YTFe9Rgf_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>确认删除</em></p> 
<p style="margin-left:0cm;">在Proxmox中删除VM之前，必须通过手动输入3位数的计算机ID确认删除。只有这样，VM才会被删除。</p> 
<p style="margin-left:0cm;"><strong>重要信息：</strong> VM还会自动物理删除所有连接的磁盘。</p> 
<p style="margin-left:0cm;"><strong>代理管理</strong></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="471" src="https://images2.imgbox.com/39/12/FzI9Kyow_o.png" width="500"></p> 
<p style="margin-left:0cm;"><em>创建和使用池</em></p> 
<p style="margin-left:0cm;"><strong>创建和使用池</strong></p> 
<p style="margin-left:0cm;">Proxmox中的池用于对虚拟机进行分组。在左侧的“结构”（Structure）列中，池可以显示在主机和存储视图的旁边。</p> 
<p style="margin-left:0cm;">要将虚拟机分配给池，您有两个选择：</p> 
<p style="margin-left:0cm;">在Proxmox中创建访客时，可以直接在“常规”选项卡中选择池。如果您稍后创建了池，或者要将<strong>VM</strong>移动<strong>到池</strong>，请按照以下步骤操作：</p> 
<p style="margin-left:0cm;">在左列中，选择池（1），然后单击（2）成员。单击（3）添加，然后选择“虚拟机”。</p> 
<p style="margin-left:0cm;">如果以后要使单个虚拟机可以使用特殊的存储区域，则还可以为单个池提供专用的存储区域。</p> 
<p style="margin-left:0cm;"><strong>注意：</strong>不能将VM分配给任何一个池或仅分配给一个池。VM的多个成员池不起作用。</p> 
<p style="margin-left:0cm;"><strong>来宾系统从一台主机迁移到另一台主机。</strong></p> 
<p style="margin-left:0cm;">使用Proxmox，您可以将当前的来宾系统（虚拟机）从一台Proxmox主机移至另一台。</p> 
<p style="margin-left:0cm;">前提条件是：</p> 
<ul><li>来宾仅具有群集范围的资源（必须可以从两个Proxmox主机访问硬盘驱动器）。</li><li>没有本地CD模板</li><li>Proxmox主机具有相同的网络接口（例如vmbr0或vmbr1）</li></ul> 
<p style="margin-left:0cm;">如果满足这些要求，则可以在操作过程中一键迁移：</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="128" src="https://images2.imgbox.com/a8/56/O8Dg1ddF_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>来宾系统的迁移</em><em>1</em></p> 
<p style="margin-left:0cm;">在左侧的（1）上，单击要迁移到另一台主机的VM。在上下文菜单（2）中，单击“迁移”。或者，您可以在右上方（3）开始迁移。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="134" src="https://images2.imgbox.com/62/71/HW4rRYkn_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>来宾系统的迁移</em><em>2</em></p> 
<p style="margin-left:0cm;">在以下菜单中，选择目标主机并确认迁移开始。</p> 
<p style="margin-left:0cm;">之后，将打开一个日志窗口，您可以在其中直接观察迁移的进度。</p> 
<p style="margin-left:0cm;">在迁移期间，最初会在目标主机上创建相同的KVM进程。VM的所有基本值（CPU，RAM，HDD）都已传输到其中。随后，传输主存储器的内容。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="436" src="https://images2.imgbox.com/61/18/vYCDq1VT_o.png" width="830"></p> 
<p style="margin-left:0cm;"><em>来宾系统的迁移</em><em>3</em></p> 
<p style="margin-left:0cm;">在实际示例中，移动VM的时间不到10秒。</p> 
<p style="margin-left:0cm;"><strong>大规模迁移</strong></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="226" src="https://images2.imgbox.com/1b/2e/eH948UcQ_o.png" width="258"></p> 
<p style="margin-left:0cm;"><em>大规模迁移</em></p> 
<p style="margin-left:0cm;">通过菜单项“批量迁移”，可以一键将一台Proxmox主机的所有虚拟机移至另一台。如果要重新启动Proxmox主机进行更新，这将特别有用。</p> 
<p style="margin-left:0cm;">根据虚拟机的数量和VM的大小，此过程可能需要几分钟到半小时。</p> 
<p style="margin-left:0cm;"><strong>重要说明</strong>：批量迁移始终一次仅迁移一个VM。移动虚拟机是一个接一个地进行的。</p> 
<p style="margin-left:0cm;"><strong>切换到</strong><strong>Proxmox</strong><strong>主机的外壳</strong></p> 
<p style="margin-left:0cm;">除了通过ssh连接到Proxmox主机的常用方法外，您还可以通过Web GUI直接将其连接到Shell中，以连接到任何主机。</p> 
<p style="margin-left:0cm;"><strong>根据模板创建容器</strong></p> 
<p style="margin-left:0cm;">Proxmox可以操作容器而不是虚拟机。对于容器技术，只需单击几下即可使用各种现成的模板来安装完成的应用程序。Proxmox中的现有模板基于Turnkey Linux。<a href="https://www.turnkeylinux.org/" rel="nofollow"><strong>https://www.turnkeylinux.org/</strong></a></p> 
<p style="margin-left:0cm;">除了经典的Linux操作系统外，示例还包括WordPress，Apache，Magento等应用程序。</p> 
<p style="margin-left:0cm;">要创建容器，必须首先从Internet下载模板。容器文件与ISO映像一起存储。因此，您不需要容器模板的其他存储位置。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="171" src="https://images2.imgbox.com/1b/61/VrVQGp9a_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>下载容器模板</em></p> 
<p style="margin-left:0cm;"><strong>下载容器模板</strong></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="201" src="https://images2.imgbox.com/03/4e/XuLSqsAm_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>选择模板</em></p> 
<p style="margin-left:0cm;">在左列中，单击ISO映像的存储目录（1），然后单击内容（2），然后单击模板。</p> 
<p style="margin-left:0cm;">从列表中选择所需的模板，然后单击“下载”。</p> 
<p style="margin-left:0cm;">根据大小和Internet连接，下载可能需要一些时间。</p> 
<p style="margin-left:0cm;"><strong>安装容器</strong></p> 
<p style="margin-left:0cm;">创建容器类似于创建虚拟机。单击右上角的“创建CT”。它像虚拟机一样打开，您现在将逐步进行对话。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="118" src="https://images2.imgbox.com/06/76/CxGGNbj6_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>安装容器</em><em>1</em></p> 
<p style="margin-left:0cm;">在（1）下，选择立即在其上启动容器的主机。给您的新容器（3）命名，并在必要时将其分配给池（4）。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="129" src="https://images2.imgbox.com/6b/69/pmF0zi9V_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>安装容器</em><em>2</em></p> 
<p style="margin-left:0cm;">与VM不同的是，容器需要您输入一个密码，您需要两次输入相同的密码（5）。在下一步中，选择要安装的容器模板。</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="121" src="https://images2.imgbox.com/d4/3d/6jfOphxg_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>安装容器</em><em>3</em></p> 
<p style="margin-left:0cm;">根磁盘，CPU和内存设置与创建虚拟机时几乎相同。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="156" src="https://images2.imgbox.com/3b/0c/m35hdbyJ_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>安装容器</em><em>4</em></p> 
<p style="margin-left:0cm;">在“网络”选项卡中，您必须以“ xxxx / y”的形式输入完整的IP地址-其中xxxx代表IP，y代表网络掩码。</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="258" src="https://images2.imgbox.com/04/bd/aMxccusu_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>安装容器</em><em>5</em></p> 
<p style="margin-left:0cm;">在“ DNS”选项卡中，输入您的域的名称（例如test.local）和至少一台DNS服务器。然后确认设置。之后，我们创建了VM。</p> 
<p style="margin-left:0cm;">现在，通过单击“开始”启动容器。</p> 
<p style="margin-left:0cm;">然后，创建容器的文件系统，并将容器映像复制到其中。</p> 
<p style="margin-left:0cm;">现在，根据交钥匙模板创建实际的容器内容。此过程因应用程序而异。安装和<strong>配置工作仅在首次引导时执行。</strong>安装或配置后，可以像虚拟机一样使用容器。</p> 
<p style="margin-left:0cm;">交钥匙安装结束时，通常会询问您是否要执行软件的安全更新。如果您有现有的Internet连接，则应该这样做以直接更新新安装的软件。</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><strong><a href="https://www.biteno.com/tutorial/pfsense-firewall-installieren-und-konfigurieren/" rel="nofollow">更多关于：</a></strong></p> 
<p style="margin-left:0cm;"><strong><u><a href="https://www.biteno.com/tutorial/pfsense-firewall-installieren-und-konfigurieren/" rel="nofollow">安装和配置Pfsense防火墙</a></u></strong></p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">优点：手动安装大型Web应用程序（例如Magento）大约需要1-2小时。使用Turnkey，您可以在5-10分钟内完成Magento的安装（取决于硬件）。</p> 
<p style="margin-left:0cm;"><strong>删除容器</strong></p> 
<p style="margin-left:0cm;">要删除容器，请先将其关闭。然后使用更多（更多）-&gt;删除将其删除，并输入VM-ID作为安全性。</p> 
<p style="margin-left:0cm;"><strong>Proxmox</strong><strong>与</strong><strong>LDAP / Active Directory</strong><strong>的连接</strong></p> 
<p style="margin-left:0cm;">Proxmox可以使用LDAP服务器或现有的Active Directory进行身份验证。这意味着将使用您的密码来验证在AD中创建的用户。</p> 
<p style="margin-left:0cm;">Proxmox不会自动检查组成员身份（例如pfsense防火墙）。因此，必须在Proxmox群集中本地创建用户名并将其分配给管理组。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="136" src="https://images2.imgbox.com/b2/9b/wBII5ejP_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>Proxmox</em><em>与</em><em>LDAP</em><em>的连接</em></p> 
<p style="margin-left:0cm;">下面介绍了如何将AD连接到Proxmox：</p> 
<p style="margin-left:0cm;">单击数据中心-&gt;权限-&gt;身份验证-&gt;添加：</p> 
<p style="margin-left:0cm;">在（1）输入广告的简称。对于域（2），将“长”名称添加到您的域中。对于服务器（3），输入Active Directory的第一个域控制器的IP地址。使用后备服务器，第二个域控制器的IP进入。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="165" src="https://images2.imgbox.com/ba/19/3840GzHL_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>给出的名字</em></p> 
<p style="margin-left:0cm;">接下来，创建一个组并为其赋予一个有意义的名称：</p> 
<p style="margin-left:0cm;">单击数据中心-&gt;权限-&gt;组-&gt;添加</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="174" src="https://images2.imgbox.com/20/bf/oAuphX6c_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>分配权限</em></p> 
<p style="margin-left:0cm;">现在，我们将权限分配给新创建的组。</p> 
<p style="margin-left:0cm;">单击数据中心（1）-&gt;权限（2）-&gt;添加（4）; 然后选择组权限（4）</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="225" src="https://images2.imgbox.com/7e/95/hn7OD2yk_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>分配管理权限</em></p> 
<p style="margin-left:0cm;">在最后一步，我们将管理权限分配给“ AD管理员”组。为此，请在（1）中输入路径“ /”。这样，AD管理员组就可以访问整个群集。</p> 
<p style="margin-left:0cm;">选择管理员角色将为整个Proxmox群集中的AD管理员组提供管理代理。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="156" src="https://images2.imgbox.com/b1/12/cXGY4K28_o.png" width="300"></p> 
<p style="margin-left:0cm;"><em>创建用户名</em></p> 
<p style="margin-left:0cm;">为了使Active Directory域中已经存在的真实用户能够登录到Proxmox，必须仍在Proxmox中创建用户名。</p> 
<p style="margin-left:0cm;">为此，请单击数据中心-&gt;权限-&gt;用户-&gt;添加</p> 
<p style="margin-left:0cm;">为用户提供与广告中完全相同的名称。</p> 
<p style="margin-left:0cm;">作为领域，选择AD领域（2），然后在（3）下选择先前创建的组（3）。</p> 
<p style="margin-left:0cm;">在下一次登录时，您不再选择“ Linux PAM标准身份验证”作为域，而是选择Active Directory。</p> 
<p style="margin-left:0cm;"><strong>促销活动</strong></p> 
<p style="margin-left:0cm;"><strong>群集概述</strong><strong>/</strong><strong>群集状态</strong></p> 
<p style="margin-left:0cm;">可以一目了然地将集群的概述和利用率视为IT管理员，集群的利用率和负载也可以一目了然。</p> 
<p style="margin-left:0cm;">..-&gt;数据中心-&gt;摘要</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="826" src="https://images2.imgbox.com/1e/37/Vdo2uzD4_o.png" width="1101"></p> 
<p style="margin-left:0cm;"><em>集群状态</em></p> 
<p style="margin-left:0cm;">在（1）下，您一眼就可以看到（绿色对勾）是否一切正常。如果其中一台主机离线，您将在右上角的（2）下看到它。来宾行显示创建并激活了多少个虚拟机。容器的右侧（4）相同。</p> 
<p style="margin-left:0cm;">在“资源”选项卡的底部，您可以在所有主机上查看它们总共拥有多少CPU，RAM和内存容量以及正在使用多少。</p> 
<p style="margin-left:0cm;">如果向下滚动，您还将在“节点”行中看到所有单个群集成员的使用情况。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="195" src="https://images2.imgbox.com/76/44/dDWvuBCB_o.png" width="759"></p> 
<p style="margin-left:0cm;"><em>各个集群成员的负载</em></p> 
<p style="margin-left:0cm;">除了CPU和RAM的使用情况，您还可以一目了然地看到每个Proxmox主机的运行时间（正常运行时间）。</p> 
<p style="margin-left:0cm;"><strong>监视</strong><strong>Proxmox</strong><strong>服务器</strong></p> 
<p style="margin-left:0cm;">通过icinga2，可以像使用Debian的Linux主机一样监视Proxmox主机，就像使用Linux的任何其他主机（例如Centos）一样。以下过程在新安装的群集成员上处于活动状态，应受到监视：</p> 
<table cellspacing="0"><tbody><tr><td style="width:24.75pt;"> <p style="margin-left:0cm;">1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br> 10<br> 11<br> 12<br> 13<br> 14</p> </td><td style="width:.3pt;"> <p style="margin-left:0cm;">root @ b65k-pve03：/ dev / pve＃ps axu | grep -i pve<br> root 1779 0.0 0.4 317788 74260？SS Jan02 13:44 PVE防火墙<br> 根1790 0.2 0.4 308956 78840？SS Jan02 54:13受<br> 压根1811 0.0 0.6 527352 110292？SS Jan02 0:14 pvedaemon<br> www-data 1863 0.0 0.6 535024 112060？SS Jan02 0:14 pveproxy<br> 根22263 0.0 0.4 325644 81796吗？SS Jan13 0:55 pve-ha-lrm<br> 根22326 0.0 0.5 326096 82524？SS Jan13 0:27 pve-ha-crm<br> 根22886 0.0 0.6 537652 104360吗？S Jan13 0:04 pvedaemon worker<br> root 22887 0.0 0.6 537652 104392？S Jan13 0:04 pvedaemon worker<br> 根22888 0.0 0.6 537452 104104？S Jan13 0:04 pvedaemon worker<br> www-data 22898 0.0 0.6 545416 107000？S Jan13 0:04 pveproxy worker<br> www-data 22899 0.0 0.6 545188 106292？S Jan13 0:04 pveproxy worker<br> www-data 22900 0.0 0.6 545172 106288？S Jan13 0:04 pveproxy工人<br> 根27863 0.0 0.0 0.0 900900 160？SSL 06:25 0:01 / usr / sbin / pvefw-logger</p> </td></tr></tbody></table> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">潜伏虚拟机的Linux进程以“ / usr / bin / kvm”开头。kvm进程的当前清单由“ qm列表”确定：</p> 
<table cellspacing="0"><tbody><tr><td style="width:24.75pt;"> <p style="margin-left:0cm;">1<br> 2<br> 3<br> 4</p> </td><td style="width:.3pt;"> <p style="margin-left:0cm;">root @ b65k-pve02：/ dev / pve＃qm list<br> VMID名称状态MEM（MB）BOOTDISK（GB）PID<br> 100 Test01运行4096 32.00 11772<br> 101 Test03运行2048 32.00 11874</p> </td></tr></tbody></table> 
<p style="margin-left:0cm;">当然，如果单个KVM进程静态绑定到主机，则可以使用icinga2再次对其进行监视。</p> 
<p style="margin-left:0cm;"><strong>从</strong><strong>Proxmox</strong><strong>备份数据</strong></p> 
<p style="margin-left:0cm;"><strong>虚拟机的数据备份</strong></p> 
<p style="margin-left:0cm;">为了能够动态创建虚拟机的常规备份，您需要使用快照。创建快照时，Proxmox将VM的当前数据写入其他文件。这将使现有的磁盘文件“静态”并可进行备份。</p> 
<p style="margin-left:0cm;">备份目录是上面设置的中央备份目录。vzdump命令可以将每个主机转储到在该主机上运行的VM。</p> 
<p style="margin-left:0cm;">PVE＃vzdump -all -dumpdir / mnt / backup-mode快照</p> 
<p style="margin-left:0cm;">重要：为了保护Proxmox群集的所有虚拟机，上述作业必须在所有（！）Proxmox主机上正常运行。</p> 
<p style="margin-left:0cm;">最好将以上命令行粘贴到每个Proxmox主机的crontab中，并在晚上2:00自动启动备份。</p> 
<p style="margin-left:0cm;">0 2 * * * / usr / bin / vzdump -all -dumpdir / mnt / pve / proxmox-backup -mode快照</p> 
<p style="margin-left:0cm;"><strong>Proxmox</strong><strong>配置的数据备份</strong></p> 
<p style="margin-left:0cm;">Proxmox群集的实际配置和corosync的群集配置位于/ etc / pve中。文件的总大小只有几千字节。</p> 
<p style="margin-left:0cm;"><strong>来自</strong><strong>Proxmox</strong><strong>服务器的更新</strong></p> 
<p style="margin-left:0cm;">Proxmox服务器通过软件包管理器“ apt”更新（作为Debian Linux）。</p> 
<p style="margin-left:0cm;"><strong>重要：</strong>从Proxmox进行更新时，您应该始终将群集的所有（！）主机带到通用软件版本。</p> 
<p style="margin-left:0cm;"><strong>更新步骤：</strong></p> 
<p style="margin-left:0cm;">apt-get update＃更新软件包列表或存储库</p> 
<p style="margin-left:0cm;">apt-get upgrade＃执行软件包的实际更新。</p> 
<p style="margin-left:0cm;">注意：您可以使用ansible集中更新apt。</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">将虚拟机移至另一台PVE主机后，然后重新启动受影响的PVE主机。为了安全起见，请首先检查PVE主机以查看是否已移动所有VM。</p> 
<p style="margin-left:0cm;">示例：使用<strong>“ qm list”</strong><strong>，</strong>您可以获取Proxmox主机上所有现有虚拟访客的列表：</p> 
<table cellspacing="0"><tbody><tr><td style="width:24.75pt;"> <p style="margin-left:0cm;">1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8</p> </td><td style="width:.3pt;"> <p style="margin-left:0cm;">root @ agppve01：〜＃qm list<br> VMID名称状态MEM（MB）BOOTDISK（GB）PID<br> 107运行Biteno-piwik01 4096 65.00 9165<br> 108运行Biteno-piwik02 4096 65.00 35251<br> 109 Win2008R201停止2048 32.00 0<br> 110 Win2008R202停止2048 42.00 0<br> 112原始.itsc.local运行4096 130.00 35893<br> 113 ob02.biteno.com运行4096 64.00 21796</p> </td></tr></tbody></table> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">重要：一次只能重启一台Proxmox主机。重新引导后，您可以控制Linux版本以及集群是否再次完成。</p> 
<p style="margin-left:0cm;"><strong>重新启动后：</strong></p> 
<p style="margin-left:0cm;">使用“ uname -a”检查Linux内核版本</p> 
<p style="margin-left:0cm;">根@ agppve01：〜＃uname -a</p> 
<p style="margin-left:0cm;">Linux agppve01 4.13.13-1-pve＃1 SMP PVE 4.13.13-31（2017年12月11日星期一10:00:13 +0100）x86_64 GNU / Linux</p> 
<p style="margin-left:0cm;">Linux的内核版本以黄色突出显示。</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">使用命令“ pvecm status”检查集群的状态。</p> 
<p style="margin-left:0cm;">以下概述显示了集群中有4个节点已登录并执行其服务的状态。</p> 
<table cellspacing="0"><tbody><tr><td style="width:24.75pt;"> <p style="margin-left:0cm;">1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br> 10<br> 11<br> 12<br> 13<br> 14<br> 15<br> 16<br> 17</p> </td><td style="width:.3pt;"> <p style="margin-left:0cm;">root @ agppve09：〜＃pvecm status<br> 仲裁信息<br> ------------------<br> 日期：2018年1月17日星期三10:05:57<br> 仲裁提供者：corosync_votequorum<br> 节点：4<br> 节点ID：0x00000003<br> 戒指ID：4/416投票<br> 人数：是，<br> 投票人数信息<br> ----------------------<br> 预期投票数：4<br> 最高期望值：4<br> 总投票数：4<br> 法定人数：3<br> 国旗：法定人数<br> （...）</p> </td></tr></tbody></table> 
<p style="margin-left:0cm;">在“节点”行中，您可以查看当前有多少主机在线。“仲裁”行显示需要联机的最少主机数。</p> 
<p style="margin-left:0cm;">下面的示例显示只有3台主机处于联机状态。“总投票”数为3（之前为4）。这对应于群集中不应削弱的最小“语音”数量。</p> 
<table cellspacing="0"><tbody><tr><td style="width:24.75pt;"> <p style="margin-left:0cm;">1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br> 10<br> 11<br> 12<br> 13<br> 14<br> 15<br> 16<br> 17<br> 18<br> 19<br> 20<br> 21<br> 22</p> </td><td style="width:.3pt;"> <p style="margin-left:0cm;">root @ agppve09：〜＃pvecm status<br> 仲裁信息<br> ------------------<br> 日期：2018年1月17日星期三10:09:23<br> 仲裁提供者：corosync_votequorum<br> 节点：3<br> 节点ID：0x00000003<br> 环ID：5/420<br> 法定人数：是<br> Votequorum信息<br> ----------------------<br> 预期投票：4<br> 最高预期：4<br> 总投票：3<br> 法定人数：3<br> 旗帜：仲裁<br> 成员信息<br> ----------------------<br> Nodeid投票名称<br> 0x00000005 1 10.20.30.62<br> 0x00000003 1 10.20.30.69（本地）<br> 0x00000001 1 10.20.30.224</p> </td></tr></tbody></table> 
<p style="margin-left:0cm;"><strong>从虚拟机迁移到</strong><strong>Proxmox</strong></p> 
<p style="margin-left:0cm;">下面，我描述了将虚拟访客从另一个虚拟机管理程序迁移到Proxmox的工作方法。这可以是Hyper-V，VMware或其他基于KVM的系统，例如Openstack或Cloudstack。</p> 
<p style="margin-left:0cm;">（成功）迁移的基础通常是虚拟磁盘的可读映像。因此，迁移路径通常描述如何将磁盘映像从平台及其首选的存储形式复制和转换为Proxmox。</p> 
<p style="margin-left:0cm;">Proxmox使用“ qcow2”格式或“原始”设备来存储磁盘映像。</p> 
<p style="margin-left:0cm;"><strong>从</strong><strong>VMWare</strong><strong>迁移到</strong><strong>Proxmox</strong></p> 
<ul><li>将虚拟机下移到VMWare并退出</li><li>识别VMWare服务器上的磁盘文件及其路径</li><li>将文件复制到Proxmox主机</li></ul> 
<p style="margin-left:0cm;">从Proxmox主机：</p> 
<p style="margin-left:0cm;">PVE＃cd / &lt;您在您的位置上的路径/</p> 
<p style="margin-left:0cm;">Pve＃scp root @ &lt;VMWare-IP&gt;：// vmfs /卷/ &lt;PATH / *平坦*。</p> 
<p style="margin-left:0cm;">在已将计算机映像复制到的Proxmox主机上创建一个新的虚拟机。确保在Proxmox主机上将硬盘创建为“本地”硬盘。另请注意<strong>3</strong><strong>位数的</strong><strong>VM-ID</strong>。</p> 
<p style="margin-left:0cm;">重要提示-请注意以下几点：</p> 
<ul><li>新的虚拟硬盘必须与总线体系结构匹配（例如“ IDE”）</li><li>新的虚拟磁盘必须至少等于或大于要导入的硬盘。</li><li>将硬盘创建为本地硬盘</li></ul> 
<p style="margin-left:0cm;">使用Linux命令“ dd”复制硬盘。转到包含磁盘的VMWare平面文件的目录。</p> 
<p style="margin-left:0cm;">用实际文件名替换VMWare映像的文件名（扩展名：vmdk）。还请事先检查您为虚拟机新创建的Proxmox映像是否位于/ dev / pve / *下。</p> 
<p style="margin-left:0cm;">dd if = &lt;oldhostname&gt; flat.vmdk of / / dev / pve / vm- &lt;diskid&gt; disk-1</p> 
<p style="margin-left:0cm;"><strong>从</strong><strong>Hyper-V</strong><strong>迁移到</strong><strong>Proxmox</strong></p> 
<p style="margin-left:0cm;">在Hyper-V下关闭虚拟机。然后将磁盘映像（* .vhd）从Hyper-V复制到Proxmox主机。</p> 
<p style="margin-left:0cm;">Hyper-V磁盘映像的必要转换（转换）如下：</p> 
<table cellspacing="0"><tbody><tr><td style="width:24.75pt;"> <p style="margin-left:0cm;">1</p> </td><td style="width:.3pt;"> <p style="margin-left:0cm;">PVE＃qemu-img转换win2008r2-1.vhd -O qcow2 win2008r2-1.qcow2</p> </td></tr></tbody></table> 
<p style="margin-left:0cm;"><a href="https://forum.proxmox.com/threads/migrate-hyper-v-machine-to-proxmox-kvm.13969/" rel="nofollow"><strong>https://forum.proxmox.com/threads/migrate-hyper-v-machine-to-proxmox-kvm.13969/</strong></a></p> 
<p style="margin-left:0cm;">可在Proxmox主页上找到用户成功测试的迁移路径的概述。<br><a href="https://pve.proxmox.com/wiki/Migration_of_servers_to_Proxmox_VE" rel="nofollow"><strong>https://pve.proxmox.com/wiki/Migration_of_servers_to_Proxmox_VE</strong></a></p> 
<p style="margin-left:0cm;"><strong>对</strong><strong>Proxmox</strong><strong>的结论：</strong></p> 
<p style="margin-left:0cm;">对于中型<a href="https://www.biteno.com/archivierung-von-geschaeftlichen-mails-in-unternehmen/" rel="nofollow"><strong>公司</strong></a>和数据中心运营商，Proxmox是顶级OpenStack，VMWare或Hyper-V的不错选择。凭借直观的界面，Proxmox甚至可以让<a href="https://www.biteno.com/cmd-befehl-grundlagen-und-einsatzbereiche-bei-windows/" rel="nofollow"><strong>Windows</strong></a>管理员死忠于<a href="https://www.biteno.com/fakten-ueber-linux/" rel="nofollow"><strong>Linux</strong></a>。</p> 
<p style="margin-left:0cm;">对于经验丰富的Linux管理员，Proxmox结合了Ceph和其他存储技术，为安全稳定地使用“软件定义的存储”等现代概念提供了所有可能性。</p> 
<p style="margin-left:0cm;"> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6b5495feac989ea7a1925fcc07b7f83d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">linux内核分析及应用 -- Linux 的进程隔离技术与 Docker 容器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/407096b421da44e7dfc9ecaf82333ac1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">memcached在windows下加大默认最大内存的方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>