<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux部署Redis Cluster高可用集群（附带集群节点添加删除以及槽位分配操作详解） - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux部署Redis Cluster高可用集群（附带集群节点添加删除以及槽位分配操作详解）" />
<meta property="og:description" content="目录 一、前言二、下载安装Redis2.1、选择需要安装的Redis版本2.2、下载并解压Redis2.3、编译安装Redis 三、部署Redis Cluster高可用集群3.1、准备配置文件3.2、启动Redis服务3.3、创建Redis集群3.4、查看集群关系3.5、连接集群Redis进行数据读写以及重定向测试3.6、故障转移和恢复测试3.7、Redis集群中添加节点并分配槽位3.7.1、先部署两个新的Redis服务使用端口号7007 70083.7.2、集群中添加主节点3.7.3、给新添加的主节点分配槽位3.7.4、集群中给指定主节点添加从节点 3.8、删除Redis集群中节点3.8.1、删除从节点3.8.2、将被删除主节点槽位迁移到别的主节点3.8.3、删除主节点 四、SpringBoot集成Redis Cluster集群 一、前言 Redis Cluster 集群是一个由多个主从节点群组成的分布式服务器群，它具有复制、高可用和分片特性。Redis集群不需要sentinel哨兵也能完成节点移除和故障转移的功能。需要将每个节点设置成集群模式，这种集群模式没有中心节点，可水平扩展，需要将每个节点设置成集群模式，这种集群模式没有中心节点，可水平扩展，据官方文档称可以线性扩展到上万个节点(官方推荐不超过1000个节点)。redis集群的性能和高可用性均优于之前版本的哨兵模式，且集群配置比较简单，Redis Cluster 将所有数据划分为 16384个槽位，每个redis 节点负责其中一部分槽位，客户端为了可以直接定位（对 key 通过 crc16 进行 hash 再对16384取余）某个具体的 key 所在节点，需要缓存槽位相关信息，这样才可以准确快速地定位到相应的节点。同时因为可能会存在客户端与服务器存储槽位的信息不一致的情况，还需要纠正机制（通过返回 -MOVED 3999 127.0.0.1:6379，客户端收到后需要立即纠正本地的槽位映射表）来实现槽位信息的校验调整.
这里重点做Redis Cluster集群部署，要想了解原理可以跳转，Redis Cluster高可用集群原理。
二、下载安装Redis 2.1、选择需要安装的Redis版本 在官网发行版中选择一个自己需要的版本，我这里使用Redis6.2.0，小版本区别不大。
Redis发行版本列表：https://download.redis.io/releases
2.2、下载并解压Redis 下载redis到/usr/local/redis目录中，这里使用wget下载，如果没有wget执行yum -y install wget安装 wget -P /usr/local/redis http://download.redis.io/releases/redis-6.2.0.tar.gz 进入/usr/local/redis目录解压redis cd /usr/local/redis tar -xzf redis-6.2.0.tar.gz 2.3、编译安装Redis 安装gcc # redis是c语言编写的，编译Redis需要gcc环境 yum -y install gcc # 安装好后查看gcc信息 gcc -v 编译 # 进入redis-6.2.0目录 cd redis-6.2.0 # 执行make开始编译 因为我们下载的是源码需要编译成可执行文件 make 安装 # 编译成功后，执行make PREFIX=/usr/local/redis/redis-6." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/a1698e45646c84974d6e30928694ad0a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-27T12:03:48+08:00" />
<meta property="article:modified_time" content="2023-10-27T12:03:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux部署Redis Cluster高可用集群（附带集群节点添加删除以及槽位分配操作详解）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><ul><li><a href="#_1" rel="nofollow">一、前言</a></li><li><a href="#Redis_6" rel="nofollow">二、下载安装Redis</a></li><li><ul><li><a href="#21Redis_7" rel="nofollow">2.1、选择需要安装的Redis版本</a></li><li><a href="#22Redis_11" rel="nofollow">2.2、下载并解压Redis</a></li><li><a href="#23Redis_24" rel="nofollow">2.3、编译安装Redis</a></li></ul> 
   </li><li><a href="#Redis_Cluster_61" rel="nofollow">三、部署Redis Cluster高可用集群</a></li><li><ul><li><a href="#31_65" rel="nofollow">3.1、准备配置文件</a></li><li><a href="#32Redis_145" rel="nofollow">3.2、启动Redis服务</a></li><li><a href="#33Redis_162" rel="nofollow">3.3、创建Redis集群</a></li><li><a href="#34_228" rel="nofollow">3.4、查看集群关系</a></li><li><a href="#35Redis_245" rel="nofollow">3.5、连接集群Redis进行数据读写以及重定向测试</a></li><li><a href="#36_278" rel="nofollow">3.6、故障转移和恢复测试</a></li><li><a href="#37Redis_300" rel="nofollow">3.7、Redis集群中添加节点并分配槽位</a></li><li><ul><li><a href="#371Redis7007_7008_302" rel="nofollow">3.7.1、先部署两个新的Redis服务使用端口号7007 7008</a></li><li><a href="#372_326" rel="nofollow">3.7.2、集群中添加主节点</a></li><li><a href="#373_344" rel="nofollow">3.7.3、给新添加的主节点分配槽位</a></li><li><a href="#374_356" rel="nofollow">3.7.4、集群中给指定主节点添加从节点</a></li></ul> 
    </li><li><a href="#38Redis_376" rel="nofollow">3.8、删除Redis集群中节点</a></li><li><ul><li><a href="#381_384" rel="nofollow">3.8.1、删除从节点</a></li><li><a href="#382_392" rel="nofollow">3.8.2、将被删除主节点槽位迁移到别的主节点</a></li><li><a href="#383_407" rel="nofollow">3.8.3、删除主节点</a></li></ul> 
   </li></ul> 
   </li><li><a href="#SpringBootRedis_Cluster_422" rel="nofollow">四、SpringBoot集成Redis Cluster集群</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_1"></a>一、前言</h3> 
<p>Redis Cluster 集群是一个由多个主从节点群组成的分布式服务器群，它具有复制、高可用和分片特性。Redis集群不需要sentinel哨兵也能完成节点移除和故障转移的功能。需要将每个节点设置成集群模式，这种集群模式没有中心节点，可水平扩展，需要将每个节点设置成集群模式，这种集群模式没有中心节点，可水平扩展，据官方文档称可以线性扩展到上万个节点(官方推荐不超过1000个节点)。redis集群的性能和高可用性均优于之前版本的哨兵模式，且集群配置比较简单，Redis Cluster 将所有数据划分为 16384个槽位，每个redis 节点负责其中一部分槽位，客户端为了可以直接定位（对 key 通过 crc16 进行 hash 再对16384取余）某个具体的 key 所在节点，需要缓存槽位相关信息，这样才可以准确快速地定位到相应的节点。同时因为可能会存在客户端与服务器存储槽位的信息不一致的情况，还需要纠正机制（通过返回 -MOVED 3999 127.0.0.1:6379，客户端收到后需要立即纠正本地的槽位映射表）来实现槽位信息的校验调整.<img src="https://images2.imgbox.com/26/cb/43weY6Vs_o.png" alt="在这里插入图片描述"></p> 
<p>这里重点做Redis Cluster集群部署，要想了解原理可以跳转，<a href="https://blog.csdn.net/weixin_44606481/article/details/134039327">Redis Cluster高可用集群原理</a>。</p> 
<h3><a id="Redis_6"></a>二、下载安装Redis</h3> 
<h4><a id="21Redis_7"></a>2.1、选择需要安装的Redis版本</h4> 
<p>在官网发行版中选择一个自己需要的版本，我这里使用Redis6.2.0，小版本区别不大。<br> Redis发行版本列表：<a href="https://download.redis.io/releases" rel="nofollow">https://download.redis.io/releases</a><br> <img src="https://images2.imgbox.com/6c/83/PDSyBoiX_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="22Redis_11"></a>2.2、下载并解压Redis</h4> 
<ul><li>下载redis到/usr/local/redis目录中，这里使用wget下载，如果没有wget执行<code>yum -y install wget</code>安装</li></ul> 
<pre><code class="prism language-bash"><span class="token function">wget</span> <span class="token parameter variable">-P</span> /usr/local/redis http://download.redis.io/releases/redis-6.2.0.tar.gz
</code></pre> 
<ul><li>进入/usr/local/redis目录解压redis</li></ul> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /usr/local/redis
<span class="token function">tar</span> <span class="token parameter variable">-xzf</span> redis-6.2.0.tar.gz
</code></pre> 
<p><img src="https://images2.imgbox.com/fa/77/7l8yclqx_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="23Redis_24"></a>2.3、编译安装Redis</h4> 
<ul><li>安装gcc</li></ul> 
<pre><code class="prism language-bash"><span class="token comment"># redis是c语言编写的，编译Redis需要gcc环境</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> gcc
<span class="token comment"># 安装好后查看gcc信息</span>
gcc <span class="token parameter variable">-v</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e0/90/Mdhm1Tho_o.png" alt="在这里插入图片描述"></p> 
<ul><li>编译</li></ul> 
<pre><code class="prism language-bash"><span class="token comment"># 进入redis-6.2.0目录</span>
<span class="token builtin class-name">cd</span> redis-6.2.0
<span class="token comment"># 执行make开始编译 因为我们下载的是源码需要编译成可执行文件</span>
<span class="token function">make</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4a/6f/bmmrrHgO_o.png" alt="在这里插入图片描述"></p> 
<ul><li>安装</li></ul> 
<pre><code class="prism language-bash"><span class="token comment"># 编译成功后，执行make PREFIX=/usr/local/redis/redis-6.2.0 install 安装redis</span>
<span class="token comment"># 这里指定目录之后，方便后续卸载，直接rm -rf /usr/local/redis/redis-6.2.0 即可删除redis</span>
<span class="token function">make</span> <span class="token assign-left variable">PREFIX</span><span class="token operator">=</span>/usr/local/redis/redis-6.2.0 <span class="token function">install</span>
</code></pre> 
<pre><code class="prism language-bash">PREFIX 这个关键字的作用是安装的时候用于指定程序存放的路径，假设不添加该关键字Linux会将：
	可执行文件存放在/usr/local/bin目录；
	库文件会存放在/usr/local/lib目录；
	配置文件会存放在/usr/local/etc目录；
	其他的资源文件会存放在usr/local/share目录
</code></pre> 
<p><img src="https://images2.imgbox.com/ad/e1/seRTAsJ4_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Redis_Cluster_61"></a>三、部署Redis Cluster高可用集群</h3> 
<ul><li>这里使用单台主机部署，部署6个redis实例，3个主节点，每个主节点1个从节点，端口号使用7001-7006，Redis服务端口和集群节点gossip通信端口默认是在Redis端口号上加10000，如果不是同一台主机要将防火墙关闭或者开放对应端口。</li><li>在Redis Cluster集群部署中不用自己指定master节点，在创建集群时会根据Redis服务数量还有指定每个master节点需要有多少个slave节点自动分配，在下面会进行演示。</li></ul> 
<h4><a id="31_65"></a>3.1、准备配置文件</h4> 
<ul><li>1、创建每个节点信息的存储目录</li></ul> 
<pre><code class="prism language-bash"><span class="token comment"># 创建集群总的存储目录</span>
<span class="token function">mkdir</span> /usr/local/redis/redis-6.2.0/cluster
<span class="token comment"># 进入总存储目录</span>
<span class="token builtin class-name">cd</span> /usr/local/redis/redis-6.2.0/cluster
<span class="token comment"># 创建每个节点存储目录</span>
<span class="token function">mkdir</span> <span class="token number">7001</span> <span class="token number">7002</span> <span class="token number">7003</span> <span class="token number">7004</span> <span class="token number">7005</span> <span class="token number">7006</span>
</code></pre> 
<ul><li>2、先准备7001节点的配置文件，后面只要替换配置文件中的7001然后分发到不同节点存储目录即可</li></ul> 
<pre><code class="prism language-bash"><span class="token comment"># 进入 usr/local/redis/redis-6.2.0 目录操作</span>
<span class="token builtin class-name">cd</span> /usr/local/redis/redis-6.2.0
<span class="token comment"># 备份一份当前目录redis.conf文件做留存</span>
<span class="token function">cp</span> redis.conf redis.conf.back
<span class="token comment"># 修改redis.conf文件 先给7001节点做配置，后面只要替换配置文件中的7001即可</span>
<span class="token function">vi</span> redis.conf
</code></pre> 
<p>修改下面配置</p> 
<pre><code class="prism language-bash"><span class="token comment"># 绑定的主机地址，建议填redis安装服务器的业务私网地址</span>
<span class="token comment"># 这里为了方便直接找到这个配置注释了</span>
<span class="token comment">#bind 127.0.0.1 -::1</span>

<span class="token comment"># redis进程的端口号 默认是6379</span>
port <span class="token number">7001</span>

<span class="token comment"># 是否开启保护模式，默认开启。要是配置里没有指定bind和密码，开启该参数后，redis只会本地进行访问，拒绝外部访问，这里关闭保护模式设置为no。</span>
protected-mode no

<span class="token comment"># redis进程是否以守护进程的方式运行，yes为是（后台运行），no为否(不以守护进程的方式运行会占用一个终端，终端关闭redis服务也会关闭)。</span>
daemonize <span class="token function">yes</span>

<span class="token comment"># 指定redis进程的PID文件存放位置</span>
pidfile /var/run/redis_7001.pid

<span class="token comment"># log文件输出位置</span>
logfile /usr/local/redis/redis-6.2.0/cluster/7001/redis.log

<span class="token comment"># 指定数据文件存放目录(默认当前启动时所在目录)，因为我这里是一台机器部署的要区分开每个节点持久化文件存放的目录</span>
<span class="token function">dir</span> /usr/local/redis/redis-6.2.0/cluster/7001

<span class="token comment"># 设置redis连接密码，如果配置了连接密码，客户端在连接redis是需要通过AUTH&lt;password&gt;命令提供密码，默认关闭</span>
requirepass <span class="token number">123456</span>

<span class="token comment"># 设置集群节点间访问密码，跟上面一致</span>
masterauth <span class="token number">123456</span>

<span class="token comment"># 启动集群模式</span>
cluster-enabled <span class="token function">yes</span>

<span class="token comment"># 集群节点信息文件，这里700x最好和port对应上</span>
cluster-config-file nodes‐7001.conf

<span class="token comment"># 集群节点的超时时限，节点发送对其它节点的PING命令的时候如果超过这个时间还没有响应则标记另外一个为故障状态 默认：15000毫秒</span>
cluster‐node‐timeout <span class="token number">15000</span>
</code></pre> 
<ul><li>3、分发各节点配置文件并替换对应端口</li></ul> 
<pre><code class="prism language-bash"><span class="token comment"># 复制7001的redis.conf到每个节点数据存储目录</span>
<span class="token function">cp</span> redis.conf ./cluster/7001/redis.conf
<span class="token function">cp</span> redis.conf ./cluster/7002/redis.conf
<span class="token function">cp</span> redis.conf ./cluster/7003/redis.conf
<span class="token function">cp</span> redis.conf ./cluster/7004/redis.conf
<span class="token function">cp</span> redis.conf ./cluster/7005/redis.conf
<span class="token function">cp</span> redis.conf ./cluster/7006/redis.conf

<span class="token comment"># 替换每个节点配置文件中的7001字符串为自己节点端口</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span>  <span class="token string">"s/7001/7002/g"</span> ./cluster/7002/redis.conf
<span class="token function">sed</span> <span class="token parameter variable">-i</span>  <span class="token string">"s/7001/7003/g"</span> ./cluster/7003/redis.conf
<span class="token function">sed</span> <span class="token parameter variable">-i</span>  <span class="token string">"s/7001/7004/g"</span> ./cluster/7004/redis.conf
<span class="token function">sed</span> <span class="token parameter variable">-i</span>  <span class="token string">"s/7001/7005/g"</span> ./cluster/7005/redis.conf
<span class="token function">sed</span> <span class="token parameter variable">-i</span>  <span class="token string">"s/7001/7006/g"</span> ./cluster/7006/redis.conf
</code></pre> 
<h4><a id="32Redis_145"></a>3.2、启动Redis服务</h4> 
<pre><code class="prism language-bash">./bin/redis-server ./cluster/7001/redis.conf
./bin/redis-server ./cluster/7002/redis.conf
./bin/redis-server ./cluster/7003/redis.conf
./bin/redis-server ./cluster/7004/redis.conf
./bin/redis-server ./cluster/7005/redis.conf
./bin/redis-server ./cluster/7006/redis.conf
</code></pre> 
<p>查看进程启动状态</p> 
<pre><code class="prism language-bash"><span class="token function">ps</span> <span class="token parameter variable">-aux</span> <span class="token operator">|</span> <span class="token function">grep</span> redis
</code></pre> 
<p><img src="https://images2.imgbox.com/36/81/BykTJub8_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="33Redis_162"></a>3.3、创建Redis集群</h4> 
<p>Redis5以前的版本集群是依靠ruby脚本redis‐trib.rb实现，之后是使用redis‐cli创建整个Redis集群，我这里使用的是Redis6.2.0.</p> 
<pre><code class="prism language-bash"><span class="token comment"># 创建集群</span>
<span class="token comment">## -a 密码</span>
<span class="token comment">## --cluster create 创建集群后面带每个节点的IP:端口</span>
<span class="token comment">## --cluster-replicas 1 表示为每个master创建一个slave节点</span>
./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> create <span class="token number">172.16</span>.8.186:7001 <span class="token number">172.16</span>.8.186:7002 <span class="token number">172.16</span>.8.186:7003 <span class="token number">172.16</span>.8.186:7004 <span class="token number">172.16</span>.8.186:7005 <span class="token number">172.16</span>.8.186:7006 --cluster-replicas <span class="token number">1</span>
</code></pre> 
<p>在创建时会询问是否设置成列出来的配置，输入yes回车即可，槽位分配和主从关系都是由Cluster计算出来的，后续可以通过命令调整</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@parent-docker redis-6.2.0<span class="token punctuation">]</span><span class="token comment"># ./bin/redis-cli -a 123456 --cluster create 172.16.8.186:7001 172.16.8.186:7002 172.16.8.186:7003 172.16.8.186:7004 172.16.8.186:7005 172.16.8.186:7006 --cluster-replicas 1</span>
Warning: Using a password with <span class="token string">'-a'</span> or <span class="token string">'-u'</span> option on the <span class="token builtin class-name">command</span> line interface may not be safe.
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Performing <span class="token builtin class-name">hash</span> slots allocation on <span class="token number">6</span> nodes<span class="token punctuation">..</span>.
Master<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> -<span class="token operator">&gt;</span> Slots <span class="token number">0</span> - <span class="token number">5460</span>
Master<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> -<span class="token operator">&gt;</span> Slots <span class="token number">5461</span> - <span class="token number">10922</span>
Master<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> -<span class="token operator">&gt;</span> Slots <span class="token number">10923</span> - <span class="token number">16383</span>
Adding replica <span class="token number">172.16</span>.8.186:7005 to <span class="token number">172.16</span>.8.186:7001
Adding replica <span class="token number">172.16</span>.8.186:7006 to <span class="token number">172.16</span>.8.186:7002
Adding replica <span class="token number">172.16</span>.8.186:7004 to <span class="token number">172.16</span>.8.186:7003
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Trying to optimize slaves allocation <span class="token keyword">for</span> anti-affinity
<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> Some slaves are <span class="token keyword">in</span> the same <span class="token function">host</span> as their master
M: e4528f6cbf114daaa6d18c8a4111a98329b7c319 <span class="token number">172.16</span>.8.186:7001
   slots:<span class="token punctuation">[</span><span class="token number">0</span>-5460<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
M: d52909707e7a7946955759e9b943e81fe85b3d67 <span class="token number">172.16</span>.8.186:7002
   slots:<span class="token punctuation">[</span><span class="token number">5461</span>-10922<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5462</span> slots<span class="token punctuation">)</span> master
M: aa60b733ba646f9bc541f0a29f9ccaffe9e65f09 <span class="token number">172.16</span>.8.186:7003
   slots:<span class="token punctuation">[</span><span class="token number">10923</span>-16383<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
S: d524a41b8a358b7ad678ff913da62899668d2e69 <span class="token number">172.16</span>.8.186:7004
   replicates e4528f6cbf114daaa6d18c8a4111a98329b7c319
S: 5fb34e0d2187e49cfbba3b4fb89bf40d591089a0 <span class="token number">172.16</span>.8.186:7005
   replicates d52909707e7a7946955759e9b943e81fe85b3d67
S: d1eea9da1d8f471aa90e12f5957f538bce72312c <span class="token number">172.16</span>.8.186:7006
   replicates aa60b733ba646f9bc541f0a29f9ccaffe9e65f09
Can I <span class="token builtin class-name">set</span> the above configuration? <span class="token punctuation">(</span>type <span class="token string">'yes'</span> to accept<span class="token punctuation">)</span>: <span class="token function">yes</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Nodes configuration updated
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Assign a different config epoch to each <span class="token function">node</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Sending CLUSTER MEET messages to <span class="token function">join</span> the cluster
Waiting <span class="token keyword">for</span> the cluster to <span class="token function">join</span>
<span class="token builtin class-name">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Performing Cluster Check <span class="token punctuation">(</span>using <span class="token function">node</span> <span class="token number">172.16</span>.8.186:7001<span class="token punctuation">)</span>
M: e4528f6cbf114daaa6d18c8a4111a98329b7c319 <span class="token number">172.16</span>.8.186:7001
   slots:<span class="token punctuation">[</span><span class="token number">0</span>-5460<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
   <span class="token number">1</span> additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
M: d52909707e7a7946955759e9b943e81fe85b3d67 <span class="token number">172.16</span>.8.186:7002
   slots:<span class="token punctuation">[</span><span class="token number">5461</span>-10922<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5462</span> slots<span class="token punctuation">)</span> master
   <span class="token number">1</span> additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
S: d524a41b8a358b7ad678ff913da62899668d2e69 <span class="token number">172.16</span>.8.186:7004
   slots: <span class="token punctuation">(</span><span class="token number">0</span> slots<span class="token punctuation">)</span> slave
   replicates e4528f6cbf114daaa6d18c8a4111a98329b7c319
S: 5fb34e0d2187e49cfbba3b4fb89bf40d591089a0 <span class="token number">172.16</span>.8.186:7005
   slots: <span class="token punctuation">(</span><span class="token number">0</span> slots<span class="token punctuation">)</span> slave
   replicates d52909707e7a7946955759e9b943e81fe85b3d67
M: aa60b733ba646f9bc541f0a29f9ccaffe9e65f09 <span class="token number">172.16</span>.8.186:7003
   slots:<span class="token punctuation">[</span><span class="token number">10923</span>-16383<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
   <span class="token number">1</span> additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
S: d1eea9da1d8f471aa90e12f5957f538bce72312c <span class="token number">172.16</span>.8.186:7006
   slots: <span class="token punctuation">(</span><span class="token number">0</span> slots<span class="token punctuation">)</span> slave
   replicates aa60b733ba646f9bc541f0a29f9ccaffe9e65f09
<span class="token punctuation">[</span>OK<span class="token punctuation">]</span> All nodes agree about slots configuration.
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Check <span class="token keyword">for</span> <span class="token function">open</span> slots<span class="token punctuation">..</span>.
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Check slots coverage<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>OK<span class="token punctuation">]</span> All <span class="token number">16384</span> slots covered.
</code></pre> 
<h4><a id="34_228"></a>3.4、查看集群关系</h4> 
<p>在任意一台节点都能查看</p> 
<pre><code class="prism language-bash">./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> check <span class="token number">172.16</span>.8.186:7001
</code></pre> 
<p>可以在这个信息中看到主从关系和槽位以及每个主节点中key的数量信息。<br> <img src="https://images2.imgbox.com/a0/65/n3cZ0suO_o.png" alt="在这里插入图片描述"></p> 
<p>还可以连接上任意一台Redis服务使用命令查看</p> 
<pre><code class="prism language-bash"><span class="token comment"># 查看集群信息</span>
<span class="token number">172.16</span>.8.186:700<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> cluster info
<span class="token comment"># 查看节点列表</span>
<span class="token number">172.16</span>.8.186:700<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> cluster nodes
</code></pre> 
<h4><a id="35Redis_245"></a>3.5、连接集群Redis进行数据读写以及重定向测试</h4> 
<ul><li>1、连接集群Redis（连接任意节点都可以，操作key时如果槽位不在当前节点或者不是主节点，会自动重定向到对应的主节点）</li></ul> 
<pre><code class="prism language-bash"><span class="token comment">## -c 集群节点跳转重定向，如果不加-c，节点之间是无法自动跳转的</span>
./bin/redis-cli <span class="token parameter variable">-c</span> <span class="token parameter variable">-h</span> <span class="token number">172.16</span>.8.186 <span class="token parameter variable">-p</span> <span class="token number">7001</span> <span class="token parameter variable">-a</span> <span class="token number">123456</span>
</code></pre> 
<ul><li>2、插入数据</li></ul> 
<pre><code class="prism language-bash"><span class="token number">172.16</span>.8.186:700<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token builtin class-name">set</span> names kerwin
</code></pre> 
<p>在7001节点执行插入操作，计算出names这个key的槽位为6659，是在主节点7002中，这里可以看到直接重定向到了7002节点，就相当于在7002节点执行的插入，而且客户端这里连接的节点也变为了7002，如果计算出的槽位在7001中则可以直接插入。<br> <img src="https://images2.imgbox.com/5b/34/TlmAier2_o.png" alt="在这里插入图片描述"></p> 
<ul><li> <p>3、读取数据<br> 先关闭连接，然后重新连接。</p> <pre><code class="prism language-bash"><span class="token number">172.16</span>.8.186:700<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> get names
</code></pre> <p>读数据这里和写数据是一样的逻辑，计算出key的槽位不在当前主节点，则会自动重定向到对应的主节点中读取。<br> <img src="https://images2.imgbox.com/b7/1b/k214kEUN_o.png" alt="在这里插入图片描述"></p> </li><li> <p>4、从节点读数据<br> 根据上面的测试我们看到names这个key会落在7002节点中，7002的从节点是7005，那么我们在7005上执行读操作会进行重定向吗，这里测试一下。</p> <pre><code class="prism language-bash"><span class="token comment">## -c 集群节点跳转重定向，如果不加-c，节点之间是无法自动跳转的</span>
./bin/redis-cli <span class="token parameter variable">-c</span> <span class="token parameter variable">-h</span> <span class="token number">172.16</span>.8.186 <span class="token parameter variable">-p</span> <span class="token number">7005</span> <span class="token parameter variable">-a</span> <span class="token number">123456</span>
</code></pre> <p>这里可以看到就算在从节点也无法获取数据，还是会重定向到主节点获取数据，官方默认设置的是不分担读请求的、只作备份和故障转移用，当有请求读向从节点时，会被重定向对应的主节点来处理。<br> <img src="https://images2.imgbox.com/70/0a/CRBhV408_o.png" alt="在这里插入图片描述"></p> <p>要想在从节点读取数据也可以使用readonly命令，这个readonly告诉 Redis Cluster 从节点客户端愿意读取可能过时的数据并且对写请求不感兴趣，只在当前会话有效，断开连接后readonly就失效了，再次连接需要重新使用该命令。<br> <img src="https://images2.imgbox.com/b7/f4/weXuzG5Q_o.png" alt="在这里插入图片描述"></p> </li></ul> 
<h4><a id="36_278"></a>3.6、故障转移和恢复测试</h4> 
<ul><li>1、这里我们手动停止主节点7001</li></ul> 
<pre><code class="prism language-bash">./bin/redis-cli <span class="token parameter variable">-c</span> <span class="token parameter variable">-h</span> <span class="token number">172.16</span>.8.186 <span class="token parameter variable">-p</span> <span class="token number">7001</span> <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token function">shutdown</span>
</code></pre> 
<ul><li>2、查看集群信息</li></ul> 
<pre><code class="prism language-bash">./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> check <span class="token number">172.16</span>.8.186:7002
</code></pre> 
<p>这里可以看到7001已经没了，7004变成了新的主节点<br> <img src="https://images2.imgbox.com/8d/27/bI9alpjF_o.png" alt="在这里插入图片描述"></p> 
<ul><li>3、重新启动7001</li></ul> 
<pre><code class="prism language-bash">./bin/redis-server ./cluster/7001/redis.conf
</code></pre> 
<ul><li>4、查看集群信息</li></ul> 
<pre><code class="prism language-bash">./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> check <span class="token number">172.16</span>.8.186:7002
</code></pre> 
<p>可以看到7001又加入了集群，不过这个时候是7004的从节点<br> <img src="https://images2.imgbox.com/5e/be/5dy15c3C_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="37Redis_300"></a>3.7、Redis集群中添加节点并分配槽位</h4> 
<p>进入<code>/usr/local/redis/redis-6.2.0</code>目录操作<code>cd /usr/local/redis/redis-6.2.0 </code></p> 
<h5><a id="371Redis7007_7008_302"></a>3.7.1、先部署两个新的Redis服务使用端口号7007 7008</h5> 
<pre><code class="prism language-bash"><span class="token comment"># 1、创建7007 7008节点存储目录</span>
<span class="token function">mkdir</span> /usr/local/redis/redis-6.2.0/cluster/7007
<span class="token function">mkdir</span> /usr/local/redis/redis-6.2.0/cluster/7008

<span class="token comment"># 2、复制7001的redis.conf到7007 7008节点存储目录</span>
<span class="token function">cp</span> redis.conf ./cluster/7007/redis.conf
<span class="token function">cp</span> redis.conf ./cluster/7008/redis.conf

<span class="token comment"># 3、替换每个节点配置文件中的7001字符串为自己节点端口</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span>  <span class="token string">"s/7001/7007/g"</span> ./cluster/7007/redis.conf
<span class="token function">sed</span> <span class="token parameter variable">-i</span>  <span class="token string">"s/7001/7008/g"</span> ./cluster/7008/redis.conf

<span class="token comment"># 4、启动7007 7008节点Redis服务</span>
./bin/redis-server ./cluster/7007/redis.conf
./bin/redis-server ./cluster/7008/redis.conf

<span class="token comment"># 5、查看7007 7008节点启动状态</span>
<span class="token function">ps</span> <span class="token parameter variable">-aux</span> <span class="token operator">|</span> <span class="token function">grep</span> redis
</code></pre> 
<p><img src="https://images2.imgbox.com/16/89/7gP1Cz00_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="372_326"></a>3.7.2、集群中添加主节点</h5> 
<pre><code class="prism language-bash"><span class="token comment"># --cluster add-node  添加节点，如果命令中没有--cluster-slave --cluster-master-id则是添加主节点</span>
<span class="token comment"># 172.16.8.186:7007  需要添加的Redis服务</span>
<span class="token comment"># 172.16.8.186:7001  集群中任意一个节点都可以，我这里使用7001节点</span>
<span class="token comment"># -a 123456  Redis服务密码</span>
./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> add-node <span class="token number">172.16</span>.8.186:7007 <span class="token number">172.16</span>.8.186:7001
</code></pre> 
<p><img src="https://images2.imgbox.com/5b/0c/3FIZr8b0_o.png" alt="在这里插入图片描述"></p> 
<p>添加好后可以查看集群信息</p> 
<pre><code class="prism language-bash">./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> check <span class="token number">172.16</span>.8.186:7001
</code></pre> 
<p>可以看到7007已经成功加入集群，并且为主节点，但是没有槽位，无法进行读写，需要先分配槽位<br> <img src="https://images2.imgbox.com/5c/2b/zNCiZBVa_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="373_344"></a>3.7.3、给新添加的主节点分配槽位</h5> 
<pre><code class="prism language-bash"><span class="token comment"># --cluster reshard  重新分配槽位</span>
<span class="token comment"># 172.16.8.186:7001  集群中任意节点都行，这里选择7001</span>
./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> reshard <span class="token number">172.16</span>.8.186:7001
</code></pre> 
<p><img src="https://images2.imgbox.com/2a/47/cXPswjNL_o.png" alt="在这里插入图片描述"></p> 
<p>回车执行后还会询问一下是否执行分配，输入yes回车即可，后面会开始执行槽位迁移，执行完后查看集群信息，可以看到7007节点被分配了三个区间的槽位，总合4096，正好是从其它3个节点迁移过来的。<br> <img src="https://images2.imgbox.com/54/98/DYy6GmhM_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="374_356"></a>3.7.4、集群中给指定主节点添加从节点</h5> 
<pre><code class="prism language-bash"><span class="token comment"># --cluster add-node  添加节点，如果命令中加了--cluster-slave --cluster-master-id 则是添加从节点</span>
<span class="token comment"># --cluster-slave 添加从节点</span>
<span class="token comment"># --cluster-master-id 主节点ID</span>
<span class="token comment"># 172.16.8.186:7008  需要添加的Redis服务</span>
<span class="token comment"># 172.16.8.186:7001  集群中任意一个节点都可以，我这里使用7001节点</span>
<span class="token comment"># -a 123456  Redis服务密码</span>
./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> add-node <span class="token number">172.16</span>.8.186:7008 <span class="token number">172.16</span>.8.186:7001 --cluster-slave --cluster-master-id 5292ce107ed07159d3e9b413aad3210277494c9c
</code></pre> 
<p><img src="https://images2.imgbox.com/ca/14/E3DmBC08_o.png" alt="在这里插入图片描述"></p> 
<p>添加好查看一下集群节点信息</p> 
<pre><code class="prism language-bash">./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> check <span class="token number">172.16</span>.8.186:7001
</code></pre> 
<p>从节点也添加成功<br> <img src="https://images2.imgbox.com/42/94/9dSIO08P_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="38Redis_376"></a>3.8、删除Redis集群中节点</h4> 
<ul><li><font color="red"><strong>注意事项</strong></font> 
  <ul><li> <p>要删除节点首先要先删除从节点，确保主节点下没有从节点，避免从节点自动切换成其它主节点的从节点。</p> </li><li> <p>删除主节点前要先将被删除节点的槽位分配出去，不然无法删除会出现<code>[ERR] Node 172.16.8.186:7007 is not empty! Reshard data away and try again.</code></p> </li><li> <p>在移除某个Redis节点之前，不能登入该节点操作，要使用其它节点会话操作，否则不能正常移除该节点。</p> </li></ul> </li></ul> 
<h5><a id="381_384"></a>3.8.1、删除从节点</h5> 
<pre><code class="prism language-bash"><span class="token comment"># --cluster del-node 删除节点</span>
<span class="token comment"># 172.16.8.186:7001 集群中任意节点，不能是被删除的节点</span>
<span class="token comment"># 7d1437adb68606d46160220cdba2f2728b88ec4d 在最后面带上要删除的节点ID</span>
./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> del-node <span class="token number">172.16</span>.8.186:7001 7d1437adb68606d46160220cdba2f2728b88ec4d
</code></pre> 
<h5><a id="382_392"></a>3.8.2、将被删除主节点槽位迁移到别的主节点</h5> 
<pre><code class="prism language-bash"><span class="token comment"># --cluster reshard  重新分配槽位</span>
<span class="token comment"># 172.16.8.186:7001  集群中任意节点都行，这里选择7001</span>
./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> reshard <span class="token number">172.16</span>.8.186:7001
</code></pre> 
<p><img src="https://images2.imgbox.com/96/0c/nYtMQKoF_o.png" alt="在这里插入图片描述"></p> 
<p>查看一下集群节点信息</p> 
<pre><code class="prism language-bash">./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> check <span class="token number">172.16</span>.8.186:7001
</code></pre> 
<p><img src="https://images2.imgbox.com/68/3a/yiMbh27P_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="383_407"></a>3.8.3、删除主节点</h5> 
<pre><code class="prism language-bash"><span class="token comment"># --cluster del-node 删除节点</span>
<span class="token comment"># 172.16.8.186:7001 集群中任意节点，不能是被删除的节点</span>
<span class="token comment"># 5292ce107ed07159d3e9b413aad3210277494c9c 在最后面带上要删除的节点ID</span>
./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> del-node <span class="token number">172.16</span>.8.186:7001 5292ce107ed07159d3e9b413aad3210277494c9c
</code></pre> 
<p><img src="https://images2.imgbox.com/60/5e/C7BUEZf1_o.png" alt="在这里插入图片描述"></p> 
<p>查看一下集群节点信息</p> 
<pre><code class="prism language-bash">./bin/redis-cli <span class="token parameter variable">-a</span> <span class="token number">123456</span> <span class="token parameter variable">--cluster</span> check <span class="token number">172.16</span>.8.186:7001
</code></pre> 
<p>7007和7008节点都被移除<br> <img src="https://images2.imgbox.com/87/2c/ktbaicTK_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="SpringBootRedis_Cluster_422"></a>四、SpringBoot集成Redis Cluster集群</h3> 
<p><a href="https://blog.csdn.net/weixin_44606481/article/details/134073096">https://blog.csdn.net/weixin_44606481/article/details/134073096</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2430bc2d033fdfa406c81c85fa431e6d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据分析必备原理思路（二）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6be840cddf3dc6857fe0bb933c742794/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">写了一个根据用户输入在屏幕上显示图片的练习，出了一点问题。</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>