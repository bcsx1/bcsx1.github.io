<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Go语言函数 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Go语言函数" />
<meta property="og:description" content="1、Go语言函数 函数是基本的代码块，用于执行一个任务。
Go 语言最少有个 main() 函数。
你可以通过函数来划分不同功能，逻辑上每个函数执行的是指定的任务。
函数声明告诉了编译器函数的名称，返回类型，和参数。
Go 语言标准库提供了多种可动用的内置的函数。例如，len() 函数可以接受不同类型参数并返回该类型的长度。如
果我们传入的是字符串则返回字符串的长度，如果传入的是数组，则返回数组中包含的元素个数。
1.1 函数定义 Go 语言函数定义格式如下：
func function_name( [parameter list] ) [return_types] { 函数体 } 函数定义解析：
func：函数由 func 开始声明
function_name：函数名称，参数列表和返回值类型构成了函数签名。
parameter list：参数列表，参数就像一个占位符，当函数被调用时，你可以将值传递给参数，这个值被称为
实际参数。参数列表指定的是参数类型、顺序、及参数个数。参数是可选的，也就是说函数也可以不包含参
数。
return_types：返回类型，函数返回一列值。return_types 是该列值的数据类型。有些功能不需要返回值，这
种情况下 return_types 不是必须的。
函数体：函数定义的代码集合。
// 函数传入两个整型参数num1和num2,并返回这两个参数的最大值 // 函数返回两个数的最大值 func max(num1, num2 int) int { /* 声明局部变量 */ var result int if num1 &gt; num2 { result = num1 } else { result = num2 } return result } 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/13273cebe1f184728ed3deca67577730/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-25T22:10:31+08:00" />
<meta property="article:modified_time" content="2023-06-25T22:10:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Go语言函数</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1Go_0"></a>1、Go语言函数</h3> 
<p>函数是基本的代码块，用于执行一个任务。</p> 
<p>Go 语言最少有个 main() 函数。</p> 
<p>你可以通过函数来划分不同功能，逻辑上每个函数执行的是指定的任务。</p> 
<p>函数声明告诉了编译器函数的名称，返回类型，和参数。</p> 
<p>Go 语言标准库提供了多种可动用的内置的函数。例如，len() 函数可以接受不同类型参数并返回该类型的长度。如</p> 
<p>果我们传入的是字符串则返回字符串的长度，如果传入的是数组，则返回数组中包含的元素个数。</p> 
<h4><a id="11__14"></a>1.1 函数定义</h4> 
<p>Go 语言函数定义格式如下：</p> 
<pre><code class="prism language-go"><span class="token keyword">func</span> <span class="token function">function_name</span><span class="token punctuation">(</span> <span class="token punctuation">[</span>parameter list<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">[</span>return_types<span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span>
   函数体
<span class="token punctuation">}</span>
</code></pre> 
<p>函数定义解析：</p> 
<ul><li> <p>func：函数由 func 开始声明</p> </li><li> <p>function_name：函数名称，参数列表和返回值类型构成了函数签名。</p> </li><li> <p>parameter list：参数列表，参数就像一个占位符，当函数被调用时，你可以将值传递给参数，这个值被称为</p> <p>实际参数。参数列表指定的是参数类型、顺序、及参数个数。参数是可选的，也就是说函数也可以不包含参</p> <p>数。</p> </li><li> <p>return_types：返回类型，函数返回一列值。return_types 是该列值的数据类型。有些功能不需要返回值，这</p> <p>种情况下 return_types 不是必须的。</p> </li><li> <p>函数体：函数定义的代码集合。</p> </li></ul> 
<pre><code class="prism language-go"><span class="token comment">// 函数传入两个整型参数num1和num2,并返回这两个参数的最大值</span>
<span class="token comment">// 函数返回两个数的最大值</span>
<span class="token keyword">func</span> <span class="token function">max</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">/* 声明局部变量 */</span>
	<span class="token keyword">var</span> result <span class="token builtin">int</span>
	<span class="token keyword">if</span> num1 <span class="token operator">&gt;</span> num2 <span class="token punctuation">{<!-- --></span>
		result <span class="token operator">=</span> num1
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
		result <span class="token operator">=</span> num2
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="12__57"></a>1.2 函数调用</h4> 
<p>当创建函数时，你定义了函数需要做什么，通过调用该函数来执行指定任务。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">//定义切片</span>
	<span class="token keyword">var</span> num <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">//将数据添加到切片中去</span>
		num <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token function">PrintingMultiplicationFormulas</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 打印九九乘法口诀</span>
<span class="token keyword">func</span> <span class="token function">PrintingMultiplicationFormulas</span><span class="token punctuation">(</span>num <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
			value <span class="token operator">:=</span> num<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> i
			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d*%d=%d\t"</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> i<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-shell"><span class="token comment"># 程序输出</span>
<span class="token number">1</span>*1<span class="token operator">=</span><span class="token number">1</span>
<span class="token number">1</span>*2<span class="token operator">=</span><span class="token number">2</span>   <span class="token number">2</span>*2<span class="token operator">=</span><span class="token number">4</span>
<span class="token number">1</span>*3<span class="token operator">=</span><span class="token number">3</span>   <span class="token number">2</span>*3<span class="token operator">=</span><span class="token number">6</span>   <span class="token number">3</span>*3<span class="token operator">=</span><span class="token number">9</span>
<span class="token number">1</span>*4<span class="token operator">=</span><span class="token number">4</span>   <span class="token number">2</span>*4<span class="token operator">=</span><span class="token number">8</span>   <span class="token number">3</span>*4<span class="token operator">=</span><span class="token number">12</span>  <span class="token number">4</span>*4<span class="token operator">=</span><span class="token number">16</span>
<span class="token number">1</span>*5<span class="token operator">=</span><span class="token number">5</span>   <span class="token number">2</span>*5<span class="token operator">=</span><span class="token number">10</span>  <span class="token number">3</span>*5<span class="token operator">=</span><span class="token number">15</span>  <span class="token number">4</span>*5<span class="token operator">=</span><span class="token number">20</span>  <span class="token number">5</span>*5<span class="token operator">=</span><span class="token number">25</span>
<span class="token number">1</span>*6<span class="token operator">=</span><span class="token number">6</span>   <span class="token number">2</span>*6<span class="token operator">=</span><span class="token number">12</span>  <span class="token number">3</span>*6<span class="token operator">=</span><span class="token number">18</span>  <span class="token number">4</span>*6<span class="token operator">=</span><span class="token number">24</span>  <span class="token number">5</span>*6<span class="token operator">=</span><span class="token number">30</span>  <span class="token number">6</span>*6<span class="token operator">=</span><span class="token number">36</span>
<span class="token number">1</span>*7<span class="token operator">=</span><span class="token number">7</span>   <span class="token number">2</span>*7<span class="token operator">=</span><span class="token number">14</span>  <span class="token number">3</span>*7<span class="token operator">=</span><span class="token number">21</span>  <span class="token number">4</span>*7<span class="token operator">=</span><span class="token number">28</span>  <span class="token number">5</span>*7<span class="token operator">=</span><span class="token number">35</span>  <span class="token number">6</span>*7<span class="token operator">=</span><span class="token number">42</span>  <span class="token number">7</span>*7<span class="token operator">=</span><span class="token number">49</span>
<span class="token number">1</span>*8<span class="token operator">=</span><span class="token number">8</span>   <span class="token number">2</span>*8<span class="token operator">=</span><span class="token number">16</span>  <span class="token number">3</span>*8<span class="token operator">=</span><span class="token number">24</span>  <span class="token number">4</span>*8<span class="token operator">=</span><span class="token number">32</span>  <span class="token number">5</span>*8<span class="token operator">=</span><span class="token number">40</span>  <span class="token number">6</span>*8<span class="token operator">=</span><span class="token number">48</span>  <span class="token number">7</span>*8<span class="token operator">=</span><span class="token number">56</span>  <span class="token number">8</span>*8<span class="token operator">=</span><span class="token number">64</span>
<span class="token number">1</span>*9<span class="token operator">=</span><span class="token number">9</span>   <span class="token number">2</span>*9<span class="token operator">=</span><span class="token number">18</span>  <span class="token number">3</span>*9<span class="token operator">=</span><span class="token number">27</span>  <span class="token number">4</span>*9<span class="token operator">=</span><span class="token number">36</span>  <span class="token number">5</span>*9<span class="token operator">=</span><span class="token number">45</span>  <span class="token number">6</span>*9<span class="token operator">=</span><span class="token number">54</span>  <span class="token number">7</span>*9<span class="token operator">=</span><span class="token number">63</span>  <span class="token number">8</span>*9<span class="token operator">=</span><span class="token number">72</span>  <span class="token number">9</span>*9<span class="token operator">=</span><span class="token number">81</span>
</code></pre> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// 函数传入两个整型参数num1和num2,并返回这两个参数的最大值</span>
<span class="token comment">// 函数返回两个数的最大值</span>
<span class="token keyword">func</span> <span class="token function">max</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">/* 声明局部变量 */</span>
	<span class="token keyword">var</span> result <span class="token builtin">int</span>
	<span class="token keyword">if</span> num1 <span class="token operator">&gt;</span> num2 <span class="token punctuation">{<!-- --></span>
		result <span class="token operator">=</span> num1
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
		result <span class="token operator">=</span> num2
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">/* 定义局部变量 */</span>
	<span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">100</span>
	<span class="token keyword">var</span> b <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">200</span>
	<span class="token keyword">var</span> ret <span class="token builtin">int</span>
	<span class="token comment">/* 调用函数并返回最大值 */</span>
	ret <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
	<span class="token comment">// 最大值是 : 200</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"最大值是 : %d\n"</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="13__131"></a>1.3 函数返回多个值</h4> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> y<span class="token punctuation">,</span> x
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	a<span class="token punctuation">,</span> b <span class="token operator">:=</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token string">"Google"</span><span class="token punctuation">,</span> <span class="token string">"Baidu"</span><span class="token punctuation">)</span>
	<span class="token comment">// Baidu Google</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="14__149"></a>1.4 函数参数</h4> 
<p>函数如果使用参数，该变量可称为函数的形参。</p> 
<p>形参就像定义在函数体内的局部变量。</p> 
<p>调用函数，可以通过两种方式来传递参数：</p> 
<table><thead><tr><th align="left">传递类型</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">值传递</td><td align="left">值传递是指在调用函数时将实际参数复制一份传递到函数中，这样在函数中如果对参数进行修改，将不会影响到实际参数。</td></tr><tr><td align="left">引用传递</td><td align="left">引用传递是指在调用函数时将实际参数的地址传递到函数中，那么在函数中对参数所进行的修改，将影响到实际参数。</td></tr></tbody></table> 
<p>默认情况下，Go 语言使用的是值传递，即在调用过程中不会影响到实际参数。</p> 
<h5><a id="141_Go__164"></a>1.4.1 Go 语言函数值传递值</h5> 
<p>传递是指在调用函数时将实际参数复制一份传递到函数中，这样在函数中如果对参数进行修改，将不会影响到实际</p> 
<p>参数。</p> 
<p>默认情况下，Go 语言使用的是值传递，即在调用过程中不会影响到实际参数。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">/* 定义局部变量 */</span>
	<span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">100</span>
	<span class="token keyword">var</span> b <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">200</span>
	<span class="token comment">/*
		交换前 a 的值为 : 100
		交换前 b 的值为 : 200
		交换后 a 的值 : 100
		交换后 b 的值 : 200
	*/</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"交换前 a 的值为 : %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"交换前 b 的值为 : %d\n"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span>
	<span class="token comment">/* 通过调用函数来交换值 */</span>
	<span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"交换后 a 的值 : %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"交换后 b 的值 : %d\n"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 定义相互交换值的函数 */</span>
<span class="token keyword">func</span> <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">var</span> temp <span class="token builtin">int</span>
	temp <span class="token operator">=</span> x <span class="token comment">/* 保存 x 的值 */</span>
	x <span class="token operator">=</span> y    <span class="token comment">/* 将 y 值赋给 x */</span>
	y <span class="token operator">=</span> temp <span class="token comment">/* 将 temp 值赋给 y*/</span>
	<span class="token keyword">return</span> temp
<span class="token punctuation">}</span>
</code></pre> 
<p>程序中使用的是值传递, 所以两个值并没有实现交互，我们可以使用引用传递来实现交换效果。</p> 
<p>交换值可以这么写：</p> 
<pre><code class="prism language-go">a <span class="token operator">:=</span> <span class="token number">100</span>
b <span class="token operator">:=</span> <span class="token number">200</span>
a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a
</code></pre> 
<h5><a id="142_Go__215"></a>1.4.2 Go 语言函数引用传递值</h5> 
<p>引用传递是指在调用函数时将实际参数的地址传递到函数中，那么在函数中对参数所进行的修改，将影响到实际参</p> 
<p>数。引用传递指针参数传递到函数内。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">/* 定义局部变量 */</span>
	<span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">100</span>
	<span class="token keyword">var</span> b <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">200</span>
	<span class="token comment">/*
		交换前，a 的值 : 100
		交换前，b 的值 : 200
		交换后，a 的值 : 200
		交换后，b 的值 : 100
	*/</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"交换前，a 的值 : %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"交换前，b 的值 : %d\n"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span>
	<span class="token comment">/* 调用 swap() 函数
	 * &amp;a 指向 a 指针，a 变量的地址
	 * &amp;b 指向 b 指针，b 变量的地址
	 */</span>
	<span class="token function">swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token operator">&amp;</span>b<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"交换后，a 的值 : %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"交换后，b 的值 : %d\n"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">swap</span><span class="token punctuation">(</span>x <span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">var</span> temp <span class="token builtin">int</span>
	temp <span class="token operator">=</span> <span class="token operator">*</span>x <span class="token comment">/* 保存 x 地址上的值 */</span>
	<span class="token operator">*</span>x <span class="token operator">=</span> <span class="token operator">*</span>y   <span class="token comment">/* 将 y 值赋给 x */</span>
	<span class="token operator">*</span>y <span class="token operator">=</span> temp <span class="token comment">/* 将 temp 值赋给 y */</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>所有参数都是值传递，<code>slice</code>，<code>map</code>，<code>channel</code> 会有传引用的错觉，比如切片，它背后对应的是一个数组，切片</p> 
<p>本身是一个数据结构，在这个数据结构中包含了指向了这个数组的指针。所以说，即便是在传值的情况下这个结构</p> 
<p>被复制到函数里了，在通过指针去操作这个数组的值的时候，其实是操作的是同一块空间，实际上是结构被复制</p> 
<p>了，但是结构里包含的指针指向的是同一个数组，所以才有这个错觉。</p> 
<h4><a id="15__262"></a>1.5 函数用法</h4> 
<table><thead><tr><th align="left">函数用法</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">函数作为另外一个函数的实参</td><td align="left">函数定义后可作为另外一个函数的实参数传入</td></tr><tr><td align="left">闭包</td><td align="left">闭包是匿名函数，可在动态编程中使用</td></tr><tr><td align="left">方法</td><td align="left">方法就是一个包含了接受者的函数</td></tr></tbody></table> 
<h5><a id="151_Go__270"></a>1.5.1 Go 语言函数作为实参</h5> 
<p>Go 语言可以很灵活的创建函数，并作为另外一个函数的实参。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"math"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">/* 声明函数变量 */</span>
	getSquareRoot <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>x <span class="token builtin">float64</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> math<span class="token punctuation">.</span><span class="token function">Sqrt</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">/* 使用函数 */</span>
	<span class="token comment">// 3</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">getSquareRoot</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>函数作为参数传递，实现回调。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// 声明一个函数类型</span>
<span class="token keyword">type</span> cb <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">/*
		我是回调，x：1
		我是回调，x：2
	*/</span>
	<span class="token function">testCallBack</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> callBack<span class="token punctuation">)</span>
	<span class="token function">testCallBack</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"我是回调，x：%d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
		<span class="token keyword">return</span> x
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">testCallBack</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> f cb<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">callBack</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"我是回调，x：%d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
	<span class="token keyword">return</span> x
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="152_Go__325"></a>1.5.2 Go 语言函数闭包</h5> 
<p>Go 语言支持匿名函数，可作为闭包。匿名函数是一个"内联"语句或表达式。匿名函数的优越性在于可以直接使用</p> 
<p>函数内的变量，不必申明。</p> 
<p>实例1：</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">getSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	i <span class="token operator">:=</span> <span class="token number">0</span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
		i <span class="token operator">+=</span> <span class="token number">1</span>
		<span class="token keyword">return</span> i
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">/* nextNumber 为一个函数，函数 i 为 0 */</span>
	nextNumber <span class="token operator">:=</span> <span class="token function">getSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">/* 调用 nextNumber 函数，i 变量自增 1 并返回 */</span>
	<span class="token comment">// 1</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">nextNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 2</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">nextNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 3</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">nextNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">/* 创建新的函数 nextNumber1，并查看结果 */</span>
	nextNumber1 <span class="token operator">:=</span> <span class="token function">getSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// 1</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">nextNumber1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 2</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">nextNumber1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>实例2：带参数的闭包函数调用</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	add_func <span class="token operator">:=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token comment">// 1 3</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add_func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 2 3</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add_func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 3 3</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add_func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 闭包使用方法</span>
<span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> x2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	i <span class="token operator">:=</span> <span class="token number">0</span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		i<span class="token operator">++</span>
		<span class="token keyword">return</span> i<span class="token punctuation">,</span> x1 <span class="token operator">+</span> x2
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	add_func <span class="token operator">:=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token comment">// 1 3 2</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add_func</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 2 3 0</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add_func</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 3 3 4</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add_func</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 闭包使用方法</span>
<span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> x2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span>x3 <span class="token builtin">int</span><span class="token punctuation">,</span> x4 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	i <span class="token operator">:=</span> <span class="token number">0</span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>x3 <span class="token builtin">int</span><span class="token punctuation">,</span> x4 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		i<span class="token operator">++</span>
		<span class="token keyword">return</span> i<span class="token punctuation">,</span> x1 <span class="token operator">+</span> x2<span class="token punctuation">,</span> x3 <span class="token operator">+</span> x4
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
闭包使用方法，函数声明中的返回值(闭包函数)不用写具体的形参名称
func add(x1, x2 int) func(int, int) (int, int, int) {
	i := 0
	return func(x3, x4 int) (int, int, int) {
		i += 1
		return i, x1 + x2, x3 + x4
	}
}
*/</span>
</code></pre> 
<h5><a id="153_Go__428"></a>1.5.3 Go 语言函数方法</h5> 
<p>Go 语言中同时有函数和方法。一个方法就是一个包含了接受者的函数，接受者可以是命名类型或者结构体类型的</p> 
<p>一个值或者是一个指针。所有给定类型的方法属于该类型的方法集。语法格式如下：</p> 
<pre><code class="prism language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>variable_name variable_data_type<span class="token punctuation">)</span> <span class="token function">function_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>return_type<span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span>
   <span class="token comment">/* 函数体*/</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token comment">/* 定义结构体 */</span>
<span class="token keyword">type</span> Circle <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span>
	radius <span class="token builtin">float64</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">var</span> c1 Circle
	c1<span class="token punctuation">.</span>radius <span class="token operator">=</span> <span class="token number">10.00</span>
	<span class="token comment">// 圆的面积 =  314</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"圆的面积 = "</span><span class="token punctuation">,</span> c1<span class="token punctuation">.</span><span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//该 method 属于 Circle 类型对象中的方法</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c Circle<span class="token punctuation">)</span> <span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">//c.radius 即为 Circle 类型对象中的属性</span>
	<span class="token keyword">return</span> <span class="token number">3.14</span> <span class="token operator">*</span> c<span class="token punctuation">.</span>radius <span class="token operator">*</span> c<span class="token punctuation">.</span>radius
<span class="token punctuation">}</span>
</code></pre> 
<p>关于值和指针，如果想在方法中改变结构体类型的属性，需要对方法传递指针。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token comment">/* 定义结构体 */</span>
<span class="token keyword">type</span> Circle <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span>
	radius <span class="token builtin">float64</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">var</span> c Circle
	<span class="token comment">// 0</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>radius<span class="token punctuation">)</span>
	c<span class="token punctuation">.</span>radius <span class="token operator">=</span> <span class="token number">10.00</span>
	<span class="token comment">// 100</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	c<span class="token punctuation">.</span><span class="token function">changeRadius</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
	<span class="token comment">// 20</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>radius<span class="token punctuation">)</span>
	<span class="token function">change</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>c<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
	<span class="token comment">// 30</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>radius<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c Circle<span class="token punctuation">)</span> <span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> c<span class="token punctuation">.</span>radius <span class="token operator">*</span> c<span class="token punctuation">.</span>radius
<span class="token punctuation">}</span>

<span class="token comment">// 注意如果想要更改成功c的值，这里需要传指针</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Circle<span class="token punctuation">)</span> <span class="token function">changeRadius</span><span class="token punctuation">(</span>radius <span class="token builtin">float64</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	c<span class="token punctuation">.</span>radius <span class="token operator">=</span> radius
<span class="token punctuation">}</span>

<span class="token comment">// 以下操作将不生效</span>
<span class="token comment">/*
func (c Circle) changeRadius(radius float64)  {
   c.radius = radius
}
*/</span>

<span class="token comment">// 引用类型要想改变值需要传指针</span>
<span class="token keyword">func</span> <span class="token function">change</span><span class="token punctuation">(</span>c <span class="token operator">*</span>Circle<span class="token punctuation">,</span> radius <span class="token builtin">float64</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	c<span class="token punctuation">.</span>radius <span class="token operator">=</span> radius
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="16__517"></a>1.6 不定参数</h4> 
<p>Go函数支持不定数目的形式参数，不定参数声明使用<code>param ...type</code>的语法格式。</p> 
<p>函数的不定参数有如下几个特点：</p> 
<p>(1)、所有的不定参数类型必须是相同的。</p> 
<p>(2)、不定参数必须是函数的最后一个参数。</p> 
<p>(3)、不定参数名在函数体内相当于切片，对切片的操作同样适合对不定参数的操作。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">sum</span><span class="token punctuation">(</span>arr <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>sum <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 此时arr就相当于切片,可以使用range访问</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> arr <span class="token punctuation">{<!-- --></span>
		sum <span class="token operator">+=</span> v
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	result <span class="token operator">:=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
	<span class="token comment">// 24</span>
	fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>(4)、切片可以作为参数传递给不定参数，切片名后要加上<code>...</code>。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">sum</span><span class="token punctuation">(</span>arr <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>sum <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> arr <span class="token punctuation">{<!-- --></span>
		sum <span class="token operator">+=</span> v
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 数纽不可以作为实参传递给不定参数的函数</span>
	slice <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	result <span class="token operator">:=</span> <span class="token function">sum</span><span class="token punctuation">(</span>slice<span class="token operator">...</span><span class="token punctuation">)</span>
	<span class="token comment">// 15</span>
	fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>(5)、形参为不定参数的函数和形参为切片的函数类型不相同。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">suma</span><span class="token punctuation">(</span>arr <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>sum <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> arr <span class="token punctuation">{<!-- --></span>
		sum <span class="token operator">+=</span> v
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">sumb</span><span class="token punctuation">(</span>arr <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>sum <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> arr <span class="token punctuation">{<!-- --></span>
		sum <span class="token operator">+=</span> v
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// func(...int) int</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> suma<span class="token punctuation">)</span>
	<span class="token comment">// func([]int) int</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> sumb<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="17__601"></a>1.7 匿名函数</h4> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// 匿名函数被直接赋值函数变量</span>
<span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">doinput</span><span class="token punctuation">(</span>f <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//匿名函数作为返回值</span>
<span class="token keyword">func</span> <span class="token function">wrap</span><span class="token punctuation">(</span>op <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">switch</span> op <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">case</span> <span class="token string">"add"</span><span class="token punctuation">:</span>
		<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> a <span class="token operator">+</span> b
		<span class="token punctuation">}</span>
	<span class="token keyword">case</span> <span class="token string">"sub"</span><span class="token punctuation">:</span>
		<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> a <span class="token operator">+</span> b
		<span class="token punctuation">}</span>
	<span class="token keyword">default</span><span class="token punctuation">:</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 匿名函数直接被调用</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{<!-- --></span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

	<span class="token function">doinput</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> x <span class="token operator">+</span> y
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

	opFunc <span class="token operator">:=</span> <span class="token function">wrap</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">)</span>
	re <span class="token operator">:=</span> <span class="token function">opFunc</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
	<span class="token comment">// 5</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> re<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="18__654"></a>1.8 闭包</h4> 
<p>闭包是由函数及其相关引用环境组合而成的实体，一般通过在匿名函数中引用外部函数的局部变量或包全局变量构</p> 
<p>成。闭包=函数+引用环境。</p> 
<p>闭包对闭包外的环境引入是直接引用，编译器检测到闭包，会将闭包引用的外部变量分配到堆上。</p> 
<p>如果函数返回的闭包引用了该函数的局部变量(参数或函数内部变量)：</p> 
<p>(1)、多次调用该函数，返回的多个闭包所引用的外部变量是多个副本，原因是每次调用函数都会为局部变量分配</p> 
<p>内存。</p> 
<p>(2)、用一个闭包函数多次，如果该闭包修改了其引用的外部变量，则每一次调用该闭包对该外部变量都有影响，</p> 
<p>因为闭包函数共享外部引用。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">func</span> <span class="token function">fa</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span> a<span class="token punctuation">)</span>
		a <span class="token operator">=</span> a <span class="token operator">+</span> i
		<span class="token keyword">return</span> a
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// f引用的外部的闭包环境包括本次函数调用的形参a的值1</span>
	f <span class="token operator">:=</span> <span class="token function">fa</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token comment">// f引用的外部的闭包环境包括本次函数调用的形参a的值1</span>
	g <span class="token operator">:=</span> <span class="token function">fa</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token comment">//  此时f,g引用的闭包环境中的a的值并不是同一个，而是两次函数调用产生的副本</span>
	<span class="token comment">// 0xc000047f60 1</span>
	<span class="token comment">// 2</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 0xc000047f60 2</span>
	<span class="token comment">// 3</span>
	<span class="token comment">// 多次调用f引用的是同一个副本a</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// g中a的值仍然是1</span>
	<span class="token comment">// 0xc000047f58 1</span>
	<span class="token comment">// 2</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 0xc000047f58 2</span>
	<span class="token comment">// 3</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">var</span> <span class="token punctuation">(</span>
	a <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">fa</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span> a<span class="token punctuation">)</span>
		a <span class="token operator">=</span> a <span class="token operator">+</span> i
		<span class="token keyword">return</span> a
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// f引用的外部的闭包环境包括全局变量a</span>
	f <span class="token operator">:=</span> <span class="token function">fa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// f引用的外部的闭包环境包括全局变量a</span>
	g <span class="token operator">:=</span> <span class="token function">fa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// 此时f,g引用的闭包环境中的a的值是同一个</span>
	<span class="token comment">// 0x41cda0 0</span>
	<span class="token comment">// 1</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 0x41cda0 1</span>
	<span class="token comment">// 2</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 0x41cda0 2</span>
	<span class="token comment">// 3</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 0x41cda0 3</span>
	<span class="token comment">// 4</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">func</span> <span class="token function">fa</span><span class="token punctuation">(</span>base <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>base<span class="token punctuation">,</span> base<span class="token punctuation">)</span>
	add <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
		base <span class="token operator">+=</span> i
		<span class="token function">println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>base<span class="token punctuation">,</span> base<span class="token punctuation">)</span>
		<span class="token keyword">return</span> base
	<span class="token punctuation">}</span>
	sub <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
		base <span class="token operator">-=</span> i
		<span class="token function">println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>base<span class="token punctuation">,</span> base<span class="token punctuation">)</span>
		<span class="token keyword">return</span> base
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> add<span class="token punctuation">,</span> sub
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">//f,g 闭包引用的base是同一个，是fa函数调用是的形参</span>
	<span class="token comment">// 0xc000047f18 0</span>
	f<span class="token punctuation">,</span> g <span class="token operator">:=</span> <span class="token function">fa</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token comment">// 0xc000047f10 0</span>
	<span class="token comment">//s,k 闭包引用的base是同一个，是fa函数调用的的形参</span>
	s<span class="token punctuation">,</span> k <span class="token operator">:=</span> <span class="token function">fa</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token comment">//f,g 和 s,k引用不同的闭包变量，这个是由于fa每次调用都要重新分配形参</span>
	<span class="token comment">// 0xc000047f18 1</span>
	<span class="token comment">// 0xc000047f18 -1</span>
	<span class="token comment">// 1 -1</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 0xc000047f10 1</span>
	<span class="token comment">// 0xc000047f10 -1</span>
	<span class="token comment">// 1 -1</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">s</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">k</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>闭包的价值：闭包最初的目的是减少全局变量，在函数调用的过程中隐式地传递共享变量，有其有用的一面；但是</p> 
<p>这种隐秘的共享变量的方式带来的坏处是不够直接，不够清晰，除非是非常有价值的地方，一般不建议使用闭包。</p> 
<p>对象是附有行为的数据，而闭包是附有数据的行为，类在定义时已经显式地集中定义了行为，但是闭包中的数据没</p> 
<p>有显式地集中声明的地方，这种数据和行为耦合的模型不是一种推荐的编程模型，闭包仅仅是锦上添花的东西，不</p> 
<p>是不可缺少的。</p> 
<h4><a id="19__789"></a>1.9 方法调用</h4> 
<p>本节主要讨论类型方法的调用方式、方法集、方法变量和方法表达式。</p> 
<h5><a id="191__793"></a>1.9.1 一般调用</h5> 
<p>类型方法的一般调用方式：</p> 
<pre><code class="prism language-go">TypeInstanceName<span class="token punctuation">.</span><span class="token function">MethodName</span><span class="token punctuation">(</span>ParamList<span class="token punctuation">)</span>
</code></pre> 
<ul><li><code>TypeInstanceName</code>：类型实例名或指向实例的指针变量名；</li><li><code>MethodName</code>：类型方法名；</li><li><code>ParamList</code>：方法参数；</li></ul> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> T <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span>
	a <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>t T<span class="token punctuation">)</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> t<span class="token punctuation">.</span>a
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>t <span class="token operator">*</span>T<span class="token punctuation">)</span> <span class="token function">Set</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	t<span class="token punctuation">.</span>a <span class="token operator">=</span> i
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// var t = &amp;T{}</span>
	<span class="token keyword">var</span> t <span class="token operator">=</span> T<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token comment">// 普通方法调用</span>
	t<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token comment">// 2</span>
	<span class="token comment">// 普通方法调用</span>
	fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="192__833"></a>1.9.2 方法值</h5> 
<p>变量 x 的静态类型是 T，M 是类型 T 的一个方法，x.T 被称为方法值(method value)。x.T 是一个函数类型变</p> 
<p>量，可以赋值给其他变量，并像普通的函数名一样使用。</p> 
<pre><code class="prism language-go">f <span class="token operator">:=</span> x<span class="token punctuation">.</span>M
<span class="token function">f</span><span class="token punctuation">(</span>args<span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre> 
<p>等价于</p> 
<pre><code class="prism language-go">x<span class="token punctuation">.</span><span class="token function">M</span><span class="token punctuation">(</span>args <span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre> 
<p>方法值(method value)其实是一个带闭包的函数变量，其底层实现原理和带有闭包的匿名函数类似，接收值被隐</p> 
<p>式地绑定到方法值(method value)的闭包环境中，后续调用不需要再显式地传递接收者。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> T <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span>
	a <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>t T<span class="token punctuation">)</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> t<span class="token punctuation">.</span>a
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>t <span class="token operator">*</span>T<span class="token punctuation">)</span> <span class="token function">Set</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	t<span class="token punctuation">.</span>a <span class="token operator">=</span> i
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>t <span class="token operator">*</span>T<span class="token punctuation">)</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%p,%v,%d\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> t<span class="token punctuation">,</span> t<span class="token punctuation">.</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// var t = &amp;T{}</span>
	<span class="token keyword">var</span> t <span class="token operator">=</span> T<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

	<span class="token comment">// 方法值调用</span>
	f <span class="token operator">:=</span> t<span class="token punctuation">.</span>Set

	<span class="token comment">// 方法值调用</span>
	<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
	t<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 方法值调用</span>
	<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
	t<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-shell"><span class="token comment"># 程序输出</span>
0xc000016098,<span class="token operator">&amp;</span><span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">}</span>,2
0xc000016098,<span class="token operator">&amp;</span><span class="token punctuation">{<!-- --></span><span class="token number">3</span><span class="token punctuation">}</span>,3
</code></pre> 
<h5><a id="193__898"></a>1.9.3 方法表达式</h5> 
<p>方法表达式相当于提供一种语法将类型方法调用显式地转换为函数调用，接收者(receiver)必须显式地传递进去。</p> 
<p>下面定义一个类型 T ，增加两个方法，方法Get的接收者为T，方法Set的接收者类型为 *T。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> T <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span>
	a <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>t T<span class="token punctuation">)</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> t<span class="token punctuation">.</span>a
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>t <span class="token operator">*</span>T<span class="token punctuation">)</span> <span class="token function">Set</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	t<span class="token punctuation">.</span>a <span class="token operator">=</span> i
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>t <span class="token operator">*</span>T<span class="token punctuation">)</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%p,%v,%d\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> t<span class="token punctuation">,</span> t<span class="token punctuation">.</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

	<span class="token comment">// 如下方法表达式调用都是等价的</span>
	t <span class="token operator">:=</span> T<span class="token punctuation">{<!-- --></span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span>

	<span class="token comment">// 普通方法调用</span>
	result <span class="token operator">:=</span> t<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// 1</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>

	<span class="token comment">// 方法表达式调用</span>
	result1 <span class="token operator">:=</span> T<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
	<span class="token comment">// result1 := (T).Get(t)</span>
	<span class="token comment">// 1</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span>

	<span class="token comment">// 方法表达式调用</span>
	f1 <span class="token operator">:=</span> t<span class="token punctuation">.</span>Get
	<span class="token comment">// f1 := (t).Get</span>
	result2 <span class="token operator">:=</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// 1</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span>

	<span class="token comment">// 方法表达式调用</span>
	f2 <span class="token operator">:=</span> T<span class="token punctuation">.</span>Get
	<span class="token comment">// f2 := (T).Get</span>
	result3 <span class="token operator">:=</span> <span class="token function">f2</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
	<span class="token comment">// 1</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>result3<span class="token punctuation">)</span>

	<span class="token comment">// 方法表达式调用</span>
	f3 <span class="token operator">:=</span> <span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token punctuation">.</span>Get
	result4 <span class="token operator">:=</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>t<span class="token punctuation">)</span>
	<span class="token comment">// 1</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>result4<span class="token punctuation">)</span>

	<span class="token comment">// 方法表达式调用</span>
	t<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
	<span class="token comment">// 10</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// 方法表达式调用</span>
	f4 <span class="token operator">:=</span> t<span class="token punctuation">.</span>Set
	<span class="token function">f4</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
	<span class="token comment">// 20</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// 方法表达式调用</span>
	f5 <span class="token operator">:=</span> <span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token punctuation">.</span>Set
	<span class="token function">f5</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>t<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
	<span class="token comment">// 30</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// 0xc0000120a8,&amp;{30},30</span>
	t<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-shell"><span class="token comment"># 程序输出</span>
<span class="token number">1</span>
<span class="token number">1</span>
<span class="token number">1</span>
<span class="token number">1</span>
<span class="token number">1</span>
<span class="token number">10</span>
<span class="token number">20</span>
<span class="token number">30</span>
0xc0000120a8,<span class="token operator">&amp;</span><span class="token punctuation">{<!-- --></span><span class="token number">30</span><span class="token punctuation">}</span>,30
</code></pre> 
<p>表达式 T.Get 和 (*T).Set 被称为方法表达式(method expression)，方法表达式可以看作函数名，只不过这个函</p> 
<p>数的首个参数是接收者的实例或指针。T.Get 的函数签名是 func(t T) int，(*T).Set 的函数签名是</p> 
<p><code>func(t *T,i int)</code>。注意：这里的 T.Get 不能写成 <code>(*T).Get</code>，<code>(*T).Set</code> 也不能写成 T.Set，在方法表达式中编</p> 
<p>译器不会做自动转换。</p> 
<h5><a id="194__1004"></a>1.9.4 方法集</h5> 
<p>命名类型方法接收者有两种类型，一个是值类型，另一个是指针类型，这个和函数是一样的，前者的形参是值类</p> 
<p>型，后者的形参是指针类型。无论接收者是什么类型，方法和函数的实参传递都是值拷贝。如果接收者是值类型，</p> 
<p>则传递的是值的副本；如果接收者是指针类型，则传递的是指针的副本。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Int <span class="token builtin">int</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>a Int<span class="token punctuation">)</span> <span class="token function">Max</span><span class="token punctuation">(</span>b Int<span class="token punctuation">)</span> Int <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> a <span class="token operator">&gt;=</span> b <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> a
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> b
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>i <span class="token operator">*</span>Int<span class="token punctuation">)</span> <span class="token function">Set</span><span class="token punctuation">(</span>a Int<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token operator">*</span>i <span class="token operator">=</span> a
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>i Int<span class="token punctuation">)</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"value=%d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">var</span> a Int <span class="token operator">=</span> <span class="token number">10</span>
	<span class="token keyword">var</span> b Int <span class="token operator">=</span> <span class="token number">50</span>
	c <span class="token operator">:=</span> a<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
	<span class="token comment">// value=50</span>
	c<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// value=50</span>
	<span class="token comment">// 内部被编译器转换为c.Print()</span>
	<span class="token punctuation">(</span><span class="token operator">&amp;</span>c<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// 内部被编译器转化为(&amp;a).Set(20)</span>
	a<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
	<span class="token comment">// value=20</span>
	a<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
	<span class="token comment">// value=30</span>
	a<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-shell"><span class="token comment"># 程序输出</span>
<span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token number">50</span>
<span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token number">50</span>
<span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token number">20</span>
<span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token number">30</span>
</code></pre> 
<p>上面示例定义了一个新类型 Int，新类型的底层类型是 int，Int 虽然不能继承 int 的方法，但底层类型支持的操作</p> 
<p>(算术运算和赋值运算)可以被上层类型继承，这是Go类型系统的一个特点。</p> 
<p>接收者是 Int 类型的方法集合(method set)：</p> 
<pre><code class="prism language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>i Int<span class="token punctuation">)</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>a Int<span class="token punctuation">)</span> <span class="token function">Max</span><span class="token punctuation">(</span>b Int<span class="token punctuation">)</span> Int
</code></pre> 
<p>接收者是 *Int 类型的方法集合(method set)：</p> 
<pre><code class="prism language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>i <span class="token operator">*</span>Int<span class="token punctuation">)</span> <span class="token function">Set</span><span class="token punctuation">(</span>a Int<span class="token punctuation">)</span>
</code></pre> 
<p>为了简化描述，将接收者(receiver)为值类型 T 的方法的集合记录为 S，将接收者(receiver)为指针类型 *T 的方法</p> 
<p>的集合统称为 *S。类型的方法集总结如下：</p> 
<p>(1)、T 类型的方法集是 S。</p> 
<p>(2)、*T 类型的方法集是 S 和 *S。</p> 
<p>从上面的示例可以看出，在直接使用类型实例调用类型的方法时，无论值类型变量还是指针类型变量，都可以调用</p> 
<p>类型的所有方法，原因是编译器在编译期间能够识别出这种调用关系，做了自动的转换。比如 a.Set (使用值类型</p> 
<p>实例调用指针接收者方法，编译器会自动将其转换为 (&amp;a).Set() ，(&amp;a).Print() 使用指针类型实例调用值类型接收者</p> 
<p>方法，编译器自动将其转化为 a.Print()。</p> 
<p>前面讲到的另外两种调用方法：方法的值和方法表达式，编译器对这两种方法的调用处理也不相同，具体见接下来</p> 
<p>的介绍。</p> 
<h5><a id="195__1099"></a>1.9.5 值调用和表达式调用的方法集</h5> 
<p>前面介绍方法集时我们知道，具体类型实例变量直接调用其方法时，编译器会所调用方法进行自动转换，即使接收</p> 
<p>者是指针的方法，仍然可以使用值类型变量进行调用。下面讨论在以下两种情况下编译器是否会进行方法的自动转</p> 
<p>换。</p> 
<p>(1)、通过类型字面量显式地进行值调用和表达式调用，可以看到在这种情况下编译器不会做自动转换，会进行严</p> 
<p>格的方法集检查。</p> 
<pre><code class="prism language-go"><span class="token keyword">type</span> Data <span class="token keyword">struct</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>Data<span class="token punctuation">)</span> <span class="token function">TestValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>Data<span class="token punctuation">)</span> <span class="token function">TestPointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token comment">// 这种字面量显式调用,无论值调用,还是表达式调用</span>
<span class="token comment">// 编译器都不会进行方法集的自动转换,编译器会严格校验方法集</span>

<span class="token comment">// *Data方法集是TestPointer和TestValue</span>
<span class="token comment">// Data方法集只有TestValue</span>

<span class="token punctuation">(</span><span class="token operator">*</span>Data<span class="token punctuation">)</span>  <span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">struct</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">TestPointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 显式的调用</span>
<span class="token punctuation">(</span><span class="token operator">*</span>Data<span class="token punctuation">)</span>  <span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">struct</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">TestValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// 显式的调用</span>

<span class="token punctuation">(</span>Data<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">struct</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">TestValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// method value </span>
Data<span class="token punctuation">.</span><span class="token function">TestValue</span><span class="token punctuation">(</span><span class="token keyword">struct</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span>         <span class="token comment">// method expression</span>

<span class="token comment">// 如下调用因为方法集不匹配而失败</span>
<span class="token comment">// type Data has no method TestPoiter</span>
Data<span class="token punctuation">.</span><span class="token function">TestPoiter</span><span class="token punctuation">(</span><span class="token keyword">struct</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// cannot call pointer method on Data(struct{}{})</span>
<span class="token punctuation">(</span>Data<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">struct</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">TestPointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>(2)、通过类型变量进行值调用和表达式调用，在这种情况下，使用值调用(method value)方式调用时编译器会进</p> 
<p>行自动转换，使用表达式调用(method expression)方式调用时编译器不会进行转换，会进行严格的方法集检查。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">type</span> Data <span class="token keyword">struct</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>Data<span class="token punctuation">)</span> <span class="token function">TestValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>Data<span class="token punctuation">)</span> <span class="token function">TestPointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 声明一个类型变量a</span>
	<span class="token keyword">var</span> a Data <span class="token operator">=</span> <span class="token keyword">struct</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token comment">// 表达式调用编译器不会进行自动转换</span>
	Data<span class="token punctuation">.</span><span class="token function">TestValue</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
	<span class="token comment">// Data.TestValue(&amp;a)</span>
	<span class="token punctuation">(</span><span class="token operator">*</span>Data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">TestPointer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span>
	<span class="token comment">// type Data has no method TestPointer</span>
	<span class="token comment">// Data.TestPointer(&amp;a)</span>
	<span class="token comment">// 值调用编译器会进行自动转换</span>
	f <span class="token operator">:=</span> a<span class="token punctuation">.</span>TestValue
	<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// 编译器帮助转换a.TestValue</span>
	y <span class="token operator">:=</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span>TestValue
	<span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// 会转换为(&amp;a).TestPointer</span>
	g <span class="token operator">:=</span> a<span class="token punctuation">.</span>TestPointer
	<span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	x <span class="token operator">:=</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span>TestPointer
	<span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">type</span> Data <span class="token keyword">struct</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>Data<span class="token punctuation">)</span> <span class="token function">TestValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>Data<span class="token punctuation">)</span> <span class="token function">TestPointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// p的类型是*Data,但是p的值是nil,p指向的是一块未初始化的类型实例</span>
	<span class="token keyword">var</span> p <span class="token operator">*</span>Data <span class="token operator">=</span> <span class="token boolean">nil</span>
	<span class="token comment">// 指针方法集的调用是可以使用nil传递进去的,只要方法内部不去访问nil指向的实例,不会引发panic</span>
	<span class="token comment">// 直接调用</span>
	<span class="token comment">// method value</span>
	m <span class="token operator">:=</span> p<span class="token punctuation">.</span>TestPointer
	<span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// method value等价p.TestPointer()</span>
	m <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>Data<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">.</span>TestPointer
	<span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// p为nil,无法通过*p访问p指向的实例,所以此调用会导致panic</span>
	<span class="token comment">// (*p).TestValue()</span>
	<span class="token comment">// cannot convert nil to type Data</span>
	<span class="token comment">// (Data)(nil).TestValue()</span>
	<span class="token comment">// invalid memory address or nil pointer dereference</span>
	<span class="token comment">// p.TestValue()</span>
	<span class="token comment">// cannot use nil as type Data in function argument</span>
	<span class="token comment">// Data.TestValue(nil)</span>
	<span class="token comment">// method expression</span>
	<span class="token punctuation">(</span><span class="token operator">*</span>Data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">TestPointer</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span>
	<span class="token punctuation">(</span><span class="token operator">*</span>Data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">TestPointer</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
	<span class="token comment">// 等价上面调用</span>
	s <span class="token operator">:=</span> <span class="token punctuation">(</span><span class="token operator">*</span>Data<span class="token punctuation">)</span><span class="token punctuation">.</span>TestPointer
	<span class="token function">s</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span>
	<span class="token function">s</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="110__1207"></a>1.10 函数类型</h4> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// 有名函数定义,函数名是add</span>
<span class="token comment">// add类型是函数字面量类型 func (int,int) int</span>
<span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token comment">// 函数声明语句,用于go代码调用汇编代码</span>
<span class="token comment">// func add(int,int) int</span>

<span class="token comment">// add函数的签名,实际上就是add的字面量类型</span>
<span class="token comment">// func (int,int) int</span>

<span class="token comment">// 新定义函数类型ADD</span>
<span class="token comment">// ADD底层类型是函数字面量类型func (int,int) int</span>
<span class="token keyword">type</span> ADD <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span>

<span class="token comment">// add和ADD的底层类型相同,并且add是字面量类型</span>
<span class="token comment">// 所以add可直接赋值给ADD类型的变量f</span>
<span class="token keyword">var</span> g ADD <span class="token operator">=</span> add

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 匿名函数</span>
	<span class="token comment">// 其不能独立存在,常常作为函数参数、返回值或者赋值给某个变量</span>
	<span class="token comment">// 匿名函数可以看作是函数字面量类型直接显式初始化</span>
	<span class="token comment">// 匿名函数的类型也是函数字面量类型func (int,int) int</span>
	f <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> a <span class="token operator">+</span> b
	<span class="token punctuation">}</span>
	<span class="token function">g</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token comment">// f和add的函数签名相同</span>
	<span class="token comment">// func(int, int) int</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span>
	<span class="token comment">// func(int, int) int</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> add<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="111__1252"></a>1.11 递归函数</h4> 
<p>递归，就是在运行的过程中调用自己。</p> 
<pre><code class="prism language-go"><span class="token comment">// 语法格式如下</span>
<span class="token keyword">func</span> <span class="token function">recursion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   <span class="token comment">/* 函数调用自身 */</span>
   <span class="token function">recursion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   <span class="token function">recursion</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>Go 语言支持递归。但我们在使用递归时，开发者需要设置退出条件，否则递归将陷入无限循环中。</p> 
<p>递归函数对于解决数学上的问题是非常有用的，就像计算阶乘，生成斐波那契数列等。</p> 
<pre><code class="prism language-go"><span class="token comment">// 递归函数实例阶乘</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">Factorial</span><span class="token punctuation">(</span>n <span class="token builtin">uint64</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>result <span class="token builtin">uint64</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> n <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span>
		result <span class="token operator">=</span> n <span class="token operator">*</span> <span class="token function">Factorial</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> result
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">var</span> i <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">15</span>
	<span class="token comment">// 15 的阶乘是 1307674368000</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d 的阶乘是 %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">Factorial</span><span class="token punctuation">(</span><span class="token function">uint64</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-go"><span class="token comment">// 递归函数实现斐波那契数列</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> n <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> n
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">var</span> i <span class="token builtin">int</span>
	<span class="token comment">// 0    1    1    2    3    5    8    13    21    34</span>
	<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d\t"</span><span class="token punctuation">,</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-go"><span class="token comment">// 更好的一种fibonacci实现,用到多返回值特性,降低复杂度</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">fibonacci2</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> n <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">,</span> n
	<span class="token punctuation">}</span>
	a<span class="token punctuation">,</span> b <span class="token operator">:=</span> <span class="token function">fibonacci2</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> b<span class="token punctuation">,</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token boolean">_</span><span class="token punctuation">,</span> b <span class="token operator">:=</span> <span class="token function">fibonacci2</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
	<span class="token keyword">return</span> b
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">var</span> i <span class="token builtin">int</span>
	<span class="token comment">// 0    1    1    2    3    5    8    13    21    34</span>
	<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d\t"</span><span class="token punctuation">,</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>求平方根原理：计算机通常使用循环来计算 x 的平方根。从某个猜测的值 z 开始，我们可以根据 z² 与 x 的近似度</p> 
<p>来调整 z，产生一个更好的猜测：</p> 
<pre><code class="prism language-shell">z -<span class="token operator">=</span> <span class="token punctuation">(</span>z*z - x<span class="token punctuation">)</span> / <span class="token punctuation">(</span><span class="token number">2</span>*z<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>x <span class="token builtin">float64</span><span class="token punctuation">,</span> i <span class="token builtin">float64</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">float64</span><span class="token punctuation">,</span> <span class="token builtin">float64</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	remain <span class="token operator">:=</span> <span class="token punctuation">(</span>i<span class="token operator">*</span>i <span class="token operator">-</span> x<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> i<span class="token punctuation">)</span>
	i <span class="token operator">=</span> i <span class="token operator">-</span> remain
	<span class="token keyword">if</span> remain <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> i<span class="token punctuation">,</span> remain
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">get_sqrt</span><span class="token punctuation">(</span>x <span class="token builtin">float64</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">{<!-- --></span>
	i<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> x<span class="token punctuation">)</span>
	<span class="token keyword">return</span> i
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 1.4142135623730951</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">get_sqrt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 1.7320508075688774</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">get_sqrt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-go"><span class="token comment">// 求平方根算法复杂度改成O(1)</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>
<span class="token keyword">import</span> <span class="token string">"unsafe"</span>

<span class="token keyword">func</span> <span class="token function">get_sqrt</span><span class="token punctuation">(</span>x <span class="token builtin">float32</span><span class="token punctuation">)</span> <span class="token builtin">float32</span> <span class="token punctuation">{<!-- --></span>
	xhalf <span class="token operator">:=</span> <span class="token number">0.5</span> <span class="token operator">*</span> x
	<span class="token keyword">var</span> i <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">int32</span><span class="token punctuation">)</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Pointer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
	i <span class="token operator">=</span> <span class="token number">0x5f375a86</span> <span class="token operator">-</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
	x <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">float32</span><span class="token punctuation">)</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Pointer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
	x <span class="token operator">=</span> x <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.5</span> <span class="token operator">-</span> xhalf<span class="token operator">*</span>x<span class="token operator">*</span>x<span class="token punctuation">)</span>
	x <span class="token operator">=</span> x <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.5</span> <span class="token operator">-</span> xhalf<span class="token operator">*</span>x<span class="token operator">*</span>x<span class="token punctuation">)</span>
	x <span class="token operator">=</span> x <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.5</span> <span class="token operator">-</span> xhalf<span class="token operator">*</span>x<span class="token operator">*</span>x<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> x
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 2.0000002</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">get_sqrt</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/54cde976c48ebd3a426a4f0387bf5bf5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android系统安全 — 6.3 TLS双向认证原理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0f30bd84f429ae91ac9ef8ac9e060830/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AntV G6新版源码浅析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>