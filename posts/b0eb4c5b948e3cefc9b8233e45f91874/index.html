<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【MyBatis Plus】使用 MyBatis Plus 完成分页功能，以及通用分页实体的实现 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【MyBatis Plus】使用 MyBatis Plus 完成分页功能，以及通用分页实体的实现" />
<meta property="og:description" content="文章目录 一、MyBatis Plus 分页插件1.1 了解 MyBatis Plus 的插件功能1.2 配置分页插件1.3 测试分页功能 二、实现通用分页实体2.1 分页查询需求2.2 分页实体类2.3 分页查询接口2.4 通用实体的转换2.4.1 PageQuery 转换为 MP Page2.4.2 分页结果 PO 转换 VO 一、MyBatis Plus 分页插件 1.1 了解 MyBatis Plus 的插件功能 当使用 MyBatis Plus 的插件功能时，可以通过配置不同的插件来满足项目的需求。这些插件可以增强 MyBatis Plus 的功能，提高数据库操作的效率和安全性。以下是对主要插件的介绍：
插件功能PaginationInnerInterceptor自动分页TenantLineInnerInterceptor多租户DynamicTableNameInnerInterceptor动态表名OptimisticLockerInnerInterceptor乐观锁IllegalSQLInnerInterceptorSQL 性能规范BlockAttackInnerInterceptor防止全表更新与删除 PaginationInnerInterceptor（自动分页）：PaginationInnerInterceptor 用于实现自动分页功能。通过配置这个插件，可以轻松地在查询操作中启用分页，而无需手动编写分页查询的 SQL。插件会自动计算起始行和结束行，以获取指定范围的数据。
TenantLineInnerInterceptor（多租户）：TenantLineInnerInterceptor 插件用于支持多租户架构。在多租户环境中，不同租户共享同一数据库，但数据需要分隔。这个插件可以自动在 SQL 查询中添加租户条件，以确保每个租户只能访问自己的数据。
DynamicTableNameInnerInterceptor（动态表名）：DynamicTableNameInnerInterceptor 允许在运行时动态更改 SQL 查询中的表名。这对于根据不同的条件选择不同的表格非常有用，例如，可以根据用户身份或其他因素选择不同的表格。
OptimisticLockerInnerInterceptor（乐观锁）：OptimisticLockerInnerInterceptor 用于支持乐观锁机制。乐观锁是一种并发控制方式，可以防止多个用户同时修改同一记录。这个插件会自动为实体添加乐观锁的版本字段，并在更新操作中检查版本号，以确保数据的一致性。
IllegalSQLInnerInterceptor（SQL 性能规范）：IllegalSQLInnerInterceptor 用于检查 SQL 查询语句的性能规范。它可以帮助开发者优化 SQL 查询，减少潜在的性能问题。通过检查 SQL 的性能规范，可以提高查询的效率。
BlockAttackInnerInterceptor（防止全表更新与删除）：BlockAttackInnerInterceptor 用于防止执行全表更新和删除操作。这有助于减少潜在的危险操作，以保护数据库的安全性。插件可以拦截包含特定条件的 SQL 查询，阻止执行这些操作。
通过合理配置这些插件，可以提高 MyBatis Plus 的功能和性能，以满足不同项目的需求，并且这些插件使数据库操作更加高效和安全。下面将演示如何利用 PaginationInnerInterceptor 自动分页插件来实现分页功能。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/b0eb4c5b948e3cefc9b8233e45f91874/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-02T11:25:46+08:00" />
<meta property="article:modified_time" content="2023-11-02T11:25:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【MyBatis Plus】使用 MyBatis Plus 完成分页功能，以及通用分页实体的实现</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#MyBatis_Plus__5" rel="nofollow">一、MyBatis Plus 分页插件</a></li><li><ul><li><a href="#11__MyBatis_Plus__6" rel="nofollow">1.1 了解 MyBatis Plus 的插件功能</a></li><li><a href="#12__33" rel="nofollow">1.2 配置分页插件</a></li><li><a href="#13___64" rel="nofollow">1.3 测试分页功能</a></li></ul> 
  </li><li><a href="#_118" rel="nofollow">二、实现通用分页实体</a></li><li><ul><li><a href="#21__120" rel="nofollow">2.1 分页查询需求</a></li><li><a href="#22__167" rel="nofollow">2.2 分页实体类</a></li><li><a href="#23__234" rel="nofollow">2.3 分页查询接口</a></li><li><a href="#24__307" rel="nofollow">2.4 通用实体的转换</a></li><li><ul><li><a href="#241_PageQuery__MP_Page_308" rel="nofollow">2.4.1 PageQuery 转换为 MP Page</a></li><li><a href="#242__PO__VO_376" rel="nofollow">2.4.2 分页结果 PO 转换 VO</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="MyBatis_Plus__5"></a>一、MyBatis Plus 分页插件</h2> 
<h3><a id="11__MyBatis_Plus__6"></a>1.1 了解 MyBatis Plus 的插件功能</h3> 
<p>当使用 MyBatis Plus 的插件功能时，可以通过配置不同的插件来满足项目的需求。这些插件可以增强 MyBatis Plus 的功能，提高数据库操作的效率和安全性。以下是对主要插件的介绍：</p> 
<table><thead><tr><th align="left">插件</th><th align="left">功能</th></tr></thead><tbody><tr><td align="left"><code>PaginationInnerInterceptor</code></td><td align="left">自动分页</td></tr><tr><td align="left"><code>TenantLineInnerInterceptor</code></td><td align="left">多租户</td></tr><tr><td align="left"><code>DynamicTableNameInnerInterceptor</code></td><td align="left">动态表名</td></tr><tr><td align="left"><code>OptimisticLockerInnerInterceptor</code></td><td align="left">乐观锁</td></tr><tr><td align="left"><code>IllegalSQLInnerInterceptor</code></td><td align="left">SQL 性能规范</td></tr><tr><td align="left"><code>BlockAttackInnerInterceptor</code></td><td align="left">防止全表更新与删除</td></tr></tbody></table> 
<ol><li> <p><strong><code>PaginationInnerInterceptor</code>（自动分页）</strong>：<code>PaginationInnerInterceptor</code> 用于实现自动分页功能。通过配置这个插件，可以轻松地在查询操作中启用分页，而无需手动编写分页查询的 SQL。插件会自动计算起始行和结束行，以获取指定范围的数据。</p> </li><li> <p><strong><code>TenantLineInnerInterceptor</code>（多租户）</strong>：<code>TenantLineInnerInterceptor</code> 插件用于支持多租户架构。在多租户环境中，不同租户共享同一数据库，但数据需要分隔。这个插件可以自动在 SQL 查询中添加租户条件，以确保每个租户只能访问自己的数据。</p> </li><li> <p><strong><code>DynamicTableNameInnerInterceptor</code>（动态表名）</strong>：<code>DynamicTableNameInnerInterceptor</code> 允许在运行时动态更改 SQL 查询中的表名。这对于根据不同的条件选择不同的表格非常有用，例如，可以根据用户身份或其他因素选择不同的表格。</p> </li><li> <p><strong><code>OptimisticLockerInnerInterceptor</code>（乐观锁）</strong>：<code>OptimisticLockerInnerInterceptor</code> 用于支持乐观锁机制。乐观锁是一种并发控制方式，可以防止多个用户同时修改同一记录。这个插件会自动为实体添加乐观锁的版本字段，并在更新操作中检查版本号，以确保数据的一致性。</p> </li><li> <p><strong><code>IllegalSQLInnerInterceptor</code>（SQL 性能规范）</strong>：<code>IllegalSQLInnerInterceptor</code> 用于检查 SQL 查询语句的性能规范。它可以帮助开发者优化 SQL 查询，减少潜在的性能问题。通过检查 SQL 的性能规范，可以提高查询的效率。</p> </li><li> <p><strong><code>BlockAttackInnerInterceptor</code>（防止全表更新与删除）</strong>：<code>BlockAttackInnerInterceptor</code> 用于防止执行全表更新和删除操作。这有助于减少潜在的危险操作，以保护数据库的安全性。插件可以拦截包含特定条件的 SQL 查询，阻止执行这些操作。</p> </li></ol> 
<p>通过合理配置这些插件，可以提高 MyBatis Plus 的功能和性能，以满足不同项目的需求，并且这些插件使数据库操作更加高效和安全。下面将演示如何利用 <code>PaginationInnerInterceptor</code> 自动分页插件来实现分页功能。</p> 
<h3><a id="12__33"></a>1.2 配置分页插件</h3> 
<p>在没有引入分页插件的情况下，Mybatis Plus 是不支持分页功能的，<code>IService</code> 和 <code>BaseMapper</code> 中的分页方法都无法正常生效。所以，我们必须配置分页插件，简单来说，就是创建一个配置类，然后注册一个 Bean 对象：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBatisConfig</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MybatisPlusInterceptor</span> <span class="token function">mybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        
        <span class="token comment">// 初始化 MybatisPlusInterceptor 核心插件</span>
        <span class="token class-name">MybatisPlusInterceptor</span> interceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 添加自动分页插件 PaginationInnerInterceptor</span>
        interceptor<span class="token punctuation">.</span><span class="token function">addInnerInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PaginationInnerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 返回</span>
        <span class="token keyword">return</span> interceptor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>对上面代码的说明：</strong></p> 
<ol><li> <p>创建一个 Java 配置类 <code>MyBatisConfig</code> 并使用 <code>@Configuration</code> 注解标记它，这将使它成为一个 Spring Boot 的配置类。</p> </li><li> <p>通过 @Bean 注解，创建了一个名为 <code>mybatisPlusInterceptor</code> 的 <code>Bean</code> 对象，这个 <code>Bean</code> 是 Mybatis Plus 核心插件 <code>MybatisPlusInterceptor</code> 的实例。</p> </li><li> <p>在 <code>mybatisPlusInterceptor</code> 的 Bean 中，初始化 <code>MybatisPlusInterceptor</code> 的核心插件，并将分页插件 <code>PaginationInnerInterceptor</code> 添加到其中。</p> </li><li> <p>通过 <code>interceptor.addInnerInterceptor(new PaginationInnerInterceptor())</code> 语句，将分页插件添加到核心拦截器中，从而启用了分页功能。</p> </li></ol> 
<p>通过这样的配置，MyBatis Plus 将能够正常支持分页功能，<code>IService</code> 和 <code>BaseMapper</code> 中的分页方法将生效。当执行带有分页参数的查询时，分页插件将自动计算起始行和结束行，并修改 SQL 查询语句，以获取指定范围的数据。</p> 
<h3><a id="13___64"></a>1.3 测试分页功能</h3> 
<p>下面编写一个分页查询的测试类，查询第一页的数据，每一页最多两条记录：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testPageQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. 准备分页查询条件</span>
    <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> page <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 1.1.设置分页参数</span>
    page<span class="token punctuation">.</span><span class="token function">setCurrent</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2. 分页查询，最终返回的结果保存在 page 对象中</span>
    page <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3. 总条数</span>
    <span class="token keyword">long</span> total <span class="token operator">=</span> page<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 4. 总页数</span>
    <span class="token keyword">long</span> pages <span class="token operator">=</span> page<span class="token punctuation">.</span><span class="token function">getPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"总条数："</span> <span class="token operator">+</span> total <span class="token operator">+</span> <span class="token string">" 总页数："</span> <span class="token operator">+</span> pages<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 5. 当前页数据</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> page<span class="token punctuation">.</span><span class="token function">getRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    users<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>对上面测试代码的解释：</p> 
<ol><li> <p>在 <code>testPageQuery</code> 方法中，首先准备了一个分页查询条件。这是通过创建一个 <code>Page&lt;User&gt;</code> 对象来实现的，其中 <code>User</code> 是要查询数据库表的实体类。</p> </li><li> <p>在分页查询条件中，设置了分页参数，包括当前页和每页记录数。在示例中，当前页为 0（第一页），每页最多显示 2 条记录。</p> </li><li> <p>接下来，使用 <code>userService.page(new Page&lt;&gt;(0, 2))</code> 执行分页查询。<code>page()</code> 方法是 MyBatis Plus 提供的分页查询方法。查询结果将存储在 <code>page</code> 对象中。</p> </li><li> <p>通过 <code>page.getTotal()</code> 获取总记录数，这是符合查询条件的所有记录数量。</p> </li><li> <p>通过 <code>page.getPages()</code> 获取总页数，这是根据分页参数计算得出的。</p> </li><li> <p>最后，通过 <code>page.getRecords()</code> 获取当前页的数据列表，并通过 <code>forEach</code> 方法遍历打印每条记录。</p> </li></ol> 
<p>这个测试代码用于验证分页功能是否正常工作，以及是否返回了正确的分页结果。</p> 
<p>最终运行结果：</p> 
<p><img src="https://images2.imgbox.com/76/46/i6HZENn0_o.png" alt=""><br> 另外，这里用到的分页参数<code>Page</code>，既可以支持分页参数，也可以支持排序参数。例如按照 <code>balance</code> 进行降序排序：</p> 
<pre><code class="prism language-java"><span class="token comment">// 1. 准备分页查询条件</span>
<span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> page <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1.1.设置分页参数</span>
page<span class="token punctuation">.</span><span class="token function">setCurrent</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1.2.设置排序规则</span>
page<span class="token punctuation">.</span><span class="token function">addOrder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderItem</span><span class="token punctuation">(</span><span class="token string">"balance"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>其中<code>OrderItem</code>类就是用于设置排序规则，第一个参数用于指定排序的字段，第二个参数则指定是否是升序排序，设置 <code>false</code> 则为降序。</p> 
<h2><a id="_118"></a>二、实现通用分页实体</h2> 
<h3><a id="21__120"></a>2.1 分页查询需求</h3> 
<p>现在要实现一个用户分页查询的接口，接口规范如下：</p> 
<ol><li> <p>请求方式：<code>GET</code></p> </li><li> <p>请求路径：<code>/users/page</code></p> </li><li> <p>请求参数：</p> <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"pageNo"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string-property property">"pageSize"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token string-property property">"sortBy"</span><span class="token operator">:</span> <span class="token string">"balance"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"isAsc"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"o"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"status"</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>响应数据格式：</p> <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"total"</span><span class="token operator">:</span> <span class="token number">100006</span><span class="token punctuation">,</span>
    <span class="token string-property property">"pages"</span><span class="token operator">:</span> <span class="token number">50003</span><span class="token punctuation">,</span>
    <span class="token string-property property">"list"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string-property property">"id"</span><span class="token operator">:</span> <span class="token number">1685100878975279298</span><span class="token punctuation">,</span>
            <span class="token string-property property">"username"</span><span class="token operator">:</span> <span class="token string">"user_9****"</span><span class="token punctuation">,</span>
            <span class="token string-property property">"info"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
                <span class="token string-property property">"age"</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
                <span class="token string-property property">"intro"</span><span class="token operator">:</span> <span class="token string">"英文老师"</span><span class="token punctuation">,</span>
                <span class="token string-property property">"gender"</span><span class="token operator">:</span> <span class="token string">"female"</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string-property property">"status"</span><span class="token operator">:</span> <span class="token string">"正常"</span><span class="token punctuation">,</span>
            <span class="token string-property property">"balance"</span><span class="token operator">:</span> <span class="token number">2000</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>特殊说明：</p> 
  <ul><li>如果排序字段为空，默认按照更新时间排序；</li><li>排序字段不为空，则按照排序字段排序。</li></ul> </li></ol> 
<p>要实现上面这个接口，首先需要定义 3 个实体类：</p> 
<ul><li><code>UserQuery</code>：分页查询条件的实体，包含分页、排序参数、过滤条件</li><li><code>PageDTO</code>：分页结果实体，包含总条数、总页数、当前页数据</li><li><code>UserVO</code>：用户页面视图实体</li></ul> 
<h3><a id="22__167"></a>2.2 分页实体类</h3> 
<ol><li> <p><code>UserQuery</code> 之前已经定义过了，并且其中已经包含了过滤条件，具体代码如下：</p> <pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"用户查询条件实体"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserQuery</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"用户名关键字"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"用户状态：1-正常，2-冻结"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> status<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"余额最小值"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> minBalance<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"余额最大值"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> maxBalance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>其中缺少的仅仅是分页条件，而分页条件不仅仅用户分页查询需要，以后其它业务也都有分页查询的需求。因此最好将分页查询条件单独定义为一个<code>PageQuery</code>实体。</p> <p><code>PageQuery</code>是前端提交的分页查询参数，一般包含以下四个属性：</p> 
  <ul><li><code>pageNo</code>：页码</li><li><code>pageSize</code>：页面大小</li><li><code>sortBy</code>：排序字段</li><li><code>isAsc</code>：是否升序</li></ul> <p>下面是 <code>PageQuery</code> 实体类的实现代码：</p> <pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"分页查询实体类"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageQuery</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"页码"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> pageNo<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"页面大小"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"排序字段"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> sortBy<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"是否升序"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Boolean</span> isAsc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>然后，让 <code>UserQuery</code> 继承这个实体：<br> <img src="https://images2.imgbox.com/f1/9e/PEAvXszh_o.png" alt="">这里使用了 <code>Lombok</code> 提供的注解 <code>@EqualsAndHashCode</code> 来重写 <code>equals</code> 和 <code>hashCode</code> 方法。</p> </li><li> <p>这里返回值的用户实体沿用之前实现的一个 <code>UserVO</code> 实体：<br> <img src="https://images2.imgbox.com/95/bf/MxaC5en0_o.png" alt=""></p> </li><li> <p>最后，我们需要实现<code>PageDTO</code>实体，用于返回分页查询的结果，由于后面可能会针对多张表进行分页查询，因此这里将其实现为泛型类，具体的实现代码如下：</p> <pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span><span class="token string">"分页结果实体"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"总条数"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> total<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"总页数"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> pages<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"当前页数据集合"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li></ol> 
<h3><a id="23__234"></a>2.3 分页查询接口</h3> 
<p>当完成了上述所有实体类的准备之后，就可以定义分页查询的接口了。</p> 
<ol><li> <p>首先使用 Controller 方法，在 <code>UserController </code> 中新增一个 <code>queryUsersPage</code> 接口：</p> <pre><code class="prism language-java"><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"用户管理接口"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">IUserService</span> userService<span class="token punctuation">;</span>
		
		<span class="token comment">// ...</span>
		
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/page"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"根据复杂条件分页查询用户接口"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryUsersPage</span><span class="token punctuation">(</span><span class="token class-name">UserQuery</span> query<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">queryUsersPage</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>实现 Service 接口</p> 
  <ul><li>首先在 <code>IUserService </code> 中定义 <code>queryUsersPage</code> 方法</li></ul> <pre><code class="prism language-java">
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserService</span> <span class="token keyword">extends</span> <span class="token class-name">IService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// ...</span>
    <span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryUsersPage</span><span class="token punctuation">(</span><span class="token class-name">UserQuery</span> query<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
  <ul><li>然后在 <code>UserServiceImpl</code> 中实现 <code>queryUsersPage</code> 方法</li></ul> <pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryUsersPage</span><span class="token punctuation">(</span><span class="token class-name">UserQuery</span> query<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. 准备分页查询条件</span>
    <span class="token comment">// 1.1.分页条件</span>
    <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> page <span class="token operator">=</span> <span class="token class-name">Page</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span><span class="token function">getPageNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> query<span class="token punctuation">.</span><span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 1.2.排序条件</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span><span class="token function">getSortBy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 如果排序字段为空，按照更新时间排序</span>
        page<span class="token punctuation">.</span><span class="token function">addOrder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderItem</span><span class="token punctuation">(</span><span class="token string">"update_time"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        page<span class="token punctuation">.</span><span class="token function">addOrder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderItem</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span><span class="token function">getSortBy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> query<span class="token punctuation">.</span><span class="token function">getIsAsc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 2. 查询，查询的接口将封装到 page 对象中。</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3. 数据非空校验</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> page<span class="token punctuation">.</span><span class="token function">getRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>users <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> users<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> page<span class="token punctuation">.</span><span class="token function">getPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 4. 存在数据，进行实体类转换</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token function">copyToList</span><span class="token punctuation">(</span>users<span class="token punctuation">,</span> <span class="token class-name">UserVO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 5. 封装返回结果</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> page<span class="token punctuation">.</span><span class="token function">getPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li></ol> 
<p>完成上述代码之后，发送如下请求：<br> <img src="https://images2.imgbox.com/c8/f9/XHpQxBFX_o.png" alt="">返回结果：</p> 
<p><img src="https://images2.imgbox.com/fd/0a/C7FhzDLK_o.png" alt=""></p> 
<p>虽然通过上面的操作之后，实现了通用分页实体，但是我们发现在实现的<code>queryUsersPage</code>方法中有很大篇幅的代码，像其中的准备分页条件、最终结果的转换等等基本都是通用的代码，如果要实现其他表的分页查询功能的时候，这些代码就又需要再写一遍。因此我们可以考虑将这一部分代码封装起来。</p> 
<h3><a id="24__307"></a>2.4 通用实体的转换</h3> 
<h4><a id="241_PageQuery__MP_Page_308"></a>2.4.1 PageQuery 转换为 MP Page</h4> 
<p>让我们首先来改造准备分页条件的代码，在刚才的代码中，从 <code>PageQuery</code> 到 Mybatis Plus的 <code>Page</code> 之间转换的过程还是比较麻烦的。因此我们可以直接将这段代码封装到 <code>PageQuery </code> 实体中，作为一个工具方法来简化开发。</p> 
<p>例如：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"分页查询实体类"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageQuery</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"页码"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> pageNo<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"页面大小"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"排序字段"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> sortBy<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"是否升序"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Boolean</span> isAsc<span class="token punctuation">;</span>


    <span class="token comment">/**
     * 将 PageQuery 转化为 Mybatis Plus Page
     *
     * @param orderItems 手动设置排序条件
     * @param &lt;T&gt;        泛型
     * @return Mybatis Plus Page
     */</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">toMpPage</span><span class="token punctuation">(</span><span class="token class-name">OrderItem</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> orderItems<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 1. 分页条件</span>
        <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> p <span class="token operator">=</span> <span class="token class-name">Page</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>pageNo<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. 排序提交</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sortBy <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            p<span class="token punctuation">.</span><span class="token function">addOrder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderItem</span><span class="token punctuation">(</span>sortBy<span class="token punctuation">,</span> isAsc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> p<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>orderItems <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            p<span class="token punctuation">.</span><span class="token function">addOrder</span><span class="token punctuation">(</span>orderItems<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> p<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 手动传入排序方式</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">toMpPage</span><span class="token punctuation">(</span><span class="token class-name">String</span> defaultSortBy<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isAsc<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toMpPage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderItem</span><span class="token punctuation">(</span>defaultSortBy<span class="token punctuation">,</span> isAsc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 默认 按照 CreateTime 降序排序</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">toMpPageDefaultSortByCreateTimeDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toMpPage</span><span class="token punctuation">(</span><span class="token string">"create_time"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 默认 按照 UpdateTime 降序排序</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">toMpPageDefaultSortByUpdateTimeDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toMpPage</span><span class="token punctuation">(</span><span class="token string">"update_time"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这样我们在编写 Service 代码的时候就可以省去对从 <code>PageQuery</code> 到 <code>Page</code> 的转换了：</p> 
<pre><code class="prism language-java"><span class="token comment">// 1.构建条件</span>
<span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> page <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">toMpPageDefaultSortByCreateTimeDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="242__PO__VO_376"></a>2.4.2 分页结果 PO 转换 VO</h4> 
<p>在查询出分页结果后，数据的非空校验，数据的 VO 转换同样都是模板代码，编写起来很麻烦。因此我们同样可以将其封装到 <code>PageDTO</code> 的工具方法中，简化整个过程：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span><span class="token string">"分页结果实体"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"总条数"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> total<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"总页数"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> pages<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"当前页数据集合"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>


    <span class="token comment">/**
     * 返回空的分页结果
     * @param p MyBatis Plus 的分页结果
     * @param &lt;V&gt; 目标 VO 类型
     * @param &lt;P&gt; 原始的 PO 类型
     * @return VO 的分页结果
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">,</span> <span class="token class-name">P</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">P</span><span class="token punctuation">&gt;</span></span> p<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">getPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 将 MyBatis Plus 的分页结果转换为 VO 的分页结果
     * @param p MyBatis Plus 的分页结果
     * @param voClass 目标 VO 类型的字节码
     * @param &lt;V&gt; 目标 VO 类型
     * @param &lt;P&gt; 原始的 PO 类型
     * @return VO 的分页结果
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">,</span> <span class="token class-name">P</span><span class="token punctuation">&gt;</span></span><span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">P</span><span class="token punctuation">&gt;</span></span> p<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> voClass<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 1. 非空校验</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">P</span><span class="token punctuation">&gt;</span></span> records <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>records <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> records<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 无数据，返回空结果</span>
            <span class="token keyword">return</span> <span class="token function">empty</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 2. 数据转换</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> vos <span class="token operator">=</span> <span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token function">copyToList</span><span class="token punctuation">(</span>records<span class="token punctuation">,</span> voClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3. 封装返回</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">getPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vos<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * 将 Mybatis Plus分页结果转为 VO分页结果，允许用户自定义 PO到 VO的转换方式
     * @param p Mybatis Plus的分页结果
     * @param convertor PO 到 VO的转换函数
     * @param &lt;V&gt; 目标 VO 类型
     * @param &lt;P&gt; 原始 PO 类型
     * @return VO 的分页结果
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">,</span> <span class="token class-name">P</span><span class="token punctuation">&gt;</span></span><span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">P</span><span class="token punctuation">&gt;</span></span> p<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">P</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> convertor<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 1. 非空校验</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">P</span><span class="token punctuation">&gt;</span></span> records <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>records <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> records<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 无数据，返回空结果</span>
            <span class="token keyword">return</span> <span class="token function">empty</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 2. 数据转换</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> vos <span class="token operator">=</span> records<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>convertor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3. 封装返回</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">getPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vos<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>完成了上面所有的功能之后，最后 <code>queryUsersPage</code> 的实现方法就变成了：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryUsersPage</span><span class="token punctuation">(</span><span class="token class-name">UserQuery</span> query<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. 准备分页条件</span>
    <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> p <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">toMpPageDefaultSortByCreateTimeDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2. 分页查询</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3. 封装返回</span>
    <span class="token keyword">return</span> <span class="token class-name">PageDTO</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token class-name">UserVO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>此时，三行代码就完成了，并且如果要对其他数据库表进行分页查询，也通用能够复用这些代码。</p> 
<p>另外，如果是希望自定义 PO 到 VO 的转换过程，可以这样做：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">PageDTO</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryUsersPage</span><span class="token punctuation">(</span><span class="token class-name">UserQuery</span> query<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. 准备分页条件</span>
    <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> p <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">toMpPageDefaultSortByCreateTimeDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2. 分页查询</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3. 封装返回</span>
    <span class="token keyword">return</span> <span class="token class-name">PageDTO</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> user <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 拷贝属性到 VO</span>
        <span class="token class-name">UserVO</span> userVO <span class="token operator">=</span> <span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token class-name">UserVO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 用户名脱敏处理</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> userVO<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userVO<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> username<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 返回 userVO 对象</span>
        <span class="token keyword">return</span> userVO<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>最终查询的返回结果：</strong></p> 
<p>发现成功对用户名实现了脱敏操作：</p> 
<p><img src="https://images2.imgbox.com/da/e0/A44xwJ3L_o.png" alt=""></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/97cced23cf5a3a9963405166a96510bd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python 面向对象--人狗大战（代码）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/98c350bd5160c3c791ff2a8dd634e7fe/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Selenium安装WebDriver Chrome驱动(含 116/117/118/119/120/)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>