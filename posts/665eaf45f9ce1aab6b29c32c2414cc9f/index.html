<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C&#43;&#43; 实现机房预约系统 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C&#43;&#43; 实现机房预约系统" />
<meta property="og:description" content="文档为黑马程序员C&#43;&#43;课程记录笔记，课程链接：c&#43;&#43;教程
文章目录 1.机房预约系统需求1.1 系统简介1.2 身份简介1.3 机房简介1.4 申请简介1.5 系统具体需求 2.创建项目2.1创建项目2.2 添加文件 3.创建主菜单3.1 菜单实现3.2 搭建接口 4.退出功能实现4.1 退出功能实现4.2 退出功能测试 5.创建身份类5.1 身份类的基类5.2 学生类5.2.1 功能分析5.2.2 类的创建 5.3 老师类5.3.1 功能分析5.3.2 类的创建5.4 管理员类5.4.1 功能分析5.4.2 类的创建 6.登录模块6.1 全局文件添加6.2 登录函数封装6.3 学生登录实现6.4 教师端的登录实现6.5 管理员登录实现 7.管理模块7.1 管理员登录和注销7.1.1 构造函数7.1.2 管理员子菜单7.1.3 菜单功能实现 7.2 添加账号7.2.1 添加功能实现7.2.2 去重操作7.2.2.1 读取信息7.2.2.2 去重函数封装7.2.2.3 添加去重操作7.2.2.4 Bug解决 7.3 显示账号7.3.1 显示功能实现7.3.2 测试 7.4 查看机房7.4.1 添加机房信息7.4.2 机房类创建7.4.3 初始化机房信息7.4.4 显示机房信息 7.5 清空预约7.5.1 清空功能实现 8.学生模块8.1 学生登录和注销8.1.1 构造函数8.1.2 管理员子菜单8.1.3 菜单功能实现8.1.4 接口对接 8.2 申请预约8.2.1 获取机房信息8.2.2 预约功能实现 8." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/665eaf45f9ce1aab6b29c32c2414cc9f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-15T21:58:16+08:00" />
<meta property="article:modified_time" content="2022-12-15T21:58:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C&#43;&#43; 实现机房预约系统</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>文档为黑马程序员C++课程记录笔记，课程链接：<a href="https://www.bilibili.com/video/BV1et411b73Z?p=293&amp;spm_id_from=pageDriver&amp;vd_source=f6e9242fe7d94ba015dd8b1239447e72" rel="nofollow">c++教程</a><br> </p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#1_5" rel="nofollow">1.机房预约系统需求</a></li><li><ul><li><a href="#11__6" rel="nofollow">1.1 系统简介</a></li><li><a href="#12__8" rel="nofollow">1.2 身份简介</a></li><li><a href="#13__14" rel="nofollow">1.3 机房简介</a></li><li><a href="#14__20" rel="nofollow">1.4 申请简介</a></li><li><a href="#15__25" rel="nofollow">1.5 系统具体需求</a></li></ul> 
   </li><li><a href="#2_50" rel="nofollow">2.创建项目</a></li><li><ul><li><a href="#21_51" rel="nofollow">2.1创建项目</a></li><li><a href="#22__55" rel="nofollow">2.2 添加文件</a></li></ul> 
   </li><li><a href="#3_59" rel="nofollow">3.创建主菜单</a></li><li><ul><li><a href="#31__64" rel="nofollow">3.1 菜单实现</a></li><li><a href="#32__104" rel="nofollow">3.2 搭建接口</a></li></ul> 
   </li><li><a href="#4_156" rel="nofollow">4.退出功能实现</a></li><li><ul><li><a href="#41__157" rel="nofollow">4.1 退出功能实现</a></li><li><a href="#42__166" rel="nofollow">4.2 退出功能测试</a></li></ul> 
   </li><li><a href="#5_168" rel="nofollow">5.创建身份类</a></li><li><ul><li><a href="#51__169" rel="nofollow">5.1 身份类的基类</a></li><li><a href="#52__199" rel="nofollow">5.2 学生类</a></li><li><ul><li><a href="#521__200" rel="nofollow">5.2.1 功能分析</a></li><li><a href="#522__210" rel="nofollow">5.2.2 类的创建</a></li></ul> 
    </li><li><a href="#53__306" rel="nofollow">5.3 老师类</a></li><li><ul><li><a href="#531__307" rel="nofollow">5.3.1 功能分析</a></li><li><a href="#532__315" rel="nofollow">5.3.2 类的创建</a></li><li><a href="#54__399" rel="nofollow">5.4 管理员类</a></li><li><a href="#541__400" rel="nofollow">5.4.1 功能分析</a></li><li><a href="#542__411" rel="nofollow">5.4.2 类的创建</a></li></ul> 
   </li></ul> 
   </li><li><a href="#6_511" rel="nofollow">6.登录模块</a></li><li><ul><li><a href="#61__512" rel="nofollow">6.1 全局文件添加</a></li><li><a href="#62__542" rel="nofollow">6.2 登录函数封装</a></li><li><a href="#63__626" rel="nofollow">6.3 学生登录实现</a></li><li><a href="#64__669" rel="nofollow">6.4 教师端的登录实现</a></li><li><a href="#65__709" rel="nofollow">6.5 管理员登录实现</a></li></ul> 
   </li><li><a href="#7_745" rel="nofollow">7.管理模块</a></li><li><ul><li><a href="#71__746" rel="nofollow">7.1 管理员登录和注销</a></li><li><ul><li><a href="#711__747" rel="nofollow">7.1.1 构造函数</a></li><li><a href="#712__759" rel="nofollow">7.1.2 管理员子菜单</a></li><li><a href="#713__818" rel="nofollow">7.1.3 菜单功能实现</a></li></ul> 
    </li><li><a href="#72__849" rel="nofollow">7.2 添加账号</a></li><li><ul><li><a href="#721__856" rel="nofollow">7.2.1 添加功能实现</a></li><li><a href="#722__913" rel="nofollow">7.2.2 去重操作</a></li><li><ul><li><a href="#7221__916" rel="nofollow">7.2.2.1 读取信息</a></li><li><a href="#7222__995" rel="nofollow">7.2.2.2 去重函数封装</a></li><li><a href="#7223__1032" rel="nofollow">7.2.2.3 添加去重操作</a></li><li><a href="#7224__Bug_1077" rel="nofollow">7.2.2.4 Bug解决</a></li></ul> 
    </li></ul> 
    </li><li><a href="#73__1094" rel="nofollow">7.3 显示账号</a></li><li><ul><li><a href="#731__1099" rel="nofollow">7.3.1 显示功能实现</a></li><li><a href="#732__1138" rel="nofollow">7.3.2 测试</a></li></ul> 
    </li><li><a href="#74___1141" rel="nofollow">7.4 查看机房</a></li><li><ul><li><a href="#741__1142" rel="nofollow">7.4.1 添加机房信息</a></li><li><a href="#742__1146" rel="nofollow">7.4.2 机房类创建</a></li><li><a href="#743__1172" rel="nofollow">7.4.3 初始化机房信息</a></li><li><a href="#744__1200" rel="nofollow">7.4.4 显示机房信息</a></li></ul> 
    </li><li><a href="#75__1219" rel="nofollow">7.5 清空预约</a></li><li><ul><li><a href="#751__1222" rel="nofollow">7.5.1 清空功能实现</a></li></ul> 
   </li></ul> 
   </li><li><a href="#8_1244" rel="nofollow">8.学生模块</a></li><li><ul><li><a href="#81__1245" rel="nofollow">8.1 学生登录和注销</a></li><li><ul><li><a href="#811__1246" rel="nofollow">8.1.1 构造函数</a></li><li><a href="#812__1259" rel="nofollow">8.1.2 管理员子菜单</a></li><li><a href="#813__1272" rel="nofollow">8.1.3 菜单功能实现</a></li><li><a href="#814__1337" rel="nofollow">8.1.4 接口对接</a></li></ul> 
    </li><li><a href="#82__1353" rel="nofollow">8.2 申请预约</a></li><li><ul><li><a href="#821__1354" rel="nofollow">8.2.1 获取机房信息</a></li><li><a href="#822__1382" rel="nofollow">8.2.2 预约功能实现</a></li></ul> 
    </li><li><a href="#83__1456" rel="nofollow">8.3 显示预约</a></li><li><ul><li><a href="#831__1457" rel="nofollow">8.3.1 创建预约类</a></li><li><a href="#832__1621" rel="nofollow">8.3.2 显示自身预约</a></li><li><a href="#833__1676" rel="nofollow">8.3.3 显示所有预约</a></li></ul> 
    </li><li><a href="#84___1726" rel="nofollow">8.4 取消预约</a></li></ul> 
   </li><li><a href="#9_1801" rel="nofollow">9.教师模块</a></li><li><ul><li><a href="#91__1802" rel="nofollow">9.1 教师登录和注销</a></li><li><ul><li><a href="#911__1803" rel="nofollow">9.1.1 构造函数</a></li><li><a href="#912__1816" rel="nofollow">9.1.2 教师子菜单</a></li><li><a href="#913__1864" rel="nofollow">9.1.3 菜单功能实现</a></li><li><a href="#914__1888" rel="nofollow">9.1.4 接口对接测试</a></li></ul> 
    </li><li><a href="#92__1903" rel="nofollow">9.2 查看所有预约</a></li><li><ul><li><a href="#921__1904" rel="nofollow">9.2.1 查看所有预约是功能实现</a></li></ul> 
    </li><li><a href="#93__1957" rel="nofollow">9.3 审核预约</a></li><li><ul><li><a href="#931__1958" rel="nofollow">9.3.1 审核功能实现</a></li></ul> 
   </li></ul> 
   </li><li><a href="#10_2040" rel="nofollow">10.服务器上编译运行</a></li><li><ul><li><a href="#101__2041" rel="nofollow">10.1 服务器上创建目录并上传程序</a></li><li><a href="#102__2052" rel="nofollow">10.2 编译生成动态库</a></li><li><a href="#10_2076" rel="nofollow">10.编译主程序并运行</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h3><a id="1_5"></a>1.机房预约系统需求</h3> 
<h4><a id="11__6"></a>1.1 系统简介</h4> 
<p>设计实现一个工作日机房使用时间预约系统，避免机房重复占用，使用撞车的现象</p> 
<h4><a id="12__8"></a>1.2 身份简介</h4> 
<p>分别有三种身份使用该程序</p> 
<ul><li>学生代表：申请使用机房</li><li>教师：审核学习的预约申请</li><li>管理员：给学生，教师创建账号</li></ul> 
<h4><a id="13__14"></a>1.3 机房简介</h4> 
<p>机房总共有三间（假设）</p> 
<ul><li>1号机房：最大容量20人</li><li>2号机房：最大容量50人</li><li>3号机房：最大容量100人</li></ul> 
<h4><a id="14__20"></a>1.4 申请简介</h4> 
<ul><li>申请的订单每周由管理员负责清空</li><li>学生可以预约未来一周内的机房的使用，预约的日期为周一至周五，预约时需要选择预约时间段（上午或者下午）</li><li>教师来审核预约，依据实际情况审核预约通过或者不通过</li></ul> 
<h4><a id="15__25"></a>1.5 系统具体需求</h4> 
<ul><li>进入登录页面，可以选择的登录身份有： 
  <ul><li>学生代表</li><li>老师</li><li>管理员</li><li>退出</li></ul> </li><li>每个身份都需要进行验证后才能进入子菜单 
  <ul><li>学生需要输入：学号、姓名、登录密码</li><li>老师需要输入：职工号、姓名、登录密码</li><li>管理员需要输入：管理员姓名、登录密码</li></ul> </li><li>学生具体功能 
  <ul><li>申请预约 --预约机房</li><li>查看自身的预约 --查看自己的预约状态</li><li>查看所有预约 --查看全部的预约信息以及预约状态</li><li>取消预约 – 取消自身的预约，预约成功或者审核中的均可取消</li></ul> </li><li>教师具体功能 
  <ul><li>查看所有预约 – 查看全部预约信息与状态</li><li>审核预约 – 对学生的预约进行审核</li><li>注销登录 – 退出登录</li></ul> </li><li>管理员具体功能 
  <ul><li>添加账号 --添加学生或者教师的账号，需要检测学生编号或者职工编号是否重复</li><li>查看账号 --可以选择查看学生或者教师的全部信息</li><li>查看机房 – 查看所有机房信息</li><li>清空预约 --清空所有预约信息记录</li><li>注销登录 --退出登录</li></ul> </li></ul> 
<h3><a id="2_50"></a>2.创建项目</h3> 
<h4><a id="21_51"></a>2.1创建项目</h4> 
<p>在vs tudio中创建新项目，模板选择空项目<br> <img src="https://images2.imgbox.com/90/fb/sw7Cvak6_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="22__55"></a>2.2 添加文件</h4> 
<p>右键源文件中添加新文件<br> <img src="https://images2.imgbox.com/de/56/aJwdf3su_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3_59"></a>3.创建主菜单</h3> 
<p><strong>功能描述</strong></p> 
<ul><li>实现与用户进行界面上的交互功能</li></ul> 
<h4><a id="31__64"></a>3.1 菜单实现</h4> 
<ul><li>在主函数main中添加菜单提示，代码如下：</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment"></span>
<span class="token comment">///@brief 机房预约系统</span>
<span class="token comment">///@date 2022-12-10</span>
<span class="token comment">///@author zhichengMa</span>
<span class="token comment">/</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"==================  欢迎来到机房预约系统  =================="</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入您的身份"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t ------------------------------\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 1、学生代表-------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 2、老   师 -------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 3、管 理 员 ------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 4、退出系统 ------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t ------------------------------\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入您的选择："</span><span class="token punctuation">;</span>

	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li></ul> 
<h4><a id="32__104"></a>3.2 搭建接口</h4> 
<ul><li>接受用户的选择，搭建接口</li><li>在main中添加代码</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//定义变量，接收用户的选择</span>
	<span class="token keyword">int</span> select <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"==================  欢迎来到机房预约系统  =================="</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入您的身份"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t ------------------------------\n"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 1、学生代表-------- |\n"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 2、老   师 -------- |\n"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 3、管 理 员 ------- |\n"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 4、退出系统 ------- |\n"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t ------------------------------\n"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入您的选择："</span><span class="token punctuation">;</span>

		cin <span class="token operator">&gt;&gt;</span> select<span class="token punctuation">;</span><span class="token comment">//接收用户的选择</span>

		<span class="token keyword">switch</span> <span class="token punctuation">(</span>select<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token comment">// 学生身份</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token comment">// 老师身份</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token comment">// 管理员身份</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span> <span class="token comment">// 退出</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">default</span><span class="token operator">:</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"输入有误，请重新选择！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="4_156"></a>4.退出功能实现</h3> 
<h4><a id="41__157"></a>4.1 退出功能实现</h4> 
<p>在main函数分支0选项中，添加退出程序代码</p> 
<pre><code class="prism language-cpp">cout <span class="token operator">&lt;&lt;</span> <span class="token string">"欢迎下次使用！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/95/0c/x9WoBwZJ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="42__166"></a>4.2 退出功能测试</h4> 
<p><img src="https://images2.imgbox.com/02/c7/Fd11lrgY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5_168"></a>5.创建身份类</h3> 
<h4><a id="51__169"></a>5.1 身份类的基类</h4> 
<ul><li>在整个系统中，有三类身份，分别为：学生代表、老师、管理员</li><li>三种身份尤其共性也有特性，因此可以将三种身份抽象出一个身份的基类identity</li><li>在头文件中创建 identity.h 文件<br> identity.h 中添加如下代码</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment"></span>
<span class="token comment">///@brief identity.h  身份类基类</span>
<span class="token comment">///@date 2022-12-10</span>
<span class="token comment">///@author zhichengMa</span>
<span class="token comment">/</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;istream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token comment">//身份抽象类</span>
<span class="token keyword">class</span> <span class="token class-name">Identity</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//操作菜单</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	string m_Name<span class="token punctuation">;</span> <span class="token comment">//用户名</span>
	string m_Pwd<span class="token punctuation">;</span> <span class="token comment">//密码</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="52__199"></a>5.2 学生类</h4> 
<h5><a id="521__200"></a>5.2.1 功能分析</h5> 
<ul><li>学生类主要功能是可以通过类中的成员函数，实现预约实验室的操作</li><li>学生类中主要功能有： 
  <ul><li>显示学生操作的菜单界面</li><li>申请预约</li><li>查看自身预约</li><li>查看所有预约</li><li>取消预约</li></ul> </li></ul> 
<h5><a id="522__210"></a>5.2.2 类的创建</h5> 
<ul><li>在头文件及源文件下创建student.h 和student.cpp<br> student.h中添加如下代码</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment"></span>
<span class="token comment">///@brief student.h  学生类</span>
<span class="token comment">///@date 2022-12-10</span>
<span class="token comment">///@author zhichengMa</span>
<span class="token comment">/</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;istream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"identity.h"</span></span>

<span class="token comment">//学生类</span>
<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Identity</span></span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//默认构造</span>
	<span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//有参构造</span>
	<span class="token function">Student</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> string name<span class="token punctuation">,</span> string pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//菜单界面</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//申请预约</span>
	<span class="token keyword">void</span> <span class="token function">applyOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//查看我的预约</span>
	<span class="token keyword">void</span> <span class="token function">showMyOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//查看所有预约</span>
	<span class="token keyword">void</span> <span class="token function">showAllOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//学号</span>
	<span class="token keyword">int</span> m_Id；
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> 
<p>student.cpp中添加如下代码</p> 
<pre><code class="prism language-cpp"><span class="token comment"></span>
<span class="token comment">///@brief student.cpp  学生类</span>
<span class="token comment">///@date 2022-12-10</span>
<span class="token comment">///@author zhichengMa</span>
<span class="token comment">/</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"student.h"</span></span>

<span class="token comment">//默认构造</span>
<span class="token class-name">Student</span><span class="token double-colon punctuation">::</span><span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//有参构造</span>
<span class="token class-name">Student</span><span class="token double-colon punctuation">::</span><span class="token function">Student</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> string name<span class="token punctuation">,</span> string pwd<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//菜单界面</span>
<span class="token keyword">void</span> <span class="token class-name">Student</span><span class="token double-colon punctuation">::</span><span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//申请预约</span>
<span class="token keyword">void</span> <span class="token class-name">Student</span><span class="token double-colon punctuation">::</span><span class="token function">applyOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//查看我的预约</span>
<span class="token keyword">void</span> <span class="token class-name">Student</span><span class="token double-colon punctuation">::</span><span class="token function">showMyOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//查看所有预约</span>
<span class="token keyword">void</span> <span class="token class-name">Student</span><span class="token double-colon punctuation">::</span><span class="token function">showAllOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//取消预约</span>
<span class="token keyword">void</span> <span class="token class-name">Student</span><span class="token double-colon punctuation">::</span><span class="token function">cancelOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="53__306"></a>5.3 老师类</h4> 
<h5><a id="531__307"></a>5.3.1 功能分析</h5> 
<ul><li>教师类主要功能是查看学生的预约，并进行审核</li><li>教师类主要功能有： 
  <ul><li>显示教师操作界面</li><li>查看所有预约</li><li>审核预约</li></ul> </li></ul> 
<h5><a id="532__315"></a>5.3.2 类的创建</h5> 
<ul><li>在头文件及源文件下创建teacher.h 和teache.cpp 文件</li><li>teacher.h 中添加如下代码</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment"></span>
<span class="token comment">///@brief teacher.h  教师类</span>
<span class="token comment">///@date 2022-12-10</span>
<span class="token comment">///@author zhichengMa</span>
<span class="token comment">/</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;istream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"identity.h"</span></span>

<span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Identity</span></span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//默认构造</span>
	<span class="token function">Teacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//有参构造（职工编号，姓名，密码）</span>
	<span class="token function">Teacher</span><span class="token punctuation">(</span><span class="token keyword">int</span> empId<span class="token punctuation">,</span>string name<span class="token punctuation">,</span>string pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//菜单界面</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//查看所有预约</span>
	<span class="token keyword">void</span> <span class="token function">showAllOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//审核预约</span>
	<span class="token keyword">void</span> <span class="token function">validOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//教师编号</span>
	<span class="token keyword">int</span> m_EmpId<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> 
<ul><li>teacher.cpp 中添加如下代码</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment"></span>
<span class="token comment">///@brief teacher.cpp  教师是类</span>
<span class="token comment">///@date 2022-12-10</span>
<span class="token comment">///@author zhichengMa</span>
<span class="token comment">/</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"teacher.h"</span></span>

<span class="token comment">//默认构造</span>
<span class="token class-name">Teacher</span><span class="token double-colon punctuation">::</span><span class="token function">Teacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//有参构造（职工编号，姓名，密码）</span>
<span class="token class-name">Teacher</span><span class="token double-colon punctuation">::</span><span class="token function">Teacher</span><span class="token punctuation">(</span><span class="token keyword">int</span> empId<span class="token punctuation">,</span> string name<span class="token punctuation">,</span> string pwd<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//菜单界面</span>
<span class="token keyword">void</span> <span class="token class-name">Teacher</span><span class="token double-colon punctuation">::</span><span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//查看所有预约</span>
<span class="token keyword">void</span> <span class="token class-name">Teacher</span><span class="token double-colon punctuation">::</span><span class="token function">showAllOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//审核预约</span>
<span class="token keyword">void</span> <span class="token class-name">Teacher</span><span class="token double-colon punctuation">::</span><span class="token function">validOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

</code></pre> 
<h5><a id="54__399"></a>5.4 管理员类</h5> 
<h5><a id="541__400"></a>5.4.1 功能分析</h5> 
<ul><li>管理员类主要功能是对学生和老师账号进行管理，查看机房信息和清空预约记录</li><li>管理员类中主要功能有： 
  <ul><li>显示管理员操作菜单</li><li>添加账号</li><li>查看账号</li><li>查看机房信息</li><li>清空预约记录</li></ul> </li></ul> 
<h5><a id="542__411"></a>5.4.2 类的创建</h5> 
<ul><li>在头文件及源文件下创建manager.h和manager.cpp文件</li></ul> 
<p>manager.h中添加如下代码</p> 
<pre><code class="prism language-cpp"><span class="token comment"></span>
<span class="token comment">///@brief manager.h  管理员类</span>
<span class="token comment">///@date 2022-12-10</span>
<span class="token comment">///@author zhichengMa</span>
<span class="token comment">/</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;istream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"identity.h"</span></span>

<span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Identity</span></span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//默认构造</span>
	<span class="token function">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//有参构造(管理员姓名、密码)</span>
	<span class="token function">Manager</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> string pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//选择菜单</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//添加账号</span>
	<span class="token keyword">void</span> <span class="token function">addPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//查看账号</span>
	<span class="token keyword">void</span> <span class="token function">showPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//查看机房信息</span>
	<span class="token keyword">void</span> <span class="token function">showCompter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//清空预约记录</span>
	<span class="token keyword">void</span> <span class="token function">cleanFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> 
<p>manager.cpp中添加如下代码</p> 
<pre><code class="prism language-cpp"><span class="token comment"></span>
<span class="token comment">///@brief manager.cpp  管理员类</span>
<span class="token comment">///@date 2022-12-10</span>
<span class="token comment">///@author zhichengMa</span>
<span class="token comment">/</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"manager.h"</span></span>

<span class="token comment">//默认构造</span>
<span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//有参构造(管理员姓名、密码)</span>
<span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">Manager</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> string pwd<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//选择菜单</span>
<span class="token keyword">void</span> <span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//添加账号</span>
<span class="token keyword">void</span> <span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">addPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//查看账号</span>
<span class="token keyword">void</span> <span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">showPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//查看机房信息</span>
<span class="token keyword">void</span> <span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">showCompter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//清空预约记录</span>
<span class="token keyword">void</span> <span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">cleanFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="6_511"></a>6.登录模块</h3> 
<h4><a id="61__512"></a>6.1 全局文件添加</h4> 
<p><strong>功能描述</strong></p> 
<ul><li>不同的身份可能会用到不同的文件操作，我们将所有文件名定义到一个全局文件中</li><li>在头文件中添加globalFile.h文件</li><li>并添加如下代码</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment"></span>
<span class="token comment">///@brief globalFile.h  全局文件定义</span>
<span class="token comment">///@date 2022-12-10</span>
<span class="token comment">///@author zhichengMa</span>
<span class="token comment">/</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

<span class="token comment">//管理员文件</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ADMIN_FILE</span> <span class="token string">"admin.txt"</span></span>

<span class="token comment">//学生文件</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">STUDENT_FILE</span> <span class="token string">"student.txt"</span></span>

<span class="token comment">//教师文件</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">TEACHER_FILE</span> <span class="token string">"teacher.txt"</span></span>

<span class="token comment">//机房信息文件</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">COMPUTER_FILE</span> <span class="token string">"computerRoom.txt"</span></span>

<span class="token comment">//订单文件</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ORDER_FILE</span> <span class="token string">"order.txt"</span></span>
</code></pre> 
<h4><a id="62__542"></a>6.2 登录函数封装</h4> 
<p><strong>功能描述：</strong></p> 
<ul><li>根据用户的选择，进入不同的身份登录<br> 在入口文件中添加全局函数void LoginIn(string fileName,int type);</li><li>fileName --操作的文件名</li><li>type --登录的身份（1-学生，2-教师，3-管理员）</li></ul> 
<p>LoginIn中添加如下代码</p> 
<pre><code class="prism language-cpp"><span class="token comment">//登录功能,参数1：操作文件名，参数2：操作身份类型</span>
<span class="token keyword">void</span> <span class="token function">loginIn</span><span class="token punctuation">(</span>string fileName<span class="token punctuation">,</span> <span class="token keyword">int</span> type<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//父类指针，用于指向子类对象</span>
	Identity<span class="token operator">*</span> person <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>

	<span class="token comment">//读文件</span>
	ifstream ifs<span class="token punctuation">;</span>
	ifs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> ios<span class="token double-colon punctuation">::</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//判断文件是否存在</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ifs<span class="token punctuation">.</span><span class="token function">is_open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"文件不存在！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		ifs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//准备接收用户的信息</span>
	<span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	string name<span class="token punctuation">;</span>
	string pwd<span class="token punctuation">;</span>

	<span class="token comment">//判断身份</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//学生身份</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入你的学号："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cin <span class="token operator">&gt;&gt;</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">//教师身份</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入您的职工："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cin <span class="token operator">&gt;&gt;</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入用户名："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cin <span class="token operator">&gt;&gt;</span> name<span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入密码："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cin <span class="token operator">&gt;&gt;</span> pwd<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//学生身份验证</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//教师身份验证</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//管理员身份验证</span>
	<span class="token punctuation">}</span>

	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"验证登录失败！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在mian函数不同分支中，填入不同的登录接口参数</p> 
<pre><code class="prism language-cpp"><span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token comment">// 学生身份</span>
	<span class="token function">loginIn</span><span class="token punctuation">(</span>STUDENT_FILE<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token comment">// 老师身份</span>
	<span class="token function">loginIn</span><span class="token punctuation">(</span>TEACHER_FILE<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token comment">// 管理员身份</span>
	<span class="token function">loginIn</span><span class="token punctuation">(</span>ADMIN_FILE<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">break</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0c/91/OQdiQes6_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="63__626"></a>6.3 学生登录实现</h4> 
<p>在student.txt文件中添加两条学生信息，用于测试<br> 添加信息：</p> 
<pre><code class="prism language-cpp"><span class="token number">1</span> 张三 <span class="token number">123</span>
<span class="token number">2</span> 李四 <span class="token number">123456</span>
</code></pre> 
<p>其中：</p> 
<ul><li>第一列代表：学号</li><li>第二列代表：学生姓名</li><li>第三列代表：密码<br> 效果图：<br> <img src="https://images2.imgbox.com/7b/71/gQL3SYCv_o.png" alt="在这里插入图片描述"><br> 在loginin函数的学生分支中加入如下代码，验证学生身份</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//学生身份验证</span>
<span class="token keyword">int</span> fId<span class="token punctuation">;</span><span class="token comment">//从文件中读取的id</span>
string fName<span class="token punctuation">;</span><span class="token comment">//从文件中获取的姓名</span>
string fPwd<span class="token punctuation">;</span><span class="token comment">//从文件中读取的密码</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>ifs <span class="token operator">&gt;&gt;</span> fId <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> fName <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> fPwd<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//与用户输入的信息做对比</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>fId <span class="token operator">==</span> id <span class="token operator">&amp;&amp;</span> fName <span class="token operator">==</span> name <span class="token operator">&amp;&amp;</span> fPwd <span class="token operator">==</span> pwd<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"学生验证登录成功！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Student</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//进入到学生身份的子菜单</span>

		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>添加代码效果：<br> <img src="https://images2.imgbox.com/5f/07/jgfUwS0r_o.png" alt="在这里插入图片描述"></p> 
<p>测试验证：</p> 
<p><img src="https://images2.imgbox.com/ea/33/rPvNZZ6t_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="64__669"></a>6.4 教师端的登录实现</h4> 
<p>在teacher.txt中添加一条老师信息用于测试<br> 添加信息：</p> 
<pre><code class="prism language-cpp"><span class="token number">1</span> 张老师 <span class="token number">123</span>
</code></pre> 
<p>其中：</p> 
<ul><li>第一列代表：职工编号</li><li>第二列代表：教思姓名</li><li>第三列代表：密码<br> 效果图：<br> <img src="https://images2.imgbox.com/a4/f8/K6KTrId0_o.png" alt="在这里插入图片描述"><br> 在loginIn函数的教师分支中加入如下代码，验证教师身份</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> fId<span class="token punctuation">;</span>
string fName<span class="token punctuation">;</span>
string fPwd<span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>ifs <span class="token operator">&gt;&gt;</span> fId <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> fName <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> fPwd<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>fId <span class="token operator">==</span> id <span class="token operator">&amp;&amp;</span> fName <span class="token operator">==</span> name <span class="token operator">&amp;&amp;</span> fPwd <span class="token operator">==</span> pwd<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"教师验证登录成功！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Teacher</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//进入教师的子菜单界面</span>

		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>代码添加效果：<br> <img src="https://images2.imgbox.com/36/c9/5IyJBJkO_o.png" alt="在这里插入图片描述"></p> 
<p>验证测试：<br> <img src="https://images2.imgbox.com/32/fb/l83QbQZd_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="65__709"></a>6.5 管理员登录实现</h4> 
<p>在admin.txt中添加一条管理员信息，由于我们只有一条管理员，因此本案例中乜有添加管理员信息功能<br> 添加信息：</p> 
<pre><code class="prism language-cpp"><span class="token number">1</span> admin <span class="token number">123</span>
</code></pre> 
<p>其中：admin代表管理员用户名，123代表管理员密码<br> 效果图：<br> <img src="https://images2.imgbox.com/eb/43/Hqoogi7I_o.png" alt="在这里插入图片描述"><br> 在loginIn函数的管理员分支中加入如下代码，验证管理员身份</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> fId<span class="token punctuation">;</span>
string fName<span class="token punctuation">;</span>
string fPwd<span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>ifs <span class="token operator">&gt;&gt;</span> fName <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> fPwd<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>fName <span class="token operator">==</span> name <span class="token operator">&amp;&amp;</span> fPwd <span class="token operator">==</span> pwd<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"管理员验证登录成功！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Manager</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//进入管理员的子菜单界面</span>

		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>代码添加效果：<br> <img src="https://images2.imgbox.com/ff/b6/hQZAXBjM_o.png" alt="在这里插入图片描述"></p> 
<p>验证测试：<br> <img src="https://images2.imgbox.com/21/82/dYsVewce_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="7_745"></a>7.管理模块</h3> 
<h4><a id="71__746"></a>7.1 管理员登录和注销</h4> 
<h5><a id="711__747"></a>7.1.1 构造函数</h5> 
<ul><li>在Manager类的构造函数中，初始化管理员信息，代码如下</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//有参构造(管理员姓名、密码)</span>
<span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">Manager</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> string pwd<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Pwd <span class="token operator">=</span> pwd<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="712__759"></a>7.1.2 管理员子菜单</h5> 
<ul><li>在主启的cpp文件中，当用户登录的是管理员，添加管理员菜单接口</li><li>讲不同的分支提供出来 
  <ul><li>添加账号</li><li>查看账号</li><li>查看机房</li><li>清空预约</li><li>注销登录</li></ul> </li><li>实现注销功能<br> 添加全局函数void managerMenu(Idenity * &amp;manager)</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//进入管理员子菜单页面</span>
<span class="token keyword">void</span> <span class="token function">ManagerMenu</span><span class="token punctuation">(</span>Identity<span class="token operator">*</span><span class="token operator">&amp;</span> manager<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//调用管理员子菜单</span>
		manager<span class="token operator">-&gt;</span><span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//将父类的指针转为子类的指针，调用子类的其他特有接口</span>
		Manager<span class="token operator">*</span> man <span class="token operator">=</span> <span class="token punctuation">(</span>Manager<span class="token operator">*</span><span class="token punctuation">)</span> manager<span class="token punctuation">;</span>

		<span class="token keyword">int</span> select <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token comment">//接收用户的选项</span>
		cin <span class="token operator">&gt;&gt;</span> select<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//添加账号</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"添加账号！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			man<span class="token operator">-&gt;</span><span class="token function">addPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">//查看账号</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"查看账号！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			man<span class="token operator">-&gt;</span><span class="token function">showPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token comment">//查看机房</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"查看机房！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			man<span class="token operator">-&gt;</span><span class="token function">showCompter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token comment">//清空预约</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"清空预约！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			man<span class="token operator">-&gt;</span><span class="token function">cleanFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">delete</span> manager<span class="token punctuation">;</span><span class="token comment">//销毁掉堆区的对象</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"注销成功！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="713__818"></a>7.1.3 菜单功能实现</h5> 
<ul><li>实现成员函数void Manager::openMenu()，代码如下</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//选择菜单</span>
<span class="token keyword">void</span> <span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"===  欢迎管理员:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Name <span class="token operator">&lt;&lt;</span><span class="token string">"===登录 "</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入您的身份"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t ------------------------------\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 1、添加账号-------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 2、查看账号 -------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 3、查看机房 ------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 4、清空预约 ------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 0、注销登录 ------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t ------------------------------\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请选择您的操作："</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>测试对接效果图：<br> <img src="https://images2.imgbox.com/2a/b5/HaRMJNjm_o.png" alt="在这里插入图片描述"><br> 登录成功：<br> <img src="https://images2.imgbox.com/de/02/uDEonBip_o.png" alt="在这里插入图片描述"><br> 注销成功：<br> <img src="https://images2.imgbox.com/d0/e6/jMcwpY9y_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="72__849"></a>7.2 添加账号</h4> 
<p><strong>功能描述：</strong></p> 
<ul><li> <p>给学生或者教师添加账号<br> <strong>工能要求</strong></p> </li><li> <p>添加时学生学号不能重复，教师职工号不能重复</p> </li></ul> 
<h5><a id="721__856"></a>7.2.1 添加功能实现</h5> 
<p>在Manager的addPerson成员函数中，实现添加新账号功能，代码如下：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//添加账号</span>
<span class="token keyword">void</span> <span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">addPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入添加账号类型:"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"1、添加学生"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"2、添加教师"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	string fileName<span class="token punctuation">;</span>
	string tip<span class="token punctuation">;</span>
	ofstream ofs<span class="token punctuation">;</span>

	<span class="token keyword">int</span> select <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	cin <span class="token operator">&gt;&gt;</span> select<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		fileName <span class="token operator">=</span> STUDENT_FILE<span class="token punctuation">;</span>
		tip <span class="token operator">=</span> <span class="token string">"请输入学号"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		fileName <span class="token operator">=</span> TEACHER_FILE<span class="token punctuation">;</span>
		tip <span class="token operator">=</span> <span class="token string">"请输入职工号"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	ofs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> ios<span class="token double-colon punctuation">::</span>out <span class="token operator">|</span> ios<span class="token double-colon punctuation">::</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> id<span class="token punctuation">;</span>
	string name<span class="token punctuation">;</span>
	string pwd<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> tip <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cin <span class="token operator">&gt;&gt;</span> id<span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入姓名："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cin <span class="token operator">&gt;&gt;</span> name<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入密码："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cin <span class="token operator">&gt;&gt;</span> pwd<span class="token punctuation">;</span>

	ofs <span class="token operator">&lt;&lt;</span> id <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> name <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> pwd <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"添加成功！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	ofs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>测试添加学生：<br> <img src="https://images2.imgbox.com/8b/1a/HaVdKRIm_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/93/e8/izJIP2WN_o.png" alt="在这里插入图片描述"><br> 添加教师：<br> <img src="https://images2.imgbox.com/81/10/DyfRgkSA_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/10/74/NvhlP2Xc_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="722__913"></a>7.2.2 去重操作</h5> 
<p>功能描述：添加新账号时，如果是重复的学生编号，或者是重复的教职工编号，提示有误</p> 
<h6><a id="7221__916"></a>7.2.2.1 读取信息</h6> 
<ul><li>要去除重复的账号，首先要将学生和教师的账号信息获取到程序中，方可检测</li><li>在manager.h中添加两个容器，用于存储学生和教师的信息</li><li>添加一个新的成员函数void intVector()初始化容器</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//初始化容器</span>
<span class="token keyword">void</span> <span class="token function">initVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//学生容器</span>
vector<span class="token operator">&lt;</span>Student<span class="token operator">&gt;</span> vStu<span class="token punctuation">;</span>

<span class="token comment">//教师容器</span>
vector<span class="token operator">&lt;</span>Teacher<span class="token operator">&gt;</span> vTea<span class="token punctuation">;</span>
</code></pre> 
<p>添加位置如图：<br> <img src="https://images2.imgbox.com/56/57/6EaV2ply_o.png" alt="在这里插入图片描述"><br> 在Manager的有参构造中获取目前的学生和教师信息<br> 代码如下：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//初始化容器</span>
<span class="token keyword">void</span>  <span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">initVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//确保容器为清空状态</span>
	vStu<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	vTea<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//读取信息，学生和老师</span>
	ifstream ifs<span class="token punctuation">;</span>
	ifs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>STUDENT_FILE<span class="token punctuation">,</span> ios<span class="token double-colon punctuation">::</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ifs<span class="token punctuation">.</span><span class="token function">is_open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"学生文件读取失败！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//读取学生信息</span>
	Student s<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>ifs <span class="token operator">&gt;&gt;</span> s<span class="token punctuation">.</span>m_Id <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> s<span class="token punctuation">.</span>m_Name <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> s<span class="token punctuation">.</span>m_Pwd<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		vStu<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"当前学生数量为："</span> <span class="token operator">&lt;&lt;</span> vStu<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	ifs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//读取老师信息</span>
	ifs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>TEACHER_FILE<span class="token punctuation">,</span> ios<span class="token double-colon punctuation">::</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ifs<span class="token punctuation">.</span><span class="token function">is_open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"教师文件读取失败！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	Teacher t<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>ifs <span class="token operator">&gt;&gt;</span> t<span class="token punctuation">.</span>m_EmpId <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> t<span class="token punctuation">.</span>m_Name <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> t<span class="token punctuation">.</span>m_Pwd<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		vTea<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"当前老师数量为："</span> <span class="token operator">&lt;&lt;</span> vTea<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	ifs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在有参构造中，调用初始化容器函数</p> 
<pre><code class="prism language-cpp"><span class="token comment">//有参构造(管理员姓名、密码)</span>
<span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">Manager</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> string pwd<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Pwd <span class="token operator">=</span> pwd<span class="token punctuation">;</span>

	<span class="token comment">//初始化容器，并获取到所有文件中的学生、老师</span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">initVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>测试，运行代码可以看到测试代码获取当前文件中的学生和教师数量<br> <img src="https://images2.imgbox.com/25/94/knqLMxI3_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="7222__995"></a>7.2.2.2 去重函数封装</h6> 
<p>在manager.h中添加成员函数bool checkRepeat(int id,int type);</p> 
<pre><code class="prism language-cpp"><span class="token comment">//检测去重，true代表重复，false代表不重复</span>
<span class="token keyword">bool</span> <span class="token function">checkRepeat</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token keyword">int</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在manager.cpp中是吸纳成员函数bool checkRepeat(int id,int type);</p> 
<pre><code class="prism language-cpp"><span class="token comment">//检测去重，true代表重复，false代表不重复</span>
<span class="token keyword">bool</span> <span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">checkRepeat</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token keyword">int</span> type<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Student<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> vStu<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> vStu<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">==</span> it<span class="token operator">-&gt;</span>m_Id<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Teacher<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> vTea<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> vTea<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">==</span> it<span class="token operator">-&gt;</span>m_EmpId<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h6><a id="7223__1032"></a>7.2.2.3 添加去重操作</h6> 
<p>在添加学生或者教职工是，检测是否有重复，代码如下</p> 
<pre><code class="prism language-cpp">
	string errorTip<span class="token punctuation">;</span><span class="token comment">//重复错误提示信息</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		fileName <span class="token operator">=</span> STUDENT_FILE<span class="token punctuation">;</span>
		tip <span class="token operator">=</span> <span class="token string">"请输入学号"</span><span class="token punctuation">;</span>
		errorTip <span class="token operator">=</span> <span class="token string">"学号重复，请重新输入！"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		fileName <span class="token operator">=</span> TEACHER_FILE<span class="token punctuation">;</span>
		tip <span class="token operator">=</span> <span class="token string">"请输入职工号"</span><span class="token punctuation">;</span>
		errorTip <span class="token operator">=</span> <span class="token string">"职工号重复，请重新输入！"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	ofs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> ios<span class="token double-colon punctuation">::</span>out <span class="token operator">|</span> ios<span class="token double-colon punctuation">::</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> id<span class="token punctuation">;</span>
	string name<span class="token punctuation">;</span>
	string pwd<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> tip <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cin <span class="token operator">&gt;&gt;</span> id<span class="token punctuation">;</span>
		<span class="token keyword">bool</span> ret <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">checkRepeat</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token comment">//有重复</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> errorTip <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>代码位置如图：<br> <img src="https://images2.imgbox.com/ea/53/ed5VtBnE_o.png" alt="在这里插入图片描述"></p> 
<p>测试效果：<br> <img src="https://images2.imgbox.com/d7/35/fkz6YBBS_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/46/ab/YRUT9Jex_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="7224__Bug_1077"></a>7.2.2.4 Bug解决</h6> 
<p>bug描述：</p> 
<ul><li>虽然可以检测重复账号，但是刚添加的账号由于没有更新到容器中，英雌不会做检测</li><li>导致刚加入的学生学号或者职工编号，再次添加时可以重复<br> 解决方案：</li><li>在每次添加时，重新初始化容器</li></ul> 
<p>在添加完毕后，加入代码：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//舒适化容器</span>
<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">initVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>添加位置如下：<br> <img src="https://images2.imgbox.com/b9/76/4GjLPpXk_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="73__1094"></a>7.3 显示账号</h4> 
<p><strong>功能描述：</strong></p> 
<ul><li>显示学生信息或者教师信息</li></ul> 
<h5><a id="731__1099"></a>7.3.1 显示功能实现</h5> 
<p>在Manager的showPerson成员函数中，实现显示账号功能，代码如下：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">printStudent</span><span class="token punctuation">(</span>Student<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"学号："</span> <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span>m_Id <span class="token operator">&lt;&lt;</span> <span class="token string">"  姓名："</span> <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span>m_Name <span class="token operator">&lt;&lt;</span> <span class="token string">"  密码："</span> <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span>m_Pwd <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">printTeacher</span><span class="token punctuation">(</span>Teacher<span class="token operator">&amp;</span> t<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"职工号："</span> <span class="token operator">&lt;&lt;</span> t<span class="token punctuation">.</span>m_EmpId <span class="token operator">&lt;&lt;</span> <span class="token string">"  姓名："</span> <span class="token operator">&lt;&lt;</span> t<span class="token punctuation">.</span>m_Name <span class="token operator">&lt;&lt;</span> <span class="token string">"  密码："</span> <span class="token operator">&lt;&lt;</span> t<span class="token punctuation">.</span>m_Pwd <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//查看账号</span>
<span class="token keyword">void</span> <span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">showPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请选择查看内容："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"1、查看所有学生"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"2、查看所有教师"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">int</span> select <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	cin <span class="token operator">&gt;&gt;</span> select<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"所有学生信息显示如下："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">for_each</span><span class="token punctuation">(</span>vStu<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vStu<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> printStudent<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"所有教师信息显示如下："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">for_each</span><span class="token punctuation">(</span>vTea<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vTea<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> printTeacher<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="732__1138"></a>7.3.2 测试</h5> 
<p><img src="https://images2.imgbox.com/8d/1f/SllaSu7W_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="74___1141"></a>7.4 查看机房</h4> 
<h5><a id="741__1142"></a>7.4.1 添加机房信息</h5> 
<p>案例需求中，机房总共有三个，其中一号机房容量20台机器，2号50台，3号100台<br> 我们可以将信息记录到computerRoom.txt中<br> <img src="https://images2.imgbox.com/c5/90/mnHxfezN_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="742__1146"></a>7.4.2 机房类创建</h5> 
<p>在头文件下创建新的文件：computerRoom.h<br> 并添加如下代码：</p> 
<pre><code class="prism language-cpp"><span class="token comment"></span>
<span class="token comment">///@brief computerRoom.h  机房信息类</span>
<span class="token comment">///@date 2022-12-13</span>
<span class="token comment">///@author zhichengMa</span>
<span class="token comment">/</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"identity.h"</span></span>

<span class="token comment">//机房类</span>
<span class="token keyword">class</span> <span class="token class-name">ComputerRoom</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">int</span> m_ComId<span class="token punctuation">;</span><span class="token comment">//机房编号</span>

	<span class="token keyword">int</span> m_MaxNum<span class="token punctuation">;</span><span class="token comment">//机房最大容量</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="743__1172"></a>7.4.3 初始化机房信息</h5> 
<p>存在Manager管理类下，添加机房的容器，用户保存机房信息</p> 
<pre><code class="prism language-cpp"><span class="token comment">//机房容器</span>
vector<span class="token operator">&lt;</span>ComputerRoom<span class="token operator">&gt;</span> vCom<span class="token punctuation">;</span>
</code></pre> 
<p>在Manager的有参构造中，追加如下代码，初始化机房信息</p> 
<pre><code class="prism language-cpp"><span class="token comment">//初始化容器，并获取到所有文件中的学生、老师</span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">initVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//获取机房信息</span>
	ifstream ifs<span class="token punctuation">;</span>
	ifs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>COMPUTER_FILE<span class="token punctuation">,</span> ios<span class="token double-colon punctuation">::</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>

	ComputerRoom c<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>ifs <span class="token operator">&gt;&gt;</span> c<span class="token punctuation">.</span>m_ComId <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span>m_MaxNum<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		vCom<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"当前机房数量为："</span> <span class="token operator">&lt;&lt;</span> vCom<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	ifs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>位置如图：<br> <img src="https://images2.imgbox.com/a6/a0/VRr3EN5W_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="744__1200"></a>7.4.4 显示机房信息</h5> 
<p>在Manager类的showComputer成员函数中添加如下代码：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//查看机房信息</span>
<span class="token keyword">void</span> <span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">showCompter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"机房信息如下："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>ComputerRoom<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> vCom<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> vCom<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"机房编号："</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-&gt;</span>m_ComId <span class="token operator">&lt;&lt;</span> <span class="token string">"  \t机房最大容量："</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-&gt;</span>m_MaxNum <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>测试机房显示：<br> <img src="https://images2.imgbox.com/8f/cf/OXnYSNEl_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="75__1219"></a>7.5 清空预约</h4> 
<p>功能描述：<br> 清空生成的order.txt预约文件</p> 
<h5><a id="751__1222"></a>7.5.1 清空功能实现</h5> 
<p>在Manager的cleanFile成员函数中添加代码：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//清空预约记录</span>
<span class="token keyword">void</span> <span class="token class-name">Manager</span><span class="token double-colon punctuation">::</span><span class="token function">cleanFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	ofstream <span class="token function">ofs</span><span class="token punctuation">(</span>ORDER_FILE<span class="token punctuation">,</span> ios<span class="token double-colon punctuation">::</span>trunc<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ofs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"预约清空成功！"</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>测试清空，可以随意写一写信息到order.txt中，然后调用cleanFIle后查看文件是否清空干净</p> 
<p><img src="https://images2.imgbox.com/ec/5f/SvYW405h_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3e/b0/sjoIz1Ru_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/39/8c/FqfpdrP5_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="8_1244"></a>8.学生模块</h3> 
<h4><a id="81__1245"></a>8.1 学生登录和注销</h4> 
<h5><a id="811__1246"></a>8.1.1 构造函数</h5> 
<ul><li>在Student类的构造函数中，初始化学生信息，代码如下：</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//有参构造</span>
<span class="token class-name">Student</span><span class="token double-colon punctuation">::</span><span class="token function">Student</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> string name<span class="token punctuation">,</span> string pwd<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Id <span class="token operator">=</span> id<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Pwd <span class="token operator">=</span> pwd<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="812__1259"></a>8.1.2 管理员子菜单</h5> 
<ul><li>在主系统文件中，当用户登录的是学生，添加学生菜单接口</li><li>将不同的分支选择提供出来 
  <ul><li>申请预约</li><li>查看我的预约</li><li>查看所有月月</li><li>取消预约</li><li>注销登录</li></ul> </li><li>实现注销功能</li></ul> 
<p>添加全局函数 void studentMenu(Identy * &amp;manager)代码如下：</p> 
<h5><a id="813__1272"></a>8.1.3 菜单功能实现</h5> 
<ul><li>在成员函数void Stuendt::openMenu()，代码如下</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//学生子菜单</span>
<span class="token keyword">void</span> <span class="token function">studentMenu</span><span class="token punctuation">(</span>Identity<span class="token operator">*</span><span class="token operator">&amp;</span> student<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//学生菜单</span>
	student<span class="token operator">-&gt;</span><span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	Student<span class="token operator">*</span> stu <span class="token operator">=</span> <span class="token punctuation">(</span>Student<span class="token operator">*</span><span class="token punctuation">)</span>student<span class="token punctuation">;</span>
	<span class="token keyword">int</span> select <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	cin <span class="token operator">&gt;&gt;</span> select<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//申请预约</span>
	<span class="token punctuation">{<!-- --></span>
		stu<span class="token operator">-&gt;</span><span class="token function">applyOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">//查看自身预约</span>
	<span class="token punctuation">{<!-- --></span>
		stu<span class="token operator">-&gt;</span><span class="token function">showMyOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token comment">//查看所有预约</span>
	<span class="token punctuation">{<!-- --></span>
		stu<span class="token operator">-&gt;</span><span class="token function">showAllOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token comment">//取消预约</span>
	<span class="token punctuation">{<!-- --></span>
		stu<span class="token operator">-&gt;</span><span class="token function">cancelOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">delete</span> student<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"学生注销成功！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<pre><code class="prism language-cpp"><span class="token comment">//菜单界面</span>
<span class="token keyword">void</span> <span class="token class-name">Student</span><span class="token double-colon punctuation">::</span><span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"===  欢迎学生代表:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Name <span class="token operator">&lt;&lt;</span> <span class="token string">"===登录 "</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入您的身份"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t ------------------------------\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 1、申请预约-------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |------ 2、查看我的预约 ----- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |------- 3、查看所有预约 ------ |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 4、取消预约 ------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |-------- 0、注销登录 ------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                             |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t ------------------------------\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请选择您的操作："</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="814__1337"></a>8.1.4 接口对接</h5> 
<ul><li>学生成功登录后，调用学生的子菜单页面</li><li>在学生登录分支中,添加如下代码</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//进入到学生身份的子菜单</span>
<span class="token function">studentMenu</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/5a/a1/3YszmRiu_o.png" alt="在这里插入图片描述"></p> 
<p>测试验证：<br> <img src="https://images2.imgbox.com/21/3b/KspzrUSi_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/36/37/QQoK7AuF_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="82__1353"></a>8.2 申请预约</h4> 
<h5><a id="821__1354"></a>8.2.1 获取机房信息</h5> 
<ul><li>在申请预约时，学生可以查看机房的信息，因此需要让学生获取机房信息<br> 在student.h中添加新的成员容器如下：</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//机房容器</span>
vector<span class="token operator">&lt;</span>ComputerRoom<span class="token operator">&gt;</span> vCom<span class="token punctuation">;</span>
</code></pre> 
<p>在学生的有参构造中追加如下代码：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//获取机房信息</span>
ifstream ifs<span class="token punctuation">;</span>
ifs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>COMPUTER_FILE<span class="token punctuation">,</span> ios<span class="token double-colon punctuation">::</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>

ComputerRoom c<span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>ifs <span class="token operator">&gt;&gt;</span> c<span class="token punctuation">.</span>m_ComId <span class="token operator">&amp;&amp;</span> ifs  <span class="token operator">&gt;&gt;</span> c<span class="token punctuation">.</span>m_MaxNum<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	vCom<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

ifs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>代码位置如图：</p> 
<p><img src="https://images2.imgbox.com/a0/fe/XYkio2DT_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="822__1382"></a>8.2.2 预约功能实现</h5> 
<p>在student.cpp中实现成员函数 void Student::applyOrder()</p> 
<pre><code class="prism language-cpp"><span class="token comment">//申请预约</span>
<span class="token keyword">void</span> <span class="token class-name">Student</span><span class="token double-colon punctuation">::</span><span class="token function">applyOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"机房开放时间一般为周一至周五！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入预约的时间："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"1、周一"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"2、周二"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"3、周三"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"4、周四"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"5、周五"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">int</span> date <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> interval <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> room <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cin <span class="token operator">&gt;&gt;</span> date<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>date <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> date <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"输入有误，请重新输入！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入预约的时间段："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"1、上午"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"2、下午"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cin <span class="token operator">&gt;&gt;</span> interval<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>interval <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> interval <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"输入时间段有误，请重新输入！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请选择机房："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"1号机房容量"</span> <span class="token operator">&lt;&lt;</span> vCom<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>m_MaxNum <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"2号机房容量"</span> <span class="token operator">&lt;&lt;</span> vCom<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>m_MaxNum <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"3号机房容量"</span> <span class="token operator">&lt;&lt;</span> vCom<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>m_MaxNum <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cin <span class="token operator">&gt;&gt;</span> room<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>room <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> room <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"输入机房信息有误，请重新输入！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"预约成功，审核中！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	ofstream <span class="token function">ofs</span><span class="token punctuation">(</span>ORDER_FILE<span class="token punctuation">,</span> ios<span class="token double-colon punctuation">::</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ofs <span class="token operator">&lt;&lt;</span> <span class="token string">"date:"</span> <span class="token operator">&lt;&lt;</span> date <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
	ofs <span class="token operator">&lt;&lt;</span> <span class="token string">"interval:"</span> <span class="token operator">&lt;&lt;</span> interval <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
	ofs <span class="token operator">&lt;&lt;</span> <span class="token string">"stuId:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Id <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
	ofs <span class="token operator">&lt;&lt;</span> <span class="token string">"stuName:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Name <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
	ofs <span class="token operator">&lt;&lt;</span> <span class="token string">"roomId:"</span> <span class="token operator">&lt;&lt;</span> room <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
	ofs <span class="token operator">&lt;&lt;</span> <span class="token string">"status:"</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span><span class="token comment">// 1-审核中</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>预约测试：<br> <img src="https://images2.imgbox.com/06/e4/f8UBlhGB_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/dc/c7/8hXwYjbb_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="83__1456"></a>8.3 显示预约</h4> 
<h5><a id="831__1457"></a>8.3.1 创建预约类</h5> 
<p>功能描述：<br> 显示预约记录时，需要从文件中获取所有记录用于显示，创建预约类来管理记录以及更新记录<br> 在头文件基于稳健下分别创建<strong>orderFile.h</strong> 和<strong>orderFile.cpp</strong> 文件<br> orderFile.h中添加如下代码</p> 
<pre><code class="prism language-cpp"><span class="token comment"></span>
<span class="token comment">///@brief orderFile.h  预约类</span>
<span class="token comment">///@date 2022-12-10</span>
<span class="token comment">///@author zhichengMa</span>
<span class="token comment">/</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;map&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"globalFile.h"</span></span>

<span class="token keyword">class</span> <span class="token class-name">OrderFile</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>

	<span class="token comment">//构造函数</span>
	<span class="token function">OrderFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//更新预约记录</span>
	<span class="token keyword">void</span> <span class="token function">uodateOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//记录的容器，key - 记录的条数，value - 具体记录的键值对信息</span>
	map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;&gt;</span> m_orderData<span class="token punctuation">;</span>

	<span class="token comment">//预约记录条数</span>
	<span class="token keyword">int</span> m_Size<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> 
<p>构造函数中获取所有信息，并存放在容器中，构造函数添加如下代码：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//构造函数</span>
<span class="token class-name">OrderFile</span><span class="token double-colon punctuation">::</span><span class="token function">OrderFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	ifstream ifs<span class="token punctuation">;</span>
	ifs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>ORDER_FILE<span class="token punctuation">,</span> ios<span class="token double-colon punctuation">::</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>

	string date<span class="token punctuation">;</span><span class="token comment">//日期</span>
	string interval<span class="token punctuation">;</span><span class="token comment">//时间段</span>
	string stuId<span class="token punctuation">;</span><span class="token comment">//学生编号</span>
	string stuName<span class="token punctuation">;</span><span class="token comment">//学生姓名</span>
	string roomId<span class="token punctuation">;</span><span class="token comment">//机房编号</span>
	string status<span class="token punctuation">;</span><span class="token comment">//预约状态</span>

	<span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//预约记录数</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span>ifs <span class="token operator">&gt;&gt;</span> date <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> interval <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> stuId <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> stuName <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> roomId <span class="token operator">&amp;&amp;</span> ifs <span class="token operator">&gt;&gt;</span> status<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//测试代码</span>
		<span class="token comment">/*
		cout &lt;&lt; date &lt;&lt; endl;
		cout &lt;&lt; interval &lt;&lt; endl;
		cout &lt;&lt; stuId &lt;&lt; endl;
		cout &lt;&lt; stuName &lt;&lt; endl;
		cout &lt;&lt; roomId &lt;&lt; endl;
		cout &lt;&lt; status &lt;&lt; endl;
		*/</span>

		string key<span class="token punctuation">;</span>
		string value<span class="token punctuation">;</span>
		map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;</span> m<span class="token punctuation">;</span>

		<span class="token keyword">int</span> pos <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			key <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			value <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>pos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> date<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			m<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		pos <span class="token operator">=</span> interval<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			key <span class="token operator">=</span> interval<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			value <span class="token operator">=</span> interval<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>pos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> interval<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			m<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		pos <span class="token operator">=</span> stuId<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			key <span class="token operator">=</span> stuId<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			value <span class="token operator">=</span> stuId<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>pos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> stuId<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			m<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		pos <span class="token operator">=</span> stuName<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			key <span class="token operator">=</span> stuName<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			value <span class="token operator">=</span> stuName<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>pos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> stuName<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			m<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		pos <span class="token operator">=</span> roomId<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			key <span class="token operator">=</span> roomId<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			value <span class="token operator">=</span> roomId<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>pos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> roomId<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			m<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		pos <span class="token operator">=</span> status<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			key <span class="token operator">=</span> status<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			value <span class="token operator">=</span> status<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>pos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> status<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			m<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">this</span><span class="token operator">-&gt;</span>m_orderData<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Size<span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Size<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	ifs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//测试最大的容器</span>
	<span class="token comment">/*
	for (map&lt;int, map&lt;string, string&gt;&gt;::iterator it = m_orderData.begin(); it != m_orderData.end(); it++)
	{
		cout &lt;&lt; "记录的条数为：" &lt;&lt; it-&gt;first  &lt;&lt; endl;
		for (map&lt;string, string&gt;::iterator mit = (*it).second.begin(); mit != it-&gt;second.end(); mit++)
		{
			cout &lt;&lt; "key = " &lt;&lt; mit-&gt;first &lt;&lt; "value = " &lt;&lt; mit-&gt;second &lt;&lt; "  ";
		}
		cout &lt;&lt; endl;
	}
	*/</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>更新预约记录的成员函数updateOrder代码如下：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//更新预约记录</span>
<span class="token keyword">void</span> <span class="token class-name">OrderFile</span><span class="token double-colon punctuation">::</span><span class="token function">uodateOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	ofstream <span class="token function">ofs</span><span class="token punctuation">(</span>ORDER_FILE<span class="token punctuation">,</span> ios<span class="token double-colon punctuation">::</span>out <span class="token operator">|</span> ios<span class="token double-colon punctuation">::</span>trunc<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m_Size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		ofs <span class="token operator">&lt;&lt;</span> <span class="token string">"date:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"date"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
		ofs <span class="token operator">&lt;&lt;</span> <span class="token string">"interval:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"interval"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
		ofs <span class="token operator">&lt;&lt;</span> <span class="token string">"stuId:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"stuId"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
		ofs <span class="token operator">&lt;&lt;</span> <span class="token string">"stuName:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"stuName"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
		ofs <span class="token operator">&lt;&lt;</span> <span class="token string">"roomId:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"roomId"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
		ofs <span class="token operator">&lt;&lt;</span> <span class="token string">"status:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	ofs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="832__1621"></a>8.3.2 显示自身预约</h5> 
<p>首先我们先添加几条预约记录，可以用程序添加或者直接修改order.txt文件<br> order.txt文件内容如下：<br> <img src="https://images2.imgbox.com/8d/53/OwOBCtTQ_o.png" alt="在这里插入图片描述"></p> 
<p>在Student类的void Student::showMyOrder()成员函数中，添加如下代码：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//查看我的预约</span>
<span class="token keyword">void</span> <span class="token class-name">Student</span><span class="token double-colon punctuation">::</span><span class="token function">showMyOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	OrderFile of<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_Size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"无预约记录！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> of<span class="token punctuation">.</span>m_Size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">atoi</span><span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"stuId"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Id<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"预约日期：周"</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"date"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"时段："</span> <span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"interval"</span><span class="token punctuation">]</span>  <span class="token operator">==</span> <span class="token string">"1"</span> <span class="token operator">?</span> <span class="token string">"上午"</span> <span class="token operator">:</span> <span class="token string">"下午"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"机房："</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"roomId"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			string status <span class="token operator">=</span> <span class="token string">"状态："</span><span class="token punctuation">;</span><span class="token comment">//0-取消预约，1-审核中，2-已预约，3-预约失败</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"1"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				status <span class="token operator">+=</span> <span class="token string">"审核中"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"2"</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				status <span class="token operator">+=</span> <span class="token string">"已预约"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"3"</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				status <span class="token operator">+=</span> <span class="token string">"审核为未通过，预约失败"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				status <span class="token operator">+=</span> <span class="token string">"预约已取消"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			cout <span class="token operator">&lt;&lt;</span> status <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>测试结果：<br> <img src="https://images2.imgbox.com/a6/20/SgA8hLR3_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="833__1676"></a>8.3.3 显示所有预约</h5> 
<p>在Student的void Student::showAllOrder()成员函数中添加如下代码：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//查看所有预约</span>
<span class="token keyword">void</span> <span class="token class-name">Student</span><span class="token double-colon punctuation">::</span><span class="token function">showAllOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	OrderFile of<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_Size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"无预约记录！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> of<span class="token punctuation">.</span>m_Size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> i <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"预约日期：周"</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"date"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"时段："</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"interval"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"1"</span> <span class="token operator">?</span> <span class="token string">"上午"</span> <span class="token operator">:</span> <span class="token string">"下午"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"学号："</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"stuId"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"姓名："</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"stuName"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"机房："</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"roomId"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
		string status <span class="token operator">=</span> <span class="token string">"状态："</span><span class="token punctuation">;</span><span class="token comment">//0-取消预约，1-审核中，2-已预约，3-预约失败</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"1"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			status <span class="token operator">+=</span> <span class="token string">"审核中"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"2"</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			status <span class="token operator">+=</span> <span class="token string">"已预约"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"3"</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			status <span class="token operator">+=</span> <span class="token string">"审核为未通过，预约失败"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			status <span class="token operator">+=</span> <span class="token string">"预约已取消"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		cout <span class="token operator">&lt;&lt;</span> status <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		
	<span class="token punctuation">}</span>

	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>测试结果：<br> <img src="https://images2.imgbox.com/bb/80/WiSXzSEE_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="84___1726"></a>8.4 取消预约</h4> 
<p>在Student类的void Student::cancleOrder()成员函数中，添加如下代码：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//取消预约</span>
<span class="token keyword">void</span> <span class="token class-name">Student</span><span class="token double-colon punctuation">::</span><span class="token function">cancelOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	OrderFile of<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_Size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"无预约记录！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"审核中或者预约成功的记录可以取消，请输入取消的记录："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> v<span class="token punctuation">;</span>
	<span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> of<span class="token punctuation">.</span>m_Size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Id <span class="token operator">==</span> <span class="token function">atoi</span><span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"stuId"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"1"</span> <span class="token operator">||</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"2"</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
				cout <span class="token operator">&lt;&lt;</span> index<span class="token operator">++</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"、 "</span><span class="token punctuation">;</span>
				cout <span class="token operator">&lt;&lt;</span> <span class="token string">"预约日期：周"</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"date"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				cout <span class="token operator">&lt;&lt;</span> <span class="token string">"时段："</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"interval"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"1"</span> <span class="token operator">?</span> <span class="token string">"上午"</span> <span class="token operator">:</span> <span class="token string">"下午"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				cout <span class="token operator">&lt;&lt;</span> <span class="token string">"机房："</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"roomId"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				string status <span class="token operator">=</span> <span class="token string">"状态："</span><span class="token punctuation">;</span><span class="token comment">//0-取消预约，1-审核中，2-已预约，3-预约失败</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"1"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					status <span class="token operator">+=</span> <span class="token string">"审核中"</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"2"</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					status <span class="token operator">+=</span> <span class="token string">"预约成功"</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				
				cout <span class="token operator">&lt;&lt;</span> status <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入取消的记录，0表示返回"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">int</span> select <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cin <span class="token operator">&gt;&gt;</span> select<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> select <span class="token operator">&lt;=</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>select <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
				of<span class="token punctuation">.</span><span class="token function">uodateOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				cout <span class="token operator">&lt;&lt;</span> <span class="token string">"已取消预约"</span><span class="token punctuation">;</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"输入有误，请重新输入"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>测试结果：<br> <img src="https://images2.imgbox.com/97/5c/Qz1BHM15_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="9_1801"></a>9.教师模块</h3> 
<h4><a id="91__1802"></a>9.1 教师登录和注销</h4> 
<h5><a id="911__1803"></a>9.1.1 构造函数</h5> 
<ul><li>在Teacher类的构造函数中，初始化教师信息</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//有参构造（职工编号，姓名，密码）</span>
<span class="token class-name">Teacher</span><span class="token double-colon punctuation">::</span><span class="token function">Teacher</span><span class="token punctuation">(</span><span class="token keyword">int</span> empId<span class="token punctuation">,</span> string name<span class="token punctuation">,</span> string pwd<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span>m_EmpId <span class="token operator">=</span> empId<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Pwd <span class="token operator">=</span> pwd<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="912__1816"></a>9.1.2 教师子菜单</h5> 
<ul><li>在主系统文件中，当用户登录的是教师，添加教师相关菜单接口</li><li>将不同的操作分支提供出来 
  <ul><li>查看所有预约</li><li>审核预约</li><li>注销登录</li></ul> </li><li>实现注销功能</li></ul> 
<p>添加全局函数void TeacherMenu(Person * manager)代码如下：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//教师子菜单</span>
<span class="token keyword">void</span> <span class="token function">TeacherMenu</span><span class="token punctuation">(</span>Identity<span class="token operator">*</span><span class="token operator">&amp;</span> teacher<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//教师菜单</span>
		teacher<span class="token operator">-&gt;</span><span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		Teacher<span class="token operator">*</span> tea <span class="token operator">=</span> <span class="token punctuation">(</span>Teacher<span class="token operator">*</span><span class="token punctuation">)</span>teacher<span class="token punctuation">;</span>

		<span class="token keyword">int</span> select <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		cin <span class="token operator">&gt;&gt;</span> select<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//查看所有预约</span>
			tea<span class="token operator">-&gt;</span><span class="token function">showAllOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//审核预约</span>
			tea<span class="token operator">-&gt;</span><span class="token function">validOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">delete</span> teacher<span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"注销成功！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h5><a id="913__1864"></a>9.1.3 菜单功能实现</h5> 
<ul><li>在成员函数void Teacher::openMenu()中添加如下代码：</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//菜单界面</span>
<span class="token keyword">void</span> <span class="token class-name">Teacher</span><span class="token double-colon punctuation">::</span><span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"===  欢迎教师:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_Name <span class="token operator">&lt;&lt;</span> <span class="token string">"===登录 "</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入您的操作"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t ----------------------------------\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                                  |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |---------- 1、查看所有预约 ------ |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                                  |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |---------- 2、审核预约 ---------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                                  |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |---------- 0、注销登录 ---------- |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t |                                  |\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\t\t ------------------------------------\n"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请选择您的操作："</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h5><a id="914__1888"></a>9.1.4 接口对接测试</h5> 
<ul><li>教师登录成功后，调用教师的子菜单界面</li><li>在教师登录分支中添加如下代码</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//进入教师的子菜单界面</span>
<span class="token function">TeacherMenu</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>添加位置：<br> <img src="https://images2.imgbox.com/56/6c/KyEh0ZR2_o.png" alt="在这里插入图片描述"></p> 
<p>测试结果：<br> <img src="https://images2.imgbox.com/4a/f2/zBfggN8n_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="92__1903"></a>9.2 查看所有预约</h4> 
<h5><a id="921__1904"></a>9.2.1 查看所有预约是功能实现</h5> 
<p>该功能与学生身份的查看所有预约相似，用于显示所有的预约记录<br> 在Teacher.cpp中实现成员函数void Teacher::showAllOrder()</p> 
<pre><code class="prism language-cpp"><span class="token comment">//查看所有预约</span>
<span class="token keyword">void</span> <span class="token class-name">Teacher</span><span class="token double-colon punctuation">::</span><span class="token function">showAllOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	OrderFile of<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_Size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"无预约记录"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> of<span class="token punctuation">.</span>m_Size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> i <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"预约日期：周"</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"date"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"时段："</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"interval"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"1"</span> <span class="token operator">?</span> <span class="token string">"上午"</span> <span class="token operator">:</span> <span class="token string">"下午"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"学号："</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"stuId"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"姓名："</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"stuName"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"机房："</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"roomId"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
		string status <span class="token operator">=</span> <span class="token string">"状态："</span><span class="token punctuation">;</span><span class="token comment">//0-取消预约，1-审核中，2-已预约，3-预约失败</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"1"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			status <span class="token operator">+=</span> <span class="token string">"审核中"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"2"</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			status <span class="token operator">+=</span> <span class="token string">"已预约"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"3"</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			status <span class="token operator">+=</span> <span class="token string">"审核为未通过，预约失败"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			status <span class="token operator">+=</span> <span class="token string">"预约已取消"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		cout <span class="token operator">&lt;&lt;</span> status <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token punctuation">}</span>

	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>测试结果：<br> <img src="https://images2.imgbox.com/be/df/WiywFNNn_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="93__1957"></a>9.3 审核预约</h4> 
<h5><a id="931__1958"></a>9.3.1 审核功能实现</h5> 
<p>功能描述：<br> 教师审核学生的粤语，依据实际情况审核<br> 在Teacherl.cpp中实现成员函数void Teacher::validOrder()<br> 代码如下：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//审核预约</span>
<span class="token keyword">void</span> <span class="token class-name">Teacher</span><span class="token double-colon punctuation">::</span><span class="token function">validOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	OrderFile of<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_Size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"无预约记录"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"待审批预约记录如下："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> v<span class="token punctuation">;</span>
	<span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span>of<span class="token punctuation">.</span>m_Size <span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"1"</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token operator">++</span>index <span class="token operator">&lt;&lt;</span> <span class="token string">"、 "</span><span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"预约日期：周"</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"date"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"时段："</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"interval"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"1"</span> <span class="token operator">?</span> <span class="token string">"上午"</span> <span class="token operator">:</span> <span class="token string">"下午"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"学号："</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"stuId"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"姓名："</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"stuName"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"机房："</span> <span class="token operator">&lt;&lt;</span> of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"roomId"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
			string status <span class="token operator">=</span> <span class="token string">"状态："</span><span class="token punctuation">;</span><span class="token comment">//0-取消预约，1-审核中，2-已预约，3-预约失败</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"1"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				status <span class="token operator">+=</span> <span class="token string">"审核中"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			cout <span class="token operator">&lt;&lt;</span> status <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入审核的预约记录，0代表返回"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">int</span> select <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cin <span class="token operator">&gt;&gt;</span> select<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>select <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入审核结果"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"1、通过"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"2、不通过"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			cin <span class="token operator">&gt;&gt;</span> ret<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>v<span class="token punctuation">[</span>select <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token string">"2"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				of<span class="token punctuation">.</span>m_orderData<span class="token punctuation">[</span>v<span class="token punctuation">[</span>select <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"-1"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			of<span class="token punctuation">.</span><span class="token function">uodateOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"审核完毕！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"输入有误，请重新输入"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>测试结果：<br> <img src="https://images2.imgbox.com/3d/da/JepkOGpH_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="10_2040"></a>10.服务器上编译运行</h3> 
<h4><a id="101__2041"></a>10.1 服务器上创建目录并上传程序</h4> 
<p>创建文件夹MachinRoom，并在文件夹中创建lib、include、src</p> 
<ul><li>lib:用于存放生成的动态库</li><li>include:用于存放头文件</li><li>src：用于存放源码</li></ul> 
<p>将程序和头文件都上传到src下：<br> <img src="https://images2.imgbox.com/86/5f/VeVWrPXy_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c2/ab/tPBDHfIg_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="102__2052"></a>10.2 编译生成动态库</h4> 
<ol><li>gcc获得.o文件，得到和位置无关的代码</li></ol> 
<pre><code class="prism language-powershell">g+<span class="token operator">+</span> <span class="token operator">-</span>c <span class="token operator">-</span>fpic teacher<span class="token punctuation">.</span><span class="token function">cpp</span> student<span class="token punctuation">.</span><span class="token function">cpp</span> orderFile<span class="token punctuation">.</span><span class="token function">cpp</span> manager<span class="token punctuation">.</span><span class="token function">cpp</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/81/97/thH5rc8R_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>gcc 得到动态库</li></ol> 
<pre><code class="prism language-powershell">g+<span class="token operator">+</span> <span class="token operator">-</span>shared teacher<span class="token punctuation">.</span>o student<span class="token punctuation">.</span>o orderFile<span class="token punctuation">.</span>o manager<span class="token punctuation">.</span>o <span class="token operator">-</span>o libmachine_room<span class="token punctuation">.</span>so
</code></pre> 
<p><img src="https://images2.imgbox.com/5f/02/1rAQjbCG_o.png" alt="在这里插入图片描述"><br> 3. 将生成的动态库文件libmachine_room.so放到lib目录下<br> <img src="https://images2.imgbox.com/4c/82/LZVo7ubM_o.png" alt="在这里插入图片描述"></p> 
<ol start="4"><li>将该lib目录添加到环境变量中<br> <img src="https://images2.imgbox.com/0d/41/yhtec1tr_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d9/6e/og5vVC2W_o.png" alt="在这里插入图片描述"></li></ol> 
<h4><a id="10_2076"></a>10.编译主程序并运行</h4> 
<ol><li>编译主程序文件</li></ol> 
<pre><code class="prism language-powershell"> g+<span class="token operator">+</span> MachineRoomReservation<span class="token punctuation">.</span><span class="token function">cpp</span> <span class="token operator">-</span>o main <span class="token operator">-</span>I <span class="token punctuation">.</span><span class="token operator">/</span>include/ <span class="token operator">-</span>L lib <span class="token operator">-</span>l  machine_room
</code></pre> 
<p><img src="https://images2.imgbox.com/4a/4c/C3Oyubrj_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>运行程序进行测试</li></ol> 
<pre><code class="prism language-powershell"><span class="token punctuation">.</span><span class="token operator">/</span>main
</code></pre> 
<p><img src="https://images2.imgbox.com/1d/c4/5x9x30qN_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/31/8e/vt9Nge3s_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ae/3d/6Iu2p1cZ_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d9135ce753335c505dd97179cb5fec28/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">用JavaScript写代码将硬盘序列号从16进制字符串转换为ASCII字符串，兼谈EditPlus和Edge浏览器对JavaScript脚本支持的一点差别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/741e2427e574a80da42564d7eff9fbce/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">论文写作总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>