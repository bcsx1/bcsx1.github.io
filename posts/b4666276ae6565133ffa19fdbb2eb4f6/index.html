<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>脚本实现Oracle19c_pdb单实例自动安装部署 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="脚本实现Oracle19c_pdb单实例自动安装部署" />
<meta property="og:description" content="项目地址：Oracle19c_pdb_autoinstall
脚本使用说明具体请查看github上的README.md，使用上有什么问题，请反馈问题到我邮箱，谢谢！！
说明：脚本已经配置oracle服务自启动，并配置为系统服务，启动与停止时使用root用户操作
停止 # service oracle stop 启动 # service oracle start oracle19c（12.2.0.3）版本在linux系统环境的使用说明：
The following Linux x86-64 kernels are supported:
1、Oracle Linux 7.4 with the Unbreakable Enterprise Kernel 4: 4.1.12-112.16.7.el7uek.x86_64 or later
2、Oracle Linux 7.4 with the Unbreakable Enterprise Kernel 5: 4.14.35-1818.1.6.el7uek.x86_64 or later
3、Oracle Linux 7.4 with the Red Hat Compatible kernel: 3.10.0-693.5.2.0.1.el7.x86_64 or later
4、Red Hat Enterprise Linux 7.4: 3.10.0-693.5.2.0.1.el7.x86_64 or later
5、SUSE Linux Enterprise Server 12 SP3: 4." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/b4666276ae6565133ffa19fdbb2eb4f6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-19T20:07:14+08:00" />
<meta property="article:modified_time" content="2021-01-19T20:07:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">脚本实现Oracle19c_pdb单实例自动安装部署</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>项目地址：<a href="https://github.com/domdanrtsey/Oracle19c_pdb_autoinstall">Oracle19c_pdb_autoinstall</a><br> 脚本使用说明具体请查看github上的README.md，使用上有什么问题，请反馈问题到我邮箱，谢谢！！<br> 说明：脚本已经配置oracle服务自启动，并配置为系统服务，启动与停止时使用root用户操作</p> 
<pre><code class="prism language-powershell">停止
<span class="token comment"># service oracle stop</span>
启动
<span class="token comment"># service oracle start</span>
</code></pre> 
<p>oracle19c（12.2.0.3）版本在linux系统环境的使用说明：</p> 
<p>The following Linux x86-64 kernels are supported:<br> 1、Oracle Linux 7.4 with the Unbreakable Enterprise Kernel 4: 4.1.12-112.16.7.el7uek.x86_64 or later<br> 2、Oracle Linux 7.4 with the Unbreakable Enterprise Kernel 5: 4.14.35-1818.1.6.el7uek.x86_64 or later<br> 3、Oracle Linux 7.4 with the Red Hat Compatible kernel: 3.10.0-693.5.2.0.1.el7.x86_64 or later<br> 4、Red Hat Enterprise Linux 7.4: 3.10.0-693.5.2.0.1.el7.x86_64 or later<br> 5、SUSE Linux Enterprise Server 12 SP3: 4.4.103-92.56-default or later</p> 
<p>以下为脚本所有内容，请参阅！</p> 
<pre><code class="prism language-powershell"><span class="token comment">#!/bin/bash</span>
<span class="token comment">#script_name: oracle19c_pdb_install.sh</span>
<span class="token comment">#Author: Danrtsey.Shun</span>
<span class="token comment">#Email:mydefiniteaim@126.com</span>
<span class="token comment">#auto_install_oracle19c version=12.2.0.3</span>
<span class="token comment">####################  Steup 1 Install oracle software ####################</span>
<span class="token comment"># attentions1:</span>
<span class="token comment"># 1.上传19c软件安装包至随意路径下,脚本提示路径是 /opt</span>
<span class="token comment">#</span>
<span class="token comment"># LINUX.X64_193000_db_home.zip</span>
<span class="token comment">#</span>
<span class="token comment"># 2.预设oracle用户的密码为 Danrtsey.com 请根据需要修改</span>
<span class="token comment">#####################################</span>
<span class="token comment">#ORACLE_OS_PWD=                     #</span>
<span class="token comment">#if [ "$ORACLE_OS_PWD" = "" ]; then #</span>
<span class="token comment">#    ORACLE_OS_PWD="Danrtsey.com"   #</span>
<span class="token comment">#fi                                 #</span>
<span class="token comment">#####################################</span>
<span class="token comment"># 3.选择数据库字符集与国家字符集</span>
<span class="token comment"># CharacterSet: ZHS16GBK or AL32UTF8</span>
<span class="token comment"># NationalCharacterSet: AL16UTF16 or UTF8</span>
<span class="token comment"># 4.执行</span>
<span class="token comment"># chmod + oracle19c_pdb_install.sh</span>
<span class="token comment"># sh -x oracle19c_pdb_install.sh</span>
<span class="token comment">#</span>
<span class="token comment">#################### Steup 2 Install oracle listener &amp; dbca  ####################</span>
<span class="token comment"># attentions2:</span>
<span class="token comment">########################################</span>
<span class="token comment"># 1.according to the different environment to set the processes &amp;&amp; sessions value</span>
<span class="token comment"># alter system set processes=1000 scope=spfile;</span>
<span class="token comment"># alter system set sessions=1522 scope=spfile;</span>
<span class="token comment">########################################</span>

export PATH=<span class="token variable">$PATH</span>
<span class="token comment">#Source function library.</span>
<span class="token punctuation">.</span> <span class="token operator">/</span>etc<span class="token operator">/</span>init<span class="token punctuation">.</span>d<span class="token operator">/</span>functions

<span class="token comment">#Require root to run this script.</span>
uid=`id <span class="token punctuation">|</span> cut <span class="token operator">-</span>d\<span class="token punctuation">(</span> <span class="token operator">-</span>f1 <span class="token punctuation">|</span> cut <span class="token operator">-</span>d= <span class="token operator">-</span>f2`
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$uid</span> <span class="token operator">-ne</span> 0 <span class="token punctuation">]</span><span class="token punctuation">;</span>then
  action <span class="token string">"Please run this script as root."</span> <span class="token operator">/</span>bin<span class="token operator">/</span>false
  <span class="token keyword">exit</span> 1
fi

<span class="token comment">##set oracle password</span>
ORACLE_OS_PWD=
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$ORACLE_OS_PWD</span>"</span> = <span class="token string">""</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then
    ORACLE_OS_PWD=<span class="token string">"Danrtsey.com"</span>
fi

<span class="token comment">###install require packages</span>
<span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[32moracle install dependency \033[05m...\033[0m"</span>
yum <span class="token operator">-</span>y install epel<span class="token operator">-</span>release
<span class="token function">cp</span> <span class="token operator">/</span>etc<span class="token operator">/</span>yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d<span class="token operator">/</span>epel<span class="token punctuation">.</span>repo <span class="token operator">/</span>etc<span class="token operator">/</span>yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d<span class="token operator">/</span>epel<span class="token punctuation">.</span>repo<span class="token punctuation">.</span>bak
<span class="token function">cp</span> <span class="token operator">/</span>etc<span class="token operator">/</span>yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d<span class="token operator">/</span>epel<span class="token operator">-</span>testing<span class="token punctuation">.</span>repo <span class="token operator">/</span>etc<span class="token operator">/</span>yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d<span class="token operator">/</span>epel<span class="token operator">-</span>testing<span class="token punctuation">.</span>repo<span class="token punctuation">.</span>bak
sed <span class="token operator">-</span>e <span class="token string">'s!^metalink=!#metalink=!g'</span> \
    <span class="token operator">-</span>e <span class="token string">'s!^#baseurl=!baseurl=!g'</span> \
    <span class="token operator">-</span>e <span class="token string">'s!//download\.fedoraproject\.org/pub!//mirrors.tuna.tsinghua.edu.cn!g'</span> \
    <span class="token operator">-</span>e <span class="token string">'s!http://mirrors\.tuna!https://mirrors.tuna!g'</span> \
    <span class="token operator">-</span>i <span class="token operator">/</span>etc<span class="token operator">/</span>yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d<span class="token operator">/</span>epel<span class="token punctuation">.</span>repo <span class="token operator">/</span>etc<span class="token operator">/</span>yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d<span class="token operator">/</span>epel<span class="token operator">-</span>testing<span class="token punctuation">.</span>repo
yum makecache fast

yum <span class="token operator">-</span>y install gcc gcc<span class="token operator">-</span>c+<span class="token operator">+</span> make binutils compat<span class="token operator">-</span>libstdc+<span class="token operator">+</span><span class="token operator">-</span>33 elfutils<span class="token operator">-</span>libelf elfutils<span class="token operator">-</span>libelf<span class="token operator">-</span>devel glibc glibc<span class="token operator">-</span>common \
  glibc<span class="token operator">-</span>devel libaio libaio<span class="token operator">-</span>devel libgcc libstdc+<span class="token operator">+</span> libstdc+<span class="token operator">+</span><span class="token operator">-</span>devel unixODBC unixODBC<span class="token operator">-</span>devel elfutils<span class="token operator">-</span>libelf<span class="token operator">-</span>devel<span class="token operator">-</span>static \
  numactl<span class="token operator">-</span>devel sysstat pcre<span class="token operator">-</span>devel readline compat<span class="token operator">-</span>libcap1 libXi libXtst libxcb ksh \
  zip unzip tree vim lrzsz net<span class="token operator">-</span>tools wget ntpdate ntp
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> $? == 0 <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>then
  <span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[32myum install dependency successed\033[0m"</span>
<span class="token keyword">else</span>
  <span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[32myum install dependency faild, pls check your network\033[0m"</span>
  <span class="token keyword">exit</span>
fi

<span class="token comment">###set firewalld &amp; optimize the os system &amp; set selinux</span>
<span class="token function">echo</span> <span class="token string">"################# Optimize system parameters  ##########################"</span>
firewall_status=`systemctl status firewalld <span class="token punctuation">|</span> grep Active <span class="token punctuation">|</span>awk <span class="token string">'{print $3}'</span>`
<span class="token keyword">if</span> <span class="token punctuation">[</span> $<span class="token punctuation">{<!-- --></span>firewall_status<span class="token punctuation">}</span> == <span class="token string">"(running)"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
  firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>permanent <span class="token operator">--</span>zone=public <span class="token operator">--</span>add<span class="token operator">-</span>port=1521<span class="token operator">/</span>tcp &amp;&amp; firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>reload
<span class="token keyword">else</span>
  systemctl <span class="token function">start</span> firewalld
  firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>permanent <span class="token operator">--</span>zone=public <span class="token operator">--</span>add<span class="token operator">-</span>port=1521<span class="token operator">/</span>tcp &amp;&amp; firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>reload
fi

SELINUX=`<span class="token function">cat</span> <span class="token operator">/</span>etc<span class="token operator">/</span>selinux<span class="token operator">/</span>config <span class="token punctuation">|</span>grep ^SELINUX=<span class="token punctuation">|</span>awk <span class="token operator">-</span>F <span class="token string">'='</span> <span class="token string">'{print $2}'</span>`
<span class="token keyword">if</span> <span class="token punctuation">[</span> $<span class="token punctuation">{<!-- --></span>SELINUX<span class="token punctuation">}</span> == <span class="token string">"enforcing"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
  sed <span class="token operator">-</span>i <span class="token string">"s@SELINUX=enforcing@SELINUX=disabled@g"</span> <span class="token operator">/</span>etc<span class="token operator">/</span>selinux<span class="token operator">/</span>config
<span class="token keyword">else</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> $<span class="token punctuation">{<!-- --></span>SELINUX<span class="token punctuation">}</span> == <span class="token string">"permissive"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
    sed <span class="token operator">-</span>i <span class="token string">"s@SELINUX=permissive@SELINUX=disabled@g"</span> <span class="token operator">/</span>etc<span class="token operator">/</span>selinux<span class="token operator">/</span>config
  fi
fi
setenforce 0

<span class="token function">echo</span> <span class="token string">"================更改为中文字符集================="</span>
  \<span class="token function">cp</span> <span class="token operator">/</span>etc<span class="token operator">/</span>locale<span class="token punctuation">.</span>conf  <span class="token operator">/</span>etc<span class="token operator">/</span>locale<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>$<span class="token punctuation">(</span>date <span class="token operator">+</span><span class="token operator">%</span>F<span class="token punctuation">)</span>
<span class="token function">cat</span> &gt;&gt;<span class="token operator">/</span>etc<span class="token operator">/</span>locale<span class="token punctuation">.</span>conf&lt;&lt;EOF
LANG=<span class="token string">"zh_CN.UTF-8"</span>
<span class="token comment">#LANG="en_US.UTF-8"</span>
EOF
source <span class="token operator">/</span>etc<span class="token operator">/</span>locale<span class="token punctuation">.</span>conf
grep LANG <span class="token operator">/</span>etc<span class="token operator">/</span>locale<span class="token punctuation">.</span>conf
action <span class="token string">"更改字符集zh_CN.UTF-8完成"</span> <span class="token operator">/</span>bin<span class="token operator">/</span>true
<span class="token function">echo</span> <span class="token string">"================================================="</span>
<span class="token function">echo</span> <span class="token string">""</span>

<span class="token comment">###set the ip in hosts</span>
<span class="token function">echo</span> <span class="token string">"############################   Ip&amp;Hosts Configuration  #######################################"</span>
hostname=`hostname`
HostIP=`ip a<span class="token punctuation">|</span>grep <span class="token string">'inet '</span><span class="token punctuation">|</span>grep <span class="token operator">-</span>v <span class="token string">'127.0.0.1'</span><span class="token punctuation">|</span>awk <span class="token string">'{print $2}'</span><span class="token punctuation">|</span>awk <span class="token operator">-</span>F <span class="token string">'/'</span> <span class="token string">'{print $1}'</span>`
<span class="token keyword">for</span> i in $<span class="token punctuation">{<!-- --></span>HostIP<span class="token punctuation">}</span>
<span class="token keyword">do</span>
    A=`grep <span class="token string">"${i}"</span> <span class="token operator">/</span>etc<span class="token operator">/</span>hosts`
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>n <span class="token string">"${A}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
        <span class="token function">echo</span> <span class="token string">"${i} ${hostname}"</span> &gt;&gt; <span class="token operator">/</span>etc<span class="token operator">/</span>hosts 
    <span class="token keyword">else</span>
        <span class="token keyword">break</span>
    fi
done

<span class="token comment">###create group&amp;user</span>
<span class="token function">echo</span> <span class="token string">"############################   Create Group&amp;User  #######################################"</span>
ora_user=oracle
ora_group=<span class="token punctuation">(</span><span class="token string">'oinstall'</span> <span class="token string">'dba'</span> <span class="token string">'oper'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i in $<span class="token punctuation">{<!-- --></span>ora_group<span class="token punctuation">[</span>@<span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token keyword">do</span>
    B=`grep <span class="token string">'${i}'</span> <span class="token operator">/</span>etc<span class="token operator">/</span><span class="token function">group</span>`
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>n $<span class="token punctuation">{<!-- --></span>B<span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
        groupdel $<span class="token punctuation">{<!-- --></span>i<span class="token punctuation">}</span> &amp;&amp; groupadd $<span class="token punctuation">{<!-- --></span>i<span class="token punctuation">}</span>
    <span class="token keyword">else</span>    
        groupadd $<span class="token punctuation">{<!-- --></span>i<span class="token punctuation">}</span>
    fi
done
C=`grep <span class="token string">'oracle'</span> <span class="token operator">/</span>etc<span class="token operator">/</span>passwd`
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>n $<span class="token punctuation">{<!-- --></span>C<span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
    userdel <span class="token operator">-</span>r $<span class="token punctuation">{<!-- --></span>ora_user<span class="token punctuation">}</span> &amp;&amp; useradd <span class="token operator">-</span>u 501 <span class="token operator">-</span>g $<span class="token punctuation">{<!-- --></span>ora_group<span class="token punctuation">[</span>0<span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">-</span>G $<span class="token punctuation">{<!-- --></span>ora_group<span class="token punctuation">[</span>1<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>$<span class="token punctuation">{<!-- --></span>ora_group<span class="token punctuation">[</span>2<span class="token punctuation">]</span><span class="token punctuation">}</span> $<span class="token punctuation">{<!-- --></span>ora_user<span class="token punctuation">}</span>
<span class="token keyword">else</span>
    useradd <span class="token operator">-</span>u 501 <span class="token operator">-</span>g $<span class="token punctuation">{<!-- --></span>ora_group<span class="token punctuation">[</span>0<span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">-</span>G $<span class="token punctuation">{<!-- --></span>ora_group<span class="token punctuation">[</span>1<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>$<span class="token punctuation">{<!-- --></span>ora_group<span class="token punctuation">[</span>2<span class="token punctuation">]</span><span class="token punctuation">}</span> $<span class="token punctuation">{<!-- --></span>ora_user<span class="token punctuation">}</span>
fi
<span class="token function">echo</span> <span class="token string">"${ORACLE_OS_PWD}"</span> <span class="token punctuation">|</span> passwd <span class="token operator">--</span>stdin $<span class="token punctuation">{<!-- --></span>ora_user<span class="token punctuation">}</span>

<span class="token comment">###create directory and grant priv</span>
<span class="token function">echo</span> <span class="token string">"############################ Create DIR &amp; set privileges &amp; set OracleSid ##################"</span>
<span class="token function">echo</span> <span class="token string">"############################   Create OracleBaseDi #######################################"</span>
<span class="token function">echo</span> <span class="token string">"############################   Create OracleHomeDir #######################################"</span>
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    read <span class="token operator">-</span>p <span class="token string">"Please input the ORACLE_SID(e.g:orcl):"</span> S1
    read <span class="token operator">-</span>p <span class="token string">"Please input the ORACLE_SID again(orcl):"</span> S2
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"${S1}"</span> == <span class="token string">"${S2}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
        export ORACLE_SID=$<span class="token punctuation">{<!-- --></span>S1<span class="token punctuation">}</span>
        <span class="token keyword">break</span>
    <span class="token keyword">else</span>
        <span class="token function">echo</span> <span class="token string">"You input ORACLE_SID not same."</span>
        count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
    fi
done
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        read <span class="token operator">-</span>p <span class="token string">"Please input the ORACLE_BASE(e.g:/u01/oracle):"</span> S1
        read <span class="token operator">-</span>p <span class="token string">"Please input the ORACLE_BASE again(/u01/oracle):"</span> S2
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"${S1}"</span> == <span class="token string">"${S2}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
                export ORACLE_BASE=$<span class="token punctuation">{<!-- --></span>S1<span class="token punctuation">}</span>
                <span class="token keyword">break</span>
        <span class="token keyword">else</span>    
                <span class="token function">echo</span> <span class="token string">"You input ORACLE_BASE not same."</span>
                count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
        fi 
done
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        read <span class="token operator">-</span>p <span class="token string">"Please input the ORACLE_HOME(e.g:/u01/oracle/product/19c/dbhome_1):"</span> S1
        read <span class="token operator">-</span>p <span class="token string">"Please input the ORACLE_HOME again(/u01/oracle/product/19c/dbhome_1):"</span> S2
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"${S1}"</span> == <span class="token string">"${S2}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
                export ORACLE_HOME=$<span class="token punctuation">{<!-- --></span>S1<span class="token punctuation">}</span>
                <span class="token keyword">break</span>
        <span class="token keyword">else</span>        
                <span class="token function">echo</span> <span class="token string">"You input ORACLE_HOME not same."</span>
                count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
        fi      
done
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>d $<span class="token punctuation">{<!-- --></span>ORACLE_HOME<span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
    mkdir <span class="token operator">-</span>p $<span class="token punctuation">{<!-- --></span>ORACLE_HOME<span class="token punctuation">}</span>
fi
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>d $<span class="token punctuation">{<!-- --></span>ORACLE_BASE<span class="token punctuation">}</span><span class="token operator">/</span><span class="token keyword">data</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
    mkdir <span class="token operator">-</span>p $<span class="token punctuation">{<!-- --></span>ORACLE_BASE<span class="token punctuation">}</span><span class="token operator">/</span><span class="token keyword">data</span>
fi
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>d $<span class="token punctuation">{<!-- --></span>ORACLE_BASE<span class="token punctuation">}</span><span class="token operator">/</span>recovery <span class="token punctuation">]</span><span class="token punctuation">;</span>then
    mkdir <span class="token operator">-</span>p $<span class="token punctuation">{<!-- --></span>ORACLE_BASE<span class="token punctuation">}</span><span class="token operator">/</span>recovery
fi
ora_dir=`<span class="token function">echo</span> $<span class="token punctuation">{<!-- --></span>ORACLE_BASE<span class="token punctuation">}</span><span class="token punctuation">|</span>awk <span class="token operator">-</span>F <span class="token string">'/'</span> <span class="token string">'{print $2}'</span>`
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>d <span class="token operator">/</span>$<span class="token punctuation">{<!-- --></span>ora_dir<span class="token punctuation">}</span><span class="token operator">/</span>install <span class="token punctuation">]</span><span class="token punctuation">;</span>then
    mkdir <span class="token operator">-</span>p <span class="token operator">/</span>$<span class="token punctuation">{<!-- --></span>ora_dir<span class="token punctuation">}</span><span class="token operator">/</span>install
fi
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>d <span class="token operator">/</span>$<span class="token punctuation">{<!-- --></span>ora_dir<span class="token punctuation">}</span><span class="token operator">/</span>assistants <span class="token punctuation">]</span><span class="token punctuation">;</span>then
    mkdir <span class="token operator">-</span>p <span class="token operator">/</span>$<span class="token punctuation">{<!-- --></span>ora_dir<span class="token punctuation">}</span><span class="token operator">/</span>assistants
fi

<span class="token comment">###set the sysctl,limits and profile</span>
<span class="token function">echo</span> <span class="token string">"############################   Configure environment variables #######################################"</span>
D=`grep <span class="token string">'fs.aio-max-nr'</span> <span class="token operator">/</span>etc<span class="token operator">/</span>sysctl<span class="token punctuation">.</span>conf`
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>n <span class="token string">"${D}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
<span class="token function">cat</span> &lt;&lt; EOF &gt;&gt; <span class="token operator">/</span>etc<span class="token operator">/</span>sysctl<span class="token punctuation">.</span>conf
kernel<span class="token punctuation">.</span>shmmax = 68719476736
kernel<span class="token punctuation">.</span>shmmni = 4096
kernel<span class="token punctuation">.</span>shmall = 16777216
kernel<span class="token punctuation">.</span>sem = 1010 129280 1010 128
net<span class="token punctuation">.</span>ipv4<span class="token punctuation">.</span>ip_local_port_range = 9000 65500
net<span class="token punctuation">.</span>core<span class="token punctuation">.</span>rmem_default = 4194304
net<span class="token punctuation">.</span>core<span class="token punctuation">.</span>rmem_max = 4194304
net<span class="token punctuation">.</span>core<span class="token punctuation">.</span>wmem_default = 262144
net<span class="token punctuation">.</span>core<span class="token punctuation">.</span>wmem_max = 1048576
fs<span class="token punctuation">.</span>aio<span class="token operator">-</span>max<span class="token operator">-</span>nr = 1048576
fs<span class="token punctuation">.</span>file<span class="token operator">-</span>max = 6815744
EOF
<span class="token operator">/</span>sbin<span class="token operator">/</span>sysctl <span class="token operator">-</span>p
<span class="token keyword">else</span>
    tail <span class="token operator">-</span>11f <span class="token operator">/</span>etc<span class="token operator">/</span>sysctl<span class="token punctuation">.</span>conf
fi
E=`grep <span class="token string">'oracle'</span> <span class="token operator">/</span>etc<span class="token operator">/</span>security<span class="token operator">/</span>limits<span class="token punctuation">.</span>conf`
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>n <span class="token string">"${E}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
<span class="token function">cat</span> &lt;&lt; EOF &gt;&gt; <span class="token operator">/</span>etc<span class="token operator">/</span>security<span class="token operator">/</span>limits<span class="token punctuation">.</span>conf
oracle soft nproc 16384
oracle hard nproc 16384
oracle soft nofile 65536
oracle hard nofile 65536
oracle soft memlock 4000000
oracle hard memlock 4000000
EOF
<span class="token keyword">else</span>
    tail <span class="token operator">-</span>5f <span class="token operator">/</span>etc<span class="token operator">/</span>security<span class="token operator">/</span>limits<span class="token punctuation">.</span>conf
fi
F=`grep <span class="token string">'ORACLE_SID'</span> <span class="token operator">/</span>home<span class="token operator">/</span>$<span class="token punctuation">{<!-- --></span>ora_user<span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">.</span>bash_profile`
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>n <span class="token string">"${F}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
<span class="token function">cat</span> &lt;&lt; EOF &gt;&gt; <span class="token operator">/</span>home<span class="token operator">/</span>$<span class="token punctuation">{<!-- --></span>ora_user<span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">.</span>bash_profile
export ORACLE_SID=$<span class="token punctuation">{<!-- --></span>ORACLE_SID<span class="token punctuation">}</span>
export ORACLE_BASE=$<span class="token punctuation">{<!-- --></span>ORACLE_BASE<span class="token punctuation">}</span>
export ORACLE_HOME=$<span class="token punctuation">{<!-- --></span>ORACLE_HOME<span class="token punctuation">}</span>
export PATH=\<span class="token variable">$PATH</span>:\<span class="token variable">$ORACLE_HOME</span><span class="token operator">/</span>bin
export NLS_LANG=<span class="token string">"AMERICAN_CHINA.ZHS16GBK"</span>
EOF
<span class="token keyword">else</span>
    tail <span class="token operator">-</span>4f <span class="token operator">/</span>home<span class="token operator">/</span>$<span class="token punctuation">{<!-- --></span>ora_user<span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">.</span>bash_profile
fi
sed <span class="token operator">-</span>i <span class="token string">"/pam_namespace.so/a\session    required     pam_limits.so"</span> <span class="token operator">/</span>etc<span class="token operator">/</span>pam<span class="token punctuation">.</span>d<span class="token operator">/</span>login
G=`grep <span class="token string">'oracle'</span> <span class="token operator">/</span>etc<span class="token operator">/</span>profile`
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>n <span class="token string">"${G}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
<span class="token function">cat</span> &lt;&lt; EOF &gt;&gt; <span class="token operator">/</span>etc<span class="token operator">/</span>profile
<span class="token keyword">if</span> <span class="token punctuation">[</span> \<span class="token variable">$USER</span> = <span class="token string">"oracle"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
    <span class="token keyword">if</span> <span class="token punctuation">[</span> \<span class="token variable">$SHELL</span> = <span class="token string">"/bin/ksh"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
        ulimit <span class="token operator">-</span>p 16384
        ulimit <span class="token operator">-</span>n 65536
    <span class="token keyword">else</span>
        ulimit <span class="token operator">-</span>u 16384 <span class="token operator">-</span>n 65536
    fi
fi
EOF
<span class="token keyword">else</span>
    tail <span class="token operator">-</span>8f <span class="token operator">/</span>etc<span class="token operator">/</span>profile
fi

<span class="token comment">###unzip the install package and set response file</span>
<span class="token function">echo</span> <span class="token string">"############################   unzip the install package  #######################################"</span>
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    read <span class="token operator">-</span>p <span class="token string">"Please input the zip file location(e.g:/opt/LINUX.X64_193000_db_home.zip):"</span> zfile
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>f $<span class="token punctuation">{<!-- --></span>zfile<span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
        <span class="token function">echo</span> <span class="token string">"You input location not found zip file."</span>
        count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
    <span class="token keyword">else</span>
        export zfile=$<span class="token punctuation">{<!-- --></span>zfile<span class="token punctuation">}</span>
        <span class="token keyword">break</span>
    fi
done

unzip $<span class="token punctuation">{<!-- --></span>zfile<span class="token punctuation">}</span> <span class="token operator">-</span>d <span class="token variable">$ORACLE_HOME</span> &amp;&amp; chown <span class="token operator">-</span>R $<span class="token punctuation">{<!-- --></span>ora_user<span class="token punctuation">}</span>:$<span class="token punctuation">{<!-- --></span>ora_group<span class="token punctuation">[</span>0<span class="token punctuation">]</span><span class="token punctuation">}</span>  <span class="token operator">/</span>$<span class="token punctuation">{<!-- --></span>ora_dir<span class="token punctuation">}</span>

<span class="token comment">###set Oracle characterSet</span>
<span class="token function">echo</span> <span class="token string">"############################   set characterSet  #######################################"</span>
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        read <span class="token operator">-</span>p <span class="token string">"Please input the CharacterSet(e.g:ZHS16GBK or AL32UTF8):"</span> C1
        read <span class="token operator">-</span>p <span class="token string">"Please input the CharacterSet again(ZHS16GBK or AL32UTF8):"</span> C2
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"${C1}"</span> == <span class="token string">"${C2}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
                export CharacterSet=$<span class="token punctuation">{<!-- --></span>C1<span class="token punctuation">}</span>
                <span class="token keyword">break</span>
        <span class="token keyword">else</span>        
                <span class="token function">echo</span> <span class="token string">"You input characterSet not same."</span>
                count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
        fi      
done

<span class="token comment">###set Oracle nationalCharacterSet</span>
<span class="token function">echo</span> <span class="token string">"############################   set nationalCharacterSet  #######################################"</span>
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        read <span class="token operator">-</span>p <span class="token string">"Please input the NationalCharacterSet(e.g:AL16UTF16 or UTF8):"</span> N1
        read <span class="token operator">-</span>p <span class="token string">"Please input the NationalCharacterSet again(AL16UTF16 or UTF8):"</span> N2
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"${N1}"</span> == <span class="token string">"${N2}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
                export NationalCharacterSet=$<span class="token punctuation">{<!-- --></span>N1<span class="token punctuation">}</span>
                <span class="token keyword">break</span>
        <span class="token keyword">else</span>        
                <span class="token function">echo</span> <span class="token string">"You input nationalCharacterSet not same."</span>
                count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
        fi      
done

<span class="token comment">###set Oracle install.db.starterdb installSysPassword</span>
<span class="token function">echo</span> <span class="token string">"############################   set installSysPassword  #######################################"</span>
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        read <span class="token operator">-</span>p <span class="token string">"Please input the installSysPassword(e.g:SysOracle2021):"</span> S1
        read <span class="token operator">-</span>p <span class="token string">"Please input the installSysPassword again(SysOracle2021):"</span> S2
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"${S1}"</span> == <span class="token string">"${S2}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
                export installSysPassword=$<span class="token punctuation">{<!-- --></span>S1<span class="token punctuation">}</span>
                <span class="token keyword">break</span>
        <span class="token keyword">else</span>        
                <span class="token function">echo</span> <span class="token string">"You input installSysPassword not same."</span>
                count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
        fi      
done

<span class="token comment">###set Oracle install db config PDBName</span>
<span class="token function">echo</span> <span class="token string">"############################   set PDBName  #######################################"</span>
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        read <span class="token operator">-</span>p <span class="token string">"Please input the PDBNAME(e.g:pdborcl):"</span> S1
        read <span class="token operator">-</span>p <span class="token string">"Please input the PDBNAME again(pdborcl):"</span> S2
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"${S1}"</span> == <span class="token string">"${S2}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
                export PDBNAME=$<span class="token punctuation">{<!-- --></span>S1<span class="token punctuation">}</span>
                <span class="token keyword">break</span>
        <span class="token keyword">else</span>        
                <span class="token function">echo</span> <span class="token string">"You input PDBName not same."</span>
                count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
        fi      
done

<span class="token comment">###set Response File</span>
<span class="token function">echo</span> <span class="token string">"############################   set ResponseFile  #######################################"</span>
db_response_file=`find $<span class="token punctuation">{<!-- --></span>ORACLE_HOME<span class="token punctuation">}</span><span class="token operator">/</span>install <span class="token operator">-</span><span class="token function">type</span> f <span class="token operator">-</span>name db_install<span class="token punctuation">.</span>rsp`
cd `find $<span class="token punctuation">{<!-- --></span>ORACLE_HOME<span class="token punctuation">}</span><span class="token operator">/</span>install <span class="token operator">-</span><span class="token function">type</span> f <span class="token operator">-</span>name db_install<span class="token punctuation">.</span>rsp <span class="token punctuation">|</span> sed <span class="token operator">-</span>n <span class="token string">'s:/[^/]*$::p'</span>` &amp;&amp; cd <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>
install_dir=`<span class="token function">pwd</span>`
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.responseFileVersion=/oracle/install/rspfmt_dbinstall_response_schema_v19.0.0!oracle.install.responseFileVersion=/${ora_dir}/install/rspfmt_dbinstall_response_schema_v19.0.0!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.option=!oracle.install.option=INSTALL_DB_SWONLY!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!UNIX_GROUP_NAME=!UNIX_GROUP_NAME=${ora_group[0]}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!INVENTORY_LOCATION=!INVENTORY_LOCATION=/${ora_dir}/oraInventory!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!ORACLE_HOME=!ORACLE_HOME=${ORACLE_HOME}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!ORACLE_BASE=!ORACLE_BASE=${ORACLE_BASE}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.InstallEdition=!oracle.install.db.InstallEdition=EE!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.OSDBA_GROUP=!oracle.install.db.OSDBA_GROUP=${ora_group[1]}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.OSOPER_GROUP=!oracle.install.db.OSOPER_GROUP=${ora_group[2]}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.OSBACKUPDBA_GROUP=!oracle.install.db.OSBACKUPDBA_GROUP=${ora_group[1]}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.OSDGDBA_GROUP=!oracle.install.db.OSDGDBA_GROUP=${ora_group[1]}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.OSKMDBA_GROUP=!oracle.install.db.OSKMDBA_GROUP=${ora_group[1]}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.OSRACDBA_GROUP=!oracle.install.db.OSRACDBA_GROUP=${ora_group[1]}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.config.starterdb.type=!oracle.install.db.config.starterdb.type=GENERAL_PURPOSE!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.config.starterdb.globalDBName=!oracle.install.db.config.starterdb.globalDBName=${ORACLE_SID}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.config.starterdb.SID=!oracle.install.db.config.starterdb.SID=${ORACLE_SID}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.config.starterdb.characterSet=!oracle.install.db.config.starterdb.characterSet=${CharacterSet}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.rootconfig.executeRootScript=!oracle.install.db.rootconfig.executeRootScript=false!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.config.starterdb.password.ALL=!oracle.install.db.config.starterdb.password.ALL=${installSysPassword}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.rootconfig.configMethod=!oracle.install.db.rootconfig.configMethod=ROOT!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.ConfigureAsContainerDB=!oracle.install.db.ConfigureAsContainerDB=true!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.config.PDBName=!oracle.install.db.config.PDBName=${PDBNAME}!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!oracle.install.db.config.starterdb.installExampleSchemas=!oracle.install.db.config.starterdb.installExampleSchemas=false!g"</span> $<span class="token punctuation">{<!-- --></span>db_response_file<span class="token punctuation">}</span>

<span class="token comment">###starting to install oracle software</span>
<span class="token function">echo</span> <span class="token string">"############################   Oracle Installing  #######################################"</span>
oracle_out=<span class="token string">'/tmp/oracle.out'</span>
touch $<span class="token punctuation">{<!-- --></span>oracle_out<span class="token punctuation">}</span>
chown $<span class="token punctuation">{<!-- --></span>ora_user<span class="token punctuation">}</span>:$<span class="token punctuation">{<!-- --></span>ora_group<span class="token punctuation">[</span>0<span class="token punctuation">]</span><span class="token punctuation">}</span> $<span class="token punctuation">{<!-- --></span>oracle_out<span class="token punctuation">}</span>
su <span class="token operator">-</span> oracle <span class="token operator">-</span>c <span class="token string">"${install_dir}/runInstaller -silent -responseFile ${db_response_file}"</span> &gt; $<span class="token punctuation">{<!-- --></span>oracle_out<span class="token punctuation">}</span> 2&gt;&amp;1
<span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[32moracle install starting \033[05m...\033[0m"</span>
<span class="token function">sleep</span> 30
installActionslog=`find <span class="token operator">/</span>$<span class="token punctuation">{<!-- --></span>ora_dir<span class="token punctuation">}</span><span class="token operator">/</span>oraInventory <span class="token operator">-</span>name installActions<span class="token operator">*</span><span class="token punctuation">.</span>log`
<span class="token function">echo</span> <span class="token string">"You can check the oracle install log command: tail -100f ${installActionslog}"</span>
<span class="token keyword">while</span> true<span class="token punctuation">;</span> <span class="token keyword">do</span>
  grep <span class="token string">'[FATAL] [INS-10101]'</span> $<span class="token punctuation">{<!-- --></span>oracle_out<span class="token punctuation">}</span> &amp;&gt; <span class="token operator">/</span>dev<span class="token operator">/</span>null
  <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> $? == 0 <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>then
    <span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[31moracle start install has [ERROR]\033[0m"</span>
    <span class="token function">cat</span> $<span class="token punctuation">{<!-- --></span>oracle_out<span class="token punctuation">}</span>
    <span class="token keyword">exit</span>
  fi
  <span class="token function">sleep</span> 60
  <span class="token function">cat</span> <span class="token operator">/</span>tmp<span class="token operator">/</span>oracle<span class="token punctuation">.</span>out  <span class="token punctuation">|</span> grep sh
  <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> $? == 0 <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>then
    `<span class="token function">cat</span> <span class="token operator">/</span>tmp<span class="token operator">/</span>oracle<span class="token punctuation">.</span>out  <span class="token punctuation">|</span> grep sh <span class="token punctuation">|</span> awk <span class="token operator">-</span>F <span class="token string">' '</span> <span class="token string">'{print $2}'</span> <span class="token punctuation">|</span>grep Root<span class="token punctuation">.</span>sh`
    <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> $? == 0 <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> then
      <span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[32mScript orainstRoot.sh run successed\033[0m"</span>
	  `<span class="token function">cat</span> <span class="token operator">/</span>tmp<span class="token operator">/</span>oracle<span class="token punctuation">.</span>out  <span class="token punctuation">|</span> grep sh <span class="token punctuation">|</span> awk <span class="token operator">-</span>F <span class="token string">' '</span> <span class="token string">'{print $2}'</span> <span class="token punctuation">|</span>grep root<span class="token punctuation">.</span>sh`
        <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> $? == 0 <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>then
          <span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[32mScript root.sh  run successed\033[0m"</span>
	      <span class="token keyword">break</span>
        <span class="token keyword">else</span>
          <span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[31mScript root.sh  run faild\033[0m"</span>
        fi
    <span class="token keyword">else</span>
      <span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[31mScript orainstRoot.sh run faild\033[0m"</span>
    fi
  fi
done

<span class="token function">echo</span> <span class="token string">"#######################   Oracle software 安装完成      ##############################"</span>

<span class="token comment"># install listener &amp;&amp; dbca</span>
<span class="token function">echo</span> <span class="token string">"############################   install oracle listener &amp;&amp; dbca  #######################################"</span>
<span class="token function">echo</span> <span class="token string">"############################   set oracle schema sysPassword  #######################################"</span>
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        read <span class="token operator">-</span>p <span class="token string">"Please input the SYSPASSWORD(e.g:SysOracle2021):"</span> S1
        read <span class="token operator">-</span>p <span class="token string">"Please input the SYSPASSWORD again(SysOracle2021):"</span> S2
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"${S1}"</span> == <span class="token string">"${S2}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
                export SYSPASSWORD=$<span class="token punctuation">{<!-- --></span>S1<span class="token punctuation">}</span>
                <span class="token keyword">break</span>
        <span class="token keyword">else</span>        
                <span class="token function">echo</span> <span class="token string">"You input SYSPASSWORD not same."</span>
                count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
        fi      
done
<span class="token function">echo</span> <span class="token string">"############################   set oracle app_user  #######################################"</span>
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        read <span class="token operator">-</span>p <span class="token string">"Please input the USER_NAME(e.g:orcl):"</span> S1
        read <span class="token operator">-</span>p <span class="token string">"Please input the USER_NAME again(orcl):"</span> S2
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"${S1}"</span> == <span class="token string">"${S2}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
                export USER_NAME=$<span class="token punctuation">{<!-- --></span>S1<span class="token punctuation">}</span>
                <span class="token keyword">break</span>
        <span class="token keyword">else</span>        
                <span class="token function">echo</span> <span class="token string">"You input USER_NAME not same."</span>
                count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
        fi      
done
<span class="token function">echo</span> <span class="token string">"############################   set oracle app_passwd  #######################################"</span>
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        read <span class="token operator">-</span>p <span class="token string">"Please input the USER_PASSWD(e.g:Orcl2021):"</span> S1
        read <span class="token operator">-</span>p <span class="token string">"Please input the USER_PASSWD again(Orcl2021):"</span> S2
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"${S1}"</span> == <span class="token string">"${S2}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
                export USER_PASSWD=$<span class="token punctuation">{<!-- --></span>S1<span class="token punctuation">}</span>
                <span class="token keyword">break</span>
        <span class="token keyword">else</span>        
                <span class="token function">echo</span> <span class="token string">"You input USER_PASSWD not same."</span>
                count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
        fi      
done
<span class="token function">echo</span> <span class="token string">"############################   set app_user tmp_dbf  #######################################"</span>
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        read <span class="token operator">-</span>p <span class="token string">"Please input the TMP_DBF(e.g:orcl_temp):"</span> S1
        read <span class="token operator">-</span>p <span class="token string">"Please input the TMP_DBF again(orcl_temp):"</span> S2
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"${S1}"</span> == <span class="token string">"${S2}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
                export TMP_DBF=$<span class="token punctuation">{<!-- --></span>S1<span class="token punctuation">}</span>
                <span class="token keyword">break</span>
        <span class="token keyword">else</span>        
                <span class="token function">echo</span> <span class="token string">"You input TMP_DBF not same."</span>
                count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
        fi      
done
<span class="token function">echo</span> <span class="token string">"############################   set app_user data_dbf  #######################################"</span>
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        read <span class="token operator">-</span>p <span class="token string">"Please input the DATA_DBF(e.g:orcl_data):"</span> S1
        read <span class="token operator">-</span>p <span class="token string">"Please input the DATA_DBF again(orcl_data):"</span> S2
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"${S1}"</span> == <span class="token string">"${S2}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
                export DATA_DBF=$<span class="token punctuation">{<!-- --></span>S1<span class="token punctuation">}</span>
                <span class="token keyword">break</span>
        <span class="token keyword">else</span>        
                <span class="token function">echo</span> <span class="token string">"You input DATA_DBF not same."</span>
                count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
        fi      
done
<span class="token function">echo</span> <span class="token string">"############################   set instances tablespace_dir  #######################################"</span>
count=0
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">-lt</span> 3 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        read <span class="token operator">-</span>p <span class="token string">"Please input the DATA_DIR(e.g:/u01/oracle/data):"</span> S1
        read <span class="token operator">-</span>p <span class="token string">"Please input the DATA_DIR again(/u01/oracle/data):"</span> S2
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"${S1}"</span> == <span class="token string">"${S2}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
                export DATA_DIR=$<span class="token punctuation">{<!-- --></span>S1<span class="token punctuation">}</span>
                <span class="token keyword">break</span>
        <span class="token keyword">else</span>        
                <span class="token function">echo</span> <span class="token string">"You input tablespace_dir not same."</span>
                count=$<span class="token punctuation">[</span>$<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">+</span>1<span class="token punctuation">]</span>
        fi      
done
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>d $<span class="token punctuation">{<!-- --></span>DATA_DIR<span class="token punctuation">}</span><span class="token operator">/</span>$<span class="token punctuation">{<!-- --></span>ORACLE_SID<span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
    mkdir <span class="token operator">-</span>p $<span class="token punctuation">{<!-- --></span>DATA_DIR<span class="token punctuation">}</span><span class="token operator">/</span>$<span class="token punctuation">{<!-- --></span>ORACLE_SID<span class="token punctuation">}</span>
    data_dir=`<span class="token function">echo</span> $<span class="token punctuation">{<!-- --></span>DATA_DIR<span class="token punctuation">}</span><span class="token punctuation">|</span>awk <span class="token operator">-</span>F <span class="token string">'/'</span> <span class="token string">'{print $2}'</span>`
    chown <span class="token operator">-</span>R $<span class="token punctuation">{<!-- --></span>ora_user<span class="token punctuation">}</span>:$<span class="token punctuation">{<!-- --></span>ora_group<span class="token punctuation">[</span>0<span class="token punctuation">]</span><span class="token punctuation">}</span>  <span class="token operator">/</span>$<span class="token punctuation">{<!-- --></span>data_dir<span class="token punctuation">}</span>
fi
ORACLE_SID=`su <span class="token operator">-</span> oracle <span class="token operator">-</span>c <span class="token string">'source ~/.bash_profile &amp;&amp; echo $ORACLE_SID'</span>`
ORACLE_BASE=`su <span class="token operator">-</span> oracle <span class="token operator">-</span>c <span class="token string">'source ~/.bash_profile &amp;&amp; echo $ORACLE_BASE'</span>`
ORACLE_HOME=`su <span class="token operator">-</span> oracle <span class="token operator">-</span>c <span class="token string">'source ~/.bash_profile &amp;&amp; echo $ORACLE_HOME'</span>`
ora_dir=`<span class="token function">echo</span> $<span class="token punctuation">{<!-- --></span>ORACLE_BASE<span class="token punctuation">}</span><span class="token punctuation">|</span>awk <span class="token operator">-</span>F <span class="token string">'/'</span> <span class="token string">'{print $2}'</span>`
DB_SHUT=$<span class="token punctuation">{<!-- --></span>ORACLE_HOME<span class="token punctuation">}</span><span class="token operator">/</span>bin<span class="token operator">/</span>dbshut
DB_START=$<span class="token punctuation">{<!-- --></span>ORACLE_HOME<span class="token punctuation">}</span><span class="token operator">/</span>bin<span class="token operator">/</span>dbstart
BACKUP_DIR=$<span class="token punctuation">{<!-- --></span>ORACLE_BASE<span class="token punctuation">}</span><span class="token operator">/</span>backup
<span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>f <span class="token variable">$BACKUP_DIR</span> <span class="token punctuation">]</span> &amp;&amp; mkdir <span class="token variable">$BACKUP_DIR</span>
backup_dir=`<span class="token function">echo</span> $<span class="token punctuation">{<!-- --></span>BACKUP_DIR<span class="token punctuation">}</span><span class="token punctuation">|</span>awk <span class="token operator">-</span>F <span class="token string">'/'</span> <span class="token string">'{print $2}'</span>`
chown <span class="token operator">-</span>R $<span class="token punctuation">{<!-- --></span>ora_user<span class="token punctuation">}</span>:$<span class="token punctuation">{<!-- --></span>ora_group<span class="token punctuation">[</span>0<span class="token punctuation">]</span><span class="token punctuation">}</span>  <span class="token operator">/</span>$<span class="token punctuation">{<!-- --></span>backup_dir<span class="token punctuation">}</span>
MEM=`free <span class="token operator">-</span>m<span class="token punctuation">|</span>grep <span class="token string">'Mem:'</span><span class="token punctuation">|</span>awk <span class="token string">'{print $2}'</span>`
TOTAL=$<span class="token namespace">[MEM*8/10]</span>

PDB_SQL=<span class="token string">"
sqlplus / as sysdba &lt;&lt; EOF
alter system set processes=1000 scope=spfile;
alter system set sessions=1522 scope=spfile;
shutdown immediate;
startup;
alter session set container=${PDBNAME};
alter pluggable database ${PDBNAME} open;
create temporary tablespace <span class="token variable">$TMP_DBF</span> tempfile '<span class="token variable">$DATA_DIR</span>/<span class="token variable">$ORACLE_SID</span>/${TMP_DBF}.dbf' size 64m autoextend on next 64m maxsize unlimited extent management local;
create tablespace <span class="token variable">$DATA_DBF</span> logging datafile '<span class="token variable">$DATA_DIR</span>/<span class="token variable">$ORACLE_SID</span>/${DATA_DBF}.dbf' size 64m autoextend on next 64m maxsize unlimited extent management local;
create user <span class="token variable">$USER_NAME</span> identified by <span class="token variable">$USER_PASSWD</span> default tablespace <span class="token variable">$DATA_DBF</span> temporary tablespace <span class="token variable">$TMP_DBF</span>;
grant connect,resource to <span class="token variable">$USER_NAME</span>;
grant create view to <span class="token variable">$USER_NAME</span>;
grant create public synonym to <span class="token variable">$USER_NAME</span>;
grant drop public synonym to <span class="token variable">$USER_NAME</span>;
grant unlimited tablespace to <span class="token variable">$USER_NAME</span>;
create or replace directory dir_dump as '<span class="token variable">$BACKUP_DIR</span>';
grant read,write on directory dir_dump to <span class="token variable">$USER_NAME</span>;
ALTER PROFILE DEFAULT LIMIT PASSWORD_LIFE_TIME UNLIMITED;
exit
EOF
"</span>

PDB_AUTOSTART_SQL=<span class="token string">"
sqlplus / as sysdba &lt;&lt; EOF
alter pluggable database all save state;
exit
EOF
"</span>

NETCA=`find $<span class="token punctuation">{<!-- --></span>ORACLE_HOME<span class="token punctuation">}</span><span class="token operator">/</span>assistants <span class="token operator">-</span><span class="token function">type</span> f <span class="token operator">-</span>name netca<span class="token punctuation">.</span>rsp`

<span class="token comment">###set listener&amp;tnsnames</span>
<span class="token function">echo</span> <span class="token string">"############################   Oracle listener&amp;dbca  #######################################"</span>
<span class="token comment">###start listen</span>
<span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[32mOracle start listen \033[05m...\033[0m"</span>
su <span class="token operator">-</span> oracle <span class="token operator">-</span>c <span class="token string">"${ORACLE_HOME}/bin/netca /silent /responsefile ${NETCA}"</span>
netstat <span class="token operator">-</span>anptu <span class="token punctuation">|</span> grep 1521
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> $? == 0 <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> then
  <span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[32mOracle listen is running\033[0m"</span>
  <span class="token keyword">break</span>
<span class="token keyword">else</span>
  <span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[31mOracle listen is not running\033[0m"</span>
  <span class="token keyword">exit</span> 5
fi

<span class="token comment">###start install oracle instance</span>
dbca_response_file=`find $<span class="token punctuation">{<!-- --></span>ORACLE_HOME<span class="token punctuation">}</span><span class="token operator">/</span>assistants <span class="token operator">-</span><span class="token function">type</span> f <span class="token operator">-</span>name dbca<span class="token punctuation">.</span>rsp`
sed <span class="token operator">-</span>i <span class="token string">"s!responseFileVersion=/oracle/assistants/rspfmt_dbca_response_schema_v19.0.0=!responseFileVersion=/${ora_dir}/assistants/rspfmt_dbca_response_schema_v19.0.0!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!gdbName=!gdbName=${ORACLE_SID}!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!sid=!sid=${ORACLE_SID}!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!databaseConfigType=!databaseConfigType=SI!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!templateName=!templateName=General_Purpose.dbc!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!sysPassword=!sysPassword=${SYSPASSWORD}!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!systemPassword=!systemPassword=${SYSPASSWORD}!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!characterSet=!characterSet=${CharacterSet}!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!nationalCharacterSet=!nationalCharacterSet=${NationalCharacterSet}!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!createAsContainerDatabase=!createAsContainerDatabase=true!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!numberOfPDBs=!numberOfPDBs=1!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!pdbName=!pdbName=${PDBNAME}!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!pdbAdminPassword=!pdbAdminPassword=${SYSPASSWORD}!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>
sed <span class="token operator">-</span>i <span class="token string">"s!totalMemory=!totalMemory=${TOTAL}!g"</span> $<span class="token punctuation">{<!-- --></span>dbca_response_file<span class="token punctuation">}</span>

su <span class="token operator">-</span> oracle <span class="token operator">-</span>c <span class="token string">"${ORACLE_HOME}/bin/dbca -silent -createDatabase -responseFile ${dbca_response_file}"</span>

grep <span class="token string">"${ORACLE_SID}"</span> <span class="token operator">/</span>etc<span class="token operator">/</span>oratab
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> $? == 0 <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>then
  <span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[32mOracle instances installed successful\033[0m"</span>
<span class="token keyword">else</span>
  <span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\033[34mInstallNotice &gt;&gt;\033[0m \033[31mOracle instances init failed\033[0m"</span>
  <span class="token keyword">exit</span> 6
fi

sed <span class="token operator">-</span>i <span class="token string">"s!${ORACLE_SID}:${ORACLE_HOME}:N!${ORACLE_SID}:${ORACLE_HOME}:Y!g"</span> <span class="token operator">/</span>etc<span class="token operator">/</span>oratab

AUTO_START_CONFIG=`<span class="token function">cat</span> <span class="token operator">/</span>etc<span class="token operator">/</span>oratab<span class="token punctuation">|</span>grep $<span class="token punctuation">{<!-- --></span>ORACLE_SID<span class="token punctuation">}</span> <span class="token punctuation">|</span>awk <span class="token operator">-</span>F <span class="token string">':'</span> <span class="token string">'{print $NF}'</span>`
AUTO_START_CONFIG_expected=<span class="token string">'Y'</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> $<span class="token punctuation">{<!-- --></span>AUTO_START_CONFIG<span class="token punctuation">}</span> = $<span class="token punctuation">{<!-- --></span>AUTO_START_CONFIG_expected<span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
    <span class="token function">echo</span> <span class="token string">"AUTO_START_CONFIG successed!"</span>
<span class="token keyword">else</span>
    <span class="token function">echo</span> <span class="token string">"AUTO_START_CONFIG failed!"</span>
	<span class="token keyword">exit</span> 1
fi

<span class="token comment">#deal with ORA-28040</span>
sqlnet=<span class="token variable">$ORACLE_HOME</span><span class="token operator">/</span>network<span class="token operator">/</span>admin<span class="token operator">/</span>sqlnet<span class="token punctuation">.</span>ora
sed <span class="token operator">-</span>i <span class="token string">'4aSQLNET.ALLOWED_LOGON_VERSION_SERVER=11'</span> <span class="token variable">$sqlnet</span>
sed <span class="token operator">-</span>i <span class="token string">'4aSQLNET.ALLOWED_LOGON_VERSION_CLIENT=11'</span> <span class="token variable">$sqlnet</span>

<span class="token comment">#set create app_user &amp; app_passwd</span>
<span class="token function">echo</span> <span class="token string">"############################   Oracle sys_service  #######################################"</span>
su <span class="token operator">-</span> oracle <span class="token operator">-</span>c <span class="token string">"${PDB_SQL}"</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> $? <span class="token operator">-eq</span> 0 <span class="token punctuation">]</span><span class="token punctuation">;</span>then
  <span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\e[30 PDB_SQL execute successed \e[0m"</span>
<span class="token keyword">else</span>
  action <span class="token string">"oracle create app_user &amp;&amp; app_passwd failed."</span> <span class="token operator">/</span>bin<span class="token operator">/</span>false
  <span class="token keyword">exit</span> 5
fi

<span class="token comment">#set PDB instances auto start</span>
<span class="token function">echo</span> <span class="token string">"############################   Oracle pdb_service  #######################################"</span>
su <span class="token operator">-</span> oracle <span class="token operator">-</span>c <span class="token string">"${PDB_AUTOSTART_SQL}"</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> $? <span class="token operator">-eq</span> 0 <span class="token punctuation">]</span><span class="token punctuation">;</span>then
  <span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\e[30 PDB_AUTOSTART_SQL execute successed \e[0m"</span>
<span class="token keyword">else</span>
  action <span class="token string">"oracle set PDB instances auto start failed."</span> <span class="token operator">/</span>bin<span class="token operator">/</span>false
  <span class="token keyword">exit</span> 5
fi

<span class="token comment">#set oracle start&amp;stop sys_service</span>
<span class="token function">echo</span> <span class="token string">"############################   Oracle sys_service  #######################################"</span>
su <span class="token operator">-</span> oracle <span class="token operator">-</span>c <span class="token string">"touch /home/oracle/oracle"</span>
<span class="token function">cat</span> &gt;<span class="token operator">/</span>etc<span class="token operator">/</span>init<span class="token punctuation">.</span>d<span class="token operator">/</span>oracle &lt;&lt;EOF
<span class="token comment">#!/bin/sh</span>
<span class="token comment"># chkconfig: 35 80 10</span>
<span class="token comment"># description: Oracle auto start-stop script.</span>
<span class="token comment"># Set ORACLE_HOME to be equivalent to the \$ORACLE_HOME</span>
<span class="token comment"># Oracle database in ORACLE_HOME.</span>
LOGFILE=<span class="token operator">/</span>home<span class="token operator">/</span>oracle<span class="token operator">/</span>oracle
ORACLE_HOME=<span class="token variable">$ORACLE_HOME</span>
ORACLE_OWNER=oracle
LOCK_FILE=<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lock<span class="token operator">/</span>subsys<span class="token operator">/</span>oracle
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token operator">-</span>f <span class="token variable">$ORACLE_HOME</span><span class="token operator">/</span>bin<span class="token operator">/</span>dbstart <span class="token punctuation">]</span>
then
    <span class="token function">echo</span> <span class="token string">"Oracle startup: cannot start"</span>
    <span class="token keyword">exit</span>
fi
case <span class="token string">"\<span class="token variable">$1</span>"</span> in
<span class="token string">'start'</span><span class="token punctuation">)</span>
<span class="token comment"># Start the Oracle databases:</span>
<span class="token function">echo</span> <span class="token string">"Starting Oracle Databases ... "</span>
<span class="token function">echo</span> <span class="token string">"-------------------------------------------------"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
date <span class="token operator">+</span><span class="token string">" %T %a %D : Starting Oracle Databases as part of system up."</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
<span class="token function">echo</span> <span class="token string">"-------------------------------------------------"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
su <span class="token operator">-</span> \<span class="token variable">$ORACLE_OWNER</span> <span class="token operator">-</span>c <span class="token string">"\<span class="token variable">$ORACLE_HOME</span>/bin/dbstart <span class="token variable">$ORACLE_HOME</span>"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
<span class="token function">echo</span> <span class="token string">"Done"</span>

<span class="token comment"># Start the Listener:</span>
<span class="token function">echo</span> <span class="token string">"Starting Oracle Listeners ... "</span>
<span class="token function">echo</span> <span class="token string">"-------------------------------------------------"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
date <span class="token operator">+</span><span class="token string">" %T %a %D : Starting Oracle Listeners as part of system up."</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
<span class="token function">echo</span> <span class="token string">"-------------------------------------------------"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
su <span class="token operator">-</span> \<span class="token variable">$ORACLE_OWNER</span> <span class="token operator">-</span>c <span class="token string">"\<span class="token variable">$ORACLE_HOME</span>/bin/lsnrctl start"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
<span class="token function">echo</span> <span class="token string">"Done."</span>
<span class="token function">echo</span> <span class="token string">"-------------------------------------------------"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
date <span class="token operator">+</span><span class="token string">" %T %a %D : Finished."</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
<span class="token function">echo</span> <span class="token string">"-------------------------------------------------"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
touch \<span class="token variable">$LOCK_FILE</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>

<span class="token string">'stop'</span><span class="token punctuation">)</span>
<span class="token comment"># Stop the Oracle Listener:</span>
<span class="token function">echo</span> <span class="token string">"Stoping Oracle Listeners ... "</span>
<span class="token function">echo</span> <span class="token string">"-------------------------------------------------"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
date <span class="token operator">+</span><span class="token string">" %T %a %D : Stoping Oracle Listener as part of system down."</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
<span class="token function">echo</span> <span class="token string">"-------------------------------------------------"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
su <span class="token operator">-</span> \<span class="token variable">$ORACLE_OWNER</span> <span class="token operator">-</span>c <span class="token string">"\<span class="token variable">$ORACLE_HOME</span>/bin/lsnrctl stop"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
<span class="token function">echo</span> <span class="token string">"Done."</span>
<span class="token function">rm</span> <span class="token operator">-</span>f \<span class="token variable">$LOCK_FILE</span>

<span class="token comment"># Stop the Oracle Database:</span>
<span class="token function">echo</span> <span class="token string">"Stoping Oracle Databases ... "</span>
<span class="token function">echo</span> <span class="token string">"-------------------------------------------------"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
date <span class="token operator">+</span><span class="token string">" %T %a %D : Stoping Oracle Databases as part of system down."</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
<span class="token function">echo</span> <span class="token string">"-------------------------------------------------"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
su <span class="token operator">-</span> \<span class="token variable">$ORACLE_OWNER</span> <span class="token operator">-</span>c <span class="token string">"\<span class="token variable">$ORACLE_HOME</span>/bin/dbshut <span class="token variable">$ORACLE_HOME</span>"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
<span class="token function">echo</span> <span class="token string">"Done."</span>
<span class="token function">echo</span> <span class="token string">""</span>
<span class="token function">echo</span> <span class="token string">"-------------------------------------------------"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
date <span class="token operator">+</span><span class="token string">" %T %a %D : Finished."</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
<span class="token function">echo</span> <span class="token string">"-------------------------------------------------"</span> &gt;&gt; \$<span class="token punctuation">{<!-- --></span>LOGFILE<span class="token punctuation">}</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>

<span class="token string">'restart'</span><span class="token punctuation">)</span>
\<span class="token variable">$0</span> stop
\<span class="token variable">$0</span> <span class="token function">start</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
esac
EOF
<span class="token comment">#set privileges</span>
chmod <span class="token operator">+</span>x <span class="token operator">/</span>etc<span class="token operator">/</span>init<span class="token punctuation">.</span>d<span class="token operator">/</span>oracle
chkconfig oracle on
<span class="token comment"># check oracle service</span>
service oracle <span class="token function">start</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> $? <span class="token operator">-ne</span> 0 <span class="token punctuation">]</span><span class="token punctuation">;</span>then
  action <span class="token string">"oracle service start failed."</span> <span class="token operator">/</span>bin<span class="token operator">/</span>false
  <span class="token keyword">exit</span> 2
fi

service oracle stop
<span class="token keyword">if</span> <span class="token punctuation">[</span> $? <span class="token operator">-ne</span> 0 <span class="token punctuation">]</span><span class="token punctuation">;</span>then
  action <span class="token string">"oracle service stop failed."</span> <span class="token operator">/</span>bin<span class="token operator">/</span>false
  <span class="token keyword">exit</span> 3
fi

service oracle restart
<span class="token keyword">if</span> <span class="token punctuation">[</span> $? <span class="token operator">-ne</span> 0 <span class="token punctuation">]</span><span class="token punctuation">;</span>then
  action <span class="token string">"oracle service restart failed."</span> <span class="token operator">/</span>bin<span class="token operator">/</span>false
  <span class="token keyword">exit</span> 4
fi

<span class="token function">echo</span> <span class="token string">"####################### oracle listener &amp;&amp; dbca  安装完成 请记录数据库信息      ##############################"</span>

<span class="token function">echo</span> <span class="token string">"#####   oracle用户系统登录密码:      #####"</span>
<span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\e[31;47;5m <span class="token variable">$ORACLE_OS_PWD</span> \e[0m"</span>

<span class="token function">echo</span> <span class="token string">"#####   数据库实例名:      #####"</span>
<span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\e[30;47;5m <span class="token variable">$ORACLE_SID</span> \e[0m"</span>

<span class="token function">echo</span> <span class="token string">"#####   数据库install.db.starterdb密码:      #####"</span>
<span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\e[31;47;5m <span class="token variable">$installSysPassword</span> \e[0m"</span>

<span class="token function">echo</span> <span class="token string">"#####   数据库实例的sys管理用户密码:      #####"</span>
<span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\e[30;47;5m <span class="token variable">$SYSPASSWORD</span> \e[0m"</span>

<span class="token function">echo</span> <span class="token string">"#####   数据库pdbname:      #####"</span>
<span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\e[31;47;5m <span class="token variable">$PDBNAME</span> \e[0m"</span>

<span class="token function">echo</span> <span class="token string">"#####   数据库应用连接用户名:      #####"</span>
<span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\e[30;47;5m <span class="token variable">$USER_NAME</span> \e[0m"</span>

<span class="token function">echo</span> <span class="token string">"#####   数据库应用连接用户名对应的密码:      #####"</span>
<span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\e[31;47;5m <span class="token variable">$USER_PASSWD</span> \e[0m"</span>

<span class="token function">echo</span> <span class="token string">"#####   数据库临时表空间名:      #####"</span>
<span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\e[30;47;5m <span class="token variable">$TMP_DBF</span> \e[0m"</span>

<span class="token function">echo</span> <span class="token string">"#####   数据库数据表空间名:      #####"</span>
<span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\e[31;47;5m <span class="token variable">$DATA_DBF</span> \e[0m"</span>

<span class="token function">echo</span> <span class="token string">"#####   数据库表空间存储路径:      #####"</span>
<span class="token function">echo</span> <span class="token operator">-</span>e <span class="token string">"\e[30;47;5m ${DATA_DIR} \e[0m"</span>
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5277b1abe4d9d44642680e3f26190f4f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mysql key_len_浅谈mysql explain中key_len的计算方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/47a7321acd82550b44873b1211529531/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mysql函数分别系统函数和自定义函数_【存储过程】MySQL存储过程/存储过程与自定义函数的区别...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>