<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python开发运维：Celery连接Redis - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python开发运维：Celery连接Redis" />
<meta property="og:description" content="目录
一、理论
1.Celery
二、实验
1.Windows11安装Redis
2.Python3.8环境中配置Celery
3.celery的多目录结构异步执行
4.celery简单结构下的定时任务
三、问题
1.Celery命令报错
2.执行Celery命令报错
3.Win11启动Celery报ValueErro错误
4.Pycharm 无法 import 同目录下的 .py 文件或自定义模块
一、理论 1.Celery (1) 概念
Celery是一个基于python开发的分布式系统，它是简单、灵活且可靠的，处理大量消息，专注于实时处理的异步任务队列，同时也支持任务调度。
(2) 架构
Celery的架构由三部分组成，消息中间件（message broker），任务执行单元（worker）和任务执行结果存储（task result store）组成。
1）消息中间件 Celery本身不提供消息服务，但是可以方便的和第三方提供的消息中间件集成。包括，RabbitMQ, Redis等等 2）任务执行单元 Worker是Celery提供的任务执行的单元，worker并发的运行在分布式的系统节点中。 3）任务结果存储 Task result store用来存储Worker执行的任务的结果，Celery支持以不同方式存储任务的结果，包括AMQP, redis等 (3) 特点
1）简单 Celery易于使用和维护，并且它不需要配置文件并且配置和使用是比较简单的 2）高可用 当任务执行失败或执行过程中发生连接中断，celery会自动尝试重新执行任务 3）快速 单个 Celery 进程每分钟可处理数以百万计的任务，而保持往返延迟在亚毫秒级 4）灵活 Celery几乎所有部分都可以扩展或单独使用，各个部分可以自定义。 （4）场景
Celery是一个强大的 分布式任务队列的异步处理框架，它可以让任务的执行完全脱离主程序，甚至可以被分配到其他主机上运行。通常使用它来实现异步任务(async task)和定时任务(crontab)。
1)异步任务 将耗时操作任务提交给Celery去异步执行，比如发送短信/邮件、消息推送、音视频处理等等 2)定时任务 定时执行某件事情，比如每天数据统计 二、实验 1.Windows11安装Redis (1)下载最新版Redis
Redis-x64-xxx.zip压缩包到D盘，解压后，将文件夹重新命名为 Redis (2)查看目录
D:\Redis&gt;dir (3)打开一个 cmd 窗口 使用 cd 命令切换目录到 D:\Redis 运行" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/c46e7fceb983b28013a9d9b6a0502ce1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-24T20:52:25+08:00" />
<meta property="article:modified_time" content="2023-11-24T20:52:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python开发运维：Celery连接Redis</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E7%90%86%E8%AE%BA-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E7%90%86%E8%AE%BA" rel="nofollow">一、理论</a></p> 
<p id="1.Celery-toc" style="margin-left:40px;"><a href="#1.Celery" rel="nofollow">1.Celery</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%AE%9E%E9%AA%8C-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%AE%9E%E9%AA%8C" rel="nofollow">二、实验</a></p> 
<p id="1.Windows11%E5%AE%89%E8%A3%85Redis-toc" style="margin-left:40px;"><a href="#1.Windows11%E5%AE%89%E8%A3%85Redis" rel="nofollow">1.Windows11安装Redis</a></p> 
<p id="2.Python3.8%E7%8E%AF%E5%A2%83%E4%B8%AD%E9%85%8D%E7%BD%AECelery-toc" style="margin-left:40px;"><a href="#2.Python3.8%E7%8E%AF%E5%A2%83%E4%B8%AD%E9%85%8D%E7%BD%AECelery" rel="nofollow">2.Python3.8环境中配置Celery</a></p> 
<p id="3.celery%E7%9A%84%E5%A4%9A%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%BC%82%E6%AD%A5%E6%89%A7%E8%A1%8C-toc" style="margin-left:40px;"><a href="#3.celery%E7%9A%84%E5%A4%9A%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%BC%82%E6%AD%A5%E6%89%A7%E8%A1%8C" rel="nofollow">3.celery的多目录结构异步执行</a></p> 
<p id="4.celery%E7%AE%80%E5%8D%95%E7%BB%93%E6%9E%84%E4%B8%8B%E7%9A%84%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1-toc" style="margin-left:40px;"><a href="#4.celery%E7%AE%80%E5%8D%95%E7%BB%93%E6%9E%84%E4%B8%8B%E7%9A%84%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1" rel="nofollow">4.celery简单结构下的定时任务</a></p> 
<p id="%E4%B8%89%E3%80%81%E9%97%AE%E9%A2%98-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E9%97%AE%E9%A2%98" rel="nofollow">三、问题</a></p> 
<p id="1.Celery%E5%91%BD%E4%BB%A4%E6%8A%A5%E9%94%99-toc" style="margin-left:40px;"><a href="#1.Celery%E5%91%BD%E4%BB%A4%E6%8A%A5%E9%94%99" rel="nofollow">1.Celery命令报错</a></p> 
<p id="2.%E6%89%A7%E8%A1%8CCelery%E5%91%BD%E4%BB%A4%E6%8A%A5%E9%94%99-toc" style="margin-left:40px;"><a href="#2.%E6%89%A7%E8%A1%8CCelery%E5%91%BD%E4%BB%A4%E6%8A%A5%E9%94%99" rel="nofollow">2.执行Celery命令报错</a></p> 
<p id="3.Win11%E5%90%AF%E5%8A%A8Celery%E6%8A%A5ValueErro%E9%94%99%E8%AF%AF-toc" style="margin-left:40px;"><a href="#3.Win11%E5%90%AF%E5%8A%A8Celery%E6%8A%A5ValueErro%E9%94%99%E8%AF%AF" rel="nofollow">3.Win11启动Celery报ValueErro错误</a></p> 
<p id="4.Pycharm%20%E6%97%A0%E6%B3%95%20import%20%E5%90%8C%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%20.py%20%E6%96%87%E4%BB%B6%E6%88%96%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97-toc" style="margin-left:40px;"><a href="#4.Pycharm%20%E6%97%A0%E6%B3%95%20import%20%E5%90%8C%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%20.py%20%E6%96%87%E4%BB%B6%E6%88%96%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97" rel="nofollow">4.Pycharm 无法 import 同目录下的 .py 文件或自定义模块</a></p> 
<hr> 
<p></p> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%E7%90%86%E8%AE%BA">一、理论</h2> 
<h3 id="1.Celery">1.Celery</h3> 
<p>(1) 概念</p> 
<p> Celery是一个基于python开发的分布式系统，它是简单、灵活且可靠的，处理大量消息，专注于实时处理的异步任务队列，同时也支持任务调度。</p> 
<p><img alt="e603186045544c238c4fb2a222ea12e8.jpeg" src="https://images2.imgbox.com/f2/a3/1tZt4xi4_o.jpg"></p> 
<p></p> 
<p>(2) 架构</p> 
<p>Celery的架构由三部分组成，消息中间件（message broker），任务执行单元（worker）和任务执行结果存储（task result store）组成。</p> 
<pre><code class="language-bash">1）消息中间件
Celery本身不提供消息服务，但是可以方便的和第三方提供的消息中间件集成。包括，RabbitMQ, Redis等等

2）任务执行单元
Worker是Celery提供的任务执行的单元，worker并发的运行在分布式的系统节点中。

3）任务结果存储
Task result store用来存储Worker执行的任务的结果，Celery支持以不同方式存储任务的结果，包括AMQP, redis等</code></pre> 
<p><img alt="5312be781c034a5db52c3796f345803f.png" src="https://images2.imgbox.com/a8/ae/Tx3Nf3d0_o.png"></p> 
<p></p> 
<p> (3)  特点</p> 
<pre><code class="language-bash">1）简单
Celery易于使用和维护，并且它不需要配置文件并且配置和使用是比较简单的

2）高可用
当任务执行失败或执行过程中发生连接中断，celery会自动尝试重新执行任务

3）快速
单个 Celery 进程每分钟可处理数以百万计的任务，而保持往返延迟在亚毫秒级

4）灵活
Celery几乎所有部分都可以扩展或单独使用，各个部分可以自定义。</code></pre> 
<p></p> 
<p>（4）场景</p> 
<p>Celery是一个强大的 分布式任务队列的异步处理框架，它可以让任务的执行完全脱离主程序，甚至可以被分配到其他主机上运行。通常使用它来实现异步任务(async task)和定时任务(crontab)。</p> 
<pre><code class="language-bash">1)异步任务
将耗时操作任务提交给Celery去异步执行，比如发送短信/邮件、消息推送、音视频处理等等

2)定时任务
定时执行某件事情，比如每天数据统计</code></pre> 
<p></p> 
<h2 id="%E4%BA%8C%E3%80%81%E5%AE%9E%E9%AA%8C">二、实验</h2> 
<h3 id="1.Windows11%E5%AE%89%E8%A3%85Redis">1.Windows11安装Redis</h3> 
<p>(1)下载最新版Redis</p> 
<pre><code class="language-bash">Redis-x64-xxx.zip压缩包到D盘，解压后，将文件夹重新命名为 Redis</code></pre> 
<p>(2)查看目录</p> 
<pre><code class="language-bash">D:\Redis&gt;dir</code></pre> 
<p><img alt="5ae0dc109bd14283871d6b2729e8b311.png" src="https://images2.imgbox.com/df/90/ls3eOHrI_o.png"></p> 
<p>(3)打开一个 cmd 窗口 使用 cd 命令切换目录到 D:\Redis 运行</p> 
<pre><code class="language-bash">redis-server.exe redis.windows.conf
</code></pre> 
<p><img alt="2a3ce0e66a724e6b82652bcd9542b81c.png" src="https://images2.imgbox.com/7a/52/Jw39K1Q5_o.png"></p> 
<p></p> 
<p>(4)把 redis 的路径加到系统的环境变量</p> 
<p><img alt="fea7cb630e4b49b1af6995f17dc6f6a0.png" src="https://images2.imgbox.com/dc/01/F7GfVviq_o.png"></p> 
<p></p> 
<p>(5)另外开启一个 cmd 窗口，原来的不要关闭，因为先前打开的是redis服务端</p> 
<p></p> 
<pre><code class="language-bash">#切换到 redis 目录下运行
redis-cli.exe -h 127.0.0.1 -p 6379
</code></pre> 
<p><img alt="2baf1597234a4fac8e7675d55476cfdf.png" src="https://images2.imgbox.com/ae/9e/1MG8Dpc4_o.png"></p> 
<p>(6)检测连接是否成功</p> 
<pre><code class="language-bash">#设置键值对
set firstKey 123

#取出键值对
get firstKey

#退出
exit</code></pre> 
<p></p> 
<p><img alt="5d02fd34c1e348d19d4230ba1aca676b.png" src="https://images2.imgbox.com/31/82/90UsaXeo_o.png"></p> 
<p>Redis数据库已显示</p> 
<p><img alt="" height="335" src="https://images2.imgbox.com/25/64/zTN71BPy_o.png" width="1200"></p> 
<p></p> 
<p>(7)ctrl+c 退出先前打开的服务端</p> 
<p><img alt="836c461954584108a4b165ef7ea57eae.png" src="https://images2.imgbox.com/1c/d0/HIZHEMu6_o.png"></p> 
<p>(8)注册Redis服务</p> 
<pre><code class="language-bash">#通过 cmd 命令行工具进入 Redis 安装目录，将 Redis 服务注册到 Windows 服务中，执行以下命令
redis-server.exe --service-install redis.windows.conf --loglevel verbose
</code></pre> 
<p><img alt="8bbbba5f87fa4735bed7bafb9cb497ca.png" src="https://images2.imgbox.com/2e/a3/ZTsWF6jL_o.png"></p> 
<p>(9)启动Redis服务</p> 
<pre><code class="language-bash">#执行以下命令启动 Redis 服务
redis-server --service-start
</code></pre> 
<p><img alt="650f6e301d1c4d9aa075d9fd1ad05dc6.png" src="https://images2.imgbox.com/7a/92/lRJzR8I1_o.png"></p> 
<p>(10)Redis 已经被添加到 Windows 服务中</p> 
<p><img alt="b77309f2aa214246b83e81213970669e.png" src="https://images2.imgbox.com/de/13/joR5pNOi_o.png"></p> 
<p>(11)打开Redis服务，将启动类型设置为自动，即可实现开机自启动</p> 
<p><img alt="8cec0e57cda84312a1185fe0c8960edd.png" src="https://images2.imgbox.com/6a/36/PfRzFYVV_o.png"></p> 
<p></p> 
<h3 id="2.Python3.8%E7%8E%AF%E5%A2%83%E4%B8%AD%E9%85%8D%E7%BD%AECelery">2.Python3.8环境中配置Celery</h3> 
<p>(1) PyCharm安装celery+redis</p> 
<pre><code class="language-bash">#celery是典型的生产者+消费者的模式，生产者生产任务并加入队列中，消费者取出任务消费。多用于处理异步任务或者定时任务。

#第一种方式
pip install celery
pip install redis

#第二种方式
pip install -i https://pypi.douban.com/simple celery
pip install -i https://pypi.douban.com/simple redis
</code></pre> 
<p><img alt="6fcc1ca414684d29a18adaff6ba30620.png" src="https://images2.imgbox.com/3d/34/a3GiZDA6_o.png"></p> 
<p></p> 
<p>（2）新建异步任务执行文件celery_task.py.相当于注册了celery app</p> 
<pre><code class="language-bash"># -*- coding: utf-8 -*-
from celery import Celery
import time
app = Celery('demo', backend='redis://localhost:6379/1', broker='redis://localhost:6379/2')
@app.task
def send_email(name):
    print("向%s发送邮件..."%name)
    time.sleep(5)
    print("向%s发送邮件完成"%name)
    return "ok"
</code></pre> 
<p><img alt="e2c71ca92a1841818b47e6cb8349db96.png" src="https://images2.imgbox.com/fd/db/rAtV31VN_o.png"></p> 
<p>(3) 在项目文件目录下创建worker消费任务</p> 
<pre><code class="language-bash">PS D:\soft\pythonProject&gt; celery --app=celerypro.celery_task worker -n node1 -l INFO
 
 -------------- celery@node1 v5.3.5 (emerald-rush)
--- ***** -----
-- ******* ---- Windows-10-10.0.22621-SP0 2023-11-22 17:26:39
- *** --- * ---
- ** ---------- [config]
- ** ---------- .&gt; app:         test:0x1e6fa358550
- ** ---------- .&gt; transport:   redis://127.0.0.1:6379/2
- ** ---------- .&gt; results:     redis://127.0.0.1:6379/1
- *** --- * --- .&gt; concurrency: 32 (prefork)
-- ******* ---- .&gt; task events: OFF (enable -E to monitor tasks in this worker)
--- ***** -----
 -------------- [queues]
                .&gt; celery           exchange=celery(direct) key=celery


[tasks]
  . celerypro.celery_task.send_email

[2023-11-22 17:26:39,265: WARNING/MainProcess] d:\soft\python38\lib\site-packages\celery\worker\consumer\consumer.py:507: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
[2023-11-22 20:30:08,249: INFO/MainProcess] mingle: searching for neighbors
[2023-11-22 20:30:15,379: INFO/MainProcess] mingle: all alone
[2023-11-22 20:30:25,608: INFO/MainProcess] celery@node1 ready.
</code></pre> 
<p><img alt="3c72f0c84b774bc6b4698d3546168029.png" src="https://images2.imgbox.com/20/69/L4gUWPU3_o.png"></p> 
<p><img alt="98d51e6e8dd740e495f85fa8298734ca.png" src="https://images2.imgbox.com/b0/3a/ZLXKYtZe_o.png"></p> 
<p></p> 
<p>（4）ctrl+c 退出</p> 
<p><img alt="140565377d5a4ff1b3a34f9026d5ae0f.png" src="https://images2.imgbox.com/8a/cc/1W1BbAZo_o.png"></p> 
<p>（5）修改celery_task.py文件，增加一个task</p> 
<pre><code class="language-bash"># -*- coding: utf-8 -*-
from celery import Celery
import time
app = Celery('demo', backend='redis://localhost:6379/1', broker='redis://localhost:6379/2')
@app.task
def send_email(name):
    print("向%s发送邮件..."%name)
    time.sleep(5)
    print("向%s发送邮件完成"%name)
    return "ok"
@app.task
def send_msg(name):
    print("向%s发送短信..."%name)
    time.sleep(5)
    print("向%s发送邮件完成"%name)
    return "ok"</code></pre> 
<p><img alt="66807234d7e64b8891d82f81bea6cc48.png" src="https://images2.imgbox.com/51/3e/MaNWL75Z_o.png"></p> 
<p>(6)再次在项目文件目录下创建worker消费任务</p> 
<pre><code class="language-bash">PS D:\soft\pythonProject&gt; celery --app=celerypro.celery_task worker -n node1 -l INFO
 
 -------------- celery@node1 v5.3.5 (emerald-rush)
--- ***** ----- 
-- ******* ---- Windows-10-10.0.22621-SP0 2023-11-22 21:01:43
- *** --- * --- 
- ** ---------- [config]
- ** ---------- .&gt; app:         demo:0x29cea446250
- ** ---------- .&gt; transport:   redis://localhost:6379/2
- ** ---------- .&gt; results:     redis://localhost:6379/1
- *** --- * --- .&gt; concurrency: 32 (prefork)
-- ******* ---- .&gt; task events: OFF (enable -E to monitor tasks in this worker)
--- ***** ----- 
 -------------- [queues]
                .&gt; celery           exchange=celery(direct) key=celery
                

[tasks]
  . celerypro.celery_task.send_email
  . celerypro.celery_task.send_msg

[2023-11-22 21:01:43,381: WARNING/MainProcess] d:\soft\python38\lib\site-packages\celery\worker\consumer\consumer.py:507: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
[2023-11-22 21:01:43,612: INFO/SpawnPoolWorker-23] child process 23988 calling self.run()
[2023-11-22 21:01:43,612: INFO/SpawnPoolWorker-17] child process 16184 calling self.run()
[2023-11-22 21:01:43,612: INFO/SpawnPoolWorker-21] child process 22444 calling self.run()
[2023-11-22 21:01:43,612: INFO/SpawnPoolWorker-27] child process 29480 calling self.run()
[2023-11-22 21:01:43,612: INFO/SpawnPoolWorker-24] child process 5844 calling self.run()
[2023-11-22 21:01:43,631: INFO/SpawnPoolWorker-25] child process 8896 calling self.run()
[2023-11-22 21:01:43,634: INFO/SpawnPoolWorker-29] child process 28068 calling self.run()
[2023-11-22 21:01:43,634: INFO/SpawnPoolWorker-28] child process 18952 calling self.run()
[2023-11-22 21:01:43,636: INFO/SpawnPoolWorker-26] child process 13680 calling self.run()
[2023-11-22 21:01:43,638: INFO/SpawnPoolWorker-31] child process 25472 calling self.run()
[2023-11-22 21:01:43,638: INFO/SpawnPoolWorker-30] child process 28688 calling self.run()
[2023-11-22 21:01:43,638: INFO/SpawnPoolWorker-32] child process 10072 calling self.run()
[2023-11-22 21:01:45,401: INFO/MainProcess] Connected to redis://localhost:6379/2
[2023-11-22 21:01:45,401: WARNING/MainProcess] d:\soft\python38\lib\site-packages\celery\worker\consumer\consumer.py:507: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2023-11-22 21:01:49,477: INFO/MainProcess] mingle: searching for neighbors
[2023-11-22 21:01:56,607: INFO/MainProcess] mingle: all alone
[2023-11-22 21:02:04,753: INFO/MainProcess] celery@node1 ready.
</code></pre> 
<p><img alt="0c78eaa6c74c494888757c8050c10bd7.png" src="https://images2.imgbox.com/14/b5/E7ZYW5ru_o.png"></p> 
<p>（6）ctrl+c 退出创建执行任务文件produce_task.py</p> 
<pre><code class="language-bash"># -*- coding: utf-8 -*-
from celerypro.celery_task  import send_email,send_msg
result = send_email.delay("david")
print(result.id)
result2 = send_msg.delay("mao")
print(result2.id)</code></pre> 
<p><img alt="e09e10141a60455ab943cad7e1fae99f.png" src="https://images2.imgbox.com/57/15/l7yyWKDE_o.png"></p> 
<p></p> 
<p>（7）运行produce_task.py</p> 
<p><img alt="5521912205114196b1b4c583d983cb37.png" src="https://images2.imgbox.com/ed/e1/iB2MfMiG_o.png"></p> 
<p>（8）同时取到id值</p> 
<p><img alt="07f8d1c9596b426c8e87cf9550885939.png" src="https://images2.imgbox.com/57/63/oNOsG46n_o.png"></p> 
<p>（9）如遇到报错需要安装包 eventlet</p> 
<pre><code class="language-bash">PS D:\soft\pythonProject&gt; pip install eventlet
</code></pre> 
<p><img alt="8c95c48bc5504bf0b2d648256968509b.png" src="https://images2.imgbox.com/81/e0/We0rnKJA_o.png"><br> （10）重新在项目文件目录下创建worker消费任务</p> 
<pre><code class="language-bash">PS D:\soft\pythonProject&gt; celery --app=celerypro.celery_task worker -n node1 -l INFO -P eventlet
 
 -------------- celery@node1 v5.3.5 (emerald-rush)
--- ***** -----
-- ******* ---- Windows-10-10.0.22621-SP0 2023-11-22 21:29:34
- *** --- * ---
- ** ---------- [config]
- ** ---------- .&gt; app:         demo:0x141511962e0
- ** ---------- .&gt; transport:   redis://localhost:6379/2
- ** ---------- .&gt; results:     redis://localhost:6379/1
- *** --- * --- .&gt; concurrency: 32 (eventlet)
-- ******* ---- .&gt; task events: OFF (enable -E to monitor tasks in this worker)
--- ***** -----
 -------------- [queues]
                .&gt; celery           exchange=celery(direct) key=celery


[tasks]
  . celerypro.celery_task.send_email
  . celerypro.celery_task.send_msg

r_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2023-11-22 21:29:48,022: INFO/MainProcess] pidbox: Connected to redis://localhost:6379/2.
[2023-11-22 21:29:52,117: INFO/MainProcess] celery@node1 ready.
</code></pre> 
<p><br><img alt="b9b48832640a472f8eb3366cdc9fe2dc.png" src="https://images2.imgbox.com/08/86/Dl6LJhU4_o.png"></p> 
<p>（11） 运行produce_task.py</p> 
<p><img alt="5521912205114196b1b4c583d983cb37.png" src="https://images2.imgbox.com/de/7a/18ByT8K5_o.png"></p> 
<p>（12）生成id</p> 
<p><img alt="007b9689be2b46439d14211b0085d0e3.png" src="https://images2.imgbox.com/cd/4e/yUIloT9t_o.png"></p> 
<p>（13）查看任务消息</p> 
<pre><code class="language-bash">[2023-11-22 21:30:35,194: INFO/MainProcess] Task celerypro.celery_task.send_email[c1a473d5-49ac-4468-9370-19226f377e00] received
[2023-11-22 21:30:35,195: WARNING/MainProcess] 向david发送邮件...
[2023-11-22 21:30:35,197: INFO/MainProcess] Task celerypro.celery_task.send_msg[de30d70b-9110-4dfb-bcfd-45a61403357f] received
[2023-11-22 21:30:35,198: WARNING/MainProcess] 向mao发送短信...
[2023-11-22 21:30:40,210: WARNING/MainProcess] 向david发送邮件完成
[2023-11-22 21:30:40,210: WARNING/MainProcess] 向mao发送邮件完成
[2023-11-22 21:30:42,270: INFO/MainProcess] Task celerypro.celery_task.send_msg[de30d70b-9110-4dfb-bcfd-45a61403357f] succeeded in 7.063000000001921s: 'ok'
[2023-11-22 21:30:42,270: INFO/MainProcess] Task celerypro.celery_task.send_email[c1a473d5-49ac-4468-9370-19226f377e00] succeeded in 7.063000000001921s: 'ok'
</code></pre> 
<p><img alt="dd07e64e52474ee9a14aeee201e655fd.png" src="https://images2.imgbox.com/e5/ec/YIsIJJgd_o.png"></p> 
<p>（14）创建py文件：result.py，查看任务执行结果</p> 
<p>取第2个id:de30d70b-9110-4dfb-bcfd-45a61403357f</p> 
<pre><code class="language-bash"># -*- coding: utf-8 -*-
from celery.result import AsyncResult
from celerypro.celery_task import app
async_result = AsyncResult(id="de30d70b-9110-4dfb-bcfd-45a61403357f", app=app)
if async_result.successful():
    result = async_result.get()
    print(result)
elif async_result.failed():
    print('执行失败')
elif async_result.status == 'PENDING':
    print('任务等待中被执行')
elif async_result.status == 'RETRY':
    print('任务异常后正在重试')
elif async_result.status == 'STARTED':
    print('任务已经开始被执行')</code></pre> 
<h2 id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="3cb2468f7ef94b5596325b7a77c40382.png" src="https://images2.imgbox.com/74/af/pSSC4CIC_o.png"></h2> 
<p>(15) 运行result.py文件</p> 
<p><img alt="f4278e4abcf34edc95c652941ef3646f.png" src="https://images2.imgbox.com/88/d5/uYFxPKql_o.png"></p> 
<p>（16）输出ok</p> 
<p><img alt="de18aec5d2bf43b4acb8fb91a82b1711.png" src="https://images2.imgbox.com/b9/3f/zPGqhqza_o.png"></p> 
<p>（17）Redis可视化界面查看最后2次的task</p> 
<p><img alt="" height="655" src="https://images2.imgbox.com/bf/8f/pHeFbz2p_o.png" width="1200"></p> 
<p><img alt="" height="649" src="https://images2.imgbox.com/11/88/ACJ2n4BL_o.png" width="1200"></p> 
<p></p> 
<p></p> 
<h3 id="3.celery%E7%9A%84%E5%A4%9A%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%BC%82%E6%AD%A5%E6%89%A7%E8%A1%8C">3.celery的多目录结构异步执行</h3> 
<p>（1）原目录结构</p> 
<p class="img-center"><img alt="" height="129" src="https://images2.imgbox.com/a8/03/zlGpk9Wb_o.png" width="332"></p> 
<p>（2）优化目录结构</p> 
<p class="img-center"><img alt="" height="282" src="https://images2.imgbox.com/8c/9f/oNLBFFyw_o.png" width="315"></p> 
<p>（3）消费者celery_main.py</p> 
<pre><code class="language-bash"># -*- coding: utf-8 -*-
#消费者
from celery import Celery
app = Celery('celery_demo',
             backend='redis://localhost:6379/1',
             broker='redis://localhost:6379/2',
             include=['celery_tasks.task01',
                     'celery_tasks.task02'
             ]
             )
# 时区
app.conf.timezone = 'Asia/Shanghai'
# 是否使用UTC
app.conf.enable_utc = False</code></pre> 
<p><img alt="" height="610" src="https://images2.imgbox.com/33/89/aNmmVlKJ_o.png" width="921"></p> 
<p>(2)  任务一task01.py</p> 
<pre><code class="language-bash"># -*- coding: utf-8 -*-
#task01
import time
from celery_tasks.celery_main import app
@app.task
def send_email(res):
    print("完成向%s发送邮件任务"%res)
    time.sleep(5)
    return "邮件完成！"</code></pre> 
<p><img alt="" height="457" src="https://images2.imgbox.com/82/e0/rf9fQQdX_o.png" width="868"></p> 
<p>(3) 任务二task02.py</p> 
<pre><code class="language-bash"># -*- coding: utf-8 -*-
#task02
import time
from celery_tasks.celery_main import app
@app.task
def send_msg(name):
    print("完成向%s发送短信任务"%name)
    time.sleep(5)
    return "短信完成！"</code></pre> 
<p><img alt="" height="438" src="https://images2.imgbox.com/38/64/FRVu3kTm_o.png" width="805"></p> 
<p>（4） 在项目文件目录下创建worker消费任务</p> 
<pre><code class="language-bash">PS D:\soft\pythonProject\CeleryMTask&gt; celery --app=celery_tasks.celery worker -n node1 -l INFO -P eventlet
</code></pre> 
<p><img alt="" height="997" src="https://images2.imgbox.com/34/ad/NoiHmV7d_o.png" width="1200"></p> 
<p></p> 
<p>（5）生产者produce_task.py</p> 
<pre><code class="language-bash"># -*- coding: utf-8 -*-
# 生产者
from CeleryMTask import celery_tasks
from celery_tasks.task01 import send_email
from celery_tasks.task02 import send_msg
result = send_email.delay("jack")
print(result.id)
result2 = send_msg.delay("alice")
print(result2.id)</code></pre> 
<h2><img alt="" height="475" src="https://images2.imgbox.com/dc/55/wY7ACMq2_o.png" width="832"></h2> 
<p>(5)运行生产者生产者produce_task.py</p> 
<p><img alt="" height="604" src="https://images2.imgbox.com/3d/0f/FqFcoCmA_o.png" width="1200"></p> 
<p></p> 
<p>（6） 异步结果检查check_result</p> 
<pre><code class="language-bash"># -*- coding: utf-8 -*-
# 异步结果检查
from celery.result import AsyncResult
from celery_tasks.celery_main import app
async_result = AsyncResult(id="bb906153-822a-4bd5-aacd-2f2172d3003a", app=app)
if async_result.successful():
    result = async_result.get()
    print(result)
elif async_result.failed():
    print('执行失败')
elif async_result.status == 'PENDING':
    print('任务等待中被执行')
elif async_result.status == 'RETRY':
    print('任务异常后正在重试')
elif async_result.status == 'STARTED':
    print('任务已经开始被执行')</code></pre> 
<p><img alt="" height="642" src="https://images2.imgbox.com/b5/19/zRG89AEh_o.png" width="1133"><br>  </p> 
<p>(7) 运行异步结果检查check_result</p> 
<p></p> 
<p><img alt="" height="654" src="https://images2.imgbox.com/30/d5/BJEr2Ina_o.png" width="1200"></p> 
<p>（8）查看运行结果</p> 
<p><img alt="" height="171" src="https://images2.imgbox.com/9b/64/nWL7ryRH_o.png" width="1200"></p> 
<p>（8）查看Terminal输出</p> 
<p><img alt="" height="329" src="https://images2.imgbox.com/03/82/GPBsCp8t_o.png" width="1200"></p> 
<p></p> 
<h3 id="4.celery%E7%AE%80%E5%8D%95%E7%BB%93%E6%9E%84%E4%B8%8B%E7%9A%84%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1">4.celery简单结构下的定时任务</h3> 
<p>（1）基于celerypro简单结构，源目录结构如下</p> 
<p class="img-center"><img alt="" height="129" src="https://images2.imgbox.com/93/80/nlzXONMi_o.png" width="332"></p> 
<p>（2） 设定时间让celery执行一个定时任务，新建time.py</p> 
<pre><code class="language-bash"># -*- coding: utf-8 -*-
from celerypro.celery_task import send_email
from datetime import datetime
v1 = datetime(2023, 11, 24, 20, 7, 00)
print(v1)
# 时间戳timestamp，国标时间方法utcfromtimestamp，
v2 = datetime.utcfromtimestamp(v1.timestamp())
print(v2)
#调异步任务建议用delay方法，掉定时任务建议用apply_async方法来接纳更多参数，
#参数放列表，eta接收时间对象
result = send_email.apply_async(args=["leon",], eta=v2)
print(result.id)</code></pre> 
<p><img alt="" height="536" src="https://images2.imgbox.com/92/ca/j0RVpoLN_o.png" width="1004"></p> 
<p>（3）在项目文件目录下创建worker消费任务</p> 
<pre><code class="language-bash">PS D:\soft\pythonProject&gt; celery --app=celerypro.celery_task worker -n node1 -l INFO -P eventlet
</code></pre> 
<p><img alt="" height="771" src="https://images2.imgbox.com/c5/38/ob1cuCYU_o.png" width="1200"></p> 
<p>（4）运行time.py文件</p> 
<p><img alt="" height="547" src="https://images2.imgbox.com/fe/1a/qRatSkq4_o.png" width="1180"></p> 
<p></p> 
<p>（5）查看RUN运行结果</p> 
<p><img alt="" height="525" src="https://images2.imgbox.com/8d/11/1TeYEtC0_o.png" width="1200"></p> 
<p></p> 
<p>（6）等待指定时间，查看Terminal</p> 
<p><img alt="" height="236" src="https://images2.imgbox.com/8d/21/u9kLWioi_o.png" width="1200"></p> 
<p>（7） 利用时差方式让celery执行一个定时任务，修改time.py</p> 
<pre><code class="language-bash"># -*- coding: utf-8 -*-
from celerypro.celery_task import send_email
from datetime import datetime
from datetime import timedelta
#当前时间
ctime = datetime.now()
# 默认用utc时间
# 时间戳timestamp，国标时间方法utcfromtimestamp，
utc_ctime = datetime.utcfromtimestamp(ctime.timestamp())
#时差
time_delay = timedelta(seconds=10)
task_time = utc_ctime + time_delay
# 使用apply_async并设定时间
result = send_email.apply_async(args=["bale"], eta=task_time)
print(result.id)</code></pre> 
<p><img alt="" height="620" src="https://images2.imgbox.com/c9/98/WBGhtP2P_o.png" width="1039"></p> 
<p>（8）运行time.py文件</p> 
<p><img alt="" height="652" src="https://images2.imgbox.com/26/80/UpIXGUmE_o.png" width="1165"></p> 
<p>（9）查看RUN运行结果</p> 
<p><img alt="" height="352" src="https://images2.imgbox.com/19/d1/7xjxlvic_o.png" width="1200"></p> 
<p>（10）等待10秒，查看Terminal</p> 
<p><img alt="" height="205" src="https://images2.imgbox.com/36/f9/yyOIblsp_o.png" width="1200"></p> 
<p>（11）Redis可视化界面查看最后2次的task</p> 
<p><img alt="" height="643" src="https://images2.imgbox.com/97/c1/41gpWlO0_o.png" width="1200"></p> 
<p><img alt="" height="649" src="https://images2.imgbox.com/73/f0/k5jb8jal_o.png" width="1200"></p> 
<p></p> 
<h2 id="%E4%B8%89%E3%80%81%E9%97%AE%E9%A2%98">三、问题</h2> 
<h3 id="1.Celery%E5%91%BD%E4%BB%A4%E6%8A%A5%E9%94%99">1.Celery命令报错</h3> 
<p>（1）报错</p> 
<p><img alt="66136da541e742eeb913a0b4ddba106f.png" src="https://images2.imgbox.com/57/7c/xHp3gG17_o.png"></p> 
<p><img alt="428d102f7add401fbf1c8c695e690f0e.png" src="https://images2.imgbox.com/c0/7b/GTo1Cz36_o.png"></p> 
<p>（2）原因分析</p> 
<p>celery版本不同命令不同。</p> 
<p>查看帮助命令</p> 
<pre><code class="language-bash">PS D:\soft\pythonProject&gt; celery --help
Usage: celery [OPTIONS] COMMAND [ARGS]...

  Celery command entrypoint.

Options:
  -A, --app APPLICATION
  -b, --broker TEXT
  --result-backend TEXT
  --loader TEXT
  --config TEXT
  --workdir PATH
  -C, --no-color
  -q, --quiet
  --version
  --skip-checks          Skip Django core checks on startup. Setting the
                         SKIP_CHECKS environment variable to any non-empty
                         string will have the same effect.
  --help                 Show this message and exit.

Commands:
  amqp     AMQP Administration Shell.
  beat     Start the beat periodic task scheduler.
  call     Call a task by name.
  control  Workers remote control.
  events   Event-stream utilities.
  graph    The ``celery graph`` command.
  inspect  Inspect the worker at runtime.
  list     Get info from broker.
  logtool  The ``celery logtool`` command.
  migrate  Migrate tasks from one broker to another.
  multi    Start multiple worker instances.
  purge    Erase all messages from all known task queues.
  report   Shows information useful to include in bug-reports.
  result   Print the return value for a given task id.
  shell    Start shell session with convenient access to celery symbols.
  status   Show list of workers that are online.
  upgrade  Perform upgrade between versions.
  worker   Start worker instance.
</code></pre> 
<pre><code class="language-bash">PS D:\soft\pythonProject&gt; celery  worker --help
Usage: celery worker [OPTIONS]

  Start worker instance.

  Examples
  --------

  $ celery --app=proj worker -l INFO
  $ celery -A proj worker -l INFO -Q hipri,lopri
  $ celery -A proj worker --concurrency=4
  $ celery -A proj worker --concurrency=1000 -P eventlet
  $ celery worker --autoscale=10,0

Worker Options:
  -n, --hostname HOSTNAME         Set custom hostname (e.g., 'w1@%%h').
                                  Expands: %%h (hostname), %%n (name) and %%d,
                                  (domain).
  -D, --detach                    Start worker as a background process.
  -S, --statedb PATH              Path to the state database. The extension
                                  '.db' may be appended to the filename.
  -l, --loglevel [DEBUG|INFO|WARNING|ERROR|CRITICAL|FATAL]
                                  Logging level.
  -O, --optimization [default|fair]
                                  Apply optimization profile.
  --prefetch-multiplier &lt;prefetch multiplier&gt;
                                  Set custom prefetch multiplier value for
                                  this worker instance.

Pool Options:
  -c, --concurrency &lt;concurrency&gt;
                                  Number of child processes processing the
                                  queue.  The default is the number of CPUs
                                  available on your system.
  -P, --pool [prefork|eventlet|gevent|solo|processes|threads|custom]
                                  Pool implementation.
  -E, --task-events, --events     Send task-related events that can be
                                  captured by monitors like celery events,
                                  celerymon, and others.
  --time-limit FLOAT              Enables a hard time limit (in seconds
                                  int/float) for tasks.
  --soft-time-limit FLOAT         Enables a soft time limit (in seconds
                                  int/float) for tasks.
  --max-tasks-per-child INTEGER   Maximum number of tasks a pool worker can
                                  execute before it's terminated and replaced
                                  by a new worker.
  --max-memory-per-child INTEGER  Maximum amount of resident memory, in KiB,
                                  that may be consumed by a child process
                                  before it will be replaced by a new one.  If
                                  a single task causes a child process to
                                  exceed this limit, the task will be
                                  completed and the child process will be
                                  replaced afterwards. Default: no limit.
  --scheduler TEXT

Daemonization Options:
  -f, --logfile TEXT  Log destination; defaults to stderr
  --pidfile TEXT
  --uid TEXT
  --gid TEXT
  --umask TEXT
  --executable TEXT

Options:
  --help  Show this message and exit.
</code></pre> 
<p>（3）解决方法</p> 
<p>修改命令</p> 
<pre><code class="language-bash">PS D:\soft\pythonProject&gt; celery --app=celerypro.celery_task worker -n node1 -l INFO
</code></pre> 
<p>成功</p> 
<p><img alt="577654ea7a024e639f347a4282e8da16.png" src="https://images2.imgbox.com/3d/4e/l0Iy3pHS_o.png"></p> 
<p></p> 
<h3 id="2.%E6%89%A7%E8%A1%8CCelery%E5%91%BD%E4%BB%A4%E6%8A%A5%E9%94%99">2.执行Celery命令报错</h3> 
<p>（1）报错</p> 
<p>AttributeError: 'NoneType' object has no attribute 'Redis'</p> 
<p><img alt="5f0ebb3ce11b46969600d1af9d0a2b31.png" src="https://images2.imgbox.com/e6/c5/sXol2NUV_o.png"></p> 
<p></p> 
<p>（2）原因分析</p> 
<p>PyCharm未安装redis插件。</p> 
<p>（3）解决方法</p> 
<p>安装redis插件</p> 
<p><img alt="d2610162bdb04d24aa06a5941fa820de.png" src="https://images2.imgbox.com/fb/9d/wvtTJCko_o.png"></p> 
<p></p> 
<h3 id="3.Win11%E5%90%AF%E5%8A%A8Celery%E6%8A%A5ValueErro%E9%94%99%E8%AF%AF">3.Win11启动Celery报ValueErro错误</h3> 
<p>（1）报错</p> 
<p>Windows 在开发 Celery 异步任务，通过命令<code> celery --app=celerypro.celery_task worker -n node1 -l INFO </code>启动 Celery 服务后正常；</p> 
<p>但在使用 delay() 调用任务时会出现以下报错信息：</p> 
<p>Task handler raised error: ValueError('not enough values to unpack (expected 3, got 0)')<br>  </p> 
<p><img alt="388cc7dd79524e98b34cfacbe7cb594a.png" src="https://images2.imgbox.com/3a/ec/SRzSPIZI_o.png"></p> 
<p>（2）原因分析</p> 
<p>PyCharm未安装<strong>eventlet</strong></p> 
<p>（3）解决方法</p> 
<p>安装包 eventlet</p> 
<pre><code class="language-bash">pip install eventlet</code></pre> 
<p><img alt="6c57942c19d44ded89153a51b9e3e41b.png" src="https://images2.imgbox.com/70/10/DGpomIxr_o.png"></p> 
<p>通过以下命令启动服务</p> 
<pre><code class="language-bash">celery --app=celerypro.celery_task worker -n node1 -l INFO -P eventlet
</code></pre> 
<p><img alt="0565710b258946c48643a046ea458b0f.png" src="https://images2.imgbox.com/7f/ad/1m9tWzza_o.png"></p> 
<h3 id="4.Pycharm%20%E6%97%A0%E6%B3%95%20import%20%E5%90%8C%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%20.py%20%E6%96%87%E4%BB%B6%E6%88%96%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97">4.Pycharm 无法 import 同目录下的 .py 文件或自定义模块</h3> 
<p>（1）报错</p> 
<p><img alt="" height="81" src="https://images2.imgbox.com/03/fd/rbzUuO4f_o.png" width="881"></p> 
<p>（2）原因分析</p> 
<p>pycharm 默认情况下只检索项目根目录下的py文件，当引用的py文件不在项目根目录时，，会出现错误。</p> 
<p>（3）解决方法</p> 
<p>需将要引用的py文件所在的文件夹添加到默认搜索搜索文件夹即可：</p> 
<p>方法一</p> 
<pre><code class="language-bash">右键py文件所在的文件夹，依次点击：MarkDircetory as -&gt; Sources Root</code></pre> 
<p><img alt="" height="128" src="https://images2.imgbox.com/43/a8/jXp0MitO_o.png" width="651"></p> 
<p>方法二</p> 
<p>将py文件所在文件夹作为一个package，在py文件所在文件夹下新建__init__.py文件，在__init__.py中添加如下语句：</p> 
<pre><code class="language-bash">from [py文件所在文件夹名].[py文件名] import 模块名</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b96bf61b91e4b2b5f127cc233aa8e612/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深度优先遍历和广度优先遍历</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/55c6805d4bc68b081fd6c92e42835c5c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VS选择Visual C&#43;&#43;中的控制台项目和空项目、Windows桌面应用程序三者之间有什么区别？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>