<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Oracle学习笔记之显式游标和隐式游标 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Oracle学习笔记之显式游标和隐式游标" />
<meta property="og:description" content="游标的概念: 游标是SQL的一个内存工作区，由系统或用户以变量的形式定义。游标的作用就是用于临时存储从数据库中提取的数据块。在某些情况下，需要把数据从存放在磁盘的表中调到计算机内存中进行处理，最后将处理结果显示出来或最终写回数据库。这样数据处理的速度才会提高，否则频繁的磁盘数据交换会降低效率。 游标有两种类型：显式游标和隐式游标。我们常用到的SELECT...INTO...查询语句，一次只能从数据库中提取一行数据，对于这种形式的查询和DML操作，系统都会使用一个隐式游标。但是如果要提取多行数据，就要由程序员定义一个显式游标，并通过与游标有关的语句进行处理。显式游标对应一个返回结果为多行多列的SELECT语句。 游标一旦打开，数据就从数据库中传送到游标变量中，然后应用程序再从游标变量中分解出需要的数据，并进行处理。 隐式游标 如前所述，DML操作和单行SELECT语句会使用隐式游标，它们是： * 插入操作：INSERT。 * 更新操作：UPDATE。 * 删除操作：DELETE。 * 单行查询操作：SELECT ... INTO ...。 当系统使用一个隐式游标时，可以通过隐式游标的属性来了解操作的状态和结果，进而控制程序的流程。隐式游标可以使用名字SQL来访问，但要注意，通过SQL游标名总是只能访问前一个DML操作或单行SELECT操作的游标属性。所以通常在刚刚执行完操作之后，立即使用SQL游标名来访问属性。游标的属性有四种，如下所示:
sql%found （布尔类型，默认值为null）
sql%notfound（布尔类型,默认值为null）
sql%rowcount(数值类型默认值为0)
sql%isopen(布尔类型)
当执行一条DML语句后，DML语句的结果保存在四个游标属性中，这些属性用于控制程序流程或者了解程序的状态。当运行DML语句时，PL/SQL打开一个内建游标并处理结果，游标是维护查询结果的内存中的一个区域，游标在运行DML语句时打开，完成后关闭。隐式游标只使用SQL%FOUND,SQL%NOTFOUND,SQL%ROWCOUNT三个属性.SQL%FOUND,SQL%NOTFOUND是布尔值，SQL%ROWCOUNT是整数值。
SQL%FOUND和SQL%NOTFOUND
在执行任何DML语句前SQL%FOUND和SQL%NOTFOUND的值都是NULL,在执行DML语句后，SQL%FOUND的属性值将是：
. TRUE :INSERT
. TRUE :DELETE和UPDATE，至少有一行被DELETE或UPDATE.
. TRUE :SELECT INTO至少返回一行
当SQL%FOUND为TRUE时,SQL%NOTFOUND为FALSE。
SQL%ROWCOUNT
在执行任何DML语句之前，SQL%ROWCOUNT的值都是NULL,对于SELECT INTO语句，如果执行成功，SQL%ROWCOUNT的值为1,如果没有成功或者没有操作(如update、insert、delete为0条），SQL%ROWCOUNT的值为0，而对于update和delete来说表示游标所检索数据库行的个数即更新或者删除的行数。
SQL%ISOPEN
SQL%ISOPEN是一个布尔值，如果游标打开，则为TRUE, 如果游标关闭，则为FALSE.对于隐式游标而言SQL%ISOPEN总是FALSE，这是因为隐式游标在DML语句执行时打开，结束时就立即关闭。
最后我们来说一下隐式游标中SELECT..INTO 语句，当执行的时候会有三种可能：
（1).结果集只含有一行，且select是成功的
(2).没有查询到任何结果集，引发NO_DATA_FOUND异常
(3).结果集中含有两行或者更多行，引发TOO_MANY_ROWS异常。
例子:
BEGIN UPDATE exchangerate SET rate=7 where quarter=&#39;2011Q1&#39;;
DBMS_output.put_line(&#39;游标所影响的行数：&#39;||SQL%rowcount); if SQL%NotFound then DBMS_output.put_line(&#39;NotFound为真&#39;); DBMS_output.put_line(&#39;NofFound为假&#39;); end if; if SQL%Found then DBMS_output.put_line(&#39;Found为真&#39;); else DBMS_output." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/26831fd88c1a46c129d8adbae99eb9fe/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-05-22T11:27:00+08:00" />
<meta property="article:modified_time" content="2013-05-22T11:27:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Oracle学习笔记之显式游标和隐式游标</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p><strong><span style="font-size:15px;">游标的概念</span></strong>: </p> 
 <p>     游标是SQL的一个内存工作区，由系统或用户以变量的形式定义。游标的作用就是用于临时存储从数据库中提取的数据块。在某些情况下，需要把数据从存放在磁盘的表中调到计算机内存中进行处理，最后将处理结果显示出来或最终写回数据库。这样数据处理的速度才会提高，否则频繁的磁盘数据交换会降低效率。 <br> 游标有两种类型：显式游标和隐式游标。我们常用到的SELECT...INTO...查询语句，一次只能从数据库中提取一行数据，对于这种形式的查询和DML操作，系统都会使用一个隐式游标。但是如果要提取多行数据，就要由程序员定义一个显式游标，并通过与游标有关的语句进行处理。显式游标对应一个返回结果为多行多列的SELECT语句。 <br> 游标一旦打开，数据就从数据库中传送到游标变量中，然后应用程序再从游标变量中分解出需要的数据，并进行处理。 </p> 
 <p><span style="font-size:15px;"><strong>隐式游标</strong></span> </p> 
 <p><br> 如前所述，DML操作和单行SELECT语句会使用隐式游标，它们是： <br> * 插入操作：INSERT。 <br> * 更新操作：UPDATE。 <br> * 删除操作：DELETE。 <br> * 单行查询操作：SELECT ... INTO ...。 <br> 当系统使用一个隐式游标时，可以通过隐式游标的属性来了解操作的状态和结果，进而控制程序的流程。隐式游标可以使用名字SQL来访问，但要注意，通过SQL游标名总是只能访问前一个DML操作或单行SELECT操作的游标属性。所以通常在刚刚执行完操作之后，立即使用SQL游标名来访问属性。游标的属性有四种，如下所示:</p> 
 <p>sql%found （布尔类型，默认值为null）</p> 
 <p>sql%notfound（布尔类型,默认值为null）</p> 
 <p>sql%rowcount(数值类型默认值为0)</p> 
 <p>sql%isopen(布尔类型)</p> 
 <p>当执行一条DML语句后，DML语句的结果保存在四个游标属性中，这些属性用于控制程序流程或者了解程序的状态。当运行DML语句时，PL/SQL打开一个内建游标并处理结果，游标是维护查询结果的内存中的一个区域，游标在运行DML语句时打开，完成后关闭。隐式游标只使用SQL%FOUND,SQL%NOTFOUND,SQL%ROWCOUNT三个属性.SQL%FOUND,SQL%NOTFOUND是布尔值，SQL%ROWCOUNT是整数值。</p> 
 <p>SQL%FOUND和SQL%NOTFOUND</p> 
 <p>在执行任何DML语句前SQL%FOUND和SQL%NOTFOUND的值都是NULL,在执行DML语句后，SQL%FOUND的属性值将是：</p> 
 <p>     . TRUE :INSERT</p> 
 <p>　　. TRUE :DELETE和UPDATE，至少有一行被DELETE或UPDATE.</p> 
 <p>　　. TRUE :SELECT INTO至少返回一行</p> 
 <p>　当SQL%FOUND为TRUE时,SQL%NOTFOUND为FALSE。</p> 
 <p> SQL%ROWCOUNT</p> 
 <p>　　在执行任何DML语句之前，SQL%ROWCOUNT的值都是NULL,对于SELECT INTO语句，如果执行成功，SQL%ROWCOUNT的值为1,如果没有成功或者没有操作(如update、insert、delete为0条），SQL%ROWCOUNT的值为0，而对于update和delete来说表示游标所检索<a href="http://www.2cto.com/database/" rel="nofollow">数据库</a>行的个数即更新或者删除的行数。</p> 
 <p>SQL%ISOPEN</p> 
 <p>　　SQL%ISOPEN是一个布尔值，如果游标打开，则为TRUE, 如果游标关闭，则为FALSE.对于隐式游标而言SQL%ISOPEN总是FALSE，这是因为隐式游标在DML语句执行时打开，结束时就立即关闭。</p> 
 <p> 最后我们来说一下隐式游标中SELECT..INTO 语句，当执行的时候会有三种可能：</p> 
 <p>（1).结果集只含有一行，且select是成功的</p> 
 <p> (2).没有查询到任何结果集，引发NO_DATA_FOUND异常</p> 
 <p> (3).结果集中含有两行或者更多行，引发TOO_MANY_ROWS异常。</p> 
 <p>例子:</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#0000ff;">BEGIN</span>
     <span style="color:#0000ff;">UPDATE</span> exchangerate <span style="color:#0000ff;">SET</span> rate<span style="color:#808080;">=</span><span style="color:#800000;font-weight:bold;">7</span> <span style="color:#0000ff;">where</span> quarter<span style="color:#808080;">=</span><span style="color:#ff0000;">'</span><span style="color:#ff0000;">2011Q1</span><span style="color:#ff0000;">'</span><span style="color:#000000;">;<br>
     DBMS_output.put_line(</span><span style="color:#ff0000;">'</span><span style="color:#ff0000;">游标所影响的行数：</span><span style="color:#ff0000;">'</span><span style="color:#808080;">||</span>SQL<span style="color:#808080;">%</span><span style="color:#0000ff;">rowcount</span><span style="color:#000000;">);
      </span><span style="color:#0000ff;">if</span> SQL<span style="color:#808080;">%</span>NotFound <span style="color:#0000ff;">then</span><span style="color:#000000;">

         DBMS_output.put_line(</span><span style="color:#ff0000;">'</span><span style="color:#ff0000;">NotFound为真</span><span style="color:#ff0000;">'</span><span style="color:#000000;">);

         DBMS_output.put_line(</span><span style="color:#ff0000;">'</span><span style="color:#ff0000;">NofFound为假</span><span style="color:#ff0000;">'</span><span style="color:#000000;">);   
      </span><span style="color:#0000ff;">end</span> <span style="color:#0000ff;">if</span><span style="color:#000000;">;
      </span><span style="color:#0000ff;">if</span> SQL<span style="color:#808080;">%</span>Found <span style="color:#0000ff;">then</span><span style="color:#000000;">
           DBMS_output.put_line(</span><span style="color:#ff0000;">'</span><span style="color:#ff0000;">Found为真</span><span style="color:#ff0000;">'</span><span style="color:#000000;">);
      </span><span style="color:#0000ff;">else</span><span style="color:#000000;">
           DBMS_output.put_line(</span><span style="color:#ff0000;">'</span><span style="color:#ff0000;">Found为假</span><span style="color:#ff0000;">'</span><span style="color:#000000;">);
      </span><span style="color:#0000ff;">end</span> <span style="color:#0000ff;">if</span><span style="color:#000000;">;
      </span><span style="color:#0000ff;">if</span> SQL<span style="color:#808080;">%</span>isopen <span style="color:#0000ff;">then</span><span style="color:#000000;">
           DBMS_output.put_line(</span><span style="color:#ff0000;">'</span><span style="color:#ff0000;">isOpen为真</span><span style="color:#ff0000;">'</span><span style="color:#000000;">);
      </span><span style="color:#0000ff;">else</span><span style="color:#000000;">
           DBMS_output.put_line(</span><span style="color:#ff0000;">'</span><span style="color:#ff0000;">isOpen为假</span><span style="color:#ff0000;">'</span><span style="color:#000000;">);
      </span><span style="color:#0000ff;">end</span> <span style="color:#0000ff;">if</span><span style="color:#000000;">;
</span><span style="color:#0000ff;">END</span>;</pre> 
 </div> 
 <p><span style="font-size:15px;"><strong>显式游标:<br></strong></span><br> 游标的定义和操作 <br> 游标的使用分成以下4个步骤。 </p> 
 <p> 1．声明游标 </p> 
 <p><br> 在DECLEAR部分按以下格式声明游标： <br> CURSOR 游标名[(参数1 数据类型[，参数2 数据类型...])] <br> IS SELECT语句; <br> 参数是可选部分，所定义的参数可以出现在SELECT语句的WHERE子句中。如果定义了参数，则必须在打开游标时传递相应的实际参数。 <br> SELECT语句是对表或视图的查询语句，甚至也可以是联合查询。可以带WHERE条件、ORDER BY或GROUP BY等子句，但不能使用INTO子句。在SELECT语句中可以使用在定义游标之前定义的变量。</p> 
 <p> <br> 2．打开游标 </p> 
 <p><br> 在可执行部分，按以下格式打开游标： <br> OPEN 游标名[(实际参数1[，实际参数2...])]; <br> 打开游标时，SELECT语句的查询结果就被传送到了游标工作区。 </p> 
 <p><br> 3．提取数据 </p> 
 <p><br> 在可执行部分，按以下格式将游标工作区中的数据取到变量中。提取操作必须在打开游标之后进行。 <br> FETCH 游标名 INTO 变量名1[，变量名2...]; <br> 或 <br> FETCH 游标名 INTO 记录变量; <br> 游标打开后有一个指针指向数据区，FETCH语句一次返回指针所指的一行数据，要返回多行需重复执行，可以使用循环语句来实现。控制循环可以通过判断游标的属性来进行。 <br> 下面对这两种格式进行说明： <br> 第一种格式中的变量名是用来从游标中接收数据的变量，需要事先定义。变量的个数和类型应与SELECT语句中的字段变量的个数和类型一致。 <br> 第二种格式一次将一行数据取到记录变量中，需要使用%ROWTYPE事先定义记录变量，这种形式使用起来比较方便，不必分别定义和使用多个变量。 <br> 定义记录变量的方法如下： <br> 变量名 表名|游标名%ROWTYPE； <br> 其中的表必须存在，游标名也必须先定义。 </p> 
 <p><br> 4．关闭游标 </p> 
 <p><br> CLOSE 游标名; <br> 显式游标打开后，必须显式地关闭。游标一旦关闭，游标占用的资源就被释放，游标变成无效，必须重新打开才能使用。 </p> 
 <p>现在通过一个例子来学习一下显示游标的使用方法：</p> 
 <p>有一个表原来结构是如下的 </p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#0000ff;">create</span> <span style="color:#0000ff;">table</span><span style="color:#000000;"> EXCHANGERATE
(
  QUARTER      </span><span style="color:#0000ff;">VARCHAR2</span>(<span style="color:#800000;font-weight:bold;">20</span><span style="color:#000000;">),
  RATE         </span><span style="color:#0000ff;">NUMBER</span>(<span style="color:#800000;font-weight:bold;">10</span>,<span style="color:#800000;font-weight:bold;">4</span><span style="color:#000000;">),
  DESCRIPTION  </span><span style="color:#0000ff;">VARCHAR2</span>(<span style="color:#800000;font-weight:bold;">900</span><span style="color:#000000;">),
  ID           </span><span style="color:#0000ff;">VARCHAR2</span>(<span style="color:#800000;font-weight:bold;">10</span>) <span style="color:#808080;">not</span> <span style="color:#0000ff;">null</span><span style="color:#000000;">,
  CURRENCY     </span><span style="color:#0000ff;">VARCHAR2</span>(<span style="color:#800000;font-weight:bold;">100</span><span style="color:#000000;">)
)</span></pre> 
 </div> 
 <p>这是一个汇率表里面维护着的是季度 币种和汇率的关系，现在有一个新的需求是在原来表的基础上增加一列名字为currentmonth，变为季度、季度中月份、 币种和汇率的关系，</p> 
 <p>并且使原来每个季度对应的币种和汇率变成每个季度 对应该季度月份 币种和汇率，每个月的默认值为原来季度对应的值。</p> 
 <p>例如 原来 2013Q2 CNY 6.2</p> 
 <p>现在我们要变为2013Q2 2013-04 CNY 6.2  2013Q2 2013-05 CNY 6.2</p> 
 <p>2013Q2 2013-06 CNY 6.2  三条记录。</p> 
 <p>通过分析以上需求，我们首先要增加一列：</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#0000ff;">alter</span> <span style="color:#0000ff;">table</span> exchangerate <span style="color:#0000ff;">add</span> currentmonth <span style="color:#0000ff;">varchar2</span>(<span style="color:#800000;font-weight:bold;">20</span>);</pre> 
 </div> 
 <p>然后我们通过在匿名块中通过显示游标来实现以上需求:</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#0000ff;">declare</span><span style="color:#000000;">

 v_year </span><span style="color:#0000ff;">varchar2</span>(<span style="color:#800000;font-weight:bold;">20</span><span style="color:#000000;">);
 v_month </span><span style="color:#0000ff;">number</span><span style="color:#000000;">;
 p_rate exchangerate</span><span style="color:#808080;">%</span><span style="color:#000000;">rowtype;<br></span><span style="color:#0000ff;">cursor</span> c_rate <span style="color:#0000ff;">is</span>  <span style="color:#0000ff;">select</span> <span style="color:#808080;">*</span> <span style="color:#0000ff;">from</span> exchangerate t <span style="color:#0000ff;">where</span> t.currentmonth <span style="color:#0000ff;">is</span> <span style="color:#0000ff;">null</span><span style="color:#000000;">;<br></span><span style="color:#0000ff;">begin</span>
   <span style="color:#0000ff;">open</span><span style="color:#000000;"> c_rate;
    loop<br></span><span style="color:#0000ff;">fetch</span> c_rate <span style="color:#0000ff;">into</span><span style="color:#000000;"> p_rate;
    v_year:</span><span style="color:#808080;">=</span>substr(p_rate.quarter, <span style="color:#800000;font-weight:bold;">0</span>, <span style="color:#800000;font-weight:bold;">4</span><span style="color:#000000;">);
    v_month:</span><span style="color:#808080;">=</span>(to_number(substr(p_rate.quarter,<span style="color:#800000;font-weight:bold;">6</span>,<span style="color:#800000;font-weight:bold;">1</span>)) <span style="color:#808080;">-</span> <span style="color:#800000;font-weight:bold;">1</span>) <span style="color:#808080;">*</span> <span style="color:#800000;font-weight:bold;">3</span><span style="color:#000000;">;<br></span><span style="color:#0000ff;">for</span> i <span style="color:#808080;">in</span> <span style="color:#800000;font-weight:bold;">1</span> .. <span style="color:#800000;font-weight:bold;">3</span><span style="color:#000000;"> loop

    </span><span style="color:#0000ff;">insert</span> <span style="color:#0000ff;">into</span> exchangerate(id,quarter,currentmonth,rate,currency,Description)<br><span style="color:#0000ff;">values</span>(SEQUENCE_EXCHANGERATE.nextval,p_rate.quarter,<br>           to_char(to_date(v_year<span style="color:#808080;">||</span>(v_month<span style="color:#808080;">+</span>i),<span style="color:#ff0000;">'</span><span style="color:#ff0000;">yyyyMM</span><span style="color:#ff0000;">'</span>),<span style="color:#ff0000;">'</span><span style="color:#ff0000;">yyyy-MM</span><span style="color:#ff0000;">'</span><span style="color:#000000;">),p_rate.rate,p_rate.currency,p_rate.description);
     
    </span><span style="color:#0000ff;">end</span><span style="color:#000000;"> loop; <br></span><span style="color:#0000ff;">exit</span> <span style="color:#0000ff;">when</span> c_rate<span style="color:#808080;">%</span><span style="color:#000000;">notfound;<br></span><span style="color:#0000ff;">end</span><span style="color:#000000;"> loop;<br></span><span style="color:#0000ff;">close</span><span style="color:#000000;"> c_rate;<br></span><span style="color:#0000ff;">end</span><span style="color:#000000;">;
 /</span></pre> 
 </div> 
 <p> 我们把上面的例子有游标的for循环来改写一下。</p> 
 <p> </p> 
 <p><strong>显式游标的for循环</strong></p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#0000ff;">declare</span><span style="color:#000000;">

 v_year </span><span style="color:#0000ff;">varchar2</span>(<span style="color:#800000;font-weight:bold;">20</span><span style="color:#000000;">);
 v_month </span><span style="color:#0000ff;">number</span><span style="color:#000000;">;

 </span><span style="color:#0000ff;">cursor</span> c_rate <span style="color:#0000ff;">is</span>  <span style="color:#0000ff;">select</span> <span style="color:#808080;">*</span> <span style="color:#0000ff;">from</span> exchangerate t <span style="color:#0000ff;">where</span> t.currentmonth <span style="color:#0000ff;">is</span> <span style="color:#0000ff;">null</span><span style="color:#000000;">;

 </span><span style="color:#0000ff;">begin</span>

   <span style="color:#0000ff;">for</span> p_rate <span style="color:#808080;">in</span><span style="color:#000000;"> c_rate loop

   v_year:</span><span style="color:#808080;">=</span>substr(p_rate.quarter, <span style="color:#800000;font-weight:bold;">0</span>, <span style="color:#800000;font-weight:bold;">4</span><span style="color:#000000;">);

   v_month:</span><span style="color:#808080;">=</span>(to_number(substr(p_rate.quarter,<span style="color:#800000;font-weight:bold;">6</span>,<span style="color:#800000;font-weight:bold;">1</span>)) <span style="color:#808080;">-</span> <span style="color:#800000;font-weight:bold;">1</span>) <span style="color:#808080;">*</span> <span style="color:#800000;font-weight:bold;">3</span><span style="color:#000000;">;

    </span><span style="color:#0000ff;">for</span> i <span style="color:#808080;">in</span> <span style="color:#800000;font-weight:bold;">1</span> .. <span style="color:#800000;font-weight:bold;">3</span><span style="color:#000000;"> loop

    </span><span style="color:#0000ff;">insert</span> <span style="color:#0000ff;">into</span> exchangerate(id,quarter,currentmonth,rate,currency,Description)<br><span style="color:#0000ff;">values</span>(SEQUENCE_EXCHANGERATE.nextval,p_rate.quarter,<br>           to_char(to_date(v_year<span style="color:#808080;">||</span>(v_month<span style="color:#808080;">+</span>i),<span style="color:#ff0000;">'</span><span style="color:#ff0000;">yyyyMM</span><span style="color:#ff0000;">'</span>),<span style="color:#ff0000;">'</span><span style="color:#ff0000;">yyyy-MM</span><span style="color:#ff0000;">'</span><span style="color:#000000;">),p_rate.rate,p_rate.currency,p_rate.description);

    </span><span style="color:#0000ff;">end</span><span style="color:#000000;"> loop; 

   </span><span style="color:#0000ff;">end</span><span style="color:#000000;"> loop;

 </span><span style="color:#0000ff;">end</span><span style="color:#000000;">;

  </span><span style="color:#808080;">/</span></pre> 
 </div> 
 <p> </p> 
 <p>我们可以看到游标FOR循环确实很好的简化了游标的开发，我们不在需要open、fetch和close语句，不在需要用%FOUND属性检测是否到最后一条记录，这一切Oracle隐式的帮我们完成了。</p> 
 <p> </p> 
 <p><strong>隐式游标的for循环</strong></p> 
 <p> </p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#0000ff;">declare</span><span style="color:#000000;">

 v_year </span><span style="color:#0000ff;">varchar2</span>(<span style="color:#800000;font-weight:bold;">20</span><span style="color:#000000;">);
 v_month </span><span style="color:#0000ff;">number</span><span style="color:#000000;">;

 </span><span style="color:#0000ff;">begin</span>

   <span style="color:#0000ff;">for</span> p_rate <span style="color:#808080;">in</span> (<span style="color:#0000ff;">select</span> <span style="color:#808080;">*</span> <span style="color:#0000ff;">from</span> exchangerate t <span style="color:#0000ff;">where</span> t.currentmonth <span style="color:#0000ff;">is</span> <span style="color:#0000ff;">null</span><span style="color:#000000;">) loop

   v_year:</span><span style="color:#808080;">=</span>substr(p_rate.quarter, <span style="color:#800000;font-weight:bold;">0</span>, <span style="color:#800000;font-weight:bold;">4</span><span style="color:#000000;">);
   v_month:</span><span style="color:#808080;">=</span>(to_number(substr(p_rate.quarter,<span style="color:#800000;font-weight:bold;">6</span>,<span style="color:#800000;font-weight:bold;">1</span>)) <span style="color:#808080;">-</span> <span style="color:#800000;font-weight:bold;">1</span>) <span style="color:#808080;">*</span> <span style="color:#800000;font-weight:bold;">3</span><span style="color:#000000;">;<br></span><span style="color:#0000ff;">for</span> i <span style="color:#808080;">in</span> <span style="color:#800000;font-weight:bold;">1</span> .. <span style="color:#800000;font-weight:bold;">3</span><span style="color:#000000;"> loop

      </span><span style="color:#0000ff;">insert</span> <span style="color:#0000ff;">into</span> exchangerate(id,quarter,currentmonth,rate,currency,Description) <br><span style="color:#0000ff;">        values</span>(SEQUENCE_EXCHANGERATE.nextval,p_rate.quarter,<br>               to_char(to_date(v_year<span style="color:#808080;">||</span>(v_month<span style="color:#808080;">+</span>i),<span style="color:#ff0000;">'</span><span style="color:#ff0000;">yyyyMM</span><span style="color:#ff0000;">'</span>),<span style="color:#ff0000;">'</span><span style="color:#ff0000;">yyyy-MM</span><span style="color:#ff0000;">'</span><span style="color:#000000;">),p_rate.rate,p_rate.currency,p_rate.description);

    </span><span style="color:#0000ff;">end</span><span style="color:#000000;"> loop; 

   </span><span style="color:#0000ff;">end</span><span style="color:#000000;"> loop;

 </span><span style="color:#0000ff;">end</span><span style="color:#000000;">;
/</span></pre> 
 </div> 
 <p> </p> 
 <p><strong>显示游标中游标参数的传递</strong></p> 
 <p><strong><br></strong>例子：就以上面的表来说 加入我们在定义游标时不确定查询条件中的值，这时我们可以通过游标参数来解决</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#0000ff;">declare</span><span style="color:#000000;">

 v_year </span><span style="color:#0000ff;">varchar2</span>(<span style="color:#800000;font-weight:bold;">20</span><span style="color:#000000;">);
 v_month </span><span style="color:#0000ff;">number</span><span style="color:#000000;">;
 p_rate exchangerate</span><span style="color:#808080;">%</span><span style="color:#000000;">rowtype;

 </span><span style="color:#0000ff;">cursor</span> c_rate(p_quarter <span style="color:#0000ff;">varchar2</span>) --声明游标带参数<br><span style="color:#0000ff;"> is</span>  <span style="color:#0000ff;"><br>    select</span> <span style="color:#808080;">*</span> <span style="color:#0000ff;">from</span> exchangerate t <span style="color:#0000ff;">where</span> t.quarter<span style="color:#808080;">&lt;=</span><span style="color:#000000;">p_quarter;

 </span><span style="color:#0000ff;">begin</span>
   <span style="color:#0000ff;">open</span> c_rate(p_quarter<span style="color:#808080;">=&gt;</span><span style="color:#ff0000;">'</span><span style="color:#ff0000;">2011Q3</span><span style="color:#ff0000;">'</span><span style="color:#000000;">);--打开游标,传递参数值
    loop

    </span><span style="color:#0000ff;">fetch</span> c_rate <span style="color:#0000ff;">into</span><span style="color:#000000;"> p_rate;
    
    </span><span style="color:#0000ff;">update</span> exchangerate <span style="color:#0000ff;">set</span> rate<span style="color:#808080;">=</span>p_rate.rate<span style="color:#808080;">+</span><span style="color:#800000;font-weight:bold;">1</span> <span style="color:#0000ff;">where</span> id<span style="color:#808080;">=</span><span style="color:#000000;">p_rate.id;


    </span><span style="color:#0000ff;">exit</span> <span style="color:#0000ff;">when</span> c_rate<span style="color:#808080;">%</span><span style="color:#000000;">notfound;

   </span><span style="color:#0000ff;">end</span><span style="color:#000000;"> loop;

   </span><span style="color:#0000ff;">close</span><span style="color:#000000;"> c_rate;

 </span><span style="color:#0000ff;">end</span>;</pre> 
 </div> 
 <p> </p> 
 <p><span style="font-size:15px;"><strong>游标变量</strong></span></p> 
 <p> 游标是数据库中一个命名的工作区,当游标被声明后,他就与一个固定的SQL想关联,在编译时刻是已知的,是静态的.它永远指向一个相同的查询工作区.<br> 游标变量是动态的可以在运行时刻与不同的SQL语句关联,在运行时可以取不同的SQL语句.它可以引用不同的工作区.</p> 
 <p><span style="color:#ff0000;"><strong>如何定义游标类型</strong></span></p> 
 <p> </p> 
 <div class="cnblogs_code"> 
  <pre>TYPE ref_type_name <span style="color:#0000ff;">IS</span> REF <span style="color:#0000ff;">CURSOR<br><br></span><span style="color:#ff0000;">[</span><span style="color:#ff0000;">RETURN return_type</span><span style="color:#ff0000;">]</span>;</pre> 
 </div> 
 <p><span style="color:#ff0000;"><strong>声明游标变量</strong></span></p> 
 <div class="cnblogs_code"> 
  <pre>cursor_name ref_type_name;</pre> 
 </div> 
 <p><span style="line-height:1.5;"> </span></p> 
 <div> 
  <p>ref_type_name 是后面声明游标变量时要用到的我们的游标类型(自定义游标类型,即CURSOR是系统默认的,ref_type_name是我们定义的 );</p> 
  <p>return_type代表数据库表中的一行,或一个记录类型</p> 
  <p>TYPE ref_type_name IS REF CURSOR RETURN EMP%TYPE</p> 
  <p>RETURN 是可选的,如果有是强类型,可以减少错误,如果没有return是弱引用,有较好的灵活性.</p> 
  <p><span style="color:#ff0000;"><strong>游标变量的操作</strong></span></p> 
  <p><span style="color:#ff0000;"><span style="color:#000000;"> 例子：</span></span></p> 
  <div class="cnblogs_code"> 
   <pre><span style="color:#0000ff;">declare</span><span style="color:#000000;">

 v_year </span><span style="color:#0000ff;">varchar2</span>(<span style="color:#800000;font-weight:bold;">20</span><span style="color:#000000;">);
 v_month </span><span style="color:#0000ff;">number</span><span style="color:#000000;">;
 p_rate exchangerate</span><span style="color:#808080;">%</span><span style="color:#000000;">rowtype;

 type  rate </span><span style="color:#0000ff;">is</span> ref <span style="color:#0000ff;">cursor</span>;<span style="color:#008080;">--</span><span style="color:#008080;">定义游标变量</span>
  c_rate rate; <span style="color:#008080;">--</span><span style="color:#008080;">声明游标变量</span>
  
 <span style="color:#0000ff;">begin</span>
   
   
   <span style="color:#0000ff;">open</span> c_rate <span style="color:#0000ff;">for</span> <span style="color:#0000ff;">select</span> <span style="color:#808080;">*</span> <span style="color:#0000ff;">from</span> exchangerate t <span style="color:#0000ff;">where</span> t.quarter<span style="color:#808080;">=</span><span style="color:#ff0000;">'</span><span style="color:#ff0000;">2011Q3</span><span style="color:#ff0000;">'</span>;<span style="color:#008080;">--</span><span style="color:#008080;">打开游标变量</span>
<span style="color:#000000;">    loop

    </span><span style="color:#0000ff;">fetch</span> c_rate <span style="color:#0000ff;">into</span> p_rate;<span style="color:#008080;">--</span><span style="color:#008080;">提取游标变量</span>
    
    <span style="color:#0000ff;">update</span> exchangerate <span style="color:#0000ff;">set</span> rate<span style="color:#808080;">=</span>p_rate.rate<span style="color:#808080;">+</span><span style="color:#800000;font-weight:bold;">1</span> <span style="color:#0000ff;">where</span> id<span style="color:#808080;">=</span><span style="color:#000000;">p_rate.id;

    </span><span style="color:#0000ff;">exit</span> <span style="color:#0000ff;">when</span> c_rate<span style="color:#808080;">%</span><span style="color:#000000;">notfound;

   </span><span style="color:#0000ff;">end</span><span style="color:#000000;"> loop;
  
  </span><span style="color:#008080;">--</span><span style="color:#008080;">将同一个游标变量对应到另一个SELECT语句</span>
   
   <span style="color:#0000ff;">open</span> c_rate <span style="color:#0000ff;">for</span> <span style="color:#0000ff;">select</span> <span style="color:#808080;">*</span> <span style="color:#0000ff;">from</span> exchangerate t <span style="color:#0000ff;">where</span> t.quarter<span style="color:#808080;">=</span><span style="color:#ff0000;">'</span><span style="color:#ff0000;">2011Q2</span><span style="color:#ff0000;">'</span>;<span style="color:#008080;">--</span><span style="color:#008080;">打开游标变量</span>
<span style="color:#000000;">    loop

    </span><span style="color:#0000ff;">fetch</span> c_rate <span style="color:#0000ff;">into</span> p_rate;<span style="color:#008080;">--</span><span style="color:#008080;">提取游标变量</span>
    
    <span style="color:#0000ff;">update</span> exchangerate <span style="color:#0000ff;">set</span> rate<span style="color:#808080;">=</span>p_rate.rate<span style="color:#808080;">-</span><span style="color:#800000;font-weight:bold;">1</span> <span style="color:#0000ff;">where</span> id<span style="color:#808080;">=</span><span style="color:#000000;">p_rate.id;

    </span><span style="color:#0000ff;">exit</span> <span style="color:#0000ff;">when</span> c_rate<span style="color:#808080;">%</span><span style="color:#000000;">notfound;

   </span><span style="color:#0000ff;">end</span><span style="color:#000000;"> loop;
   </span><span style="color:#0000ff;">close</span> c_rate;<span style="color:#008080;">--</span><span style="color:#008080;">关闭游标变量</span>

 <span style="color:#0000ff;">end</span>;</pre> 
  </div> 
  <p> </p> 
  <p><strong>游标表达式</strong></p> 
  <p class="a"><span style="font-size:14px;"><span lang="en-us">Oracle</span>在<span lang="en-us">SQL</span>语言中提供了一个强有力的工具：游标表达式。一个游标表达式从一个查询中返回一个内嵌的游标。在这个内嵌游标的结果集中，每一行数据包含了在<span lang="en-us">SQL</span>查询中的可允许的数值范围；它也能包含被其他子查询所产生的游标。</span></p> 
  <p class="a"><span style="font-size:14px;">因此，你能够使用游标表达式来返回一个大的和复杂的，从一张或多张表获取的数据集合。游标表达式的复杂程度，取决于查询和结果集。然而，了解所有从<span lang="en-us">Oracle RDBMS</span>提取数据的可能途径，还有大有好处的。</span></p> 
  <p class="a"><span style="font-size:14px;" lang="en-us"><span style="line-height:1.5;">你能够在以下任何一种情况使用游标表达式：</span></span></p> 
  <p class="a"><span style="font-size:14px;"><span lang="en-us">   （1）、 </span>显式游标声明</span></p> 
  <p class="a"><span style="font-size:14px;"><span lang="en-us">   （2）、</span>动态<span lang="en-us">SQL</span>查询。</span></p> 
  <p class="a"><span style="font-size:14px;"><span lang="en-us">   （3）、</span><span lang="en-us">REF CURSOR </span>声明和变量。</span></p> 
  <p class="a"><span style="font-size:14px;">你不能在一个隐式查询中使用游标表达式。</span></p> 
  <p class="a"><span style="font-size:14px;">游标表达式的语法是相当简单的：</span></p> 
  <p class="a"><span style="font-size:14px;" lang="en-us">    CURSOR (查询语句)</span></p> 
  <p class="a"><span style="font-size:14px;">当<span lang="en-us">Oracle</span>从父游标或外围游标那里检取包含游标表达式的数据行时，<span lang="en-us">Oracle</span>就会隐式地打开一个内嵌的游标，这个游标就是被上述的游标表达式所定义。在以下情况发生时，这个内迁游标将会被关闭：</span></p> 
  <p class="a"><span style="font-size:14px;"><span lang="en-us">    （1）、</span>你显式地关闭这个游标。</span></p> 
  <p class="a"><span style="font-size:14px;"><span lang="en-us">    （2）、</span>外围或父游标被重新执行，关闭或撤销。</span></p> 
  <p class="a"><span style="font-size:14px;"><span lang="en-us">    （3）、</span>当从父游标检取数据时，发生异常。内嵌游标就会与父游标一起被关闭。</span></p> 
  <h4><span style="font-size:15px;"><span lang="en-us"> </span>使用游标表达式</span></h4> 
  <p class="a"><span style="font-size:14px;">你可以通过两种不同的，但是非常有用的方法来使用游标表达式：</span></p> 
  <p class="a"><span style="font-size:14px;"><span lang="en-us">   1.  </span>在一个外围查询中把字查询作为一列来检取数据。</span></p> 
  <p class="a"><span style="font-size:14px;"><span lang="en-us">   2.  </span>把一个查询转换成一个结果集，而这个结果集就可以被当成一个参数传递给一个流型或变换函数。</span></p> 
  <p class="a"><span style="font-size:14px;">例子：</span></p> 
  <div class="cnblogs_code"> 
   <pre><span style="color:#0000ff;">CREATE</span> <span style="color:#808080;">OR</span> <span style="color:#ff00ff;">REPLACE</span> <span style="color:#0000ff;">PROCEDURE</span> emp_report(p_locid <span style="color:#0000ff;">NUMBER</span><span style="color:#000000;">)
</span><span style="color:#0000ff;">IS</span><span style="color:#000000;">
    TYPE refcursor </span><span style="color:#0000ff;">IS</span> REF <span style="color:#0000ff;">CURSOR</span><span style="color:#000000;">;
    </span><span style="color:#0000ff;">CURSOR</span> all_in_one <span style="color:#0000ff;">IS</span>
        <span style="color:#0000ff;">SELECT</span> l.city, <span style="color:#0000ff;">CURSOR</span><span style="color:#000000;">(
            </span><span style="color:#0000ff;">SELECT</span>  d.department_name, <span style="color:#0000ff;">CURSOR</span><span style="color:#000000;"> (
                </span><span style="color:#0000ff;">SELECT</span><span style="color:#000000;"> e.last_name
                </span><span style="color:#0000ff;">FROM</span><span style="color:#000000;"> employees e
                </span><span style="color:#0000ff;">WHERE</span> e.DEPARTMENT_ID <span style="color:#808080;">=</span><span style="color:#000000;"> d.DEPARTMENT_ID
            ) </span><span style="color:#0000ff;">as</span><span style="color:#000000;"> ename
            </span><span style="color:#0000ff;">FROM</span><span style="color:#000000;"> departments d
            </span><span style="color:#0000ff;">WHERE</span> d.LOCATION_ID <span style="color:#808080;">=</span><span style="color:#000000;"> l.LOCATION_ID
        ) </span><span style="color:#0000ff;">as</span><span style="color:#000000;"> dname
        </span><span style="color:#0000ff;">FROM</span><span style="color:#000000;"> locations l
        </span><span style="color:#0000ff;">WHERE</span> l.location_id <span style="color:#808080;">=</span><span style="color:#000000;"> p_locid;
departments_cur refcursor;
employees_cur refcursor;
v_city locations.city</span><span style="color:#808080;">%</span><span style="color:#000000;">type;
v_dname departments.department_name</span><span style="color:#808080;">%</span><span style="color:#000000;">type;
v_ename employees.last_name</span><span style="color:#808080;">%</span><span style="color:#000000;">type;
i </span><span style="color:#0000ff;">integer</span> :<span style="color:#808080;">=</span><span style="color:#800000;font-weight:bold;">1</span><span style="color:#000000;">;
j </span><span style="color:#0000ff;">integer</span> :<span style="color:#808080;">=</span><span style="color:#800000;font-weight:bold;">1</span><span style="color:#000000;">;
k </span><span style="color:#0000ff;">integer</span> :<span style="color:#808080;">=</span><span style="color:#800000;font-weight:bold;">1</span><span style="color:#000000;">;
</span><span style="color:#0000ff;">BEGIN</span>
    <span style="color:#0000ff;">OPEN</span><span style="color:#000000;"> all_in_one;
    LOOP    
    </span><span style="color:#0000ff;">FETCH</span> all_in_one <span style="color:#0000ff;">INTO</span><span style="color:#000000;"> v_city, departments_cur;
    </span><span style="color:#0000ff;">EXIT</span> <span style="color:#0000ff;">WHEN</span> all_in_one<span style="color:#808080;">%</span><span style="color:#000000;">NOTFOUND;
                                                  LOOP
        </span><span style="color:#0000ff;">FETCH</span> departments_cur <span style="color:#0000ff;">INTO</span><span style="color:#000000;">  v_dname, employees_cur;
        </span><span style="color:#0000ff;">EXIT</span> <span style="color:#0000ff;">WHEN</span> departments_cur<span style="color:#808080;">%</span><span style="color:#000000;">NOTFOUND;
        LOOP
            </span><span style="color:#0000ff;">FETCH</span> employees_cur <span style="color:#0000ff;">INTO</span><span style="color:#000000;"> v_ename;
            </span><span style="color:#0000ff;">EXIT</span> <span style="color:#0000ff;">WHEN</span> employees_cur<span style="color:#808080;">%</span><span style="color:#000000;">NOTFOUND;
            dbms_output.put_line(i </span><span style="color:#808080;">||</span> <span style="color:#ff0000;">'</span><span style="color:#ff0000;"> , </span><span style="color:#ff0000;">'</span> <span style="color:#808080;">||</span> j <span style="color:#808080;">||</span> <span style="color:#ff0000;">'</span><span style="color:#ff0000;"> , </span><span style="color:#ff0000;">'</span> <span style="color:#808080;">||</span> k <span style="color:#808080;">||</span> <span style="color:#ff0000;">'</span><span style="color:#ff0000;">----</span><span style="color:#ff0000;">'</span> <span style="color:#808080;">||</span> v_city <span style="color:#808080;">||</span> <span style="color:#ff0000;">'</span><span style="color:#ff0000;"> ,</span><span style="color:#ff0000;">'</span> <span style="color:#808080;">||</span> v_dname <span style="color:#808080;">||</span> <span style="color:#ff0000;">'</span><span style="color:#ff0000;"> ,</span><span style="color:#ff0000;">'</span> <span style="color:#808080;">||</span><span style="color:#000000;"> v_ename );
            k :</span><span style="color:#808080;">=</span> k <span style="color:#808080;">+</span> <span style="color:#800000;font-weight:bold;">1</span><span style="color:#000000;">;
        </span><span style="color:#0000ff;">END</span><span style="color:#000000;"> LOOP;
        j :</span><span style="color:#808080;">=</span> j <span style="color:#808080;">+</span> <span style="color:#800000;font-weight:bold;">1</span><span style="color:#000000;">;
    </span><span style="color:#0000ff;">END</span><span style="color:#000000;"> LOOP;
    i :</span><span style="color:#808080;">=</span> i <span style="color:#808080;">+</span> <span style="color:#800000;font-weight:bold;">1</span><span style="color:#000000;">;
    </span><span style="color:#0000ff;">END</span><span style="color:#000000;"> LOOP;
</span><span style="color:#0000ff;">END</span><span style="color:#000000;">;
</span><span style="color:#808080;">/</span></pre> 
  </div> 
  <h5> </h5> 
  <p> </p> 
 </div> 
</div> 
<p>转载于:https://www.cnblogs.com/heshan664754022/archive/2013/05/22/3092437.html</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d8d2baa6be4f35a24b973cb07a560b0a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">window.location.href 在傲游兼容模式和IE下不跳转的解决办法(同事分享的)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e18d9cd4761abef8f6436923dcf67b02/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">逻辑左移、算术左移、逻辑右移、算术右移区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>