<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ue4离线文档_【UE4烘焙】完美的烘焙效果，应该怎样配置环境设置灯光参数？这些你都知道吗？... - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ue4离线文档_【UE4烘焙】完美的烘焙效果，应该怎样配置环境设置灯光参数？这些你都知道吗？..." />
<meta property="og:description" content="今天是2020年11月23日 星期一
正文共：6560字 64图 预计阅读时间17分
上一期我们认识了基本灯光以及参数那么接下来我们就实际使用下，看下场景中是如何设置参数之间如何配合才能烘焙出更好的效果。
首先我们先创建一个场景，对场景进行一个基本配置
后处理 【明度色彩相关的后处理】 举例说明： UE4的空场景中是有默认的后处理场存在的，将镜头摇下来，对准地面能看到自动曝光的变化过程【如下所示】：
因此，调节场景时无法锁定显示效果，故需要先加入自定义的后处理场，将默认的后处理效果“覆盖”。【setting中有对特定后处理禁用的选项；这里不建议直禁用某项功能 】
具体设置： 【反射相关的后处理】 SSR【基于屏幕空的反射】经由相机逆向查找物体对应位置关系计算所得，并非通过HDR手段绘制反射效果。效果在镜头中心位置很真实，边缘由于算法问题会出现真空带(非常明显)；故此用于模拟粗糙表面的反射较好。
举例说明： 由于场景中没有天光(或其他HDR信息提供者)故一个镜面物体的显示效果应当为纯黑，而此时【如下所示】
具体设置： 将屏幕空间的反射强度归零【如下所示】
列举三种HDR反射效果
天光内添加HDR
动态采集添加HDR(捕获场景环境)
静态HDR(手动载入hdr)
如何为良好的照明准备资产 照明前的基本设置 重要内容重复
Post-processing 设置(打光前) 在对场景打光前，需要对 PP 进行一些设置以便得到一致的光照烘焙结果。 (视频10:00 处) ■ 关闭 Auto Exposure (操作：将min brightness和max brightness都改成1) ■ 关闭 SSAO 以及 SSR (操作：ambient occlusion和Screen Space Reflection的intensity改成0) 屏幕空间环境光遮挡(SSAO)是一种近似因光遮挡而导致的光衰减的效果 文档详解 https://docs.unrealengine.com/en-US/Engine/Rendering/LightingAndShadows/AmbientOcclusion/index.html 屏幕空间反射(SSR)是默认情况下启用的一种效果，可更改对象在“材质”表面上的外观。 文档详解 https://docs.unrealengine.com/en-US/Engine/Rendering/PostProcessEffects/ScreenSpaceReflection/index.html ■保持默认 tone mapper (tone mapper，色调映射,其过程可以被认为是模拟胶片对光的响应的一种方法。) ■ Vignetting = off ■ Bloom = off 正确的光照预览参照球材质设置如下： ■ Chrome Sphere 铬球 ■ Base Color 1 ■ Metallic 1 ■ Roughness 0 ■ Grey Sphere 灰度球(50%灰度，sRGB) ■ Base Color 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/5f2bd96532b4d4f6475d20c0d8d13849/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-11T01:59:30+08:00" />
<meta property="article:modified_time" content="2020-12-11T01:59:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ue4离线文档_【UE4烘焙】完美的烘焙效果，应该怎样配置环境设置灯光参数？这些你都知道吗？...</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="._5ce-wx-style" style="font-size:16px;"> 
 <div class="rich_media_content" id="js_content"> 
  <p>今天是2020年11月23日  星期一</p> 
  <p>正文共：6560字 64图  预计阅读时间17分</p> 
  <p>上一期我们认识了基本灯光以及参数那么接下来我们就实际使用下，看下场景中是如何设置参数之间如何配合才能烘焙出更好的效果。</p> 
  <p>首先我们先创建一个场景，对场景进行一个基本配置</p> 
  <p><img src="https://images2.imgbox.com/76/c6/zvqVZHy5_o.png" alt="16c62a0837fe6b877d614ef1d00b06ff.png"></p> 
  <h4><strong><span style="font-weight:bold;">后处理</span></strong></h4> 
  <h6><span style="font-weight:bold;">【明度色彩相关的后处理】</span></h6> 
  <h6><span style="font-weight:bold;">举例说明：</span></h6> 
  <p>UE4的空场景中是有默认的后处理场存在的，将镜头摇下来，对准地面能看到自动曝光的变化过程【如下所示】：</p> 
  <p><img src="https://images2.imgbox.com/67/19/XkbPNdwT_o.png" alt="24e75f23b6d2b7b1f57a572623804568.png"></p> 
  <p>因此，调节场景时无法锁定显示效果，故需要先加入自定义的后处理场，将默认的后处理效果“覆盖”。【setting中有对特定后处理禁用的选项；这里不建议直禁用某项功能 】</p> 
  <h6><span style="font-weight:bold;">具体设置：</span></h6> 
  <p><img src="https://images2.imgbox.com/63/36/uLcDTlL1_o.png" alt="9c2d54e1b7c162ea6f6289a26327811f.png"></p> 
  <p><img src="https://images2.imgbox.com/73/d2/tUzzbFl0_o.png" alt="8f1649da32d48b39eacb7fa23ef5a85b.png"></p> 
  <p><img src="https://images2.imgbox.com/69/35/B9sjx7mZ_o.png" alt="bc22d173904b804910ab37f940515f03.png"></p> 
  <p><img src="https://images2.imgbox.com/e8/c2/zSdhilEd_o.png" alt="ee4126aa5e0aade1336e8d6d31a93315.png"></p> 
  <h6><span style="font-weight:bold;">【反射相关的后处理】</span></h6> 
  <p>SSR【基于屏幕空的反射】经由相机逆向查找物体对应位置关系计算所得，并非通过HDR手段绘制反射效果。效果在镜头中心位置很真实，边缘由于算法问题会出现真空带(非常明显)；故此用于模拟粗糙表面的反射较好。</p> 
  <h6><span style="font-weight:bold;">举例说明：</span></h6> 
  <p>由于场景中没有天光(或其他HDR信息提供者)故一个镜面物体的显示效果应当为纯黑，而此时【如下所示】</p> 
  <p><img src="https://images2.imgbox.com/03/b1/9cRAjSK3_o.png" alt="d03010240f220b4bf64afbbf21269450.png"></p> 
  <h6><span style="font-weight:bold;">具体设置：</span></h6> 
  <p>将屏幕空间的反射强度归零【如下所示】</p> 
  <p><img src="https://images2.imgbox.com/c6/f3/sVMBZaSx_o.png" alt="2d0e32af70c9acd2ffd18172013dc47d.png">列举三种HDR反射效果</p> 
  <p><img src="https://images2.imgbox.com/80/24/L27jKVBN_o.png" alt="2b4ba9d399a4ad0da7846cad0b4494c0.png"></p> 
  <p>天光内添加HDR</p> 
  <p><img src="https://images2.imgbox.com/88/a8/POrD7ut6_o.png" alt="805363cd4389a367143bf77bd18dd2df.png"></p> 
  <p>动态采集添加HDR(捕获场景环境)</p> 
  <p><img src="https://images2.imgbox.com/52/32/JlAvWz8O_o.png" alt="1e9effabc334a7fdd6d7ffcdcec730c9.png"></p> 
  <p>静态HDR(手动载入hdr)</p> 
  如何为良好的照明准备资产 
  <img src="https://images2.imgbox.com/bf/d3/K4j7bnlx_o.png" alt="22df8fe7bdd54e66b51d3e2e82dfebab.png"> 
  <img src="https://images2.imgbox.com/e6/66/v7vUZVZW_o.png" alt="9a81f40aea58c916d0205f3a35946182.png"> 
  <img src="https://images2.imgbox.com/f6/af/g31AUFL3_o.png" alt="80d067cf0f1a2c435383a265af964e11.png"> 
  <img src="https://images2.imgbox.com/29/c6/Se3aSNdG_o.png" alt="8a05345625d64382ca0cec72bbcba119.png"> 
  <img src="https://images2.imgbox.com/f0/1f/F5xgjlYP_o.png" alt="0a270566938049ae3d907c7eac0078d9.png"> 
  <img src="https://images2.imgbox.com/65/d4/wVZoA81z_o.png" alt="56434f076672978733c658fa2e788042.png"> 
  <img src="https://images2.imgbox.com/fa/80/kzY3MSOp_o.png" alt="c622782f83c40e97671a194722d7a89f.png"> 
  <img src="https://images2.imgbox.com/59/a0/csU7yYSW_o.png" alt="da1795c3516bfa18324c05bd06eb8326.png"> 
  <img src="https://images2.imgbox.com/8d/22/WusfeSOD_o.png" alt="7ba0a7511100118726ed704219255777.png"> 
  <img src="https://images2.imgbox.com/0f/17/4ayM9n1E_o.png" alt="85cd9d8e3ecdd3607249daced1cc30f0.png"> 
  <img src="https://images2.imgbox.com/79/58/1yEIbLYd_o.png" alt="ce345c0d17aa00e8366dc42c6c49a6c0.png"> 
  <img src="https://images2.imgbox.com/cc/bb/oq4ruICd_o.png" alt="57d13f0dbc0f270c13b17da38740fe7c.png"> 
  <img src="https://images2.imgbox.com/ed/d4/RkhgtXSL_o.png" alt="d03e849c6966fd605ab9dd7ff66d3a16.png"> 
  <img src="https://images2.imgbox.com/a5/11/2jMNRCHg_o.png" alt="30e81514e263a7be2296c023cf8a28ae.png"> 
  <img src="https://images2.imgbox.com/b6/25/aynTGRRw_o.png" alt="52cf14b436af4347f1a2ed78b70b2db5.png"> 
  <img src="https://images2.imgbox.com/57/d3/8mZYBO98_o.png" alt="0c00b366593402d4ee5f171ae4fe2569.png"> 
  <img src="https://images2.imgbox.com/7e/f9/FNxGoKYR_o.png" alt="5b41eecbfaa7cf4478ee8f1e61919dbb.png"> 
  照明前的基本设置 
  <img src="https://images2.imgbox.com/99/7a/KQjO2dSI_o.png" alt="1bee9c35da22be75abc837a9bfee3967.png"> 
  <p>重要内容重复</p> 
  <strong>Post-processing</strong> <strong>设置(打光前)</strong> 
  在对场景打光前，需要对 PP 进行一些设置以便得到一致的光照烘焙结果。 
  (视频10:00 处) 
  ■ 关闭 Auto Exposure 
  (操作：将min brightness和max brightness都改成1) 
  ■ 关闭 SSAO 以及 SSR 
  (操作：ambient occlusion和Screen Space Reflection的intensity改成0) 
  屏幕空间环境光遮挡(SSAO)是一种近似因光遮挡而导致的光衰减的效果 
  文档详解 
  https://docs.unrealengine.com/en-US/Engine/Rendering/LightingAndShadows/AmbientOcclusion/index.html 
  屏幕空间反射(SSR)是默认情况下启用的一种效果，可更改对象在“材质”表面上的外观。 
  文档详解 
  https://docs.unrealengine.com/en-US/Engine/Rendering/PostProcessEffects/ScreenSpaceReflection/index.html 
  ■保持默认 tone mapper 
  (tone mapper，色调映射,其过程可以被认为是模拟胶片对光的响应的一种方法。) 
  ■ Vignetting = off 
  ■ Bloom = off 
  正确的光照预览参照球材质设置如下： 
  ■ Chrome Sphere 铬球 
      ■ Base Color 1 
      ■ Metallic 1 
      ■ Roughness 0 
  ■ Grey Sphere 灰度球(50%灰度，sRGB) 
      ■ Base Color 0.18(Linear) 
      ■ Roughness 1 
      ■ Metallic 0 
  ■ Directional Light 3.14(π) 
  这时在视窗里应该会得到一个接近 0.5 灰度的场景，可以用截图软件在外部用 PS 检测一下。 
  <img src="https://images2.imgbox.com/26/a0/BylK0NKl_o.png" alt="2fd25c943d3820f7412b1e84ef7419be.png"> 
  <ul><li><p>使用烘焙的照明，您将获得GI(全局照明)</p></li><li><p>您有便宜的柔和阴影，因为它们是烘烤的，因此无法评估</p></li><li><p>它对全球GPU的要求不高。</p></li><li><p>这里是缺点。您的迭代速度较慢。</p></li><li><p>每次更改内容时，都需要重新烘烤。</p></li><li><p>照明是静态的。基本上，这意味着没有任何动作</p></li><li><p>这需要更多的内存，因为所有的光</p></li><li><p>烘焙光照贴图中的内容，然后将其存储在内存中。</p></li></ul> 
  动态照明的优点是什么？ 
  <ul><li><p>所见即所得基本上，您所做的任何调整都是您在屏幕上看到的内容，它是完全实时的，因此您可以调整所有内容</p></li></ul> 
  <img src="https://images2.imgbox.com/b5/9c/BkUIqMOt_o.png" alt="bcb38dce28522f8b67533b465c540bef.png"> 
  <ul><li><p>光照贴图存储光照信息，并打包成纹理</p></li><li><p>每个光照贴图都是HDR纹理的集合</p></li><li><p>另外，它不仅存储光强度，而且还存储光的方向</p></li></ul> 
  <img src="https://images2.imgbox.com/5a/50/nXk50cVQ_o.png" alt="825e8819dbc60b91e771a211a09fb29c.png"> 
  <ul><li><p>当然，光照贴图的分辨率越低生成速度越快。您的迭代速度更快。您还会得到一个非常柔和的阴影。</p></li><li><p>光照贴图分辨率越高，生成速度就越慢 但是您有更好的阴影</p></li></ul> 
  <img src="https://images2.imgbox.com/1f/9b/3Oxu9O8K_o.png" alt="5f2c3d6ee3b8bd0d23c768a2e3573c54.png"> 
  <img src="https://images2.imgbox.com/15/7f/IvcNJbYQ_o.png" alt="4f2b0ca62c17b8e595cb7b556f26edf7.png"> 
  <ul><li><p>当您烘烤照明时，仅烘焙两种类型的光静态和固定的要注意的一件事是，定向光点光源和聚光灯是目前唯一能发出光子的光子。天光不发射光子。这意味着什么？只有一个反弹，因为它们不发射光子。</p></li></ul> 
  <strong>设置 Lightmaps</strong> 
  在 Static Mesh Editor 中启用 Generate lightmap UVs ，适当调节 Min Lightmap Resolution 与 Light Map Resolution 得到适当的 Padding 值与分辨率。 
  (视频 16:36 处) 
  光照贴图分辨率并不是越大越好，要在尺寸和时间上进行权衡，首先从较小分辨率开始，当烘焙出现锯齿而不是噪点的时候，应适度提升分辨率。 
  <img src="https://images2.imgbox.com/dd/02/XhNgR2Jq_o.png" alt="b5c6f851c330e8b645964f43b16b5985.png"> 
  <img src="https://images2.imgbox.com/f8/b1/LVCbsz4m_o.png" alt="ce0f4a0e1f4e8dc0b033298e2606e6e9.png"> 
  <strong>光照质量(Lightmass)设置</strong> 
  以下设置在 World Settings 中。 
  <img src="https://images2.imgbox.com/48/7d/fLDVquiO_o.png" alt="ef78299fb295a543edf05146a4f353bf.png"> 
  <strong>Num Indirect Lighting Bounce(19:27)(间接光反弹次数)</strong> 
  许多用户喜欢把这个值提高到 100 次，不过好在这个对烘焙时长影响不大，但同时对光照质量影响也不大。实际使用这个值设置为 3 - 5 次就足够了。 
  <img src="https://images2.imgbox.com/34/c7/jZh09P0D_o.png" alt="12c93f2ebd00caa724730ee187cefd60.png"> 
  下面是对比数据： 
  ■ Bounce 0 (耗时 2 分 54 秒) 
  ■ Bounce 100 (耗时 3 分 31 秒) 
  <img src="https://images2.imgbox.com/ec/d9/bDGKfLgx_o.png" alt="9a3b8a5c9ef9a9313d9715f210455cdf.png"> 
  <strong>Static Lighting Level Scale(20:20)(静态光比例)</strong> 
  默认值为 1，越小细节越多，最终我们使用 0.1，对比如下(噪点下文讲)： 
  <img src="https://images2.imgbox.com/35/75/LAQ0SEB4_o.png" alt="99981b085a75b28b085d7b229263d013.png"> 
  <strong>Indirect Lighting Smoothness(21:00)(间接光光滑度)</strong> 
  这个值大于 1 会减少间接光的噪点(由静态光比例造成的噪点)，会增加烘焙时长。对比如下，值过大会造成溢光，1.2 左右效果良好： 
  <img src="https://images2.imgbox.com/00/fc/s2vmYfhL_o.png" alt="28d3241901454d779676d54ad009d1a0.png"> 
  <strong>Indirect Lighting Quality(21:51)(间接光质量)</strong> 
  控制光线数量，范围是 1~10 ，可以减少间接光反弹时产生的噪点，会极大增加烘焙时长。 
  ■ Indirect Lighting Quality 1(耗时 7 分 48 秒) 
  ■ Indirect Lighting Quality 10(耗时 1 小时 5 分 24 秒) 
  对比如下： 
  <img src="https://images2.imgbox.com/7c/6e/PgjAFrZD_o.png" alt="eb7d5fee25f9717b662cbcda60562649.png"> 
  <strong>Lighting Build Quality(22:10)(光照烘焙质量)</strong> 
  此项位于 Build 面板 
  <img src="https://images2.imgbox.com/f9/50/Jjtz6hfj_o.png" alt="f722e71da9948d768f94400f6fc81c7c.png"> 
  用于整体调整烘焙质量，对烘焙时长影响很大 
  ■ Preview(耗时 2 分 16 秒)预览 
  ■ Medium(耗时 7 分 48 秒)中级 
  ■ High(耗时 13 分 58 秒)高级 
  ■ Production(耗时 30 分 22 秒)产品级 
  <img src="https://images2.imgbox.com/e2/92/INITHfHm_o.png" alt="f64feb20667392cb1c1312b5f001e0f6.png"> 
  <strong>Lighting Level Scale 与 Indirect Lighting Quality</strong> 
  参照如下公式，我们可以得到良好的烘焙结果： 
  <em>Static Lighting Level Scale × Indirect Lighting Quality = 1</em> 
  ■ 0.1 × 10 = 1 
  ■ 0.2 × 5 = 1 
  ■ 0.5 × 2 = 1 
  <strong>各项设置对于烘焙时长的影响：</strong> 
  ■ Static Lighting Level Scale - 控制细节(<em><strong>中</strong></em>) 
  ■ Num Indirect Lighting Bounces - 控制明亮度(<em><strong>低</strong></em>) 
  ■ Indirect Lighting Quality - 降低噪点光斑(<em><strong>高</strong></em>) 
  ■ Indirect Lighting Smoothness - 模糊间接光(<em><strong>低</strong></em>) 
  <strong>使用 Light Portal 来增强天光</strong> 
  在门窗等结构处可以通过使用 Light Portal 来提升光照效果： 
  <img src="https://images2.imgbox.com/10/52/1gmeEL14_o.png" alt="5237b4cb572625ab4996973311ed638c.png"> 
  <strong>Directional Light Stationary Area Shadow(41:42)(平行光软阴影)</strong> 
  Lighting Source Angle 控制光源所占球形角度(如图红色部分)，范围 1~10。 
  <img src="https://images2.imgbox.com/3e/8a/Ay4P0b0l_o.png" alt="8a117e7ff1d1d9304a629492791818fb.png"> 
  <strong>Contact Shadows(接触阴影)</strong> 
  新功能，可以提供大物体上小细节阴影的效果，比较耗资源，但是实际使用感觉效果一般，值从 0.1 开始起效。 
  <img src="https://images2.imgbox.com/6a/6c/jnkhuxni_o.png" alt="af2e35c2cc1473369679c235faf5c554.png"> 
  视频内容到此结束。下面是完整视频 
  其他重点内容还有  
  <strong>LightmassImportanceVolume(重点光照区域)</strong> 
  ，如果不设置此项，Lightmass 将默认对全场景进行采样，对于较大场景来说，比较浪费资源。 
  Lightmass 中的，<strong>Environment Color</strong> 与 <strong>Environment Intensity</strong> 控制没有受到光线直射部分的颜色和强度(阴影部分)。 
  <strong>Diffuse Boost</strong>，控制反弹颜色强度，比如红色墙面反弹红色光线。 
  <img src="https://images2.imgbox.com/cc/8a/xoEEIOd0_o.png" alt="b1167699a7ab07d366516e58f7ed5bc1.png"> 
  最后确保一下 Lightmap 的存储是未压缩格式。 
  以上 Lightmass 设置适当调整可以让我们得到一个很棒的场景渲染效果，但是还有额外可以做的工作让效果更好，打个比方大概就是从 95%提高到 100% 的感觉，那就是手动更改引擎 <em><strong>BaseLightMass.ini</strong></em> 文件。 
  该配置文件位于相应版本引擎目录下的 <em><strong>...\Engine\Config</strong></em> 中，每个版本引擎都有各自的配置文件。 
  该文件内容比较复杂，所以这里我只列一些参考数值，具体含义也不进行讲解了。 
  离线渲染是不断调试的过程，所以不要无脑想把所有参数调的越高越好。 
  下面我列举一个参考调试过程： 
  使用<strong> “Medium” </strong>品质 Build。 
  <strong>①调试灯光大体效果</strong> 
  Static Lighting Level = 0.6 
  .ini 文件参数如下： 
  NumIrradianceCalculationPhotons = 4096 
  NumHemisphereSamples = 64 
  IndirectPhotonDensity = 3000 
  IndirectIrradiancePhotonDensity = 1500 
  IndirectPhotonSearchDistance = 180 
  <strong>②如没问题进行下一步调试</strong> 
  Static Lighting Level = 0.4 
  .ini 文件参数如下： 
  NumIrradianceCalculationPhotons = 4096 
  NumHemisphereSamples = 128 
  IndirectPhotonDensity = 6000 
  IndirectIrradiancePhotonDensity = 3000 
  IndirectPhotonSearchDistance = 180 
  <strong>③最终调试</strong> 
  Static Lighting Level = 0.2  
  .ini 文件参数如下： 
  NumIrradianceCalculationPhotons = 4096 
  NumHemisphereSamples = 256 或 512 
  IndirectPhotonDensity = 12000(如依旧有光斑，提高此项) 
  IndirectIrradiancePhotonDensity = 8000(如依旧有光斑，提高此项) 
  IndirectPhotonSearchDistance = 180(180 ~ 240) 
  文献地址： 
  https://mp.weixin.qq.com/s/CUVJ57s_qsCNzdVHw5OhNQ 
  <strong>场景环境 烘焙参数 设置完毕我们接下来看下影响烘焙质量的另一个参数设置</strong> 
  <h2><span style="font-weight:bold;"><strong>Lightmass光照烘培</strong></span></h2> 
  01.GI(间接光)计算实际是造成目前次世代游戏引擎不真实的罪魁祸首，UE4其实完全能达到离线渲染的GI质量水平，关键是参数的调整和 大量的计算时间，关于GI也就是LightMass计算的调节，UE4在编辑器中给出了4个预制档位。 
  <img src="https://images2.imgbox.com/8d/da/y0RvNRqz_o.png" alt="fb3cdea280b0386a16a105cd4443b1bb.png"> 
  以下谈论的部分不涉及LightMass光照贴图的分辨率影响。光照贴图分辨率越小越好，如果你明确阴影产生的是锯齿而不是噪点，那就该加分辨率。 
  这四个档位实际上只是针对具体的基本参数的倍率关系，具体倍率在 
  Epic Games/4.9(你的引擎版本号) 
  /Engine/Config/BaseLightmass.ini 
  文件中(记事本打开)Crtl+F搜索对应档位关键词可以找到。可以自己调也可以保持默认以防调整太夸张。 
  02.另外在引擎中另一个地方的参数同样会影响基础烘培参数，那就是“世界设置”，如下 
  <img src="https://images2.imgbox.com/63/08/xDCtmqTi_o.png" alt="a000b1421a287186b25181c342413341.png"> 
  涉及到的参数包括 
  1. 
  Static Lighting LevelScale 
  (下文简称SLLS)，世界尺寸缩放，这里的缩放指的用于计算光照的参考尺寸，而不是真正的改变场景尺寸，默认为1，可以小到0.1。 
  重点参数，越小计算采样的基础精度(采样数上升)越高。计算时间受该参数强烈影响。 
  Static Lighting Level Scale(静态光源等级缩放) 
  这可用于确定在照明中计算多少细节，较小的比例将大大增加构建时间和细节。增加细节。 
  1-0.5-0.2-0.1 
  <img src="https://images2.imgbox.com/bb/f2/P7Ulw60L_o.png" alt="b944fa8933e7a1295a6ef3f033c1f5a5.png"> 
  2. 
  Num Indirect LightingBounce 
  (下文简称NILB)，反弹次数，对计算时间影响不大，越高GI反弹次数越多，同时如果精度不够，也意味着噪点将会更容易产生。可以大到100。非重点参数。 
  Num Indirect/Sky Lighting Bounces：影响场景中中的亮度 
  <img src="https://images2.imgbox.com/e0/78/qABGCLV7_o.png" alt="026328cc9a8e961dd1dd64094e3ee945.png"> 
  3.  
  Indirect Lighting Quality 
  (下文简称ILQ)，间接光计算质量，默认值1，可以大到10， 
   重点参数，对精度影响巨大，计算时间也和这个值成整倍数上升。 
  Indirect Lighting  
  Quality(间接照明质量) 
  设置越高，会导致构建时间大量增加，但解算器穿帮(噪点、斑点)变少。减少噪点 
  <img src="https://images2.imgbox.com/3d/ea/HQpQKBzA_o.png" alt="105866c144a5919f93d5c2ccc171dd95.png"> 
  在经验上，我们为了构建时间和最后质量做权衡，我们让他们有一个固定的关系 
  <img src="https://images2.imgbox.com/7b/ab/0tDgD9Zq_o.png" alt="7798ec2ed061336e26be9d417b54f5fd.png"> 
  4. 
  Indirect LightingSmoothness 
  (下文简称ILS),结果模糊度，用于模糊计算结果，平滑噪点，基本保持1的值，过大细节丢失，过小噪点凸显。 
  Indirect Lighting Smoothness(间接照明平滑度)：影响场景中中的亮度 
  <img src="https://images2.imgbox.com/05/4c/zMcGHmLp_o.png" alt="c4906ce648308343aa80acf478f01734.png"> 
  Evironment color/Environment intensity 
  <img src="https://images2.imgbox.com/57/83/IMJaNBfV_o.png" alt="1ef01ddc851d24a5871335a8d1160e90.png"> 
  5. 
  Diffuse Boost 
  (漫反射增强)：加 Diffuse Boost的值是增加场景中间接光照亮度的有效方式 
  6. 
  Use Ambient Occlusion 
  (使用环境遮挡)： 
  使静态环境遮挡可以通过全局光照计算并内置到您的光照图中。 
  7. 
  Direct Illumination Occlusion Fraction 
  (直接照明遮挡率)：多少AO应用于直接照明 
  8. 
  Indirect Illumination Occlusion Fraction 
  (间接照明遮挡率)：多少AO应用于间接照 
  9. 
  Occlusion Exponent 
  (遮挡指数)：指数越高，对比度越高 
  10. 
  Fully Occluded Samples Fraction 
  (完全遮挡样本比例)： 
  为了达到完全遮挡，必须遮挡的样本的比例。 
  11. 
  Max Occlusion Distance 
  (最大遮挡距离)： 
  一个对象对另一个对象造成遮挡的最大距离。 
  12. 
  Visualize Material Diffuse 
  (可视化材质漫反射)： 
  仅用导出到全局光照的材质漫反射覆盖法线直接和间接照明。这在验证导出的材质漫反射与实际漫反射匹配时非常有用。 
  13. 
  Visualize Ambient Occlusion 
  (可视化环境遮挡)： 
  仅用AO项覆盖法线直接和间接照明。这在调整环境遮挡设置时很有用，因为它隔离了遮挡项。 
  14. 
  Compress Lightmaps 
  (压缩)：是否压缩lightmap 
  综上所诉，最终的质量由 “采样数量”和 “采样精度”共同决定，缺一不可。 
  下面来分别讲解这两者的调节，只讨论质量，不计时间成本。 
  采样数量”：在引擎中，受SLLS的值控制， 
  在文首提到的BaseLightMass.ini文件中， 
  也受 
  NumIrradianceCalculationPhotons 
  和 
  IndirectPhotonScarchDistance 
  两者共同的影响，就是说两者要调一起调，单独调没用。无论在引擎还是在ini文件中调，都行，选其一就行。如下图。 
  <img src="https://images2.imgbox.com/46/ca/7X4pxQiY_o.png" alt="f25d43ba66c1bd25b6013b161ff6c5c0.png"> 
  <img src="https://images2.imgbox.com/6b/57/KG4kL3DO_o.png" alt="9502aee6ae909034b36a5de0758aa53e.png"> 
   “采样精度”：在引擎中，受ILQ控制， 
  在BaseLightMass.ini中， 
  受NumHemisphereSamples  
  或者NumHemisphereSamplesScale的控制， 
  三者选其一即可。 
  光源设置灯光 
  <img src="https://images2.imgbox.com/89/16/Ni9UtQFC_o.png" alt="ae57c18fbab037287a2fb5b42abcf51d.png"> 
  indirect Lighting Saturatio 
  n(间接照明饱和度) 
  Shadow Exponent 
  (阴影指数) 
  控制阴影半影的衰减，或区域从完全光照到完全阴影的变化速度 
  <img src="https://images2.imgbox.com/3e/c9/GyqRbXMF_o.png" alt="d0b40798b5c8189e18798df0fe0d90a2.png"> 
   最后说一说渲染时间，想要好的效果，要花费不少的时间，如果是单台I7级别的电脑，简单场景高质量花费十多个小时很正常，复杂场景就更多了，所以建议有条件的使用引擎路径中的SwamCoordinator小软件 
   (可以在引擎安装目录搜索出来)联机渲染，效率高很多，具体设置这里就不展开了，Google 
  文献地址： 
  https://mp.weixin.qq.com/s/CUVJ57s_qsCNzdVHw5OhNQ 
  <strong>下一期我们分享资源导UE4应该做哪些准备工作</strong> 
  <p><img src="https://images2.imgbox.com/59/70/LGqiOhXA_o.png" alt="ce32bb979b78547377e7f3e4d25e07f0.png"></p> 
  <p><strong>本期分享就到这里！更多精彩+++关注联系我们   </strong></p> 
  <p><strong>下期见，学习不止，不止学习</strong></p> 
  <img src="https://images2.imgbox.com/93/a4/GPHj05ty_o.png" alt="747a9a5cf20b509b56357ac6ba8f8754.png"> 
  <p>微信群服务号</p> 
  <img src="https://images2.imgbox.com/56/f7/F7vTAjfg_o.png" alt="0a2e6a833b47c3052a4b2dfe812a0e37.png"> 
  <p>公众号</p> 
  <img src="https://images2.imgbox.com/74/b5/XdmRXy7j_o.png" alt="d61810388ae0e882d6aa1a4272e2db83.png"> 
  <p>B站</p> 
 </div> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3079279ec6a886a58ad78ad98a2adba5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PCA从原理到实践(基于R）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/97d50091959e0d4a98d259cb769919eb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python获取工作日_Python的上一个工作日</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>