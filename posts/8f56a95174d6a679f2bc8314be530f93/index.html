<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Analyzing and Improving the Image Quality of StyleGAN - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Analyzing and Improving the Image Quality of StyleGAN" />
<meta property="og:description" content="前言 本文围绕2019年上半年的工作 StyleGAN 存在的两个问题进行讨论：
Blob Artifacts(液滴伪像)；Shift Invariance(切变不变性)。 为了解决这两个问题作者提出了一系列的假设、分析和解决方法。
明确 StyleGAN 的问题 首先我们需要明确上面提到的两个问题分别是什么？
Blob ArtifactsShift Invariance液滴伪像 即合成图像含有小范围内的像“水墨化开”的伪影，
作者说，仅有大约0.1%的生成图像不会出现这种伪像。切变不变性 以“转脸”为例（具体如何定向编辑 stylegan 合成的图像
可以看后面解析），像牙齿、眼睛这些高频区域（details），
倾向于不变 解决问题 1. Removing normalization artifacts 作者发现 StyleGAN 在训练过程中，从 64 × 64 64\times 64 64×64 之后，就会开始出现 blob artifacts resemble water droplets （水滴状💧的伪像），如下图：
尽管这些对于图像整体不明显，但确实是存在的。
并且越到高层，这种伪像越明显；这是很奇怪的，因为理论上它本应该倍 鉴别器 D D D 检测到。
** 上图每一对图像右边是 visualization of feature maps，具体操作用伪代码解释如下：
&#39;&#39;&#39; ## we use pytorch F is the feature_map # (C, H, W) mu = torch." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/8f56a95174d6a679f2bc8314be530f93/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-12-15T16:04:01+08:00" />
<meta property="article:modified_time" content="2019-12-15T16:04:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Analyzing and Improving the Image Quality of StyleGAN</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>前言</h2> 
<hr> 
<blockquote> 
 <p>本文围绕2019年上半年的工作 <code>StyleGAN</code> 存在的两个问题进行讨论：</p> 
 <ol><li>Blob Artifacts(液滴伪像)；</li><li>Shift Invariance(切变不变性)。</li></ol> 
</blockquote> 
<blockquote> 
 <p>为了解决这两个问题作者提出了一系列的<strong>假设</strong>、<strong>分析</strong>和<strong>解决方法</strong>。</p> 
</blockquote> 
<h2><a id="_StyleGAN__7"></a>明确 <code>StyleGAN</code> 的问题</h2> 
<hr> 
<p>首先我们需要明确上面提到的两个问题分别是什么？</p> 
<table><thead><tr><th align="left">Blob Artifacts</th><th align="left">Shift Invariance</th></tr></thead><tbody><tr><td align="left"><img src="https://images2.imgbox.com/4c/e4/PjW7XZ6w_o.gif" alt="blob artifacts sample"></td><td align="left"><img src="https://images2.imgbox.com/4c/25/8x8TEd1L_o.gif" alt="shift invariance sample"></td></tr><tr><td align="left"><strong>液滴伪像</strong> 即合成图像含有小范围内的像“水墨化开”的伪影，<br>作者说，仅有大约0.1%的生成图像不会出现这种伪像。</td><td align="left"><strong>切变不变性</strong> 以“转脸”为例（具体如何定向编辑 stylegan 合成的图像<br>可以看后面解析），像<strong>牙齿</strong>、<strong>眼睛</strong>这些高频区域（details），<br>倾向于不变</td></tr></tbody></table> 
<h2><a id="_15"></a>解决问题</h2> 
<hr> 
<h3><a id="1_Removing_normalization_artifacts_17"></a>1. Removing normalization artifacts</h3> 
<blockquote> 
 <p>作者发现 <code>StyleGAN</code> 在训练过程中，从 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          64 
         
        
          × 
         
        
          64 
         
        
       
         64\times 64 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">6</span><span class="mord">4</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">6</span><span class="mord">4</span></span></span></span></span> 之后，就会开始出现 <code>blob artifacts resemble water droplets</code> （水滴状💧的伪像），如下图：<br> <img src="https://images2.imgbox.com/61/4a/StiM83XR_o.png" alt="在这里插入图片描述"><br> 尽管这些对于图像整体不明显，但确实是存在的。<br> 并且越到高层，这种伪像越明显；这是很奇怪的，因为理论上它本应该倍 鉴别器 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          D 
         
        
       
         D 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span></span></span></span></span> 检测到。</p> 
</blockquote> 
<blockquote> 
 <p>** 上图每一对图像右边是 <code>visualization of feature maps</code>，具体操作用伪代码解释如下：</p> 
 <pre><code class="prism language-python"><span class="token triple-quoted-string string">'''
## we use pytorch
F is the feature_map # (C, H, W)
mu = torch.mean(F, dim=0).unsqueeze(-1).unsqueeze(-1) # (C, 1, 1)
sigma = torch.var(F, dim=0).unsqueeze(-1).unsqueeze(-1) # (C, 1, 1)
F_normed = (F - mu) / sigma

map = torch.sum(F_normed, dim=0)
'''</span>
</code></pre> 
</blockquote> 
<h6><a id="_blob_artifacts__35"></a>首先我们要明确 blob artifacts 并不是不好。</h6> 
<blockquote> 
 <h6><a id="_StyleGAN__36"></a>液滴伪像对于 <code>StyleGAN</code> 为什么是必须的？</h6> 
 <blockquote> 
  <p>具体地说，作者假设，液滴伪像是生成器 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           G 
          
         
        
          G 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 故意将信号强度信息头痛图经过 Instance Normalization 的结果——因为通过创建一个局部强信号可以很实现对特征指定通道的统计特征，从而实现对数据流的“支配（dominates）”。<br> 因为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           G 
          
         
        
          G 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 只需要生成统计特征上可以骗过 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           D 
          
         
        
          D 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span></span></span></span></span> 的数据即可。<br> 想象一下，一个2维 feature map channel 原本是一个平坦的均匀分布；在添加了局部的峰后，其均值马上像均值所在位置靠拢，方差马上从 0 开始增大。</p> 
 </blockquote> 
 <p>从这个意义上，我们可以理解“the blob artifacts guide the generation”这句话，换句话说，因为有这样的伪像存在，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          G 
         
        
       
         G 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 才能够对输出的数据流进行有效的控制，从而合成能够欺骗过 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          D 
         
        
       
         D 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span></span></span></span></span> 的图像。假如那0.1%的生成图像在生成过程中的 feature 中没有产生 这样的伪像，就极有可能生成质量差的图像。<br> 为此作者举了下面一个例子<br> <img src="https://images2.imgbox.com/02/ca/hrDi0xBJ_o.png" alt="在这里插入图片描述"><br> 我们看到两个图像合成过程中，</p> 
 <ul><li>在 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           6 
          
          
          
            4 
           
          
            2 
           
          
         
        
          64^2 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord">6</span><span class="mord"><span class="mord">4</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> 这层是差不多的；</li><li>但是到了 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           12 
          
          
          
            8 
           
          
            2 
           
          
         
        
          128^2 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord"><span class="mord">8</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> 这一层，上面一行在右下角突然出现了 伪像（极大或极小），而下面一行没有，所以相对的，五官、头发这些细节（高频区域）更加明显；</li><li>等到 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           25 
          
          
          
            6 
           
          
            2 
           
          
         
        
          256^2 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> 这一层，上面一行因为有伪像的压制，其他区域相对平滑，但下面一行就对细节处产生了更多的大块的伪像（<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           G 
          
         
        
          G 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 为了控制输出的数据流的统计特性）；</li><li>到了 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           51 
          
          
          
            2 
           
          
            2 
           
          
         
        
          512^2 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord">5</span><span class="mord">1</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> 这一层，上面一行只有极小块的液滴伪像，下面一行则多处出现；</li><li>最后生成的图像效果可想而知。<br> 因此，我们总结，<code>StyleGAN</code> 的合成图像依赖于这些液滴伪像。</li></ul> 
</blockquote> 
<h6><a id="_artifacts__52"></a>但是，存在 artifacts 终究还是不够完美…</h6> 
<blockquote> 
 <p>作者指出，这是由于引入了 <code>AdaIN</code> 导致的。<br> 因为作者做了一个实验：</p> 
 <blockquote> 
  <p>通过将 <code>AdaIN</code> 中 调制(modulation) 之前的 正则化(normalization) 去掉，这个伪像就彻底消失了。</p> 
 </blockquote> 
 <blockquote> 
  <p><code>AdaIN</code> 对 feature map 的每一个 channel 分别做正则化（mean 和 variance），这可能破坏了特征相邻通道之间的本身存在的<strong>大小关系(magnitudes)</strong>。 （——原文的翻译：… We pinpoint the problem to the AdaIN operation that normalizes the mean and variance of each feature map separately, thereby potentially destroying any information found in the magnitudes of the features relative to each other… ）<br> 但 UP 主拙见，是因为对每个通道单独做 normalization，然后再统一预测每个通道的均值方差，可能直接导致了每个通道的数据分布被修改。</p> 
 </blockquote> 
</blockquote> 
<blockquote> 
 <p>但是，我们又不希望这些液滴伪像出现在图像上（即<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          G 
         
        
       
         G 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 的输出数据流中），但又不能消除它，因为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          G 
         
        
       
         G 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 的生成依赖于液滴伪像的引导。<br> <strong>该怎么做？</strong></p> 
</blockquote> 
<blockquote> 
 <p>我们知道，整个 <code>StyleGAN</code> 每一层可以简单地看作是 <code>out_feature = non_linear_activation(W * in_feature + bias)</code>，其中的 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          ∗ 
         
        
       
         * 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.46528em; vertical-align: 0em;"></span><span class="mord">∗</span></span></span></span></span> 是 <code>conv</code> 。<br> 因此，输出的数据流是由输入数据流（from latent vector to space）和卷积参数（weights）共同决定的，，我们可以把液滴伪像的作用从从数据流迁移到卷积参数中去，而并直接不作用到待合成图像的数据流上？<br> <br><br> 作者就是这么做的！</p> 
</blockquote> 
<p>Generator architecture revisited</p> 
<blockquote> 
 <p>为此，我们需要首先回顾一下 <code>StyleGAN</code> 的结构。</p> 
 <table><thead><tr><th align="left"><img src="https://images2.imgbox.com/71/56/Nai0N10b_o.png" alt="-"></th><th align="left">我们可以发现，<br>卷积的偏差<em>b</em> 与噪声<em>B</em>是在 <code>StyleBlock</code> 中执行的，<br>即在 normalization 之前加入的，这使得 bias 和 noise <br>的作用与 style 是相反的；因为假如 bias/noise <br>导致了 feature map 的值偏大，style 学习到的参数 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
         
          
           
           
             γ 
            
           
          
            \gamma 
           
          
        </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05556em;">γ</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
         
          
           
           
             β 
            
           
          
            \beta 
           
          
        </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05278em;">β</span></span></span></span></span> 就去缩小它。</th></tr></thead><tbody></tbody></table> 
 <p>因此，我们不妨把 bias 和 noise 的步骤从 <code>style block</code> 中拿出来，即把<img src="https://images2.imgbox.com/31/2f/OHfPS1sL_o.png" alt="在这里插入图片描述">和<img src="https://images2.imgbox.com/2e/de/nWNlLEFm_o.png" alt="在这里插入图片描述">调换一下，得到<img src="https://images2.imgbox.com/9e/80/ZPWhcXDk_o.png" alt="在这里插入图片描述">，与原来的比较：<img src="https://images2.imgbox.com/c4/9e/YVC6OmKS_o.png" alt="在这里插入图片描述">。<br> 这样做的<strong>另一个好处</strong>是：既然现在 bias 和 nosie 于 style 的作用是一样的，那么意味着：style 产生 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          β 
         
        
       
         \beta 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05278em;">β</span></span></span></span></span> 就可以省略了，直接让卷积的参数 <code>.bias</code> 去学即可。因此，现在我们只需要：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          γ 
         
        
          = 
         
        
          = 
         
        
          F 
         
        
          C 
         
        
          ( 
         
        
          s 
         
        
          t 
         
        
          y 
         
        
          l 
         
        
          e 
         
        
          ) 
         
        
       
         \gamma==FC(style) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05556em;">γ</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height: 0.36687em; vertical-align: 0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mclose">)</span></span></span></span></span> 。<br> (作者实验也发现，将预测 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          β 
         
        
       
         \beta 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05278em;">β</span></span></span></span></span> 的部分去掉，在我们将 bias 和 nosie 拿到外面后是更有帮助的)</p> 
</blockquote> 
<p>Instance normalization revisted</p> 
<blockquote> 
 <p>然后我们还要看一下 IN 的原理——<br> （1）normalization（正则化）</p> 
 <blockquote> 
  <p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
        
         
          
           
           
             o 
            
            
            
              c 
             
            
              , 
             
            
              h 
             
            
              , 
             
            
              w 
             
            
           
             ′ 
            
           
          
            = 
           
           
            
             
             
               o 
              
              
              
                c 
               
              
                , 
               
              
                h 
               
              
                , 
               
              
                w 
               
              
             
            
              − 
             
             
             
               μ 
              
             
               c 
              
             
            
            
            
              σ 
             
            
              c 
             
            
           
          
         
           o'_{c,h,w}={<!-- -->{o_{c,h,w}-\mu_c}\over{\sigma_c}} 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.185em; vertical-align: -0.383108em;"></span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.801892em;"><span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">c</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">h</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span></span></span></span><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.09633em; vertical-align: -0.836em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.26033em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">c</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">h</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathdefault">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.836em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></span><br> 其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            μ 
           
          
            c 
           
          
         
           = 
          
          
          
            1 
           
           
           
             C 
            
           
             H 
            
           
             W 
            
           
          
         
           × 
          
          
           
           
             ∑ 
            
           
             h 
            
           
             H 
            
           
           
           
             ∑ 
            
           
             w 
            
           
             W 
            
           
           
           
             o 
            
            
            
              c 
             
            
              , 
             
            
              h 
             
            
              , 
             
            
              w 
             
            
           
          
         
        
          \mu_c={<!-- -->{1}\over{CHW}}\times{\sum_{h}^{H}\sum_w^Wo_{c,h,w}} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.19011em; vertical-align: -0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.07153em;">C</span><span class="mord mathdefault mtight" style="margin-right: 0.08125em;">H</span><span class="mord mathdefault mtight" style="margin-right: 0.13889em;">W</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.28094em; vertical-align: -0.29971em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.981231em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">h</span></span></span></span><span class="" style="top: -3.2029em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.08125em;">H</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.981231em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span></span></span><span class="" style="top: -3.2029em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.13889em;">W</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">c</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">h</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span>，且<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            σ 
           
          
            c 
           
          
         
           = 
          
          
          
            1 
           
           
           
             C 
            
           
             H 
            
           
             W 
            
           
          
         
           × 
          
          
           
           
             ∑ 
            
           
             h 
            
           
             H 
            
           
           
           
             ∑ 
            
           
             w 
            
           
             W 
            
           
          
            ( 
           
           
           
             o 
            
            
            
              c 
             
            
              , 
             
            
              h 
             
            
              , 
             
            
              w 
             
            
           
          
            − 
           
           
           
             μ 
            
           
             c 
            
           
           
           
             ) 
            
           
             2 
            
           
          
         
        
          \sigma_c={<!-- -->{1}\over{CHW}}\times{\sum_{h}^{H}\sum_w^W(o_{c,h,w}-\mu_c)^2} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.19011em; vertical-align: -0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.07153em;">C</span><span class="mord mathdefault mtight" style="margin-right: 0.08125em;">H</span><span class="mord mathdefault mtight" style="margin-right: 0.13889em;">W</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.28094em; vertical-align: -0.29971em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.981231em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">h</span></span></span></span><span class="" style="top: -3.2029em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.08125em;">H</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.981231em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span></span></span><span class="" style="top: -3.2029em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.13889em;">W</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">c</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">h</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathdefault">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></span>.</p> 
 </blockquote> 
 <p>（2）modulation（调制）</p> 
 <blockquote> 
  <p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
        
         
          
           
           
             o 
            
            
            
              c 
             
            
              , 
             
            
              h 
             
            
              , 
             
            
              w 
             
            
            
            
              ′ 
             
            
              ′ 
             
            
           
          
            = 
           
           
           
             γ 
            
           
             c 
            
           
          
            × 
           
           
           
             o 
            
            
            
              x 
             
            
              , 
             
            
              h 
             
            
              , 
             
            
              w 
             
            
           
             ′ 
            
           
          
            + 
           
           
           
             β 
            
           
             c 
            
           
          
         
           o''_{c,h,w}=\gamma_c\times o'_{x,h,w}+\beta_c 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.185em; vertical-align: -0.383108em;"></span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.801892em;"><span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">c</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">h</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span></span></span></span><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.05556em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.185em; vertical-align: -0.383108em;"></span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.801892em;"><span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">h</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span></span></span></span><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.05278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></p> 
 </blockquote> 
 <p>下面作者准备出招了！<br> （1）作者认为，可以将<strong>正则化</strong>去掉，于是：style 的效果和作用就变成了<strong>逐层累加</strong>的（cumulative）而不是指定大小的（scale specific），因为每次<strong>正则化</strong>会把每个通道之间的大小关系消除，也就是把 style 产生的 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          γ 
         
        
       
         \gamma 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05556em;">γ</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          β 
         
        
       
         \beta 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05278em;">β</span></span></span></span></span> 的作用消除。（这是思想的升华！）<br> 于是我们可以得到：<img src="https://images2.imgbox.com/9c/c6/UmPO1rFr_o.png" alt="在这里插入图片描述">这样简单的形式。这样可以减小 FID 分数。<br> 但是这样作者发现会丢失了 <code>StyleGAN</code> 原本的控制性。因此，<strong>还是加上为好</strong>。<br> （2）还记得前面我们说现在 style 不需要预测 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          β 
         
        
       
         \beta 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05278em;">β</span></span></span></span></span> 了吗？<br> 因此，style 预测得到的 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          γ 
         
        
       
         \gamma 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05556em;">γ</span></span></span></span></span> 作用在 feature map 上可以等效于先做用在各个卷积核上，然后再作用在 feature map上！<br> 即，我们考虑到下图的操作是等效的：<br> <img src="https://images2.imgbox.com/a5/a9/T9jbsxYh_o.png" alt="在这里插入图片描述"><br> 用数学公式描述为：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            w 
           
           
           
             i 
            
           
             j 
            
           
             k 
            
           
          
            ′ 
           
          
         
           = 
          
          
          
            γ 
           
          
            i 
           
          
         
           × 
          
          
          
            w 
           
           
           
             i 
            
           
             j 
            
           
             k 
            
           
          
         
        
          w'_{ijk}=\gamma_i \times w_{ijk} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.185em; vertical-align: -0.383108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.801892em;"><span class="" style="top: -2.453em; margin-left: -0.02691em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.05556em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.716668em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.02691em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span><br> 这就把<strong>调制</strong> modulation 作用到卷积核上。其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          i 
         
        
       
         i 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.65952em; vertical-align: 0em;"></span><span class="mord mathdefault">i</span></span></span></span></span> 表示卷积核的第 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          i 
         
        
       
         i 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.65952em; vertical-align: 0em;"></span><span class="mord mathdefault">i</span></span></span></span></span> 个通道；<em>j</em> 表示第 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          j 
         
        
       
         j 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.85396em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05724em;">j</span></span></span></span></span> 个卷积核；<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          k 
         
        
       
         k 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span></span></span></span></span> 表示卷积核的所有窗口元素。</p> 
 <blockquote> 
  <p>如果我们假设输入的 feature map 是 i.i.d. 的随机变量，那么，输出的被 feature map 的第 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           j 
          
         
        
          j 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.85396em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05724em;">j</span></span></span></span></span> 个通道 的标准差等于：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
        
         
          
           
           
             σ 
            
           
             j 
            
           
          
            = 
           
           
            
             
             
               ∑ 
              
              
              
                i 
               
              
                , 
               
              
                k 
               
              
             
             
              
              
                w 
               
              
                ′ 
               
              
              
              
                i 
               
              
                j 
               
              
                k 
               
              
             
               2 
              
             
            
           
          
         
           \sigma_j=\sqrt{\sum_{i,k}{w'}_{ijk}^2} 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.716668em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 3.04em; vertical-align: -1.60023em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.43977em;"><span class="svg-align" style="top: -5em;"><span class="pstrut" style="height: 5em;"></span><span class="mord" style="padding-left: 1em;"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.05001em;"><span class="" style="top: -1.84789em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.43822em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.677892em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8819em;"><span class="" style="top: -2.453em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="" style="top: -3.13079em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.39977em;"><span class="pstrut" style="height: 5em;"></span><span class="hide-tail" style="min-width: 1.02em; height: 3.08em;"> 
              <svg width="400em" height="3.08em" viewbox="0 0 400000 3240" preserveaspectratio="xMinYMin slice"> 
               <path d="M473,2793c339.3,-1799.3,509.3,-2700,510,-2702
c3.3,-7.3,9.3,-11,18,-11H400000v40H1017.7s-90.5,478,-276.2,1466c-185.7,988,
-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,
-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200c0,-1.3,-5.3,8.7,-16,30c-10.7,
21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26s76,-153,76,-153s77,-151,
77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,606z
M1001 80H400000v40H1017z"></path> 
              </svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.60023em;"><span class=""></span></span></span></span></span></span></span></span></span></span></p> 
 </blockquote> 
 <p>调制完成后，本来应该是需要进行 normalization 的，但前面我们说 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          β 
         
        
       
         \beta 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05278em;">β</span></span></span></span></span> 是不必要的，因此，我们采取 <strong>解调制（demodulation）</strong><br> 具体地，我们仅对每个元素除以这个通道所有元素组成的数据分布的标准差！而不先减去其均值。<br> 在上面的 i.i.d. 的假设中，我们知道了输出也一定是 i.i.d. 的随机变量，因此<strong>对 output feature 除以标准差</strong>也可以放到卷积核的参数上完成。<br> 即：</p> 
 <blockquote> 
  <p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
        
         
          
           
           
             1 
            
            
            
              σ 
             
            
              j 
             
            
           
          
            × 
           
          
            o 
           
          
            u 
           
          
            t 
           
          
            _ 
           
          
            f 
           
          
            e 
           
          
            a 
           
          
            t 
           
          
            u 
           
          
            r 
           
           
           
             e 
            
           
             j 
            
           
          
            = 
           
          
            c 
           
          
            o 
           
          
            n 
           
          
            v 
           
          
            ( 
           
          
            o 
           
          
            u 
           
           
           
             t 
            
           
             f 
            
           
          
            e 
           
          
            a 
           
          
            t 
           
          
            u 
           
          
            r 
           
          
            e 
           
          
            ∣ 
           
          
            d 
           
          
            e 
           
          
            m 
           
          
            o 
           
          
            d 
           
          
            u 
           
          
            l 
           
          
            a 
           
          
            t 
           
          
            e 
           
          
            ( 
           
           
           
             w 
            
           
             j 
            
           
             ′ 
            
           
          
            ) 
           
          
            ) 
           
          
         
           {<!-- -->{1}\over{\sigma_j}}\times out\_feature_j=conv(out_feature|demodulate(w'_j)) 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 2.29355em; vertical-align: -0.972108em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.972108em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">t</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="mord mathdefault">e</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.185em; vertical-align: -0.383108em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mopen">(</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault">e</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord">∣</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.801892em;"><span class="" style="top: -2.453em; margin-left: -0.02691em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></span><br> 其中：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
        
         
          
           
           
             w 
            
           
             j 
            
            
            
              ′ 
             
            
              ′ 
             
            
           
          
            = 
           
           
            
            
              w 
             
            
              j 
             
            
              ′ 
             
            
            
             
              
              
                ∑ 
               
               
               
                 i 
                
               
                 , 
                
               
                 k 
                
               
              
              
              
                w 
               
               
               
                 i 
                
               
                 j 
                
               
                 k 
                
               
              
                ′ 
               
              
             
               + 
              
             
               ϵ 
              
             
            
           
          
         
           w''_j={<!-- -->{w'_j}\over{\sqrt{\sum_{i,k}w'_{ijk}+\epsilon}}} 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.185em; vertical-align: -0.383108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.801892em;"><span class="" style="top: -2.453em; margin-left: -0.02691em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 3.26666em; vertical-align: -1.73em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.53666em;"><span class="" style="top: -2.11em;"><span class="pstrut" style="height: 3.14129em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.14129em;"><span class="svg-align" style="top: -3.8em;"><span class="pstrut" style="height: 3.8em;"></span><span class="mord" style="padding-left: 1em;"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.186398em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.435818em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.733692em;"><span class="" style="top: -2.39869em; margin-left: -0.02691em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="" style="top: -3.0448em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.437416em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathdefault">ϵ</span></span></span><span class="" style="top: -3.10129em;"><span class="pstrut" style="height: 3.8em;"></span><span class="hide-tail" style="min-width: 1.02em; height: 1.88em;"> 
                      <svg width="400em" height="1.8800000000000001em" viewbox="0 0 400000 1944" preserveaspectratio="xMinYMin slice"> 
                       <path d="M1001,80H400000v40H1013.1s-83.4,268,-264.1,840c-180.7,
572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,
-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744c-10,12,-21,25,-33,39s-32,39,-32,39
c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30c26.7,-32.7,52,-63,76,-91s52,-60,52,-60
s208,722,208,722c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,
-658.5c53.7,-170.3,84.5,-266.8,92.5,-289.5c4,-6.7,10,-10,18,-10z
M1001 80H400000v40H1013z"></path> 
                      </svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.698708em;"><span class=""></span></span></span></span></span></span></span><span class="" style="top: -3.37129em;"><span class="pstrut" style="height: 3.14129em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.92606em;"><span class="pstrut" style="height: 3.14129em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -2.44134em; margin-left: -0.02691em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.394772em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.73em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></span>.</p> 
 </blockquote> 
</blockquote> 
<blockquote> 
 <p>至此，我们将一整个 <code>Style Block</code> 压缩成一个简单的 <code>conv</code> 操作！大道至简！<br> 上述的将**解调制（demodulation）**与调制（modulation）<strong>转移到卷积权重的这个新的技术，我们称之为</strong></p> 
 <h4>Weight Deulation</h4>，这是文章第一个创新，是为了去除 IN 引入的&amp;&amp;液滴伪像。 
 <br> 
 <img src="https://images2.imgbox.com/76/37/sg5JRdWt_o.png" alt="在这里插入图片描述"> 
 <br> 上图说明，现在特征图可视化后中间是没有出现局部最小或最大的伪像的，所以特征图谱表现出来的是全局语义区域普遍更加明显。 
 <p></p> 
</blockquote> 
<h3><a id="2_Image_Quality_and_Generator_Smoothness_113"></a>2. Image Quality and Generator Smoothness</h3> 
<blockquote> 
 <p>首先作者发现依靠 <code>FID</code> 和 <code>P&amp;R</code> 这两项指标去判断生成模型性能是不够充分的，这两项指标无法直接正确反映生成图像对人类的视觉效果。有下面的对比图：<br> <img src="https://images2.imgbox.com/bb/c6/GhEbrSZB_o.png" alt="在这里插入图片描述"><br> 我们发现，尽管对比图中 <code>FID</code> 与 <code>P&amp;R</code> 非常相近，但合成图像质量却有明显差别。</p> 
 <blockquote> 
  <p>作者在论文里解释了，为什么 <code>FID</code> 与 <code>P&amp;R</code> 无发胜任评判工作的原因：<br> 因为这两项度量方式依靠的是在 <code>ImageNet</code> 上预训练分类器（如 <code>Inception-v3</code> 或者 <code>VGG-16</code>），其 <code>feature extractor</code> 映射的特征空间（feature space）具有这么一个特点：</p> 
  <pre><code class="prism language-sh">make a decision based much more on texture than shape,
while humans strongly focus on shape.
</code></pre> 
 </blockquote> 
 <p>但有一个指标是明显不同的，就是本文提出的：<strong>PPL(Perceptual Path Length)</strong>.</p> 
 <blockquote> 
  <p><strong>PPL</strong></p> 
  <table><thead><tr><th align="left">用途</th><th align="left">方法</th></tr></thead><tbody><tr><td align="left">用来度量一个从 latent space 到 image 的 mapping的平滑度（可以看做是隐空间流形的平滑度）</td><td align="left">计算对隐空间的隐向量 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
          
           
            
            
              w 
             
            
           
             w 
            
           
         </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span></span></span></span></span> 施加轻微的干扰 得到 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
          
           
            
            
              Δ 
             
            
              w 
             
            
              + 
             
            
              w 
             
            
           
             \Delta w+w 
            
           
         </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord">Δ</span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span></span></span></span></span>，我们计算生成的两张图像 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
          
           
            
            
              I 
             
            
           
             I 
            
           
         </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.07847em;">I</span></span></span></span></span> 与 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
          
           
            
             
             
               I 
              
             
               ′ 
              
             
            
           
             I' 
            
           
         </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.751892em; vertical-align: 0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span> 之间的 <a href="https://github.com/richzhang/PerceptualSimilarity"><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
           
            
             
             
               L 
              
             
               P 
              
             
               I 
              
             
               P 
              
             
               S 
              
             
            
              LPIPS 
             
            
          </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mord mathdefault" style="margin-right: 0.07847em;">I</span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span></span></span></span></span></a> 距离</td></tr></tbody></table> 
 </blockquote> 
 <p>首先我们要明确，在生成模型相关的工作中，Interpolation of latent vectors 的实验是必不可少的，这被用来反映生成模型性能的高低。因为只有当 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          G 
         
        
       
         G 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 能够对 latent space 构造了一个好的映射，这个映射下，如果将 image space 铺平的话，latent space 则是被扭曲成为一个流形，一般的我们希望这个流形越平滑越好，即：流形上相近的两个隐向量对应到图像空间的两个图像之间应该是及其相似的。<br> <strong>因此，PPL 越低，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           G 
          
         
        
          G 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 性能越好！</strong><br> 作者在原文是这么说的：</p> 
 <pre><code class="prism language-shell">low PPL scores are indeed indictive of high-quality images, and vice versa.
<span class="token comment">## the overall PPL for a model is simply the expected value of the per-image PPL scores.</span>
</code></pre> 
</blockquote> 
<blockquote> 
 <p>为什么 PPL 与图像视觉质量是负相关的呢？即：为什么模型越平滑，其合成图像的视觉效果越好呢？</p> 
 <blockquote> 
  <p>作者猜测是：<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           D 
          
         
        
          D 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span></span></span></span></span> 为惩罚 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           G 
          
         
        
          G 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 生成的 broken images，那么对 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           G 
          
         
        
          G 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 而言一个直接的方式来提高自身性能是：<br> 有效地扩展 latent space 上那些能生成较好质量图像的区域，于是就会把那些暂时没能找到好的映射方式的向量聚集在一个小的区域。<br> 那么这个小的区域必然是落差很大的。但是由于这个区域很小，在等概率随机采样用于生成图像，进而计算 PPL 的时候，总体上采样到的还是平滑区域的隐向量，因此总体 PPL 越低。<br> <img src="https://images2.imgbox.com/15/07/r0VHIeEM_o.png" alt="在这里插入图片描述"></p> 
 </blockquote> 
</blockquote> 
<blockquote> 
 <p>好，那我们要怎样提高模型映射的平滑度？<br> 与降低模型复杂度引入相关的正则项一样，作者设计了两个正则项。</p> 
</blockquote> 
<h6><a id="Lazy_Regularization_145"></a>Lazy Regularization</h6> 
<blockquote> 
 <p>一般的，生成对抗网络用于生成实验中，目标函数有两部分构成：1）the main loss function(e.g. logistic loss)；2）regularization terms(e.g. <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           R 
          
         
           1 
          
         
        
       
         R_1 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.00773em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>)。<br> 一般这两个部分是加在一起，共同训练的。<br> 但是作者又发现，事实上正则项没有必要计算的那么频繁，这样可以减少计算代价和内存占用。<br> 具体实现方式如下：</p> 
 <ul><li>对生成器只使用一个 <code>Adam</code> 优化器；</li><li>每 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           k 
          
         
        
          k 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span></span></span></span></span> 次迭代计算一次正则项。</li><li>前面 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           k 
          
         
        
          k 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span></span></span></span></span> 次只计算 main loss function 的值用于反传求梯度。</li><li>到了第 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           k 
          
         
           + 
          
         
           1 
          
         
        
          k+1 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span> 次，计算得到正则项的值再 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           × 
          
         
           k 
          
         
        
          \times k 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord">×</span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span></span></span></span></span>；反传求梯度。</li><li>我们让 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           c 
          
         
           = 
          
         
           k 
          
         
           / 
          
         
           ( 
          
         
           k 
          
         
           + 
          
         
           1 
          
         
           ) 
          
         
        
          c=k/(k+1) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>，然后设置优化器的参数为：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            λ 
           
          
            ′ 
           
          
         
           = 
          
         
           c 
          
         
           λ 
          
         
        
          \lambda'=c\lambda 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.751892em; vertical-align: 0em;"></span><span class="mord"><span class="mord mathdefault">λ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">λ</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            β 
           
          
            1 
           
          
            ′ 
           
          
         
           = 
          
         
           ( 
          
          
          
            β 
           
          
            1 
           
          
          
          
            ) 
           
          
            c 
           
          
         
        
          \beta_1'=(\beta_1)^c 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.248108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -2.45189em; margin-left: -0.05278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.248108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.05278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span></span></span></span></span></span></span></span></span> ，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            β 
           
          
            2 
           
          
            ′ 
           
          
         
           = 
          
         
           ( 
          
          
          
            β 
           
          
            2 
           
          
          
          
            ) 
           
          
            c 
           
          
         
        
          \beta_2'=(\beta_2)^c 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.248108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -2.45189em; margin-left: -0.05278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.248108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.05278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span></span></span></span></span></span></span></span></span>；梯度下降。</li></ul> 
 <p>** 对 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          G 
         
        
       
         G 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 使用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          k 
         
        
          = 
         
        
          16 
         
        
       
         k=16 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">6</span></span></span></span></span>；对 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          D 
         
        
       
         D 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span></span></span></span></span> 使用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          k 
         
        
          = 
         
        
          8 
         
        
       
         k=8 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">8</span></span></span></span></span>。</p> 
</blockquote> 
<blockquote> 
 <p>这是文章的第二个技术创新：</p> 
 <h4>Lazy Regularization</h4> 
 <p></p> 
</blockquote> 
<h6><a id="Path_Length_Regularization_159"></a>Path Length Regularization</h6> 
<blockquote> 
 <p>与18年的一篇文一致，作者认为：如何判断一个生成器是否受 latent space 的隐向量控制，在于：对隐空间的每一个点作微小的位移，会在对应的图像空间产生相同大小（方向不一定相同）的变化。</p> 
 <hr> 
 <p>数学定义：</p> 
 <blockquote> 
  <p>对于隐空间 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           W 
          
         
        
          {\boldsymbol{W}} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68611em; vertical-align: 0em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right: 0.15972em;">W</span></span></span></span></span></span></span></span> 的每一个点 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           w 
          
         
        
          w 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span></span></span></span></span>，我们记这个映射为：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           g 
          
         
           ( 
          
         
           w 
          
         
           ) 
          
         
           : 
          
         
           W 
          
         
           ⟼ 
          
         
           Y 
          
         
        
          g(w):W\longmapsto Y 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.69433em; vertical-align: -0.011em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">W</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">⟼</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.22222em;">Y</span></span></span></span></span> ，则对应 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           w 
          
         
        
          w 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span></span></span></span></span> 的变化 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           ∂ 
          
         
           w 
          
         
        
          \partial w 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span></span></span></span></span> 和图像的变化 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           ∂ 
          
         
           g 
          
         
           ( 
          
         
           w 
          
         
           ) 
          
         
        
          \partial g(w) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="mclose">)</span></span></span></span></span> ，我们用雅可比矩阵 <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
        
         
          
           
           
             J 
            
           
             w 
            
           
          
            = 
           
           
            
            
              ∂ 
             
            
              g 
             
            
              ( 
             
            
              w 
             
            
              ) 
             
            
            
            
              ∂ 
             
            
              w 
             
            
           
          
         
           \Bbb J_w={<!-- -->{\partial g(w)}\over{\partial w}} 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.85556em; vertical-align: -0.16667em;"></span><span class="mord"><span class="mord mathbb">J</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.113em; vertical-align: -0.686em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></span> 来衡量这个映射的缩放属性（scaling properties）。<br> 于是作者定义了正则项为：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
        
         
          
           
           
             E 
            
            
            
              w 
             
            
              , 
             
            
              y 
             
            
              ∈ 
             
            
              N 
             
            
              ( 
             
            
              0 
             
            
              , 
             
            
              I 
             
            
              ) 
             
            
           
          
            ( 
           
          
            ∣ 
           
          
            ∣ 
           
           
           
             J 
            
           
             w 
            
           
             T 
            
           
          
            y 
           
          
            ∣ 
           
           
           
             ∣ 
            
           
             2 
            
           
          
            − 
           
          
            a 
           
           
           
             ) 
            
           
             2 
            
           
          
         
           \Bbb E_{w,y\in N(0,I)}(||\Bbb J_w^Ty||_2-a)^2 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.24653em; vertical-align: -0.3552em;"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.5198em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right: 0.03588em;">y</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right: 0.10903em;">N</span><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right: 0.07847em;">I</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.3552em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">∣</span><span class="mord">∣</span><span class="mord"><span class="mord mathbb">J</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.891331em;"><span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span></span></span><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.11411em; vertical-align: -0.25em;"></span><span class="mord mathdefault">a</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.864108em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></span><br> 其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           y 
          
         
        
          y 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span></span></span></span></span> 是随机的图像，其像素强度符合正态分布（<u>这里UP主还不明白是什么意思？什么样的图像满足这一属性，swtcl</u>）；常数 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           a 
          
         
        
          a 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">a</span></span></span></span></span> 在训练过程中是动态的。<br> 为了方便计算，使用：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            J 
           
          
            w 
           
          
            T 
           
          
         
           y 
          
         
           = 
          
          
          
            ∇ 
           
          
            w 
           
          
         
           ( 
          
         
           g 
          
         
           ( 
          
         
           w 
          
         
           ) 
          
         
           × 
          
         
           y 
          
         
           ) 
          
         
        
          \Bbb J_w^Ty=\nabla _w(g(w)\times y) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.08833em; vertical-align: -0.247em;"></span><span class="mord"><span class="mord mathbb">J</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.841331em;"><span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord">∇</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="mclose">)</span></span></span></span></span> 来计算。</p> 
 </blockquote> 
</blockquote> 
<blockquote> 
 <p><strong>细节</strong><br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          a 
         
        
       
         a 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">a</span></span></span></span></span> 如何动态设置？</p> 
 <blockquote> 
  <p>笔者阅读论文后的理解是：<br> 首先初始化 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           a 
          
         
           = 
          
         
           0 
          
         
        
          a=0 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>；<br> 然后我们记录 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           ∣ 
          
         
           ∣ 
          
          
          
            J 
           
          
            w 
           
          
            T 
           
          
         
           ∣ 
          
          
          
            ∣ 
           
          
            2 
           
          
         
        
          ||\Bbb J_w^T||_2 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.09133em; vertical-align: -0.25em;"></span><span class="mord">∣</span><span class="mord">∣</span><span class="mord"><span class="mord mathbb">J</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.841331em;"><span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02691em;">w</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 的均值，让 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           a 
          
         
        
          a 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">a</span></span></span></span></span> 以 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           e 
          
         
           x 
          
         
           p 
          
         
        
          exp 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord mathdefault">p</span></span></span></span></span> 指数方式向这个均值靠近。</p> 
 </blockquote> 
 <p>该正则项的系数/权重？</p> 
 <blockquote> 
  <p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
        
         
          
           
           
             γ 
            
            
            
              p 
             
            
              l 
             
            
           
          
            = 
           
           
            
            
              ln 
             
            
              ⁡ 
             
            
              2 
             
            
            
             
             
               r 
              
             
               2 
              
             
            
              ( 
             
            
              ln 
             
            
              ⁡ 
             
            
              r 
             
            
              − 
             
            
              ln 
             
            
              ⁡ 
             
            
              2 
             
            
              ) 
             
            
           
          
         
           \gamma_{pl}={<!-- -->{\ln 2}\over{r^2(\ln r-\ln 2)}} 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.716668em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.05556em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span><span class="mord mathdefault mtight" style="margin-right: 0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.30744em; vertical-align: -0.936em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.740108em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mop">ln</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mop">ln</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop">ln</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.936em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></span><br> 其中 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           r 
          
         
        
          r 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span></span></span></span></span> 是当前的输出分辨率</p> 
 </blockquote> 
 <p>** 完了后还有更细节的理解UP主暂时看不懂了，，，</p> 
</blockquote> 
<blockquote> 
 <p>实际应用后，作者发现这一正则项可以产生更加可靠的模型<br> <img src="https://images2.imgbox.com/29/3d/mxaBelns_o.png" alt="在这里插入图片描述"><br> 上图展示了原本的 <code>StyleGAN</code> 与 加了 <code>Path Length Regularization</code> 后的 <code>StyleGAN</code> 的 <code>PPL</code> 分布，发现整体 <code>PPL</code> 降低了。<br> 这是作者的第三个技术创新点：</p> 
 <h4>Path Length Regularization</h4> 
 <p></p> 
</blockquote> 
<h3><a id="3_Progressive_Growing_Revisited_187"></a>3. Progressive Growing Revisited</h3> 
<blockquote> 
 <p>尽管渐进式的图像生成对于合成高分辨率图像具有优势，但是它产生了特别的 artifacts！<br> 其中最关键的是：</p> 
 <pre><code class="prism language-sh">the progressively grown G appears to have a strong location preference for details
</code></pre> 
 <p>会偏向于钟爱局部的细节，即对不同的图像共享同样的细节模式（e.g. eyes, teeth, etc.）<br> 这就直接导致了上面的动图反映的第二个问题。作者认为这是因为：</p> 
 <blockquote> 
  <p>在 progressively 的训练中，每一个 resolution 下的输出都临时充当了最终输出，这就要求每一层都尽可能产生足够多的细节，从而中间层具有很高的频率，（但因为在较低层的时候模型本身（capacity）不够大，无法兼顾细节与多样性；最终妥协）导致了 shift invariance.</p> 
 </blockquote> 
</blockquote> 
<blockquote> 
 <p>为了消除这种 artifacts，我们需要<strong>采用更加强大的生成器和鉴别器的结构</strong>，<strong>取消渐进式的训练策略</strong>。</p> 
 <ul><li>Skip Connections</li><li>Residual Networks</li><li>Hierarchical Methods<br> 作者给了一些优秀的网络结构的例子，如下图：<br> <img src="https://images2.imgbox.com/e8/56/8C6KKLgx_o.png" alt="在这里插入图片描述"><br> 其中，上面是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           G 
          
         
        
          G 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span>，下面是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           D 
          
         
        
          D 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span></span></span></span></span>。<br> 总共就有 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           3 
          
         
           × 
          
         
           3 
          
         
           = 
          
         
           9 
          
         
        
          3\times 3=9 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">9</span></span></span></span></span> 种搭配，作者分别做了实验：<br> <img src="https://images2.imgbox.com/2a/19/SnjHUhRg_o.png" alt="在这里插入图片描述"></li></ul> 
 <p>最后得到的搭配是：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          G 
         
        
       
         G 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> --Skip Connections；<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          D 
         
        
       
         D 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span></span></span></span></span> --Residual Blocks。（如上图的两个绿色的网络结构所示）<br> 这里是本文的第四个创新点：</p> 
 <h4>No Progressive,New Artich.</h4> 
 <br> 也确实解决了 shift invariance 的问题。 
 <br> 
 <img src="https://images2.imgbox.com/36/76/jDJYP1D6_o.gif" alt="在这里插入图片描述"> 
 <p></p> 
</blockquote> 
<blockquote> 
 <p>针对选择的生成器，作者还做了进一步的可视化。<br> <img src="https://images2.imgbox.com/ea/2e/fbGvBWEL_o.png" alt="11"><br> 下一层的图像输出是前面所有层图像上采样后累次加和得到的。<br> 随着训练的进行，作者计算了每一层的输出的 rgb 图像的像素值的标准差，归一化后画图，得到：<br> <img src="https://images2.imgbox.com/7f/e6/t0w5RTpq_o.png" alt="在这里插入图片描述"><br> 我们先看左图，发现随着训练的进行，最终图像的生成越来越依赖于更高分辨率层的合成图像。<br> <br><br> <strong>但是</strong>，到最后 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          5125 
         
        
          × 
         
        
          512 
         
        
       
         5125\times 512 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span><span class="mord">5</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span></span></span></span></span> 这一层的贡献大于 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1024 
         
        
          × 
         
        
          1024 
         
        
       
         1024\times 1024 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">2</span><span class="mord">4</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">2</span><span class="mord">4</span></span></span></span></span> 这一层，这是不合理的，我们猜测这是因为：超出了模型本身的能力（capacity）。<br> 于是，作者做了新的实验，将模型从 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          6 
         
         
         
           4 
          
         
           2 
          
         
        
       
         64^2 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord">6</span><span class="mord"><span class="mord">4</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> 到 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          102 
         
         
         
           4 
          
         
           2 
          
         
        
       
         1024^2 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">2</span><span class="mord"><span class="mord">4</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> 的层的输出通道数翻倍，再画一次图，发现现在到最后是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          102 
         
         
         
           4 
          
         
           2 
          
         
        
       
         1024^2 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">2</span><span class="mord"><span class="mord">4</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> 层发挥主要作用。<br> 这是本文的第5个技术创新：</p> 
 <h4>Large Networks</h4><p></p>  
</blockquote> 
<h3><a id="4_Projection_of_Images_to_Latent_Spaces_223"></a>4. Projection of Images to Latent Spaces</h3> 
<blockquote> 
 <table><thead><tr><th><img src="https://images2.imgbox.com/0f/f8/Xi05wiKi_o.png" alt="-"></th><th align="left">原来的 <code>StyleGAN</code> 对合成的图像重新投影回到隐空间得到 <code>style</code> + <code>noises</code> 后再映射回图像域，前后结果差别很大，如背景！</th></tr></thead><tbody><tr><td><img src="https://images2.imgbox.com/da/ed/t39am5a2_o.png" alt="-"></td><td align="left">改进的 <code>StyleGAN</code> 对合成的图像重新投影回到隐空间得到 <code>style</code> + <code>noises</code> 后再映射回图像域的结果，几乎没有差别。</td></tr><tr><td><img src="https://images2.imgbox.com/52/4f/6eR4GyMo_o.png" alt="-"></td><td align="left">改进的 <code>StyleGAN</code> 对真实的图像投影到隐空间得到 <code>style</code> + <code>noises</code> 后再映射回图像域的结果，差别不大。</td></tr></tbody></table> 
 <p>这说明本文的方法提高了模型的平滑度（Smoothness）。</p> 
</blockquote> 
<h2><a id="_229"></a>结果</h2> 
<hr> 
<blockquote> 
 <p><strong>可视化结果</strong><br> <img src="https://images2.imgbox.com/e8/af/hmceZhJW_o.png" alt="在这里插入图片描述"><br> 小女孩坐镇本文！<br> <strong>量化结果</strong><br> <img src="https://images2.imgbox.com/f5/fd/PI7wAnte_o.png" alt="在这里插入图片描述"><br> 不说明了，就是各种优秀，各种吊打 <code>StyleGAN</code>，尽管作者和团队是同一批人，大佬的最高境界是，没有对手，只能双手互博！</p> 
</blockquote> 
<h2><a id="_237"></a>其他技术原理</h2> 
<hr> 
<h3><a id="Inverse_StyleGAN_239"></a>Inverse StyleGAN</h3> 
<h6><a id="_projection_UP_240"></a>作者在本文提出了新的 projection 的方法，承蒙UP太蠢，有些看不懂，需要等待源代码，届时补上，这里只写了一个基本的原理。</h6> 
<blockquote> 
 <p><strong>目的描述</strong><br> 给定一张真实的图像 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          I 
         
        
       
         I 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.07847em;">I</span></span></span></span></span>，我们希望得到它在 StyleGAN <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          G 
         
        
       
         G 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 的源域 latent space 中的位置，即希望得到 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           w 
          
         
           ∗ 
          
         
        
          ∈ 
         
        
          W 
         
        
       
         w^*\in W 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.727796em; vertical-align: -0.0391em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.688696em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">W</span></span></span></span></span> 使得<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           G 
          
         
           ( 
          
          
          
            w 
           
          
            ∗ 
           
          
         
           ) 
          
         
           = 
          
         
           I 
          
         
        
          G(w^*)=I 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.738696em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.07847em;">I</span></span></span></span></span></span> 成立。<br> <strong>Algorithm</strong><br> <img src="https://images2.imgbox.com/75/67/5WVLa2Ur_o.png" alt="Algorithm 1"><br> 原理就是<strong>迭代优化</strong>，</p> 
 <pre><code class="prism language-python"><span class="token triple-quoted-string string">'''
1. 随机初始化 w
2. 直到收敛（loss 变化小于给定阈值）或者超过指定的最大迭代次数，
    2.1 计算 G(w) 与目标 I 的 difference(上面的公式说明，该 diff 由 perceptual loss 和 pixel-wise 的 L2 正则 组成)
    2.2 反向传播计算关于 w 的梯度
    2.3 更新 w
'''</span>
</code></pre> 
 <p>具体参考文章：<a href="https://arxiv.org/abs/1904.03189" rel="nofollow">Image2StyleGAN: How to Embed Images Into the StyleGAN Latent Space?</a></p> 
</blockquote> 
<h3><a id="Directional_Generation_257"></a>Directional Generation</h3> 
<blockquote> 
 <p>对于 controlable generation 的最直接的表现是：我们对 latent space 中选择一个 vec <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          w 
         
        
       
         w 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span></span></span></span></span> 经过 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          G 
         
        
       
         G 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 后得到一张图像 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          I 
         
        
       
         I 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.07847em;">I</span></span></span></span></span>；<br> 然后我们改变对 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          w 
         
        
       
         w 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span></span></span></span></span> 的某几个元素做线性/非线性的增幅，我们可以预料到图像 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          I 
         
        
       
         I 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.07847em;">I</span></span></span></span></span> 的某些属性将怎样变化，如我们现在要让合成的 A 笑起来！</p> 
</blockquote> 
<blockquote> 
 <p>假如我们把不同表情下的人看作是不同的域，那么我们可以从分类的角度去看。</p> 
 <table><thead><tr><th align="left"><img src="https://images2.imgbox.com/84/f0/KH4zRerq_o.png" alt="-"></th><th align="left">一维-二分类<br>改变一个样本的分类，需要对样本在第一维度上偏移； <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
         
          
           
           
             + 
            
           
             / 
            
           
             − 
            
           
             Δ 
            
           
             x 
            
           
          
            +/-\Delta x 
           
          
        </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">+</span><span class="mord">/</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord">Δ</span><span class="mord mathdefault">x</span></span></span></span></span></th></tr></thead><tbody><tr><td align="left"><img src="https://images2.imgbox.com/3e/ee/IFLva95P_o.png" alt="-"></td><td align="left">二维-二分类<br>改变一个样本的分类，需要对样本在两个维度上偏移；<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
         
          
           
           
             + 
            
           
             / 
            
           
             − 
            
           
             ( 
            
           
             Δ 
            
           
             x 
            
           
             , 
            
           
             Δ 
            
           
             y 
            
           
             ) 
            
           
          
            +/-(\Delta x,\Delta y) 
           
          
        </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">+</span><span class="mord">/</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">Δ</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">Δ</span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="mclose">)</span></span></span></span></span></td></tr><tr><td align="left"><img src="https://images2.imgbox.com/c4/70/AeZiNVGV_o.png" alt="在这里插入图片描述"></td><td align="left">高维-二分类<br>其中，蓝色部分是一个已训练好的多分类器。<br>假如我们现在有10张生成的人脸图像，我们记录下它们的10个 512-dim 的 <code>latent code</code>，在多分类器前面加一层FC，让着10个 latent code 一行一行排成一个 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
         
          
           
           
             10 
            
           
             × 
            
           
             10 
            
           
          
            10\times 10 
           
          
        </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">0</span></span></span></span></span> 的矩阵作为权重 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
         
          
           
            
            
              W 
             
            
              0 
             
            
           
          
            W_0 
           
          
        </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，<br>输出是一个向量，<br>但计算分类 loss 的时候只对目标类别计算 loss 并作梯度反传；<br>输入 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
         
          
           
           
             1 
            
           
             × 
            
           
             10 
            
           
          
            1\times 10 
           
          
        </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">0</span></span></span></span></span> 的 <code>all-ones</code> 向量。<br><br>现在我们可以理解，经过黄色到蓝色的第一层隐藏层，输出的值还是权重本身；<br>我们希望通过梯度反传的方法来实现对 <code>latent code</code> 的自动偏移（<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
         
          
           
           
             + 
            
           
             ( 
            
            
            
              a 
             
            
              0 
             
            
            
            
              w 
             
            
              0 
             
            
           
             + 
            
            
            
              a 
             
            
              1 
             
            
            
            
              w 
             
            
              1 
             
            
           
             + 
            
           
             . 
            
           
             . 
            
           
             . 
            
           
             + 
            
            
            
              a 
             
            
              511 
             
            
            
            
              w 
             
            
              511 
             
            
           
             ) 
            
           
          
            +(a_0w_0+a_1w_1+...+a_{511}w_{511}) 
           
          
        </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">+</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02691em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.73333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02691em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mord mtight">1</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02691em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mord mtight">1</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>，其中 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
         
          
           
            
            
              a 
             
            
              i 
             
            
           
             , 
            
           
             i 
            
           
             = 
            
           
             0 
            
           
             , 
            
           
             1 
            
           
             , 
            
           
             . 
            
           
             . 
            
           
             . 
            
           
             , 
            
           
             511 
            
           
          
            a_i, i=0,1,...,511 
           
          
        </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.85396em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.83888em; vertical-align: -0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">5</span><span class="mord">1</span><span class="mord">1</span></span></span></span></span>之间是复杂的非线性关系），<br>从而得到使得合成的图像变成目标的属性的 latent code。<br><br>实际应用的时候，我们只需要我们只需要在两个 <code>latent code</code> 之间线性插值即可。</td></tr></tbody></table> 
</blockquote> 
<h2><a id="_270"></a>写在后面</h2> 
<hr> 
<p>文章比较复杂，UP主写本文也比较赶，UP主也比较蠢，如果有哪些说的不对，还请各位大哥们不吝指出，诚挚感谢✌<br> <a href="https://arxiv.org/pdf/1912.04958.pdf" rel="nofollow">原文</a>与<a href="https://github.com/NVlabs/stylegan2">TensorFlow 代码</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/20ba595869813c82a98afd8d561a2e60/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">二维数组以及排序</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6708ae14b9b4884c3f1bd594d5841991/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C&#43;&#43;:43---placement new（定位new）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>