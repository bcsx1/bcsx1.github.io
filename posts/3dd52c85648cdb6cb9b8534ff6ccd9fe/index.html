<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android中画布连线的连线动画的实现 - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android中画布连线的连线动画的实现" />
<meta property="og:description" content="一.实现在画布中连线的动画的效果，如图所示：
二.功能实现的初始想法：
1.要实现划线的动画的效果，在我所写得画布中有这样两个方法用于连线的拖动，思路就是从这里来的，通过沿直线方向的拖动就可以实现如图的划线动画的效果：
/** * 设置控件前一连线的移动 * * @param drawableMap * @param x * @param y * @param nextWidgetIndex */ public static void setProLineMove(HashMap&lt;Integer, CDrawable&gt; drawableMap, int x, int y, int nextWidgetIndex) { CDrawable cd = drawableMap.get(nextWidgetIndex); if (null != cd) { int xcoords = cd.getXcoords(); int ycoords = cd.getYcoords(); if (CanvsUtils.isActionWidgetTypeInstance(cd)) { int lineIndex = ((ActionWidget) cd).getNextLineIndex(); //获取保存在控件中的连线值 CanvasViewLigatureUtils.setLineFollowMove(drawableMap, x, y, xcoords, ycoords, lineIndex); } } } /** * 设置控件后一连线的移动 * * @param drawableMap * @param x * @param y * @param nextWidgetIndex */ public static void setNextLineMove(HashMap&lt;Integer, CDrawable&gt; drawableMap, int x, int y, int nextWidgetIndex) { CDrawable cd = drawableMap." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/3dd52c85648cdb6cb9b8534ff6ccd9fe/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-12-11T11:14:13+08:00" />
<meta property="article:modified_time" content="2017-12-11T11:14:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android中画布连线的连线动画的实现</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>一.实现在画布中连线的动画的效果，如图所示：</p> 
<p><img src="https://images2.imgbox.com/c1/f2/utDUtusC_o.gif" width="100" height="200" alt=""><img src="https://images2.imgbox.com/c2/c9/cbxuE8g2_o.gif" width="100" height="200" alt=""><br> </p> 
<p><br> </p> 
<p>二.功能实现的初始想法：</p> 
<p><span style="white-space:pre"></span>1.要实现划线的动画的效果，在我所写得画布中有这样两个方法用于连线的拖动，思路就是从这里来的，通过沿直线方向的拖动就可以实现如图的划线动画的效果：</p> 
<p></p> 
<pre style="background-color:#2b2b2b; color:#a9b7c6; font-family:'宋体'; font-size:12.0pt"><span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em> * 设置控件前一连线的移动
</em></span><span style="color:#629755"><em> *
</em></span><span style="color:#629755"><em> * </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>drawableMap
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>x
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>y
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>nextWidgetIndex
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>*/
</em></span><span style="color:#cc7832">public static void </span><span style="color:#ffc66d">setProLineMove</span>(HashMap&lt;Integer<span style="color:#cc7832">, </span>CDrawable&gt; drawableMap<span style="color:#cc7832">, int </span>x<span style="color:#cc7832">, int </span>y<span style="color:#cc7832">, int </span>nextWidgetIndex) {
    CDrawable cd = drawableMap.get(nextWidgetIndex)<span style="color:#cc7832">;
</span><span style="color:#cc7832">    if </span>(<span style="color:#cc7832">null </span>!= cd) {
        <span style="color:#cc7832">int </span>xcoords = cd.getXcoords()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        int </span>ycoords = cd.getYcoords()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        if </span>(CanvsUtils.<span style="font-style:italic">isActionWidgetTypeInstance</span>(cd)) {
            <span style="color:#cc7832">int </span>lineIndex = ((ActionWidget) cd).getNextLineIndex()<span style="color:#cc7832">;      </span><span style="color:#808080">//获取保存在控件中的连线值
</span><span style="color:#808080">            </span>CanvasViewLigatureUtils.<span style="font-style:italic">setLineFollowMove</span>(drawableMap<span style="color:#cc7832">, </span>x<span style="color:#cc7832">, </span>y<span style="color:#cc7832">, </span>xcoords<span style="color:#cc7832">, </span>ycoords<span style="color:#cc7832">, </span>lineIndex)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>}
    }
}

<span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em> * 设置控件后一连线的移动
</em></span><span style="color:#629755"><em> *
</em></span><span style="color:#629755"><em> * </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>drawableMap
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>x
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>y
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>nextWidgetIndex
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>*/
</em></span><span style="color:#cc7832">public static void </span><span style="color:#ffc66d">setNextLineMove</span>(HashMap&lt;Integer<span style="color:#cc7832">, </span>CDrawable&gt; drawableMap<span style="color:#cc7832">, int </span>x<span style="color:#cc7832">, int </span>y<span style="color:#cc7832">, int </span>nextWidgetIndex) {
    CDrawable cd = drawableMap.get(nextWidgetIndex)<span style="color:#cc7832">;
</span><span style="color:#cc7832">    if </span>(<span style="color:#cc7832">null </span>!= cd) {
        <span style="color:#cc7832">int </span>xcoords = cd.getXcoords()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        int </span>ycoords = cd.getYcoords()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        if </span>(CanvsUtils.<span style="font-style:italic">isActionWidgetTypeInstance</span>(cd)) {
            <span style="color:#cc7832">int </span>lineIndex = ((ActionWidget) cd).getProLineIndex()<span style="color:#cc7832">;      </span><span style="color:#808080">//获取保存在控件中的连线值
</span><span style="color:#808080">            </span><span style="font-style:italic">setLineFollowMove</span>(drawableMap<span style="color:#cc7832">, </span>xcoords<span style="color:#cc7832">, </span>ycoords<span style="color:#cc7832">, </span>x<span style="color:#cc7832">, </span>y<span style="color:#cc7832">, </span>lineIndex)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>}
    }
}</pre> 
<span style="white-space:pre"></span> 
<pre style="background-color:#2b2b2b; color:#a9b7c6; font-family:'宋体'; font-size:12.0pt"><span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em> * 设置坐标使得连线跟随着滑动变化
</em></span><span style="color:#629755"><em> *
</em></span><span style="color:#629755"><em> * </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>x
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>y
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>xcoords
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>ycoords
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>lineIndex
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>*/
</em></span><span style="color:#cc7832">public static void </span><span style="color:#ffc66d">setLineFollowMove</span>(HashMap&lt;Integer<span style="color:#cc7832">, </span>CDrawable&gt; drawableMap<span style="color:#cc7832">, int </span>x<span style="color:#cc7832">, int </span>y<span style="color:#cc7832">, int </span>xcoords<span style="color:#cc7832">, int </span>ycoords<span style="color:#cc7832">, int </span>lineIndex) {
    <span style="color:#cc7832">if </span>(lineIndex &lt; <span style="color:#6897bb">0</span>) {
        <span style="color:#cc7832">return;
</span><span style="color:#cc7832">    </span>}
    CPath drawable = (CPath) drawableMap.get(lineIndex)<span style="color:#cc7832">;
</span><span style="color:#cc7832">    if </span>(drawable!=<span style="color:#cc7832">null</span>){
        drawable.setXcoords(xcoords)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>drawable.setYcoords(ycoords)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>drawable.setEndX(x)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>drawable.setEndY(y)<span style="color:#cc7832">;
</span><span style="color:#cc7832">    </span>}
}</pre> 
<p></p> 
<p><span style="white-space:pre"></span>2.首要解决的就是获取到线段上点的集合：</p> 
<p></p> 
<pre style="background-color:#2b2b2b; color:#a9b7c6; font-family:'宋体'; font-size:12.0pt"><span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em> * 从直线中获取点
</em></span><span style="color:#629755"><em> *
</em></span><span style="color:#629755"><em> * </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>startX
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>startY
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>endX
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>endY
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>span   </em></span><span style="color:#629755"><em>获取点的跨度值，可用于连线动画的速度计算
</em></span><span style="color:#629755"><em> * </em></span><span style="color:#629755"><strong><em>@return
</em></strong></span><span style="color:#629755"><strong><em> </em></strong></span><span style="color:#629755"><em>*/
</em></span><span style="color:#cc7832">public static </span>List&lt;PointModle&gt; <span style="color:#ffc66d">getPointFromLine</span>(<span style="color:#cc7832">int </span>startX<span style="color:#cc7832">, int </span>startY<span style="color:#cc7832">,
</span><span style="color:#cc7832">                                                int </span>endX<span style="color:#cc7832">, int </span>endY<span style="color:#cc7832">, int </span>span) {
    List&lt;PointModle&gt; list = <span style="color:#cc7832">new </span>ArrayList&lt;&gt;()<span style="color:#cc7832">;
</span><span style="color:#cc7832">    if </span>(startX == endX) {
        <span style="color:#cc7832">int </span>from = Math.<span style="font-style:italic">min</span>(startY<span style="color:#cc7832">, </span>endY)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        int </span>to = Math.<span style="font-style:italic">max</span>(startX<span style="color:#cc7832">, </span>endY)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        for </span>(<span style="color:#cc7832">int </span>y = from<span style="color:#cc7832">; </span>y &lt;= to<span style="color:#cc7832">; </span>y++) {
            list.add(<span style="color:#cc7832">new </span>PointModle(startX<span style="color:#cc7832">, </span>y))<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>}
    } <span style="color:#cc7832">else </span>{
        <span style="color:#cc7832">double </span>slope = ((<span style="color:#cc7832">double</span>) (endY - startY)) / ((<span style="color:#cc7832">double</span>) (endX - startX))<span style="color:#cc7832">;
</span><span style="color:#cc7832">        int </span>step = (endX &gt; startX) ? span : -span<span style="color:#cc7832">;
</span><span style="color:#cc7832">        double </span>y = <span style="color:#6897bb">0</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">        if </span>(step&gt;<span style="color:#6897bb">0</span>){
            <span style="color:#cc7832">for </span>(<span style="color:#cc7832">int </span>x = startX<span style="color:#cc7832">; </span>x &lt; endX<span style="color:#cc7832">; </span>x += step) {
                y = ((x - startX) * slope + startY)<span style="color:#cc7832">;
</span><span style="color:#cc7832">                </span>list.add(<span style="color:#cc7832">new </span>PointModle(x<span style="color:#cc7832">, </span>y))<span style="color:#cc7832">;
</span><span style="color:#cc7832">            </span>}
        }<span style="color:#cc7832">else </span>{
            <span style="color:#cc7832">for </span>(<span style="color:#cc7832">int </span>x = startX<span style="color:#cc7832">; </span>x &gt; endX<span style="color:#cc7832">; </span>x += step) {
                y = ((x - startX) * slope + startY)<span style="color:#cc7832">;
</span><span style="color:#cc7832">                </span>list.add(<span style="color:#cc7832">new </span>PointModle(x<span style="color:#cc7832">, </span>y))<span style="color:#cc7832">;
</span><span style="color:#cc7832">            </span>}
        }

    }
    <span style="color:#cc7832">return </span>list<span style="color:#cc7832">;
</span>}</pre> 
<p></p> 
<p><span style="white-space:pre"></span>3.接下来就是用定时器来控制划线的速度（即是设置沿着直线方向的所要设置的X、Y的坐标）：</p> 
<p></p> 
<pre style="background-color:#2b2b2b; color:#a9b7c6; font-family:'宋体'; font-size:12.0pt"><span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em> * 实现直线随着直线方向进行移动
</em></span><span style="color:#629755"><em> *
</em></span><span style="color:#629755"><em> * </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>pointFromLine
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>key
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>startX
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>startY
</em></span><span style="color:#8a653b"><em> </em></span><span style="color:#629755"><em>*/
</em></span><span style="color:#cc7832">private void </span><span style="color:#ffc66d">setLineAnim</span>(List&lt;PointModle&gt; pointFromLine<span style="color:#cc7832">, int </span>key<span style="color:#cc7832">, int </span>startX<span style="color:#cc7832">, int </span>startY<span style="color:#cc7832">, int </span>endX<span style="color:#cc7832">, int </span>endY) {
    <span style="color:#cc7832">if </span>(pointFromLine.size() &lt; <span style="color:#6897bb">0</span>) {
        <span style="color:#cc7832">return;
</span><span style="color:#cc7832">    </span>}
    <span style="color:#cc7832">if </span>((<span style="color:#9876aa">pointAmount </span>&lt; pointFromLine.size()) &amp;&amp; (pointFromLine.size() &gt; <span style="color:#6897bb">0</span>)) {
        Log.<span style="font-style:italic">i</span>(<span style="color:#6a8759">"everb"</span><span style="color:#cc7832">,</span><span style="color:#6a8759">"划线中"</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>CanvasViewLigatureUtils.<span style="font-style:italic">setLineFollowMove</span>(<span style="color:#9876aa">drawableMap</span><span style="color:#cc7832">, </span>startX<span style="color:#cc7832">, </span>startY<span style="color:#cc7832">,
</span><span style="color:#cc7832">                </span>(<span style="color:#cc7832">int</span>) pointFromLine.get(<span style="color:#9876aa">pointAmount</span>).getX()<span style="color:#cc7832">, </span>(<span style="color:#cc7832">int</span>) pointFromLine.get(<span style="color:#9876aa">pointAmount</span>).getY()<span style="color:#cc7832">, </span>key)<span style="color:#cc7832">;
</span><span style="color:#cc7832">    </span>} <span style="color:#cc7832">else </span>{
        CanvasViewLigatureUtils.<span style="font-style:italic">setLineFollowMove</span>(<span style="color:#9876aa">drawableMap</span><span style="color:#cc7832">, </span>startX<span style="color:#cc7832">, </span>startY<span style="color:#cc7832">,
</span><span style="color:#cc7832">                </span>endX<span style="color:#cc7832">, </span>endY<span style="color:#cc7832">, </span>key)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">mLink</span>++<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>((ActionWidget) <span style="color:#9876aa">drawableMap</span>.get(<span style="color:#9876aa">mActionFrame2Linked</span>.get(<span style="color:#9876aa">mActionFrame</span>))).setPaint(<span style="color:#9876aa">redPaint</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">mActionFrame</span>++<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">mHandler</span>.sendEmptyMessageAtTime(<span style="color:#9876aa"><em>NEXT_LINK_ANIM</em></span><span style="color:#cc7832">, </span><span style="color:#6897bb">0</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">    </span>}
}</pre> 
<span style="white-space:pre"></span>4.这里在画一条线段时用定时器去设置，等一条线的动画完成之后。用Handler去通知下一条线段动画的开始。这样周而复始就可以实现如上GIT图的连线动画的效果： 
<p></p> 
<p></p> 
<pre style="background-color:#2b2b2b; color:#a9b7c6; font-family:'宋体'; font-size:12.0pt"><span style="color:#9876aa">mHandler </span>= <span style="color:#cc7832">new </span>Handler() {
            <span style="color:#bbb529">@Override
</span><span style="color:#bbb529">            </span><span style="color:#cc7832">public void </span><span style="color:#ffc66d">handleMessage</span>(Message msg) {
                <span style="color:#cc7832">super</span>.handleMessage(msg)<span style="color:#cc7832">;
</span><span style="color:#808080">//                Log.i("everb", "handler的值：" + msg.what);
</span><span style="color:#808080">                </span><span style="color:#cc7832">switch </span>(msg.<span style="color:#9876aa">what</span>) {
                    <span style="color:#cc7832">case </span><span style="color:#9876aa"><em>NEXT_LINK_ANIM</em></span>: {
                        <span style="color:#9876aa">pointAmount </span>= <span style="color:#6897bb">0</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">                        if </span>(<span style="color:#9876aa">mLink </span>&lt; <span style="color:#9876aa">mSegment2Linked</span>.size()) {
                            motorPreviewDrawProgress(<span style="color:#6897bb">50</span><span style="color:#cc7832">, </span>Color.<span style="color:#9876aa"><em>BLACK</em></span><span style="color:#cc7832">, </span><span style="color:#6897bb">20f</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">                        </span>} <span style="color:#cc7832">else </span>{
                            <span style="color:#808080">//划线动画结束的操作
</span><span style="color:#808080">                            </span>setActionFrameAlpha(<span style="color:#cc7832">false</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">                            </span>motorPreviewDrawProgressLineClean()<span style="color:#cc7832">;
</span><span style="color:#cc7832">                            </span><span style="color:#9876aa">mTimer</span>.cancel()<span style="color:#cc7832">;
</span><span style="color:#cc7832">                        </span>}
                    }
                    <span style="color:#cc7832">break;
</span><span style="color:#cc7832">                </span>}
            }
        }<span style="color:#cc7832">;</span></pre> 
<br> 
<p></p> 
<p>三.这个功能是基于我之前写的有关画布的基础上实现，下面贴出连线动画的帮助类的代码：</p> 
<p></p> 
<pre style="background-color:#2b2b2b; color:#a9b7c6; font-family:'宋体'; font-size:12.0pt"><span style="color:#cc7832">package </span>com.example.administrator.canvasdemo.helper<span style="color:#cc7832">;
</span><span style="color:#cc7832">
</span><span style="color:#cc7832">import </span>android.content.Context<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>android.graphics.Color<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>android.graphics.Paint<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>android.os.Handler<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>android.os.Message<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>android.util.Log<span style="color:#cc7832">;
</span><span style="color:#cc7832">
</span><span style="color:#cc7832">import </span>com.example.administrator.canvasdemo.MainActivity<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>com.example.administrator.canvasdemo.modle.PointModle<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>com.example.administrator.canvasdemo.utils.CanvasViewLigatureUtils<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>com.example.administrator.canvasdemo.view.ActionCanvasView<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>com.example.administrator.canvasdemo.view.ActionWidget<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>com.example.administrator.canvasdemo.view.CDrawable<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>com.example.administrator.canvasdemo.view.CPath<span style="color:#cc7832">;
</span><span style="color:#cc7832">
</span><span style="color:#cc7832">import </span>java.util.ArrayList<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>java.util.HashMap<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>java.util.List<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>java.util.Map<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>java.util.Timer<span style="color:#cc7832">;
</span><span style="color:#cc7832">import </span>java.util.TimerTask<span style="color:#cc7832">;
</span><span style="color:#cc7832">
</span><span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em> * </em></span><span style="color:#629755"><strong><em>@author </em></strong></span><span style="color:#629755"><em>wangyao
</em></span><span style="color:#629755"><em> * </em></span><span style="color:#629755"><strong><em>@package </em></strong></span><span style="color:#629755"><em>com.example.administrator.canvasdemo.helper
</em></span><span style="color:#629755"><em> * </em></span><span style="color:#629755"><strong><em>@date </em></strong></span><span style="color:#629755"><em>2017/12/9  18:50
</em></span><span style="color:#629755"><em> * </em></span><span style="color:#629755"><strong><em>@describe </em></strong></span><span style="color:#a8c023"><em>TODO
</em></span><span style="color:#a8c023"><em> </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@project
</em></strong></span><span style="color:#629755"><strong><em> </em></strong></span><span style="color:#629755"><em>*/
</em></span><span style="color:#629755"><em>
</em></span><span style="color:#cc7832">public class </span>LineToAnimHelper {
    <span style="color:#cc7832">private </span>List&lt;Integer&gt; <span style="color:#9876aa">mPreviewLineList</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">    private </span>TimerTask <span style="color:#9876aa">mTimerTask</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">    private </span>Timer <span style="color:#9876aa">mTimer</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">    private </span>Context <span style="color:#9876aa">mContext</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">    private int </span><span style="color:#9876aa">mScreenWidth</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">    private int </span><span style="color:#9876aa">pointAmount</span><span style="color:#cc7832">;                </span><span style="color:#808080">//线段上点的数量
</span><span style="color:#808080">    </span><span style="color:#cc7832">private </span>HashMap&lt;Integer<span style="color:#cc7832">, </span>CDrawable&gt; <span style="color:#9876aa">drawableMap</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">    private </span>ActionCanvasView <span style="color:#9876aa">mActionCanvasView</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">    private int </span><span style="color:#9876aa">mKey</span><span style="color:#cc7832">;                        </span><span style="color:#808080">//标记index的变化
</span><span style="color:#808080">    </span><span style="color:#cc7832">private </span>List&lt;Integer&gt; <span style="color:#9876aa">mActionFrame2Linked</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">    private </span>List&lt;CPath&gt; <span style="color:#9876aa">mSegment2Linked</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">    private int </span><span style="color:#9876aa">mLink</span><span style="color:#cc7832">;              </span><span style="color:#808080">//当前正在划线的index
</span><span style="color:#808080">    </span><span style="color:#cc7832">private int </span><span style="color:#9876aa">mActionFrame </span>= <span style="color:#6897bb">1</span><span style="color:#cc7832">;       </span><span style="color:#808080">//连线的关键帧集合中的index
</span><span style="color:#808080">    </span><span style="color:#cc7832">private </span>Handler <span style="color:#9876aa">mHandler</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">    private </span>List&lt;PointModle&gt; <span style="color:#9876aa">mPointFromLine</span><span style="color:#cc7832">;       </span><span style="color:#808080">//获取线段的点的集合
</span><span style="color:#808080">    </span><span style="color:#cc7832">private static final int </span><span style="color:#9876aa"><em>NEXT_LINK_ANIM </em></span>= -<span style="color:#6897bb">1</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">    private boolean </span><span style="color:#9876aa">isActionFrameAnimStop </span>= <span style="color:#cc7832">false;
</span><span style="color:#cc7832">    private </span>Paint <span style="color:#9876aa">redPaint</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">    private </span>Paint <span style="color:#9876aa">bluePaint</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">
</span><span style="color:#cc7832">
</span><span style="color:#cc7832">
</span><span style="color:#cc7832">    public </span><span style="color:#ffc66d">LineToAnimHelper</span>(Context context<span style="color:#cc7832">, </span>HashMap&lt;Integer<span style="color:#cc7832">, </span>CDrawable&gt; drawableMap<span style="color:#cc7832">, </span>ActionCanvasView actionCanvasView<span style="color:#cc7832">, int </span>key) {
        <span style="color:#9876aa">mTimer </span>= <span style="color:#cc7832">new </span>Timer()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">mPreviewLineList </span>= <span style="color:#cc7832">new </span>ArrayList&lt;&gt;()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        this</span>.<span style="color:#9876aa">mContext </span>= context<span style="color:#cc7832">;
</span><span style="color:#cc7832">        this</span>.<span style="color:#9876aa">drawableMap </span>= drawableMap<span style="color:#cc7832">;
</span><span style="color:#cc7832">        this</span>.<span style="color:#9876aa">mActionCanvasView </span>= actionCanvasView<span style="color:#cc7832">;
</span><span style="color:#cc7832">        this</span>.<span style="color:#9876aa">mKey </span>= key<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">mPointFromLine </span>= <span style="color:#cc7832">new </span>ArrayList&lt;&gt;()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">redPaint</span>=<span style="color:#cc7832">new </span>Paint()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">bluePaint</span>=<span style="color:#cc7832">new </span>Paint()<span style="color:#cc7832">;
</span><span style="color:#cc7832">    </span>}

    <span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em>     * 执行的划线动画
</em></span><span style="color:#629755"><em>     */
</em></span><span style="color:#629755"><em>    </em></span><span style="color:#cc7832">public void </span><span style="color:#ffc66d">executeLineToAnim</span>() {
        <span style="color:#9876aa">redPaint</span>.setColor(Color.<span style="color:#9876aa"><em>RED</em></span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">bluePaint</span>.setColor(Color.<span style="color:#9876aa"><em>BLUE</em></span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">mHandler </span>= <span style="color:#cc7832">new </span>Handler() {
            <span style="color:#bbb529">@Override
</span><span style="color:#bbb529">            </span><span style="color:#cc7832">public void </span><span style="color:#ffc66d">handleMessage</span>(Message msg) {
                <span style="color:#cc7832">super</span>.handleMessage(msg)<span style="color:#cc7832">;
</span><span style="color:#808080">//                Log.i("everb", "handler的值：" + msg.what);
</span><span style="color:#808080">                </span><span style="color:#cc7832">switch </span>(msg.<span style="color:#9876aa">what</span>) {
                    <span style="color:#cc7832">case </span><span style="color:#9876aa"><em>NEXT_LINK_ANIM</em></span>: {
                        <span style="color:#9876aa">pointAmount </span>= <span style="color:#6897bb">0</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">                        if </span>(<span style="color:#9876aa">mLink </span>&lt; <span style="color:#9876aa">mSegment2Linked</span>.size()) {
                            motorPreviewDrawProgress(<span style="color:#6897bb">50</span><span style="color:#cc7832">, </span>Color.<span style="color:#9876aa"><em>BLACK</em></span><span style="color:#cc7832">, </span><span style="color:#6897bb">20f</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">                        </span>} <span style="color:#cc7832">else </span>{
                            <span style="color:#808080">//划线动画结束的操作
</span><span style="color:#808080">                            </span>setActionFrameAlpha(<span style="color:#cc7832">false</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">                            </span>motorPreviewDrawProgressLineClean()<span style="color:#cc7832">;
</span><span style="color:#cc7832">                            </span><span style="color:#9876aa">mTimer</span>.cancel()<span style="color:#cc7832">;
</span><span style="color:#cc7832">                        </span>}
                    }
                    <span style="color:#cc7832">break;
</span><span style="color:#cc7832">                </span>}
            }
        }<span style="color:#cc7832">;
</span><span style="color:#cc7832">        if </span>(<span style="color:#9876aa">drawableMap</span>.size() &lt; <span style="color:#6897bb">0 </span>) {
            <span style="color:#cc7832">return;
</span><span style="color:#cc7832">        </span>}
        <span style="color:#9876aa">mActionFrame2Linked </span>= getActionFrame2Linked()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">mSegment2Linked </span>= getSegment2Linked()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>setActionFrameAlpha(<span style="color:#cc7832">true</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>motorPreviewDrawProgress(<span style="color:#6897bb">50</span><span style="color:#cc7832">, </span>Color.<span style="color:#9876aa"><em>BLACK</em></span><span style="color:#cc7832">, </span><span style="color:#6897bb">20f</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">mTimer</span>.schedule(<span style="color:#9876aa">mTimerTask</span><span style="color:#cc7832">, </span><span style="color:#6897bb">0</span><span style="color:#cc7832">, </span><span style="color:#6897bb">100</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">    </span>}

    <span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em>     * 退出预览的划线动画
</em></span><span style="color:#629755"><em>     */
</em></span><span style="color:#629755"><em>    </em></span><span style="color:#cc7832">public void </span><span style="color:#ffc66d">motorPreviewQuit</span>() {
        <span style="color:#9876aa">mTimer</span>.cancel()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>setActionFrameAlpha(<span style="color:#cc7832">false</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>recoveryActionFrameBitmap()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>motorPreviewDrawProgressLineClean()<span style="color:#cc7832">;
</span><span style="color:#cc7832">    </span>}

    <span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em>     * 获取连上线的线段
</em></span><span style="color:#629755"><em>     *
</em></span><span style="color:#629755"><em>     * </em></span><span style="color:#629755"><strong><em>@return
</em></strong></span><span style="color:#629755"><strong><em>     </em></strong></span><span style="color:#629755"><em>*/
</em></span><span style="color:#629755"><em>    </em></span><span style="color:#cc7832">private </span>List&lt;CPath&gt; <span style="color:#ffc66d">getSegment2Linked</span>() {
        List&lt;CPath&gt; segment2LinkedList = <span style="color:#cc7832">new </span>ArrayList&lt;&gt;()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        int </span>searchIndex = <span style="color:#6897bb">0</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>ActionWidget fristActionFrame = (ActionWidget) <span style="color:#9876aa">drawableMap</span>.get(<span style="color:#6897bb">0</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        if </span>(fristActionFrame.getNextLineIndex() &lt; <span style="color:#6897bb">0</span>) {
            <span style="color:#cc7832">return null;
</span><span style="color:#cc7832">        </span>}
        segment2LinkedList.add((CPath) <span style="color:#9876aa">drawableMap</span>.get(fristActionFrame.getNextLineIndex()))<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>searchIndex = fristActionFrame.getNextWidget()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        while </span>(searchIndex &gt; <span style="color:#6897bb">0</span>) {
            <span style="color:#cc7832">int </span>nextLineIndex = ((ActionWidget) <span style="color:#9876aa">drawableMap</span>.get(searchIndex)).getNextLineIndex()<span style="color:#cc7832">;
</span><span style="color:#cc7832">            if </span>(nextLineIndex &gt; <span style="color:#6897bb">0</span>) {
                segment2LinkedList.add((CPath) <span style="color:#9876aa">drawableMap</span>.get(nextLineIndex))<span style="color:#cc7832">;
</span><span style="color:#cc7832">            </span>}
            searchIndex = ((ActionWidget) <span style="color:#9876aa">drawableMap</span>.get(searchIndex)).getNextWidget()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>}
        <span style="color:#cc7832">return </span>segment2LinkedList<span style="color:#cc7832">;
</span><span style="color:#cc7832">    </span>}

    <span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em>     * 设置未连接上关键帧的透明度
</em></span><span style="color:#629755"><em>     *
</em></span><span style="color:#629755"><em>     * </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>isSetAlpha
</em></span><span style="color:#8a653b"><em>     </em></span><span style="color:#629755"><em>*/
</em></span><span style="color:#629755"><em>    </em></span><span style="color:#cc7832">private void </span><span style="color:#ffc66d">setActionFrameAlpha</span>(<span style="color:#cc7832">boolean </span>isSetAlpha) {
        <span style="color:#cc7832">for </span>(Map.Entry&lt;Integer<span style="color:#cc7832">, </span>CDrawable&gt; entry : <span style="color:#9876aa">drawableMap</span>.entrySet()) {
            <span style="color:#cc7832">if </span>(entry.getValue() <span style="color:#cc7832">instanceof </span>ActionWidget) {
                ActionWidget widget = (ActionWidget) entry.getValue()<span style="color:#cc7832">;
</span><span style="color:#cc7832">                if </span>((widget.getNextLineIndex() &lt; <span style="color:#6897bb">0</span>) &amp;&amp; (widget.getProLineIndex() &lt; <span style="color:#6897bb">0</span>)) {
                    <span style="color:#cc7832">if </span>(isSetAlpha) {
                        setActionFrameAlpha(widget)<span style="color:#cc7832">;
</span><span style="color:#cc7832">                    </span>} <span style="color:#cc7832">else </span>{
                        recoveryActionFrameAlpha(widget)<span style="color:#cc7832">;
</span><span style="color:#cc7832">                    </span>}
                }
            }
        }
    }

    <span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em>     * 获取连上线控件的Index值及顺序
</em></span><span style="color:#629755"><em>     *
</em></span><span style="color:#629755"><em>     * </em></span><span style="color:#629755"><strong><em>@return
</em></strong></span><span style="color:#629755"><strong><em>     </em></strong></span><span style="color:#629755"><em>*/
</em></span><span style="color:#629755"><em>    </em></span><span style="color:#cc7832">private </span>List&lt;Integer&gt; <span style="color:#ffc66d">getActionFrame2Linked</span>() {
        List&lt;Integer&gt; actionFrame2LinedList = <span style="color:#cc7832">new </span>ArrayList&lt;&gt;()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        int </span>searchIndex = <span style="color:#6897bb">0</span><span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>ActionWidget fristActionFrame = (ActionWidget) <span style="color:#9876aa">drawableMap</span>.get(<span style="color:#6897bb">0</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        if </span>(fristActionFrame.getNextLineIndex() &lt; <span style="color:#6897bb">0</span>) {
            <span style="color:#cc7832">return null;
</span><span style="color:#cc7832">        </span>}
        actionFrame2LinedList.add(searchIndex)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>searchIndex = fristActionFrame.getNextWidget()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        while </span>(searchIndex &gt; <span style="color:#6897bb">0</span>) {
            actionFrame2LinedList.add(searchIndex)<span style="color:#cc7832">;
</span><span style="color:#cc7832">            </span>searchIndex = ((ActionWidget) <span style="color:#9876aa">drawableMap</span>.get(searchIndex)).getNextWidget()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>}
        <span style="color:#cc7832">return </span>actionFrame2LinedList<span style="color:#cc7832">;
</span><span style="color:#cc7832">    </span>}

    <span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em>     * 清除预览模式的划线
</em></span><span style="color:#629755"><em>     */
</em></span><span style="color:#629755"><em>    </em></span><span style="color:#cc7832">private void </span><span style="color:#ffc66d">motorPreviewDrawProgressLineClean</span>() {
        <span style="color:#cc7832">for </span>(<span style="color:#cc7832">int </span>i = <span style="color:#6897bb">0</span><span style="color:#cc7832">; </span>i &lt; <span style="color:#9876aa">mPreviewLineList</span>.size()<span style="color:#cc7832">; </span>i++) {
            <span style="color:#9876aa">drawableMap</span>.remove(<span style="color:#9876aa">mPreviewLineList</span>.get(i))<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>}
        <span style="color:#9876aa">mActionCanvasView</span>.invalidate()<span style="color:#cc7832">;
</span><span style="color:#cc7832">    </span>}


    <span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em>     * 传入两点的坐标在画布中进行划线动画
</em></span><span style="color:#629755"><em>     *
</em></span><span style="color:#629755"><em>     * </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>time  </em></span><span style="color:#629755"><em>两帧运行时间
</em></span><span style="color:#629755"><em>     * </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>color
</em></span><span style="color:#8a653b"><em>     </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>width
</em></span><span style="color:#8a653b"><em>     </em></span><span style="color:#629755"><em>*/
</em></span><span style="color:#629755"><em>    </em></span><span style="color:#cc7832">private void </span><span style="color:#ffc66d">motorPreviewDrawProgress</span>(<span style="color:#cc7832">int </span>time<span style="color:#cc7832">, int </span>color<span style="color:#cc7832">, float </span>width) {
        <span style="color:#9876aa">mPointFromLine</span>.clear()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#808080">// 定时器的间隔时间可以计算出传入的点的跨度值从而控制动画的速度
</span><span style="color:#808080">        </span><span style="color:#9876aa">mPointFromLine </span>= CanvasViewLigatureUtils.<span style="font-style:italic">getPointFromLine</span>(<span style="color:#9876aa">mSegment2Linked</span>.get(<span style="color:#9876aa">mLink</span>).getXcoords()<span style="color:#cc7832">, </span><span style="color:#9876aa">mSegment2Linked</span>.get(<span style="color:#9876aa">mLink</span>).getYcoords()<span style="color:#cc7832">,
</span><span style="color:#cc7832">                </span><span style="color:#9876aa">mSegment2Linked</span>.get(<span style="color:#9876aa">mLink</span>).getEndX()<span style="color:#cc7832">, </span><span style="color:#9876aa">mSegment2Linked</span>.get(<span style="color:#9876aa">mLink</span>).getEndY()<span style="color:#cc7832">, </span><span style="color:#6897bb">5</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">mKey</span>++<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">mPreviewLineList</span>.add(<span style="color:#9876aa">mKey</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>CanvasViewLigatureUtils.<span style="font-style:italic">setLineTo</span>(<span style="color:#9876aa">mActionCanvasView</span><span style="color:#cc7832">, </span><span style="color:#9876aa">mKey</span><span style="color:#cc7832">, </span><span style="color:#6897bb">0</span><span style="color:#cc7832">, </span><span style="color:#6897bb">0</span><span style="color:#cc7832">, </span><span style="color:#6897bb">0</span><span style="color:#cc7832">, </span><span style="color:#6897bb">0</span><span style="color:#cc7832">, </span>color<span style="color:#cc7832">, </span>width)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span><span style="color:#9876aa">mTimerTask </span>= <span style="color:#cc7832">new </span>TimerTask() {
            <span style="color:#bbb529">@Override
</span><span style="color:#bbb529">            </span><span style="color:#cc7832">public void </span><span style="color:#ffc66d">run</span>() {
                setLineAnim(<span style="color:#9876aa">mPointFromLine</span><span style="color:#cc7832">, </span><span style="color:#9876aa">mKey</span><span style="color:#cc7832">, </span><span style="color:#9876aa">mSegment2Linked</span>.get(<span style="color:#9876aa">mLink</span>).getXcoords()<span style="color:#cc7832">, </span><span style="color:#9876aa">mSegment2Linked</span>.get(<span style="color:#9876aa">mLink</span>).getYcoords()<span style="color:#cc7832">,
</span><span style="color:#cc7832">                        </span><span style="color:#9876aa">mSegment2Linked</span>.get(<span style="color:#9876aa">mLink</span>).getEndX()<span style="color:#cc7832">, </span><span style="color:#9876aa">mSegment2Linked</span>.get(<span style="color:#9876aa">mLink</span>).getEndY())<span style="color:#cc7832">;
</span><span style="color:#cc7832">                if </span>(!<span style="color:#9876aa">isActionFrameAnimStop</span>) {
                    <span style="color:#9876aa">pointAmount</span>++<span style="color:#cc7832">;
</span><span style="color:#cc7832">                </span>}
                <span style="color:#9876aa">mActionCanvasView</span>.post(<span style="color:#cc7832">new </span>Runnable() {
                    <span style="color:#bbb529">@Override
</span><span style="color:#bbb529">                    </span><span style="color:#cc7832">public void </span><span style="color:#ffc66d">run</span>() {
                        <span style="color:#9876aa">mActionCanvasView</span>.invalidate()<span style="color:#cc7832">;
</span><span style="color:#cc7832">                    </span>}
                })<span style="color:#cc7832">;
</span><span style="color:#cc7832">            </span>}
        }<span style="color:#cc7832">;
</span><span style="color:#cc7832">    </span>}

    <span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em>     * 实现直线随着直线方向进行移动
</em></span><span style="color:#629755"><em>     *
</em></span><span style="color:#629755"><em>     * </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>pointFromLine
</em></span><span style="color:#8a653b"><em>     </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>key
</em></span><span style="color:#8a653b"><em>     </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>startX
</em></span><span style="color:#8a653b"><em>     </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>startY
</em></span><span style="color:#8a653b"><em>     </em></span><span style="color:#629755"><em>*/
</em></span><span style="color:#629755"><em>    </em></span><span style="color:#cc7832">private void </span><span style="color:#ffc66d">setLineAnim</span>(List&lt;PointModle&gt; pointFromLine<span style="color:#cc7832">, int </span>key<span style="color:#cc7832">, int </span>startX<span style="color:#cc7832">, int </span>startY<span style="color:#cc7832">, int </span>endX<span style="color:#cc7832">, int </span>endY) {
        <span style="color:#cc7832">if </span>(pointFromLine.size() &lt; <span style="color:#6897bb">0</span>) {
            <span style="color:#cc7832">return;
</span><span style="color:#cc7832">        </span>}
        <span style="color:#cc7832">if </span>((<span style="color:#9876aa">pointAmount </span>&lt; pointFromLine.size()) &amp;&amp; (pointFromLine.size() &gt; <span style="color:#6897bb">0</span>)) {
            Log.<span style="font-style:italic">i</span>(<span style="color:#6a8759">"everb"</span><span style="color:#cc7832">,</span><span style="color:#6a8759">"划线中"</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">            </span>CanvasViewLigatureUtils.<span style="font-style:italic">setLineFollowMove</span>(<span style="color:#9876aa">drawableMap</span><span style="color:#cc7832">, </span>startX<span style="color:#cc7832">, </span>startY<span style="color:#cc7832">,
</span><span style="color:#cc7832">                    </span>(<span style="color:#cc7832">int</span>) pointFromLine.get(<span style="color:#9876aa">pointAmount</span>).getX()<span style="color:#cc7832">, </span>(<span style="color:#cc7832">int</span>) pointFromLine.get(<span style="color:#9876aa">pointAmount</span>).getY()<span style="color:#cc7832">, </span>key)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>} <span style="color:#cc7832">else </span>{
            CanvasViewLigatureUtils.<span style="font-style:italic">setLineFollowMove</span>(<span style="color:#9876aa">drawableMap</span><span style="color:#cc7832">, </span>startX<span style="color:#cc7832">, </span>startY<span style="color:#cc7832">,
</span><span style="color:#cc7832">                    </span>endX<span style="color:#cc7832">, </span>endY<span style="color:#cc7832">, </span>key)<span style="color:#cc7832">;
</span><span style="color:#cc7832">            </span><span style="color:#9876aa">mLink</span>++<span style="color:#cc7832">;
</span><span style="color:#cc7832">            </span>((ActionWidget) <span style="color:#9876aa">drawableMap</span>.get(<span style="color:#9876aa">mActionFrame2Linked</span>.get(<span style="color:#9876aa">mActionFrame</span>))).setPaint(<span style="color:#9876aa">redPaint</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">            </span><span style="color:#9876aa">mActionFrame</span>++<span style="color:#cc7832">;
</span><span style="color:#cc7832">            </span><span style="color:#9876aa">mHandler</span>.sendEmptyMessageAtTime(<span style="color:#9876aa"><em>NEXT_LINK_ANIM</em></span><span style="color:#cc7832">, </span><span style="color:#6897bb">0</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>}
    }

    <span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em>     * 获取两点的距离
</em></span><span style="color:#629755"><em>     *
</em></span><span style="color:#629755"><em>     * </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>pointModle1
</em></span><span style="color:#8a653b"><em>     </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>pointModle2
</em></span><span style="color:#8a653b"><em>     </em></span><span style="color:#629755"><em>* </em></span><span style="color:#629755"><strong><em>@return
</em></strong></span><span style="color:#629755"><strong><em>     </em></strong></span><span style="color:#629755"><em>*/
</em></span><span style="color:#629755"><em>    </em></span><span style="color:#cc7832">private double </span><span style="color:#ffc66d">getDistance</span>(PointModle pointModle1<span style="color:#cc7832">, </span>PointModle pointModle2) {
        <span style="color:#cc7832">double </span>x = Math.<span style="font-style:italic">abs</span>(pointModle1.getX() - pointModle2.getY())<span style="color:#cc7832">;
</span><span style="color:#cc7832">        double </span>y = Math.<span style="font-style:italic">abs</span>(pointModle1.getY() - pointModle2.getY())<span style="color:#cc7832">;
</span><span style="color:#cc7832">        return </span>Math.<span style="font-style:italic">sqrt</span>(x * x + y * y)<span style="color:#cc7832">;
</span><span style="color:#cc7832">    </span>}



    <span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em>     * 设置控件透明度
</em></span><span style="color:#629755"><em>     *
</em></span><span style="color:#629755"><em>     * </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>keyFrameWidget
</em></span><span style="color:#8a653b"><em>     </em></span><span style="color:#629755"><em>*/
</em></span><span style="color:#629755"><em>    </em></span><span style="color:#cc7832">private void </span><span style="color:#ffc66d">setActionFrameAlpha</span>(ActionWidget keyFrameWidget) {
        Paint paint = <span style="color:#cc7832">new </span>Paint()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>paint.setAlpha(<span style="color:#6897bb">90</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>keyFrameWidget.setPaint(paint)<span style="color:#cc7832">;
</span><span style="color:#cc7832">    </span>}

    <span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em>     * 恢复控件透明度
</em></span><span style="color:#629755"><em>     *
</em></span><span style="color:#629755"><em>     * </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>keyFrameWidget
</em></span><span style="color:#8a653b"><em>     </em></span><span style="color:#629755"><em>*/
</em></span><span style="color:#629755"><em>    </em></span><span style="color:#cc7832">private void </span><span style="color:#ffc66d">recoveryActionFrameAlpha</span>(ActionWidget keyFrameWidget) {
        Paint paint = <span style="color:#cc7832">new </span>Paint()<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>paint.setAlpha(<span style="color:#6897bb">255</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>keyFrameWidget.setPaint(paint)<span style="color:#cc7832">;
</span><span style="color:#cc7832">    </span>}

    <span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em>     * 恢复划线动画之前的图片原样
</em></span><span style="color:#629755"><em>     */
</em></span><span style="color:#629755"><em>    </em></span><span style="color:#cc7832">private void </span><span style="color:#ffc66d">recoveryActionFrameBitmap</span>() {
        ((ActionWidget) <span style="color:#9876aa">drawableMap</span>.get(<span style="color:#6897bb">0</span>)).setPaint(<span style="color:#9876aa">bluePaint</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        for </span>(<span style="color:#cc7832">int </span>i = <span style="color:#6897bb">1</span><span style="color:#cc7832">; </span>i &lt; <span style="color:#9876aa">mActionFrame2Linked</span>.size()<span style="color:#cc7832">; </span>i++) {
            ((ActionWidget) <span style="color:#9876aa">drawableMap</span>.get(<span style="color:#9876aa">mActionFrame2Linked</span>.get(i))).setPaint(<span style="color:#9876aa">bluePaint</span>)<span style="color:#cc7832">;
</span><span style="color:#cc7832">        </span>}
    }

    <span style="color:#629755"><em>/**
</em></span><span style="color:#629755"><em>     * 控制划线动画的停止与继续
</em></span><span style="color:#629755"><em>     *
</em></span><span style="color:#629755"><em>     * </em></span><span style="color:#629755"><strong><em>@param </em></strong></span><span style="color:#8a653b"><em>isAnimStop
</em></span><span style="color:#8a653b"><em>     </em></span><span style="color:#629755"><em>*/
</em></span><span style="color:#629755"><em>    </em></span><span style="color:#cc7832">public void </span><span style="color:#ffc66d">motorPreViewCtrl</span>(<span style="color:#cc7832">boolean </span>isAnimStop) {
        <span style="color:#9876aa">isActionFrameAnimStop </span>= isAnimStop<span style="color:#cc7832">;
</span><span style="color:#cc7832">        if </span>(<span style="color:#9876aa">isActionFrameAnimStop</span>) {
            <span style="color:#808080">//  划线动画暂停
</span><span style="color:#808080">
</span><span style="color:#808080">        </span>}
    }
}
</pre> 
<br> 
<p></p> 
<p>四、<a target="_blank" href="http://download.csdn.net/download/wangyongyao1989/10153638" rel="noopener noreferrer">Demo下载的地址</a></p> 
<p><br> </p> 
<p><br> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d065277268dd1e4e995493f9e8e5f154/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何通过jQuery实现select下拉框的联动效果</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/15377d7a27d955e24e309e1aa0292de4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">动态对象属性操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>