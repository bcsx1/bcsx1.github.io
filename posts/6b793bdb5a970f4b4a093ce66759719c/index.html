<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>华为eNSP实现企业内网双出接口访问外网（VRRP、MSTP、DHCP、NAT-easy IP、nat server、ACL） - 编程随想</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="华为eNSP实现企业内网双出接口访问外网（VRRP、MSTP、DHCP、NAT-easy IP、nat server、ACL）" />
<meta property="og:description" content="一、背景介绍 Xan20公司新建了一栋办公大楼作为分公司，为了满足日常的办公需求，公司决定为财务部、项目管理部、技术部、行政部和服务器群建立互联互通的有线网络。其中，为方便各部门开展业务，需要自动获取公司DHCP服务器的IP地址；公司内部需要一台服务器，满足各部门上传下载文件；总部可以通过外网访问公司分部的WEB服务器，并且总部的网络管理员可以远程登录管理分公司网络设备；公司已经申请了两条不同运营商互联网专线并配有公网IP地址，希望除财务部不能访问Internet外，其他部门都能访问Internet；后期规划所有设备由网络管理员进行远程管理。
二、项目需求分析
DHCP服务器通过接入交换机连接到核心交换机上采用一条链路互连。服务器群连接到核心交换机，两台核心交换机配置端口聚合，以防止单链路出现故障。财务部、项目管理部、技术部、行政部和服务器群处于不同区域，各部门的接入交换机连接到两台核心交换机，当上行链路出现故障时，可以通过另一条链路到达核心交换机区域。核心交换机区域上做两台核心冗余备份，以防止其中一台核心交换机出现故障，可以通过另一台核心交换机转发数据连接外网。采用以上连接方式时，多台交换机会形成环路，可以采用生成树技术解决该问题。
为方便员工获取DHCP服务器的IP地址，财务部、项目管理部、技术部和行政部可以采用DHCP方式配置IP地址池自动分配IP地址及DNS地址。
服务器群交换机、核心交换机和出口路由器均采用三层互连，可以配置动态路由协议自动学习路由，实现全网互连互通。
Xan20的分公司配有两个不同运营商的公网IP地址，除财务部以为，其他部门的所有员工都有访问Internet的需求，可以在出口路由器上配置NAT。
为方便网络管理员对设备进行远程管理，需要启用所有设备的Telnet服务。
综上所述，本项目的实施具体分为以下工作任务。
1.根据网络拓扑及项目需求分析，对本项目进行详细规划设计。
（1）实现PC通过DHCP动态获取地址参数
（2）实现PC访问服务器
（3）核心层交换机做链路聚合
（4）网关冗余方案实施
（5）实现二层线路冗余备份
（6）实现内网访问外网
（7）外网访问内网WEB服务器
（8）实现外网远程登录管理
2.根据规划完成设备的调试。
3.测试项目能否达到预期效果
三、项目要求 1. 公司不同部门的PC属于不同的网段
2. 实现各部门PC通过DHCP地址获取参数
3. 实现各部门PC能够访问WEB服务器
4. 冗余网关备份（VRRP）
5. 实现二层网络链路冗余备份
6. 核心层交换机做链路聚合
7. 实现公司内网访问外网
8. 实现外网设备访问内网服务器
9.实现远程访问telnet技术
四、拓扑搭建 五、项目实施步骤 步骤一：
（一）实现PC通过DHCP动态获取地址参数；实现PC访问WEB服务器
为方便各部门开展业务，需要自动获取公司DHCP服务器的IP地址，由于DHCP服务器和DHCP客户端不在同一网段，需要在核心交换机上开启DHCP中继功能；为提高链路可靠性，在核心交换机配置链路聚合。
搭建拓扑图 交换机配置 （1）所有交换机创建VLAN10、20、30、40、66、88
[SW1]vlan batch 10 20 30 40 66、88
[SW2]vlan batch 10 20 30 40 66、88
[SW3]vlan batch 10 20 30 40 66、88
[SW4]vlan batch 10 20 30 40 66、88" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/6b793bdb5a970f4b4a093ce66759719c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-12T22:47:47+08:00" />
<meta property="article:modified_time" content="2022-11-12T22:47:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程随想" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程随想</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">华为eNSP实现企业内网双出接口访问外网（VRRP、MSTP、DHCP、NAT-easy IP、nat server、ACL）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、背景介绍</h2> 
<p><br>          Xan20公司新建了一栋办公大楼作为分公司，为了满足日常的办公需求，公司决定为财务部、项目管理部、技术部、行政部和服务器群建立互联互通的有线网络。其中，为方便各部门开展业务，需要自动获取公司DHCP服务器的IP地址；公司内部需要一台服务器，满足各部门上传下载文件；总部可以通过外网访问公司分部的WEB服务器，并且总部的网络管理员可以远程登录管理分公司网络设备；公司已经申请了两条不同运营商互联网专线并配有公网IP地址，希望除财务部不能访问Internet外，其他部门都能访问Internet；后期规划所有设备由网络管理员进行远程管理。</p> 
<h2>二、项目需求分析<br>  </h2> 
<p>        DHCP服务器通过接入交换机连接到核心交换机上采用一条链路互连。服务器群连接到核心交换机，两台核心交换机配置端口聚合，以防止单链路出现故障。财务部、项目管理部、技术部、行政部和服务器群处于不同区域，各部门的接入交换机连接到两台核心交换机，当上行链路出现故障时，可以通过另一条链路到达核心交换机区域。核心交换机区域上做两台核心冗余备份，以防止其中一台核心交换机出现故障，可以通过另一台核心交换机转发数据连接外网。采用以上连接方式时，多台交换机会形成环路，可以采用生成树技术解决该问题。<br>         为方便员工获取DHCP服务器的IP地址，财务部、项目管理部、技术部和行政部可以采用DHCP方式配置IP地址池自动分配IP地址及DNS地址。<br> 服务器群交换机、核心交换机和出口路由器均采用三层互连，可以配置动态路由协议自动学习路由，实现全网互连互通。<br>         Xan20的分公司配有两个不同运营商的公网IP地址，除财务部以为，其他部门的所有员工都有访问Internet的需求，可以在出口路由器上配置NAT。<br>         为方便网络管理员对设备进行远程管理，需要启用所有设备的Telnet服务。</p> 
<p>         综上所述，本项目的实施具体分为以下工作任务。<br>                     1.根据网络拓扑及项目需求分析，对本项目进行详细规划设计。<br>                                （1）实现PC通过DHCP动态获取地址参数<br>                                （2）实现PC访问服务器</p> 
<p>                               （3）核心层交换机做链路聚合<br>                                （4）网关冗余方案实施<br>                                （5）实现二层线路冗余备份<br>                                （6）实现内网访问外网<br>                                （7）外网访问内网WEB服务器<br>                                （8）实现外网远程登录管理<br>                     2.根据规划完成设备的调试。<br>                     3.测试项目能否达到预期效果</p> 
<h2 style="margin-left:0px;text-align:justify;">三、项目要求</h2> 
<p style="margin-left:0;text-align:justify;">1. 公司不同部门的PC属于不同的网段</p> 
<p style="margin-left:0;text-align:justify;">2. 实现各部门PC通过DHCP地址获取参数</p> 
<p style="margin-left:0;text-align:justify;">3. 实现各部门PC能够访问WEB服务器</p> 
<p style="margin-left:0;text-align:justify;">4. 冗余网关备份（VRRP）</p> 
<p style="margin-left:0;text-align:justify;">5. 实现二层网络链路冗余备份</p> 
<p style="margin-left:0;text-align:justify;">6. 核心层交换机做链路聚合</p> 
<p style="margin-left:0;text-align:justify;">7. 实现公司内网访问外网</p> 
<p style="margin-left:0;text-align:justify;">8. 实现外网设备访问内网服务器</p> 
<p style="margin-left:0;text-align:justify;">9.实现远程访问telnet技术</p> 
<h2 style="margin-left:0px;text-align:justify;">四、拓扑搭建</h2> 
<p> </p> 
<p style="text-align:center;"> <img src="https://images2.imgbox.com/d8/da/0UzTivAq_o.png" alt="423639327ac64902b1ef3360fa15b38a.png"></p> 
<h2> 五、项目实施步骤</h2> 
<p><strong>步骤一：</strong></p> 
<p><strong>（一）实现PC通过DHCP动态获取地址参数；实现PC访问WEB服务器</strong></p> 
<p>为方便各部门开展业务，需要自动获取公司DHCP服务器的IP地址，由于DHCP服务器和DHCP客户端不在同一网段，需要在核心交换机上开启DHCP中继功能；为提高链路可靠性，在核心交换机配置链路聚合。</p> 
<ol><li>搭建拓扑图</li></ol> 
<p><img src="https://images2.imgbox.com/bd/07/Gc6P3IhA_o.png" alt="874ad20a323d4433b402fe575e5eaad4.png"></p> 
<p> </p> 
<ol><li>交换机配置</li></ol> 
<p>（1）所有交换机创建VLAN10、20、30、40、66、88</p> 
<p>[SW1]vlan batch 10 20 30 40 66、88</p> 
<p>[SW2]vlan batch 10 20 30 40 66、88</p> 
<p>[SW3]vlan batch 10 20 30 40 66、88</p> 
<p>[SW4]vlan batch 10 20 30 40 66、88</p> 
<p>[SW5]vlan batch 10 20 30 40 66、88</p> 
<p>[SW6]vlan batch 10 20 30 40 66、88</p> 
<p>[SW10]vlan batch 10 20 30 40 66、88</p> 
<p>（2）配置access和trunk端口</p> 
<p>     1）在SW1的GE0/0/1和GE0/0/2接口配置Access端口，允许VLAN10通过；GE0/0/5和GE0/0/6接口配置Trunk端口，允许所有VLAN通过。</p> 
<p>[SW1]int g0/0/1</p> 
<p>[SW1-GigabitEthernet0/0/1]port link-type access</p> 
<p>[SW1-GigabitEthernet0/0/1]port default vlan 10</p> 
<p>[SW1-GigabitEthernet0/0/1]int g0/0/2</p> 
<p>[SW1-GigabitEthernet0/0/2]port link-type access</p> 
<p>[SW1-GigabitEthernet0/0/2]port default vlan 10</p> 
<p>[SW1-GigabitEthernet0/0/2]int g0/0/5</p> 
<p>[SW1-GigabitEthernet0/0/5]port link-type trunk</p> 
<p>[SW1-GigabitEthernet0/0/5]port trunk allow-pass vlan all</p> 
<p>[SW1-GigabitEthernet0/0/5]int g0/0/6</p> 
<p>[SW1-GigabitEthernet0/0/6]port link-type trunk</p> 
<p>[SW1-GigabitEthernet0/0/6]port trunk allow-pass vlan all</p> 
<p>2）在SW2的GE0/0/1和GE0/0/2接口配置Access端口，允许VLAN20通过；GE0/0/5和GE0/0/6接口配置Trunk端口，允许所有VLAN通过。</p> 
<p>[SW2]int g0/0/1</p> 
<p>[SW2-GigabitEthernet0/0/1]port link-type access</p> 
<p>[SW2-GigabitEthernet0/0/1]port default vlan 20</p> 
<p>[SW2-GigabitEthernet0/0/1]int g0/0/2</p> 
<p>[SW2-GigabitEthernet0/0/2]port link-type access</p> 
<p>[SW2-GigabitEthernet0/0/2]port default vlan 20</p> 
<p>[SW2-GigabitEthernet0/0/2]int g0/0/5</p> 
<p>[SW2-GigabitEthernet0/0/5]port link-type trunk</p> 
<p>[SW2-GigabitEthernet0/0/5]port trunk allow-pass vlan all</p> 
<p>[SW2-GigabitEthernet0/0/5]int g0/0/6</p> 
<p>[SW2-GigabitEthernet0/0/6]port link-type trunk</p> 
<p>[SW2-GigabitEthernet0/0/6]port trunk allow-pass vlan all</p> 
<p>3）在SW3的GE0/0/1和GE0/0/2接口配置Access端口，允许VLAN30通过；GE0/0/5和GE0/0/6接口配置Trunk端口，允许所有VLAN通过。</p> 
<p>[SW3]int g0/0/1</p> 
<p>[SW3-GigabitEthernet0/0/1]port link-type access</p> 
<p>[SW3-GigabitEthernet0/0/1]port default vlan 30</p> 
<p>[SW3-GigabitEthernet0/0/1]int g0/0/2</p> 
<p>[SW3-GigabitEthernet0/0/2]port link-type access</p> 
<p>[SW3-GigabitEthernet0/0/2]port default vlan 30</p> 
<p>[SW3-GigabitEthernet0/0/2]int g0/0/5</p> 
<p>[SW3-GigabitEthernet0/0/5]port link-type trunk</p> 
<p>[SW3-GigabitEthernet0/0/5]port trunk allow-pass vlan all</p> 
<p>[SW3-GigabitEthernet0/0/5]int g0/0/6</p> 
<p>[SW3-GigabitEthernet0/0/6]port link-type trunk</p> 
<p>[SW3-GigabitEthernet0/0/6]port trunk allow-pass vlan all</p> 
<p>4）在SW4的GE0/0/1和GE0/0/2接口配置Access端口，允许VLAN40通过；GE0/0/3、GE0/0/5和GE0/0/6接口配置Trunk端口，允许所有VLAN通过。</p> 
<p>[SW4]int g0/0/1</p> 
<p>[SW4-GigabitEthernet0/0/1]port link-type access</p> 
<p>[SW4-GigabitEthernet0/0/1]port default vlan 40</p> 
<p>[SW4-GigabitEthernet0/0/1]int g0/0/2</p> 
<p>[SW4-GigabitEthernet0/0/2]port link-type access</p> 
<p>[SW4-GigabitEthernet0/0/2]port default vlan 40</p> 
<p>[SW4-GigabitEthernet0/0/2]int g0/0/3</p> 
<p>[SW4-GigabitEthernet0/0/3]port link-type trunk</p> 
<p>[SW4-GigabitEthernet0/0/3]port trunk allow-pass vlan all</p> 
<p>[SW4-GigabitEthernet0/0/3]int g0/0/5</p> 
<p>[SW4-GigabitEthernet0/0/5]port link-type trunk</p> 
<p>[SW4-GigabitEthernet0/0/5]port trunk allow-pass vlan all</p> 
<p>[SW4-GigabitEthernet0/0/5]int g0/0/6</p> 
<p>[SW4-GigabitEthernet0/0/6]port link-type trunk</p> 
<p>[SW4-GigabitEthernet0/0/6]port trunk allow-pass vlan all</p> 
<p>5）在SW5的GE0/0/8接口配置Access端口，允许VLAN88通过；GE0/0/1 to GE0/0/4配置Trunk端口，允许所有VLAN通过。</p> 
<p>[SW5]int g0/0/8</p> 
<p>[SW5-GigabitEthernet0/0/8]port link-type access</p> 
<p>[SW5-GigabitEthernet0/0/8]port default vlan 88</p> 
<p>[SW5-GigabitEthernet0/0/8]port-group 1</p> 
<p>[SW5-port-group-1]group-member g0/0/1 to g0/0/4</p> 
<p>[SW5-port-group-1]port link-type trunk</p> 
<p>[SW5-GigabitEthernet0/0/1]port link-type trunk</p> 
<p>[SW5-GigabitEthernet0/0/2]port link-type trunk</p> 
<p>[SW5-GigabitEthernet0/0/3]port link-type trunk</p> 
<p>[SW5-GigabitEthernet0/0/4]port link-type trunk</p> 
<p>[SW5-port-group-1]port trunk allow-pass vlan all</p> 
<p>[SW5-GigabitEthernet0/0/1]port trunk allow-pass vlan all</p> 
<p>[SW5-GigabitEthernet0/0/2]port trunk allow-pass vlan all</p> 
<p>[SW5-GigabitEthernet0/0/3]port trunk allow-pass vlan all</p> 
<p>[SW5-GigabitEthernet0/0/4]port trunk allow-pass vlan all</p> 
<p>6）在SW6的GE0/0/1 to GE0/0/5配置Trunk端口，允许所有VLAN通过。</p> 
<p>[SW6]port-group 1</p> 
<p>[SW6-port-group-1]group-member g0/0/1 to g0/0/5</p> 
<p>[SW6-port-group-1]port link-type trunk</p> 
<p>[SW6-port-group-1]port trunk allow-pass vlan all</p> 
<p>7)在SW10的GE0/0/1接口配置Access端口，允许VLAN66通过；GE0/0/6和GE0/0/10接口配置Trunk端口，允许所有VLAN通过。</p> 
<p>[SW10]int g0/0/1</p> 
<p>[SW10-GigabitEthernet0/0/1]port link-type access</p> 
<p>[SW10-GigabitEthernet0/0/1]port default vlan 66</p> 
<p>[SW10-GigabitEthernet0/0/1]int g0/0/6</p> 
<p>[SW10-GigabitEthernet0/0/6]port link-type trunk</p> 
<p>[SW10-GigabitEthernet0/0/6]port trunk allow-pass vlan all</p> 
<p>[SW10-GigabitEthernet0/0/6]int g0/0/10</p> 
<p>[SW10-GigabitEthernet0/0/10]port link-type trunk</p> 
<p>[SW10-GigabitEthernet0/0/10]port trunk allow-pass vlan all</p> 
<p>(3)LACP配置链路聚合</p> 
<p>1）在核心交换机SW5和SW6的GE0/0/22~0/0/24接口上配置Eth-Trunk,允许所有VLAN通过。</p> 
<p>[SW5]interface eth-trunk 1</p> 
<p>[SW5-Eth-Trunk1]mode lacp-static</p> 
<p>[SW5-Eth-Trunk1]trunkport GigabitEthernet 0/0/22 to 0/0/24</p> 
<p>[SW5-Eth-Trunk1]port link-type trunk</p> 
<p>[SW5-Eth-Trunk1]port trunk allow-pass vlan all</p> 
<p>[SW6]interface eth-trunk 1</p> 
<p>[SW6-Eth-Trunk1]mode lacp-static</p> 
<p>[SW6-Eth-Trunk1]trunkport GigabitEthernet 0/0/22 to 0/0/24</p> 
<p>[SW6-Eth-Trunk1]port link-type trunk</p> 
<p>[SW6-Eth-Trunk1]port trunk allow-pass vlan all</p> 
<p>2）在核心交换机SW5上设置LACP系统优先级，优先级值设置为3000。</p> 
<p>[SW5]lacp priority 3000</p> 
<p>3)在核心交换机SW5上设置LACP端口优先级，GE0/0/22~0/0/24优先级值分别设置为1000、2000、3000。</p> 
<p>[SW5]int g0/0/22</p> 
<p>[SW5-GigabitEthernet0/0/22]lacp priority 1000</p> 
<p>[SW5-GigabitEthernet0/0/22]int g0/0/23</p> 
<p>[SW5-GigabitEthernet0/0/23]lacp priority 2000</p> 
<p>[SW5-GigabitEthernet0/0/23]int g0/0/24</p> 
<p>[SW5-GigabitEthernet0/0/24]lacp priority 3000</p> 
<p>4)在核心交换机SW5上配置LACP抢占功能</p> 
<p>[SW5]interface eth-trunk 1</p> 
<p>[SW5-Eth-Trunk1]lacp preempt enable</p> 
<p>[SW5-Eth-Trunk1]lacp preempt delay 10</p> 
<p>3.配置路由</p> 
<p>（1）配置DHCP设备GE0/0/0接口IP地址。</p> 
<p>&lt;Huawei&gt;sys</p> 
<p>[Huawei]un in en</p> 
<p>[Huawei]sysname DHCP</p> 
<p>[DHCP]int g0/0/0</p> 
<p>[DHCP-GigabitEthernet0/0/0] ip address 192.168.66.1 24</p> 
<p>（2）核心交换机SW5、SW6配置三层接口IP地址。</p> 
<p>[SW5]int vlanif10</p> 
<p>[SW5-Vlanif10]ip address 192.168.10.251 24</p> 
<p>[SW5-Vlanif10]int vlanif20</p> 
<p>[SW5-Vlanif20]ip address 192.168.20.251 24</p> 
<p>[SW5-Vlanif20]int vlanif30</p> 
<p>[SW5-Vlanif30]ip address 192.168.30.251 24</p> 
<p>[SW5-Vlanif30]int vlanif40</p> 
<p>[SW5-Vlanif40]ip address 192.168.40.251 24</p> 
<p>[SW5-Vlanif40]int vlanif66</p> 
<p>[SW5-Vlanif66]ip address 192.168.66.251 24</p> 
<p>[SW5-Vlanif66]int vlanif88</p> 
<p>[SW5-Vlanif88]ip address 192.168.88.254 24</p> 
<p>[SW6]int vlanif10</p> 
<p>[SW6-Vlanif10]ip address 192.168.10.252 24</p> 
<p>[SW6-Vlanif10]int vlanif20</p> 
<p>[SW6-Vlanif20]ip address 192.168.20.252 24</p> 
<p>[SW6-Vlanif20]int vlanif30</p> 
<p>[SW6-Vlanif30]ip address 192.168.30.252 24</p> 
<p>[SW6-Vlanif30]int vlanif40</p> 
<p>[SW6-Vlanif40]ip address 192.168.40.252 24</p> 
<p>[SW6-Vlanif40]int vlanif66</p> 
<p>[SW6-Vlanif66]ip address 192.168.66.254 24</p> 
<p>[SW6-Vlanif66]int vlanif88</p> 
<p>[SW6-Vlanif88]ip address 192.168.88.251 24</p> 
<p>（3）在DHCP设备上配置默认路由</p> 
<p>[DHCP]ip route-static 0.0.0.0 0.0.0.0 192.168.66.254</p> 
<p>4.配置DHCP服务器</p> 
<p>（1）在DHCP设备上启动DHCP服务，并配置DHCP地址池（网段、网关、DNS、租期）。</p> 
<p>[DHCP]dhcp enable</p> 
<p>[DHCP]ip pool vlan10</p> 
<p>[DHCP-ip-pool-vlan10]network 192.168.10.0 mask 255.255.255.0</p> 
<p>[DHCP-ip-pool-vlan10]gateway-list 192.168.10.254</p> 
<p>[DHCP-ip-pool-vlan10]dns-list 114.114.114.114 8.8.8.8</p> 
<p>[DHCP-ip-pool-vlan10]lease day 1</p> 
<p>[DHCP-ip-pool-vlan10]quit</p> 
<p>[DHCP-ip-pool-vlan20] ip pool vlan20</p> 
<p>[DHCP-ip-pool-vlan20]network 192.168.20.0 mask 255.255.255.0</p> 
<p>[DHCP-ip-pool-vlan20]gateway-list 192.168.20.254</p> 
<p>[DHCP-ip-pool-vlan20]dns-list 114.114.114.114 8.8.8.8</p> 
<p>[DHCP-ip-pool-vlan20]lease day 2</p> 
<p>[DHCP-ip-pool-vlan20]quit</p> 
<p>[DHCP-ip-pool-vlan30]ip pool vlan30</p> 
<p>[DHCP-ip-pool-vlan30]network 192.168.30.0 mask 255.255.255.0</p> 
<p>[DHCP-ip-pool-vlan30]gateway-list 192.168.30.254</p> 
<p>[DHCP-ip-pool-vlan30]dns-list 114.114.114.114 8.8.8.8</p> 
<p>[DHCP-ip-pool-vlan30]lease day 3</p> 
<p>[DHCP-ip-pool-vlan30]quit</p> 
<p>[DHCP-ip-pool-vlan40]ip pool vlan40</p> 
<p>[DHCP-ip-pool-vlan40]network 192.168.40.0 mask 255.255.255.0</p> 
<p>[DHCP-ip-pool-vlan40]gateway-list 192.168.40.254</p> 
<p>[DHCP-ip-pool-vlan40]dns-list 114.114.114.114 8.8.8.8</p> 
<p>[DHCP-ip-pool-vlan40]lease day 4</p> 
<p>[DHCP-ip-pool-vlan40]quit</p> 
<p>（2）DHCP设备的GE0/0/0接口下开启DHCP功能</p> 
<p>[DHCP]interface GigabitEthernet 0/0/0</p> 
<p>[DHCP-GigabitEthernet0/0/0]dhcp select global</p> 
<p>5. 在SW6配置DHCP中继</p> 
<p>启动DHCP功能，与终端相连接口开启中继功能并指定服务器地址。</p> 
<p>[SW6]dhcp enable</p> 
<p>[SW6]int vlanif10</p> 
<p>[SW6-Vlanif10]dhcp select relay</p> 
<p>[SW6-Vlanif10]dhcp relay server-ip 192.168.66.1</p> 
<p>[SW6-Vlanif10]int vlanif20</p> 
<p>[SW6-Vlanif20]dhcp select relay</p> 
<p>[SW6-Vlanif20]dhcp relay server-ip 192.168.66.1</p> 
<p>[SW6-Vlanif20]int vlanif30</p> 
<p>[SW6-Vlanif30]dhcp select relay</p> 
<p>[SW6-Vlanif30]dhcp relay server-ip 192.168.66.1</p> 
<p>[SW6-Vlanif30]int vlanif40</p> 
<p>[SW6-Vlanif40]dhcp select relay</p> 
<p>[SW6-Vlanif40]dhcp relay server-ip 192.168.66.1</p> 
<p><strong>步骤二：</strong></p> 
<p><strong>（二）网关冗余方案实施</strong></p> 
<p>为了提高网络可靠性，在不改变组网的情况下，在核心交换机SW5和SW6上使用VRRP技术，实现网关冗余。</p> 
<p>1. 搭建拓扑图</p> 
<p><img src="https://images2.imgbox.com/4a/e6/5Yh1VRmE_o.png" alt="5a86619451094d499793c633926d70ee.png"></p> 
<p> </p> 
<p>2.交换机配置</p> 
<p>（1）把需求1配置SW6的vlan10、20、30、40网关地址192.168.XX.254替换为192.168.XX.252，保留192.168.XX.254作为虚拟网关。</p> 
<p>[SW6]interface Vlanif10</p> 
<p>[SW6-Vlanif10]ip address 192.168.10.252 24</p> 
<p>[SW6-Vlanif10]interface Vlanif20</p> 
<p>[SW6-Vlanif20]ip address 192.168.20.252 24</p> 
<p>[SW6-Vlanif20]interface Vlanif30</p> 
<p>[SW6-Vlanif30]ip address 192.168.30.252 24</p> 
<p>[SW6-Vlanif30]interface Vlanif40</p> 
<p>[SW6-Vlanif40]ip address 192.168.40.252 24</p> 
<p>（2）配置虚拟IP地址</p> 
<p>1）实现VLAN10、20转发数据的主设备为SW5，虚拟的vrid组分别为10 、20，虚拟的IP地址分别为192.168.10.254；192.168.20.254，并且设置优先级为200，在SW5的配置如下：</p> 
<p>[SW5]interface Vlanif10</p> 
<p>[SW5-Vlanif10]vrrp vrid 10 virtual-ip 192.168.10.254</p> 
<p>[SW5-Vlanif10]vrrp vrid 10 priority 200</p> 
<p>[SW5-Vlanif10]interface Vlanif20</p> 
<p>[SW5-Vlanif20]vrrp vrid 20 virtual-ip 192.168.20.254</p> 
<p>[SW5-Vlanif20]vrrp vrid 20 priority 200</p> 
<p>2）实现VLAN10、20转发数据的SW6备份设备，虚拟的vrid组分别为10 、20，虚拟的IP地址分别为192.168.10.254；192.168.20.254，并且设置优先级为100（默认），在SW6的配置如下：</p> 
<p>[SW6]interface Vlanif10</p> 
<p>[SW6-Vlanif10]vrrp vrid 10 virtual-ip 192.168.10.254</p> 
<p>[SW6-Vlanif10]vrrp vrid 10 priority 100</p> 
<p>[SW6-Vlanif10]interface Vlanif20</p> 
<p>[SW6-Vlanif20]vrrp vrid 20 virtual-ip 192.168.20.254</p> 
<p>[SW6-Vlanif20]vrrp vrid 20 priority 100</p> 
<p>3）实现VLAN30、40转发数据的主设备为SW6，虚拟的vrid组分别为30 、40，虚拟的IP地址分别为192.168.30.254；192.168.40.254，并且设置优先级为200，在SW6的配置如下：SW6的配置如下：</p> 
<p>[SW6]interface Vlanif30</p> 
<p>[SW6-Vlanif30]vrrp vrid 30 virtual-ip 192.168.30.254</p> 
<p>[SW6-Vlanif30]vrrp vrid 30 priority 200</p> 
<p>[SW6-Vlanif30]interface Vlanif40</p> 
<p>[SW6-Vlanif40]vrrp vrid 40 virtual-ip 192.168.40.254</p> 
<p>[SW6-Vlanif40]vrrp vrid 40 priority 200</p> 
<p>4）实现VLAN30、40转发数据的SW5备份设备，虚拟的vrid组分别为30 、40，虚拟的IP地址分别为192.168.30.254；192.168.40.254，并且设置优先级为100（默认），在SW5的配置如下：</p> 
<p>[SW5]interface Vlanif30</p> 
<p>[SW5-Vlanif30]vrrp vrid 30 virtual-ip 192.168.30.254</p> 
<p>[SW5-Vlanif30]vrrp vrid 30 priority 100</p> 
<p>[SW5-Vlanif30]interface Vlanif40</p> 
<p>[SW5-Vlanif40]vrrp vrid 40 virtual-ip 192.168.40.254</p> 
<p>[SW5-Vlanif40]vrrp vrid 40 priority 100</p> 
<p>2.在DHCP设备上的地址池排除掉已存在的IP地址。</p> 
<p>由于先建立的DHCP地址池，DHCP下发的地址使得SW5与SW6的251/252地址产生冲突，先收回地址池的地址，再排除已配置的IP地址。</p> 
<p>（1）重启地址池，在用户视图下重启。</p> 
<p>&lt;DHCP&gt;reset ip pool name vlan10 all</p> 
<p>Warning: If the IP addresses that are being used are reclaimed, may influence normal user in the network. Are you sure to continue?[Y/N]:y</p> 
<p>重复操作，对ip pool vlan20、30和40进行地址池重启。</p> 
<p>(2）在系统视图下，进入对应地址池，进行已配置IP地址进行排除。</p> 
<p>[DHCP]ip pool vlan10</p> 
<p>[DHCP-ip-pool-vlan10]excluded-ip-address 192.168.10.251 192.168.10.252</p> 
<p>[DHCP-ip-pool-vlan10]quit</p> 
<p>[DHCP]ip pool vlan20</p> 
<p>[DHCP-ip-pool-vlan20]excluded-ip-address 192.168.20.251 192.168.20.252</p> 
<p>[DHCP-ip-pool-vlan20]quit</p> 
<p>[DHCP]ip pool vlan30</p> 
<p>[DHCP-ip-pool-vlan30]excluded-ip-address 192.168.30.251 192.168.30.252</p> 
<p>[DHCP-ip-pool-vlan30]quit</p> 
<p>[DHCP]ip pool vlan40</p> 
<p>[DHCP-ip-pool-vlan40]excluded-ip-address 192.168.40.251 192.168.40.252</p> 
<p>[DHCP-ip-pool-vlan40]quit</p> 
<p>3. 在核心交换机SW5上开启DHCP服务并配置DHCP中继。</p> 
<p>[SW5]dhcp enable</p> 
<p>[SW5]interface Vlanif10</p> 
<p>[SW5-Vlanif10]dhcp select relay</p> 
<p>[SW5-Vlanif10]dhcp relay server-ip 192.168.66.1</p> 
<p>[SW5-Vlanif10]interface Vlanif20</p> 
<p>[SW5-Vlanif20]dhcp select relay</p> 
<p>[SW5-Vlanif20]dhcp relay server-ip 192.168.66.1</p> 
<p>[SW5-Vlanif20]interface Vlanif30</p> 
<p>[SW5-Vlanif30]dhcp select relay</p> 
<p>[SW5-Vlanif30]dhcp relay server-ip 192.168.66.1</p> 
<p>[SW5-Vlanif30]interface Vlanif40</p> 
<p>[SW5-Vlanif40]dhcp select relay</p> 
<p>[SW5-Vlanif40]dhcp relay server-ip 192.168.66.1</p> 
<p><strong>步骤三：</strong></p> 
<p><strong>（三）实现二层线路冗余备份</strong></p> 
<p>为实现二层线路冗余备份，需要为所有交换机配置生成树协议，实现二层线路优先级的设置以及交换机根桥的选择。</p> 
<p>1. 搭建拓扑图</p> 
<p><img src="https://images2.imgbox.com/3b/a5/vixKnLcl_o.png" alt="53b8a3943cec498ab80f2aa51e221030.png"></p> 
<p> </p> 
<p>2.交换机配置</p> 
<p>（1）在所有交换机上配置STP协议，并且将vlan10映射到instance1内，将vlan20映射到instance2内，vlan30映射到instance3内，vlan40映射到instance4内。</p> 
<p>[Huawei]stp enable</p> 
<p>[Huawei]stp region-configuration</p> 
<p>[Huawei-region-configuration]region-name zhaoqing</p> 
<p>[Huawei-region-configuration] instance 1 vlan 10</p> 
<p>[Huawei-region-configuration] instance 2 vlan 20</p> 
<p>[Huawei-region-configuration] instance 3 vlan 30</p> 
<p>[Huawei-region-configuration] instance 4 vlan 40</p> 
<p>[Huawei-region-configuration] active region-configuration</p> 
<p>（2）将核心交换机SW5设置为vlan10、20的主根桥以及vlan30、40的次根桥。</p> 
<p>[SW5] stp instance 1 priority 4096</p> 
<p>[SW5] stp instance 2 priority 4096</p> 
<p>[SW5] stp instance 3 priority 8192</p> 
<p>[SW5] stp instance 4 priority 8192</p> 
<p>（3）将核心交换机SW6设置为vlan30、40的主根桥以及vlan10、20的次根桥。</p> 
<p>[SW6] stp instance 1 priority 8192</p> 
<p>[SW6] stp instance 2 priority 8192</p> 
<p>[SW6] stp instance 3 priority 4096</p> 
<p>[SW6] stp instance 4 priority 4096</p> 
<p><strong>步骤四：</strong></p> 
<p><strong>（四）实现内网访问外网</strong></p> 
<p>    为实现内网可以访问外网，需要将核心交换机SW5和核心交换机SW6以及核心设备R1所连接的网络进行OSPF划分区域。添加SW7实现核心冗余备份。</p> 
<p>1.拓扑搭建</p> 
<p><img src="https://images2.imgbox.com/4e/61/AZ7XLYQh_o.png" alt="aed1f319e56f4d748002732af1536b33.png"></p> 
<p> </p> 
<p>2.交换机配置</p> 
<p>（1）在交换机SW1~SW6、SW10系统视图下添加VLAN15。</p> 
<p>[SW1]vlan 15      [SW2]vlan 15     [SW3]vlan 15     [SW4]vlan 15</p> 
<p>[SW5]vlan 15      [SW6]vlan 15     [SW10]vlan 15</p> 
<p>（2）在SW7上创建VLAN10、15、20、30、40、66、88</p> 
<p>&lt;Huawei&gt;sys</p> 
<p>[Huawei]sysname SW7</p> 
<p>[SW7]undo info-center enable</p> 
<p>[SW7]vlan batch 10 15 20 30 40 66 88</p> 
<p>（3）SW5和SW6在GE0/0/7接口配置Trunk端口，允许所有的VLAN通过。</p> 
<p>[SW5]interface GigabitEthernet0/0/7</p> 
<p>[SW5-GigabitEthernet0/0/7]port link-type trunk</p> 
<p>[SW5-GigabitEthernet0/0/7]port trunk allow-pass vlan all</p> 
<p>[SW6]interface GigabitEthernet0/0/7</p> 
<p>[SW6-GigabitEthernet0/0/7]port link-type trunk</p> 
<p>[SW6-GigabitEthernet0/0/7]port trunk allow-pass vlan all</p> 
<p>（4）SW7在GE0/0/5和GE0/0/6接口配置Trunk端口，允许所有的VLAN通过；在GE0/0/15配置Access端口，允许VLAN15通过。</p> 
<p>[SW7]interface GigabitEthernet0/0/5</p> 
<p>[SW7-GigabitEthernet0/0/5]port link-type trunk</p> 
<p>[SW7-GigabitEthernet0/0/5]port trunk allow-pass vlan all</p> 
<p>[SW7-GigabitEthernet0/0/5]quit</p> 
<p>[SW7]interface GigabitEthernet0/0/6</p> 
<p>[SW7-GigabitEthernet0/0/6]port link-type trunk</p> 
<p>[SW7-GigabitEthernet0/0/6]port trunk allow-pass vlan all</p> 
<p>[SW7-GigabitEthernet0/0/6]quit</p> 
<p>[SW7-GigabitEthernet0/0/15]interface GigabitEthernet0/0/15</p> 
<p>[SW7-GigabitEthernet0/0/15]port link-type access</p> 
<p>[SW7-GigabitEthernet0/0/15]port default vlan 15</p> 
<p>(5) 在SW5、SW6上分别配置vlan15三层接口地址</p> 
<p>[SW5]interface Vlanif15</p> 
<p>[SW5-Vlanif15]ip address 192.168.15.5 255.255.255.0</p> 
<p>[SW6]interface Vlanif15</p> 
<p>[SW6-Vlanif15]ip address 192.168.15.6 255.255.255.0</p> 
<p>(6) 在SW7上配置MSTP域，并且将vlan10映射到instance1内，将vlan20映射到instance2内，vlan30映射到instance3内，vlan15映射到instance15内，vlan40映射到instance4内。并将SW7设置为vlan15的主根桥， instance 15优先级设置为0。</p> 
<p>[SW7]stp region-configuration</p> 
<p>[SW7-mst-region]region-name zhaoqing</p> 
<p>[SW7-mst-region]instance 1 vlan 10</p> 
<p>[SW7-mst-region]instance 15 vlan 15</p> 
<p>[SW7-mst-region]instance 2 vlan 20</p> 
<p>[SW7-mst-region]instance 3 vlan 30</p> 
<p>[SW7-mst-region]instance 4 vlan 40</p> 
<p>[SW7-mst-region]active region-configuration</p> 
<p>[SW7-mst-region]quit</p> 
<p>[SW7]stp instance 15 priority 0</p> 
<p>(7) 在SW5配置基本OSPF，划分多区域，手动指定Router ID，骨干区域为area 0，宣告网段192.168.15.0。</p> 
<p>[SW5]ospf 1 router-id 5.5.5.5</p> 
<p>[SW5-ospf-1]area 0</p> 
<p>[SW5-ospf-1-area-0.0.0.0]network 192.168.15.0 0.0.0.255</p> 
<p>[SW5-ospf-1-area-0.0.0.0]quit</p> 
<p>[SW5-ospf-1]area 10</p> 
<p>[SW5-ospf-1-area-0.0.0.10]network 192.168.10.0 0.0.0.255</p> 
<p>[SW5-ospf-1-area-0.0.0.10]quit</p> 
<p>[SW5-ospf-1]area 20</p> 
<p>[SW5-ospf-1-area-0.0.0.20]network 192.168.20.0 0.0.0.255</p> 
<p>[SW5-ospf-1-area-0.0.0.20]quit</p> 
<p>[SW5-ospf-1]area 30</p> 
<p>[SW5-ospf-1-area-0.0.0.30]network 192.168.30.0 0.0.0.255</p> 
<p>[SW5-ospf-1-area-0.0.0.30]quit</p> 
<p>[SW5-ospf-1]area 40</p> 
<p>[SW5-ospf-1-area-0.0.0.40]network 192.168.40.0 0.0.0.255</p> 
<p>[SW5-ospf-1-area-0.0.0.40]quit</p> 
<p>[SW5-ospf-1]area 66</p> 
<p>[SW5-ospf-1-area-0.0.0.66]network 192.168.66.0 0.0.0.255</p> 
<p>[SW5-ospf-1-area-0.0.0.66]quit</p> 
<p>[SW5-ospf-1]area 88</p> 
<p>[SW5-ospf-1-area-0.0.0.88]network 192.168.88.0 0.0.0.255</p> 
<p>[SW5-ospf-1-area-0.0.0.88]quit</p> 
<p>(8) 在SW6配置基本OSPF，划分多区域，手动指定Router ID，骨干区域为area 0，宣告网段192.168.15.0。</p> 
<p>[SW6]ospf 1 router-id 6.6.6.6</p> 
<p>[SW6-ospf-1]area 0</p> 
<p>[SW6-ospf-1-area-0.0.0.0]network 192.168.15.0 0.0.0.255</p> 
<p>[SW6-ospf-1-area-0.0.0.0]quit</p> 
<p>[SW6-ospf-1]area 10</p> 
<p>[SW6-ospf-1-area-0.0.0.10]network 192.168.10.0 0.0.0.255</p> 
<p>[SW6-ospf-1-area-0.0.0.10]quit</p> 
<p>[SW6-ospf-1]area 20</p> 
<p>[SW6-ospf-1-area-0.0.0.20]network 192.168.20.0 0.0.0.255</p> 
<p>[SW6-ospf-1-area-0.0.0.20]quit</p> 
<p>[SW6-ospf-1]area 30</p> 
<p>[SW6-ospf-1-area-0.0.0.30]network 192.168.30.0 0.0.0.255</p> 
<p>[SW6-ospf-1-area-0.0.0.30]quit</p> 
<p>[SW6-ospf-1]area 40</p> 
<p>[SW6-ospf-1-area-0.0.0.40]network 192.168.40.0 0.0.0.255</p> 
<p>[SW6-ospf-1-area-0.0.0.40]quit</p> 
<p>[SW6-ospf-1]area 66</p> 
<p>[SW6-ospf-1-area-0.0.0.66]network 192.168.66.0 0.0.0.255</p> 
<p>[SW6-ospf-1-area-0.0.0.66]quit</p> 
<p>[SW6-ospf-1]area 88</p> 
<p>[SW6-ospf-1-area-0.0.0.88]network 192.168.88.0 0.0.0.255</p> 
<p>[SW6-ospf-1-area-0.0.0.88]quit</p> 
<p> </p> 
<p>3.路由器配置</p> 
<p>（1）为R1的G0/0/0和G0/0/1接口配置IP地址。</p> 
<p>&lt;Huawei&gt;sys</p> 
<p>[Huawei]sysname R1</p> 
<p>[R1]un in en</p> 
<p>[R1]interface GigabitEthernet0/0/0</p> 
<p>[R1-GigabitEthernet0/0/0]ip address 192.168.15.1 24</p> 
<p>[R1-GigabitEthernet0/0/0]interface GigabitEthernet0/0/1</p> 
<p>[R1-GigabitEthernet0/0/1]ip address 100.1.1.1 24</p> 
<p> </p> 
<p>(2) 在R3的GE0/0/0和GE0/0/1接口配置IP地址。</p> 
<p>&lt;Huawei&gt;sys</p> 
<p>[Huawei]sysname R3</p> 
<p>[R3]un in en</p> 
<p>[R3]interface GigabitEthernet0/0/0</p> 
<p>[R3-GigabitEthernet0/0/0]ip address 200.1.1.254 24</p> 
<p>[R3-GigabitEthernet0/0/0]interface GigabitEthernet0/0/1</p> 
<p>[R3-GigabitEthernet0/0/1]ip address 100.1.1.6 24</p> 
<p>（3）在R1配置OSPF，route-id为1.1.1.1，将其连接的vlan子网对应area区域号进行配置，并且配置OSPF动态默认路由。</p> 
<p>[Huawei] ospf 1 router-id 1.1.1.1</p> 
<p>[R1-ospf-1]default-route-advertise</p> 
<p>[Huawei-ospf-1]area 0</p> 
<p>[Huawei-ospf-1-area-0.0.0.0] network 192.168.15.0 0.0.0.255</p> 
<p>（4）在R1配置用于内网访问外网的访问控制链路ACL，并且在G0/0/1接口调用ACL，使内网除了财务部以外的网络均可访问外网。</p> 
<p>[R1]acl 2000</p> 
<p>[R1-acl-basic-2000] rule 5 deny source 192.168.10.0 0.0.0.255</p> 
<p>[R1-acl-basic-2000] rule 10 permit source 192.168.20.0 0.0.0.255</p> 
<p>[R1-acl-basic-2000] rule 15 permit source 192.168.30.0 0.0.0.255</p> 
<p>[R1-acl-basic-2000] rule 20 permit source 192.168.40.0 0.0.0.255</p> 
<p>[R1-acl-basic-2000] rule 25 permit source 192.168.15.0 0.0.0.255</p> 
<p>[R1-acl-basic-2000] rule 30 permit source 192.168.66.0 0.0.0.255</p> 
<p>[R1-acl-basic-2000] rule 35 permit source 192.168.88.0 0.0.0.255</p> 
<p>[R1]interface GigabitEthernet0/0/1</p> 
<p>[R1-GigabitEthernet0/0/1] nat outbound 2000</p> 
<p>（5）在R1配置一条向外的默认路由，用于连接外网的网络。</p> 
<p>[R1]ip route-static 0.0.0.0 0 100.1.1.6</p> 
<p><strong>步骤五：</strong></p> 
<p><strong>（五）实现外网访问内网WEB服务器；实现外网远程登录管理</strong></p> 
<p>为实现总公司通过客户端从外网访问子公司内网WEB服务器，需要将公网IP地址映射到内网WEB服务器IP地址；为实现外网远程登录管理，总公司的网络管理员通过Telnet远程登录到核心交换机上，对子公司内网网络设备实现管理，内网的所有网络设备开启Telnet服务。</p> 
<p>1.拓扑搭建</p> 
<p><img src="https://images2.imgbox.com/5f/f8/vNxjO85Y_o.png" alt="3c4bc50683244d4390f10090560a1f7f.png"></p> 
<p> </p> 
<p>1. 配置交换机</p> 
<p>（1）在所有交换机创建vlan 99，作为管理vlan。</p> 
<p>[SW1]vlan 99      [SW2]vlan 99     [SW3]vlan 99     [SW4]vlan 99</p> 
<p>[SW5]vlan 99      [SW6]vlan 99     [SW7]vlan 99     [SW10]vlan 99</p> 
<p>（2）为所有交换机配置vlan99三层接口IP地址。</p> 
<p>[SW1]int vlanif 99</p> 
<p>[SW1-Vlanif99]ip address 192.168.99.1</p> 
<p>[SW2]int vlanif 99</p> 
<p>[SW2-Vlanif99]ip address 192.168.99.2</p> 
<p>[SW3]int vlanif 99</p> 
<p>[SW3-Vlanif99]ip address 192.168.99.3</p> 
<p>[SW4]int vlanif 99</p> 
<p>[SW4-Vlanif99]ip address 192.168.99.4</p> 
<p>[SW5]int vlanif 99</p> 
<p>[SW5-Vlanif99]ip address 192.168.99.5</p> 
<p>[SW6]int vlanif 99</p> 
<p>[SW6-Vlanif99]ip address 192.168.99.6</p> 
<p>[SW7]int vlanif 99</p> 
<p>[SW7-Vlanif99]ip address 192.168.99.7</p> 
<p>[SW10]int vlanif 99</p> 
<p>[SW10-Vlanif99]ip address 192.168.99.10</p> 
<p>（3）在所有交换机上开启远程管理服务（真实的设备上，在用户接口视图上需配置protocol inbound all---支持所有协议入站，不然无法远程管理）。</p> 
<p>[SWX]telnet server enable</p> 
<p>[SWX]user-interface vty 0 4</p> 
<p>[SWX-ui-vty0-4]authentication-mode aaa</p> 
<p>[SWX-ui-vty0-4]protocol inbound all</p> 
<p>[SWX]aaa</p> 
<p>[SWX-aaa]local-user admin password cipher huawei@123</p> 
<p>[SWX-aaa]local-user admin privilege level 15</p> 
<p>[SWX-aaa]local-user admin service-type telnet</p> 
<p>（4）在SW5、6上做vlan99的主从备份，设置优先级，虚拟IP为192.168.99.254。</p> 
<p>[SW5]int Vlanif 99</p> 
<p>[SW5-Vlanif99]vrrp vrid 99 virtual-ip 192.168.99.254</p> 
<p>[SW5-Vlanif99]vrrp vrid 99 priority 200</p> 
<p>[SW6]int Vlanif 99</p> 
<p>[SW6-Vlanif99]vrrp vrid 99 virtual-ip 192.168.99.254</p> 
<p>[SW6-Vlanif99]vrrp vrid 99 priority 100</p> 
<p>（5）所有交换机添加MSTP配置vlan99的实例9。</p> 
<p>[SWX]stp region-configuration</p> 
<p>[SWX-mst-region]region-name zhaoqing</p> 
<p>[SWX-mst-region]instance 9 vlan 99</p> 
<p>[SWX-mst-region]active region-configuration</p> 
<p>（6）SW5作为VLAN99根网桥，优先级为4096；SW6作为VLAN99次根网桥，优先级为8192。</p> 
<p>[SW5]stp instance 9 priority 4096</p> 
<p>[SW6]stp instance 9 priority 8192</p> 
<p>（7）在SW5、6上进入OSPF进程1中创建area 99，宣告网络192.168.99.0 0.0.0.255</p> 
<p>[SW5]ospf 1</p> 
<p>[SW5-ospf-1]area 99</p> 
<p>[SW5-ospf-1-area-0.0.0.99]network 192.168.99.0 0.0.0.255</p> 
<p> </p> 
<p>[SW6]ospf 1</p> 
<p>[SW6-ospf-1]area 99</p> 
<p>[SW6-ospf-1-area-0.0.0.99]network 192.168.99.0 0.0.0.255</p> 
<p>（8）在SW1~4上配置默认路由，下一条为192.168.99.254</p> 
<p>[SWX]ip route-static 0.0.0.0 0 192.168.99.254</p> 
<p>2.配置路由</p> 
<p>（1）在R3的GE0/0/2接口上配置IP地址。</p> 
<p>[R3]int g0/0/2</p> 
<p>[R3-GigabitEthernet0/0/2]ip address 115.1.1.254 24</p> 
<p>（2）在R1查看路由表（display ip routing-table），去往192.168.88.0和192.168.99.0网段存在两条路，为使路由是最优，在SW6进入vlanif88和vlanif99修改OSPF的cost值。</p> 
<p>[SW6]int Vlanif 88</p> 
<p>[SW6-Vlanif88]ospf cost 10</p> 
<p>[SW6-Vlanif88]quit</p> 
<p>[SW6]int Vlanif 99</p> 
<p>[SW6-Vlanif99]ospf cost 10</p> 
<p>(3)为使总公司外网客户端访问子公司内网WEB服务器，需要在边界路由R1配置nat server。</p> 
<p>[R1]int g0/0/1</p> 
<p>[R1-GigabitEthernet0/0/1]nat server protocol tcp global 100.1.1.2 80 inside 192.168.88.1 80</p> 
<p>（4）为使总公司的网络管理员在外网远程管理子公司内网网络设备，需要在边界路由R1配置nat server。</p> 
<p>[R1]int g0/0/1</p> 
<p>[R1-GigabitEthernet0/0/1] nat server protocol tcp global 100.1.1.3 23 inside 192.168.99.254 23</p> 
<p><strong>步骤六：</strong></p> 
<p><strong>（六）实现核心交换机网关冗余备份，内网的边界路由R1和R2接入不同的运营商网络，实现主备</strong></p> 
<p>        为保证企业内网网络的可靠性，在核心交换机上做网关冗余备份，边界路由也做备份，当某一运营商的网络出现故障时，可以及时使用另一运营商的网络，保证公司网络可靠性。</p> 
<p>1.拓扑搭建</p> 
<p style="text-align:center;"><img src="https://images2.imgbox.com/af/ec/taQTv0DB_o.png" alt="813a423432a94416875fe1d42c3fd046.png"></p> 
<p> 2.交换机配置</p> 
<p>(1)在SW8上创建vlan</p> 
<p>&lt;huawei&gt;sys</p> 
<p>[huawei]un in en</p> 
<p>[huawei]sysn SW8<br> [SW8]vlan batch 10 15 16 20 30 40 66 88 99</p> 
<p>(2)所有交换机在系统视图下创建VLAN16<br> [SWX]vlan 16</p> 
<p>(3)在SW5的GE0/0/5接口，配置trunk端口，允许所有的vlan通过<br> [SW5]int g0/0/5<br> [SW5-GigabitEthernet0/0/5]port link-type trunk<br> [SW5-GigabitEthernet0/0/5]port trunk allow-pass vlan all</p> 
<p>(4)在SW6的GE0/0/8接口，配置trunk端口，允许所有的vlan通过<br> [SW8]int g0/0/8<br> [SW8-GigabitEthernet0/0/8]port link-type trunk<br> [SW8-GigabitEthernet0/0/8]port trunk allow-pass vlan all</p> 
<p>(5)在SW8的GE0/0/5~7接口，配置trunk端口，允许所有的vlan通过；<br> GE0/0/15接口，配置access端口，允许vlan16通过<br> [SW8]int g0/0/5<br> [SW8-GigabitEthernet0/0/5]port link-type trunk<br> [SW8-GigabitEthernet0/0/5]port trunk allow-pass vlan all<br> [SW8]int g0/0/6<br> [SW8-GigabitEthernet0/0/6]port link-type trunk<br> [SW8-GigabitEthernet0/0/6]port trunk allow-pass vlan all<br> [SW8]int g0/0/7<br> [SW8-GigabitEthernet0/0/7]port link-type trunk<br> [SW8-GigabitEthernet0/0/7]port trunk allow-pass vlan all<br> [SW8]int g0/0/15<br> [SW8-GigabitEthernet0/0/15]port link-type access<br> [SW8-GigabitEthernet0/0/15]port default vlan 16</p> 
<p>(6)在SW7的GE0/0/8接口，配置trunk端口，允许所有的vlan通过<br> [SW7]int g0/0/8<br> [SW7-GigabitEthernet0/0/8]port link-type trunk<br> [SW7-GigabitEthernet0/0/8]port trunk allow-pass vlan all</p> 
<p>(7)在SW5上配置三层接口IP地址<br> [SW5]int Vlanif 16<br> [SW5-Vlanif15]ip address 192.168.16.6 24</p> 
<p>(8)在SW6上配置三层接口IP地址<br> [SW6]int vlanif 16<br> [SW6-Vlanif16]ip address 192.168.16.5 24</p> 
<p>(9)在R1的GE0/0/2接口配置IP地址<br> [R1]int g0/0/2<br> [R1-GigabitEthernet0/0/2]ip address 192.168.16.2 24</p> 
<p>(10)在SW5、6和R1上进入OSPF 1的area 0宣告192.168.16.0<br> [SW5]ospf 1<br> [SW5-ospf-1]area 0<br> [SW5-ospf-1-area-0.0.0.0]network 192.168.16.0 0.0.0.255</p> 
<p>[SW6]ospf 1<br> [SW6-ospf-1]area 0<br> [SW6-ospf-1-area-0.0.0.0]network 192.168.16.0 0.0.0.255</p> 
<p>[R1]ospf 1<br> [R1-ospf-1]area 0<br> [R1-ospf-1-area-0.0.0.0]network 192.168.16.0 0.0.0.255</p> 
<p>(11)在SW8上做VLAN16的根网桥；SW7做VLAN16次根网桥；SW8作为vlan15的次根网桥</p> 
<p>[SW8]stp region-configuration<br> [SW8-mst-region]region-name zhaoqing<br> [SW8-mst-region]instance 1 vlan 10<br> [SW8-mst-region]instance 2 vlan 20<br> [SW8-mst-region]instance 3 vlan 30<br> [SW8-mst-region]instance 4 vlan 40<br> [SW8-mst-region]instance 9 vlan 99<br> [SW8-mst-region]instance 15 vlan 15<br> [SW8-mst-region]instance 16 vlan 16<br> [SW8-mst-region]active region-configuration</p> 
<p>[SW8-mst-region]q<br> [SW8]stp instance 16 priority 4096<br> [SW8]stp instance 15 priority 8192</p> 
<p>[SW7]stp instance 16 priority 8192</p> 
<p>(12)在所有交换机上加入实例16，然后重新激活<br> [SWX]stp region-configuration<br> [SWX-mst-region]region-name zhaoqing<br> [SWX-mst-region]instance 16 vlan 16<br> [SWX-mst-region]active region-configuration</p> 
<p>(13)在边界路由R1上的GE0/0/2接口修改OSPF的开销为10，是路由最优，vlan16作为备份<br> [R1]int g0/0/2<br> [R1-GigabitEthernet0/0/2]ospf cost 10</p> 
<p>3.配置路由</p> 
<p>（1）在边界路由R2上配置GE0/0/0~1的IP地址<br> [R2]int g0/0/0<br> [R2-GigabitEthernet0/0/0]ip add 192.168.16.1 24<br> [R2-GigabitEthernet0/0/0]int g0/0/1<br> [R2-GigabitEthernet0/0/1]ip add 110.1.1.1 24<br> [R2-GigabitEthernet0/0/1]int g0/0/2<br> [R2-GigabitEthernet0/0/2]ip add 192.168.15.2 24</p> 
<p>（2）在R3的GE4/0/1上配置IP地址<br> [R3]int g4/0/1<br> [R3-GigabitEthernet4/0/1]ip add 110.1.1.6 24</p> 
<p>（3）在SW7的GE0/0/16接口配置access端口，允许vlan15通过<br> [SW7]int g0/0/16<br> [SW7-GigabitEthernet0/0/16]port link-type access<br> [SW7-GigabitEthernet0/0/16]port default vlan 15</p> 
<p>(4)在SW8的GE0/0/16接口配置access端口，允许vlan16通过<br> [SW8]int g0/0/16<br> [SW8-GigabitEthernet0/0/16]port link-type access<br> [SW8-GigabitEthernet0/0/16]port default vlan 16</p> 
<p>(5)在边界路由R2配置ACL<br> [R2]acl 2000<br> [R2-acl-2000]rule 5 deny source 192.168.10.0 0.0.0.255 <br> [R2-acl-2000]rule 10 permit source 192.168.20.0 0.0.0.255 <br> [R2-acl-2000]rule 15 permit source 192.168.30.0 0.0.0.255 <br> [R2-acl-2000]rule 20 permit source 192.168.40.0 0.0.0.255 <br> [R2-acl-2000]rule 25 permit source 192.168.15.0 0.0.0.255 <br> [R2-acl-2000]rule 30 permit source 192.168.66.0 0.0.0.255 <br> [R2-acl-2000]rule 35 permit source 192.168.88.0 0.0.0.255 </p> 
<p>(6)在边界路由R2的GE0/0/1接口配置，最节省IP（easyIP）nat转换<br> [R2]int g0/0/1<br> [R2-GigabitEthernet0/0/1]nat outbound 2000</p> 
<p>(7)在边界路由R2实现内网访问外网一般都使用默认路由<br> [R2]ip route-static 0.0.0.0 0 110.1.1.6</p> 
<p> </p> 
<p>(8)在边界路由R2上备份外网客户端访问内网的WEB服务器，在边界路由器R2的出接口GE0/0/1上<br> 配置nat server,协议为http,采用TCP传输，端口为80，公网地址为110.1.1.2映射内网WEB服务器地址<br> [R2]int g0/0/1<br> [R2-GigabitEthernet0/0/1]nat server protocol tcp global 110.1.1.2 80 inside 192.168.88.1 80</p> 
<p> </p> 
<p>(9)在边界路由R2上备份为使外网远程管理SW1，需要在边界路由R2备份配置nat server，<br> [R2]int g0/0/1<br> [R2-GigabitEthernet0/0/1]nat server protocol tcp global 110.1.1.3 23 inside 192.168.99.254 23</p> 
<p>(10)在边界路由R2上配置ospf<br> [R2]ospf 1 router-id 2.2.2.2<br> [R2-ospf-1]area 0<br> [R2-ospf-1-area-0.0.0.0]network 192.168.15.0 0.0.0.255<br> [R2-ospf-1-area-0.0.0.0]network 192.168.16.0 0.0.0.255</p> 
<p>(11)在边界路由R2上引入默认路由<br> [R2]ospf 1<br> [R2-ospf-1]default-route-advertise</p> 
<p>(12)把边界路由R2的GE0/0/0和GE0/0/2接口的开销分别改为10，3<br> [R2]int g0/0/0    <br> [R2-GigabitEthernet0/0/0]ospf cost 10<br> [R2]int g0/0/2    <br> [R2-GigabitEthernet0/0/2]ospf cost 3</p> 
<p>(13)在核心交换机做网关冗余<br> 在SW5、6上做vlan15、16的主从备份，虚拟IP为192.168.XX.254</p> 
<p>[SW5]int Vlanif 15<br> [SW5-Vlanif15]vrrp vrid 15 virtual-ip 192.168.15.254<br> [SW5-Vlanif15]vrrp vrid 15 priority 200<br> [SW5-Vlanif15]int Vlanif 16<br> [SW5-Vlanif16]vrrp vrid 16 virtual-ip 192.168.16.254<br> [SW5-Vlanif16]vrrp vrid 16 priority 100</p> 
<p>[SW6]int Vlanif 15<br> [SW6-Vlanif15]vrrp vrid 15 virtual-ip 192.168.15.254<br> [SW6-Vlanif15]vrrp vrid 15 priority 100<br> [SW6-Vlanif15]int Vlanif 16<br> [SW6-Vlanif16]vrrp vrid 16 virtual-ip 192.168.16.254<br> [SW6-Vlanif16]vrrp vrid 16 priority 200</p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9b577a7722cd1857cba18dae0acb92ee/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【2023最新版】Spring Cloud面试题总结（35道题含答案解析）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/22975a40c34a82ecbe67c58f0b5f5ead/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">1053 住房空置率(python)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程随想.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151182"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>